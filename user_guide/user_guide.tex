% Options for packages loaded elsewhere
\PassOptionsToPackage{unicode}{hyperref}
\PassOptionsToPackage{hyphens}{url}
%
\documentclass[
]{book}
\usepackage{amsmath,amssymb}
\usepackage{lmodern}
\usepackage{iftex}
\ifPDFTeX
  \usepackage[T1]{fontenc}
  \usepackage[utf8]{inputenc}
  \usepackage{textcomp} % provide euro and other symbols
\else % if luatex or xetex
  \usepackage{unicode-math}
  \defaultfontfeatures{Scale=MatchLowercase}
  \defaultfontfeatures[\rmfamily]{Ligatures=TeX,Scale=1}
\fi
% Use upquote if available, for straight quotes in verbatim environments
\IfFileExists{upquote.sty}{\usepackage{upquote}}{}
\IfFileExists{microtype.sty}{% use microtype if available
  \usepackage[]{microtype}
  \UseMicrotypeSet[protrusion]{basicmath} % disable protrusion for tt fonts
}{}
\makeatletter
\@ifundefined{KOMAClassName}{% if non-KOMA class
  \IfFileExists{parskip.sty}{%
    \usepackage{parskip}
  }{% else
    \setlength{\parindent}{0pt}
    \setlength{\parskip}{6pt plus 2pt minus 1pt}}
}{% if KOMA class
  \KOMAoptions{parskip=half}}
\makeatother
\usepackage{xcolor}
\usepackage{color}
\usepackage{fancyvrb}
\newcommand{\VerbBar}{|}
\newcommand{\VERB}{\Verb[commandchars=\\\{\}]}
\DefineVerbatimEnvironment{Highlighting}{Verbatim}{commandchars=\\\{\}}
% Add ',fontsize=\small' for more characters per line
\usepackage{framed}
\definecolor{shadecolor}{RGB}{248,248,248}
\newenvironment{Shaded}{\begin{snugshade}}{\end{snugshade}}
\newcommand{\AlertTok}[1]{\textcolor[rgb]{0.94,0.16,0.16}{#1}}
\newcommand{\AnnotationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\AttributeTok}[1]{\textcolor[rgb]{0.77,0.63,0.00}{#1}}
\newcommand{\BaseNTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{#1}}
\newcommand{\BuiltInTok}[1]{#1}
\newcommand{\CharTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\CommentTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textit{#1}}}
\newcommand{\CommentVarTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\ConstantTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\ControlFlowTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{\textbf{#1}}}
\newcommand{\DataTypeTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{#1}}
\newcommand{\DecValTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{#1}}
\newcommand{\DocumentationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\ErrorTok}[1]{\textcolor[rgb]{0.64,0.00,0.00}{\textbf{#1}}}
\newcommand{\ExtensionTok}[1]{#1}
\newcommand{\FloatTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{#1}}
\newcommand{\FunctionTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\ImportTok}[1]{#1}
\newcommand{\InformationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\KeywordTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{\textbf{#1}}}
\newcommand{\NormalTok}[1]{#1}
\newcommand{\OperatorTok}[1]{\textcolor[rgb]{0.81,0.36,0.00}{\textbf{#1}}}
\newcommand{\OtherTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{#1}}
\newcommand{\PreprocessorTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textit{#1}}}
\newcommand{\RegionMarkerTok}[1]{#1}
\newcommand{\SpecialCharTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\SpecialStringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\StringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\VariableTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\VerbatimStringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\WarningTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\usepackage{longtable,booktabs,array}
\usepackage{calc} % for calculating minipage widths
% Correct order of tables after \paragraph or \subparagraph
\usepackage{etoolbox}
\makeatletter
\patchcmd\longtable{\par}{\if@noskipsec\mbox{}\fi\par}{}{}
\makeatother
% Allow footnotes in longtable head/foot
\IfFileExists{footnotehyper.sty}{\usepackage{footnotehyper}}{\usepackage{footnote}}
\makesavenoteenv{longtable}
\usepackage{graphicx}
\makeatletter
\def\maxwidth{\ifdim\Gin@nat@width>\linewidth\linewidth\else\Gin@nat@width\fi}
\def\maxheight{\ifdim\Gin@nat@height>\textheight\textheight\else\Gin@nat@height\fi}
\makeatother
% Scale images if necessary, so that they will not overflow the page
% margins by default, and it is still possible to overwrite the defaults
% using explicit options in \includegraphics[width, height, ...]{}
\setkeys{Gin}{width=\maxwidth,height=\maxheight,keepaspectratio}
% Set default figure placement to htbp
\makeatletter
\def\fps@figure{htbp}
\makeatother
\usepackage[normalem]{ulem}
\setlength{\emergencystretch}{3em} % prevent overfull lines
\providecommand{\tightlist}{%
  \setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}}
\setcounter{secnumdepth}{5}
\usepackage{booktabs}
\usepackage{booktabs}
\usepackage{longtable}
\usepackage{array}
\usepackage{multirow}
\usepackage{wrapfig}
\usepackage{float}
\usepackage{colortbl}
\usepackage{pdflscape}
\usepackage{tabu}
\usepackage{threeparttable}
\usepackage{threeparttablex}
\usepackage[normalem]{ulem}
\usepackage{makecell}
\usepackage{xcolor}
\ifLuaTeX
  \usepackage{selnolig}  % disable illegal ligatures
\fi
\usepackage[]{natbib}
\bibliographystyle{apalike}
\IfFileExists{bookmark.sty}{\usepackage{bookmark}}{\usepackage{hyperref}}
\IfFileExists{xurl.sty}{\usepackage{xurl}}{} % add URL line breaks if available
\urlstyle{same} % disable monospaced font for URLs
\hypersetup{
  pdftitle={VE NHTS},
  pdfauthor={Nick Fournier},
  hidelinks,
  pdfcreator={LaTeX via pandoc}}

\title{VE NHTS}
\author{Nick Fournier}
\date{2022-09-21}

\begin{document}
\maketitle

{
\setcounter{tocdepth}{1}
\tableofcontents
}
\hypertarget{welcome}{%
\chapter*{Welcome}\label{welcome}}
\addcontentsline{toc}{chapter}{Welcome}

This guide contains documentation for users and developers of the VisionEval modeling system. This guide contains a diversity of information intended for different audiences interacting with VisionEval. The table below contains a list of chapters contained in this guide along with their descriptions and can be referenced identify the sections that will serve the best starting points.

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 2\tabcolsep) * \real{0.3182}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 2\tabcolsep) * \real{0.6818}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Chapter
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule()
\endhead
\protect\hyperlink{getting-started}{Getting Started} & Instructions on getting started with VisionEval on your computer \\
\protect\hyperlink{conceptprimer}{Concept Primer} & A high-level introduction to the concepts and definitions underlying the VisionEval modeling system \\
\protect\hyperlink{tutorial}{VisionEval Tutorial 101} & Introductory tutorial on how to start applying a VisionEval model \\
\protect\hyperlink{verspm}{VERSPM Tutorial} & Comprehensive and in-depth tutorial materials on the VERSPM model \\
\protect\hyperlink{vestate}{VE-State Tutorial} & Comprehensive and in-depth tutorial materials on the VE-State model \\
\protect\hyperlink{verpat}{VERPAT Tutorial} & Comprehensive and in-depth tutorial materials on the VERPAT model \\
\protect\hyperlink{developer}{Developer Documentation} & Information for developers or researchers interested in making contributions to the VisionEval system \\
\protect\hyperlink{api-documentation}{API Documentation} & Module documentation from the model source code \\
\protect\hyperlink{ve-estimation}{Estimation in VisionEval} & Overview of model estimation in VisionEval and instructions to customize model applications \\
\protect\hyperlink{ve-buildprocess}{Module Build Process} & Overview of building a VisionEval package module using custom data \\
\protect\hyperlink{ve-popsim}{Population Synthesis} & Customizable household data and third-party population synthesis \\
\protect\hyperlink{software-framework-1}{Software Framework} & Technical overview of the VisionEval software framework \\
\bottomrule()
\end{longtable}

\hypertarget{about-visioneval}{%
\section*{About VisionEval}\label{about-visioneval}}
\addcontentsline{toc}{section}{About VisionEval}

VisionEval is a collaborative project to build a family of strategic tools for performance-based transportation planning into a single open-source programming framework. Strategic tools are designed to evaluate many alternative futures and policies to help state and metropolitan area governments address pressing issues, despite uncertainty.

\hypertarget{why-use-visioneval}{%
\section*{Why Use VisionEval?}\label{why-use-visioneval}}
\addcontentsline{toc}{section}{Why Use VisionEval?}

Strategic planning is becoming increasingly important as a means to help state and metropolitan area governments select policies and actions to address pressing issues that are fraught with uncertainty. More specifically, Federal direction has challenged state, regional, and local transportation agencies with measuring the outcomes of decisions through performance-based planning, including considering how transportation solutions may impact future goals such as sustainability, health, and mobility. Further complicating matters, plans need to be resilient to changing transportation and land use trends and the implications of emerging technologies and constraints. VisionEval is an open source common framework building on the successful GreenSTEP family of strategic planning tools that is intended to address these needs.

VisionEval merges this family of tools into an open-source project with a supporting community forum of partner agencies and others sharing in its use and enhancement. The goal is to support a broad array of potential tool uses and enable pooled enhancements expanding the types of outcomes measured or refine the specificity of transportation and land use solutions considered. The work to date draws from successful past and interested future users nationally, who will both define the policy needs and uses of these tools, and set their direction moving forward.

\hypertarget{how-to-use-this-guide}{%
\section*{How to Use this Guide}\label{how-to-use-this-guide}}
\addcontentsline{toc}{section}{How to Use this Guide}

This guide contains a diversity of information intended for different audiences interacting with the VisionEval system. Use the list below to try to identify what kind of user you are and the sections of this guide that will serve the best starting points.

\textbf{Decision-maker \& semi-technical planner:} You are interested in applying the VisionEval system but want a high-level overview and not the technical details.

\begin{itemize}
\tightlist
\item
  \protect\hyperlink{conceptprimer}{Concept Primer}: An introduction to the concepts underlying the VisionEval modeling system and how it can be used to support transportation planning efforts, without technical model details.
\end{itemize}

\textbf{Model applier:} You are wanting to learn about the VisionEval system and implement a model application.

\begin{itemize}
\tightlist
\item
  \protect\hyperlink{getting-started}{Getting Started}: Instructions on how to get VisionEval installed and running
\item
  \protect\hyperlink{conceptprimer}{Concept Primer}: An introduction to the concepts underlying the VisionEval modeling system and how it can be used to support transportation planning efforts, without technical model details
\item
  Tutorials: Start with VisionEval Tutorial 101 for an introduction to start applying a VisionEval model, followed by referencing more in-depth tutorial materials on the \protect\hyperlink{verspm}{VERSPM}, \protect\hyperlink{verpat}{VERPAT}, and \protect\hyperlink{vestate}{VE-State} models.
\end{itemize}

\textbf{Developer:} You are a developer or researcher and interested in making contributions to the VisionEval system.

\begin{itemize}
\tightlist
\item
  \protect\hyperlink{developer}{Developer Documentation}
\end{itemize}

\hypertarget{getting-started}{%
\chapter{Getting Started}\label{getting-started}}

\hypertarget{overview}{%
\section{Overview}\label{overview}}

This page explains how to obtain the VisionEval software and install it, and provides a brief tour
of how the system can used to support scenario planning, and to develop strategies to manage
transportation system performance.

The remainder of this page explains how to install VisionEval, and provides a brief overview of what
to do with it after it is installed. Content in the \protect\hyperlink{tutorial}{VisionEval Tutorial} found later in this book contains more complete details on setting up VisionEval models with local data, running scenarios, and extracting and analyzing results.

\begin{itemize}
\tightlist
\item
  \protect\hyperlink{installation}{Installation and Setup}
\item
  \protect\hyperlink{workflow}{Workflow}
\item
  \protect\hyperlink{editrun}{Editing and Running Models}
\item
  \protect\hyperlink{results}{Getting Results}
\item
  \protect\hyperlink{walkthrough}{Using Walkthrough}
\end{itemize}

\hypertarget{installation-and-setup}{%
\section{Installation and Setup}\label{installation-and-setup}}

VisionEval runs within the R Statistical Environment on any system for which R is available. There
are two paths to installing VisionEval:

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\item
  \textbf{Install from the stand-alone Windows installer}:

  \begin{itemize}
  \tightlist
  \item
    \textbf{\href{https://visioneval.org/category/download.html}{Download a zipped folder}} from the VisionEval website for a specific version of R.\\
    This is the simplest way to quickly get VisionEval on your computer.
  \end{itemize}
\item
  \textbf{Copy, clone or `fork' the system code repository}:

  \begin{itemize}
  \item
    If you area a Mac/Linux user, or if you are interested in contributing to the development of
    VisionEval modules, models, framework, or visualizer, choose this path.
  \item
    The most recent stable release is hosted at \href{https://VisionEval/VisionEval}{VisionEval on
    \textbf{GitHub}}. Development releases are available at
    \href{https://VisionEval/VisionEval-Dev}{VisionEval-dev}. Once you have downloaded or cloned one of
    the VisionEval repositories, instructions for building a runtime are found in
    \texttt{build/Building.md} (or you can locate that file in the repository to preview it).
  \item
    Detailed instructions on obtaining the system code can be found later in this manual.
  \end{itemize}
\end{enumerate}

\hypertarget{install-for-windows}{%
\subsection{Install for Windows}\label{install-for-windows}}

\hypertarget{pre-requisites}{%
\subsubsection{Pre-requisites}\label{pre-requisites}}

You will need:

\begin{itemize}
\tightlist
\item
  \href{https://cran.r-project.org}{R, at least version 4.1.3}
\item
  \href{https://www.rstudio.com/products/rstudio/download/}{RStudio}
\end{itemize}

Once you have R and RStudio installed, you can retrieve the VisionEval
installer itself:

\hypertarget{installer}{%
\subsubsection{Installer}\label{installer}}

\textbf{\emph{\href{https://github.com/VisionEval/VisionEval-Dev/releases}{Get VisionEval Here}}}

\emph{Note: 580 Mb download! Packaged for R 4.1.3}

The link above will download a .zip file containing the following:

\begin{itemize}
\tightlist
\item
  The VisionEval framework code and sample models
\item
  All necessary R packages
\item
  Documentation (both this book as well as API documentation)
\end{itemize}

Unzip that file into an empty folder of your choice (e.g.~\texttt{C:\textbackslash{}VisionEval}).

\hypertarget{completing-the-installation}{%
\subsubsection{Completing the Installation}\label{completing-the-installation}}

After installing R 4.1.3 (or the version of R corresponding to the installer you are retrieving) and
RStudio, unzip the VisionEval installer into an empty destination folder of your choice.

To complete the installation and start VisionEval, do this:

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  Navigate to the folder into which you unzipped the installer:
\item
  Double-click \textbf{\texttt{VisionEval.Rproj}}
\end{enumerate}

RStudio will start, and the VisionEval will load. You should see a message similar to the following
in the RStudio Console:

\begin{verbatim}
Loading VisionEval for R4.1.3
Loading required package: VEModel
Welcome to the new VisionEval!
Running in C:/VisionEval
\end{verbatim}

If the \texttt{VisionEval.Rproj} file does not open RStudio when you double-click it,
you can start RStudio directly, then choose \texttt{File\ /\ Open\ Project...} and get
to the same place. By default, RStudio remembers the project you last loaded,
so having done that once you should get back to VisionEval each time you start
RStudio (unless you work on a different project).

\hypertarget{starting-visioneval-manually}{%
\subsubsection{Starting VisionEval Manually}\label{starting-visioneval-manually}}

If you need to start VisionEval manually for some reason, just start
RStudio (or even plain R), change into your installation folder using

\begin{itemize}
\tightlist
\item
  RStudio's \texttt{Session\ /\ Set\ Working\ Directory...} menu option, or
\item
  In plain R, the \texttt{File\ /\ Change\ dir...} menu option, or the \texttt{setwd} command on the R command line.
\end{itemize}

Then run this instruction to start VisionEval:

\begin{verbatim}
source("VisionEval.R")
\end{verbatim}

\hypertarget{workflow-of-visioneval}{%
\section{Workflow of VisionEval}\label{workflow-of-visioneval}}

VisionEval models and the underlying software framework are written in
the \href{https://www.r-project.org}{R programming language} for statistical
computing and graphics. The purpose of the model system and framework is
to enable models be created in a plug-and-play fashion from modules that
are distributed as R packages. A simple R script is used to implement a
model by initializing the model environment and then calling modules
successively. Scenarios are then constructed through a set of files that
provide variant model inputs for evaluation and comparison.

To use VisionEval to evaluate scenarios, there are several elements that
users need to set up:

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\item
  Select and install one of the \href{https://github.com/VisionEval/VisionEval/wiki/VisionEval-Models}{VisionEval models},
  customizing it as needed:

  \begin{itemize}
  \tightlist
  \item
    \textbf{\href{https://github.com/VisionEval/VisionEval-Dev/blob/readme-dev/docs/tutorials/verspm/Main.md}{VERSPM}}
    -- Regional Strategic Planning Model
  \item
    \textbf{\href{https://github.com/VisionEval/VisionEval/wiki/VERPAT-Tutorial-Overview}{VERPAT}}
    -- Rapid Policy Analysis Tool
  \item
    \textbf{\href{https://github.com/VisionEval/VisionEval/wiki/VE-State-Status}{VE-State}}
    -- VisionEval State-Level Model
  \end{itemize}

  Instructions and tutorials for configuring these models are presented in the model-specific tutorials elsewhere in \href{https://visioneval.org/book}{this book}, which is your entry point to a wealth of documentation on the VisionEval models.
\item
  Develop a \emph{Base Model} for the region under analysis. The Base Model specifies:

  \begin{itemize}
  \tightlist
  \item
    \textbf{Model Geography} (zone structure), reported as Marea (metropolitan area), AZones
    (county-sized), and BZones (often census-tract-sized or could be related to Traffic Analysis Zones in other travel demand models) and related configuration files
  \item
    \textbf{Base and Future Years} to be evaluated for each scenario (e.g., 2019 and 2050)
  \item
    \textbf{Local Data Files} describing Base Scenario conditions in the region (including both
    observed base year data, and estimates of future year conditions with no scenario policies
    applied)
  \end{itemize}
\item
  Develop variant \emph{Future Actions} and \emph{Scenarios}, by adjusting specific input elements for the
  Future Years. VisionEval models support having many different scenarios. See the scenario
  development chapter later in this book for details.
\item
  Run the model to process each of its scenarios.
\item
  Extract or query the results for summarization and further analysis in R or export tabular data
  files to other data analysis systems.
\end{enumerate}

\hypertarget{editing-and-running-models}{%
\section{\texorpdfstring{Editing and Running Models }{Editing and Running Models }}\label{editing-and-running-models}}

As described in the model tutorials, a VisionEval Model contains the following components:

\begin{itemize}
\tightlist
\item
  Model configuration: \texttt{visioneval.cnf}
\item
  The model script file, typically called \texttt{run\_model.R} (sometimes in a \texttt{/scripts} sub-folder), which describes the steps that
  will be performed when the model runs
\item
  Global parameters describing the model geography, preferred data units, and currency conversion deflators in the \texttt{/defs} sub-folder
\item
  Base Model Input data in the \texttt{/inputs} sub-folder
\item
  Pre-defined query scripts (in the \texttt{/queries} sub-folder) that can extract useful metrics from the model scenarios once they have run
\item
  Additional optional folders for the model scenarios (either as top-level directories or within the \texttt{/scenarios} sub-folder, which describe
  how that scenario various from the Base Model. Scenarios may have some different inputs or a different model script.
\end{itemize}

Once any of the model scenarios have been run, the model will also have a \texttt{/results} sub-folder.
After queries have been run or raw results extracted into a tabular data format like \texttt{.csv}, there
will be a sub-folder within \texttt{/results} called \texttt{/output}.

See the tutorial chapters later in this book for instructions on how to set up VisionEval for your
local area. Typically, you will start by installing one of the standard models and then adjusting
\texttt{visioneval.cnf}, \texttt{/defs} and \texttt{/inputs} to complete your local Base Model. Once you have completed
the Base Model, you can add scenarios to your model (as described later) by varying a few inputs to
describe alternate future conditions.

\hypertarget{end-user-interface}{%
\section{\texorpdfstring{ End User Interface }{ End User Interface }}\label{end-user-interface}}

VisionEval includes a simple R command-line interface for running models and extracting their results.

The tutorials later in this book will explain how to select and customize one of the VisionEval
models, as well as how to develop inputs and create scenarios for your area.

Once you have received the \texttt{Welcome\ to\ the\ new\ VisionEval!} message, you can try things out by
copying or entering the following instructions into the R Console window. They will install the sample
VisionEval RSPM (Regional Strategic Planning Model) with inputs for the small Rogue Valley MPO in
Oregon, run the models, dump the model results into a text table (.csv format), and run a set of
basic queries to report model performance metrics.

\begin{verbatim}
rspm <- installModel("VERSPM")
rspm$run()
results <- rspm$results()
results$export()
query <- rspm$query("Full-Query")
query$run()
query$export()
\end{verbatim}

Exporting the results creates a series of \texttt{.csv} files in the \texttt{outputs} subfolder of \texttt{results}.
Exporting the query will create a table of metrics for each model year and scenario that is defined
in the model, placing that in another subfolder of \texttt{outputs}.

\hypertarget{using-the-walkthrough}{%
\section{\texorpdfstring{ Using the Walkthrough }{ Using the Walkthrough }}\label{using-the-walkthrough}}

Many additional features of VisionEval are systematically explored in commented R scripts located in
the VisionEval runtime \texttt{/walkthrough} folder. The walkthrough files are best explored using RStudio.

Here is an overview of the walkthrough files and what you will learn from each of them:

\begin{description}
\tightlist
\item[00-setup.R]
Sets up the walkthrough runtime directory
\item[00-walkthrough.R]
Master list of walkthrough scripts (nothing specific to run here)
\item[01-install.R]
How to install a VisionEval model sample from the packaged examples
\item[02-running.R]
How to run a VisionEval model
\item[03-structure.R]
The components of a VisionEval model
\item[04-extract.R]
How to get raw results (or a subset) from a VisionEval model
\item[05-mini-model.R]
How to build a small model programatically (extended view of structure.R)
\item[06-model-stages.R]
The concept of model stages and how to manipulate them
\item[07-queries.R]
How to run queries (summarizing results) on model results (including scenarios)
\item[08-scenarios.R]
How to set model stages up as scenarios, run such a model, and examine results
\item[09-run-parameters.R]
Understanding run parameters (model configuration settings)
\item[10-debugging.R]
Using partial models to debug VisionEval
\end{description}

Once you have seen the message ``Welcome to the new VisionEval'', you can set up the walkthrough by
running this instruction:

\begin{verbatim}
walkthrough()
\end{verbatim}

The walkthrough will create a special runtime directory (within your main runtime folder), so
nothing you do while trying it out will affect any of your ``real'' models, which will remain
untouched in your ``models'' directory.

To explore any of the walkthrough scripts, open them in RStudio by navigating in the RStudio ``Files''
pane to the walkthrough directory, then double-clicking one of the scripts to open it in the RStudio
script editor. You then select individual lines in script editor and press ``Enter'' to run that line
in the console. You should run the lines in order (``walk through them'') and not skip any!

If things get messed up because you didn't run the walkthrough lines in order, it's usually enough
to back up and run the lines you skipped. If you need to, you can reset the walkthrough by starting
it like this:

\begin{verbatim}
walkthrough(reset=TRUE)
\end{verbatim}

Be careful: the ``reset=TRUE'' instruction will clear the walkthrough runtime. Anything you saved
there (including outputs from running and exporting the test models) will be lost. Your regular
runtime models directory will remain untouched.

\hypertarget{conceptprimer}{%
\chapter{Concept Primer}\label{conceptprimer}}

VisionEval differs from traditional travel demand models both in how it works and what kind of planning concerns it helps to address. This chapter provides a quick introduction approach to the unique features and applications of VisionEval. It reviews the main model components and key concepts at a high level, to assist new users in understanding concepts they will apply as they set up scenarios, develop inputs and evaluate outputs. Links to more detailed documentation will allow the reader to delve further into each topic, as they choose.

\hypertarget{what-can-i-do-with-visioneval}{%
\section{What can I do with VisionEval?}\label{what-can-i-do-with-visioneval}}

Structurally, VisionEval may be described as a ``disaggregate demand/aggregate supply'' model. That is, it combines rich demographic and socioeconomic detail from a synthetic population with aggregate treatments of travel (multi-modal VMT and congestion without explicit trips, or transport networks). The implication of the ``aggregate supply'' model is that VisionEval cannot be used to evaluate performance of specific projects or corridors.

What VisionEval can do, and even makes especially simple, is to evaluate large numbers of scenarios and explore how combinations of alternative future conditions might affect performance measures. Travel demand models, whether built using traditional trip-based or more contemporary activity-based techniques, sacrifice flexibility for network detail. It is difficult in such models to capture novel behaviors such as an increased propensity to use inexpensive ride-hailing services, or to express shifts in vehicle ownership and occupancy that may be influenced by multiple factors some of which have not yet been observed. Yet these potential shifts are often very important for assessing the potential of pricing, investment strategies or other policy priorities. VisionEval also makes it relatively simple to explore risks and opportunities that may eventually be realized as new transportation options mature.

VisionEval won't help us determine if a particular highway segment should be built or upgraded, or what kind of transit service improvements should be extended into new areas. But it can help us look at the market for new technologies, and explore future scenarios that are based both on changed circumstances (altered demographics, increased congestion, or alternate road pricing strategies) as well as on changed behaviors (including behaviors that \emph{might} happen, but that we have not yet observed because the key enabling technologies are too early in their deployment). VisionEval results can be explored in detail by market segment, asking questions about how benefits might be distributed regionally, and what overall system performance might look like.

Ultimately, VisionEval is a system for asking a very broad range of ``what if'' questions about how the transportation system might perform, and how its benefits and costs might be distributed over the community. It can efficiently process hundreds of scenarios looking at many different types of interventions, alternative policies, and hypothetical future conditions and travel behaviors. The results can inform strategic questions, helping decision makers answer questions such as ``What are our options for achieving this performance result?'' or ``What are our risks if new transportation technologies develop in these different ways?''

Using VisionEval to answer such questions does not make other types of modeling obsolete (such as travel demand models or corridor microsimulations). Instead, it helps to determine what is worth the effort to code into these more detailed models, and also to explore and document novel assumptions about the future that may require extra effort to implement, and that would be prohibitively expensive to explore through traditional planning models.

\hypertarget{strengths-and-limitations}{%
\section{Strengths and limitations}\label{strengths-and-limitations}}

VisionEval operates at broad geographic levels and without explicit network representations to enable very fast analyses across scores of different assumptions and inputs. It is especially well suited for quickly evaluating several different combinations of policies or assessing the range of impacts when uncertainty exists in several key inputs. Because much of the travel behavior is asserted based on observed travel patterns the latter can be changed to reflect expected changes due to new technologies, services, and expected changes in behavior over time. Thus, VisionEval is better suited than traditional travel modeling approaches for certain pursuits:

\begin{itemize}
\tightlist
\item
  Screening a wide range of policy actions, especially in the face of uncertainties where ranges of expected responses or effects must be considered
\item
  Resilience testing under uncertainties (e.g., population growth, household size, fuel prices)
\item
  Directly ``comparing and contrasting'' broad ranges or combinations of policies (e.g., ITS, transit service, active transport, demand management)
\item
  Analysis of broad policy or technology changes (e.g., carbon taxes, low-carbon fuels)
\item
  Evaluating fuel consumption, particulate emissions, and greenhouse gas emissions impacts of proposed policies
\end{itemize}

However, VisionEval is not well suited for detailed geographic analyses, to include the effects of congestion on individual trips or tours. Thus, examining the effects of localized land use (e.g.~parcel or block) or network assumptions cannot be carried out using VisionEval. Improvements in network capacity, efficiency, or safety can only be indirectly incorporated in VisionEval.

\hypertarget{visioneval-geographies}{%
\section{VisionEval geographies}\label{visioneval-geographies}}

Traditional travel forecasting models divide a study area into thousands of traffic analysis zones in order to facilitate highly granular spatial analyses. This allows trip (tour segment) origins and destinations to enter and exit a detailed representation of the multimodal transportation network in order to study network flows, congestion, and efficiency outcomes. VisionEval operates at a much broader spatial scale, using several levels of geography:

\begin{itemize}
\tightlist
\item
  A \protect\hyperlink{region}{{region}} defines the entire area covered by the VisionEval analyses
\item
  \protect\hyperlink{azones}{{Azones}} are large areas such as cities, counties, or Census Public Use Microdata Areas (PUMAs)
\item
  \protect\hyperlink{bzones}{{Bzones}} are subdivisions of Azones that represent neighborhoods, Census tracts or block groups, or other relatively homogenous areas
\item
  \protect\hyperlink{metropolitan-area}{{Metropolitan areas}} (Marea) are defined as groups of Azones that define them
\end{itemize}

The \protect\hyperlink{location-type}{{location type}} of each household is also coded as urban, town, or rural areas. A \protect\hyperlink{place-type}{{place type}} is also defined in terms of urban density and its mix of jobs and housing. Both are usually defined for each Bzone used in the model.

\begin{quote}
Watch a \href{https://youtu.be/-ylFbyLfhbw?t=4690}{video presentation} with more information about VisionEval geographies
\end{quote}

\hypertarget{performance-metrics}{%
\subsection{Performance metrics}\label{performance-metrics}}

The following table summarizes many of the possible performance metrics that can be summarized at the region level. The ability to easily export the data enables the analyst to construct new or different performance measures easily.

\begin{itemize}
\tightlist
\item
  Mobility

  \begin{itemize}
  \tightlist
  \item
    Daily VMT per capita
  \item
    Annual walk trips per capita
  \item
    Daily Bike trips per capita
  \end{itemize}
\item
  Economy

  \begin{itemize}
  \tightlist
  \item
    Annual all vehicle delay per capita (hours)
  \item
    Daily household \protect\hyperlink{parking-costs}{{parking costs}}
  \item
    Annual household \protect\hyperlink{vehicle-operating-costs}{{vehicle operating cost}} (fuel, taxes, parking)
  \item
    Annual household \protect\hyperlink{vehicle-operating-costs}{{vehicle ownership costs}} (depreciation, vehicle maintenance, tires, finance charge, insurance, registration)
  \end{itemize}
\item
  Land Use

  \begin{itemize}
  \tightlist
  \item
    Number or percent of residents living in \protect\hyperlink{mixed-use}{{mixed use}} areas
  \item
    Number of dwelling units by housing type (e.g., single family {[}SF{]}, multi-family {[}MF{]})
  \end{itemize}
\item
  Environmental

  \begin{itemize}
  \tightlist
  \item
    Annual greenhouse gas emissions per capita
  \item
    Household vehicle greenhouse gas/mile
  \item
    Commercial vehicle greenhouse gas/mile
  \item
    Transit vehicle greenhouse gas/mile
  \end{itemize}
\item
  Energy

  \begin{itemize}
  \tightlist
  \item
    Annual per capita fuel consumption for all vehicles (gallons)
  \item
    Average \protect\hyperlink{fuel-efficiency}{{fuel efficiency}} (net miles per gallon) for all vehicles
  \item
    Annual external \protect\hyperlink{social-costs}{{social costs}} per households (total/percent paid)
  \end{itemize}
\end{itemize}

\hypertarget{typical-applications}{%
\section{Typical applications}\label{typical-applications}}

VisionEval can be used to inform planning in several different realms, as described in the following sections.

\hypertarget{strategic-modeling}{%
\subsection{Strategic modeling}\label{strategic-modeling}}

VisionEval is a strategic modeling system. It differs from traditional travel demand and microsimulation models principally in that it is applied earlier in the planning process, and it is used for different purposes. Rather than examining the detailed performance of specific facilities (assessing individual projects), VisionEval estimates regional and small area performance metrics that reflect overarching policy goals such as emission reduction, regional VMT, or mode share.

Traditional travel models used for planning purposes are applied to estimate outcomes under a small number of alternate input scenarios that vary land use characteristics (e.g.~type and density of land uses), socioeconomic characteristics (e.g.~population, ages, incomes), and/or transportation characteristics (e.g.~road alignments, lane configurations, tolls, etc.). In these models, the response to the changed inputs is estimated based on parameters typically derived from household surveys and other related data sources: that is, the behavior in the model is presumed to be what we see today. Even though such models are often behaviorally complex (e.g., activity-based models), the effort required to assess many alternative scenarios is often prohibitive, and because such models are built using complex estimation procedures rooted in detailed data about existing behavior, it can be technically difficult or impossible to reliably encode possible future shifts in behavior, or to explore alternative possible future behaviors.

VisionEval is typically set up to run many scenarios that explore a broad set of alternative policies and investment priorities that may result from a variety of possible categories of policy and project interventions, or from a range of possible future conditions (strong or weak economic growth, demographics that shift at different rates), or from uncertain deployment of new technologies such as app-based ridesharing (Transportation Network Companies or TNCs).

A full application of VisionEval may examine hundreds or even thousands of permutations of inputs representing many possible future outcomes. The outputs allow planners and decision-makers to explore the outcomes of each scenario compared to the others, so they can visualize and discuss the relative impact and cross-influences, as well as the unintended consequences, of factors represented across the scenarios. VisionEval allows planners to assess alternative assumptions about uncertain phenomena such as autonomous vehicle (AV) deployment, it is a very effective tool for identifying risks and opportunities, as well as for formulating effective strategic responses to new challenges for which little current data exists or for which many outcomes are possible yet none are certain. The most interesting of the resulting strategic plans can be refined with more detailed models. Based on the strategic modeling findings, uncertainties can be confidently simplified into a smaller number of scenarios to explore in detail.

Notwithstanding its typical application as a strategic model, VisionEval does allow detailed investigation of certain phenomena such as fleet composition and vehicle ownership in relation to Greenhouse Gas Analysis. It also is unique in its ability to explore budget constraints on travel. Its simulation of individual households enables it to assess policies that would be difficult or impossible to model successfully with traditional models.

\hypertarget{local-policy-actions}{%
\subsection{Local policy actions}\label{local-policy-actions}}

VisionEval is well suited for evaluating a wide range of local policies at varying levels of geography:

\begin{itemize}
\tightlist
\item
  Demographics (Azone)

  \begin{itemize}
  \tightlist
  \item
    Population by age (households \& non-institutional group quarters)
  \item
    Average household size and percent of single-person households
  \item
    Driver licensing rates (optional)
  \item
    Average per capita Income
  \end{itemize}
\item
  LandUse (Bzone)

  \begin{itemize}
  \tightlist
  \item
    Employment by type (Total, Retail, Service)
  \item
    \protect\hyperlink{dwelling-unit-type}{{Dwelling units}} by type (SF, MF)
  \item
    Income quartiles (for allocating households to neighborhoods and \protect\hyperlink{dwelling-unit-type}{{Dwelling units}})
  \item
    Share of households in \protect\hyperlink{urban-mixed-use}{{urban mixed-use}} areas (optional)
  \item
    \protect\hyperlink{buit-form-measures}{{5D built form measures}} (Design \& Transit)
  \item
    Developable area
  \item
    Parking pricing policies
  \end{itemize}
\item
  Transportation Operations Actions

  \begin{itemize}
  \tightlist
  \item
    \protect\hyperlink{road-lane-miles}{{Road lane-miles}} (freeways, arterials) (Marea)
  \item
    \protect\hyperlink{transit-service-miles}{{Transit service}} (service miles by transit mode) (Marea)
  \item
    \protect\hyperlink{short-trip-sov-diversion}{{Short SOV trip diversion}} (to bikes, personal electrics, etc.) (Azone)
  \item
    \protect\hyperlink{its}{{ITS}} Operations (Ramp metering, Incident response, (Marea)
  \item
    ITS \protect\hyperlink{speed-smoothing}{{speed smoothing}} (Freeway ATM, Art Signal optimization) (Marea)
  \item
    VMT covered by Drivers in \protect\hyperlink{ecodrive}{{Eco-Drive}} programs (Marea)
  \item
    EV Charging infrastructure (residential) (Azone)
  \end{itemize}
\item
  Pricing

  \begin{itemize}
  \tightlist
  \item
    Fuel and electricity costs (Azone)
  \item
    Road cost recovery -- registration fee, gas taxes, VMT fee (Azone)
  \item
    \protect\hyperlink{carbon-price}{{Carbon pricing}} and otherand other environmental impact and \protect\hyperlink{social-costs}{{social costs}} (Region)
  \item
    \protect\hyperlink{congestion-fee}{{Congestion fees}} (Marea)
  \item
    \protect\hyperlink{pay-as-you-drive}{{PAYD insurance}} participation (Azone)
  \end{itemize}
\item
  Vehicle, Fuels, \& Emissions

  \begin{itemize}
  \tightlist
  \item
    Electricity \protect\hyperlink{carbon-intensity}{{carbon intensity}} (Azone)
  \item
    Fuel \protect\hyperlink{carbon-intensity}{{carbon intensity}} (composites by vehicle group) (Region)
  \item
    LDV-HH percent light trucks (stock) (Azone)
  \item
    LDV-HH \protect\hyperlink{vehicle-age}{{vehicle age}} average (Azone)
  \item
    LDV \protect\hyperlink{car-service}{{car service}}, vehicle mix (stock) (Region)
  \item
    Transit vehicles \& fuels mix (Marea)
  \item
    LDV \protect\hyperlink{commerical-service}{{commercial service}} vehicle mix, \%Light Trucks (stock) (Region)
  \item
    \protect\hyperlink{heavy-truck}{{Heavy truck}} vehicle mix (stock) (Region)
  \end{itemize}
\end{itemize}

\hypertarget{scenario-analyses}{%
\section{Scenario analyses}\label{scenario-analyses}}

A key value of VisionEval is how it facilitates running many scenarios or possible futures. In practice, the user typically starts by setting up the model with a reference scenario (i.e.~a scenario that represents current policies and extrapolation of current trends). The model can be validated for current and past years at this point. This Reference scenario then serves as a pivot point for the development of alternative scenarios that modify one or more policy assumptions or other assumptions about the future (e.g.~assumptions about urban area expansion, assumptions about future light-duty vehicle fleet composition). Because VisionEval models address a large number of factors that are specified by dozens of input files, and because each set of inputs could have many different values, the potential number of alternate scenarios that could be defined is probably uncountable. For this reason, the scenario generation process is simplified by defining \emph{categories} of inputs that are related in how they affect behavior or are related in how policies are likely to be deployed. An example of the former would be the definition of a pricing category that groups all inputs affecting the price/cost of operating light-duty vehicles (e.g.~fuel price, congestion price, carbon price). An example of the latter would be the definition of a land use category which in addition to including land use inputs such as development density, also includes transportation inputs that are associated with land use such as transit service frequency. For each category of inputs, several \emph{levels} of change from the reference scenario assumptions are defined. Alternate scenarios can then be developed by swapping out reference scenario inputs in each category with different level inputs for the category. This is typically done in two ways:

\begin{itemize}
\tightlist
\item
  Sensitivity tests that change a single category of inputs for each run. Such tests are useful for exploring the relative effects of each category.
\item
  Combinatorial tests which compose scenarios from combinations of all categories and all levels.
\end{itemize}

Note that the number of combinatorial scenarios is a function of the number of categories and the number of levels in each category. For example, if inputs are grouped into 5 categories and each category has 3 levels, at total of 243 scenarios (3x3x3x3x3) would be generated by all combinations. For this reason, automated processes are typically developed to aid in the set-up and running of these scenarios, and analysis of the results.

\hypertarget{building-blocks}{%
\section{Building blocks}\label{building-blocks}}

\hypertarget{household-synthesis-and-land-use}{%
\subsection{Household synthesis and land use}\label{household-synthesis-and-land-use}}

One of the strengths of VisionEval is the rich detail on individual households. This allows for household specific policies, travel behavior can respond to specific household costs and attributes, and outputs can be mined for differences by population groups. The approach of building on a synthesized population borrows from the state of the practice in activity-based travel demand models.

\begin{quote}
Watch a \href{https://youtu.be/-ylFbyLfhbw?t=5371}{short video} on household synthesis
\end{quote}

VisionEval creates simulated households in each Azone from user-supplied projections of persons by \protect\hyperlink{age-group}{{age group}} and average per capita income. Each simulated household has the characteristics of the number of persons in each of 6 age groups, number of workers in each of 5 age groups, \protect\hyperlink{lifecycle}{{lifecycle category}}, and household income. The simulated households are assigned a \protect\hyperlink{dwelling-unit-type}{{dwelling unit type}} (single family or multi-family) using a model that is sensitive to the household characteristics and the number of units of each type assigned to the Azone (based on user inputs). Each simulated household is assigned to a Bzone based on the number of dwelling units of their assigned type in each Bzone and the household's income compared to the relative income distribution by BZone. Separately, Bzones are attributed with employment and land use attributes (\protect\hyperlink{location-type}{{location type}}, \protect\hyperlink{buit-form-measures}{{built form `D' values}}, \protect\hyperlink{urban-mixed-use}{{urban mixed use}}, and \protect\hyperlink{employment-type}{{employment by type}}). Household members who are workers are assigned a Bzone work location as a function of the distribution of jobs in the model area. Each home and work location is tied to a specific Bzone with its associated attributes.

Policies are added to each household as a function of their home and work Bzones:

\begin{itemize}
\tightlist
\item
  Parking restrictions (work and non-work)
\item
  \protect\hyperlink{travel-demand-management}{{Travel demand management}} (TDM) programs (home and work-based)
\item
  \protect\hyperlink{car-service}{{Car service}} availability
\end{itemize}

The following sections describe each module that contributes to this concept.

\hypertarget{synthesize-households}{%
\subsubsection{Synthesize households}\label{synthesize-households}}

Household synthesis is carried out in several steps:

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  \emph{Create customized PUMS dataset}: This is done prior to setting up a model in VisionEval. A household dataset is prepared from \protect\hyperlink{census-pums}{{Census PUMS}} data for the modeled region. The default data included with VisionEval is for Oregon. PUMS data for other regions may be used instead, rebuilding the package to reflect Census households for the region of interest.
\item
  \emph{Create Households}: The identified types of PUMS households are expanded to meet user control totals and other demographic inputs. \protect\hyperlink{census-pums}{{Census PUMS}} data are used define probabilities that a person by \protect\hyperlink{age-group}{{age group}} would be found in each of hundreds of household types. A matrix balancing process is used to allocate persons by age to each of the PUMS household types in a way that matches input control totals and optional constraints. The sampled households are expanded to meet user control totals and other demographic inputs.
\item
  \emph{Predict Workers}: The number of workers by \protect\hyperlink{age-group}{{age group}} within each simulated household is predicted using \protect\hyperlink{census-pums}{{Census PUMS}} probabilities. The user may optionally specify changes in employment rates by age group and Azone to simulate changes in labor force participation over time and/or differences in employment rates by location.
\item
  \emph{Assign LifeCyle}: Categorizes households are categorized by six \protect\hyperlink{lifecycle}{{lifecycle}} categories given the household age mix and employment status.
\item
  \emph{Predict Income}: The annual income for each simulated household is predicted as a function of the household's worker count by age group, the average per capita income where the household resides (AZone), and interactions between neighborhood income and age (all and seniors). The models are estimated with \protect\hyperlink{census-pums}{{Census PUMS}} data.
\end{enumerate}

\hypertarget{household-drivers-and-autos}{%
\subsubsection{Household drivers and autos}\label{household-drivers-and-autos}}

The number of drivers and autos in each household are calculated in two steps:

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  \emph{Assign Drivers}: Drivers by \protect\hyperlink{age-group}{{age group}} are assigned to each household as a function of the numbers of persons and workers by age group, the household income, land use characteristics, and transit availability. \protect\hyperlink{metropolitan-area}{{Metropolitan areas}} are also sensitive to transit service level and urban \protect\hyperlink{mixed-use}{{mixed use}} indicators at the home location. Optional restriction on drivers by age group can be used in calibration or to address trends such as lower millennial \protect\hyperlink{licensure-rate}{{licensure rates}}.
\item
  \emph{Assign Vehicle Ownership}: The number of vehicles owned or leased by each household are determined as a function of household characteristics, land use characteristics, and transportation system characteristics. Households in \protect\hyperlink{metropolitan-area}{{metropolitan areas}} are also sensitive to \protect\hyperlink{transit-service-levels}{{transit service level}} and \protect\hyperlink{urban-mixed-use}{{urban mixed use}} indicators at the home location. The model first predicts zero-auto households and then the number of vehicles owned (up to 6), if any.
\end{enumerate}

\hypertarget{land-use-attributes}{%
\subsubsection{Land use attributes}\label{land-use-attributes}}

Two steps are required to add land use attributes to the synthetic population:

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  \emph{Calculate 4D Measures}: Several land use \protect\hyperlink{buit-form-measures}{{5D built form measures}} are calculated for each Bzone. The \texttt{density}, \texttt{diversity}, and \texttt{destination} accessibilities are based on Bzone population, employment, dwelling units, and \texttt{developable\ land\ area} inputs. The \texttt{design} variable is a user input.
\item
  \emph{Calculate Urban Mixed Use Measure}: An \protect\hyperlink{urban-mixed-use}{{urban mixed}} measure for the household is calculated based on population density of the home Bzone and \protect\hyperlink{dwelling-unit-type}{{dwelling unit type}}. The model is based on 2001 NHTS data. The model iterates to match an optional input target on the share of households to locate in \protect\hyperlink{urban-mixed-use}{{urban mixed-use}} areas.
\end{enumerate}

\hypertarget{land-use-household-linkages}{%
\subsubsection{Land use-household linkages}\label{land-use-household-linkages}}

Several land use attributes are added to each household:

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  \emph{Assign Location Types}: Households are assigned to land use \protect\hyperlink{location-type}{{location types}} -- urban, town, or rural -- by random allocation based on the household's \protect\hyperlink{dwelling-unit-type}{{dwelling unit type}} and input proportions on the mix of dwelling types in its enclosing Bzone.
\item
  \href{https://github.com/VisionEval/VisionEval/blob/master/api/VE_Training_March_13-14_2019/VE_Training.md\#41-predicthousing-module}{\emph{Predict Housing}}: \protect\hyperlink{dwelling-unit-type}{{Dwelling unit types}} are assigned to regular and group quarter households based on the input Bzone supply of dwelling units by type. Residential households also consider the relative costliness of housing within the Azone (logged ratio of the household's income relative to mean income in their Azone), household size, oldest age person, and the interaction of size and income ratio.
\item
  \href{https://github.com/VisionEval/VisionEval/blob/master/api/VE_Training_March_13-14_2019/VE_Training.md\#42-locateemployment-module}{\emph{Locate Employment}}: The number of input jobs by Bzone and \protect\hyperlink{employment-type}{{employment type}} (retail, service, total) are scaled so that total jobs equals total household workers within the Marea. A worker table is developed and each worker is assigned to a work Bzone. The assignment essentially uses a gravity-type model with tabulations of workers and jobs by Bzone (marginal controls) and distance between residence and employment Bzones (IPF seed, inverse of straight-line distances between home and all work Bzone centroids).
\end{enumerate}

\hypertarget{policy-levers}{%
\subsubsection{Policy levers}\label{policy-levers}}

Several assumptions about parking, demand management, and mobility services can also be coded:

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\item
  \href{https://github.com/VisionEval/VisionEval/blob/master/api/VE_Training_March_13-14_2019/VE_Training.md\#46-assignparkingrestrictions-module}{\emph{Assign Parking Restrictions}}: Households are assigned specific \protect\hyperlink{parking-restrictions}{{parking restrictions}} and fees for their residence, workplace(s), and other places they are likely to visit based on parking inputs by BZone (within Bzones coded as within metropolitan areas {[}Marea{]} only).

  \begin{itemize}
  \tightlist
  \item
    \emph{Residential Parking Restrictions \& Fees}: The number of free parking spaces available at the household's residence is set based on input value that identify the average residential parking spaces by dwelling type in each Bzone. For household vehicles that cannot be parked in a free space a residential parking cost (part of auto ownership costs) is identified as a function of input parking rates for the home Bzone (if any).
  \item
    \emph{Employer Parking and Fees}: Which workers pay for parking is set by inputs that define the proportion of workers facing parking fees in each Bzone. Whether their payment is part of a \protect\hyperlink{cash-out-buy-back}{{cash out/buy back}} program is similarly set by input proportions by Bzone and associated fees set by input parking rates for the work Bzone.
  \item
    \emph{Non-work Parking Fees:} The cost of parking for other activities such as shopping is estimated as the likelihood that a household would visit each Bzone and the parking fee in that Bzone. The likelihood is calculated with a gravity-type model, given the relative amount of activity in the Bzone (numbers of households by Bzone and the scaled retail and service job attractions by Bzone as marginals) and the proximity to each destination (inverse distance matrix from home Bzone seed matrix). The average daily parking cost is a weighted average of the fee faced in each destination bzone and the likelihood of visiting that Bzone.
  \end{itemize}
\item
  \href{https://github.com/VisionEval/VisionEval/blob/master/api/VE_Training_March_13-14_2019/VE_Training.md\#47-assigndemandmanagement-module}{\emph{Assign Demand Management}}: Households are assigned to \protect\hyperlink{individualized-marketing-programs}{{individualized marketing programs}} based on input participation levels within their home Bzone. Each worker in the household can also be assigned to an \protect\hyperlink{employee-commute-options-program}{{employee commute options program}} based on input participation levels for workers within their assigned work Bzone. A simple percentage reduction in household VMT is applied based on the household's participation in one or more of these program (maximum of multiple program participation, to avoid double-counting). Worker reductions are only applied to that worker's work travel portion of overall household VMT, and summed if multiple workers in the household participate in such programs.

  \begin{quote}
  Caution: The model assumes high-caliber TDM programs are in place that produce significant VMT savings. Inputs should reflect this.
  \end{quote}
\item
  \href{https://github.com/VisionEval/VisionEval/blob/master/api/VE_Training_March_13-14_2019/VE_Training.md\#48-assigncarsvcavailability-module}{\emph{Assign CarSvc Availability}}: A \protect\hyperlink{car-service}{{car service}} level is assigned to each household based on the input car service coverage for where the household resides (Bzone). High Car Service availability can have an impact on auto ownership (households may own fewer vehicles where high level car service is available) and auto operating cost (see the discussion in the next section on \protect\hyperlink{household-costs-and-budgets}{household costs and budgets}).
\end{enumerate}

\hypertarget{household-multimodal-travel}{%
\subsection{Household multimodal travel}\label{household-multimodal-travel}}

\begin{quote}
Watch a \href{https://youtu.be/-ylFbyLfhbw?t=5927}{video overview} of the Household Multimodal Travel module
\end{quote}

Travel of various modes by households (vehicle, transit, bike, and walk modes) is estimated as a simple function of the rich demographic and land use attributes of the household. In \protect\hyperlink{metropolitan-area}{{metropolitan areas}} travel is also influenced by inputs on transport supply on a per capita basis, such as available roadway capacity and \protect\hyperlink{bus-equivalent-miles}{{bus-equivalent transit service}} levels. Transit, bike, and walk trips are also influenced by household VMT (i.e.~if household VMT decreases, trips by these modes increase, and vise verse). Traditional travel models incorporate behavioral dynamics in choice models to build tours and trips for each synthetic person. VisionEval, by contrast, uses simple regression equations that directly estimate average per capita trips and miles by mode, linked by average trip lengths.

After adjusting VMT for household budget limitations it is further adjusted for household participation in TDM programs (home \& work-based) and \protect\hyperlink{sov-diversion}{{short-trip SOV diversion}} before calculating household trips for all modes. The household's bike miles are also adjusted to reflect SOV diversion input.

The following sections describe each module, which are implemented in sequence:

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  The household's daily VMT is calculated without household budget adjustments
\item
  The household's vehicle operating costs are calculated
\item
  The household's vehicle operating cost budget is calculated and daily VMT is adjusted to fit within the budget if necessary
\item
  Daily VMT reductions due to TDM measures and short-trip SOV diversions are calculated and applied
\item
  Vehicle and non-vehicular (AltMode) trips are calculated for each household
\end{enumerate}

\hypertarget{transport-supply}{%
\subsubsection{Transport supply}\label{transport-supply}}

Transport supply variables are defined in two steps. Note that these calculations are only carried out within \protect\hyperlink{metropolitan-area}{{metropolitan areas}}
(Mareas) only:

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  \emph{Assign Transit Service}: Transit service levels are input for each \protect\hyperlink{metropolitan-area}{{metropolitan areas}} and neighborhood (Bzone). Annual revenue-miles (i.e.~transit miles in revenue service) by eight \protect\hyperlink{transit-modes}{{transit modes}} are read from inputs for each metropolitan area. A Bzone-level \protect\hyperlink{transit-d}{{Transit D}} attribute defines access to transit (not yet work access) for each household based on inputs on relative transit accessibility. Using factors derived from the National Transit Database (NTD), input annual transit revenue miles for each of the eight transit modes are converted to \protect\hyperlink{bus-equivalent-miles}{{bus-equivalent miles}} by three \protect\hyperlink{transit-vehicle-type}{{transit vehicle types}} (van, bus, and rail). Per capita \protect\hyperlink{relative-transit-supply}{{relative transit supply}} and bus-equivalent service-miles are calculated.
\item
  \emph{Assign Road Miles}: Stores input on the numbers of freeway lane-miles and arterial lane-miles by \protect\hyperlink{metropolitan-area}{{metropolitan area}} and year. Computes the \protect\hyperlink{relative-roadway-supply}{{relative roadway supply}}, arterial and freeway lane-miles per capita.
\end{enumerate}

\hypertarget{household-travel-calculations}{%
\subsubsection{Household travel calculations}\label{household-travel-calculations}}

Household travel by vehicles are calculated in three steps:

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  \emph{Calculate Household Daily VMT (Dvmt)}: Household average daily vehicle miles traveled (VMT) is estimated as a function of household characteristics(income, workers, children, drivers), vehicle ownership, and attributes of the neighborhood (population density) and metropolitan area (\protect\hyperlink{urban-mixed-use}{{urban mixed-use}}, \protect\hyperlink{transit-service-levels}{{transit service level}}, freeway lane-miles) where the household resides. It also calculates household VMT percentiles which are used by other modules to calculate whether a household is likely to own an electric vehicle (EV) and to calculate the proportions of plug-in hybrid electric vehicles (PHEV) VMT powered by electricity. These values are derived from the 2001 \protect\hyperlink{nhts}{{NHTS}} data.
\item
  \emph{CalculateVehicleTrips}: This module calculates average daily vehicle trips for households consistent with the household VMT. Average length of household vehicle trips is estimated as a function of household characteristics (drivers/non-driers, income), vehicle ownership (\protect\hyperlink{auto-sufficiency}{{auto sufficiency}}), and attributes of the neighborhood (population density) and \protect\hyperlink{metropolitan-area}{{metropolitan area}} (\protect\hyperlink{urban-mixed-use}{{urban mixed-use}}, freeway lane-miles) where the household resides, and interactions among these variables. The average trip length is divided into the average household VMT to get an estimate of average number of daily vehicle trips.
\item
  \emph{Calculate AltMode Trips}: This module calculates household transit trips, walk trips, and bike trips. The models are sensitive to household VMT so they are run after all household VMT adjustments (e.g., to account for cost on household VMT) are made. Twelve models estimate trips for the three modes in metropolitan and non-metropolitan areas, in two steps each. The first step determines whether a household has any AltMode trips and the second part determines the number of trips. All of the models include terms for household characteristics (size, income, age mix) and the household's overall VMT. Neighborhood factors (population density) factors into all but the bike trip models. For households in metropolitan areas \protect\hyperlink{transit-service-levels}{{transit service level}} has an impact as well, with transit ridership also sensitive to when residents live in \protect\hyperlink{urban-mixed-use}{{urban mixed-use}} neighborhoods.
\end{enumerate}

\hypertarget{sov-diversion}{%
\subsubsection{SOV diversion}\label{sov-diversion}}

Household single-occupant vehicle (SOV) travel is reduced to achieve bike and micro-transportation input policy goals, i.e., for diverting a portion of SOV travel within a 20-mile tour distance (round trip distance). This allows evaluating the potential for light-weight vehicles (e.g.~bicycles, electric bikes, electric scooters) and infrastructure to support their use, in reducing SOV travel. First, the amount of the household's VMT that occurs in SOV tours having round trip distances of 20 miles or less is estimated. Then the average trip length within those tours is estimated. Both models are sensitive to household characteristics(drivers, income, kids), vehicle ownership (\protect\hyperlink{auto-sufficiency}{{auto sufficiency}}), and attributes of the neighborhood (population density, dwelling type) and \protect\hyperlink{metropolitan-area}{{metropolitan area}} (\protect\hyperlink{urban-mixed-use}{{urban mixed-use}}, freeway lane-miles) where the household resides, and the household's overall VMT.

The diversion of these short trips is assumed to only apply in urban and town \protect\hyperlink{location-type}{{location types}}. The VMT reductions are allocated to households as a function of the household's SOV VMT and (the inverse of) SOV trip length. In other words, it is assumed that households having more qualifying SOV travel and households having shorter SOV trips will be more likely to divert SOV travel to bicycle-like modes. The estimates of the household's share of diverted VMT, average trip length of diverted VMT are applied elsewhere to reduce DMVT and increase bike trips. Zero vehicle households are not allowed to divert SOV travel. \protect\hyperlink{census-pums}{{Census PUMS}} data is used to estimate the models.

\hypertarget{dvmt-reductions}{%
\subsubsection{DVMT reductions}\label{dvmt-reductions}}

Each household's VMT is adjusted for their TDM program(s) participation, if any, as well as input from metropolitan area \protect\hyperlink{metropolitan-area}{{short-trips SOV diversion}} goals. The SOV diversion also increases bike trips (diverted SOV VMT divided by SOV average trip length).

\hypertarget{vehicles-fuels-and-emissions}{%
\subsection{Vehicles, fuels and emissions}\label{vehicles-fuels-and-emissions}}

The \protect\hyperlink{powertrain}{{powertrains}}, fuels, and associated emissions datasets for all modeled \protect\hyperlink{vehicle-group}{{vehicle groups}} are among the most complex inputs used in VisionEval. Default datasets are included in the VisionEval installer to simplify this for the user. The user can use these defaults or develop their own data that matches the VisionEval input requirements. It is anticipated that different datasets will be developed by users that can be shared with the VisionEval community. For example, one package may represent a base scenario of federal vehicle, fuel, and emission standards, while another package represents the California zero-emissions vehicle (ZEV) rules and low carbon fuel for the home location's \protect\hyperlink{car-service}{{car service}}.

The model looks in household vehicle sales tables indexed by \protect\hyperlink{vehicle-type}{{vehicle type}} and age to determine the probability of each powertrain in that sales year, along with its associated fuel efficiency and other attributes. Each household vehicle is assigned attributes consistent with these probabilities. In some cases electric vehicles (EVs) are replaced by plug-in hybrid electric vehicles (PHEVs) if household VMT and residential charging limitations exist.

The \protect\hyperlink{powertrain}{{powertrain}} mix of non-household vehicle groups -- car service, commercial service, transit, and heavy trucks -- is applied to VMT (rather than individual vehicles) in the scenario year (rather than sales year). There is some input adjustment for average vehicle age and commercial \protect\hyperlink{vehicle-type}{{vehicle type}} share.

Fuels for each vehicle groups can rely on the package defaults, or use one of two input options. The user can either provide a composite \protect\hyperlink{carbon-intensity}{{carbon intensity}} representing all gallons of fuel used for that vehicle group, or provide fuel mix shares (base fuel mix, biofuel blend proportions), combined with package default lifecycle (well-to-wheels) carbon intensity for the individual fuels. The resulting carbon intensity per gallon are applied to gallons generated from VMT and vehicle fuel efficiency assumptions. Adjustments to fuel efficiency due to reduced speeds due to congestion as well as ITS operational programs (e.g., \protect\hyperlink{speed-smoothing}{{speed smoothing}}) and \protect\hyperlink{ecodrive}{{EcoDrive}} programs.

The table below summarizes the vehicle and fuel options available within VisionEval.

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 8\tabcolsep) * \real{0.1833}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 8\tabcolsep) * \real{0.1333}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 8\tabcolsep) * \real{0.3500}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 8\tabcolsep) * \real{0.1667}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 8\tabcolsep) * \real{0.1667}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Vehicle Group
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Vehicle Types
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Powertrain Options
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Veh Input Adjustments
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Fuel Options
\end{minipage} \\
\midrule()
\endhead
Household Vehicles & automobile, light truck & ICE, HEV, EV, PHEV & (default veh mix), age, \%LtTrk & gas/ethanol, diesel/biodiesel, CNG/RNG \\
Car Service VMT & automobile, light truck & ICE, HEV, EV & veh mix, age (HH \%LtTrk) & gas/ethanol, diesel/biodiesel, CNG/RNG \\
Commercial Service VMT & automobile, light truck & ICE, HEV, EV & veh mix, age, \%LtTrk & gas/ethanol, diesel/biodiesel, CNG/RNG \\
Heavy Truck VMT & heavy truck & ICE, HEV, EV & veh mix & gas/ethanol, diesel/biodiesel, CNG/LNG \\
Public Transit VMT & van, bus, rail & ICE, HEV, EV & veh mix & gas/ethanol, diesel/biodiesel, CNG/RNG \\
\bottomrule()
\end{longtable}

Note that individual vehicles are modeled for households, based on sales year default datasets and age of the owned vehicle. Other groups' vehicle and fuel attributes apply to VMT in the scenario modeled year. As a result, PHEVs do not exist other than household vehicles, instead PHEVs are represented as miles driven in HEVs and miles in EVs.

\begin{quote}
Watch a \href{https://youtu.be/-ylFbyLfhbw?t=6747}{video overview} of vehicles, fuels, and emissions
\end{quote}

\hypertarget{household-vehicle-table}{%
\subsubsection{Household vehicle table}\label{household-vehicle-table}}

The household vehicle table is generated in two steps:

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  \href{https://github.com/VisionEval/VisionEval/blob/master/api/VE_Training_March_13-14_2019/VE_Training.md\#64-createvehicletable}{\emph{Create Vehicle Table:}} A \protect\hyperlink{vehicle-table}{{vehicle table}} is created with a record for every vehicle owned by the household, and additional vehicle records are added to reach the household's number of driving age persons. Each vehicle record is populated with household ID and geography fields (Azone, Marea) and \protect\hyperlink{access-time}{{access time}} attributes. Each vehicle record is either ``own'' or (driving-age person without a vehicle) assigned access to a \protect\hyperlink{car-service}{{car service}} level, depending upon coverage in the household's home Bzone.
\item
  \href{https://github.com/VisionEval/VisionEval/blob/master/api/VE_Training_March_13-14_2019/VE_Training.md\#63-assignvehicletype}{\emph{Assign Vehicle Type:}}. Identifies how many household vehicles are light trucks and how many are automobiles as a function of number of vehicles, person-to-vehicle and vehicle-to-driver ratios, number of children, \protect\hyperlink{dwelling-unit-type}{{dwelling unit type}}, income, density, and \protect\hyperlink{urban-mixed-use}{{urban mixed use}} data (in \protect\hyperlink{metropolitan-area}{{metropolitan areas}} only).
\end{enumerate}

\hypertarget{powertrains-and-fuels-defaults}{%
\subsubsection{Powertrains and fuels defaults}\label{powertrains-and-fuels-defaults}}

These values are defined in two steps:

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  \href{https://github.com/VisionEavl/VisionEva/blob/master/api/VE_Training_March_13-14_2019/VE_Training.md\#81-loaddefaultvalues}{\emph{Load Default Values:}}. This script, run before the rest of VisionEval is started, reads and processes the default \protect\hyperlink{powertrain}{{powertrains}} and fuels files in the package and creates datasets used by other modules to compute fuel and electricity consumption, and well as associated fuel and electricity \protect\hyperlink{carbon-intensity}{{carbon intensity}} emissions from vehicle travel.
\item
  An \href{https://github.com/VisionEval/VisionEval/blob/master/api/VE_Training_March_13-14_2019/VE_Training.md\#82-initialize-module}{\emph{Initialize}} step is run by VisionEval as part of its initialization on each run. Optional user-supplied vehicle and fuel input files, if any, are processed (including input data checks). When available, modules that compute carbon intensities of vehicle travel will use the user-supplied data instead of the package default datasets.
\end{enumerate}

\hypertarget{assign-household-powertrains-and-fuels}{%
\subsubsection{Assign household powertrains and fuels}\label{assign-household-powertrains-and-fuels}}

The powertrain and fuel type is assigned to each vehicle in each household in three steps:

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  \href{https://github.com/VisionEval/VisionEval/blob/master/api/VE_Training_March_13-14_2019/VE_Training.md\#65-assignvehicleage}{\emph{Assign Vehicle Age:}} Assigns vehicle ages to each household vehicle and \protect\hyperlink{car-service}{{car service}} vehicle used by the household as a function of the \protect\hyperlink{vehicle-group}{{vehicle group}} (household vehicles only), household income, and assumed mean vehicle age by vehicle type and Azone. The age model starts with an observed vehicle age distribution and relationship between vehicle age and income. These data are currently based on summaries of the 2001 \protect\hyperlink{nhts}{{NHTS}}. Adjustments are made based on user average vehicle age inputs (household by vehicle type, car service overall).
\item
  \href{https://github.com/VisionEval/VisionEval/blob/master/api/VE_Training_March_13-14_2019/VE_Training.md\#84-assignhhvehiclepowertrain-module}{\emph{Assign Household Vehicle Powertrain:}} This module assigns a \protect\hyperlink{powertrain}{{powertrain}} type to each household vehicle. The age of each vehicle is used with default tables by \protect\hyperlink{vehicle-type}{{vehicle type}} that identify the powertrain mix of vehicles sold in each sales year. Other default tables identify vehicle characteristics tied to powertrain that include battery range, \protect\hyperlink{fuel-efficiency}{{fuel efficiency}}, and emissions rate. Assignments of EVs may be changed to PHEVs if the battery range is not compatible with estimated day-to-day trip lengths, or the home dwelling lacks vehicle charging availability.
\item
  \href{https://github.com/VisionEval/VisionEval/blob/master/api/VE_Training_March_13-14_2019/VE_Training.md\#83-calculatecarbonintensity-module}{\emph{Calculate Carbon Intensity:}} This module calculates the average \protect\hyperlink{carbon-intensity}{{carbon intensity}} of fuels (grams CO2e per megajoule) by \protect\hyperlink{vehicle-group}{{vehicle group}} and, if applicable, \protect\hyperlink{vehicle-type}{{vehicle type}}. Average fuel carbon intensities for transit vehicle modes are calculated by \protect\hyperlink{metropolitan-area}{{metropolitan area}}, other vehicles are calculated for the entire model region. The module also reads the input average \protect\hyperlink{carbon-intensity}{{carbon intensity}} of electricity at the Azone level.
\end{enumerate}

\hypertarget{assign-non-household-powertrains-and-fuels}{%
\subsubsection{Assign non-household powertrains and fuels}\label{assign-non-household-powertrains-and-fuels}}

The assignment of powertrain and fuel characteristics is carried out in two steps:

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  \href{https://github.com/VisionEval/VisionEval/blob/master/api/VE_Training_March_13-14_2019/VE_Training.md\#911-calculateptranenergyandemissions-module}{\emph{Calculate Transit Energy And Emissions:}} This module calculates the energy consumption and carbon emissions from transit vehicles in urbanized areas. Assumptions (package default or user input) on \protect\hyperlink{powertrain}{{powertrain}} mix and fuels for three \protect\hyperlink{vehicle-type}{{transit vehicle types}} by \protect\hyperlink{metropolitan-area}{{metropolitan area}} are applied to associated Marea \protect\hyperlink{transit-service-miles}{{transit service miles}} for these types. Assumptions (package default or user input) on average \protect\hyperlink{carbon-intensity}{{carbon intensity}} of fuel and electricity by \protect\hyperlink{vehicle-type}{{transit vehicle types}} are then applied to Marea fuel and electricity usage across types to calculate carbon emissions.
\item
  \href{https://github.com/VisionEval/VisionEval/blob/master/api/VE_Training_March_13-14_2019/VE_Training.md\#910-calculatecomenergyandemissions-module}{\emph{Calculate Commercial Energy And Emissions:}} The energy consumption and carbon emissions of \protect\hyperlink{heavy-truck}{{heavy trucks}} and \protect\hyperlink{commercial-service}{{commercial service}} VMT (no vehicles) are calculated by on-road (not sales) year. VMT shares of Commercial Service \protect\hyperlink{powertrain}{{powertrains}} by \protect\hyperlink{vehicle-type}{{vehicle type}} and \protect\hyperlink{heavy-truck}{{heavy truck}} powertrains are calculated (per package default or user input). Any \protect\hyperlink{fuel-efficiency}{{fuel efficiency}} (MPG and MPKWH) adjustments are then applied, due to policies (\protect\hyperlink{ecodrive}{{EcoDriving}}, \protect\hyperlink{speed-smoothing}{{speed smoothing}} and/or congestion (including effects of any \protect\hyperlink{its}{{ITS}} operational and congestion fee policies). Ecodriving applies only to internal combustion engine (ICE) vehicles and \protect\hyperlink{its}{{ITS}} operational policies and congestion apply only in \protect\hyperlink{metropolitan-area}{{metropolitan areas}}. Both vary by \protect\hyperlink{powertrain}{{powertrain}} and for commercial vehicles, \protect\hyperlink{vehicle-type}{{vehicle type}}. Combining \protect\hyperlink{fuel-efficiency}{{fuel efficiency}} and VMT (from the Household Multimodal Travel Model) results in estimates of energy usage (fuel and electricity). Fuel carbon intensity for these modes is calculated by \protect\hyperlink{metropolitan-area}{{metropolitan area}} and/or region and applied to fuel and electricity usage to estimate CO2e emissions.
\end{enumerate}

\hypertarget{adjustments}{%
\section{Adjustments}\label{adjustments}}

\hypertarget{congestion-adjustments}{%
\subsection{Congestion adjustments}\label{congestion-adjustments}}

Congestion, only calculated on urbanized roads (a subset of \protect\hyperlink{metropolitan-area}{{metropolitan area}} roads, requires estimating and combining together the VMT of all \protect\hyperlink{vehicle-group}{{vehicle groups}}. For non-household vehicles, base year VMT is calculated directly from inputs and model parameters, while future year is a function of the input \protect\hyperlink{growth-basis}{{growth basis}}. Initial allocations of DMVT across \protect\hyperlink{road-class}{{road class}}{]} is based on input values.

Light duty vehicle (LDV) VMT is allowed to re-allocate between freeways and arterials to balance demand (VMT) and roadway supply (lane-miles) through a generalized cost framework (including roadway speed and congestion fees, if any). Roadway supply (i.e., capacity) is adjusted by delay-reducing \protect\hyperlink{its}{{ITS}} operations policies based on \protect\hyperlink{fuel-speed-curves}{{fuel-speed curves}} by \protect\hyperlink{powertrain}{{powertrain}}, the resulting congested speeds impact vehicle \protect\hyperlink{fuel-efficiency}{{fuel efficiency}}. Further adjustments are applied to reflect any \protect\hyperlink{speed-smoothing}{{speed smoothing}} and \protect\hyperlink{ecodrive}{{EcoDrive}} programs that may not affect delay but reduce acceleration and deceleration with associated impacts on fuel efficiency.

No fuel efficiency adjustments for congestion or policies are made to non-urban roadway VMT. The delays faced by each household and associated fuel economy impacts are applied to each individual household's VMT and vehicles. Resulting overall average speeds, delays, and DMVT proportions, by \protect\hyperlink{road-class}{{road class}} at each \protect\hyperlink{congestion-level}{{congestion level}} on urbanized and other roads are also tabulated along with the resulting average per mile \protect\hyperlink{congestion-fee}{{congestion fees}} paid, if any, and overall vehicle hours of delay (VHD) by \protect\hyperlink{vehicle-group}{{vehicle group}}.

\begin{quote}
Watch a \href{https://youtu.be/-ylFbyLfhbw?t=8401}{video summary} of VisionEval's congestion adjustment
\end{quote}

\hypertarget{initialize-roadway-conditions}{%
\subsubsection{Initialize roadway conditions}\label{initialize-roadway-conditions}}

The roadway conditions in the model are calculated in three steps:

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  \href{https://github.com/VisionEval/VisionEval/blob/master/api/VE_Training_March_13-14_2019/VE_Training.md\#91-loaddefaultroadVMTvalues}{\emph{Load Default Road VMT Values:}} These calculations are completed before the model run starts. The base year roadway VMT is processed, including light duty vehicle and \protect\hyperlink{heavy-truck}{{heavy truck}} VMT by state and urbanized area as well as VMT proportions by urbanized area, \protect\hyperlink{vehicle-group}{{vehicle group}} (light duty vehicle, heavy truck, bus), and \protect\hyperlink{road-class}{{road class}}. The user can either provide direct inputs for these values or specify a state and/or urbanized area and the model will use default data from the \href{https://github.com/VisionEval/VisionEval/tree/master/sources/modules/VETravelPerformance/inst/extdata/sources}{20xx USDOT Highway Statistics}, where available.
\item
  \href{https://github.com/VisionEval/VisionEval/blob/master/api/VE_Training_March_13-14_2019/VE_Training.md\#92-initialize-module}{\emph{Initialize:}}. This step is run when the model run is initialized. User inputs used by several modules are read and checked (many with several valid options, proportions sum to 1, consistency, congestion fees increase with congestion level). Some of these values are optional, using default data where not specified. This includes various assumptions on base year VMT within both \protect\hyperlink{urbanized-area}{{urbanized area(s)}} and the full model region, by \protect\hyperlink{vehicle-group}{{vehicle group}}, allocation among \protect\hyperlink{road-class}{{road class}}, \protect\hyperlink{growth-basis}{{growth basis}}, and assumptions for \protect\hyperlink{freight-vehicle-groups}{{freight vehicle groups}}. It also checks inputs on \protect\hyperlink{its}{{ITS}} operational policies and \protect\hyperlink{ecodrive}{{EcoDriving}} programs, including any user-specified ``other ops'' programs and \protect\hyperlink{congestion-fee}{{congestion fees}} (by road class and \protect\hyperlink{congestion-level}{{congestion level}}).
\item
  \href{https://github.com/VisionEval/VisionEval/blob/master/api/VE_Training_March_13-14_2019/VE_Training.md\#93-calculateroadVMT-module}{\emph{Calculate Road VMT:}} Adds together \protect\hyperlink{metropolitan-area}{{metropolitan area}} VMT of all \protect\hyperlink{vehicle-group}{{vehicle groups}} (Households, CarService, Commercial Service, Heavy Truck, Transit) and allocates it across \protect\hyperlink{road-class}{{road classes}} (freeway, arterial, other), limiting it to urbanized area roadways for use in congestion calculations. To do so, several factors are established in the base year. One uses the input \protect\hyperlink{growth-basis}{{growth basis}} (population, income, household VMT) to estimate future year \protect\hyperlink{vehicle-group}{{freight vehicle group}} (commercial service and heavy truck) VMT (using input base year VMT values by region and Marea, if provided, model-estimates otherwise). A second base year factor identifies the urban and non-urban allocation of VMT from \protect\hyperlink{metropolitan-area}{{metropolitan area}} households and related commercial service vehicles. For Heavy Trucks VMT an input specifies the proportion of VMT on urbanized roads while transit VMT (of all \protect\hyperlink{transit-service-modes}{{transit service modes}}) is assumed to only occur on urbanized roads. Base year allocations of urban VMT by \protect\hyperlink{vehicle-group}{{vehicle group}} among \protect\hyperlink{road-class}{{road classes}} are based on input shares, subject to adjustment during subsequent congestion calculations. Finally, to assess delay faced by each household and associated fuel efficiency impacts, each individual household's VMT is split between miles on urbanized and other road miles.
\end{enumerate}

\hypertarget{congestion-model-and-adjustments}{%
\subsubsection{Congestion model and adjustments}\label{congestion-model-and-adjustments}}

Three adjustments are made based on congestion levels:

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\item
  \href{https://github.com/VisionEval/VisionEval/blob/master/api/VE_Training_March_13-14_2019/VE_Training.md\#94-calculateroadperformance-module}{\emph{Calculate Road Performance:}} \protect\hyperlink{congestion-level}{{Congestion level}} by \protect\hyperlink{road-class}{{road class}} and the associated amounts of VMT are iteratively estimated. Light duty vehicle (LDV) VMT is allowed to re-allocate between freeways and arterials to balance demand and roadway supply (lane-miles) through a generalized cost framework (including roadway speed and congestion fees, if any and an estimated base year urbanized area \protect\hyperlink{lambda-parameter}{{lambda parameter}} based on the area's population and freeway-arterial lane-mile ratio). DMVT allocation at different aggregate demand-supply ratios relies on data from the \href{https://static.tti.tamu.edu/tti.tamu.edu/documents/umr/archive/mobility-report-2009-wappx.pdf}{2009 Urban Mobility Study (UMS)} for 90 urbanized areas, where the model chooses the 5-10 cities with most similar congestion ratios.

  The supply calculation considers the delay-reduction effects of deploying urban area \protect\hyperlink{its}{{ITS}} operations programs (freeway ramp metering, freeway incident management, arterial signal coordination, arterial access control or user-defined ``other ops'' programs. The standard ITS-operations program impacts are based on research (\href{https://github.com/VisionEval/VisionEval/tree/master/sources/modules/VETravelPerformance/inst/extdata/sources}{Bigazzi \& Clifton 2011}). Non-urban speeds are also calculated, using a simple ratio of rural-to-urban travel volumes.

  The resulting average speeds, delay and DMVT proportions, by \protect\hyperlink{lexicon}{{road class}} at each \protect\hyperlink{lexicon}{{congestion level}} on urbanized and other metropolitan area roads are calculated, as is the resulting average per mile \protect\hyperlink{congestion-fee}{{congestion fees}} paid, if any, and overall VHD by \protect\hyperlink{lexicon}{{vehicle group}}.
\item
  \href{https://github.com/VisionEval/VisionEval/blob/master/api/VE_Training_March_13-14_2019/VE_Training.md\#95-calculatempgmpkwhadjustments-module}{\emph{Calculate Mpg Mpkwh Adjustments:}} Adjustments to \protect\hyperlink{fuel-efficiency}{{fuel efficiency}} (MPG and MPKwhr) for all \protect\hyperlink{vehicle-group}{{vehicle groups}} resulting from traffic congestion, \protect\hyperlink{congestion-fee}{{congestion fees}}, ITS \protect\hyperlink{speed-smoothing}{{speed smoothing}} (i.e.~active traffic management which reduces speed variation), and \protect\hyperlink{ecodrive}{{EcoDriving}} are calculated. The \protect\hyperlink{fuel-speed-curves}{{fuel-speed curves}} vary by \protect\hyperlink{road-class}{{road class}}, congestion \protect\hyperlink{powertrain}{{powertrains}} (LdIce, LdHev, LdEv, HdIce) and, where applicable, \protect\hyperlink{vehicle-type}{{vehicle type}} relative to reference speeds by \protect\hyperlink{road-class}{{road class}}. The adjustments are based on drive-cycle level simulation research (\href{https://github.com/VisionEval/VisionEval/tree/master/sources/modules/VETravelPerformance/inst/extdata/sources}{Bigazzi \& Clifton 2011}). Note that no adjustments are made for \protect\hyperlink{its}{{ITS}} policies (standard and speed smoothing policies) or \protect\hyperlink{ecodrive}{{EcoDrive}} programs on `other' road classes (non-freeway or arterials) and non-urbanized roads, which are assumed to be uncongested.
\item
  \href{https://github.com/VisionEval/VisionEval/blob/master/api/VE_Training_March_13-14_2019/VE_Training.md\#96-adjusthhvehiclempgmpkwh-module}{\emph{Adjust Household Vehicle MPg Mpkwh:}} Implements the \protect\hyperlink{fuel-efficiency}{{fuel efficiency}} (MPG and MPKwh) adjustments of household vehicles (including Car Service VMT), reflecting the effects of congestion, \protect\hyperlink{congestion-fee}{{congestion fees}}, ITS \protect\hyperlink{speed-smoothing}{{speed smoothing}}, and \protect\hyperlink{ecodrive}{{eco-driving}} that were calculated elsewhere. These adjustments vary by vehicle \protect\hyperlink{powertrain}{{powertrain}}, \protect\hyperlink{vehicle-type}{{vehicle type}}, and the proportion of the household's travel that is driven on urban and non-urban roads within the \protect\hyperlink{metropolitan-area}{{metropolitan area}}. Joint effects are calculated as the product of congestion speed effects and the maximum of implemented speed-smoothing policies (eco-driving \& ITS-speed smoothing).
\end{enumerate}

\hypertarget{household-costs-and-budgets}{%
\subsection{Household costs and budgets}\label{household-costs-and-budgets}}

Two adjustments are made in response to household budgets. \protect\hyperlink{vehicle-ownership-costs}{{Vehicle ownership costs}} are calculated and an adjustment is made to the number of household owned autos if the costs are greater than switching to a `High' level \protect\hyperlink{car-service}{{car service}}, where available (subject to input limits on \protect\hyperlink{car-service}{{car service}} substitutability). \protect\hyperlink{vehicle-ownership-costs}{{Vehicle ownership costs}} include financing, depreciation, insurance (unless in \protect\hyperlink{pay-as-you-drive}{{PAYD program}}), annual registration fees, and residential parking fees.

Additionally, in order to respond to pricing policies and energy costs, VisionEval imposes an operating cost budget limitation. Household VMT is constrained such that annual \protect\hyperlink{vehicle-operating-costs}{{vehicle operating costs}} must stay below a maximum share of annual household income, or budget limit. A household-specific average annual vehicle operating costs is first calculated, including out-of-pocket per mile costs for each household owned and car service vehicles used by the household, as well as time-equivalent cost (input \protect\hyperlink{access-time}{{access times}}, estimates of VMT at congested speeds, and \protect\hyperlink{value-of-time}{{value of time}} input). Vehicle operating costs determine the proportional split of VMT across household vehicles. Out-of-pocket costs include the energy, maintenance, repair, \& tires, \protect\hyperlink{road-use-taxes}{{road use taxes}} (including \protect\hyperlink{ev-surcharge}{{EV surcharge}} and optional calculation of fee to fully recover road costs), work/non-work parking, \protect\hyperlink{pay-as-you-drive}{{PAYD insurance}}, input share of carbon and other \protect\hyperlink{social-costs}{{social costs}}, as well as \protect\hyperlink{car-service}{{car service}} fees by the household. Note that time-equivalent costs are only used to allocate travel between household vehicles (including car services used by the household). Time-equivalent cost is not used in the balancing of household vehicle operating cost and budget.

The following sections describe each module that contributes to this concept.

\begin{quote}
Watch a \href{https://youtu.be/-ylFbyLfhbw?t=8739}{video overview} of costs and budgets
\end{quote}

\hypertarget{auto-ownership-cost-adjustment}{%
\subsubsection{Auto Ownership Cost \& Adjustment}\label{auto-ownership-cost-adjustment}}

Two steps are required to calculate and adjust auto ownership costs:

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  \href{https://github.com/VisionEval/VisionEval/blob/master/api/VE_Training_March_13-14_2019/VE_Training.md\#66-calculatevehicleowncost}{\emph{Calculate Vehicle Own Cost:}} Average \protect\hyperlink{vehicle-ownership-costs}{{Vehicle ownership costs}} are calculated for each vehicle based on the vehicle type, age, and annual VMT (financing, depreciation, and insurance), annual registration fees (flat and ad valorum), combined with any residential \protect\hyperlink{parking-costs}{{parking costs}} (if household exceeds free parking limits). To do so, \protect\hyperlink{pay-as-you-drive}{{PAYD insurance}} participation is assigned based on household characteristics (drivers by age, annual mileage, income, location type, vehicle type and age) and input PAYD insurance program participation. The ownership cost is converted into an average vehicle-specific ownership cost per mile by dividing by estimated household VMT per vehicle.
\end{enumerate}

Note that PAYD insurance does not affect the cost of vehicle ownership when determining whether a household will substitute car services for one or more of their vehicles. It does affect the out-of-pocket operating cost used in budget limitations on household VMT.

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\setcounter{enumi}{1}
\tightlist
\item
  \href{https://github.com/VisionEval/VisionEval/blob/master/api/VE_Training_March_13-14_2019/VE_Training.md\#67-adjustvehicleownership}{\emph{Adjust Vehicle Ownership:}} Household vehicle ownership is adjusted based on a comparison of the cost of owning versus `high' \protect\hyperlink{car-service}{{car service}} per mile rates, where available. The module identifies all household vehicles in a `High' car service area, where the car service mileage rate exceeds the household's estimated \protect\hyperlink{vehicle-ownership-costs}{{vehicle ownership cost}} per annual household VMT. The household's \protect\hyperlink{vehicle-table}{{vehicle table}} entry changes from `Own' to `HighCarSvc' for these vehicles, limited by input assumptions regarding the average likelihood that an owner would substitute \protect\hyperlink{car-service}{{car services}} for a household vehicle (separate values are specified by \protect\hyperlink{vehicle-type}{{vehicle type}}). Other auto ownership values are also updated (e.g., insurance, total vehicles).
\end{enumerate}

\hypertarget{auto-operating-cost-adjustment}{%
\subsubsection{Auto Operating Cost \& Adjustment}\label{auto-operating-cost-adjustment}}

Three primary adjustments adjustments to auto operating cost are carried out in VisionEval:

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  \href{https://github.com/VisionEval/VisionEval/blob/master/api/VE_Training_March_13-14_2019/VE_Training.md\#97-calculatevehicleoperatingcost-module}{\emph{Calculate Vehicle Operating Cost:}} A composite per mile cost is calculated as an \protect\hyperlink{out-of-pocket-cost}{{out-of-pocket cost}} for various household and car service vehicle VMT (see below), combined with cost equivalent of travel time (access time and travel time at congested speeds times \protect\hyperlink{value-of-time}{{value of time}} (VOT)). Total costs result from applying this vehicle-specific cost rate to each vehicle's VMT, where VMT is split among household vehicles (including car services used by household members) as a (reciprocal) function of this vehicle-specific composite cost rate:
\end{enumerate}

\begin{itemize}
\tightlist
\item
  \textbf{Vehicle maintenance, repair, and tire cost (MRT)} costs are calculated as a function of the \protect\hyperlink{vehicle-type}{{vehicle type}}, \protect\hyperlink{powertrain}{{powertrain}} and \protect\hyperlink{vehicle-age}{{vehicle age}} based on data from the American Automobile Association (AAA) and the Bureau of Labor Statistics (BLS).
\item
  \textbf{Fuel and energy costs} are calculated as energy rates time average fuel efficiency (miles per gallon or Kwhr electricity).
\item
  \textbf{Gas taxes} are federal, state and local per gallon taxes to cover road costs. For Electric vehicles, an equivalent per mile cost is calculated and can be applied to some or all electric vehicles (\$/gallon or EV vehicle surcharge tax).
\item
  \textbf{Other Road Cost Recovery taxes} (i.e.~VMT tax) is a user input. If the (optional) \texttt{BalanceRoadCostsAndRevenues} module is run, an extra VMT tax is calculated that recovers household share of road costs, consistent across all model households.
\item
  \textbf{Congestion fees} are calculated average congestion price (\$/mile) for travel on urbanized roads in the Marea multiplied by the proportion of household travel occurring on those roads.
\item
  \textbf{Carbon fee} and \textbf{other social cost fees} are carbon cost per mile is calculated as the input \protect\hyperlink{carbon-price}{{carbon price}} times the average household emissions rate (grams/mile), a VMT-weighting of all vehicles in the household. Of the other \protect\hyperlink{social-costs}{{social costs}}, some are per gallon (non-EV vehicle miles) others per mile (regardless of \protect\hyperlink{powertrain}{{powertrain}}). The full per mile costs are discounted to only reflect the input proportion of \protect\hyperlink{social-costs}{{social cost}} paid by user.
\item
  Daily \textbf{parking costs} from work parking costs (workers who pay for parking) and other parking cost (cost of parking for shopping, etc.) are summed and divided by the household DMVT. Note that residential parking costs are included in the vehicle ownership not per mile cost calculations.
\item
  \textbf{Pay-as-you-drive (PAYD) insurance} is defined for participating households as the sum of the annual insurance cost for all the household vehicles is divided by the annual household VMT.
\item
  \textbf{Car-service costs} are the cost of using a \protect\hyperlink{car-service}{{car service}} (dollars/mile) is a user input by car service level (Low, High).
\end{itemize}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\setcounter{enumi}{1}
\item
  \href{https://github.com/VisionEval/VisionEval/blob/master/api/VE_Training_March_13-14_2019/VE_Training.md\#99-balanceroadcostsandrevenues-module}{\emph{Balance Road Costs And Revenues:}} Optionally, an extra mileage tax (\$/mile) for household vehicles needed to make up any difference in the cost of constructing, maintaining, and operating roadways and the revenues from total road cost fees including fuel, VMT, and congestion charges. Optionally, an additional mileage fee (\$/mile) on household travel is calculated that would fully pay for roadway costs attributable to household vehicle travel. The cost of existing and new freeway and arterial lane-miles by Marea is calculated from the difference in input lane-miles relative to the base year and input unit \protect\hyperlink{road-costs}{{road costs}} (constructing, maintaining, and operating). Reductions in lane-miles are ignored. The proportion of road costs attributable to households is set as the ratio of household VMT divided by the sum of household (including CarService), commercial service, and car-equivalent heavy truck VMT (multiply by \protect\hyperlink{passenger-car-equivalents}{{PCE}}). Average road taxes collected per household vehicle mile are calculated as a weighted average of the average road tax per mile of each household (calculated by the \texttt{CalculateVehicleOperatingCost} module) using the household VMT (calculated by the \texttt{BudgetHouseholdDvmt} module) as the weight. Currently no annual fees contribute to road cost recovery.
\item
  \href{https://github.com/VisionEval/VisionEval/blob/master/api/VE_Training_March_13-14_2019/VE_Training.md\#98-budgethouseholddvmt-module}{\emph{Budget Household Dvmt:}} Household VMT is adjusted to keep within the household's \protect\hyperlink{vehicle-operating-costs}{{vehicle operating cost}} budget, based on the historic maximum proportion of income the household is willing to pay for vehicle operations. This proportions varies with income. The household's DMVT is then reduced as needed to keep annual out-of-pocket \protect\hyperlink{vehicle-operating-costs}{{vehicle operating cost}} within that share of the household's annual income. Annual vehicle operating costs include the household's VMT times their out-of-pocket per mile vehicle costs, adding credits for selected annual payments (annual work parking fee if in a work parking \protect\hyperlink{cash-out-buy-back}{{cash-out-buy-back program}}, annual vehicle insurance if in a \protect\hyperlink{pay-as-you-drive}{{PAYD insurance program}}, and annual auto ownership costs if \protect\hyperlink{car-service}{{car service}} program reduced auto ownership). The module relies on aggregate survey data from the U.S. Bureau of Labor Statistics (BLS) Consumer Expenditure Survey (CES) for years 2003-2015.
\end{enumerate}

\hypertarget{processing}{%
\section{Processing}\label{processing}}

VisionEval is designed to be easy to install, run, and summarize, even when comparing scores of different scenarios. It produces consistent and detailed performance metrics. The user can modify the metrics produced by the model or define their own from data exported from the model. There are also several ways to think about validation of the model within the VisionEval mindset. These topics are explored in this chapter.

\hypertarget{running-visioneval}{%
\subsection{Running VisionEval}\label{running-visioneval}}

VisionEval is implemented entirely in the \href{https://www.r-project.org}{R statistical language} and operates on recent versions of Microsoft Windows. All development work is done there, although macOS and Linux versions are usually distributed. A fully self-contained installer for the more recent production release of VisionEval can be found on the \href{https://visioneval.org/category/download.html}{download page}. It permits installation of the full VisionEval platform, to include example data, even behind firewalls that prevent access to R Project and GitHub repositories.

Once installed the user assembles data into a \href{https://github.com/VisionEval/VisionEval/blob/master/api/VE_Training_March_13-14_2019/VE_Training.md\#12-basic-structure-of-model-system}{standard directory structure}. Once the \href{https://github.com/VisionEval/VisionEval/blob/master/api/VE_Training_March_13-14_2019/VE_Training.md\#17-basic-model-setup}{model run script} is customized by the user it is typically run from a command prompt. Running it in this manner allows several different scenarios to be run at the same time with minimal user interaction. The results can then be mined or visualized using a variety of VisionEval and third-party products. Some users use \href{https://shiny.rstudio.com/}{R Shiny} or similar interactive environments for summarizing and visualizing the output from VisionEval. Such an environment is especially useful when comparing key metrics from a large number of scenarios.

\hypertarget{typical-outputs}{%
\subsection{Typical outputs}\label{typical-outputs}}

VisionEval generates a large set of performance metrics at varying summary levels. Several pre-defined metrics are compiled for mobility, economic, land use, environmental, and energy categories in each model run. They can be tabulated for individual scenarios or compared to other scenarios, as well as visualized using a variety of tools.

The intermediate data generated during the various VisionEval module steps can be compiled as performance metrics, both in absolute and per-capita terms and at various geographies. Traditional transportation network metrics such as VMT, vehicle and person hours of travel, and total delay are easily compiled by overall or focused areas within the model. Likewise, emission estimates and fuel consumption are tabulated. These can be viewed in standard reports or in \texttt{VEScenarioManager} files, especially when comparing such values between scenarios.

One example of a set of region-wide performance metrics used by Oregon DOT includes:

\begin{itemize}
\tightlist
\item
  Mobility

  \begin{itemize}
  \tightlist
  \item
    Daily per capita VMT
  \item
    Annual walk trips per capita
  \item
    Daily Bike trips per capita
  \end{itemize}
\item
  Economy

  \begin{itemize}
  \tightlist
  \item
    Annual all vehicle delay per capita (hours)
  \item
    Daily household parking costs
  \item
    Annual HH vehicle operating cost (fuel, taxes, parking)
  \item
    Annual HH ownership costs (depreciation, vehicle maintenance, tires, finance charge, insurance, registration)
  \end{itemize}
\item
  Land Use

  \begin{itemize}
  \tightlist
  \item
    Residents living in mixed use areas
  \item
    Housing type (SF: MF)
  \end{itemize}
\item
  Environmental

  \begin{itemize}
  \tightlist
  \item
    Annual GHG emissions per capita
  \item
    HH vehicle GHG/mile
  \item
    Commercial vehicle GHG/mile
  \item
    Transit Vehicle GHG/mile
  \end{itemize}
\item
  Energy

  \begin{itemize}
  \tightlist
  \item
    Annual all vehicle fuel consumption per capita (gallons)
  \item
    Average all vehicle fuel efficiency (net miles per gallon)
  \item
    Annual external social costs per households (total/\% paid)
  \end{itemize}
\end{itemize}

\hypertarget{exporting-data}{%
\subsection{Exporting data}\label{exporting-data}}

Most of the data generated during a VisionEval model run can be exported (using \href{https://github.com/VisionEval/VisionEval-Dev/blob/development/sources/tools/exporter.R}{exporter.R}) if desired for further analyses. The user can then mine and visualize the data using a variety of open source and proprietary tools. This provides the user with considerable flexibility for creating more detailed statistics than those provided by the program. These VisionEval outputs might further serve as inputs to other models (e.g., emissions models, economic impact models) and visualization tools, and compilation of additional performance metrics.

\hypertarget{validation}{%
\subsection{Validation}\label{validation}}

Setting up the model includes the steps required to apply the model for a given study. It is somewhat related to validation, both for informing what types of studies that VisionEval are appropriately sensitive to and interpreting the results. See the Getting Started page on the wiki for an overview of getting started initially.

Validation is the assessment of a model's suitability for its intended purpose, often informed by comparisons against information not used in its original development. In traditional transportation planning models the comparison of observed versus modeled link flows is often a key component of validation. VisionEval is a data-driven model in that most of its inputs values are exogenously defined rather than emergent behavior from complex mathematical equations. Its aggregate representation of travel demand dictates that it be validated at the same level, with an emphasis on a wider number of comparisons than many traditional models.

The metric used in validation can range from relatively few, such as per-capita mobility estimates (e.g., VMT and VHT by mode), to a large number of more detailed targets. Examples of the latter include comparisons to external sources (e.g., HPMS data, DMV data), sensitivity tests of key variables, and comparison to comparable communities. An example of detailed validation criteria \href{}{used by the Oregon DOT} provides examples of these targets.

There are several options for making adjustments in order to calibrate and validate the models. These adjustments vary in difficulty, and the most appropriate approach varies by module. From easiest to most difficult the options for making adjustments are:

\begin{itemize}
\tightlist
\item
  \emph{Self-calibration:} Several of the modules are self-calibrating in that they automatically adjust calculations to match input values without intervention by the user.{[}Selected value should be validated to confirm the calculations are done correctly{]}
\item
  \emph{Adjustment of model inputs:} Some modules allow the user to optionally enter data that can be used to adjust the models to improve their match to observed conditions.
\item
  \emph{Model estimation data}: Several modules use data specific to the region where the model is deployed, such as household synthesis. Functions within each module generate cross-tabulations required from these data. \protect\hyperlink{census-pums}{{Census PUMS}} data from Oregon were used to develop the original models, and should be replaced with PUMS data for the modeled area.
\item
  \emph{Model estimation scripts:} An advanced user or developer can make adjustments to the model code itself in order to facilitate better matching observed local behavior or patterns. This, of course, is the most difficult option and opens up potential for significant errors, but it is possible for users that know what they are doing.
\end{itemize}

The main validation targets have historically included household income, vehicle ownership, vehicle miles of travel, and fuel consumption. The number of workers and drivers within each geography have recently become more widely used. These statistical comparisons can be made for the modeled area as a whole or for large geographies nested within them (e.g., Azones, Mareas). Sensitivity tests should be performed to evaluate the reasonableness (eg. correct direction and magnitude) of the VisionEval output estimates. Comparable community applications of VisionEval may also provide a reasonableness check that the model is functioning appropriately.

Note that HPMS definition of VMT differs from that used in VisionEval. VisionEval reports on all household travel regardless of where it occurs, and adds Commercial vehicle and Heavy Duty Truck and Bus travel on MPO roads. HPMS reports vehicular travel of all modes on roads within the MPO boundary.

\hypertarget{lexicon}{%
\section{Lexicon}\label{lexicon}}

\hypertarget{buit-form-measures}{%
\subsection{5D built form measures}\label{buit-form-measures}}

The five dimensions considered in designing efficient and sustainable cities include density, design, destination access, distance to transit, and diversity of the built environment. The five dimensions build upon the original 3Ds (density, diversity, and design) advanced by \href{https://www.sciencedirect.com/science/article/pii/S1361920997000096}{Cervero \& Kockelman (1997)}. These measures are calculated in the \texttt{Calculate4DMeasures} module during household synthesis.

\hypertarget{access-time}{%
\subsection{access time}\label{access-time}}

The time required to get from the origin to the vehicle (or in the case of \protect\hyperlink{car-service}{car service}, the time for the vehicle to get to the traveler) and the time to get from the vehicle to the destination (including time to park the vehicle). These values are defined for vehicles owned by the household and for two levels of car service (low and high availability levels) in each Bzone. These factors are defined in \texttt{azone\_vehicle\_access\_times.csv} and used by the \texttt{CalculateVehicleOperatingCost} module in the \texttt{VETravelPerformance} package.
\href{https://github.com/VisionEval/VisionEval/blob/master/api/VE_Training_March_13-14_2019/VE_Training.md\#97-calculatevehicleoperatingcost-module}{Additional details}

\hypertarget{age-group}{%
\subsection{age group}\label{age-group}}

VisionEval uses the same age groups used in the U.S. Census: 0-14, 15-19, 20-29, 30-54, 55-64, and 65+ years old. The number of persons in each age group are defined for each synthetic household.

\hypertarget{auto-sufficiency}{%
\subsection{auto sufficiency}\label{auto-sufficiency}}

Auto sufficiency is achieved when the number of vehicles available to a household is equal to or greater than the number of licensed drivers in a household. A household in ``auto insufficient'' when that is not true. Zero-auto households are cases where the household has access to a vehicle. In the age of ubiquitous mobility services this definition may become less important in describing mobility options open to the household.

\hypertarget{azones}{%
\subsection{azones}\label{azones}}

Aggregations of \protect\hyperlink{bzones}{Bzones}, often corresponding to county, city, Census named place, or comparable political divisions.
\protect\hyperlink{model-geography-and-years}{Additional details} on VisionEval model geography levels.

\hypertarget{bus-equivalent-miles}{%
\subsection{bus-equivalent-miles}\label{bus-equivalent-miles}}

The total bus revenue miles for a transit system are divided by the assumed transit vehicle type capacities to arrive at bus-equivalent miles of service. The total bus revenue miles for a transit system are divided by the population of the enclosing Marea(s) to compute per capita bus-equivalent miles.
\href{https://github.com/VisionEval/VisionEval/blob/master/api/VE_Training_March_13-14_2019/VE_Training.md\#51-assigntransitservice-module}{Additional details}

\hypertarget{bzones}{%
\subsection{bzones}\label{bzones}}

The smallest levels of geography coded in VisionEval, and often correspond to Census tracts or block groups. In most instances the Bzones are larger than traffic analysis zones used in traditional travel demand forecasting models.
\protect\hyperlink{model-geography-and-years}{Additional details} on VisionEval model geography levels.

\hypertarget{carbon-intensity}{%
\subsection{carbon intensity}\label{carbon-intensity}}

A emissions measure in grams of carbon dioxide equivalents per megajoule of energy. VisionEval uses a ``well-to-wheels'' estimate that takes into account not only the emissions resulting from the use of the fuel (``tank-to-wheels'' measures) but also the carbon emissions required to produce and transport the fuel it where it is purchased by consumers. Default values are estimated from various sources in VisionEval. The user can specify different values. These values are used in several places in the \texttt{VEPowertrainsAndFuels} package.
\href{https://github.com/VisionEval/VisionEval/blob/master/api/VE_Training_March_13-14_2019/VE_Training.md\#8-vepowertrainsandfuels-package}{Additional details}

\hypertarget{carbon-price}{%
\subsection{carbon price}\label{carbon-price}}

A carbon price in dollars per ton is used to estimate part of the \protect\hyperlink{social-costs}{social cost} of emissions in the \texttt{CalculateVehicleOperatingCost} module of the \texttt{VETravelPerformance} package.
\href{https://github.com/VisionEval/VisionEval/blob/master/api/VE_Training_March_13-14_2019/VE_Training.md\#97-calculatevehicleoperatingcost-module}{Additional details}

\hypertarget{car-service}{%
\subsection{car service}\label{car-service}}

Car services are a specific mode used in VisionEval models treated as vehicles available to the household. Car services can be considered a synonym for popular ride-sharing services provided by mobility-as-a-service (MaaS) companies. VisionEval distinguishes between two levels of car service, categorized as ``high'' or ``low'' level service. Users can define different attributes for each level of car service. Notably, households in areas with a ``high'' level of car service, car service will be competitive with vehicle ownership. Users can define the car service substitution probability.

\hypertarget{car-service-level}{%
\subsection{car service level}\label{car-service-level}}

Car services include taxis, car sharing services (e.g.~Car-To-Go, Zipcar), and future automated taxi services. A high car service level is one that has vehicle access times (time to walk between car and origin or final destination) that are competitive with private car use. High level of car service is considered to increase household car availability similar to owning a car. Low level car service, approximates current taxi service does not have competitive access time and is not considered as increasing household car availability.

\hypertarget{car-service-substitution}{%
\subsection{car service substitution probability}\label{car-service-substitution}}

Average likelihood that an owner would substitute car services for a household vehicle (separate values by \protect\hyperlink{vehicle-type}{vehicle type}. For example, if the user assumes that only a quarter of light truck owners would substitute car services for owning a light truck (e.g.~because car services wouldn't enable them to use their light truck as they intend, such as towing a trailer), then the light truck substitution probability would be 0.25.

\hypertarget{cash-out-buy-back}{%
\subsection{cash-out/buy-back program}\label{cash-out-buy-back}}

Parking cash-out schemes are an employee benefit that enables them to accept taxable cash income in lieu of paid or subsidized parking at the workplace. The cash-out is sometimes combined with discounted transit passes in some places. It is used as an inducement to reduce commuting by auto, especially in single-occupant vehicles.
FHWA has an \href{https://ops.fhwa.dot.gov/publications/fhwahop12026/sec_4.htm}{excellent primer on the topic}, while many consider Donald Shoup's \href{http://shoup.bol.ucla.edu/Parking\%20Cash\%20Out\%20Report.pdf}{online book} a definitive resource on the topic.

\hypertarget{census-pums}{%
\subsection{Census PUMS}\label{census-pums}}

The Public Use Microsample (PUMS) data are anonymized long form responses from the American Community Survey (ACS) that enable custom tabulations, summaries, and visualizations. The PUMS were formerly associated with each dicennial Census of Households and Population. The samples are anonymized by assigning each to a Public Use Microdata Area (PUMA) of 100,000 or more households. Several multi-dimensional summaries used in model estimation are gleaned from the PUMS that cannot be obtained from other Census data. Data indexed along these multiple dimensions permit the PUMS data to be fused with travel survey data and to create synthetic populations.
ACS PUMS data from 2005-19 in annual increments can be accessed from the \href{https://www.census.gov/programs-surveys/acs/microdata.html}{PUMS website}. Data from 1996-2004 can be \href{https://www2.census.gov/programs-surveys/acs/data/pums/}{accessed separately}.

\hypertarget{commercial-service}{%
\subsection{commercial service}\label{commercial-service}}

The use of vehicles by firms and government agencies for non-personal travel other than the delivery of freight. (e.g., parcel delivery, business meetings, sales calls). Both automobiles and light trucks can be used for commercial services, and are defined both in terms of \protect\hyperlink{powertrain}{powertrain} and fuel type (gasoline, diesel, or compressed natural gas).
\href{https://github.com/VisionEval/VisionEval/blob/master/api/VE_Training_March_13-14_2019/VE_Training.md\#81-loaddefaultvalues}{Additional details}

\hypertarget{congestion-fee}{%
\subsection{congestion fee}\label{congestion-fee}}

The fee collected to manage congestion, by charging a higher price during congested periods, and thereby reducing demand and freeing capacity for higher value users such a freight movement. Separate price schemes can be set by year to be imposed only during severe or extreme congestion. The input is the average amount paid per mile in congestion pricing fee. This is an input to the \texttt{CalculateRoadPerformance} module in the \texttt{VETravelPerformance} package.
\href{https://github.com/VisionEval/VisionEval/blob/master/api/VE_Training_March_13-14_2019/VE_Training.md\#94-calculateroadperformance-module}{Additional details}

\hypertarget{congestion-level}{%
\subsection{congestion level}\label{congestion-level}}

Five levels of congestion -- none, moderate, heavy, severe, and extreme -- are estimated within each Marea by comparing \protect\hyperlink{relative-roadway-supply}{relative roadway supply} with the aggregate level of daily VMT (demand). Lookup tables are then used to estimate average speeds and delay for freeways and arterials. The effects of four standard operations programs (freeway ramp metering and incident management, arterial signal progression and access control) and optional user-defined programs are included in the calculations. The calculations are carried out in the \texttt{CalculateRoadPerformance} module of the \texttt{VETravelPerformance} package.
\href{https://github.com/VisionEval/VisionEval/blob/master/api/VE_Training_March_13-14_2019/VE_Training.md\#94-calculateroadperformance-module}{Additional details}

\hypertarget{development-type}{%
\subsection{development type}\label{development-type}}

NEED MORE INFO The mixing of jobs and housing

\hypertarget{dwelling-unit-type}{%
\subsection{dwelling unit type}\label{dwelling-unit-type}}

Each household inhabits a dwelling unit that is either a single-family dwelling, a multi-family dwelling, or group quarters.
\href{https://github.com/visioneval/visioneval/blob/master/api/model_system_design.md\#811-model-specification-and-estimation}{Additional details}

\hypertarget{ecodrive}{%
\subsection{EcoDrive}\label{ecodrive}}

A term used to describe energy efficient use of vehicles in order to reduce fuel consumption and emissions. Primarily a \href{https://www.ecodrive.org}{European pursuit}, EcoDriving involves changes to vehicular technology, vehicle navigation and automation systems, and driving techniques. Factors expressing the degree of EcoDriving adoption are applied in the \texttt{CalculateMpgMpkwhAdjustments} module of the \texttt{VETravelPerformance} package.
\href{https://github.com/VisionEval/VisionEval/blob/master/api/VE_Training_March_13-14_2019/VE_Training.md\#96-adjusthhvehiclempgmpkwh-module}{Additional details}

\hypertarget{employee-commute-options-program}{%
\subsection{employee commute options program}\label{employee-commute-options-program}}

A voluntary employer-based program aimed at reducing solo commutes by automobile using strategies and incentive tailored towards each specific organization. Strategies range from providing information and management encouragement to use alternative modes of transportation to cash incentives. Cash-out/buy-in programs are one example of the latter.
A massDOT \href{https://www.mass.gov/doc/guidebook/download}{guidebook} provides extensive information about such programs.
In some states such programs are mandatory for large employers. Information on Oregon's \href{https://www.oregon.gov/deq/aq/programs/pages/eco.aspx}{Employee Commute Options} program includes information about conducting employee surveys to demonstrate progress towards commuting trip reduction targets.

\hypertarget{employment-rate}{%
\subsection{employment rate}\label{employment-rate}}

The employment rate is the number potential workers aged 17 and over divided by the total number of persons in the Bzone. Note that it is a calculated rate based on zonal attributes, and is a proxy for the labor force participation rate.

\hypertarget{employment-type}{%
\subsection{employment type}\label{employment-type}}

Zonal employment estimates in VisionEval are made for retail, service, and total employment categories. The delineation of retail and service employment is typically by the \href{https://www.census.gov/cgi-bin/sssd/naics/naicsrch?chart=2017}{two-digit sectors} in the \href{https://www.census.gov/eos/www/naics/}{North American Industrial Classification System} (NAICS). The NAICS system is widely used in most governmental reporting systems.

\hypertarget{ev-surcharge}{%
\subsection{EV surcharge}\label{ev-surcharge}}

Some states impose a tax on electric vehicles beyond sales tax and vehicle registration fees to make up for the shortfall in gasoline sales tax revenue they might otherwise contribute towards the costs of roadway infrastructure. The methods and rates \href{https://www.wsj.com/articles/more-states-charge-fees-for-electric-vehicles-11585400401}{vary considerably}, with some EV owners paying more in sales tax and EV surcharges than most owners of conventional autos. The EV surcharge can be accounted for in the \texttt{CalculateVehicleOperatingCosts} module in the \texttt{VETravelPerformance} package.
\href{https://github.com/VisionEval/VisionEval/blob/master/api/VE_Training_March_13-14_2019/VE_Training.md\#97-calculatevehicleoperatingcost-module}{Additional details}

\hypertarget{freeway-lane-miles}{%
\subsection{freeway lane-miles}\label{freeway-lane-miles}}

The sum of the number of lanes multiplied by the length of each freeway segment within a metropolitan area (Marea). The lane-miles of arterials are calculated separated (see \protect\hyperlink{roadway-lane-miles}{roadway lane-miles}. Both are created in the \texttt{AssignRoadMiles} module of the \texttt{VETransportSupply} package.
\href{https://github.com/VisionEval/VisionEval/blob/master/api/VE_Training_March_13-14_2019/VE_Training.md\#52-assignroadmiles-module}{Additional details}

\hypertarget{freight-vehicle-groups}{%
\subsection{freight vehicle groups}\label{freight-vehicle-groups}}

\emph{see} \protect\hyperlink{vehicle-groups}{vehicle groups}

\hypertarget{fuel-efficiency}{%
\subsection{fuel efficiency}\label{fuel-efficiency}}

VisionEval does not simulate driving cycles so uses measures of relative fuel efficiency derived from the USEPA's Physical Emission Rate Estimator (PERE) for different vehicle \protect\hyperlink{powertrains}{powertrains} during congested conditions. The user-supplied values in \texttt{congestion\_efficiency.csv} define the congestion performance of each powertrain relative to best (1.0) and worst (0.0) values. The data are used in the \texttt{LoadDefaultValues} module in the \texttt{VEPowertrainsAndFuels} package.
\href{https://github.com/VisionEval/VisionEval/blob/master/api/VE_Training_March_13-14_2019/VE_Training.md\#81-loaddefaultvalues}{Additional details}

\hypertarget{fuel-speed-curves}{%
\subsection{fuel-speed curves}\label{fuel-speed-curves}}

A set of exogenously calculated adjustments to the average fuel economy of vehicles as a function of the vehicle type (light-duty or heavy-duty), \protect\hyperlink{powertrain}{powertrain}, and \protect\hyperlink{roadway-types}{roadway type}. The curves and their derivation are described by \href{https://pdxscholar.library.pdx.edu/cengin_fac/342/}{Bigazzi \& Clifton (2011)}.

\hypertarget{growth-basis}{%
\subsection{growth basis}\label{growth-basis}}

The growth in commercial and heavy truck travel over time increase at the same rate as the population does, as firms and establishments are not explicitly modeled in VisionEval. Future year daily VMT is calculated as a function of population or income from heavy trucks or population, income, or household daily VMT for commercial service.
\href{https://github.com/VisionEval/VisionEval/blob/master/api/VE_Training_March_13-14_2019/VE_Training.md\#93-calculateroaddvmt-module}{Additional details}

\hypertarget{heavy-truck}{%
\subsection{heavy truck}\label{heavy-truck}}

A single class of heavy trucks are used to represent all commercial vehicles larger than the light duty trucks included in the \protect\hyperlink{commercial-service}{commercial service} vehicles. The same vehicle operating and emissions parameters specified for other \protect\hyperlink{vehicle-group}{vehicle groups} are defined for heavy trucks, and their impacts are calculated in several VisionEval packages.

\hypertarget{individualized-marketing-programs}{%
\subsection{individualized marketing programs}\label{individualized-marketing-programs}}

Education and public outreach efforts designed to encourage voluntary travel behavior changes. Rather than using broad messages for the entire population this approaches targets specific groups of travelers with information more relevant to them.
A \href{https://www.oregon.gov/ODOT/Planning/Documents/Mosaic-Individualized-Marketing-Programs.pdf}{concise fact sheet} describes its implementation in Oregon. \href{https://trec.pdx.edu/research/project/160/Long_term_evaluation_of_individualized_marketing_programs_for_travel_demand_management}{Dill \& Mohr (2010)} investigate the long-term effectiveness of such programs.

\hypertarget{intelligent-transportation-systems}{%
\subsection{intelligent transportation systems (ITS)}\label{intelligent-transportation-systems}}

Systems that integrate information, communications, and advanced vehicular technologies into transportation infrastructure, maintenance, and operations programs to improve mobility and safety. ITS programs are typically centrally controlled by transportation agencies rather than individually autonomous solutions like personal navigation systems. Examples of ITS systems include traveler information systems (e.g., 511 systems, variable message signs), adaptive traffic signal systems, ramp metering, and electronic toll collection.

\hypertarget{its}{%
\subsection{ITS}\label{its}}

\emph{see} {[}intelligent transportation systems{]}(\#intelligent-transportation-systems\}

\hypertarget{lambda-parameter}{%
\subsection{lambda parameter}\label{lambda-parameter}}

The assumed split of light-duty household and \protect\hyperlink{commercial-service}{commercial service} vehicles between freeways and arterials is calculated dynamically as the ratio of the respective average travel speeds and an urbanized area specific factor (lambda). The latter adjusts the raw ratio of speeds to match observed percentages using data from 90 urbanized areas. The calculation is carried out in the \texttt{CalculateRoadPerformance} module.
\href{https://github.com/VisionEval/VisionEval/blob/master/api/VE_Training_March_13-14_2019/VE_Training.md\#94-calculateroadperformance-module}{Additional details}

\hypertarget{licensure-rate}{%
\subsection{licensure rate}\label{licensure-rate}}

The percent of adults aged 17 and over that possess a drivers license, summarized from the PUMS data for the modeled region.

\hypertarget{lifecycle}{%
\subsection{lifecycle}\label{lifecycle}}

A label used to describe the stage of life that a household's members are at. This is guessed at in VisionEval as a function of the number of adults, children, and workers in the household. This is assigned in the \texttt{AssignLifeCycle} module. It assumes one of 10 values defined in the \href{https://nhts.ornl.gov/tables09/CodebookPage.aspx?id=1239}{2009 NHTS LIF\_CYC variable}
\href{https://github.com/visioneval/visioneval/blob/master/api/model_system_design.md\#811-model-specification-and-estimation}{Additional details}

\hypertarget{location-type}{%
\subsection{location type}\label{location-type}}

Each household is classified by whether its enclosing Bzone is located in an urban, town, or rural area. The \texttt{location\_type} variable is defined for each Bzone.
\href{https://github.com/VisionEval/VisionEval/blob/master/api/VE_Training_March_13-14_2019/VE_Training.md\#15-geographic-structure-of-a-visioneval-model}{Additional details}

\hypertarget{metropolitan-area}{%
\subsection{metropolitan area (Marea)}\label{metropolitan-area}}

In VisionEval a metropolitan area (Marea) is a collection of Azones that define a unique urbanized area with shared characteristics such as freeway lane-miles and transit revenue-miles. In some cases a transit service area might define a metropolitan area rather than political boundaries.
\protect\hyperlink{model-geography-and-years}{Additional details} on VisionEval model geography levels.

\hypertarget{mixed-use}{%
\subsection{mixed use}\label{mixed-use}}

\emph{see} \protect\hyperlink{urban-mixed-use}{urban mixed-use}

\hypertarget{national-household-travel-survey}{%
\subsection{National Household Travel Survey (NHTS)}\label{national-household-travel-survey}}

The NHTS collects household and traveler information and travel diaries from a random sample of U.S. households. The 2017 survey collected data from 26,000 households selected nationwide and an additional 103,112 additional ``add-on'' samples purchased by nine states and four regional and metropolitan planning agencies. The information collected is comparable to the data collected in bespoke household travel surveys. The latest year for which NHTS data are available is 2017, with seven prior surveys dating to 1969 conducted before it. Publicly available data are available with reduced geographic detail (i.e., households only coded to state and place size ranges) for \href{https://nhts.ornl.gov/}{2017} and \href{https://nhts.ornl.gov/download.shtml}{prior years}. VisionEval was developed using the public use NHTS data from 2001, while the Multimodal Travel package was developed using confidential 2009 NHTS data.

\hypertarget{nhts}{%
\subsection{NHTS}\label{nhts}}

\emph{see} \protect\hyperlink{national-household-travel-survey}{National Household Travel Survey}

\hypertarget{non-institutional-group-quarters}{%
\subsection{Non-institutional group quarters}\label{non-institutional-group-quarters}}

Persons living in non-institutional group dwellings (e.g., college dormitories, halfway houses). Persons living in institutional group dwellings are not included in VisionEval, and include hospital patients, prison inmates, and military barracks.

\hypertarget{out-of-pocket-cost}{%
\subsection{out-of-pocket cost}\label{out-of-pocket-cost}}

The variable costs of automobile usage are considered out-of-pocket costs. They are often considered the perceived cost of using automobiles. In VisionEval they include the cost of fuel and parking or the cost of using \protect\hyperlink{car-service}{CarService}. The out-of-pockets are a subset of the \protect\hyperlink{auto-operating-costs}{auto operating costs}.

\hypertarget{parking-costs}{%
\subsection{parking costs}\label{parking-costs}}

Parking costs in VisionEval are trip-based costs, commonly paid for at one or both ends of a trip, and sometimes paid for on a monthly basis. The standard practice for handling parking pricing in urban travel demand models is to include it in the trip costs for auto travel. Two types of parking costs are addressed in the model - parking costs at places of employment and parking costs at other places. Daily parking costs are calculated for each household and added in with other variable costs. This includes fees for parking at workplace (including cash-out policies) and for non-work trips. Parking fees are a subset of \protect\hyperlink{parking-restrictions}{parking restrictions}. Parking fees can be paid for residential, workplace, or other destinations.

\hypertarget{parking-restrictions}{%
\subsection{parking restrictions}\label{parking-restrictions}}

Parking restrictions and fees affect households at their places of residence and work, as well as other places they travel to within the modeled area. This information is coded at the Bzone level and typically includes the average number of free parking spaces by dwelling unit type (single family, multi-family, and group quarters), the average daily parking cost, and proportion of workers who pay for parking or participate in a cash out-buy back program. Parking restrictions are used for Azones that are members of a defined metropolitan area (Marea) within the model.
\href{https://github.com/visioneval/visioneval/blob/master/sources/modules/VELandUse/inst/module_docs/AssignParkingRestrictions.md}{Additional details}

\hypertarget{pay-as-you-drive}{%
\subsection{pay-as-you-drive (PAYD)}\label{pay-as-you-drive}}

An insurance program, also known as usage-based insurance, whose premiums are based on actual usage of the insured vehicle as well as how well you drive. It is viewed by some as the emerging standard in insurance. Using a PAYD assumption in VisionEval enables the analyst to more precisely calculate \protect\hyperlink{auto-ownership-cost}{auto ownership cost} based on household daily VMT estimates. The proportion of households using PAYD are included in the calculations carried out by the \texttt{CalculateVehicleOwnCost} module.
\href{https://github.com/VisionEval/VisionEval/blob/master/api/VE_Training_March_13-14_2019/VE_Training.md\#66-calculatevehicleowncost}{Additional details}

\hypertarget{passenger-car-equivalents}{%
\subsection{passenger car equivalents (PCE)}\label{passenger-car-equivalents}}

A factor that indicates the number of light-duty vehicles that a \protect\hyperlink{heavy-truck}{heavy truck} is equivalent to in terms of vehicle length and lane usage when calculating \protect\hyperlink{roadway-capacity}{roadway capacity}. It is used in the \texttt{BalanceRoadCostsAndRevenues} module of the \texttt{VETravelPerformance} package.
\href{https://github.com/VisionEval/VisionEval/blob/master/api/VE_Training_March_13-14_2019/VE_Training.md\#99-balanceroadcostsandrevenues-module}{Additional details}

\hypertarget{place-type}{%
\subsection{place type}\label{place-type}}

NEED DEFINITION

\hypertarget{powertrain}{%
\subsection{powertrain}\label{powertrain}}

VisionEval uses detailed operating and emissions characteristics from several different types of vehicular powertrains, enabling scenarios to be quickly assembled with different assumptions about their mix in future years. Four powertrain types are presently defined in VisionEval: internal combustion engines (ICE), hybrid electric vehicles (HEV), plug-in hybrid electric vehicles (PHEV), and battery electric vehicles (BEV). The powertrain is assigned to each household vehicle in the \texttt{AssignHhVehiclePowertrain} module.

\hypertarget{regular-households}{%
\subsection{regular households}\label{regular-households}}

Related and unrelated persons living in the same dwelling unit, but not including persons living in non-institutional group quarters

\hypertarget{region}{%
\subsection{region}\label{region}}

The region defines the entire modeled area represented in the model. There is no limit to the size of the modeled region, although sub-state areas, states, and\href{https://en.wikipedia.org/wiki/Megaregions_of_the_United_States}{megaregions} are often simulated using VisionEval.
\protect\hyperlink{model-geography-and-years}{Additional details} on VisionEval model geography levels.

\hypertarget{relative-roadway-supply}{%
\subsection{relative roadway supply}\label{relative-roadway-supply}}

A synthetic measure that divides the total arterial and freeway lane-miles (i.e., the sum of the length in miles times the number of lanes for each distinct roadway segment) by the sum of the estimated trip lengths for all households. This calculation is carried out for each Marea and year. Thus, it is a measure that only applies in metropolitan areas defined in the model. This value is calculated in the \texttt{AssignRoadMiles} module and is used in several other modules.
\href{https://github.com/visioneval/visioneval/blob/master/sources/modules/VETransportSupply/inst/module_docs/AssignRoadMiles.md}{Additional details}

\hypertarget{relative-transit-supply}{%
\subsection{relative transit supply}\label{relative-transit-supply}}

NEED DEFINITION

\hypertarget{road-class}{%
\subsection{road class}\label{road-class}}

The proportion of lane miles that are classified as freeway, arterial, and other roadways. The vehicle miles of travel (VMT) calculated for households, \protect\hyperlink{commercial-service}{commercial service}, and \protect\hyperlink{heavy-trucks}{heavy trucks} is split between these three classes of roadways in the \texttt{LoadDefaultRoadDvmtValues} module of the \texttt{VETravelPerformance} package.
\href{https://github.com/VisionEval/VisionEval/blob/master/api/VE_Training_March_13-14_2019/VE_Training.md\#91-loaddefaultroaddvmtvalues}{Additional details}

\hypertarget{road-costs}{%
\subsection{road costs}\label{road-costs}}

This includes costs for roadway expansion, other modernization projects, preservation, operations, maintenance and administration. VisionEval calculates an average mileage tax for household vehicles needed to make up any differences in the cost of constructing, maintaining, and operating roadways from the revenues from fuel taxes and pricing schemes (e.g., VMT taxes, congestion taxes). The latter are calculated based on assumptions about fuel consumption (a function of total daily VMT) and fuel efficiency. While VisionEval adds this to the \protect\hyperlink{auto-operating-costs}{auto operating costs} of households it is important to note that such costs might not be passed on by governments in future years as assumed by VisionEval. The road costs and revenues are reconciled in the \texttt{BalanceRoadCostsAndRevenue} module in the \texttt{VETravelPerformance} package.
\href{https://github.com/VisionEval/VisionEval/blob/master/api/VE_Training_March_13-14_2019/VE_Training.md\#99-balanceroadcostsandrevenues-module}{Additional details}

\hypertarget{road-lane-miles}{%
\subsection{road lane-miles}\label{road-lane-miles}}

The sum of the number of lanes multiplied by the length of each arterial roadway segment within a metropolitan area (Marea). The lane-miles of freeways are calculated separated (see \protect\hyperlink{roadway-lane-miles}{freeway lane-miles}. Both are created in the \texttt{AssignRoadMiles} module of the \texttt{VETransportSupply} package.
\href{https://github.com/VisionEval/VisionEval/blob/master/api/VE_Training_March_13-14_2019/VE_Training.md\#52-assignroadmiles-module}{Additional details}

\hypertarget{road-use-taxes}{%
\subsection{road use taxes}\label{road-use-taxes}}

\emph{see} \protect\hyperlink{road-costs}{road costs}

\hypertarget{sov-diversion}{%
\subsection{short-trip SOV diversion}\label{sov-diversion}}

The \texttt{DivertSovTravel} module reduces travel in single-occupant vehicles (SOVs) to account for assumed availability of solo travel alternatives such as bicycles (traditional and electric) and scooters. The user inputs a goal for diverting a proportion of SOV travel within a 20-mile round-trip distance (i.e., for trips longer than 10 miles in one direction).
\href{https://github.com/visioneval/visioneval/blob/master/sources/modules/VEHouseholdTravel/inst/module_docs/DivertSovTravel.md}{Additional details}

\hypertarget{social-costs}{%
\subsection{social costs}\label{social-costs}}

Present and future generations bear costs due to the impact of transportation that are not fully recouped through \protect\hyperlink{autoux5cux2520operatingux5cux2520costs}{auto operating costs} or \protect\hyperlink{auto-ownership-costs}{auto ownership costs}, such as the costs of abating pollution, security and safety costs, and noise. VisionEval includes these costs in their full-cost accounting approach to calculating costs and benefits. The social cost parameters are defined as inputs to the \texttt{CalculateVehicleOperatingCost} module in the \texttt{VETravelPerformance} package.
\href{https://github.com/VisionEval/VisionEval/blob/master/api/VE_Training_March_13-14_2019/VE_Training.md\#97-calculatevehicleoperatingcost-module}{Additional details}

\hypertarget{speed-smoothing}{%
\subsection{speed smoothing}\label{speed-smoothing}}

A traffic management action or design that reduces the speed variation on freeways and arterials. Note that the introduction of autonomous vehicles will likely achieve this effect even when they only constitute a quarter or more of all vehicles on the roadway (\href{https://doi.org/10.3141/2493-04}{Levin \& Boyles 2015}, \href{https://doi.org/10.1287/trsc.2016.0712}{Mahmassani 2016}). Thus, speed smoothing might become an important property of future traffic systems that analysts should include in future years even in spite of current local interest in such programs.
\href{https://github.com/VisionEval/VisionEval/blob/master/api/VE_Training_March_13-14_2019/VE_Training.md\#95-calculatempgmpkwhadjustments-module}{Additional details}

\hypertarget{transit-d}{%
\subsection{transit d}\label{transit-d}}

NEED DEFINITION

\hypertarget{transit-modes}{%
\subsection{transit modes}\label{transit-modes}}

VisionEval includes eight transit modes, which are also called transit service modes in some places in the documentation. The eight modes include demand-responsive (DR), vanpool and similar (VP), standard motor bus (MB), bus rapid transit and commuter bus (RB), monorail or other automated guideway (MG), streetcar or trolley bus (SR), light or heavy rail (HR), and commuter rail (CR) services. The latter includes specialized CR services such as hybrid rail, cable cars, and aerial tramways.
\href{https://github.com/VisionEval/VisionEval/blob/master/api/VE_Training_March_13-14_2019/VE_Training.md\#51-assigntransitservice-module}{Additional details}

\hypertarget{transit-service-levels}{%
\subsection{transit service level}\label{transit-service-levels}}

User-supplied annual revenue miles of service for each of the eight \protect\hyperlink{transit-modes}{transit modes} are translated into bus-equivalents, revenue miles, and ultimately, vehicle miles. The transit service levels are set in the \texttt{AssignTransitService} module in the \texttt{VETransportSupply} package.
\href{https://github.com/VisionEval/VisionEval/blob/master/api/VE_Training_March_13-14_2019/VE_Training.md\#51-assigntransitservice-module}{Additional details}

\hypertarget{transit-service-miles}{%
\subsection{transit service miles}\label{transit-service-miles}}

\protect\hyperlink{bus-equivalent-miles}{Bus-equivalent-miles} used to compute \protect\hyperlink{transit-service-levels}{transit service levels} are summed to calculate transit miles by each \protect\hyperlink{transit-modes}{transit mode}. The calculations are carried out in the \texttt{AssignTransitService} module in the \texttt{VETransportSupply} package.
\href{https://github.com/VisionEval/VisionEval/blob/master/api/VE_Training_March_13-14_2019/VE_Training.md\#51-assigntransitservice-module}{Additional details}

\hypertarget{transit-vehicle-type}{%
\subsection{transit vehicle type}\label{transit-vehicle-type}}

Different energy consumption and emissions characteristics are defined for vans, buses, and rail transit modes.
\href{https://github.com/VisionEval/VisionEval/blob/master/api/VE_Training_March_13-14_2019/VE_Training.md\#911-calculateptranenergyandemissions-module}{Additional details}

\hypertarget{travel-demand-management}{%
\subsection{travel demand management (TDM)}\label{travel-demand-management}}

Policies and programs used to discourage travel in single-occupant vehicles in order to achieve safer and more efficient multimodal transportation systems. TDM encompasses a wide variety of initiatives, to include promotion of active transport, public transportation modes, car and bike sharing, and telecommuting. Adjustments in household VMT due to TDM actions are coded in the \texttt{BudgetHouseholdDvmt} module in the \texttt{VETravelPerformance} package.
\href{https://github.com/VisionEval/VisionEval/blob/master/api/VE_Training_March_13-14_2019/VE_Training.md\#98-budgethouseholddvmt-module}{Additional details}

\hypertarget{urban-mixed-use}{%
\subsection{urban mixed-use}\label{urban-mixed-use}}

A mixed use development or neighborhood is one that includes residential and non-residential land uses in close proximity to one another, allowing for pedestrian access to many desired goods and services. Such places are walkable,``bikeable,'' and encourage a local economy and strong social connections. From a transportation perspective such places are distinguished by their high degree of accessibility using non-motorized modes (active transport).
In VisionEval the proportion of each Bzone that falls into this category can either be specified by the user or calculated by the program. If the latter a random sampling from an asserted distribution is used to define whether a household is in a mixed-use area. The density of the enclosing Bzone weights the probability of a household being so classified (i.e., the higher the density the higher probability of being assigned to a mixed-use neighborhood). These calculations are carried on in the \texttt{CalculateUrbanMixMeasure} module of the \texttt{VEHouseholds} package.
\href{https://github.com/VisionEval/VisionEval/blob/master/api/VE_Training_March_13-14_2019/VE_Training.md\#45-calculateurbanmixmeasure-module}{Additional details}

\hypertarget{urbanized-area-urbanized-area}{%
\subsection{urbanized area \{urbanized-area\}}\label{urbanized-area-urbanized-area}}

Collectively the urban, or ``metro'', \protect\hyperlink{location-type}{location type} portion of the \href{metropolitan-area}{metropolitan area} (Marea) set of zones. The road, transit and urban mixed use variables only cover this portion of the Marea, which is typically equivalent to a Census urbanized area.

\hypertarget{value-of-time}{%
\subsection{value of time (VOT)}\label{value-of-time}}

The opportunity cost of the time that a person spends traveling rather than engaged in other activities. In theory it represents what the traveler would be willing to pay in order to reduce their time traveling. It is a surrogate for the value of travel times savings, which attempts to place a monetary value on the benefits of more efficient travel. While often an important parameter along with the equally influential value of reliability in pricing studies (\href{https://www.caee.utexas.edu/prof/kockelman/TransportationEconomics_Website/TranspEconReference.pdf}{Kockelman et al.~2013}, \href{http://onlinepubs.trb.org/onlinepubs/shrp2/SHRP2prepubC04.pdf}{Parsons Brinckerhoff et al.~2013}) VOT is an average value in VisionEval. It is used in \texttt{TimeCost} calculations in the \texttt{CalculateVehicleOperatingCost} module.
\href{https://github.com/VisionEval/VisionEval/blob/master/api/VE_Training_March_13-14_2019/VE_Training.md\#97-calculatevehicleoperatingcost-module}{Additional details}

\hypertarget{vehicle-age}{%
\subsection{vehicle age}\label{vehicle-age}}

The age of each household vehicle is estimated as a function of vehicle type (auto or light truck), household income, and the assumed average vehicle age coded for each vehicle type and Azone. The vehicle age is assigned in the \texttt{AssignVehicleAge} module in the \texttt{VEHouseholdVehicles} package.
\href{https://github.com/VisionEval/VisionEval/blob/master/api/VE_Training_March_13-14_2019/VE_Training.md\#65-assignvehicleage}{Additional details}

vehicle group \{\#vehicle-group\}
Different types of vehicles are used in VisionEval by different types of users. Automobiles and light trucks are used by households, car service, and commercial service, and are assigned in the \texttt{VEHouseholdVehicles} package. Heavy trucks are treated separately, and three types of vehicles -- vans, buses, and rail -- are used for transit.
\href{https://github.com/VisionEval/VisionEval/blob/master/api/VE_Training_March_13-14_2019/VE_Training.md\#83-calculatecarbonintensity-module}{Additional details}

\hypertarget{vehicle-hours-of-delay}{%
\subsection{vehicle hours of delay (VHD)}\label{vehicle-hours-of-delay}}

An aggregate performance measure usually calculated by subtracting vehicle hours of travel under uncontested conditions from total vehicle hours of travel (VHT). Both measures are approximated for each \protect\hyperlink{metropolitan-area}{metropolitan area} in VisionEval in the \texttt{CalculateRoadPerformance} module of the \texttt{VETravelPerformance} package.
\href{https://github.com/VisionEval/VisionEval/blob/master/api/VE_Training_March_13-14_2019/VE_Training.md\#94-calculateroadperformance-module}{Additional details}

\hypertarget{vehicle-operating-costs}{%
\subsection{vehicle operating costs}\label{vehicle-operating-costs}}

A combination of out-of-pocket and travel time costs used to estimate the cost per mile of owning and operating an automobile. These costs include fuel (energy), maintenance, tires, and repairs for all households. In addition, pollution or carbon taxes, parking charges, and pay-as-you-drive (PAYD) insurance costs are included where coded for the household's enclosed Bzone. The costs are calculated in the \texttt{CalculateHhVehicleOperatingCosts} module of the \texttt{VETravelPerformance} package.
\href{https://github.com/visioneval/visioneval/blob/master/sources/modules/VETravelPerformance/inst/module_docs/CalculateVehicleOperatingCost.md}{Additional details}

\hypertarget{vehicle-ownership-costs}{%
\subsection{vehicle ownership costs}\label{vehicle-ownership-costs}}

The average cost of auto ownership is calculated based upon vehicle type (automobile, light truck) and age using typical cost figures from AAA data. The cost per mile is estimated by dividing the average cost by the household daily VMT estimates produced by the model. A depreciation model is used to adjust this cost based upon the vehicle type, age, and annual miles driven (daily VMT converted into annual miles). The ownership costs represent the full costs of ownership, to include maintenance, tires, depreciation, fuel, insurance, etc.Auto ownership is adjusted when the per-mile cost of owning a car is higher than car service (mobility services) when the latter has high availability. This adjustment is made in the \texttt{AdjustVehicleOwnership} module.
\href{https://github.com/VisionEval/VisionEval/blob/master/api/VE_Training_March_13-14_2019/VE_Training.md\#66-calculatevehicleowncost}{Additional details on auto ownership} and \href{https://github.com/VisionEval/VisionEval/blob/master/api/VE_Training_March_13-14_2019/VE_Training.md\#67-adjustvehicleownership}{auto ownership adjustments}

\hypertarget{vehicle-table}{%
\subsection{vehicle table}\label{vehicle-table}}

A vehicle table is a list of every vehicle owned by a household in VisionEval. It includes the vehicle characteristics, household ID, and the Azone and Marea the household is allocated to. It is created in the \texttt{CreateVehicleTable} module in the \texttt{VEHouseholdVehicles} package.
\href{https://github.com/VisionEval/VisionEval/blob/master/api/VE_Training_March_13-14_2019/VE_Training.md\#64-createvehicletable}{Additional details}

vehicle type \{\#vehicle-type\}
In VisionEval vehicle type refers to the distinction between automobiles and light trucks that are used by all light duty \protect\hyperlink{vehicle-group}{vehicle groups}: households, car service, and commercial service vehicles.

\hypertarget{tutorial}{%
\chapter{VisionEval Tutorial}\label{tutorial}}

The VisionEval Tutorial provides an introductory walkthrough on how to set up a VisionEval model specific to your area of interest. This chapter does not cover how to install and run VisionEval, those instructions are covered in the \protect\hyperlink{getting-started}{Getting Started} chapter. For users completely new to VisionEval, reviewing the \protect\hyperlink{conceptprimer}{Concept Primer} chapter for an overview of VisionEval modeling system is highly recommended before starting into the tutorial materials.

This VisionEval tutorial breaks down the process of setting up a model into several steps. Each step is described in it's own chapter, referenced below, and can also be accessed from the main navigation menu.

\begin{itemize}
\tightlist
\item
  The \textbf{\protect\hyperlink{picking-a-model}{Picking a Model}} chapter is where to start for an overview of the three VisionEval models, VERSPM, VE-State, and VERPAT, and information on how to make a selection based on model differences and user needs.
\item
  The \textbf{\protect\hyperlink{model-geography-and-years}{Model Geography and Years}} chapter is the first step in applying the selected VisionEval model by making key decision on spatial scale and years.
\item
  The \textbf{\protect\hyperlink{model-inputs}{Developing Inputs}} chapter has detailed information on the the specific inputs for each VisionEval model as well as generalized best practices on data sources and methods.
\item
  The \textbf{\protect\hyperlink{validation-and-troubleshooting}{Validating and Troubleshooting}} chapter is relevant once users have a complete set of inputs need to debug or validate their base model.
\item
  The \textbf{\protect\hyperlink{developing-scenarios}{Developing Scenarios}} chapter contains details on how to use VisionEval to set up multi-scenario runs for exploratory scenario planning.
\item
  The \textbf{\protect\hyperlink{ve-estimation}{Estimation in VisionEval}} chapter reviews advanced customization techniques for users, including how model estimation is integrated into the VisionEval modeling system and how to replace a model's default estimation with local data.
\end{itemize}

\hypertarget{picking-a-model}{%
\chapter{Picking a Model}\label{picking-a-model}}

The VisionEval system is comprised of three models:

\begin{itemize}
\tightlist
\item
  \textbf{VERSPM} (VisionEval Regional Strategic Planning Model) was developed by Oregon Department of Transportation (ODOT) as an offshoot of the GreenSTEP model to support the preparation of metropolitan area scenario plans. The name reflects a broadening of the policies, beyond state statutory requirements. This model operates largely at the zonal level (i.e.~inputs and outputs are zone-based).
\item
  \textbf{VE-State} is a state level version of VERSPM. Like VERSPM, this model operates at the zonal level, but the zones are larger than their VERSPM counterparts.
\item
  \textbf{VERPAT} (VisionEval Rapid Policy Analysis Tool) was developed under the federal Strategic Highway Research Program (SHRP2). The model was developed to help planners evaluate the potential effect of growth policies on regional travel. Portions of the GreenSTEP model were used in VERPAT, but substantial revisions were made to the code, including use of land use place type categories. This model operates largely at the region or place type level for the entire region.
\end{itemize}

\hypertarget{spatial-detail}{%
\section{Spatial Detail}\label{spatial-detail}}

One key distinction between the all VisionEval models is the level of spatial detail. In general, the VisionEval models with a greater level of spatial detail also require more effort for developing the model inputs. In picking a model, users should consider their needs in the context of this trade-off between spatial detail and development effort.

\textbf{VERSPM} was developed as a regional model for regional planning areas and MPOs. VERSPM models the region in zones (in a manner similar to traditional travel model zones), which results in improved spatial resolution of outputs, but which also increases the data development burden. The selection of the right tool therefore depends on a number of factors -- available of data, project resources, desired spatial output detail, etc. Take a look at the model \protect\hyperlink{input-files}{inputs}, which has many inputs by Bzones.

\textbf{VE-State} was developed as an extension of the VERSPM model to enables users to apply the model for statewide applications. The main difference between the VERSPM and VE-State models is that a number of VERSPM inputs are specified at the Bzone level. Examples include numbers of dwelling units by type and numbers of jobs by sector. VE-State models run at a higher level of abstraction than VERSPM models and don't have Bzone level inputs. Instead, the VE-State uses a process to \href{http://htmlpreview.github.io/?https://github.com/VisionEval/VisionEval/blob/master/sources/modules/VESimLandUse/inst/module_docs/analyze_3Ds.html}{synthesis Bzones}.

\textbf{VERPAT}, like VERSPM, operates primarily at the region level. However, VERPAT has less spatial detail than VERSPM and requires inputs at place type level. As shown below, place types are defined as a combination of area type and development type. Area type (or regional role) describes the interdependencies of each neighborhood compared to the rest of the region, e.g.~how centered is it to jobs in the region. Development type (or neighborhood character) is used to describe the physical characteristics of each neighborhood in isolation. Operating at the place type level simplifies the input data requirements and the spatial precision of outputs while still capturing the effects of the different place types in the region. Take a look at the model \protect\hyperlink{inputs-and-parameters-2}{inputs}, which has only one input by Bzone (i.e., population and employment) which represents population and employment for each place type.

\includegraphics{images/verpat-place-types.jpg}

\hypertarget{model-geography-and-years}{%
\chapter{Model Geography and Years}\label{model-geography-and-years}}

Once a VisionEval model has been selected, the next step is deciding on the model geography and years. Both the model geography and years will inform the input data needed.

\hypertarget{years}{%
\section{Years}\label{years}}

Inputs in VisionEval are developed for every model year. Most applications consist of a base year and a future year. If the model area has a travel demand model available, it is good practice to align the VisionEval model years with those in the travel demand model, allowing the user to use the travel demand model to develop VisionEval inputs and validate the VisionEval Model. VisionEval may be used to model interim years, however each year modeled requires additional input data.

\hypertarget{geography}{%
\section{Geography}\label{geography}}

All VisionEval models share a standard geography framework. Although models are applied at different scales, sharing a common geographic definitions enables modules to be more readily shared between models. The standard geogrpahy framework specifies levels of geographical units, their names, their relative sizes, and the hierarchical relationships between them. It is flexible in that it allows geographical boundaries to be determined by the user and it allows the units in some geographical levels to be simulated rather than being tied to actual physical locations. Allowing simulation of one or more geographic levels enables modules to be shared between models that operate at different scales. For example a statewide model and a metropolitan area model could use the same module for assigning households to land development types even though the statewide model lacks the fine scale of geography of the metropolitan model.

Following is the definition of the geographic structure of the VisionEval model system:

\begin{itemize}
\tightlist
\item
  \textbf{Region} level is the entire model area. Large-scale characteristics that do not vary across the region are specified at the region level. For example, the carbon intensities of vehicle fuels are defined at the region level since they tend not to vary widely across a large geographic area. Typically, in a VERSPM model the region level is the metropolitan planning region being modeled, for VE-State it's the entire state.
\item
  \textbf{Azones} are large subdivisions of the region level. Azones are used to represent demographic and economic characteristics that vary across the region such as population forecasts of persons by age group and average per capita income. County boundaries are commonly used to represent Azones in both VE-State. In VERSPM, county or municipal boundaries are commonly used. The Azone level of geography must represent actual geographic areas and may not be simulated.
\item
  \textbf{Bzones} are subdivisions of Azones. Bzones are nested within Azones and provide more granularity on the intensity and nature of development. Bzones may correspond to actual geographic areas or may be simulated. Bzone simulation greatly reduces model input data requirements while still enabling the modeling of land-use-related policies and the effects of land use on various aspects of travel behavior. In VERSPM, Bzones must be represented by actual geographic areas; examples of VERSPM Bzone inputs include housing and population density. Common Bzone boundaries for VERSPM are TAZs, Census Tracts, or Census Block Groups. In VE-State and VERPAT, Bzones are simulated and do not represent physical geographic boundaries. Bzones in VE-State are synthesized to represent characteristics likely to be found in an actual set of Bzones within each Azone, such as neighborhood density. In VERPAT, Bzones are simulated as \emph{place types} which characterize the intensity and nature of development.
\item
  \textbf{Mareas} represent metropolitan urbanized areas. Mareas are represented in VisionEval as collections of Azones associated with an urbanized area either because a portion of the urbanized area is located in the Azone or because a substantial proportion of the workers residing in the Azone work at jobs located in the urbanized area. Metropolitan models (VERSPM and VERPAT) typically only have one assigned Marea whereas state models may have several. The model system requires that each Azone may be associated with only one Marea. It is also required that all Azones be associated with an Marea. A special Marea named \textbf{`None'} is used to apply to Azones that are not associated with any urbanized area. Mareas are used to specify and model urbanized area transportation characteristics such as overall transportation supply (transit, highways) and congestion. They are also used to specify large scale land-use-related characteristics and policies in models that use Bzone synthesis.
\item
  \textbf{Location Type} is not a geography level but a categorical level that identifies whether households are urban/town/rural.
\item
  \textbf{Place Type} is not a geography level but defines the level of urbanization (area type) and mixing of jobs and housing (development type).
\end{itemize}

\hypertarget{setting-up-the-model-geography}{%
\subsection{Setting Up the Model Geography}\label{setting-up-the-model-geography}}

Users should note that their selected model geography will determine the geography levels for input data development. Geographical relationships for a model are described in the ``geo.csv'' file contained in the ``defs'' directory. This file tabulates the names of each geographic unit (except for region) and the relationships between them. Each row shows a unique relationship. Where a unit of geography is not explicitly defined (i.e.~it will be simulated), ``NA'' values are placed in the table.

The examples below show versions of the ``geo.csv'' file where only Azones are specified and where Azones and Bzones are specified. It should be noted that there are no naming conventions for individual zones. The user is free to choose what conventions they will use.

\textbf{Example of a geo.csv file that only specifies Azones}

\includegraphics{images/Azone_geo_file.png}

\textbf{Example of geo.csv file that specifies Azones and Bzones}

\includegraphics{images/Azone_Bzone_geo_file.png}

\hypertarget{model-geography-example}{%
\subsubsection{Model Geography Example}\label{model-geography-example}}

This section details the model geography for ODOT's VE-State model as an example. The geography levels are defined as follows:

\begin{itemize}
\tightlist
\item
  \textbf{Azones} must be physical boundaries and are represented by counties.
\item
  \textbf{Mareas} are represented by the boundaries of Metropolitan Planning Organizations (MPOs), which can be multi-county. Azones, or counties, without an MPO have the Marea \texttt{None}.
\item
  \textbf{Location Type} (Urbanized, Town, Rural) are defined as MPOs being urbanized (defined in the model as \texttt{Metro}), urban growth boundaries (UGBs) smaller than MPOs are \texttt{Town}, and the rest is \texttt{Rural}.
\item
  \textbf{Marea Area Types} (Center, Inner, Outer, Fringe) (VE-State only) are based on VE-State EPA-SLD-based definition. ODOT builds TAZ-level place type maps for all MPOs to generate.
\end{itemize}

\textbf{ODOT VE-State geo.csv}

\begin{longtable}[]{@{}llll@{}}
\toprule()
Azone & Bzone & Czone & Marea \\
\midrule()
\endhead
Baker & NA & NA & None \\
Benton & NA & NA & Corvallis \\
Clackamas & NA & NA & Metro \\
Clatsop & NA & NA & None \\
Columbia & NA & NA & None \\
Coos & NA & NA & None \\
Crook & NA & NA & None \\
Curry & NA & NA & None \\
Deschutes & NA & NA & Bend \\
Douglas & NA & NA & None \\
Gilliam & NA & NA & None \\
Grant & NA & NA & None \\
Harney & NA & NA & None \\
Hood River & NA & NA & None \\
Jackson & NA & NA & RogueValley \\
Jefferson & NA & NA & None \\
Josephine & NA & NA & GrantsPass \\
Klamath & NA & NA & None \\
Lake & NA & NA & None \\
Lane & NA & NA & EugeneSpringfield \\
Lincoln & NA & NA & None \\
Linn & NA & NA & Albany \\
Malheur & NA & NA & None \\
Marion & NA & NA & SalemKeizer \\
Morrow & NA & NA & None \\
Multnomah & NA & NA & Metro \\
Polk & NA & NA & SalemKeizer \\
Sherman & NA & NA & None \\
Tillamook & NA & NA & None \\
Umatilla & NA & NA & None \\
Union & NA & NA & None \\
Wallowa & NA & NA & None \\
Wasco & NA & NA & None \\
Washington & NA & NA & Metro \\
Wheeler & NA & NA & None \\
Yamhill & NA & NA & None \\
\bottomrule()
\end{longtable}

Users can also have Mareas be equivalent to a \href{https://www.census.gov/programs-surveys/geography/guidance/geo-areas/urban-rural.html\#:~:text=The\%20Census\%20Bureau's\%20urban\%20areas,decennial\%20census\%20and\%20other\%20data.}{Census urbanized area} definition. Mareas do not include \texttt{Town} location types within the Marea counties. As such, ``towns'' in the Marea counties typically fall outside of the continuous urbanized area (i.e.~Census urbanized area). A county with only \texttt{Town} and \texttt{Rural} location types will have the Marea \texttt{None}. Some exceptions may be made if the outside areas are contiguous enough with the official urbanized area or will be in the horizon of the modeled scenarios, such that they will use common (high frequency) transit systems, and share the same road/congestion. Some examples of this are Eugene VERSPM model including the city of Coburg as ``urbanized'' rather than a ``town'' and Portland including Ridgefield in the urbanized area. The recommendation can be summarized as designating an Marea city outside the census ``Urbanized area'' definition as ``towns'' unless: (1) they are contiguous to the larger urbanized area, or will be in the planning horizon, or (2) if they have significant transit service, road congestion that the ``town'' formulas will not account for.

\hypertarget{model-inputs}{%
\chapter{Model Inputs}\label{model-inputs}}

Once VisionEval model has been installed, a directory with sample data will be available within the model directory (e.g., \texttt{../models/VERSPM/} where \texttt{..} refers to the parent directory of the unzipped installer file).

The model directory serves the dual purposes of providing sample data and a template for local modification to other locations.

The default VERSPM and VERPAT directories contains sample input files for the Rogue Valley region in Oregon, while the default VE-State directory contains sample input files for the State of Oregon. These inputs can be modified or replaced to investigate the impacts of policy changes or to model a different region.

The \texttt{defs} directory contains five model definition files which are introduced in \protect\hyperlink{defs}{Set-Up Inputs} section.

The \texttt{inputs} directory contains a number of \texttt{CSV} and \texttt{JSON} files that provide inputs for the modules. Each module specifies what input files it needs. The majority of input files are \texttt{CSV} formatted text files. The names of the file identify the geography level for the input data. For example, \texttt{azone\_hh\_pop\_by\_age.csv} is the input for household population by age, and should have data at the Azone level. Each input file has:

\begin{itemize}
\tightlist
\item
  \textbf{Field names} identifying dataset names
\item
  \textbf{Year} field when inputs vary by model year
\item
  \textbf{Geo} field when inputs vary by geography
\end{itemize}

Field names can also have modifiers, such as the year that money values are denominated in (e.g.~2010) or magnitude multiplier for large numbers (e.g.~1e3). Input specifications, which can be located in the source code for each module as well as the module documentation, can be referenced when users are unsure of the input data type, units, and any prohibited values. In formatting input files, users should pay attention to the following:

\begin{itemize}
\tightlist
\item
  Need values for every combination of year and geography
\item
  Field names must exactly match specifications
\item
  Values must match specification data type and not contain any prohibited values
\item
  No data for years other than model run years
\item
  No data for areas other than those defined in geo.csv file
\end{itemize}

The rest of this section will contain generalized best practices for input development applicable to all VisionEval models and go into the details of inputs for each model.

\hypertarget{defs}{%
\section{Set-up Inputs}\label{defs}}

The set-up inputs are those in the \texttt{defs} directory. Most of these files shouldn't change much from the download, unless users want their own deflators, etc. The exception is the geo.csv file which will need to be developed to inform the model geography.

\begin{itemize}
\tightlist
\item
  \protect\hyperlink{run_parameters.json}{run\_parameters.json}
\item
  \protect\hyperlink{model_parameters.json}{model\_parameters.json}
\item
  \protect\hyperlink{deflators.csv}{deflators.csv}
\item
  \protect\hyperlink{geo.csv}{geo.csv}
\item
  \protect\hyperlink{units.csv}{units.csv}
\end{itemize}

\hypertarget{run_parameters.json}{%
\subsection{run\_parameters.json}\label{run_parameters.json}}

This file contains parameters that define key attributes of the model run and relationships to other model runs. This file is a needs to be modified by the user to specify the model base year and run years. A more detailed description of the file can be found \href{https://github.com/visioneval/VisionEval/blob/master/api/model_system_design.md\#61-model-directory-structure}{here}. The results of model run are stored in a directory with the name specified by \texttt{"DatastoreName"}. This name should be changed when running different scenarios. For e.g.~when running base scenario the output directory name can be set to \emph{BaseScenario} by using \texttt{"DatastoreName":\ "BaseScenario"} in the file. The format of this file is as follows:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{\{}
    \DataTypeTok{"Model"}\FunctionTok{:} \StringTok{"VERSPM"}\FunctionTok{,}
    \DataTypeTok{"Scenario"}\FunctionTok{:} \StringTok{"Test"}\FunctionTok{,}
    \DataTypeTok{"Description"}\FunctionTok{:} \StringTok{"Test of VERSPM"}\FunctionTok{,}
    \DataTypeTok{"Region"}\FunctionTok{:} \StringTok{"RVMPO"}\FunctionTok{,}
    \DataTypeTok{"BaseYear"}\FunctionTok{:} \StringTok{"2010"}\FunctionTok{,}
    \DataTypeTok{"Years"}\FunctionTok{:} \OtherTok{[}\StringTok{"2010"}\OtherTok{,} \StringTok{"2038"}\OtherTok{]}\FunctionTok{,}
    \DataTypeTok{"DatastoreName"}\FunctionTok{:} \StringTok{"Datastore"}\FunctionTok{,}
    \DataTypeTok{"DatastoreType"}\FunctionTok{:} \StringTok{"RD"}\FunctionTok{,}
    \DataTypeTok{"Seed"}\FunctionTok{:} \DecValTok{1}
\FunctionTok{\}}
\end{Highlighting}
\end{Shaded}

\hypertarget{model_parameters.json}{%
\subsection{model\_parameters.json}\label{model_parameters.json}}

This file contains global parameters for a particular model configuration that may be used by multiple modules. A more detailed description of the file and its structure can be found \href{https://github.com/visioneval/VisionEval/blob/master/api/model_system_design.md\#61-model-directory-structure}{here}. The source of the default \$16/hr is per a Nov 2016 ODOT Report: \href{https://www.oregon.gov/ODOT/Data/Documents/Value-of-Travel-Time-for-Vehicles.pdf}{``The Value of Travel-Time: Estimates of the Hourly Value of Time for Vehicles in Oregon''}.

The format of this file is as follows:

\begin{Shaded}
\begin{Highlighting}[]
\OtherTok{[}
  \FunctionTok{\{}\DataTypeTok{"NAME"}\FunctionTok{:} \StringTok{"ValueOfTime"}\FunctionTok{,} 
   \DataTypeTok{"VALUE"}\FunctionTok{:} \StringTok{"16"}\FunctionTok{,} 
   \DataTypeTok{"TYPE"}\FunctionTok{:} \StringTok{"double"}\FunctionTok{,} 
   \DataTypeTok{"UNITS"}\FunctionTok{:} \StringTok{"base cost year dollars per hour"}
  \FunctionTok{\}}
\OtherTok{]}
\end{Highlighting}
\end{Shaded}

\hypertarget{deflators.csv}{%
\subsection{deflators.csv}\label{deflators.csv}}

This file defines the annual deflator values, such as the consumer price index, that are used to convert currency values between different years for currency denomination. This file does not need to be modified unless the years for which the dollar values used in the input dataset is not contained in this file. The format of the file is as follows:

\begin{longtable}[]{@{}ll@{}}
\toprule()
Year & Value \\
\midrule()
\endhead
1999 & 172.6 \\
2000 & 178.0 \\
2001 & 182.4 \\
\ldots{} & \ldots{} \\
2010 & 218.344 \\
\ldots{} & \ldots{} \\
2016 & 249.426 \\
\bottomrule()
\end{longtable}

\hypertarget{geo.csv}{%
\subsection{geo.csv}\label{geo.csv}}

This file describes all of the geographic relationships for the model and the names of geographic entities in a CSV formatted text file. The Azone, Bzone, and Marea names should remain consistent with the input data. More information on developing this file and VisionEval model geographic relationships can be found \protect\hyperlink{geography}{here}. The format of the file is as follows:

\begin{longtable}[]{@{}llll@{}}
\toprule()
Azone & Bzone & Czone & Marea \\
\midrule()
\endhead
RVMPO & D410290001001 & NA & RVMPO \\
RVMPO & D410290001002 & NA & RVMPO \\
RVMPO & D410290002011 & NA & RVMPO \\
RVMPO & D410290002012 & NA & RVMPO \\
RVMPO & D410290002013 & NA & RVMPO \\
RVMPO & D410290002021 & NA & RVMPO \\
RVMPO & D410290002022 & NA & RVMPO \\
RVMPO & D410290002023 & NA & RVMPO \\
RVMPO & D410290002031 & NA & RVMPO \\
RVMPO & D410290002032 & NA & RVMPO \\
RVMPO & D410290002033 & NA & RVMPO \\
RVMPO & D410290003001 & NA & RVMPO \\
RVMPO & \ldots{} & NA & RVMPO \\
\bottomrule()
\end{longtable}

\hypertarget{units.csv}{%
\subsection{units.csv}\label{units.csv}}

This file describes the default units to be used for storing complex data types in the model. This file should NOT be modified by the user. The VisionEval model system keeps track of the types and units of measure of all data that is processed. More details about the file and structure can be found \protect\hyperlink{data-types-units-and-currency-deflators}{here}. The format of the file is as follows:

\begin{longtable}[]{@{}ll@{}}
\toprule()
Type & Units \\
\midrule()
\endhead
currency & USD \\
distance & MI \\
area & SQMI \\
mass & KG \\
volume & GAL \\
time & DAY \\
energy & GGE \\
people & PRSN \\
trips & VEH \\
area & TRIP \\
households & HH \\
employment & JOB \\
activity & HHJOB \\
\bottomrule()
\end{longtable}

\hypertarget{inputs-by-concept}{%
\section{Inputs by Concept}\label{inputs-by-concept}}

This section covers over generalized inputs by concepts shared by all VisionEval models. Best practices for inputs by concepts are also discussed. To learn about the specific inputs used by each model skip ahead to the following sections:

\begin{itemize}
\tightlist
\item
  \protect\hyperlink{verspm-inputs}{VERSPM inputs}
\item
  \href{vestate-inputs}{Ve-State inputs}
\item
  \protect\hyperlink{verpat-inputs}{VERPAT inputs}
\end{itemize}

\hypertarget{household-synthesis-inputs}{%
\subsection{Household Synthesis Inputs}\label{household-synthesis-inputs}}

The demographic and land use inputs are those related to population, employment, and income that result in the \protect\hyperlink{household-synthesis-and-land-use}{household synthesis}. VisionEval takes user input statewide population by age group, assembles them into households with demographic attributes (\protect\hyperlink{lifecycle}{{lifecycle category}}, per capita income).

\begin{itemize}
\item
  \textbf{Pool of available households.} Modelwide, \protect\hyperlink{census-pums}{{Census PUMS}} data represents actual households and representative mix of household composition and demographics for your area it is built into the code. Note that users must rebuild the VESimHousehold package to use local PUMS data as Oregon data is the default, see the chapter on \protect\hyperlink{ve-estimation}{Estimation in VisionEval} for instructions on how to rebuild packages.
\item
  \textbf{Population by age control totals.} For population inputs, VisionEval models distinguish between the \protect\hyperlink{regular-households}{{regular household population}} and \protect\hyperlink{non-institutional-group-quarters}{{group quarter population}} due to distinct differences in travel behaviors. Zone-level inputs for (1) regular households and (2) group quarters households (can be 0) include population by \protect\hyperlink{age-group}{{age group}} and average per capita income. Base year totals for the household population can be obtained from Census. Future year forecasts should be consistent with but may need to be extrapolated beyond adopted regional plans (e.g., RTP, County and City TSPs). Some local governments may have detailed age information generated as part of a Housing Needs Analysis completed for the Periodic Review of the local Comprehensive Plan. If not, future population by age can apply ratios from the base year model set-up. Group quarters population data is best obtained from the university administration, by age if possible. Group quarters can be approximated from enrollment data by class year. All other group quarters data (e.g., income) are difficult to obtain but not of paramount importance to the model, simplifying assumptions are often required. Per capita income can be obtained from either the Census or Bureau of Economic Analysis. Since the model accounts for inflation, future income can remain the same in future years, or adjusted based on local plans.
\item
  \textbf{Optional household adjustments.} (Optional) constraints on regular households include average household size and proportion of single-person households, adjustments to \protect\hyperlink{licensure-rate}{{licensure rate}} for driving age persons. Household size values can be obtained from the Census and licensure data can be obtained from the state DMV.
\item
  \textbf{Employment.} VERSPM employment inputs require \protect\hyperlink{employment-type}{{employment by type}} in each model year by Bzone. VE-State requires workers by \protect\hyperlink{location-type}{{location type}} (Optional) constraints on aggregated \protect\hyperlink{employment-rate}{{employment rate}} for working age persons by Azone.
\end{itemize}

\hypertarget{land-use-inputs}{%
\subsection{Land Use Inputs}\label{land-use-inputs}}

Once households are synthesised, VisionEval allocates them to Bzone-level dwelling units inputs. Separately Bzones are attributed with employment and land use attributes (\protect\hyperlink{location-type}{{location type}}, \protect\hyperlink{buit-form-measures}{{built form `D' values}}, \protect\hyperlink{urban-mixed-use}{{mixed use}}, \protect\hyperlink{employment-type}{{employment by type}}). Household members are identified as workers and/or drivers and number of household vehicles are estimated. Each home and work location is tied to a specific Bzone with its associated attributes. Additionally, some local policies are land use based.

\begin{itemize}
\item
  \textbf{Dwelling units.} Numbers of \protect\hyperlink{dwelling-unit-type}{{dwelling units by type}} in each model year and proportions of each in each \protect\hyperlink{development-type}{{development type}}. Income quartiles tied to households in dwelling units help VisionEval assign households to a compatible Bzone location. The base year dwelling unit data can sourced from either the Census or an available travel demand model. Future year dwelling units can be obtained from local Comprehensive Plans. Adjustments may be needed to count only occupied units, and occupancy rates can be obtained from Census block group data, as a starting point. Base and future year dwelling unit counts should be consistent with household assumptions in the region's travel demand model.
\item
  \textbf{Land use.} Inputs set the total developable land area, by \protect\hyperlink{development-type}{{development type}}. VERSPM also requires its location (centroid latitude-longitude) for spatially linking to source data, and input assumptions on the \protect\hyperlink{buit-form-measures}{{built form measures}}. These inputs can change by model run year. Some land use data use \href{https://www.epa.gov/smartgrowth/smart-location-mapping}{EPA Smart Location Datasbase} (SLD) data. Geospatial SLD data can be downloaded at the block group level and extrapolated to other geographies if needed using just used the EPA block group data.
\item
  \textbf{Land use-household linkages.} VisionEval assigns a Bzone to each household's home and to each household worker's work location, with the associated Bzone attributes. The VisionEval-calculated \protect\hyperlink{urban-mixed-use}{{urban mixed use}} designation of the Bzone can optionally be modified by input targets on the proportion of households assigned that designation in each Bzone in this process.

  \begin{itemize}
  \tightlist
  \item
    \textbf{Note:} Input files must be consistent. This includes: (1) land area must be specified for each azone location type that has households or employment assigned to it; (2) dwelling units must be a reasonable match with population (divided by household size); (3) shares of jobs within each Azone must sum to 1 for all Azones in the Marea.
  \end{itemize}
\end{itemize}

\hypertarget{defining-location-type-metro-town-rural}{%
\subsubsection{Defining ``Location Type'' (metro, town, rural)}\label{defining-location-type-metro-town-rural}}

One method is to define land in MPO boundaries to be \textbf{metro}, for urban areas smaller than MPOs, land inside their UGB is a \textbf{town}. Everything else is \textbf{rural}. Note that if you want to further refine within the MPO, place types can identify low density areas that you might consider ``rural'' and areas that less accessible/more isolated (don't have access to broader transit service) as ``town''. Some states have official population forecasts done for each urban area that helps with the population inputs. Users can also use LEHD where we used the boundaries identified above to designate location types, and then used LEHD to calculate worker flows between county home location-to-work LocType (any county).

An alternative method is to use the \href{https://www.census.gov/programs-surveys/geography/guidance/geo-areas/urban-rural/2010-urban-rural.html}{Census Urban and Rural Classification}. The Census Urban and Rural Classification distinguishes between two types of urban areas:

\begin{itemize}
\tightlist
\item
  Urbanized Areas (UAs) of 50,000 or more people are defined as \textbf{metro}
\item
  Urban Clusters (UCs) of at least 2,500 and less than 50,000 people are definied as \textbf{town}
\item
  Everything else is \textbf{rural}
\end{itemize}

\hypertarget{defining-area-type-center-inner-outer-fringe}{%
\subsubsection{Defining ``Area Type'' (center, inner, outer, fringe)}\label{defining-area-type-center-inner-outer-fringe}}

``Area Type'' is based on a mix of activity density levels and destination accessibility levels, as discussed in the \href{http://htmlpreview.github.io/?https://github.com/VisionEval/VisionEval/blob/master/sources/modules/VESimLandUse/inst/module_docs/analyze_3Ds.html}{documentation} discussing the VE-State EAP-SLD-based Bzone synthesis.

ODOT develops place types using data from local travel demand models, specifically TAZs within MPOs (Mareas). Area type VisionEval inputs are generated using population and employment data by TAZ using the below calculations. By using local travel model TAZ data which has base and future population and employment, users can create a future version of these variables and thus the VE-State area type inputs we calculate cover different areas over time:

\begin{itemize}
\tightlist
\item
  \textbf{Activity Density} = TAZ-level (population {[}households and qroup quarter units{]} + employment / 2.5) / unprotected acres {[}with parks and water removed). SLD variable D1B is roughly the same.
\item
  \textbf{Destination Accessibility} = TAZ-level as shown below. There's not an equivalent SLD attribute, but some of the D5 attributes are similar.

  \begin{itemize}
  \tightlist
  \item
    (D5) Harmonic mean of employment within 2 miles and population within 5 miles (2 * TotEmp\_InDist2mi * Pop\_InDist5mi) / (TotEmp\_InDist2mi + Pop\_InDist5mi).
  \item
    Levels: VL = 0 - 2e3, L = 2e3 - 1e4, M = 1e4 - 5e4, H = 5e4+.
  \end{itemize}
\item
  \textbf{Design} = SLD variable D3bpo4
\end{itemize}

\hypertarget{travel-behavior-inputs}{%
\subsection{Household Travel Behavior Inputs}\label{travel-behavior-inputs}}

Many of the inputs relating to household multi-modal travel are those that also can serve as policy levers to be tested in multi-run scenario exercises. Users should work with stakeholders to refine these values and finalize reference scenario inputs that reflect financially constrained adopted plans in their area. These discussions with local staff also start to define more/less ambitious scenarios to include in the multi-run scenario modeling.

\begin{itemize}
\item
  \textbf{Transport supply (Mareas only)} Unlike traditional travel demand models, VisionEval does not have a roadway network. The inputs for transportation supply define roadway capacity in terms of lane miles of arterials and freeways and \protect\hyperlink{transit-service-miles}{{transit service miles}} (annual revenue service miles) for each \protect\hyperlink{transit-service-modes}{{transit service mode}}) for the urbanized area portion of each Marea by model run year. A separate Bzone-level input sets neighborhood transit accessibility or \protect\hyperlink{transit-d}{{Transit D}}. For lane-miles in the model area, HPMS is the standard source. Users can use use the lane-length values as lane-mile inputs, aggregating as follows:

  \begin{itemize}
  \tightlist
  \item
    Fwys = ``Interstate''\& ``Other Freeways \& Expressways''
  \item
    Arterials = ``Other Principal Arterial'' \& ``Minor Arterial''
  \item
    Major/Minor collectors and local streets are not included
  \end{itemize}
\item
  \textbf{Personal short trips/alternative modes.} VisionEval inputs define policies for transit, bike and walk modes. These include transit service levels and transit accessibility (\protect\hyperlink{transit-d}{{Transit D}}) per transit supply above. Biking trips are defined by the proportion of \protect\hyperlink{sov-diversion}{{short-trip SOV diversion}} (20 miles or less round-trip). Walk while walk trips are dependent upon \protect\hyperlink{mixed-use}{{mixed-use}} development and \protect\hyperlink{buit-form-measures}{{built form design and measures}}.
\item
  \textbf{Travel demand management (TDM).} Each household is assigned as a participant or not in a number of travel demand management programs (e.g.~employee commute options program, individualized marketing) based on policy assumptions about the degree of deployment of those programs and the household characteristics. Individual households are also identified as candidate participants for car sharing programs based on their household characteristics and input assumptions on the market penetration of car sharing vehicles.

  \begin{itemize}
  \tightlist
  \item
    \textbf{Workplace TDM Programs.} Level of deployment assumptions for TDM (at work and home locations) lead to reduced VMT, diverting travel to other modes. Car Sharing reduces VMT through changes in auto ownership and per mile costs. Employee commute options (ECO) programs are work-based travel demand management programs. They may include transportation coordinators, employer-subsidized transit passes, bicycle parking, showers for bicycle commuters, education and promotion, carpool and vanpool programs, etc. The default assumption is that that ECO programs reduce the average commute DVMT of participating households by 5.4\%. Users can modify this value but it requires \protect\hyperlink{ve-buildprocess}{rebuilding} the \href{https://github.com/VisionEval/VisionEval-Dev/tree/development-next/sources/modules/VELandUse}{VELandUse} package for VERSPM or \href{https://github.com/VisionEval/VisionEval-Dev/tree/development-next/sources/modules/VESimLandUse}{VESimLandUse} for VE-State. It is assumed that all work travel of the household will be reduced by this percentage if any working age persons are identified as ECO participants. The proportion of employees participating in ECO programs is a policy input at the Bzone-level in VERSPM and either the Azone or Marea level in VE-State. The input assumes workers participate in a strong employee commute options programs (e.g., free transit pass, emergency ride home, bike rider facilities, etc.).\\
  \item
    \textbf{Individualized Marketing TDM Programs.} Individualized marketing (IM) programs are travel demand management programs focused on individual households in select neighborhoods. IM programs involve individualized outreach to households that identify residents' travel needs and ways to meet those needs with less vehicle travel. Customized to the neighborhood, IM programs work best in locations where a number of travel options are available. VisionEval assumes that households participating in an IM program reduce their DVMT by 9\% based on studies done in the Portland area. Users can modify this value but it requires \protect\hyperlink{ve-buildprocess}{rebuilding} the \href{https://github.com/VisionEval/VisionEval-Dev/tree/development-next/sources/modules/VELandUse}{VELandUse} package or \href{https://github.com/VisionEval/VisionEval-Dev/tree/development-next/sources/modules/VESimLandUse}{VESimLandUse} for VE-State. IM programs target work as well as non-work travel and produce larger reductions than ECO work-based programs. Only the IM reduction is used for households that are identified as participating in both ECO and IM programs. The VisionEval input for IM programs include an overall assumption for the percentage of households participating in an IM program. A minimum population density of 4,000 persons per square mile necessary to implement a successful IM program and the requirement that the household reside an \protect\hyperlink{urban-mixed-use}{{urban mixed use}} Bzone. The number of households identified as participating is the minimum of the number needed to meet the program goal or the number of qualifying households.
  \end{itemize}
\item
  \textbf{Parking.} Parking in VisionEval is defined by parking supply and \protect\hyperlink{parking-restrictions}{{parking restrictions}}, including \protect\hyperlink{parking-costs}{{parking costs}}.
\end{itemize}

\hypertarget{vehicle-inputs}{%
\subsection{Vehicle, Fuels and Emissions Inputs}\label{vehicle-inputs}}

Vehicle and fuel technology are expected to change significantly during the next several decades as vehicles turn-over and the newer fleets are purchased. The characteristics of the fleet of new cars and trucks are influenced by federal CAFÉ standards as well as state energy policies and promotions. Local areas can contribute through decisions about the light-duty fleet used by local transit agencies and by assisting in deployment of electric vehicle charging stations and their costs in work and home locations, but otherwise have less influence on the characteristics of the future vehicle fleet, including auto, light truck, and heavy truck vehicles. As a consequence, the VisionEval inputs on vehicle and fuel technology are largely specified modelwide at the \protect\hyperlink{region}{{region}} level. These inputs can be used to assess the impacts of changing vehicle \protect\hyperlink{powertrain}{{powertrains}} and fuels on energy use and GHG emissions in the model area. The key local contribution to these inputs is the bus powertrain and fuels inputs, which are defined by \protect\hyperlink{metropolitan-area}{{metropolitan area (Marea)}} although defaults can be used if no additional local data is available. These variables are briefly summarized below.

\begin{itemize}
\item
  \textbf{Powertrains.} Several input files specify vehicle attributes and fuel economy for autos, light trucks, heavy truck, and transit vehicles. User inputs modify vehicle powetrains for commercial service vehicles, car service vehicles, transit vehicles, and heavy trucks. Changing the powertrain mix of household vehicles involves \protect\hyperlink{ve-buildprocess}{rebuilding} the \href{https://github.com/VisionEval/VisionEval-Dev/tree/development-next/sources/modules/VVEPowertrainsAndFuels}{VEPowertrainsAndFuels} package. Four vehicle powertrain types are modeled:

  \begin{itemize}
  \tightlist
  \item
    ICE - Internal Combustion Engines having no electrical assist;
  \item
    HEV - Hybrid-Electric Vehicles where all motive power is generated on-board;
  \item
    PHEV - Plug-in Hybrid Electric Vehicles where some motive power comes from charging an on-board battery from external power supplies;
  \item
    EV - Electric Vehicles where all motive power comes from charging an on-board battery from external power supplies.
  \end{itemize}
\item
  \textbf{Household owned vehicles.} Household vehicle characteristics are defined by Azone and model run year to account for regional trends. Characteristics include the passanger fleet share by \protect\hyperlink{vehicle-type}{{vehicle type}} (light truck or auto) and average \protect\hyperlink{vehicle-age}{{vehicle age}}. The purpose of these inputs is to allow scenarios to be developed which test faster or slower turn-over of the vehicle fleet or test fleets mixes in terms of passenger autos and light trucks or SUVs, both of which impact fuel economy. Users also define the availability of residential electric vehicle charging stations at the Azone level by \protect\hyperlink{dwelling-unit-type}{{dwelling unit type}} and model run year. Vehicle type and age characteristics combine with powertrain sales by year defined in the \href{https://github.com/VisionEval/VisionEval-Dev/tree/development-next/sources/modules/VVEPowertrainsAndFuels}{VEPowertrainsAndFuels} package. Each powertrain in each year has an associated fuel efficiency and power efficiency assumptions for PHEVs (MPG for PHEVs in charge-sustaining mode). For EVs and PHEVs, battery range is specified. Note that the actual EV-HEV split depends on whether enough households have their 95Th percentile daily travel within the EV battery range
\item
  \textbf{Car service vehicles.} Car services are a specific mode used in VisionEval models treated as vehicles available to the household. Car services can be considered a synonym for popular ride-sharing services provided by mobility-as-a-service (MaaS) companies. VisionEval distinguishes between two levels of car service, categorized as ``high'' or ``low'' level service. A high car service level is one that has vehicle access times (time to walk between car and origin or final destination) that are competitive with private car use. High level of car service is considered to increase household car availability similar to owning a car. Users can define the \protect\hyperlink{car-service-substitution}{{car service substitution probability}} by \protect\hyperlink{vehicle-type}{{vehicle type}}. Low level car service, approximates current taxi service does not have competitive access time and is not considered as increasing household car availability. Users can define different attributes for each level of car service. Users can define several characteristcs of car service by level, including cost per mile by \protect\hyperlink{car-service-level}{{car service level}}, average age of car service vehicles, and limits on household \protect\hyperlink{car-service-substitution}{{car service substitution probability}} for owned vehicles. Region-level inputs on \protect\hyperlink{powertrain}{{powertrain}} mix by model (not sales) year and (optional) region-wide composite fuel carbon intensity.
\end{itemize}

See the section on \protect\hyperlink{pricing-inputs}{Pricing, Household Costs \& Budgets} inputs for more information on car service levels, geographic coverage, and fees. See the \protect\hyperlink{vehicle-inputs}{Vehicles, Fuels \& Emissions} inputs section for more information on defining the car service fleet \protect\hyperlink{powertrain}{{powertrain}} characteristics.

\begin{itemize}
\item
  \textbf{Transit.} Transit vehicles characteristics are defined by Marea and model run year for \protect\hyperlink{transit-vehicle-type}{{transit vehicle type}}(van, bus, rail), including \protect\hyperlink{powertrain}{{powertrain}} mix by model (not sales) year and optional detail on fuel-biofuel shares. Users can also optionally define region-wide composite fuel carbon intensity by \protect\hyperlink{transit-vehicle-type}{{transit vehicle types}}.
\item
  \textbf{Freight vehicles (heavy trucks and commercial service).} \protect\hyperlink{commercial-service}{{Commercial service vehicle}} vehicle characteristics are defined by Azone and model run year, including \protect\hyperlink{vehicle-type}{{vehicle type}} shares and average vehicle age. (optional) Region-wide composite fuel carbon intensity by vehicle type. \protect\hyperlink{heavy-truck}{{Heavy truck}} vehicle characteristics are region-level, including \protect\hyperlink{powertrain}{{powertrain}} mix and composite fuel carbon intensity by model (not sales) year.
\item
  \textbf{Electric carbon intensity.} Since electricity generation varies by locality, users can define the electricity \protect\hyperlink{carbon-intensity}{{carbon intensity}} at the Azone-level. This impacts GHG emission rates (in average pounds of CO2 equivalents generated per kilowatt hour of electricity consumed by the end user) by local area.
\item
  \textbf{Fuel input options}. Three options are available for fuel assumptions. The choices are outlined in the table and options described below. User choice of option can vary by \protect\hyperlink{vehicle-group}{{vehicle group}} and where applicable, \protect\hyperlink{vehicle-type}{{vehicle type}}:
\end{itemize}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  Default package datasets. These may represent federal or statewide fuel policies that apply to all metropolitan areas and all vehicle groups in the model (e.g., state ethanol regulations, low carbon fuel policies). NAs would be placed in all user input files.
\item
  Detailed fuel and biofuel inputs. Values for the proportions of fuels types (gasoline, diesel, compressed natural gas), as well as fuel blend proportions (gasoline blended with ethanol, biodiesel blended with diesel, renewable natural gas is blended with natural gas). A third assumption specifies the carbon\_intenaity of the fuels (input or default). For example, heavy trucks can be set to 95\% diesel, 5\% natural gas, with diesel having a 5\% biodiesel blend.
\item
  Composite carbon intensity. This option simplifies the process of modeling emissions policies, particularly low carbon fuels policies by bypasses the need to specify fuel types and biofuel blends. Average carbon intensity by vehicle group and if applicable, vehicle type is specified directly. These inputs, if present and not `NA', supercede other transit inputs.
\end{enumerate}

\begin{itemize}
\tightlist
\item
  Note: Given that transit agencies in different metropolitan areas may have substantially different approaches to using biofuels, transit vehicles have the option of region or metropolitan area specifications for Options (1) and (2).\\
\item
  Note: The proportions in option (2) do not represent volumetric proportions (e.g.~gallons), they represent energy proportions (e.g.~gasoline gallon equivalents) or DVMT proportions.
\item
  Note: Individual vehicles are modeled for households. Other groups vehicle and fuel attributes apply to VMT. As a result, PHEVs in all but household vehicles should be split into miles driven in HEVs and miles in EVs.
\end{itemize}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.0816}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.1633}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.1429}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.2041}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.2041}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.2041}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Vehicle Group
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Vehicle Types
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Powertrain Options
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Veh Inputs
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Fuel Options
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Fuel input options
\end{minipage} \\
\midrule()
\endhead
Household & automobile, light truck & ICE, HEV, PHEV, EV & (default veh mix), age, \%LtTrk & gas/ethanol, diesel/biodiesel, CNG/RNG & default, region composite \\
Car Service & automobile, light truck & ICE, HEV, EV & veh mix, age (HH veh mix) & gas/ethanol, diesel/biodiesel, CNG/RNG & default, region composite \\
Commercial Service & automobile, light truck & ICE, HEV, EV & veh mix, age, \%LtTrk & gas/ethanol, diesel/biodiesel, CNG/RNG & default, region composite \\
Heavy Truck & heavy truck & ICE, HEV, EV & veh mix & gas/ethanol, diesel/biodiesel, CNG/LNG & default, region composite \\
Public Transit & van, bus, rail & ICE, HEV, EV & veh mix & gas/ethanol, diesel/biodiesel, CNG/RNG & default, fuel/biofuel mix, marea or region composite \\
\bottomrule()
\end{longtable}

\hypertarget{pricing-inputs}{%
\subsection{Pricing, Household Costs \& Budget Inputs}\label{pricing-inputs}}

Most of these will be state-led actions and thus reflect the state policies of the modeled area.

\begin{itemize}
\item
  \textbf{Per mile vehicle out-of-pocket costs.} Several inputs define the per mile costs used in calculating household \protect\hyperlink{vehicle-operating-costs}{{vehicle operating costs}} that may be limited by the household's income-based maximum annual travel budget. These inputs include those defining energy costs, \protect\hyperlink{car-service}{{car service}} fees, and fees to recover road and social costs, as noted below.
\item
  \textbf{Energy costs.} Unit cost of energy to power household vehicles, both fuel (cost per gallon) and electricity (cost per kilowatt-hour).
\item
  \textbf{Car service fees.} If car service is used by a household, the per mile fees paid for that service, outside of energy costs. Car service characteristics cost per mile by {[}\protect\hyperlink{car-service-level}{{car service level}} by Azone and model run year.
\item
  \textbf{Road cost recovery VMT fee.} Inputs include a fuel tax or levying a fuel-equivalent tax on travel by some/all electric vehicles (PevSurchgTaxProp), for their use of roads in lieu of gas purchases. User can also directly specify a VMT (mileage) fee, to further recover road costs, or optionally flag VisionEval to iteratively estimate the VMT fee to fully recover user-defined road costs incurred by household VMT.
\item
  \textbf{Social cost recovery/carbon fees.} (Optional) Inputs allow per mile fee to cover social costs or externalities, not recovered in this way today, but instead incur costs elsewhere in the economy (e.g., safety, health). This is the cost imposed on society and future generations, not the cost to the vehicle user. This requires assumptions on the cost incurred from these externalities (per mile, per gallon) and the proportion to be paid by drivers as a per mile fee (varies by vehicle powertrain). The proportion of carbon costs (e.g., impact on fuel price from cap \& trade policy) imposed on drivers is specified separately from other social costs, so it can be assessed on its own if desired; including (optionally) specifying the cost of carbon to over-ride the default value of carbon.
\item
  \textbf{Per mile time-equivalent costs.} Users can define the \protect\hyperlink{value-of-time}{{value of time}}, which is included in \protect\hyperlink{vehicle-operating-costs}{{vehicle operating costs}} calculations. The model calculates travel time (model-calculated), which includes time to access vehicle on both ends of trip (between vehicle parking location and origin or end destination), multiplied by value of time.
\item
  \textbf{Annual vehicle ownership costs.} \protect\hyperlink{vehicle-operating-costs}{{Vehicle ownership cost}} inputs are defined at the Azone-level by year. These inputs include annual vehicle fees (flat fee and/or tax on vehicle value), \protect\hyperlink{pay-as-you-drive}{{pay-as-you-drive (PAYD)}} insurance participation rates, residential parking limitations and fees, that are combined with model-estimated ownership costs (financing, depreciation, insurance).
\item
  \textbf{Congestion Fees.} \protect\hyperlink{congestion-fees}{{Congestion fees}} are defined by Marea. The input is the average amount paid per mile in congestion pricing fee.
\end{itemize}

\hypertarget{congestion-inputs}{%
\subsection{Congestion Inputs}\label{congestion-inputs}}

\begin{itemize}
\item
  \textbf{Base year VMT.} Users provide can provide base year VMT (for both light-duty vehicles and heavy trucks) or use the model default by using a state/UzaLookup. Users also select a growth basis for heavy trucks of either population or income and for commercial service VMT (population, income, or household VMT). Users also provide the DVMT split of light-duty vehicles, heavy trucks, and buses on urban roads by \protect\hyperlink{road-class}{{road class}}. Values for UzaNameLookup must be present in the list provided in the \href{https://github.com/VisionEval/VisionEval-Dev/blob/development-next/sources/modules/VETravelPerformance/inst/module_docs/Initialize.md}{module documentation}, otherwise user inputs must specify the data directly.
\item
  \textbf{ITS-Operational Policies.} Users define the proportion of VMT by \protect\hyperlink{road-class}{{road class}} affected by standard ITS-Operation policies on freeways and arterials. Another optional input can define additional operations effects, providing flexibility for future user-defined freeway and arterial operations program coverage and effectiveness. These programs reduce delay. The specific ITS programs available in the model are the following:

  \begin{itemize}
  \tightlist
  \item
    \textbf{Freeway ramp metering} - Metering freeways can reduce delay by keeping mainline vehicle density below unstable levels. It creates delay for vehicles entering the freeway, but this is typically more than offset by the higher speeds and postponed congestion on the freeway facility. The Urban Mobility Report cites a delay reduction of 0 to 12\%, with an average of 3\%, for 25 U.S. urban areas with ramp metering. Only urban areas with Heavy, Severe, and Extreme freeway congestion can benefit from ramp metering in RSPM
  \item
    \textbf{Freeway incident management} - Incident Response programs are designed to quickly detect and remove incidents which impede traffic flow. The UMR study reports incident-related freeway delay reductions of 0 to 40\%, with an average of 8\%, for the 79 U.S. urban areas with incident response programs. This reflects the combined effects of both service patrols to address the incidents and surveillance cameras to detect the incidents. Effects were seen in all sizes of urban area, though the impacts were greater in larger cities.
  \item
    \textbf{Arterial access management} -- Access management on arterials can increase speeds by reducing the number of enter/exit points on the arterial and reduce crashes by reducing conflict points. Although improvements such as raised medians can reduce throughput by causing turning queue spillback during heavy congestion, other types of access management, such as reduced business ingress/egress points, show consistent benefits system-wide.
  \item
    \textbf{Arterial signal coordination} -- Traffic signal coordination, particularly for adaptive traffic signals, can reduce arterial delay by increasing throughput in peak flow directions. UMR and other analysis estimates delay reductions of up to 6-9\% due to signal coordination, with more potential savings from more sophisticated control systems. An average arterial delay savings was found to be about 1\%.
  \item
    \textbf{Other ops programs} -- A seperate input that gives users the ability to accommodate future enhancements. Further research and significant program investment would be needed to justify benefits in these enhanced ITS programs.
  \end{itemize}
\item
  \textbf{Speed smoothing programs.} Proportion of VMT by \protect\hyperlink{road-class}{{road class}} covered by ITS \protect\hyperlink{speed-smoothing}{{speed smoothing}}, and \protect\hyperlink{ecodrive}{{Eco-drive programs}}. These programs reduce vehicle accelerations and decelerations, but do not affect delay.

  \begin{itemize}
  \tightlist
  \item
    \textbf{Speed smoothing programs} - Insufficient aggregate performance data is available for a number of other current and future ITS/operations strategies. These include: speed limit reductions, speed enforcement, and variable speed limits that reduce the amount of high-speed freeway travel; advanced signal optimization techniques that reduce stops and starts on arterials; and truck/bus-only lanes that can move high-emitting vehicles through congested areas at improved efficiency. Literature review of fuel efficiency improvements found that speed smoothing policies could only reasonably achieve a portion of the theoretical maximum of 50\%, which is the ratio applied to the user input of full deployment (input of 1=100\%).
  \item
    \textbf{Eco-drive programs} Eco-driving involves educating motorists on how to drive in order to reduce fuel consumption and cut emissions. Examples of eco-driving practices include avoiding rapid starts and stops, matching driving speeds to synchronized traffic signals, and avoiding idling. Practicing eco-driving also involves keeping vehicles maintained in a way that reduces fuel consumption such as keeping tires properly inflated and reducing aerodynamic drag. In RSPM, fuel economy benefits of improved vehicle maintenance are included in the eco-driving benefit. A default 19\% improvement in vehicle fuel economy is assumed. Vehicle operations and maintenance programs (e.g.~eco-driving) based on policy assumptions about the degree of deployment of those programs and the household characteristics. Vehicle operating programs (eco-driving) reduces emissions per VMT at a max of 33\% for freeways and 21\% for arterials for full deployment (input of 1=100\%).
  \end{itemize}
\end{itemize}

\hypertarget{verspm-inputs}{%
\section{VERSPM Input Files}\label{verspm-inputs}}

This section details the specific VERSPM input files.

\begin{itemize}
\item
  \protect\hyperlink{verspm-azone_carsvc_characteristics.csv}{\textbf{azone\_carsvc\_characteristics.csv}}: This file specifies the different characteristics for high and low car service level and is used in the \protect\hyperlink{verspm-createvehicletable}{CreateVehicleTable} and \protect\hyperlink{verspm-assignvehicleage}{AssignVehicleAge} modules.
\item
  \protect\hyperlink{verspm-azone_charging_availability.csv}{\textbf{azone\_charging\_availability.csv}} This file has data on proportion of different household types who has EV charging available and is used in the \protect\hyperlink{verspm-assignhhvehiclepowertrain}{AssignHHVehiclePowertrain} module.
\item
  \protect\hyperlink{verspm-azone_electricity_carbon_intensity.csv}{\textbf{azone\_electricity\_carbon\_intensity.csv}} {(optional)} This file is used to specify the carbon intensity of electricity and is only needed if user wants to modify the values). The file is used in \href{Modules_and_Outputs.md/\#initialize-vepowertrainsandfuels}{Initialize (VEPowertrainsAndFuels)} and \protect\hyperlink{verspm-calculatecarbonintensity}{CalculateCarbonIntensity} modules.
\item
  \protect\hyperlink{verspm-azone_fuel_power_cost.csv}{\textbf{azone\_fuel\_power\_cost.csv}} This file supplies data for retail cost of fuel and electricity and is used in the \protect\hyperlink{verspm-calculatevehicleoperatingcost}{CalculateVehicleOperatingCost} module.
\item
  \protect\hyperlink{verspm-azone_gq_pop_by_age.csv}{\textbf{azone\_gq\_pop\_by\_age.csv}}: This file contains group quarters population estimates/forecasts by age and is used in the \protect\hyperlink{verspm-createhouseholds}{CreateHouseholds} module.\\
\item
  \protect\hyperlink{verspm-household-population-azone_hh_pop_by_age.csv}{\textbf{azone\_hh\_pop\_by\_age.csv}} This file contains population estimates/forecasts by age and is used in the \protect\hyperlink{verspm-createhouseholds}{CreateHouseholds} module.
\item
  \protect\hyperlink{verspm-azone_hh_veh_mean_age.csv}{\textbf{azone\_hh\_veh\_mean\_age.csv}} This file provides inputs for mean auto age and mean light truck age and is used in the \protect\hyperlink{verspm-assignvehicleage}{AssignVehicleAge} module.
\item
  \protect\hyperlink{verspm-azone_hh_veh_own_taxes.csv}{\textbf{azone\_hh\_veh\_own\_taxes.csv}} This file provides inputs for flat fees/taxes (i.e.~annual cost per vehicle) and ad valorem taxes (i.e.~percentage of vehicle value paid in taxes). The file is used in \protect\hyperlink{verspm-calculatevehicleowncost}{CalculateVehicleOwnCost} module.\\
\item
  \protect\hyperlink{verspm-azone_hhsize_targets.csv}{\textbf{azone\_hhsize\_targets.csv}}: This file contains the household specific targets and is used in \protect\hyperlink{verspm-createhouseholds}{CreateHouseholds} module.
\item
  \protect\hyperlink{verspm-azone_lttrk_prop.csv}{\textbf{azone\_lttrk\_prop.csv}} This file specifies the light truck proportion of the vehicle fleet and is used in \protect\hyperlink{verspm-assignvehicletype}{AssignVehicleType} module.
\item
  \protect\hyperlink{verspm-azone_payd_insurance_prop.csv}{\textbf{azone\_payd\_insurance\_prop.csv}} This file provides inputs on the proportion of households having PAYD (pay-as-you-drive) insurance and is used in the \protect\hyperlink{verspm-calculatevehicleowncost}{CalculateVehicleOwnCost} module.
\item
  \protect\hyperlink{verspm-azone_per_cap_inc.csv}{\textbf{azone\_per\_cap\_inc.csv}} This file contains information on regional average per capita household and group quarters income in year 2010 dollars and is used in the \protect\hyperlink{verspm-predictincome}{PredictIncome} module.
\item
  \protect\hyperlink{verspm-azone_prop_sov_dvmt_diverted.csv}{\textbf{azone\_prop\_sov\_dvmt\_diverted.csv}} This file provides inputs for a goal for diverting a portion of SOV travel within a 20-mile tour distance and is used in the \protect\hyperlink{verspm-divertsovtravel}{DivertSovTravel} module.
\item
  \protect\hyperlink{verspm-azone_relative_employment.csv}{\textbf{azone\_relative\_employment.csv}}: This file contains ratio of workers to persons by age and is used in the \protect\hyperlink{verspm-predictworkers}{PredictWorkers} module.
\item
  \protect\hyperlink{verspm-azone_veh_use_taxes.csv}{\textbf{azone\_veh\_use\_taxes.csv}} This file supplies data for vehicle related taxes and is used in the \protect\hyperlink{verspm-calculatevehicleoperatingcost}{CalculateVehicleOperatingCost} module.
\item
  \protect\hyperlink{verspm-azone_vehicle_access_times.csv}{\textbf{azone\_vehicle\_access\_times.csv}} This file supplies data for vehicle access and egress time and is used in the \protect\hyperlink{verspm-calculatevehicleoperatingcost}{CalculateVehicleOperatingCost} module.
\item
  \protect\hyperlink{verspm-bzone_transit_service.csv}{\textbf{bzone\_transit\_service.csv}} This file supplies the data on relative public transit accessibility and is used in the \protect\hyperlink{verspm-assigntransitservice}{AssignTransitService} module.
\item
  \protect\hyperlink{verspm-bzone_carsvc_availability.csv}{\textbf{bzone\_carsvc\_availability.csv}} This file contains the information about level of car service availability and is used in the \protect\hyperlink{verspm-assigncarsvcavailability}{AssignCarSvcAvailability} module.
\item
  \protect\hyperlink{verspm-dwelling-units-bzone_dwelling_units.csv}{\textbf{bzone\_dwelling\_units.csv}}: This file contains the number single-family, multi-family and group-quarter dwelling units and is used in the \protect\hyperlink{verspm-predicthousing}{PredictHousing} module.
\item
  \protect\hyperlink{verspm-bzone_employment.csv}{\textbf{bzone\_employment.csv}}: This file contains the total, retail and service employment by zone and is used in the \protect\hyperlink{verspm-locateemployment}{LocateEmployment} module.
\item
  \protect\hyperlink{verspm-household-proportion-by-income-bzone_hh_inc_qrtl_prop.csv}{\textbf{bzone\_hh\_inc\_qrtl\_prop.csv}} This file contains the proportion of households in 1st, 2nd, 3rd, and 4th quartile of household income and is used in the \protect\hyperlink{verspm-verspm-predicthousing}{PredictHousing} module.
\item
  \protect\hyperlink{verspm-bzone_lat_lon.csv}{\textbf{bzone\_lat\_lon.csv}} This file contains the latitude and longitude of the centroid of the zone and is used in the \protect\hyperlink{verspm-locateemployment}{LocateEmployment} module.\\
\item
  \protect\hyperlink{verspm-bzone_network_design.csv}{\textbf{bzone\_network\_design.csv}} This file contains the intersection density in terms of pedestrian-oriented intersections having four or more legs per square mile and is used in the \protect\hyperlink{verspm-calculate4dmeasures}{Calculate4DMeasures} module.
\item
  \protect\hyperlink{verspm-bzone_parking.csv}{\textbf{bzone\_parking.csv}} This file contains the parking information and is used in the \protect\hyperlink{verspm-assignparkingrestrictions}{AssignParkingRestrictions} module.
\item
  \protect\hyperlink{verspm-bzone_travel_demand_mgt.csv}{\textbf{bzone\_travel\_demand\_mgt.csv}} This file contains the information about workers and households participating in demand management programs and is used in the \protect\hyperlink{verspm-assigndemandmanagement}{AssignDemandManagement} module.
\item
  \protect\hyperlink{verspm-bzone_unprotected_area.csv}{\textbf{bzone\_unprotected\_area.csv}} This file contains the information about unprotected (i.e., developable) area within the zone and is used in the \protect\hyperlink{verspm-calculate4dmeasures}{Calculate4DMeasures} module.
\item
  \protect\hyperlink{verspm-bzone_urban-mixed-use_prop.csv}{\textbf{bzone\_urban-mixed-use\_prop.csv}} This file contains the target proportion of households located in mixed-used neighborhoods in zone and is used in the \protect\hyperlink{verspm-calculateurbanmixmeasure}{CalculateUrbanMixMeasure} module.
\item
  \protect\hyperlink{verspm-bzone_urban-town_du_proportions.csv}{\textbf{bzone\_urban-town\_du\_proportions.csv}} This file contains proportion of Single-Family, Multi-Family and Group Quarter dwelling units within the urban portion of the zone and is used in the \protect\hyperlink{verspm-assignloctypes}{AssignLocTypes} module.
\item
  \protect\hyperlink{verspm-marea_base_year_dvmt.csv}{\textbf{marea\_base\_year\_dvmt.csv}} {(optional)} This file is used to specify to adjust the DVMT growth factors and is only needed if user wants to modify the values. The file is used in the \protect\hyperlink{verspm-initialize-vetravelperformance}{Initialize (VETravelPerformance)}, \protect\hyperlink{verspm-calculatebaseroaddvmt}{CalculateBaseRoadDvmt} and \protect\hyperlink{verspm-calculatefutureroaddvmt}{CalculateFutureRoadDvmt} modules.
\item
  \protect\hyperlink{verspm-marea_congestion_charges.csv}{\textbf{marea\_congestion\_charges.csv}} {(optional)} This file is used to specify the charges of vehicle travel for different congestion levels. The file is used in the \protect\hyperlink{verspm-initialize-vetravelperformance}{Initialize (VETravelPerformance)} and \protect\hyperlink{verspm-calculateroadperformance}{CalculateRoadPerformance} modules.
\item
  \protect\hyperlink{verspm-marea_dvmt_split_by_road_class.csv}{\textbf{marea\_dvmt\_split\_by\_road\_class.csv}} {(optional)} This file is used to specify the DVMT split for different road classes. The file is used in the \protect\hyperlink{verspm-initialize-vetravelperformance}{Initialize (VETravelPerformance)} and \protect\hyperlink{verspm-calculatebaseroaddvmt}{CalculateBaseRoadDvmt} modules.
\item
  \protect\hyperlink{verspm-marea_lane_miles.csv}{\textbf{marea\_lane\_miles.csv}} This file contains inputs on the numbers of freeway lane-miles and arterial lane-miles and is used in the \protect\hyperlink{verspm-assignroadmiles}{AssignRoadMiles} module.
\item
  \protect\hyperlink{verspm-marea_operations_deployment.csv}{\textbf{marea\_operations\_deployment.csv}} {(optional)} This file is used to specify the proportion of DVMT affected by operations for different road classes. The file is used in the \protect\hyperlink{verspm-initialize-vetravelperformance}{Initialize (VETravelPerformance)} and \protect\hyperlink{verspm-calculateroadperformance}{CalculateRoadPerformance} modules.
\item
  \protect\hyperlink{verspm-marea_speed_smooth_ecodrive.csv}{\textbf{marea\_speed\_smooth\_ecodrive.csv}} This input file supplies information of deployment of speed smoothing and ecodriving by road class and vehicle type and is used in the \protect\hyperlink{verspm-calculatempgmpkwhadjustments}{CalculateMpgMpkwhAdjustments} module.
\item
  \protect\hyperlink{verspm-marea_transit_ave_fuel_carbon_intensity.csv}{\textbf{marea\_transit\_ave\_fuel\_carbon\_intensity.csv}} {(optional)} This file is used to specify the average carbon intensity of fuel used by transit. The file is used in the \protect\hyperlink{verspm-initialize-vetravelperformance}{Initialize (VETravelPerformance)} module.
\item
  \protect\hyperlink{verspm-marea_transit_biofuel_mix.csv}{\textbf{marea\_transit\_biofuel\_mix.csv}} {(optional)} This file is used to specify the biofuel used by transit. The file is used in the \protect\hyperlink{verspm-initialize-vetravelperformance}{Initialize (VETravelPerformance)} and \protect\hyperlink{verspm-calculatecarbonintensity}{CalculateCarbonIntensity} modules.
\item
  \protect\hyperlink{verspm-marea_transit_fuel.csv}{\textbf{marea\_transit\_fuel.csv}} {(optional)} This file is used to specify the transit fuel proportions. The file is used in the \protect\hyperlink{verspm-initialize-vetravelperformance}{Initialize (VETravelPerformance)} and \protect\hyperlink{verspm-calculatecarbonintensity}{CalculateCarbonIntensity} modules.
\item
  \protect\hyperlink{verspm-marea_transit_powertrain_prop.csv}{\textbf{marea\_transit\_powertrain\_prop.csv}} {(optional)} This file is used to specify the mixes of transit vehicle powertrains. The file is used in the \protect\hyperlink{verspm-initialize-vetravelperformance}{Initialize (VETravelPerformance)} and \protect\hyperlink{verspm-calculateptranenergyandemissions}{CalculatePtranEnergyAndEmissions} modules.
\item
  \protect\hyperlink{verspm-marea_transit_service.csv}{\textbf{marea\_transit\_service.csv}} This file contains annual revenue-miles for different transit modes for metropolitan area and is used in the \protect\hyperlink{verspm-assigntransitservice}{AssignTransitService} module.
\item
  \protect\hyperlink{verspm-other_ops_effectiveness.csv}{\textbf{other\_ops\_effectiveness.csv}} {(optional)} This file is used to specify the delay effects of operations in different road classes and is only needed if user wants to modify the values. The file is used in the \protect\hyperlink{verspm-initialize-vetravelperformance}{Initialize (VETravelPerformance)} and \protect\hyperlink{verspm-calculateroadperformance}{CalculateRoadPerformance} modules.
\item
  \protect\hyperlink{verspm-region_ave_fuel_carbon_intensity.csv}{\textbf{region\_ave\_fuel\_carbon\_intensity.csv}} {(optional)} This file is used to specify the average carbon density for different vehicle types and is optional (only needed if user wants to modify the values). The file is used in the \protect\hyperlink{verspm-initialize-vetravelperformance}{Initialize (VETravelPerformance)} and \protect\hyperlink{verspm-calculatecarbonintensity}{CalculateCarbonIntensity} modules.
\item
  \protect\hyperlink{verspm-region_base_year_hvytrk_dvmt.csv}{\textbf{region\_base\_year\_hvytrk\_dvmt.csv}} {(optional)} This file is used to specify the heavy truck dvmt for base year. The file is used in the \protect\hyperlink{verspm-initialize-vetravelperformance}{Initialize (VETravelPerformance)}, \protect\hyperlink{verspm-calculatebaseroaddvmt}{CalculateBaseRoadDvmt} and \protect\hyperlink{verspm-calculatefutureroaddvmt}{CalculateFutureRoadDvmt} modules.
\item
  \protect\hyperlink{verspm-region_carsvc_powertrain_prop.csv}{\textbf{region\_carsvc\_powertrain\_prop.csv}} {(optional)} This file is used to specify the powertrain proportion of car services. The file is used in the \protect\hyperlink{verspm-initialize-vetravelperformance}{Initialize (VETravelPerformance)}, \protect\hyperlink{verspm-assignhhvehiclepowertrain}{AssignHhVehiclePowertrain} and \protect\hyperlink{verspm-adjusthhvehiclempgmpkwh}{AdjustHhVehicleMpgMpkwh} modules.
\item
  \protect\hyperlink{verspm-region_comsvc_lttrk_prop.csv}{\textbf{region\_comsvc\_lttrk\_prop.csv}} This file supplies data for the light truck proportion of commercial vehicles and is used in the \protect\hyperlink{verspm-calculateptranenergyandemissions}{CalculateComEnergyAndEmissions} module.
\item
  \protect\hyperlink{verspm-region_comsvc_powertrain_prop.csv}{\textbf{region\_comsvc\_powertrain\_prop.csv}} {(optional)} This file is used to specify the powertrain proportion of commercial vehicles. The file is used in the \protect\hyperlink{verspm-initialize-vepowertrainsandfuels}{Initialize (VEPowertrainsAndFuels)}
  ) and \protect\hyperlink{verspm-calculateptranenergyandemissions}{CalculateComEnergyAndEmissions} modules.
\item
  \protect\hyperlink{region_hh_driver_adjust_prop.csv}{\textbf{region\_hh\_driver\_adjust\_prop.csv}} {(optional)} This file specifies the relative driver licensing rate relative to the model estimation data year and is used in the \protect\hyperlink{verspm-assigndrivers}{AssignDrivers} module.
\item
  \protect\hyperlink{verspm-region_hvytrk_powertrain_prop.csv}{\textbf{region\_hvytrk\_powertrain\_prop.csv}} {(optional)} This file is used to specify the powertrain proportion of heavy duty trucks. The file is used in the \protect\hyperlink{verspm-initialize-vepowertrainsandfuels}{Initialize (VEPowertrainsAndFuels)}
  ) and \protect\hyperlink{verspm-calculateptranenergyandemissions}{CalculateComEnergyAndEmissions} modules.
\item
  \protect\hyperlink{verspm-region_prop_externalities_paid.csv}{\textbf{region\_prop\_externalities\_paid.csv}} This file supplies data for climate change and other social costs and is used in the \protect\hyperlink{verspm-calculatevehicleoperatingcost}{CalculateVehicleOperatingCost} module.
\end{itemize}

\hypertarget{azone_carsvc_characteristics.csv}{%
\subsection{azone\_carsvc\_characteristics.csv}\label{azone_carsvc_characteristics.csv}}

This file specifies the different characteristics for high and low car service levels by \texttt{Azone}. More information on car service can be found here(placeholder). Changing this input is \emph{optional} and using the default input values is standard practice.

\begin{itemize}
\tightlist
\item
  \textbf{HighCarSvcCost}: Average cost in dollars per mile for travel by high service level car service exclusive of the cost of fuel, road use taxes, and carbon taxes (and any other social costs charged to vehicle use)
\item
  \textbf{LowCarSvcCost}: Average cost in dollars per mile for travel by low service level car service exclusive of the cost of fuel, road use taxes, and carbon taxes (and any other social costs charged to vehicle use)
\item
  \textbf{AveCarSvcVehicleAge}: Average age of car service vehicles in years
\item
  \textbf{LtTrkCarSvcSubProp}: The proportion of light-truck owners who would substitute a less-costly car service option for owning their light truck
\item
  \textbf{AutoCarSvcSubProp}: The proportion of automobile owners who would substitute a less-costly car service option for owning their automobile
\end{itemize}

Here is a snapshot of the file:

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 12\tabcolsep) * \real{0.1000}}
  >{\centering\arraybackslash}p{(\columnwidth - 12\tabcolsep) * \real{0.1500}}
  >{\centering\arraybackslash}p{(\columnwidth - 12\tabcolsep) * \real{0.1500}}
  >{\centering\arraybackslash}p{(\columnwidth - 12\tabcolsep) * \real{0.1500}}
  >{\centering\arraybackslash}p{(\columnwidth - 12\tabcolsep) * \real{0.1500}}
  >{\centering\arraybackslash}p{(\columnwidth - 12\tabcolsep) * \real{0.1500}}
  >{\centering\arraybackslash}p{(\columnwidth - 12\tabcolsep) * \real{0.1500}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Geo
\end{minipage} & \begin{minipage}[b]{\linewidth}\centering
Year
\end{minipage} & \begin{minipage}[b]{\linewidth}\centering
HighCarSvcCost.2010
\end{minipage} & \begin{minipage}[b]{\linewidth}\centering
LowCarSvcCost.2010
\end{minipage} & \begin{minipage}[b]{\linewidth}\centering
AveCarSvcVehicleAge
\end{minipage} & \begin{minipage}[b]{\linewidth}\centering
LtTrkCarSvcSubProp
\end{minipage} & \begin{minipage}[b]{\linewidth}\centering
AutoCarSvcSubProp
\end{minipage} \\
\midrule()
\endhead
RVMPO & 2010 & 1 & 3 & 3 & 0.75 & 1 \\
RVMPO & 2038 & 1 & 3 & 3 & 0.75 & 1 \\
\bottomrule()
\end{longtable}

\hypertarget{verspm-azone_charging_availability.csv}{%
\subsection{azone\_charging\_availability.csv}\label{verspm-azone_charging_availability.csv}}

This input file supplies data on proportion of different household types with plug-in electric vehicle (PEV) charging available by \texttt{Azone}.

\begin{itemize}
\tightlist
\item
  \textbf{PropSFChargingAvail}: Proportion of single-family dwellings in Azone that have PEV charging facilities installed or able to be installed
\item
  \textbf{PropMFChargingAvail}: Proportion of multifamily dwelling units in Azone that have PEV charging facilities available
\item
  \textbf{PropGQChargingAvail}: Proportion of group quarters dwelling units in Azone that have PEV charging facilities available
\end{itemize}

Here is a snapshot of the file:

\begin{tabular}{l|c|c|c|c}
\hline
Geo & Year & PropSFChargingAvail & PropMFChargingAvail & PropGQChargingAvail\\
\hline
RVMPO & 2010 & 1 & 0.0 & 0\\
\hline
RVMPO & 2038 & 1 & 0.2 & 0\\
\hline
\end{tabular}

\hypertarget{verspm-azone_electricity_carbon_intensity.csv}{%
\subsection{azone\_electricity\_carbon\_intensity.csv}\label{verspm-azone_electricity_carbon_intensity.csv}}

This input file specifies the carbon intensity of electricity by \texttt{Azone}. This input file is OPTIONAL and is only needed if the user wants to modify the carbon intensity of electricity.

\begin{itemize}
\tightlist
\item
  \textbf{ElectricityCI}: Carbon intensity of electricity at point of consumption (grams CO2e per megajoule)
\end{itemize}

Here is a snapshot of the file:

\begin{longtable}[]{@{}lcc@{}}
\toprule()
Geo & Year & ElectricityCI \\
\midrule()
\endhead
RVMPO & 2010 & 153 \\
RVMPO & 2038 & 23 \\
\bottomrule()
\end{longtable}

\hypertarget{verspm-azone_fuel_power_cost.csv}{%
\subsection{azone\_fuel\_power\_cost.csv}\label{verspm-azone_fuel_power_cost.csv}}

This file supplies data for retail cost of fuel and electricity by \texttt{Azone}. This input can be developed using local history or querying the Energy Information Administration (EIA) for historical \href{https://www.eia.gov/petroleum/}{gasoline and diesel} and \href{https://www.eia.gov/electricity/}{power} prices.

\begin{itemize}
\tightlist
\item
  \textbf{FuelCost}:Retail cost of fuel per gas gallon equivalent in dollars (before taxes are added)
\item
  \textbf{PowerCost}: Retail cost of electric power per kilowatt-hour in dollars (before taxes are added)
\end{itemize}

Here is a snapshot of the file:

\begin{longtable}[]{@{}lccc@{}}
\toprule()
Geo & Year & FuelCost.2005 & PowerCost.2005 \\
\midrule()
\endhead
RVMPO & 2010 & 2.43 & 0.08 \\
RVMPO & 2038 & 5.75 & 0.208 \\
\bottomrule()
\end{longtable}

\hypertarget{verspm-azone_gq_pop_by_age.csv}{%
\subsection{azone\_gq\_pop\_by\_age.csv}\label{verspm-azone_gq_pop_by_age.csv}}

This file contains group quarters population estimates/forecasts by age for each of the base and future years. The file format includes number of persons within the following six age categories:

\begin{itemize}
\tightlist
\item
  0-14
\item
  15-19
\item
  20-29
\item
  30-54
\item
  55-64
\item
  65 Plus
\end{itemize}

Group quarters are distinguished between two types: institutional and non-institutional. Institutional group quarter populations are those in correctional facilities or nursing homes. Non-institutional group quarters include college dormitories, military barracks, group homes, missions, or shelters. Only non-institutional group quarters are included in the modeled population, given the assumption that institutional group quarters populations do not account for much, if any, travel. Base year data for group quarter populations can be sourced from the Census.

Here is a snapshot of the file:

\begin{table}
\centering
\begin{tabular}{l|r|r|r|r|r|r|r}
\hline
Geo & Year & GrpAge0to14 & GrpAge15to19 & GrpAge20to29 & GrpAge30to54 & GrpAge55to64 & GrpAge65Plus\\
\hline
RVMPO & 2010 & 0 & 666 & 382 & 66 & 7 & 0\\
\hline
RVMPO & 2038 & 0 & 666 & 382 & 66 & 7 & 0\\
\hline
\end{tabular}
\end{table}

\hypertarget{verspm-azone_hh_pop_by_age.csv}{%
\subsection{azone\_hh\_pop\_by\_age.csv}\label{verspm-azone_hh_pop_by_age.csv}}

This file contains population estimates/forecasts by age for each of the base and future years. The file format includes number of persons within six age groups:

\begin{itemize}
\tightlist
\item
  0-14
\item
  15-19
\item
  20-29
\item
  30-54
\item
  55-64
\item
  65 Plus
\end{itemize}

Base year data for population by age category can be sourced from the Census. Future year data must be developed by the user; in many regions population forecasts are available from regional or state agencies such as population data centers, universities, metropolitan planning organizations, or similar agencies.

Here is a snapshot of the file:

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 14\tabcolsep) * \real{0.0870}}
  >{\centering\arraybackslash}p{(\columnwidth - 14\tabcolsep) * \real{0.1304}}
  >{\centering\arraybackslash}p{(\columnwidth - 14\tabcolsep) * \real{0.1304}}
  >{\centering\arraybackslash}p{(\columnwidth - 14\tabcolsep) * \real{0.1304}}
  >{\centering\arraybackslash}p{(\columnwidth - 14\tabcolsep) * \real{0.1304}}
  >{\centering\arraybackslash}p{(\columnwidth - 14\tabcolsep) * \real{0.1304}}
  >{\centering\arraybackslash}p{(\columnwidth - 14\tabcolsep) * \real{0.1304}}
  >{\centering\arraybackslash}p{(\columnwidth - 14\tabcolsep) * \real{0.1304}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Geo
\end{minipage} & \begin{minipage}[b]{\linewidth}\centering
Year
\end{minipage} & \begin{minipage}[b]{\linewidth}\centering
Age0to14
\end{minipage} & \begin{minipage}[b]{\linewidth}\centering
Age15to19
\end{minipage} & \begin{minipage}[b]{\linewidth}\centering
Age20to29
\end{minipage} & \begin{minipage}[b]{\linewidth}\centering
Age30to54
\end{minipage} & \begin{minipage}[b]{\linewidth}\centering
Age55to64
\end{minipage} & \begin{minipage}[b]{\linewidth}\centering
Age65Plus
\end{minipage} \\
\midrule()
\endhead
RVMPO & 2010 & 30193 & 10970 & 20557 & 52327 & 24840 & 29240 \\
RVMPO & 2038 & 39759 & 12781 & 24972 & 75984 & 27563 & 66139 \\
\bottomrule()
\end{longtable}

\hypertarget{verspm-azone_hh_veh_mean_age.csv}{%
\subsection{azone\_hh\_veh\_mean\_age.csv}\label{verspm-azone_hh_veh_mean_age.csv}}

This file provides inputs for mean auto age and mean light truck age by \texttt{Azone}. The user can develop this file using State DMV data.

\begin{itemize}
\tightlist
\item
  \textbf{AutoMeanAge}: Mean age of automobiles owned or leased by households.
\item
  \textbf{LtTrkMeanAge}: Mean age of light trucks owned or leased by households.
\end{itemize}

Here is a snapshot of the file:

\begin{tabular}{l|c|c|c}
\hline
Geo & Year & AutoMeanAge & LtTrkMeanAge\\
\hline
RVMPO & 2010 & 10.8 & 10.5\\
\hline
RVMPO & 2038 & 12.0 & 12.0\\
\hline
\end{tabular}

\hypertarget{verspm-azone_hh_veh_own_taxes.csv}{%
\subsection{azone\_hh\_veh\_own\_taxes.csv}\label{verspm-azone_hh_veh_own_taxes.csv}}

This file provides inputs for flat fees/taxes (i.e.~annual cost per vehicle) and ad valorem taxes (i.e.~percentage of vehicle value paid in taxes).

\begin{itemize}
\tightlist
\item
  \textbf{VehOwnFlatRateFee}: Annual flat rate tax per vehicle in dollars
\item
  \textbf{VehOwnAdValoremTax}: Annual proportion of vehicle value paid in taxes
\end{itemize}

Here is a snapshot of the file:

\begin{tabular}{l|c|c|c}
\hline
Geo & Year & VehOwnFlatRateFee.2015 & VehOwnAdValoremTax\\
\hline
RVMPO & 2010 & 50 & 0.00\\
\hline
RVMPO & 2038 & 0 & 0.01\\
\hline
\end{tabular}

\hypertarget{verspm-azone_hhsize_targets.csv}{%
\subsection{azone\_hhsize\_targets.csv}\label{verspm-azone_hhsize_targets.csv}}

This file contains the household-specific targets for the population synthesizer. This file contains two attributes:

\begin{itemize}
\tightlist
\item
  \textbf{AveHhSize}: Average household size for non-group quarters households
\item
  \textbf{Prop1PerHh}: Proportion of non-group quarters households having only one person
\end{itemize}

Household size data for the base year can be sourced from the Census.

Here is a snapshot of the file:

\begin{longtable}[]{@{}lccc@{}}
\toprule()
Geo & Year & AveHhSize & Prop1PerHh \\
\midrule()
\endhead
RVMPO & 2010 & NA & 0.3 \\
RVMPO & 2038 & NA & NA \\
\bottomrule()
\end{longtable}

\hypertarget{verspm-azone_lttrk_prop.csv}{%
\subsection{azone\_lttrk\_prop.csv}\label{verspm-azone_lttrk_prop.csv}}

This file specifies the light truck proportion of the vehicle fleet. The user can be developed from local registration data. Alternatively, if MOVES is available for the model region, this input can be calculated from the MOVES vehicle population data (SourceTypeYear). The vehicle types used in MOVES (SourceType) correspond with the two categories of passenger vehicles used in EERPAT: MOVES SourceType 21, Passenger Car, is equivalent to autos in EERPAT and MOVES Source Type 31, Passenger Truck, is equivalent to light trucks.

\begin{itemize}
\tightlist
\item
  \textbf{LtTrkProp}: Proportion of household vehicles that are light trucks (pickup, SUV, van).
\end{itemize}

Here is a snapshot of the file:

\begin{tabular}{l|c|c}
\hline
Geo & Year & LtTrkProp\\
\hline
RVMPO & 2010 & 0.45\\
\hline
RVMPO & 2038 & 0.34\\
\hline
\end{tabular}

\hypertarget{verspm-azone_payd_insurance_prop.csv}{%
\subsection{azone\_payd\_insurance\_prop.csv}\label{verspm-azone_payd_insurance_prop.csv}}

This file provides inputs on the proportion of households having PAYD insurance.

\begin{itemize}
\tightlist
\item
  \textbf{PaydHhProp}: Proportion of households in the Azone who have pay-as-you-drive insurance for their vehicles
\end{itemize}

Here is a snapshot of the file:

\begin{tabular}{l|c|c}
\hline
Geo & Year & PaydHhProp\\
\hline
RVMPO & 2010 & 0.01\\
\hline
RVMPO & 2038 & 0.50\\
\hline
\end{tabular}

\hypertarget{verspm-azone_per_cap_inc.csv}{%
\subsection{azone\_per\_cap\_inc.csv}\label{verspm-azone_per_cap_inc.csv}}

This file contains information on regional average per capita household (\texttt{HHIncomePC}) and group quarters (\texttt{GQIncomePC}) income by forecast year in year 2010 dollars. The data can be obtained from the U.S. Department of Commerce Bureau of Economic Analysis for the current year or from regional or state sources for forecast years. In order to use current year dollars just replace 2010 in column labels with current year. For example, if the data is obtained in year 2015 dollars then the column labels in the file shown below will become \texttt{HHIncomePC.2015} and \texttt{GQIncomePC.2015}.

Here is a snapshot of the file:

\begin{tabular}{l|c|c|c}
\hline
Geo & Year & HHIncomePC.2010 & GQIncomePC.2010\\
\hline
RVMPO & 2010 & 32164 & 7500\\
\hline
RVMPO & 2038 & 43334 & 10000\\
\hline
\end{tabular}

\hypertarget{verspm-azone_prop_sov_dvmt_diverted.csv}{%
\subsection{azone\_prop\_sov\_dvmt\_diverted.csv}\label{verspm-azone_prop_sov_dvmt_diverted.csv}}

This file provides inputs for a goal for diverting a portion of SOV travel within a 20-mile tour distance (round trip distance). The user can use local household travel survey data (if available) to develop this input.

\begin{itemize}
\tightlist
\item
  \textbf{PropSovDvmtDiverted}: Goals for the proportion of household DVMT in single occupant vehicle tours with round-trip distances of 20 miles or less be diverted to bicycling or other slow speed modes of travel
\end{itemize}

Here is a snapshot of the file:

\begin{tabular}{l|c|c}
\hline
Geo & Year & PropSovDvmtDiverted\\
\hline
RVMPO & 2010 & 0.04\\
\hline
RVMPO & 2038 & 0.80\\
\hline
\end{tabular}

\hypertarget{verspm-azone_relative_employment.csv}{%
\subsection{azone\_relative\_employment.csv}\label{verspm-azone_relative_employment.csv}}

This file contains the ratio of workers to persons by age cohort in the model year relative to the model estimation data year. This file contains five age cohorts:

\begin{itemize}
\tightlist
\item
  \textbf{RelEmp15to19}: Ratio of workers to persons age 15 to 19 in model year versus in estimation data year
\item
  \textbf{RelEmp20to29}: Ratio of workers to persons age 20 to 29 in model year versus in estimation data year
\item
  \textbf{RelEmp30to54}: Ratio of workers to persons age 30 to 54 in model year versus in estimation data year
\item
  \textbf{RelEmp55to64}: Ratio of workers to persons age 55 to 64 in model year versus in estimation data year
\item
  \textbf{RelEmp65Plus}: Ratio of workers to persons age 65 or older in model year versus in estimation data year
\end{itemize}

Setting a value of 1 assumes that the ratio of workers to persons is consistent with estimation data for that specific age cohort.

Here is a snapshot of the file:

\begin{table}
\centering
\begin{tabular}{l|c|c|c|c|c|c}
\hline
Geo & Year & RelEmp15to19 & RelEmp20to29 & RelEmp30to54 & RelEmp55to64 & RelEmp65Plus\\
\hline
RVMPO & 2010 & 1 & 1 & 1 & 1 & 1\\
\hline
RVMPO & 2038 & 1 & 1 & 1 & 1 & 1\\
\hline
\end{tabular}
\end{table}

\hypertarget{verspm-azone_veh_use_taxes.csv}{%
\subsection{azone\_veh\_use\_taxes.csv}\label{verspm-azone_veh_use_taxes.csv}}

This file supplies data for vehicle taxes related to \protect\hyperlink{auto-operating-cost}{auto operating costs}

\begin{itemize}
\tightlist
\item
  \textbf{FuelTax}:Tax per gas gallon equivalent of fuel in dollars
\item
  \textbf{VmtTax}: Tax per gas gallon equivalent of fuel in dollars
\item
  \textbf{PevSurchgTaxProp}: Proportion of equivalent gas tax per mile paid by hydrocarbon fuel consuming vehicles to be charged to plug-in electric vehicles per mile of travel powered by electricity
\end{itemize}

Here is a snapshot of the file:

\begin{longtable}[]{@{}lllll@{}}
\toprule()
Geo & Year & FuelTax.2005 & VmtTax.2005 & PevSurchgTaxProp \\
\midrule()
\endhead
RVMPO & 2010 & 0.424 & 0 & 0 \\
RVMPO & 2038 & 0.484 & 0 & 0 \\
\bottomrule()
\end{longtable}

\hypertarget{verspm-azone_vehicle_access_times.csv}{%
\subsection{azone\_vehicle\_access\_times.csv}\label{verspm-azone_vehicle_access_times.csv}}

This file supplies data for vehicle access and eagress time.

\begin{itemize}
\tightlist
\item
  \textbf{OwnedVehAccessTime}:Average amount of time in minutes required for access to and egress from a household-owned vehicle for a trip
\item
  \textbf{HighCarSvcAccessTime}: Average amount of time in minutes required for access to and egress from a high service level car service for a trip
\item
  \textbf{LowCarSvcAccessTime}: Average amount of time in minutes required for access to and egress from a low service level car service for a trip
\end{itemize}

Here is a snapshot of the file:

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 8\tabcolsep) * \real{0.0758}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 8\tabcolsep) * \real{0.0606}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 8\tabcolsep) * \real{0.2727}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 8\tabcolsep) * \real{0.3030}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 8\tabcolsep) * \real{0.2879}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Geo
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Year
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
OwnedVehAccessTime
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
HighCarSvcAccessTime
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
LowCarSvcAccessTime
\end{minipage} \\
\midrule()
\endhead
RVMPO & 2010 & 5 & 10 & 45 \\
RVMPO & 2038 & 5 & 10 & 45 \\
\bottomrule()
\end{longtable}

\hypertarget{verspm-bzone_transit_service.csv}{%
\subsection{bzone\_transit\_service.csv}\label{verspm-bzone_transit_service.csv}}

This file supplies the data on relative public transit accessibility at the \texttt{Bzone} level. The data to inform this input can be sourced from the EPA's \href{https://www.epa.gov/smartgrowth/smart-location-database-technical-documentation-and-user-guide}{Smart Location Database}.

\begin{itemize}
\tightlist
\item
  \textbf{D4c}: Aggregate frequency of transit service within 0.25 miles of block group boundary per hour during evening peak period (Ref: EPA 2010 Smart Location Database)
\end{itemize}

Here is a snapshot of the file:

\begin{tabular}{l|c|c}
\hline
Geo & Year & D4c\\
\hline
D410290014002 & 2010 & 0\\
\hline
D410290013012 & 2010 & 0\\
\hline
D410290014001 & 2010 & 0\\
\hline
D410290014003 & 2010 & 0\\
\hline
D410290013021 & 2010 & 0\\
\hline
\end{tabular}

\hypertarget{verspm-bzone_carsvc_availability.csv}{%
\subsection{bzone\_carsvc\_availability.csv}\label{verspm-bzone_carsvc_availability.csv}}

This file contains the information about level of car service availability and contains a value of either \texttt{Low} or \texttt{High} for \texttt{Bzones}. \texttt{High} means car service access is competitive with household owned car and will impact household vehicle ownership; \texttt{Low} is not competitive and will not impact household vehicle ownership.

Here is a snapshot of the file:

\begin{tabular}{l|c|c}
\hline
Geo & Year & CarSvcLevel\\
\hline
D410290014002 & 2010 & Low\\
\hline
D410290013012 & 2010 & Low\\
\hline
D410290014001 & 2010 & Low\\
\hline
D410290014003 & 2010 & Low\\
\hline
D410290013021 & 2010 & Low\\
\hline
\end{tabular}

\hypertarget{verspm-bzone_dwelling_units.csv}{%
\subsection{bzone\_dwelling\_units.csv}\label{verspm-bzone_dwelling_units.csv}}

This file contains the number single-family dwelling units (\texttt{SFDU}), multifamily dwelling units (\texttt{MFDU}) and group-quarter dwelling units (\texttt{GQDU}) by \texttt{Bzone} for each of the base and future years. Data for the base year for single-family and multifamily dwelling units can be sourced from Census housing data with information on units in structure, with multifamily dwelling units defined as any structures with 2-or-more units. For group quarters, unless more detailed local data is available, Census data for non-institutionalized group quarter population can serve as a proxy for dwelling units assuming a \texttt{1:1} ratio of dwelling unit per GQ population.

Here is a snapshot of the file:

\begin{tabular}{l|c|c|c|c}
\hline
Geo & Year & SFDU & MFDU & GQDU\\
\hline
D410290014002 & 2010 & 559 & 0 & 0\\
\hline
D410290013012 & 2010 & 79 & 8 & 523\\
\hline
D410290014001 & 2010 & 1398 & 180 & 0\\
\hline
D410290014003 & 2010 & 1385 & 172 & 0\\
\hline
D410290013021 & 2010 & 271 & 0 & 0\\
\hline
\end{tabular}

\hypertarget{verspm-bzone_employment.csv}{%
\subsection{bzone\_employment.csv}\label{verspm-bzone_employment.csv}}

This file contains the total, retail and service employment by zone for each of the base and future years. Employment categorizations are from the Environmental Protection Agency's (EPA) \href{https://www.epa.gov/smartgrowth/smart-location-database-technical-documentation-and-user-guide}{Smart Location Database} 5-tier employment classification.

\begin{itemize}
\tightlist
\item
  \textbf{TotEmp}: Total number of jobs in zone
\item
  \textbf{RetEmp}: Number of jobs in retail sector in zone (Census LEHD: CNS07)
\item
  \textbf{SvcEmp}: Number of jobs in service sector in zone (Census LEHD: CNS12 + CNS14 + CNS15 + CNS16 + CNS19)
\end{itemize}

Here is a snapshot of the file:

\begin{tabular}{l|c|c|c|c}
\hline
Geo & Year & TotEmp & RetEmp & SvcEmp\\
\hline
D410290014002 & 2010 & 403 & 262 & 96\\
\hline
D410290013012 & 2010 & 1382 & 73 & 880\\
\hline
D410290014001 & 2010 & 271 & 12 & 172\\
\hline
D410290014003 & 2010 & 609 & 66 & 413\\
\hline
D410290013021 & 2010 & 49 & 1 & 41\\
\hline
\end{tabular}

\hypertarget{verspm-bzone_hh_inc_qrtl_prop.csv}{%
\subsection{bzone\_hh\_inc\_qrtl\_prop.csv}\label{verspm-bzone_hh_inc_qrtl_prop.csv}}

This file contains the proportion of \texttt{Bzone} non-group quarters households by quartile of \texttt{Azone} household income category for each of the base and future years. The total for each \texttt{Bzone} should sum to \texttt{1}.

Here is a snapshot of the file:

\begin{tabular}{l|c|c|c|c|c}
\hline
Geo & Year & HhPropIncQ1 & HhPropIncQ2 & HhPropIncQ3 & HhPropIncQ4\\
\hline
D410290014002 & 2010 & 0.12 & 0.54 & 0.26 & 0.54\\
\hline
D410290013012 & 2010 & 0.00 & 0.32 & 0.36 & 0.32\\
\hline
D410290014001 & 2010 & 0.24 & 0.16 & 0.26 & 0.16\\
\hline
D410290014003 & 2010 & 0.16 & 0.19 & 0.36 & 0.19\\
\hline
D410290013021 & 2010 & 0.29 & 0.29 & 0.15 & 0.29\\
\hline
\end{tabular}

\hypertarget{verspm-bzone_lat_lon.csv}{%
\subsection{bzone\_lat\_lon.csv}\label{verspm-bzone_lat_lon.csv}}

This file contains the latitude and longitude of the centroid of each Bzone.

Here is a snapshot of the file:

\begin{tabular}{l|c|c|c}
\hline
Geo & Year & Latitude & Longitude\\
\hline
D410290014002 & 2010 & 42.48657 & -122.8014\\
\hline
D410290013012 & 2010 & 42.44259 & -122.8461\\
\hline
D410290014001 & 2010 & 42.46010 & -122.7925\\
\hline
D410290014003 & 2010 & 42.47673 & -122.8008\\
\hline
D410290013021 & 2010 & 42.37304 & -122.7793\\
\hline
\end{tabular}

\hypertarget{verspm-bzone_network_design.csv}{%
\subsection{bzone\_network\_design.csv}\label{verspm-bzone_network_design.csv}}

This file contains values for \texttt{D3bpo4}, a measure for intersection density determined by the number of pedestrian-oriented intersections having four or more legs per square mile. The data to inform this input can be sourced from the EPA's \href{https://www.epa.gov/smartgrowth/smart-location-database-technical-documentation-and-user-guide}{Smart Location Database}.

Here is a snapshot of the file:

\begin{tabular}{l|c|c}
\hline
Geo & Year & D3bpo4\\
\hline
D410290014002 & 2010 & 0.2618757\\
\hline
D410290013012 & 2010 & 0.4830901\\
\hline
D410290014001 & 2010 & 1.8038130\\
\hline
D410290014003 & 2010 & 18.9766301\\
\hline
D410290013021 & 2010 & 0.1013039\\
\hline
\end{tabular}

\hypertarget{verspm-bzone_parking.csv}{%
\subsection{bzone\_parking.csv}\label{verspm-bzone_parking.csv}}

This file contains the parking information by \texttt{Bzone} for each of the base and future years. Users should use available local data on parking availability, costs, and program participation to develop this input.

\begin{itemize}
\tightlist
\item
  \textbf{PkgSpacesPerSFDU}: Average number of free parking spaces available to residents of single-family dwelling units
\item
  \textbf{PkgSpacesPerMFDU}: Average number of free parking spaces available to residents of multifamily dwelling units
\item
  \textbf{PkgSpacesPerGQ}: Average number of free parking spaces available to group quarters residents
\item
  \textbf{PropWkrPay}: Proportion of workers who pay for parking
\item
  \textbf{PropCashOut}: Proportions of workers paying for parking in a cash-out-buy-back program
\item
  \textbf{PkgCost}: Average daily cost for long-term parking (e.g.~paid on monthly basis)
\end{itemize}

Here is a snapshot of the file:

\begin{tabular}{l|c|c|c|c|c|c|c}
\hline
Geo & Year & PkgSpacesPerSFDU & PkgSpacesPerMFDU & PkgSpacesPerGQ & PropWkrPay & PropCashOut & PkgCost.2010\\
\hline
D410290014002 & 2010 & 3 & 1.5 & 0 & 0 & 0 & 0\\
\hline
D410290013012 & 2010 & 4 & 4.0 & 0 & 0 & 0 & 0\\
\hline
D410290014001 & 2010 & 4 & 4.0 & 0 & 0 & 0 & 0\\
\hline
D410290014003 & 2010 & 4 & 4.0 & 0 & 0 & 0 & 0\\
\hline
D410290013021 & 2010 & 4 & 4.0 & 0 & 0 & 0 & 0\\
\hline
\end{tabular}

\hypertarget{verspm-bzone_travel_demand_mgt.csv}{%
\subsection{bzone\_travel\_demand\_mgt.csv}\label{verspm-bzone_travel_demand_mgt.csv}}

This file contains the information about workers and households participating in demand management programs. Users should use available local data on travel demand management programs to develop this input.

\begin{itemize}
\tightlist
\item
  \textbf{EcoProp}: Proportion of workers working in \texttt{Bzone} who participate in strong employee commute options program (can also be used to approximate the impacts of teleworking)
\item
  \textbf{ImpProp}: Proportion of households residing in \texttt{Bzone} who participate in strong individualized marketing program
\end{itemize}

Here is a snapshot of the file:

\begin{tabular}{l|c|c|c}
\hline
Geo & Year & EcoProp & ImpProp\\
\hline
D410290014002 & 2010 & 0.0 & 0.0\\
\hline
D410290013012 & 2010 & 0.2 & 0.4\\
\hline
D410290014001 & 2010 & 0.2 & 0.4\\
\hline
D410290014003 & 2010 & 0.0 & 0.0\\
\hline
D410290013021 & 2010 & 0.0 & 0.0\\
\hline
\end{tabular}

\hypertarget{verspm-bzone_unprotected_area.csv}{%
\subsection{bzone\_unprotected\_area.csv}\label{verspm-bzone_unprotected_area.csv}}

This file contains the information about unprotected (i.e., developable) area within the zone.

\begin{itemize}
\tightlist
\item
  \textbf{UrbanArea}: Area that is \texttt{Urban} and unprotected (i.e.~developable) within the zone (Acres)
\item
  \textbf{TownArea}: Area that is \texttt{Town} and unprotected within the zone (Acres)
\item
  \textbf{RuralArea}: Area that is \texttt{Rural} and unprotected within the zone (Acres)
\end{itemize}

Here is a snapshot of the file:

\begin{tabular}{l|c|c|c|c}
\hline
Geo & Year & UrbanArea & TownArea & RuralArea\\
\hline
D410290014002 & 2010 & 298.6487137 & 0 & 4996.11876\\
\hline
D410290013012 & 2010 & 830.6009450 & 0 & 384.80922\\
\hline
D410290014001 & 2010 & 983.1506646 & 0 & 3699.94017\\
\hline
D410290014003 & 2010 & 439.2145619 & 0 & 90.86259\\
\hline
D410290013021 & 2010 & 0.3548548 & 0 & 6212.57640\\
\hline
\end{tabular}

\hypertarget{verspm-bzone_urban-town_du_proportions.csv}{%
\subsection{bzone\_urban-town\_du\_proportions.csv}\label{verspm-bzone_urban-town_du_proportions.csv}}

This file contains proportion of SF, MF and GQ dwelling units within the urban portion of the zone.

\begin{itemize}
\tightlist
\item
  \textbf{PropUrbanSFDU}: Proportion of single family dwelling units located within the urban portion of the zone
\item
  \textbf{PropUrbanMFDU}: Proportion of multi-family dwelling units located within the urban portion of the zone
\item
  \textbf{PropUrbanGQDU}: Proportion of group quarters accommodations located within the urban portion of the zone
\item
  \textbf{PropTownSFDU}: Proportion of single family dwelling units located within the town portion of the zone
\item
  \textbf{PropTownMFDU}: Proportion of multi-family dwelling units located within the town portion of the zone
\item
  \textbf{PropTownGQDU}: Proportion of group quarters accommodations located within the town portion of the zone
\end{itemize}

Here is a snapshot of the file:

\begin{tabular}{l|c|c|c|c|c|c|c}
\hline
Geo & Year & PropUrbanSFDU & PropUrbanMFDU & PropUrbanGQDU & PropTownSFDU & PropTownMFDU & PropTownGQDU\\
\hline
D410290014002 & 2010 & 0.4686941 & 1 & 1 & 0 & 0 & 0\\
\hline
D410290013012 & 2010 & 0.8860759 & 1 & 1 & 0 & 0 & 0\\
\hline
D410290014001 & 2010 & 0.8626609 & 1 & 1 & 0 & 0 & 0\\
\hline
D410290014003 & 2010 & 0.9906137 & 1 & 1 & 0 & 0 & 0\\
\hline
D410290013021 & 2010 & 0.0147601 & 1 & 1 & 0 & 0 & 0\\
\hline
\end{tabular}

\hypertarget{verspm-marea_base_year_dvmt.csv}{%
\subsection{marea\_base\_year\_dvmt.csv}\label{verspm-marea_base_year_dvmt.csv}}

This input file is OPTIONAL. It is only needed if the user wants to modify the adjust dvmt growth factors from base year in by Marea

\begin{itemize}
\tightlist
\item
  \textbf{UrbanLdvDvmt}: Average daily vehicle miles of travel on roadways in the urbanized portion of the Marea by light-duty vehicles during the base year
\item
  \textbf{UrbanHvyTrkDvmt}: Average daily vehicle miles of travel on roadways in the urbanized portion of the Marea by heavy trucks during he base year
\end{itemize}

Here is a snapshot of the file:

\begin{tabular}{l|c|c|c}
\hline
Geo & UzaNameLookup & UrbanLdvDvmt & UrbanHvyTrkDvmt\\
\hline
RVMPO & Medford/OR & NA & NA\\
\hline
\end{tabular}

\hypertarget{verspm-marea_congestion_charges.csv}{%
\subsection{marea\_congestion\_charges.csv}\label{verspm-marea_congestion_charges.csv}}

This input file is OPTIONAL. It is only needed if the user wants to add a congestion charge policy for vehicle travel using different congestion levels and roadway classes.

\begin{itemize}
\tightlist
\item
  \textbf{FwyNoneCongChg}: Charge per mile (U.S. dollars) of vehicle travel on freeways during periods of no congestion
\item
  \textbf{FwyModCongChg}: Charge per mile (U.S. dollars) of vehicle travel on freeways during periods of moderate congestion
\item
  \textbf{FwyHvyCongChg}: Charge per mile (U.S. dollars) of vehicle travel on freeways during periods of heavy congestion
\item
  \textbf{FwySevCongChg}: Charge per mile (U.S. dollars) of vehicle travel on freeways during periods of severe congestion
\item
  \textbf{FwyExtCongChg}: Charge per mile (U.S. dollars) of vehicle travel on freeways during periods of extreme congestion
\item
  \textbf{ArtNoneCongChg}: Charge per mile (U.S. dollars) of vehicle travel on arterials during periods of no congestion
\item
  \textbf{ArtModCongChg}: Charge per mile (U.S. dollars) of vehicle travel on arterials during periods of moderate congestion
\item
  \textbf{ArtHvyCongChg}: Charge per mile (U.S. dollars) of vehicle travel on arterials during periods of heavy congestion
\item
  \textbf{ArtSevCongChg}: Charge per mile (U.S. dollars) of vehicle travel on arterials during periods of severe congestion
\item
  \textbf{ArtExtCongChg}: Charge per mile (U.S. dollars) of vehicle travel on arterials during periods of extreme congestion
\end{itemize}

Here is a snapshot of the file:

\begin{tabular}{l|c|c|c|c|c|c|c|c|c|c|c}
\hline
Geo & Year & FwyNoneCongChg.2010 & FwyModCongChg.2010 & FwyHvyCongChg.2010 & FwySevCongChg.2010 & FwyExtCongChg.2010 & ArtNoneCongChg.2010 & ArtModCongChg.2010 & ArtHvyCongChg.2010 & ArtSevCongChg.2010 & ArtExtCongChg.2010\\
\hline
RVMPO & 2010 & 0 & 0 & 0 & 0.0 & 0.0 & 0 & 0 & 0 & 0 & 0\\
\hline
RVMPO & 2038 & 0 & 0 & 0 & 0.1 & 0.2 & 0 & 0 & 0 & 0 & 0\\
\hline
\end{tabular}

\hypertarget{verspm-marea_dvmt_split_by_road_class.csv}{%
\subsection{marea\_dvmt\_split\_by\_road\_class.csv}\label{verspm-marea_dvmt_split_by_road_class.csv}}

DVMT Split by Road Class This input file is OPTIONAL. It is only needed if the user wants to modify the dvmt split for different road classes. This data can be derived from the FHWA \href{https://www.fhwa.dot.gov/policyinformation/statistics.cfm}{Highway Statistics} data.

\begin{itemize}
\tightlist
\item
  \textbf{LdvFwyArtDvmtProp}: Proportion of light-duty daily vehicle miles of travel in the urbanized portion of the Marea occurring on freeway or aerial roadways
\item
  \textbf{LdvOthDvmtProp}: Proportion of light-duty daily vehicle miles of travel in the urbanized portion of the Marea occurring on other roadways
\item
  \textbf{HvyTrkFwyDvmtProp}: Proportion of heavy truck daily vehicle miles of travel in the urbanized portion of the Marea occurring on freeways
\item
  \textbf{HvyTrkArtDvmtProp}: Proportion of heavy truck daily vehicle miles of travel in the urbanized portion of the Marea occurring on arterial rdways
\item
  \textbf{HvyTrkOthDvmtProp}: Proportion of heavy truck daily vehicle miles of travel in the urbanized portion of the Marea occurring on other roadways
\item
  \textbf{BusFwyDvmtProp}: Proportion of bus daily vehicle miles of travel in the urbanized portion of the Marea occurring on freeways
\item
  \textbf{BusArtDvmtProp}: Proportion of bus daily vehicle miles of travel in the urbanized portion of the Marea occurring on arterial roadways
\item
  \textbf{BusOthDvmtProp}: Proportion of bus daily vehicle miles of travel in the urbanized portion of the Marea occuring on other roadways
\end{itemize}

Here is a snapshot of the file:

\begin{tabular}{l|c|c|c|c|c|c|c|c|c}
\hline
Geo & LdvFwyDvmtProp & LdvArtDvmtProp & LdvOthDvmtProp & HvyTrkFwyDvmtProp & HvyTrkArtDvmtProp & HvyTrkOthDvmtProp & BusFwyDvmtProp & BusArtDvmtProp & BusOthDvmtProp\\
\hline
RVMPO & 0.2632296 & 0.47739 & 0.2593804 &  &  &  & 0 & 0.6962986 & 0.3037014\\
\hline
\end{tabular}

\hypertarget{verspm-marea_lane_miles.csv}{%
\subsection{marea\_lane\_miles.csv}\label{verspm-marea_lane_miles.csv}}

This file contains inputs on the numbers of freeway lane-miles and arterial lane-miles by \texttt{Marea} and year. The data to develop this input can be sourced from the FHWA Highway Performance Monitoring System (HPMS), using either the HPMS geospatial data or Highway Statistics, or the State DOT.

\begin{itemize}
\tightlist
\item
  \textbf{FwyLaneMi}: Lane-miles of roadways functionally classified as freeways or expressways in the urbanized portion of the metropolitan area
\item
  \textbf{ArtLaneMi}: Lane-miles of roadways functionally classified as arterials (but not freeways or expressways) in the urbanized portion of the metropolitan area
\end{itemize}

Here is a snapshot of the file:

\begin{tabular}{l|c|c|c}
\hline
Geo & Year & FwyLaneMi & ArtLaneMi\\
\hline
RVMPO & 2010 & 91 & 356\\
\hline
RVMPO & 2038 & 97 & 371\\
\hline
\end{tabular}

\hypertarget{verspm-marea_operations_deployment.csv}{%
\subsection{marea\_operations\_deployment.csv}\label{verspm-marea_operations_deployment.csv}}

This input file is OPTIONAL. It is only needed if the user wants to modify the proportion of DVMT affected by operations for different road classes.

\begin{itemize}
\tightlist
\item
  \textbf{RampMeterDeployProp}: Proportion of freeway DVMT affected by ramp metering deployment
\item
  \textbf{IncidentMgtDeployProp}: Proportion of freeway DVMT affected by incident management deployment
\item
  \textbf{SignalCoordDeployProp}: Proportion of arterial DVMT affected by signal coordination deployment
\item
  \textbf{AccessMgtDeployProp}: Proportion of arterial DVMT affected by access management deployment
\item
  \textbf{OtherFwyOpsDeployProp}: Proportion of freeway DVMT affected by deployment of other user-defined freeway operations measures
\item
  \textbf{OtherArtOpsDeployProp}: Proportion of arterial DVMT affected by deployment of other user-defined arterial operations measures
\end{itemize}

Here is a snapshot of the file:

\begin{tabular}{l|c|c|c|c|c|c|c}
\hline
Geo & Year & RampMeterDeployProp & IncidentMgtDeployProp & SignalCoordDeployProp & AccessMgtDeployProp & OtherFwyOpsDeployProp & OtherArtOpsDeployProp\\
\hline
RVMPO & 2010 & 0.00 & 0.50 & 0.50 & 0.00 & 0 & 0\\
\hline
RVMPO & 2038 & 0.95 & 0.95 & 0.95 & 0.24 & 0 & 0\\
\hline
\end{tabular}

\hypertarget{verspm-marea_speed_smooth_ecodrive.csv}{%
\subsection{marea\_speed\_smooth\_ecodrive.csv}\label{verspm-marea_speed_smooth_ecodrive.csv}}

This input file supplies information of deployment of speed smoothing and ecodriving by road class and vehicle type.

\begin{itemize}
\tightlist
\item
  \textbf{FwySmooth}:Fractional deployment of speed smoothing traffic management on freeways, where 0 is no deployment and 1 is the full potential fuel savings
\item
  \textbf{ArtSmooth}: Fractional deployment of speed smoothing traffic management on arterials, where 0 is no deployment and 1 is the full potential fuel savings
\item
  \textbf{LdvEcoDrive}: Eco-driving penetration for light-duty vehicles; the fraction of vehicles from 0 to 1
\item
  \textbf{HvyTrkEcoDrive}: Eco-driving penetration for heavy-duty vehicles; the fraction of vehicles from 0 to 1
\end{itemize}

Here is a snapshot of the file:

\begin{longtable}[]{@{}llllll@{}}
\toprule()
Geo & Year & FwySmooth & ArtSmooth & LdvEcoDrive & HvyTrkEcoDrive \\
\midrule()
\endhead
RVMPO & 2010 & 0.2 & 0.1 & 0.2 & 0.05 \\
RVMPO & 2038 & 0.4 & 0.2 & 0.4 & 0.2 \\
\bottomrule()
\end{longtable}

\hypertarget{verspm-marea_transit_ave_fuel_carbon_intensity.csv}{%
\subsection{marea\_transit\_ave\_fuel\_carbon\_intensity.csv}\label{verspm-marea_transit_ave_fuel_carbon_intensity.csv}}

This input file is OPTIONAL. It is only needed if the user wants to modify the average carbon intensity of fuel used by transit.

\begin{itemize}
\tightlist
\item
  \textbf{TransitVanFuelCI}: Average carbon intensity of fuel used by transit vans (grams CO2e per megajoule)
\item
  \textbf{TransitBusFuelCI}: Average carbon intensity of fuel used by transit buses (grams CO2e per megajoule)
\item
  \textbf{TransitRailFuelCI}: Average carbon intensity of fuel used by transit rail vehicles (grams CO2e per megajoule)
\end{itemize}

Here is a snapshot of the file:

\begin{tabular}{l|c|c|c|c}
\hline
Geo & Year & TransitVanFuelCI & TransitBusFuelCI & TransitRailFuelCI\\
\hline
RVMPO & 2010 & 90.38 & NA & NA\\
\hline
RVMPO & 2038 & 72.30 & NA & NA\\
\hline
\end{tabular}

\hypertarget{verspm-marea_transit_biofuel_mix.csv}{%
\subsection{marea\_transit\_biofuel\_mix.csv}\label{verspm-marea_transit_biofuel_mix.csv}}

This input file is OPTIONAL. It is only needed if the user wants to modify the biofuel used by transit services.

\begin{itemize}
\tightlist
\item
  \textbf{TransitEthanolPropGasoline}: Ethanol proportion of gasoline used by transit vehicles
\item
  \textbf{TransitBiodieselPropDiesel}: Biodiesel proportion of diesel used by transit vehicles
\item
  \textbf{TransitRngPropCng}: Renewable natural gas proportion of compressed natural gas used by transit vehicles
\end{itemize}

Here is a snapshot of the file:

\begin{tabular}{l|c|c|c|c}
\hline
Geo & Year & TransitEthanolPropGasoline & TransitBiodieselPropDiesel & TransitRngPropCng\\
\hline
RVMPO & 2010 & 0.1 & 0.05 & 0\\
\hline
RVMPO & 2038 & 0.1 & 0.05 & 0\\
\hline
\end{tabular}

\hypertarget{verspm-marea_transit_fuel.csv}{%
\subsection{marea\_transit\_fuel.csv}\label{verspm-marea_transit_fuel.csv}}

This input file is OPTIONAL. It is only needed if the user wants to modify the transit fuels proportions.

\begin{itemize}
\tightlist
\item
  \textbf{VanPropDiesel}: Proportion of non-electric transit van travel powered by diesel
\item
  \textbf{VanPropGasoline}: Proportion of non-electric transit van travel powered by gasoline
\item
  \textbf{VanPropCng}: Proportion of non-electric transit van travel powered by compressed natural gas
\item
  \textbf{BusPropDiesel}: Proportion of non-electric transit bus travel powered by diesel
\item
  \textbf{BusPropGasoline}: Proportion of non-electric transit bus travel powered by gasoline
\item
  \textbf{BusPropCng}: Proportion of non-electric transit bus travel powered by compressed natural gas
\item
  \textbf{RailPropDiesel}: Proportion of non-electric transit rail travel powered by diesel
\item
  \textbf{RailPropGasoline}: Proportion of non-electric transit rail travel powered by gasoline
\end{itemize}

Here is a snapshot of the file:

\begin{tabular}{l|c|c|c|c|c|c|c|c|c}
\hline
Geo & Year & VanPropDiesel & VanPropGasoline & VanPropCng & BusPropDiesel & BusPropGasoline & BusPropCng & RailPropDiesel & RailPropGasoline\\
\hline
RVMPO & 2010 & 0 & 1 & 0 & 0.2 & 0 & 0.8 & 1 & 0\\
\hline
RVMPO & 2038 & 0 & 1 & 0 & 0.2 & 0 & 0.8 & 1 & 0\\
\hline
\end{tabular}

\hypertarget{verspm-marea_transit_powertrain_prop.csv}{%
\subsection{marea\_transit\_powertrain\_prop.csv}\label{verspm-marea_transit_powertrain_prop.csv}}

This input file is OPTIONAL. It is only needed if the user wants to modify the mixes of transit vehicle powertrains.

\begin{itemize}
\tightlist
\item
  \textbf{VanPropIcev}: Proportion of transit van travel using internal combustion engine powertrains
\item
  \textbf{VanPropHev}: Proportion of transit van travel using hybrid electric powertrains
\item
  \textbf{VanPropBev}: Proportion of transit van travel using battery electric powertrains
\item
  \textbf{BusPropIcev}: Proportion of transit bus travel using internal combustion engine powertrains
\item
  \textbf{BusPropHev}: Proportion of transit bus travel using hybrid electric powertrains
\item
  \textbf{BusPropBev}: Proportion of transit bus travel using battery electric powertrains
\item
  \textbf{RailPropIcev}: Proportion of transit rail travel using internal combustion engine powertrains
\item
  \textbf{RailPropHev}: Proportion of transit rail travel using hybrid electric powertrains
\item
  \textbf{RailPropEv}: Proportion of transit rail travel using electric powertrains
\end{itemize}

Here is a snapshot of the file:

\begin{tabular}{l|c|c|c|c|c|c|c|c|c|l}
\hline
Geo & Year & VanPropIcev & VanPropHev & VanPropBev & BusPropIcev & BusPropHev & BusPropBev & RailPropIcev & RailPropHev & RailPropEv\\
\hline
RVMPO & 2010 & 1 & 0 & 0 & 1 & 0 & 0 & 0 & 0 & 1\\
\hline
RVMPO & 2038 & 1 & 0 & 0 & 1 & 0 & 0 & 0 & 0 & 1\\
\hline
\end{tabular}

\hypertarget{verspm-marea_transit_service.csv}{%
\subsection{marea\_transit\_service.csv}\label{verspm-marea_transit_service.csv}}

This file contains annual revenue-miles for different transit modes for metropolitan area. Data to develop this input can be sourced from the Federal Transit Administration NTD.

\begin{itemize}
\tightlist
\item
  \textbf{DRRevMi}: Annual revenue-miles of demand-responsive public transit service
\item
  \textbf{VPRevMi}: Annual revenue-miles of van-pool and similar public transit service
\item
  \textbf{MBRevMi}: Annual revenue-miles of standard bus public transit service
\item
  \textbf{RBRevMi}: Annual revenue-miles of rapid-bus and commuter bus public transit service
\item
  \textbf{MGRevMi}: Annual revenue-miles of monorail and automated guideway public transit service
\item
  \textbf{SRRevMi}: Annual revenue-miles of streetcar and trolleybus public transit service
\item
  \textbf{HRRevMi}: Annual revenue-miles of light rail and heavy rail public transit service
\item
  \textbf{CRRevMi}: Annual revenue-miles of commuter rail, hybrid rail, cable car, and aerial tramway public transit service
\end{itemize}

Here is a snapshot of the file:

\begin{tabular}{l|c|c|c|c|c|c|c|c|c}
\hline
Geo & Year & DRRevMi & VPRevMi & MBRevMi & RBRevMi & MGRevMi & SRRevMi & HRRevMi & CRRevMi\\
\hline
RVMPO & 2010 & 382639 & 0 & 607922 & 0 & 0 & 0 & 0 & 0\\
\hline
RVMPO & 2038 & 2381995 & 0 & 3580237 & 0 & 0 & 0 & 0 & 0\\
\hline
\end{tabular}

\hypertarget{verspm-other_ops_effectiveness.csv}{%
\subsection{other\_ops\_effectiveness.csv}\label{verspm-other_ops_effectiveness.csv}}

This input file is OPTIONAL. It is only needed if the user wants to modify the other delay effects of operations in different road classes

\begin{itemize}
\tightlist
\item
  \textbf{Level}: Congestion levels: None = none, Mod = moderate, Hvy = heavy, Sev = severe, Ext = extreme
\item
  \textbf{Art\_Rcr}: Percentage reduction of recurring arterial delay that would occur with full deployment of other user-defined arterial operations measures
\item
  \textbf{Art\_NonRcr}: Percentage reduction of non-recurring arterial delay that would occur with full deployment of other user-defined arterial operations measures
\item
  \textbf{Fwy\_Rcr}: Percentage reduction of recurring freeway delay that would occur with full deployment of other user-defined freeway operations measures
\item
  \textbf{Fwy\_NonRcr}: Percentage reduction of non-recurring freeway delay that would occur with full deployment of other user-defined freeway operations measures
\end{itemize}

Here is a snapshot of the file:

\begin{tabular}{l|c|c|c|c|c|c|c}
\hline
Level & Art\_Rcr & Art\_NonRcr & Fwy\_Rcr & Fwy\_NonRcr & AccessMgtDeployProp & OtherFwyOpsDeployProp & OtherArtOpsDeployProp\\
\hline
None & 0 & 0 & 0 & 0 & 0 & 0 & 0\\
\hline
Mod & 0 & 0 & 0 & 0 & 0 & 0 & 0\\
\hline
Hvy & 0 & 0 & 0 & 0 & 0 & 0 & 0\\
\hline
sev & 0 & 0 & 0 & 0 & 0 & 0 & 0\\
\hline
Ext & 0 & 0 & 0 & 0 & 0 & 0 & 0\\
\hline
\end{tabular}

\hypertarget{verspm-region_ave_fuel_carbon_intensity.csv}{%
\subsection{region\_ave\_fuel\_carbon\_intensity.csv}\label{verspm-region_ave_fuel_carbon_intensity.csv}}

This input file is OPTIONAL. It is only needed if the user wants to modify the average carbon density for different vehicle types for the model region.

\begin{itemize}
\tightlist
\item
  \textbf{HhFuelCI}: Average carbon intensity of fuels used by household vehicles (grams CO2e per megajoule)
\item
  \textbf{CarSvcFuelCI}: Average carbon intensity of fuels used by car service vehicles (grams CO2e per megajoule)
\item
  \textbf{ComSvcFuelCI}: Average carbon intensity of fuels used by commercial service vehicles (grams CO2e per megajoule)
\item
  \textbf{HvyTrkFuelCI}: Average carbon intensity of fuels used by heavy trucks (grams CO2e per megajoule)
\item
  \textbf{TransitVanFuelCI}: Average carbon intensity of fuels used by transit vans (grams CO2e per megajoule)
\item
  \textbf{TransitBusFuelCI}: Average carbon intensity of fuels used by transit buses (grams CO2e per megajoule)
\item
  \textbf{TransitRailFuelCI}: Average carbon intensity of fuels used by transit rail vehicles (grams CO2e per megajoule)
\end{itemize}

Here is a snapshot of the file:

\begin{tabular}{l|c|c|c|c|c|c|c|c}
\hline
Geo & Year & HhFuelCI & CarSvcFuelCI & ComSvcFuelCI & HvyTrkFuelCI & TransitVanFuelC & TransitBusFuelC & TransitRailFuel\\
\hline
RVMPO & 2010 & 90.23 & 90.23 & 90.23 & NA & NA & NA & NA\\
\hline
RVMPO & 2038 & 72.30 & 72.30 & 72.30 & NA & NA & NA & NA\\
\hline
\end{tabular}

\hypertarget{verspm-region_base_year_dvmt.csv}{%
\subsection{region\_base\_year\_dvmt.csv}\label{verspm-region_base_year_dvmt.csv}}

This input file is OPTIONAL. It is only needed if the user wants to adjust heavy truck DVMT for base year

\begin{itemize}
\tightlist
\item
  \textbf{HvyTrkDvmtGrowthBasis}: Factor used to grow heavy truck DVMT from base year value
\item
  \textbf{HvyTrkDvmt}: Average daily vehicle miles of travel on roadways in the region by heavy trucks during he base year
\item
  \textbf{HvyTrkDvmtUrbanProp}: Proportion of Region heavy truck daily vehicle miles of travel occurring on urbanized area roadways
\end{itemize}

Here is a snapshot of the file:

\begin{tabular}{l|c|c|c}
\hline
StateAbbrLookup & HvyTrkDvmtGrowthBasis & HvyTrkDvmt & ComSvcDvmtGrowthBasis\\
\hline
 & Income & NA & Population\\
\hline
\end{tabular}

\hypertarget{verspm-region_carsvc_powertrain_prop.csv}{%
\subsection{region\_carsvc\_powertrain\_prop.csv}\label{verspm-region_carsvc_powertrain_prop.csv}}

This input file is OPTIONAL. It is only needed if the user wants to modify the powertrain proportion of car services.

\begin{itemize}
\tightlist
\item
  \textbf{CarSvcAutoPropIcev}: Proportion of car service automobile travel powered by internal combustion engine powertrains
\item
  \textbf{CarSvcAutoPropHev}: Proportion of car service automobile travel powered by hybrid electric powertrains
\item
  \textbf{CarSvcAutoPropBev}: Proportion of car service automobile travel powered by battery electric powertrains
\item
  \textbf{CarSvcLtTrkPropIcev}: Proportion of car service light truck travel powered by internal combustion engine powertrains
\item
  \textbf{CarSvcLtTrkPropHev}: Proportion of car service light truck travel powered by hybrid electric powertrains
\item
  \textbf{CarSvcLtTrkPropBev}: Proportion of car service light truck travel powered by battery electric powertrains
\end{itemize}

Here is a snapshot of the file:

\begin{tabular}{l|c|c|c|c|c|c|c}
\hline
Geo & Year & CarSvcAutoPropIcev & CarSvcAutoPropHev & CarSvcAutoPropBev & CarSvcLtTrkPropIce & CarSvcLtTrkPropHev & CarSvcLtTrkPropBev\\
\hline
RVMPO & 2010 & 0.990 & 0.010 & 0.000 & 1.0000 & 0.0000 & 0.0000\\
\hline
RVMPO & 2038 & 0.441 & 0.528 & 0.031 & 0.5335 & 0.4572 & 0.0093\\
\hline
\end{tabular}

\hypertarget{verspm-region_comsvc_lttrk_prop.csv}{%
\subsection{region\_comsvc\_lttrk\_prop.csv}\label{verspm-region_comsvc_lttrk_prop.csv}}

This file supplies data for the light truck proportion of commercial vehicles for the region.

\begin{itemize}
\tightlist
\item
  \textbf{ComSvcLtTrkProp}: Regional proportion of commercial service vehicles that are light trucks
\end{itemize}

Here is a snapshot of the file:

\begin{longtable}[]{@{}ll@{}}
\toprule()
Year & ComSvcLtTrkProp \\
\midrule()
\endhead
2010 & 0.51 \\
2038 & 0.51 \\
\bottomrule()
\end{longtable}

\hypertarget{verspm-region_comsvc_powertrain_prop.csv}{%
\subsection{region\_comsvc\_powertrain\_prop.csv}\label{verspm-region_comsvc_powertrain_prop.csv}}

This input file is OPTIONAL. It is only needed if the user wants to modify the powertrain proportion of commercial vehicles.

\begin{itemize}
\tightlist
\item
  \textbf{ComSvcAutoPropIcev}: Proportion of commercial service automobile travel powered by internal combustion engine powertrains
\item
  \textbf{ComSvcAutoPropHev}: Proportion of commercial service automobile travel powered by hybrid electric powertrains
\item
  \textbf{ComSvcAutoPropBev}: Proportion of commercial service automobile travel powered by battery electric powertrains
\item
  \textbf{ComSvcLtTrkPropIcev}: Proportion of commercial service light truck travel powered by internal combustion engine powertrains
\item
  \textbf{ComSvcLtTrkPropHev}: Proportion of commercial service light truck travel powered by hybrid electric powertrains
\item
  \textbf{ComSvcLtTrkPropBev}: Proportion of commercial service light truck travel powered by battery electric powertrainss
\end{itemize}

Here is a snapshot of the file:

\begin{tabular}{l|c|c|c|c|c|c|c}
\hline
Geo & Year & ComSvcAutoPropIcev & ComSvcAutoPropHev & ComSvcAutoPropBev & ComSvcLtTrkPropIcev & ComSvcLtTrkPropHev & ComSvcLtTrkPropBev\\
\hline
RVMPO & 2010 & 0.990 & 0.010 & 0.000 & 1.0000 & 0.0000 & 0.0000\\
\hline
RVMPO & 2038 & 0.441 & 0.528 & 0.031 & 0.5335 & 0.4572 & 0.0093\\
\hline
\end{tabular}

\hypertarget{verspm-region_hh_driver_adjust_prop.csv}{%
\subsection{region\_hh\_driver\_adjust\_prop.csv}\label{verspm-region_hh_driver_adjust_prop.csv}}

This file is optional and can be used to adjust the estimate of household drivers by age cohort. The file specifies the relative driver licensing rate relative to the model estimation data year in order to account for observed or projected changes in licensing rates.

\begin{itemize}
\tightlist
\item
  \textbf{Drv15to19AdjProp}: Target proportion of unadjusted model number of drivers 15 to 19 years old (\texttt{1} = no adjustment)
\item
  \textbf{Drv20to29AdjProp}: Target proportion of unadjusted model number of drivers 20 to 29 years old (\texttt{1} = no adjustment)
\item
  \textbf{Drv30to54AdjProp}: Target proportion of unadjusted model number of drivers 30 to 54 years old (\texttt{1} = no adjustment)
\item
  \textbf{Drv55to64AdjProp}: Target proportion of unadjusted model number of drivers 55 to 64 years old (\texttt{1} = no adjustment)
\item
  \textbf{Drv65PlusAdjProp}: Target proportion of unadjusted model number of drivers 65 or older (\texttt{1} = no adjustment)
\end{itemize}

Here is a snapshot of the file:

\begin{tabular}{l|c|c|c|c|c}
\hline
Year & DrvPerPrsn15to19 & Drv20to29AdjProp & Drv30to54AdjProp & Drv55to64AdjProp & Drv65PlusAdjProp\\
\hline
2010 & 0.8174609 & 0.9466447 & 0.9466447 & 0.9900000 & 0.9349951\\
\hline
2038 & 0.9091840 & 0.9091840 & 0.9091840 & 0.9508236 & 0.8979954\\
\hline
\end{tabular}

\hypertarget{verspm-region_hvytrk_powertrain_prop.csv}{%
\subsection{region\_hvytrk\_powertrain\_prop.csv}\label{verspm-region_hvytrk_powertrain_prop.csv}}

This input file is OPTIONAL. It is only needed if the user wants to modify the powertrain proportion of heavy duty trucks.

\begin{itemize}
\tightlist
\item
  \textbf{HvyTrkPropIcev}: Proportion of heavy truck travel powered by internal combustion engine powertrains
\item
  \textbf{HvyTrkPropHev}: Proportion of heavy truck travel powered by hybrid electric powertrains
\item
  \textbf{HvyTrkPropBev}: Proportion of heavy truck travel powered by battery electric powertrains
\end{itemize}

Here is a snapshot of the file:

\begin{tabular}{l|c|c|c|c}
\hline
Geo & Year & HvyTrkPropIcev & HvyTrkPropHev & HvyTrkPropBev\\
\hline
RVMPO & 2010 & 1.0 & 0.0 & 0.0\\
\hline
RVMPO & 2038 & 0.4 & 0.4 & 0.2\\
\hline
\end{tabular}

\hypertarget{verspm-region_prop_externalities_paid.csv}{%
\subsection{region\_prop\_externalities\_paid.csv}\label{verspm-region_prop_externalities_paid.csv}}

Proportional external costs for the ragion (This file supplies data for climate change and other social costs.

\begin{itemize}
\tightlist
\item
  \textbf{PropClimateCostPaid}: Proportion of climate change costs paid by users (i.e.~ratio of carbon taxes to climate change costs
\item
  \textbf{PropOtherExtCostPaid}: Proportion of other social costs paid by users
\end{itemize}

Here is a snapshot of the file:

\begin{longtable}[]{@{}lll@{}}
\toprule()
Year & PropClimateCostPaid & PropOtherExtCostPaid \\
\midrule()
\endhead
2038 & 1 & 0.5 \\
2010 & 0 & 0 \\
\bottomrule()
\end{longtable}

\hypertarget{verspm-region_road_cost.csv}{%
\subsection{region\_road\_cost.csv (TO DO)}\label{verspm-region_road_cost.csv}}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 12\tabcolsep) * \real{0.0348}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 12\tabcolsep) * \real{0.1739}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 12\tabcolsep) * \real{0.2087}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 12\tabcolsep) * \real{0.1565}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 12\tabcolsep) * \real{0.1739}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 12\tabcolsep) * \real{0.1739}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 12\tabcolsep) * \real{0.0783}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Year
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
RoadBaseModCost.2005
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
RoadPresOpMaintCost.2005
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
RoadOtherCost.2005
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
FwyLnMiCost.2005.1e3
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
ArtLnMiCost.2005.1e3
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
HvyTrkPCE
\end{minipage} \\
\midrule()
\endhead
2010 & 0.004 & 0.01 & 0.015 & 4900 & 1800 & 3 \\
2038 & 0.004 & 0.01 & 0.015 & 4900 & 1800 & 3 \\
\bottomrule()
\end{longtable}

\hypertarget{vestate-inputs}{%
\section{VE-State Input Files}\label{vestate-inputs}}

\begin{itemize}
\item
  \protect\hyperlink{vestate-azone_carsvc_characteristics.csv}{\textbf{azone\_carsvc\_characteristics.csv}} This file specifies the different characteristics for high and low car service level and is used in the \protect\hyperlink{vestate-createvehicletable}{CreateVehicleTable} and \protect\hyperlink{vestate-assignvehicleage}{AssignVehicleAge} modules.
\item
  \protect\hyperlink{vestate-azone_charging_availability.csv}{\textbf{azone\_charging\_availability.csv}} This file has data on proportion of different household types who has EV charging available and is used in the \protect\hyperlink{vestate-assignhhvehiclepowertrain}{AssignHHVehiclePowertrain} module.
\item
  \protect\hyperlink{vestate-azone_electricity_carbon_intensity.csv}{\textbf{azone\_electricity\_carbon\_intensity.csv}} This file is used to specify the carbon intensity of electricity and is optional (only needed if user wants to modify the values). The file is used in \protect\hyperlink{vestate-initialize-vepowertrainsandfuels}{Initialize (VEPowertrainsAndFuels)} and \protect\hyperlink{vestate-calculatecarbonintensity}{CalculateCarbonIntensity} modules.
\item
  \href{azone_fuel_power_cost.csv}{\textbf{azone\_fuel\_power\_cost.csv}} This file supplies data for retail cost of fuel and electricity and is used in the \protect\hyperlink{vestate-calculatevehicleoperatingcost}{CalculateVehicleOperatingCost} module.
\item
  \href{azone_gq_pop_by_age.csv}{\textbf{azone\_gq\_pop\_by\_age.csv}} This file contains group quarters population estimates/forecasts by age and is used in the \protect\hyperlink{vestate-createhouseholds}{CreateHouseholds} module.
\item
  \protect\hyperlink{vestate-azone_gq_pop-prop_by_area-type.csv}{\textbf{azone\_gq\_pop-prop\_by\_area-type.csv}} This file provides the proportions for groupquarters in different area types and is used in the \protect\hyperlink{vestate-initialize}{Initialize} module.
\item
  \protect\hyperlink{vestate-azone_hh_loc_type_prop.csv}{\textbf{azone\_hh\_loc\_type\_prop.csv}} This file provides the proportions for households residing in the metropolitan, towns and rural part of the Azone and is used in the \protect\hyperlink{vestate-initialize}{Initialize} module.
\item
  \protect\hyperlink{vestate-azone_hh_pop_by_age.csv}{\textbf{azone\_hh\_pop\_by\_age.csv}} This file contains population estimates/forecasts by age and is used in the \protect\hyperlink{vestate-createhouseholds}{CreateHouseholds} module.
\item
  \protect\hyperlink{vestate-azone_hh_veh_mean_age.csv}{\textbf{azone\_hh\_veh\_mean\_age.csv}} This file provides inputs for mean auto age and mean light truck age and is used in the \protect\hyperlink{vestate-assignvehicleage}{AssignVehicleAge} module.
\item
  \protect\hyperlink{vestate-azone_hh_veh_own_taxes.csv}{\textbf{azone\_hh\_veh\_own\_taxes.csv}} This file provides inputs for flat fees/taxes (i.e.~annual cost per vehicle) and ad valorem taxes (i.e.~percentage of vehicle value paid in taxes). The file is used in
  \protect\hyperlink{vestate-calculatevehicleowncost}{CalculateVehicleOwnCost} module.
\item
  \protect\hyperlink{vestate-azone_hhsize_targets.csv}{\textbf{azone\_hhsize\_targets.csv}} This file contains the household specific targets and is used in \protect\hyperlink{vestate-createhouseholds}{CreateHouseholds} module.\\
\item
  \protect\hyperlink{vestate-vestate-azone_loc_type_land_area.csv}{\textbf{azone\_loc\_type\_land\_area.csv}} This file provides land area data for different area types and is used in \protect\hyperlink{vestate-initialize}{Initialize} module.
\item
  \protect\hyperlink{vestate-azone_lttrk_prop.csv}{\textbf{azone\_lttrk\_prop.csv}} This file specifies the light truck proportion of the vehicle fleet and is used in \protect\hyperlink{vestate-assignvehicletype}{AssignVehicleType} module.
\item
  \protect\hyperlink{vestate-azone_payd_insurance_prop.csv}{\textbf{azone\_payd\_insurance\_prop.csv}} This file provides inputs on the proportion of households having PAYD (pay-as-you-drive) insurance and is used in the \protect\hyperlink{vestate-calculatevehicleowncost}{CalculateVehicleOwnCost} module.
\item
  \protect\hyperlink{vestate-azone_per_cap_inc.csv}{\textbf{azone\_per\_cap\_inc.csv}} This file contains information on regional average per capita household and group quarters income in year 2010 dollars and is used in the \protect\hyperlink{vestate-predictincome}{PredictIncome} module.
\item
  \protect\hyperlink{vestate-azone_prop_sov_dvmt_diverted.csv}{\textbf{azone\_prop\_sov\_dvmt\_diverted.csv}} This file provides inputs for a goal for diverting a portion of SOV travel within a 20-mile tour distance and is used in the \protect\hyperlink{vestate-divertsovtravel}{DivertSovTravel} module.
\item
  \protect\hyperlink{vestate-azone_relative_employment.csv}{\textbf{azone\_relative\_employment.csv}} This file contains ratio of workers to persons by age and is used in the \protect\hyperlink{vestate-predictworkers}{PredictWorkers} module.
\item
  \protect\hyperlink{vestate-azone_veh_use_taxes.csv}{\textbf{azone\_veh\_use\_taxes.csv}} This file supplies data for vehicle related taxes and is used in the \protect\hyperlink{vestate-calculatevehicleoperatingcosts}{CalculateVehicleOperatingCost} module.
\item
  \protect\hyperlink{vestate-azone_vehicle_access_times.csv}{\textbf{azone\_vehicle\_access\_times.csv}} This file supplies data for vehicle access and egress time and is used in the \protect\hyperlink{vestate-calculatevehicleoperatingcost}{CalculateVehicleOperatingCost} module.
\item
  \protect\hyperlink{vestate-azone_wkr_loc_type_prop}{\textbf{azone\_wkr\_loc\_type\_prop}} This file provides the proportions for workers residing in Azone who works in the metropolitan, towns and rural part of the Azone and is used in \protect\hyperlink{vestate-initialize}{Initialize} module.
\item
  \protect\hyperlink{vestate-marea_base_year_dvmt.csv}{\textbf{marea\_base\_year\_dvmt.csv}} This file is used to specify to adjust the DVMT growth factors and is optional (only needed if user wants to modify the values). The file is used in the \protect\hyperlink{vestate-initialize-vetravelperformance}{Initialize (VETravelPerformance)}, \protect\hyperlink{vestate-calculatebaseroaddvmt}{CalculateBaseRoadDvmt} and \protect\hyperlink{vestate-calculatefutureroaddvmt}{CalculateFutureRoadDvmt} modules.
\item
  \protect\hyperlink{vestate-marea_carsvc_availability.csv}{\textbf{marea\_carsvc\_availability.csv}} This file has the data for activity proportions which are served by car services and is used in the \protect\hyperlink{vestate-assigncarsvcavailability}{Initialize (AssignCarSvcAvailability)}
\item
  \protect\hyperlink{vestate-marea_congestion_charges.csv}{\textbf{marea\_congestion\_charges.csv}} This file is used to specify the charges of vehicle travel for different congestion levels and is optional. The file is used in the \protect\hyperlink{vestate-initialize-vetravelperformance}{Initialize (VETravelPerformance)} and \protect\hyperlink{vestate-calculateroadperformance}{CalculateRoadPerformance} modules.
\item
  \protect\hyperlink{vestate-marea_dvmt_split_by_road_class.csv}{\textbf{marea\_dvmt\_split\_by\_road\_class.csv}} This file is used to specify the dvmt split for different road classes and is optional. The file is used in the \protect\hyperlink{vestate-initialize-vetravelperformance}{Initialize (VETravelPerformance)} and \protect\hyperlink{vestate-calculatebaseroaddvmt}{CalculateBaseRoadDvmt} modules.
\item
  \protect\hyperlink{vestate-marea_d3bpo4_adj.csv}{\textbf{marea\_d3bpo4\_adj.csv}} This file provides the D3bpo4 value for urban, town and rural areas from the EPA 2010 Smart Location Database and is used in the \protect\hyperlink{vestate-simulate4dmeasures}{Simulate4DMeasures}
\item
  \protect\hyperlink{vestate-marea_lane_miles.csv}{\textbf{marea\_lane\_miles.csv}} This file contains inputs on the numbers of freeway lane-miles and arterial lane-miles and is used in the \protect\hyperlink{vestate-assignroadmiles}{AssignRoadMiles} module.
\item
  \protect\hyperlink{vestate-marea_mix_targets.csv}{\textbf{marea\_mix\_targets.csv}} This file represents Marea target for proportion of households located in mixed-use neighborhoods (or NA if no target) and is used in the \protect\hyperlink{vestate-simulateurbanmixmeasure}{SimulateUrbanMixMeasure} module.
\item
  \protect\hyperlink{vestate-marea_operations_deployment.csv}{\textbf{marea\_operations\_deployment.csv}} This file is used to specify the proportion of dvmt affected by operations for different road classes and is optional. The file is used in the \protect\hyperlink{vestate-initialize-vetravelperformance}{Initialize (VETravelPerformance)} and \protect\hyperlink{vestate-calculateroadperformance}{CalculateRoadPerformance} modules.
\item
  \protect\hyperlink{vestate-marea_parking-avail_by_area-type.csv}{\textbf{marea\_parking-avail\_by\_area-type.csv}} This file has the data for average number of parking spots available to households and is used in the \protect\hyperlink{vestate-assignparkingrestrictions}{AssignParkingRestrictions}
\item
  \protect\hyperlink{vestate-marea_parking-cost_by_area-type.csv}{\textbf{marea\_parking-cost\_by\_area-type.csv}} This file has the data related to parking costs and population proportions paying the parking costs and is used in the \protect\hyperlink{vestate-assignparkingrestrictions}{AssignParkingRestrictions}
\item
  \protect\hyperlink{vestate-marea_speed_smooth_ecodrive.csv}{\textbf{marea\_speed\_smooth\_ecodrive.csv}} This input file supplies information of deployment of speed smoothing and ecodriving by road class and vehicle type and is used in the \protect\hyperlink{calculatempgmpkwhadjustments}{CalculateMpgMpkwhAdjustments} module.
\item
  \protect\hyperlink{vestate-marea_transit_ave_fuel_carbon_intensity.csv}{\textbf{marea\_transit\_ave\_fuel\_carbon\_intensity.csv}} This file is used to specify the average carbon intensity of fuel used by transit and is optional. The file is used in the \protect\hyperlink{vestate-initialize-vetravelperformance}{Initialize (VETravelPerformance)} module.
\item
  \protect\hyperlink{vestate-marea_transit_biofuel_mix.csv}{\textbf{marea\_transit\_biofuel\_mix.csv}} This file is used to specify the biofuel used by transit and is optional. The file is used in the \protect\hyperlink{vestate-initialize-vetravelperformance}{Initialize (VETravelPerformance)} and \protect\hyperlink{vestate-calculatecarbonintensity}{CalculateCarbonIntensity} modules.
\item
  \protect\hyperlink{vestate-marea_transit_fuel.csv}{\textbf{marea\_transit\_fuel.csv}} This file is used to specify the transit fuel proportions and is optional. The file is used in the \protect\hyperlink{vestate-initialize-vetravelperformance}{Initialize (VETravelPerformance)} and \protect\hyperlink{vestate-calculatecarbonintensity}{CalculateCarbonIntensity} modules.
\item
  \protect\hyperlink{vestate-marea_transit_powertrain_prop.csv}{\textbf{marea\_transit\_powertrain\_prop.csv}} This file is used to specify the mixes of transit vehicle powertrains and is optional. The file is used in the \protect\hyperlink{vestate-initialize-vetravelperformance}{Initialize (VETravelPerformance)} and \protect\hyperlink{vestate-calculateptranenergyandemissions}{CalculatePtranEnergyAndEmissions} modules.
\item
  \protect\hyperlink{vestate-marea_transit_service.csv}{\textbf{marea\_transit\_service.csv}} This file contains annual revenue-miles for different transit modes for metropolitan area and is used in the \protect\hyperlink{vestate-assigntransitservice}{AssignTransitService} module.
\item
  \protect\hyperlink{vestate-marea_travel-demand-mgt_by_area-type.csv}{\textbf{marea\_travel-demand-mgt\_by\_area-type.csv}} This file has the data for proportions participating in demand management programs and is used in the \protect\hyperlink{vestate-assigndemandmanagement}{AssignDemandManagement} module.
\item
  \protect\hyperlink{vestate-marea_uza_profile_names.csv}{\textbf{marea\_uza\_profile\_names.csv}} This file provides the name of a specific urbanized area for the urbanized area profile to use in SimBzone creation and is used in the \protect\hyperlink{vestate-initialize}{Initialize} module.
\item
  \protect\hyperlink{vestate-other_ops_effectiveness.csv}{\textbf{other\_ops\_effectiveness.csv}} This file is used to specify the delay effects of operations in different road classes and is optional (only needed if user wants to modify the values). The file is used in the \protect\hyperlink{vestate-initialize-vetravelperformance}{Initialize (VETravelPerformance)} and \protect\hyperlink{vestate-calculateroadperformance}{CalculateRoadPerformance} modules.
\item
  \protect\hyperlink{vestate-region_ave_fuel_carbon_intensity.csv}{\textbf{region\_ave\_fuel\_carbon\_intensity.csv}} This file is used to specify the average carbon density for different vehicle types and is optional (only needed if user wants to modify the values). The file is used in the \protect\hyperlink{vestate-initialize-vetravelperformance}{Initialize (VETravelPerformance)} and \protect\hyperlink{vestate-calculatecarbonintensity}{CalculateCarbonIntensity} modules.
\item
  \protect\hyperlink{vestate-region_base_year_hvytrk_dvmt.csv}{\textbf{region\_base\_year\_hvytrk\_dvmt.csv}} This file is used to specify the heavy truck dvmt for base year and is optional. The file is used in the \protect\hyperlink{vestate-initialize-vetravelperformance}{Initialize (VETravelPerformance)}, \protect\hyperlink{vestate-calculatebaseroaddvmt}{CalculateBaseRoadDvmt} and \protect\hyperlink{vestate-calculatefutureroaddvmt}{CalculateFutureRoadDvmt} modules.
\item
  \protect\hyperlink{vestate-region_carsvc_powertrain_prop.csv}{\textbf{region\_carsvc\_powertrain\_prop.csv}} This file is used to specify the powertrain proportion of car services and is optional. The file is used in the \protect\hyperlink{vestate-initialize-vetravelperformance}{Initialize (VETravelPerformance)}, \protect\hyperlink{vestate-assignhhvehiclepowertrain}{AssignHhVehiclePowertrain} and \protect\hyperlink{vestate-adjusthhvehiclempgmpkwh}{AdjustHhVehicleMpgMpkwh} modules.
\item
  \protect\hyperlink{vestate-region_comsvc_lttrk_prop.csv}{\textbf{region\_comsvc\_lttrk\_prop.csv}} This file supplies data for the light truck proportion of commercial vehicles and is used in the \protect\hyperlink{vestate-calculatecomenergyandemissions}{CalculateComEnergyAndEmissions} module.
\item
  \protect\hyperlink{vestate-region_comsvc_powertrain_prop.csv}{\textbf{region\_comsvc\_powertrain\_prop.csv}} This file is used to specify the powertrain proportion of commercial vehicles and is optional. The file is used in the \protect\hyperlink{vestate-initialize-vepowertrainsandfuels}{Initialize (VEPowertrainsAndFuels)} and \protect\hyperlink{vestate-calculatecomenergyandemissions}{CalculateComEnergyAndEmissions} modules.
\item
  \protect\hyperlink{vestate-region_comsvc_veh_mean_age.csv}{\textbf{region\_comsvc\_veh\_mean\_age.csv}} This input file contains average age of commercial service vehicles and is used in the \protect\hyperlink{vestate-calculatecomenergyandemissions}{CalculateComEnergyAndEmissions} module.
\item
  \protect\hyperlink{vestate-region_hh_driver_adjust_prop.csv}{\textbf{region\_hh\_driver\_adjust\_prop.csv}} This file specifies the relative driver licensing rate relative to the model estimation data year and is used in the \protect\hyperlink{vestate-assigndrivers}{AssignDrivers} module.
\item
  \protect\hyperlink{vestate-region_hvytrk_powertrain_prop.csv}{\textbf{region\_hvytrk\_powertrain\_prop.csv}} This file is used to specify the powertrain proportion of heavy duty trucks and is optional. The file is used in the \protect\hyperlink{vestate-initialize-vepowertrainsandfuels}{Initialize (VEPowertrainsAndFuels)} and \protect\hyperlink{vestate-calculatecomenergyandemissions}{CalculateComEnergyAndEmissions} modules.
\item
  \protect\hyperlink{vestate-region_prop_externalities_paid.csv}{\textbf{region\_prop\_externalities\_paid.csv}} This file supplies data for climate change and other social costs and is used in the \protect\hyperlink{vestate-calculatevehicleoperatingcost}{CalculateVehicleOperatingCost} module.
\item
  \protect\hyperlink{vestate-region_road_cost.csv}{\textbf{region\_road\_cost.csv}} This file supplies data for different types of road costs and is used in the \protect\hyperlink{vestate-balanceroadcostsandrevenues}{BalanceRoadCostsAndRevenues} module.
\end{itemize}

\hypertarget{vestate-azone_carsvc_characteristics.csv}{%
\subsection{azone\_carsvc\_characteristics.csv}\label{vestate-azone_carsvc_characteristics.csv}}

This file specifies the different characteristics for high and low car service levels

\begin{itemize}
\tightlist
\item
  \textbf{HighCarSvcCost}: Average cost in dollars per mile for travel by high service level car service
\item
  \textbf{LowCarSvcCost}: Average cost in dollars per mile for travel by low service level car service
\item
  \textbf{AveCarSvcVehicleAge}: Average age of car service vehicles in years
\item
  \textbf{LtTrkCarSvcSubProp}: The proportion of light-truck owners who would substitute a less-costly car service option for owning their light truck
\item
  \textbf{AutoCarSvcSubProp}: The proportion of automobile owners who would substitute a less-costly car service option for owning their automobile
\end{itemize}

Here is a snapshot of the file:

\hypertarget{vestate-azone_charging_availability.csv}{%
\subsection{azone\_charging\_availability.csv}\label{vestate-azone_charging_availability.csv}}

This input file supplies data on proportion of different household types who has available charging

\begin{itemize}
\tightlist
\item
  \textbf{PropSFChargingAvail}: Proportion of single-family dwellings in Azone that have PEV charging facilties installed or able to be installed
\item
  \textbf{PropMFChargingAvail}: Proportion of multi-family dwelling units in Azone that have PEV charging facilities available
\item
  \textbf{PropGQChargingAvail}: Proportion of group quarters dwelling units in Azone that have PEV charging facilities available
\end{itemize}

Here is a snapshot of the file:

\hypertarget{vestate-azone_electricity_carbon_intensity.csv}{%
\subsection{azone\_electricity\_carbon\_intensity.csv}\label{vestate-azone_electricity_carbon_intensity.csv}}

This input file is OPTIONAL. It is only needed if the user wants to modify the carbon intensity of electricity.

\begin{itemize}
\tightlist
\item
  \textbf{ElectricityCI}: Carbon intensity of electricity at point of consumption (grams CO2e per megajoule)
\end{itemize}

Here is a snapshot of the file:

\hypertarget{vestate-azone_fuel_power_cost.csv}{%
\subsection{azone\_fuel\_power\_cost.csv}\label{vestate-azone_fuel_power_cost.csv}}

This file supplies data for retail cost of fuel and electricity

\begin{itemize}
\tightlist
\item
  \textbf{FuelCost}:Retail cost of fuel per gas gallon equivalent in dollars
\item
  \textbf{PowerCost}: Retail cost of electric power per kilowatt-hour in dollars
\end{itemize}

Here is a snapshot of the file:

\hypertarget{vestate-azone_gq_pop_by_age.csv}{%
\subsection{azone\_gq\_pop\_by\_age.csv}\label{vestate-azone_gq_pop_by_age.csv}}

This file contains group quarters population estimates/forecasts by age for each of the base and future years. The file format includes number of persons within the following six age categories:

\begin{itemize}
\tightlist
\item
  0-14
\item
  15-19
\item
  20-29
\item
  30-54
\item
  55-64
\item
  65 Plus
\end{itemize}

Here is a snapshot of the file:

\hypertarget{vestate-azone_gq_pop-prop_by_area-type.csv}{%
\subsection{azone\_gq\_pop-prop\_by\_area-type.csv}\label{vestate-azone_gq_pop-prop_by_area-type.csv}}

This file provides the proportions for groupquarters in different area types.

\begin{itemize}
\tightlist
\item
  \textbf{MetroLandArea}: Land area (excluding large water bodies and large tracts of undevelopable land) in the metropolitan (i.e.~urbanized) portion of the Azone
\item
  \textbf{TownLandArea}: Land area (excluding large water bodies and large tracts of undevelopable land) in towns (i.e.~urban-like but not urbanized) in the Azone
\item
  \textbf{RuralAveDensity}: Proportion of workers residing in the Azone who work at jobs in the metropolitan (i.e.~urbanized) area associated with the Azone
\end{itemize}

Here is a snapshot of the file:

\hypertarget{vestate-azone_hh_loc_type_prop.csv}{%
\subsection{azone\_hh\_loc\_type\_prop.csv}\label{vestate-azone_hh_loc_type_prop.csv}}

This file provides the proportions for households residing in the metropolitan, towns and rural part of the Azone

\begin{itemize}
\tightlist
\item
  \textbf{PropMetroHh}: Proportion of households residing in the metropolitan (i.e.~urbanized) part of the Azone
\item
  \textbf{PropTownHh}: Proportion of households residing in towns (i.e.~urban-like but not urbanized) in the Azone
\item
  \textbf{PropRuralHh}: Proportion of households residing in rural (i.e.~not urbanized or town) parts of the Azone
\end{itemize}

Here is a snapshot of the file:

\hypertarget{vestate-azone_hh_pop_by_age.csv}{%
\subsection{azone\_hh\_pop\_by\_age.csv}\label{vestate-azone_hh_pop_by_age.csv}}

This file contains population estimates/forecasts by age for each of the base and future years. The file format includes number of persons within six age groups:

\begin{itemize}
\tightlist
\item
  0-14
\item
  15-19
\item
  20-29
\item
  30-54
\item
  55-64
\item
  65 Plus
\end{itemize}

Here is a snapshot of the file:

\hypertarget{vestate-azone_hh_veh_mean_age.csv}{%
\subsection{azone\_hh\_veh\_mean\_age.csv}\label{vestate-azone_hh_veh_mean_age.csv}}

This file provides inputs for mean auto age and mean light truck age by Azone.

\begin{itemize}
\tightlist
\item
  \textbf{AutoMeanAge}: Mean age of automobiles owned or leased by households.
\item
  \textbf{LtTrkMeanAge}: Mean age of light trucks owned or leased by households.
\end{itemize}

Here is a snapshot of the file:

\hypertarget{vestate-azone_hh_veh_own_taxes.csv}{%
\subsection{azone\_hh\_veh\_own\_taxes.csv}\label{vestate-azone_hh_veh_own_taxes.csv}}

This file provides inputs for flat fees/taxes (i.e.~annual cost per vehicle) and ad valorem taxes (i.e.~percentage of vehicle value paid in taxes).

\begin{itemize}
\tightlist
\item
  \textbf{VehOwnFlatRateFee}: Annual flat rate tax per vehicle in dollars
\item
  \textbf{VehOwnAdValoremTax}: Annual proportion of vehicle value paid in taxes
\end{itemize}

Here is a snapshot of the file:

\hypertarget{vestate-azone_hhsize_targets.csv}{%
\subsection{azone\_hhsize\_targets.csv}\label{vestate-azone_hhsize_targets.csv}}

Rhis file contains the household-specific targets for the population synthesizer. This file contains two attributes:

\begin{itemize}
\tightlist
\item
  \textbf{AveHhSize}: Average household size for non-group quarters households
\item
  \textbf{Prop1PerHh}: Proportion of non-group quarters households having only one person
\end{itemize}

Here is a snapshot of the file:

\hypertarget{vestate-azone_loc_type_land_area.csv}{%
\subsection{azone\_loc\_type\_land\_area.csv}\label{vestate-azone_loc_type_land_area.csv}}

This file provides land area data for different area types

\begin{itemize}
\tightlist
\item
  \textbf{MetroLandArea}: Land area (excluding large water bodies and large tracts of undevelopable land) in the metropolitan (i.e.~urbanized) portion of the Azone
\item
  \textbf{TownLandArea}: Land area (excluding large water bodies and large tracts of undevelopable land) in towns (i.e.~urban-like but not urbanized) in the Azone
\item
  \textbf{RuralAveDensity}: Average activity density (households and jobs per acre) of rural (i.e.~not metropolitan or town) portions of the Azone not including large waterbodies or large tracts of agricultural lands, forest lands, or otherwise protected lands
\end{itemize}

Here is a snapshot of the file:

\hypertarget{vestate-azone_lttrk_prop.csv}{%
\subsection{azone\_lttrk\_prop.csv}\label{vestate-azone_lttrk_prop.csv}}

This file specifies the light truck proportion of the vehicle fleet.

\begin{itemize}
\tightlist
\item
  \textbf{LtTrkProp}: Proportion of household vehicles that are light trucks (pickup, SUV, van).
\end{itemize}

Here is a snapshot of the file:

\hypertarget{vestate-}{%
\subsection{azone\_payd\_insurance\_prop.csv}\label{vestate-}}

This file provides inputs on the proportion of households having PAYD insurance.

\begin{itemize}
\tightlist
\item
  \textbf{PaydHhProp}: Proportion of households in the Azone who have pay-as-you-drive insurance for their vehicles
\end{itemize}

Here is a snapshot of the file:

\hypertarget{vestate-azone_per_cap_inc.csv}{%
\subsection{azone\_per\_cap\_inc.csv}\label{vestate-azone_per_cap_inc.csv}}

This file contains information on regional average per capita household (\texttt{HHIncomePC}) and group quarters (\texttt{GQIncomePC}) income by forecast year in year 2010 dollars. The data can be obtained from the U.S. Department of Commerce Bureau of Economic Analysis for the current year or from regional or state sources for forecast years. In order to use current year dollars just replace 2010 in column labels with current year. For example, if the data is obtained in year 2015 dollars then the column labels in the file shown below will become \texttt{HHIncomePC.2015} and \texttt{GQIncomePC.2015}.

Here is a snapshot of the file:

\hypertarget{vestate-azone_prop_sov_dvmt_diverted.csv}{%
\subsection{azone\_prop\_sov\_dvmt\_diverted.csv}\label{vestate-azone_prop_sov_dvmt_diverted.csv}}

This file provides inputs for a goal for diverting a portion of SOV travel within a 20-mile tour distance (round trip distance).

\begin{itemize}
\tightlist
\item
  \textbf{PropSovDvmtDiverted}: Goals for the proportion of household DVMT in single occupant vehicle tours with round-trip distances of 20 miles or less be diverted to bicycling or other slow speed modes of travel
\end{itemize}

Here is a snapshot of the file:

\hypertarget{vestate-azone_relative_employment.csv}{%
\subsection{azone\_relative\_employment.csv}\label{vestate-azone_relative_employment.csv}}

This file contains the ratio of workers to persons by age cohort in the model year relative to the model estimation data year. This file contains five age cohorts:

\begin{itemize}
\tightlist
\item
  \textbf{RelEmp15to19}: Ratio of workers to persons age 15 to 19 in model year versus in estimation data year
\item
  \textbf{RelEmp20to29}: Ratio of workers to persons age 20 to 29 in model year versus in estimation data year
\item
  \textbf{RelEmp30to54}: Ratio of workers to persons age 30 to 54 in model year versus in estimation data year
\item
  \textbf{RelEmp55to64}: Ratio of workers to persons age 55 to 64 in model year versus in estimation data year
\item
  \textbf{RelEmp65Plus}: Ratio of workers to persons age 65 or older in model year versus in estimation data year
\end{itemize}

Here is a snapshot of the file:

\hypertarget{vestate-azone_veh_use_taxes.csv}{%
\subsection{azone\_veh\_use\_taxes.csv}\label{vestate-azone_veh_use_taxes.csv}}

This file supplies data for vehicle related taxes

\begin{itemize}
\tightlist
\item
  \textbf{FuelTax}:Tax per gas gallon equivalent of fuel in dollars
\item
  \textbf{VmtTax}: Tax per gas gallon equivalent of fuel in dollars
\item
  \textbf{PevSurchgTaxProp}: Proportion of equivalent gas tax per mile paid by hydrocarbon fuel consuming vehicles to be charged to plug-in electric vehicles per mile of travel powered by electricity
\end{itemize}

Here is a snapshot of the file:

\hypertarget{vestate-azone_vehicle_access_times.csv}{%
\subsection{azone\_vehicle\_access\_times.csv}\label{vestate-azone_vehicle_access_times.csv}}

This file supplies data for vehicle access and eagress time.

\begin{itemize}
\tightlist
\item
  \textbf{OwnedVehAccessTime}:Average amount of time in minutes required for access to and egress from a household-owned vehicle for a trip
\item
  \textbf{HighCarSvcAccessTime}: Average amount of time in minutes required for access to and egress from a high service level car service for a trip
\item
  \textbf{LowCarSvcAccessTime}: Average amount of time in minutes required for access to and egress from a low service level car service for a trip
\end{itemize}

Here is a snapshot of the file:

\hypertarget{vestate-azone_wkr_loc_type_prop}{%
\subsection{azone\_wkr\_loc\_type\_prop.csv}\label{vestate-azone_wkr_loc_type_prop}}

This file provides the proportions for workers residing in Azone who works in the metropolitan, towns and rural part of the Azone

\begin{itemize}
\tightlist
\item
  \textbf{PropWkrInMetroJobs}: Proportion of workers residing in the Azone who work at jobs in the metropolitan (i.e.~urbanized) area associated with the Azone
\item
  \textbf{PropWkrInTownJobs}: Proportion of workers residing in the Azone who work at jobs in towns (i.e.~urban-like but not urbanized) in the Azone
\item
  \textbf{PropWkrInRuralJobs}: Proportion of workers residing in the Azone who work at jobs in rural (i.e.~not urbanized or town) parts of the Azone
\item
  \textbf{PropMetroJobs}: Proportion of the jobs of the metropolitan area that the Azone is associated with that are located in the metropolitan portion of the Azone
\end{itemize}

Here is a snapshot of the file:

\hypertarget{vestate-marea_base_year_dvmt.csv}{%
\subsection{marea\_base\_year\_dvmt.csv}\label{vestate-marea_base_year_dvmt.csv}}

This input file is OPTIONAL. It is only needed if the user wants to modify the adjust dvmt growth factors from base year in by Marea

\begin{itemize}
\tightlist
\item
  \textbf{ComSvcDvmtGrowthBasis}: Factor used to grow commercial service vehicle DVMT in Marea from base year value
\item
  \textbf{HvyTrkDvmtGrowthBasis}: Factor used to grow heavy truck DVMT from base year value
\item
  \textbf{UrbanLdvDvmt}: Average daily vehicle miles of travel on roadways in the urbanized portion of the Marea by light-duty vehicles during the base year
\item
  \textbf{UrbanHvyTrkDvmt}: Average daily vehicle miles of travel on roadways in the urbanized portion of the Marea by heavy trucks during he base year
\end{itemize}

Here is a snapshot of the file:

\hypertarget{vestate-marea_carsvc_availability.csv}{%
\subsection{marea\_carsvc\_availability.csv}\label{vestate-marea_carsvc_availability.csv}}

This file has the data for acitivity proportions which are served by car services

\begin{itemize}
\tightlist
\item
  \textbf{CenterPropHighCarSvc}: Proportion of activity in center area type that is served by high level car service (i.e.~service competitive with household owned car)
\item
  \textbf{InnerPropHighCarSvc}: Proportion of activity in inner area type that is served by high level car service (i.e.~service competitive with household owned car)
\item
  \textbf{OuterPropHighCarSvc}: Proportion of activity in outer area type that is served by high level car service (i.e.~service competitive with household owned car)
\item
  \textbf{FringePropHighCarSvc}: Proportion of activity in fringe area type that is served by high level car service (i.e.~service competitive with household owned car)
\end{itemize}

Here is a snapshot of the file:

\hypertarget{vestate-marea_congestion_charges.csv}{%
\subsection{marea\_congestion\_charges.csv}\label{vestate-marea_congestion_charges.csv}}

This input file is OPTIONAL. It is only needed if the user wants to modify the charges of vehicle travel for different congestion levels

\begin{itemize}
\tightlist
\item
  \textbf{FwyNoneCongChg}: Charge per mile (U.S. dollars) of vehicle travel on freeways during periods of no congestion
\item
  \textbf{FwyModCongChg}: Charge per mile (U.S. dollars) of vehicle travel on freeways during periods of moderate congestion
\item
  \textbf{FwyHvyCongChg}: Charge per mile (U.S. dollars) of vehicle travel on freeways during periods of heavy congestion
\item
  \textbf{FwySevCongChg}: Charge per mile (U.S. dollars) of vehicle travel on freeways during periods of severe congestion
\item
  \textbf{FwyExtCongChg}: Charge per mile (U.S. dollars) of vehicle travel on freeways during periods of extreme congestion
\item
  \textbf{ArtNoneCongChg}: Charge per mile (U.S. dollars) of vehicle travel on arterials during periods of no congestion
\item
  \textbf{ArtModCongChg}: Charge per mile (U.S. dollars) of vehicle travel on arterials during periods of moderate congestion
\item
  \textbf{ArtHvyCongChg}: Charge per mile (U.S. dollars) of vehicle travel on arterials during periods of heavy congestion
\item
  \textbf{ArtSevCongChg}: Charge per mile (U.S. dollars) of vehicle travel on arterials during periods of severe congestion
\item
  \textbf{ArtExtCongChg}: Charge per mile (U.S. dollars) of vehicle travel on arterials during periods of extreme congestion
\end{itemize}

Here is a snapshot of the file:

\hypertarget{vestate-marea_dvmt_split_by_road_class.csv}{%
\subsection{marea\_dvmt\_split\_by\_road\_class.csv}\label{vestate-marea_dvmt_split_by_road_class.csv}}

This input file is OPTIONAL. It is only needed if the user wants to modify the dvmt split for different road classes.

\begin{itemize}
\tightlist
\item
  \textbf{LdvFwyArtDvmtProp}: Proportion of light-duty daily vehicle miles of travel in the urbanized portion of the Marea occurring on freeway or arterial roadways
\item
  \textbf{LdvOthDvmtProp}: Proportion of light-duty daily vehicle miles of travel in the urbanized portion of the Marea occurring on other roadways
\item
  \textbf{HvyTrkFwyDvmtProp}: Proportion of heavy truck daily vehicle miles of travel in the urbanized portion of the Marea occurring on freeways
\item
  \textbf{HvyTrkArtDvmtProp}: Proportion of heavy truck daily vehicle miles of travel in the urbanized portion of the Marea occurring on arterial roadways
\item
  \textbf{HvyTrkOthDvmtProp}: Proportion of heavy truck daily vehicle miles of travel in the urbanized portion of the Marea occurring on other roadways
\item
  \textbf{BusFwyDvmtProp}: Proportion of bus daily vehicle miles of travel in the urbanized portion of the Marea occurring on freeways
\item
  \textbf{BusArtDvmtProp}: Proportion of bus daily vehicle miles of travel in the urbanized portion of the Marea occurring on arterial roadways
\item
  \textbf{BusOthDvmtProp}: Proportion of bus daily vehicle miles of travel in the urbanized portion of the Marea occuring on other roadways
\end{itemize}

Here is a snapshot of the file:

\hypertarget{vestate-marea_d3bpo4_adj.csv}{%
\subsection{marea\_d3bpo4\_adj.csv}\label{vestate-marea_d3bpo4_adj.csv}}

This file provides the D3bpo4 value for urban, town and rural areas from the EPA 2010 Smart Location Database

\begin{itemize}
\tightlist
\item
  \textbf{UrbanD3bpo4Adj}: Proportion of base urban D3bpo4 value as tabulated from the EPA 2010 Smart Location Database for the urbanized portion of the marea
\item
  \textbf{TownD3bpo4Adj}: Proportion of base town D3bpo4 value as tabulated from the EPA 2010 Smart Location Database for towns
\item
  \textbf{RuralD3bpo4Adj}: Proportion of base town D3bpo4 value as tabulated from the EPA 2010 Smart Location Database for rural areas
\end{itemize}

Here is a snapshot of the file:

\hypertarget{vestate-marea_lane_miles.csv}{%
\subsection{marea\_lane\_miles.csv}\label{vestate-marea_lane_miles.csv}}

This file contains inputs on the numbers of freeway lane-miles and arterial lane-miles by \texttt{Marea} and year.

\begin{itemize}
\tightlist
\item
  \textbf{FwyLaneMi}: Lane-miles of roadways functionally classified as freeways or expressways in the urbanized portion of the metropolitan area
\item
  \textbf{ArtLaneMi}: Lane-miles of roadways functionally classified as arterials (but not freeways or expressways) in the urbanized portion of the metropolitan area
\end{itemize}

Here is a snapshot of the file:

\hypertarget{vestate-marea_mix_targets.csv}{%
\subsection{marea\_mix\_targets.csv}\label{vestate-marea_mix_targets.csv}}

This file represents Marea target for proportion of households located in mixed-use neighborhoods (or NA if no target)

\begin{itemize}
\tightlist
\item
  \textbf{UrbanMixProp}: Marea target for proportion of households located in mixed-use neighborhoods (or NA if no target)
\end{itemize}

Here is a snapshot of the file:

\hypertarget{vestate-marea_operations_deployment.csv}{%
\subsection{marea\_operations\_deployment.csv}\label{vestate-marea_operations_deployment.csv}}

This input file is OPTIONAL. It is only needed if the user wants to modify the proportion of dvmt affected by operations for different road classes.

\begin{itemize}
\tightlist
\item
  \textbf{RampMeterDeployProp}: Proportion of freeway DVMT affected by ramp metering deployment
\item
  \textbf{IncidentMgtDeployProp}: Proportion of freeway DVMT affected by incident management deployment
\item
  \textbf{SignalCoordDeployProp}: Proportion of arterial DVMT affected by signal coordination deployment
\item
  \textbf{AccessMgtDeployProp}: Proportion of arterial DVMT affected by access management deployment
\item
  \textbf{OtherFwyOpsDeployProp}: Proportion of freeway DVMT affected by deployment of other user-defined freeway operations measures
\item
  \textbf{OtherArtOpsDeployProp}: Proportion of arterial DVMT affected by deployment of other user-defined arterial operations measures
\end{itemize}

Here is a snapshot of the file:

\hypertarget{vestate-marea_parking-avail_by_area-type.csv}{%
\subsection{marea\_parking-avail\_by\_area-type.csv}\label{vestate-marea_parking-avail_by_area-type.csv}}

This file has the data for avereage number of parkings available to households

\begin{itemize}
\tightlist
\item
  \textbf{CenterPkgSpacesPerSFDU}: Average number of free parking spaces available to residents of single-family dwelling units in center area type
\item
  \textbf{InnerPkgSpacesPerSFDU}: Average number of free parking spaces available to residents of single-family dwelling units in inner area type
\item
  \textbf{OuterPkgSpacesPerSFDU}: Average number of free parking spaces available to residents of single-family dwelling units in outer area type
\item
  \textbf{CenterPkgSpacesPerMFDU}: Average number of free parking spaces available to residents of multifamily dwelling units in center area type
\item
  \textbf{InnerPkgSpacesPerMFDU}: Average number of free parking spaces available to residents of multifamily dwelling units in inner area type
\item
  \textbf{OuterPkgSpacesPerMFDU}: Average number of free parking spaces available to residents of multifamily dwelling units in outer area type
\item
  \textbf{CenterPkgSpacesPerGQ}: Average number of free parking spaces available to group quarters residents in center area type
\item
  \textbf{InnerPkgSpacesPerGQ}: Average number of free parking spaces available to group quarters residents in inner area type
\item
  \textbf{OuterPkgSpacesPerGQ}: Average number of free parking spaces available to group quarters residents in outer area type
\end{itemize}

Here is a snapshot of the file:

\hypertarget{vestate-marea_parking-cost_by_area-type.csv}{%
\subsection{marea\_parking-cost\_by\_area-type.csv}\label{vestate-marea_parking-cost_by_area-type.csv}}

This file has the data related to parking costs and population proportions paying the parking costs

\begin{itemize}
\tightlist
\item
  \textbf{CenterPropWkrPay}: Proportion of workers who pay for parking in center area type
\item
  \textbf{InnerPropWkrPay}: Proportion of workers who pay for parking in inner area type
\item
  \textbf{OuterPropWkrPay}: Proportion of workers who pay for parking in outer area type
\item
  \textbf{CenterPropCashOut}: Proportions of workers paying for parking in a cash-out-buy-back program in center area type
\item
  \textbf{InnerPropCashOut}: Proportions of workers paying for parking in a cash-out-buy-back program in inner area type
\item
  \textbf{OuterPropCashOut}: Proportions of workers paying for parking in a cash-out-buy-back program in outer area type
\item
  \textbf{CenterPkgCost}: Average daily cost for long-term parking (e.g.~paid on monthly basis) in center area type
\item
  \textbf{InnerPkgCost}: Average daily cost for long-term parking (e.g.~paid on monthly basis) in inner area type
\item
  \textbf{OuterPkgCost}: Average daily cost for long-term parking (e.g.~paid on monthly basis) in outer area type
\end{itemize}

Here is a snapshot of the file:

\hypertarget{vestate-marea_speed_smooth_ecodrive.csv}{%
\subsection{marea\_speed\_smooth\_ecodrive.csv}\label{vestate-marea_speed_smooth_ecodrive.csv}}

This input file supplies information of deployment of speed smoothing and ecodriving by road class and vehicle type

\begin{itemize}
\tightlist
\item
  \textbf{FwySmooth}:Fractional deployment of speed smoothing traffic management on freeways, where 0 is no deployment and 1 is the full potential fuel savings
\item
  \textbf{ArtSmooth}: Fractional deployment of speed smoothing traffic management on arterials, where 0 is no deployment and 1 is the full potential fuel savings
\item
  \textbf{LdvEcoDrive}: Eco-driving penetration for light-duty vehicles; the fraction of vehicles from 0 to 1
\item
  \textbf{HvyTrkEcoDrive}: Eco-driving penetration for heavy-duty vehicles; the fraction of vehicles from 0 to 1
\end{itemize}

Here is a snapshot of the file:

\hypertarget{vestate-marea_transit_ave_fuel_carbon_intensity.csv}{%
\subsection{marea\_transit\_ave\_fuel\_carbon\_intensity.csv}\label{vestate-marea_transit_ave_fuel_carbon_intensity.csv}}

This input file is OPTIONAL. It is only needed if the user wants to modify the average carbon intensity of fuel used by transit.

\begin{itemize}
\tightlist
\item
  \textbf{TransitVanFuelCI}: Average carbon intensity of fuel used by transit vans (grams CO2e per megajoule)
\item
  \textbf{TransitBusFuelCI}: Average carbon intensity of fuel used by transit buses (grams CO2e per megajoule)
\item
  \textbf{TransitRailFuelCI}: Average carbon intensity of fuel used by transit rail vehicles (grams CO2e per megajoule)
\end{itemize}

Here is a snapshot of the file:

\hypertarget{vestate-marea_transit_biofuel_mix.csv}{%
\subsection{marea\_transit\_biofuel\_mix.csv}\label{vestate-marea_transit_biofuel_mix.csv}}

This input file is OPTIONAL. It is only needed if the user wants to modify the biofuel used by transit services.

\begin{itemize}
\tightlist
\item
  \textbf{TransitEthanolPropGasoline}: Ethanol proportion of gasoline used by transit vehicles
\item
  \textbf{TransitBiodieselPropDiesel}: Biodiesel proportion of diesel used by transit vehicles
\item
  \textbf{TransitRngPropCng}: Renewable natural gas proportion of compressed natural gas used by transit vehicles
\end{itemize}

Here is a snapshot of the file:

\hypertarget{vestate-marea_transit_fuel.csv}{%
\subsection{marea\_transit\_fuel.csv}\label{vestate-marea_transit_fuel.csv}}

This input file is OPTIONAL. It is only needed if the user wants to modify the transit fuels proportions.

\begin{itemize}
\tightlist
\item
  \textbf{VanPropDiesel}: Proportion of non-electric transit van travel powered by diesel
\item
  \textbf{VanPropGasoline}: Proportion of non-electric transit van travel powered by gasoline
\item
  \textbf{VanPropCng}: Proportion of non-electric transit van travel powered by compressed natural gas
\item
  \textbf{BusPropDiesel}: Proportion of non-electric transit bus travel powered by diesel
\item
  \textbf{BusPropGasoline}: Proportion of non-electric transit bus travel powered by gasoline
\item
  \textbf{BusPropCng}: Proportion of non-electric transit bus travel powered by compressed natural gas
\item
  \textbf{RailPropDiesel}: Proportion of non-electric transit rail travel powered by diesel
\item
  \textbf{RailPropGasoline}: Proportion of non-electric transit rail travel powered by gasoline
\end{itemize}

Here is a snapshot of the file:

\hypertarget{vestate-marea_transit_powertrain_prop.csv}{%
\subsection{marea\_transit\_powertrain\_prop.csv}\label{vestate-marea_transit_powertrain_prop.csv}}

This input file is OPTIONAL. It is only needed if the user wants to modify the mixes of transit vehicle powertrains.

\begin{itemize}
\tightlist
\item
  \textbf{VanPropIcev}: Proportion of transit van travel using internal combustion engine powertrains
\item
  \textbf{VanPropHev}: Proportion of transit van travel using hybrid electric powertrains
\item
  \textbf{VanPropBev}: Proportion of transit van travel using battery electric powertrains
\item
  \textbf{BusPropIcev}: Proportion of transit bus travel using internal combustion engine powertrains
\item
  \textbf{BusPropHev}: Proportion of transit bus travel using hybrid electric powertrains
\item
  \textbf{BusPropBev}: Proportion of transit bus travel using battery electric powertrains
\item
  \textbf{RailPropIcev}: Proportion of transit rail travel using internal combustion engine powertrains
\item
  \textbf{RailPropHev}: Proportion of transit rail travel using hybrid electric powertrains
\item
  \textbf{RailPropEv}: Proportion of transit rail travel using electric powertrains
\end{itemize}

Here is a snapshot of the file:

\hypertarget{vestate-marea_transit_service.csv}{%
\subsection{marea\_transit\_service.csv}\label{vestate-marea_transit_service.csv}}

This file contains annual revenue-miles for different transit modes for metropolitan area.

\textbf{DRRevMi}: Annual revenue-miles of demand-responsive public transit service
\textbf{VPRevMi}: Annual revenue-miles of van-pool and similar public transit service
\textbf{MBRevMi}: Annual revenue-miles of standard bus public transit service
\textbf{RBRevMi}: Annual revenue-miles of rapid-bus and commuter bus public transit service
\textbf{MGRevMi}: Annual revenue-miles of monorail and automated guideway public transit service
\textbf{SRRevMi}: Annual revenue-miles of streetcar and trolleybus public transit service
\textbf{HRRevMi}: Annual revenue-miles of light rail and heavy rail public transit service
\textbf{CRRevMi}: Annual revenue-miles of commuter rail, hybrid rail, cable car, and aerial tramway public transit service

Here is a snapshot of the file:

\hypertarget{vestate-marea_travel-demand-mgt_by_area-type.csv}{%
\subsection{marea\_travel-demand-mgt\_by\_area-type.csv}\label{vestate-marea_travel-demand-mgt_by_area-type.csv}}

This file has the data for proportions participating in demand management programs

\begin{itemize}
\tightlist
\item
  \textbf{CenterEcoProp}: Proportion of workers working in center area type in Marea who participate in strong employee commute options program
\item
  \textbf{InnerEcoProp}: Proportion of workers working in inner area type in Marea who participate in strong employee commute options program
\item
  \textbf{OuterEcoProp}: Proportion of workers working in outer area type in Marea who participate in strong employee commute options program
\item
  \textbf{FringeEcoProp}: Proportion of workers working in fringe area type in Marea who participate in strong employee commute options program
\item
  \textbf{CenterImpProp}: Proportion of households residing in center area type in Marea who participate in strong individualized marketing program
\item
  \textbf{InnerImpProp}: Proportion of households residing in inner area type in Marea who participate in strong individualized marketing program
\item
  \textbf{OuterImpProp}: Proportion of households residing in outer area type in Marea who participate in strong individualized marketing program
\item
  \textbf{FringeImpProp}: Proportion of households residing in fringe area type in Marea who participate in strong individualized marketing program
\end{itemize}

Here is a snapshot of the file:

\hypertarget{vestate-marea_uza_profile_names.csv}{%
\subsection{marea\_uza\_profile\_names.csv}\label{vestate-marea_uza_profile_names.csv}}

This file provides the name of a specific urbanized area for the urbanized area profile to use in SimBzone creation.

\begin{itemize}
\tightlist
\item
  \textbf{UzaProfileName}: Name of a specific urbanized area for the urbanized area profile to use in SimBzone creation or one of the following: small, medium-small, medium, medium-large, large, very-large
\end{itemize}

Here is a snapshot of the file:

\hypertarget{vestate-other_ops_effectiveness.csv}{%
\subsection{other\_ops\_effectiveness.csv}\label{vestate-other_ops_effectiveness.csv}}

This input file is OPTIONAL. It is only needed if the user wants to modify the other delay effects of operations in different road classes

\begin{itemize}
\tightlist
\item
  \textbf{Level}: Congestion levels: None = none, Mod = moderate, Hvy = heavy, Sev = severe, Ext = extreme
\item
  \textbf{Art\_Rcr}: Percentage reduction of recurring arterial delay that would occur with full deployment of other user-defined arterial operations measures
\item
  \textbf{Art\_NonRcr}: Percentage reduction of non-recurring arterial delay that would occur with full deployment of other user-defined arterial operations measures
\item
  \textbf{Fwy\_Rcr}: Percentage reduction of recurring freeway delay that would occur with full deployment of other user-defined freeway operations measures
\item
  \textbf{Fwy\_NonRcr}: Percentage reduction of non-recurring freeway delay that would occur with full deployment of other user-defined freeway operations measures
\end{itemize}

Here is a snapshot of the file:

\hypertarget{vestate-region_ave_fuel_carbon_intensity.csv}{%
\subsection{region\_ave\_fuel\_carbon\_intensity.csv}\label{vestate-region_ave_fuel_carbon_intensity.csv}}

This input file is OPTIONAL. It is only needed if the user wants to modify the average carbon density for different vehicle types.

\begin{itemize}
\tightlist
\item
  \textbf{HhFuelCI}: Average carbon intensity of fuels used by household vehicles (grams CO2e per megajoule)
\item
  \textbf{CarSvcFuelCI}: Average carbon intensity of fuels used by car service vehicles (grams CO2e per megajoule)
\item
  \textbf{ComSvcFuelCI}: Average carbon intensity of fuels used by commercial service vehicles (grams CO2e per megajoule)
\item
  \textbf{HvyTrkFuelCI}: Average carbon intensity of fuels used by heavy trucks (grams CO2e per megajoule)
\item
  \textbf{TransitVanFuelCI}: Average carbon intensity of fuels used by transit vans (grams CO2e per megajoule)
\item
  \textbf{TransitBusFuelCI}: Average carbon intensity of fuels used by transit buses (grams CO2e per megajoule)
\item
  \textbf{TransitRailFuelCI}: Average carbon intensity of fuels used by transit rail vehicles (grams CO2e per megajoule)
\end{itemize}

Here is a snapshot of the file:

\hypertarget{vestate-region_base_year_hvytrk_dvmt.csv}{%
\subsection{region\_base\_year\_hvytrk\_dvmt.csv}\label{vestate-region_base_year_hvytrk_dvmt.csv}}

This input file is OPTIONAL. It is only needed if the user wants to adjust heavy truck dvmt for base year

\begin{itemize}
\tightlist
\item
  \textbf{HvyTrkDvmtGrowthBasis}: Factor used to grow heavy truck DVMT from base year value
\item
  \textbf{HvyTrkDvmt}: Average daily vehicle miles of travel on roadways in the region by heavy trucks during he base year
\item
  \textbf{HvyTrkDvmtUrbanProp}: Proportion of Region heavy truck daily vehicle miles of travel occurring on urbanized area roadways
\end{itemize}

Here is a snapshot of the file:

\hypertarget{vestate-region_carsvc_powertrain_prop.csv}{%
\subsection{region\_carsvc\_powertrain\_prop.csv}\label{vestate-region_carsvc_powertrain_prop.csv}}

This input file is OPTIONAL. It is only needed if the user wants to modify the powertrain proportion of car services.

\begin{itemize}
\tightlist
\item
  \textbf{CarSvcAutoPropIcev}: Proportion of car service automobile travel powered by internal combustion engine powertrains
\item
  \textbf{CarSvcAutoPropHev}: Proportion of car service automobile travel powered by hybrid electric powertrains
\item
  \textbf{CarSvcAutoPropBev}: Proportion of car service automobile travel powered by battery electric powertrains
\item
  \textbf{CarSvcLtTrkPropIcev}: Proportion of car service light truck travel powered by internal combustion engine powertrains
\item
  \textbf{CarSvcLtTrkPropHev}: Proportion of car service light truck travel powered by hybrid electric powertrains
\item
  \textbf{CarSvcLtTrkPropBev}: Proportion of car service light truck travel powered by battery electric powertrains
\end{itemize}

Here is a snapshot of the file:

\hypertarget{vestate-region_comsvc_lttrk_prop.csv}{%
\subsection{region\_comsvc\_lttrk\_prop.csv}\label{vestate-region_comsvc_lttrk_prop.csv}}

This input file defines the proportion of commerical vehicles that are light trucks.

\begin{itemize}
\tightlist
\item
  \textbf{ComSvcLtTrkProp}: Regional proportion of commercial service vehicles that are light trucks
\end{itemize}

Here is a snapshot of the file:

\begin{longtable}[]{@{}ll@{}}
\toprule()
Year & ComSvcLtTrkProp \\
\midrule()
\endhead
2010 & 0.51 \\
2040 & 0.51 \\
\bottomrule()
\end{longtable}

\hypertarget{vestate-region_comsvc_powertrain_prop.csv}{%
\subsection{region\_comsvc\_powertrain\_prop.csv}\label{vestate-region_comsvc_powertrain_prop.csv}}

This input file is OPTIONAL. It is only needed if the user wants to modify the powertrain proportion of commercial vehicles.

\begin{itemize}
\tightlist
\item
  \textbf{ComSvcAutoPropIcev}: Proportion of commercial service automobile travel powered by internal combustion engine powertrains
\item
  \textbf{ComSvcAutoPropHev}: Proportion of commercial service automobile travel powered by hybrid electric powertrains
\item
  \textbf{ComSvcAutoPropBev}: Proportion of commercial service automobile travel powered by battery electric powertrains
\item
  \textbf{ComSvcLtTrkPropIcev}: Proportion of commercial service light truck travel powered by internal combustion engine powertrains
\item
  \textbf{ComSvcLtTrkPropHev}: Proportion of commercial service light truck travel powered by hybrid electric powertrains
\item
  \textbf{ComSvcLtTrkPropBev}: Proportion of commercial service light truck travel powered by battery electric powertrains
\end{itemize}

Here is a snapshot of the file:

\hypertarget{vestate-region_comsvc_veh_mean_age.csv}{%
\subsection{region\_comsvc\_veh\_mean\_age.csv}\label{vestate-region_comsvc_veh_mean_age.csv}}

This input file contains average age of commercial service vehicles

\begin{itemize}
\tightlist
\item
  \textbf{AveComSvcVehicleAge}: average age of commercial service vehicles
\end{itemize}

Here is a snapshot of the file:

\hypertarget{vestate-region_hh_driver_adjust_prop.csv}{%
\subsection{region\_hh\_driver\_adjust\_prop.csv}\label{vestate-region_hh_driver_adjust_prop.csv}}

This file specifies the relative driver licensing rate relative to the model estimation data year in order to account for observed or projected changes in licensing rates.

\begin{itemize}
\tightlist
\item
  \textbf{Drv15to19AdjProp}: Target proportion of unadjusted model number of drivers 15 to 19 years old (\texttt{1} = no adjustment)
\item
  \textbf{Drv20to29AdjProp}: Target proportion of unadjusted model number of drivers 20 to 29 years old (\texttt{1} = no adjustment)
\item
  \textbf{Drv30to54AdjProp}: Target proportion of unadjusted model number of drivers 30 to 54 years old (\texttt{1} = no adjustment)
\item
  \textbf{Drv55to64AdjProp}: Target proportion of unadjusted model number of drivers 55 to 64 years old (\texttt{1} = no adjustment)
\item
  \textbf{Drv65PlusAdjProp}: Target proportion of unadjusted model number of drivers 65 or older (\texttt{1} = no adjustment)
\end{itemize}

Here is a snapshot of the file:

\hypertarget{vestate-region_hvytrk_powertrain_prop.csv}{%
\subsection{region\_hvytrk\_powertrain\_prop.csv}\label{vestate-region_hvytrk_powertrain_prop.csv}}

This input file is OPTIONAL. It is only needed if the user wants to modify the powertrain proportion of heavy duty trucks.

\begin{itemize}
\tightlist
\item
  \textbf{HvyTrkPropIcev}: Proportion of heavy truck travel powered by internal combustion engine powertrains
\item
  \textbf{HvyTrkPropHev}: Proportion of heavy truck travel powered by hybrid electric powertrains
\item
  \textbf{HvyTrkPropBev}: Proportion of heavy truck travel powered by battery electric powertrains
\end{itemize}

Here is a snapshot of the file:

\hypertarget{vestate-region_prop_externalities_paid.csv}{%
\subsection{region\_prop\_externalities\_paid.csv}\label{vestate-region_prop_externalities_paid.csv}}

This file supplies data for climate change and other social costs.

\begin{itemize}
\tightlist
\item
  \textbf{PropClimateCostPaid}: Proportion of climate change costs paid by users (i.e.~ratio of carbon taxes to climate change costs
\item
  \textbf{PropOtherExtCostPaid}: Proportion of other social costs paid by users
\end{itemize}

Here is a snapshot of the file:

\hypertarget{vestate-region_road_cost.csv}{%
\subsection{region\_road\_cost.csv}\label{vestate-region_road_cost.csv}}

This file supplies data for different types of road costs

\begin{itemize}
\tightlist
\item
  \textbf{RoadBaseModCost}: Average base modernization cost per light-duty vehicle mile traveled (dollars per vehicle mile). Base modernization includes roadway improvements exclusive of addition of lanes.
\item
  \textbf{RoadPresOpMaintCost}: Average road preservation, operations, and maintenance cost per light-duty vehicle mile traveled (dollars per vehicle mile).
\item
  \textbf{RoadOtherCost}: Average other road cost (e.g.~administration, planning, project development, safety) per light-duty vehicle mile traveled (dollars per vehicle mile).
\item
  \textbf{FwyLnMiCost}: Average cost to build one freeway lane-mile (dollars per lane-mile)
\item
  \textbf{ArtLnMiCost}: Average cost to build one arterial lane-mile (dollars per lane-mile)
\item
  \textbf{HvyTrkPCE}: Passenger car equivalent (PCE) for heavy trucks. PCE indicates the number of light-duty vehicles a heavy truck is equivalent to in calculating road capacity.
\end{itemize}

Here is a snapshot of the file:

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 12\tabcolsep) * \real{0.0348}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 12\tabcolsep) * \real{0.1739}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 12\tabcolsep) * \real{0.2087}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 12\tabcolsep) * \real{0.1565}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 12\tabcolsep) * \real{0.1739}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 12\tabcolsep) * \real{0.1739}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 12\tabcolsep) * \real{0.0783}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Year
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
RoadBaseModCost.2005
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
RoadPresOpMaintCost.2005
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
RoadOtherCost.2005
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
FwyLnMiCost.2005.1e3
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
ArtLnMiCost.2005.1e3
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
HvyTrkPCE
\end{minipage} \\
\midrule()
\endhead
2010 & 0.004 & 0.01 & 0.015 & 4900 & 1800 & 3 \\
2040 & 0.004 & 0.01 & 0.015 & 4900 & 1800 & 3 \\
\bottomrule()
\end{longtable}

\hypertarget{verpat-inputs}{%
\section{VERPAT Input Files}\label{verpat-inputs}}

The scenario inputs are split into four (4) categories: \emph{Built Environment}, \emph{Demand}, \emph{Policy}, and \emph{Supply}. There are two ways to specify these inputs. \textbf{CSV Inputs} are specified in a \texttt{*.csv} file and \textbf{JSON Inputs} are specified in \texttt{model\_parameters.json} file. The users are encouraged to change these inputs to build different scenarios. The \href{RPAT-To-VERPAT}{RPAT to VERPAT} the connection between RPAT inputs to VERPAT inputs.

\protect\hyperlink{built-environment}{\textbf{Built Environment}}
- CSV Inputs
- \protect\hyperlink{bzone_pop_emp_propcsv}{bzone\_pop\_emp\_prop.csv}

\protect\hyperlink{demand}{\textbf{Demand}}
- CSV Inputs
- \protect\hyperlink{region_trips_per_capcsv}{region\_trips\_per\_cap.csv}
- \protect\hyperlink{azone_employment_by_naicscsv}{azone\_employment\_by\_naics.csv}
- \protect\hyperlink{azone_hh_pop_by_agecsv}{azone\_hh\_pop\_by\_age.csv}
- \protect\hyperlink{azone_gq_pop_by_agecsv}{azone\_gq\_pop\_by\_age.csv}
- \protect\hyperlink{azone_hhsize_targetscsv}{azone\_hhsize\_targets.csv}
- \protect\hyperlink{azone_per_cap_inccsv}{azone\_per\_cap\_inc.csv}
- \protect\hyperlink{azone_relative_employmentcsv}{azone\_relative\_employment.csv}
- \protect\hyperlink{region_truck_bus_vmtcsv}{region\_truck\_bus\_vmt.csv}
- JSON Inputs
- \protect\hyperlink{baseltvehdvmt}{BaseLtVehDvmt}
- \protect\hyperlink{basefwyartprop}{BaseFwyArtProp}
- \protect\hyperlink{employmentgrowth}{EmploymentGrowth}

\protect\hyperlink{Transport-Supply}{\textbf{Transport Supply}}

\begin{itemize}
\tightlist
\item
  CSV Inputs

  \begin{itemize}
  \tightlist
  \item
    \protect\hyperlink{marea_lane_milescsv}{marea\_lane\_miles.csv}
  \item
    \protect\hyperlink{marea_rev_miles_pccsv}{marea\_rev\_miles\_pc.csv}
  \end{itemize}
\end{itemize}

\protect\hyperlink{policy}{\textbf{Policy}}
- CSV Inputs
- \protect\hyperlink{region_commute_optionscsv}{region\_commute\_options.csv}
- \protect\hyperlink{azone_its_propcsv}{azone\_its\_prop.csv}
- \protect\hyperlink{region_light_vehiclescsv}{region\_light\_vehicles.csv}
- \protect\hyperlink{marea_parking_growthcsv}{marea\_parking\_growth.csv}
- JSON Inputs
- \protect\hyperlink{autocostgrowth}{AutoCostGrowth}
- \protect\hyperlink{fwylanemigrowth}{FwyLaneMiGrowth}
- \protect\hyperlink{artlanemigrowth}{ArtLaneMiGrowth}
- \protect\hyperlink{busrevmipcgrowth}{BusRevMiPCGrowth}
- \protect\hyperlink{railrevmipcgrowth}{RailRevMiPCGrowth}
- \protect\hyperlink{vmtcharge}{VmtCharge}

\hypertarget{model-parameters}{%
\subsubsection{Model Parameters}\label{model-parameters}}

There are two ways to specify model parameters. \textbf{CSV Parameters} are specified in a \texttt{*.csv} file and \textbf{JSON Parameters} in a \texttt{model\_parameters.json} file. While you are provided access to the model parameters, you are encouraged to use the default parameter values unless directed to use alternatives. Editing modeling parameters should be based only on research pertaining to local data sources and may result in unpredictable results.

\protect\hyperlink{model-parameters-1}{\textbf{Model Parameters}}

\begin{itemize}
\tightlist
\item
  CSV Parameters

  \begin{itemize}
  \tightlist
  \item
    \protect\hyperlink{model_accident_ratescsv}{model\_accident\_rates.csv}
  \item
    \protect\hyperlink{model_fuel_prop_by_vehcsv}{model\_fuel\_prop\_by\_veh.csv}
  \item
    \protect\hyperlink{model_fuel_composition_propcsv}{model\_fuel\_composition\_prop.csv}
  \item
    \protect\hyperlink{model_fuel_co2csv}{model\_fuel\_co2.csv}
  \item
    \protect\hyperlink{model_place_type_elasticitiescsv}{model\_place\_type\_elasticities.csv}
  \item
    \protect\hyperlink{model_place_type_relative_valuescsv}{model\_place\_type\_relative\_values.csv}
  \item
    \protect\hyperlink{model_tdm_ridesharingcsv}{model\_tdm\_ridesharing.csv}
  \item
    \protect\hyperlink{model_tdm_transitcsv}{model\_tdm\_transit.csv}
  \item
    \protect\hyperlink{model_tdm_transitlevelscsv}{model\_tdm\_transitlevels.csv}
  \item
    \protect\hyperlink{model_tdm_vanpoolingcsv}{model\_tdm\_vanpooling.csv}
  \item
    \protect\hyperlink{model_tdm_workschedulecsv}{model\_tdm\_workschedule.csv}
  \item
    \protect\hyperlink{model_tdm_workschedulelevelscsv}{model\_tdm\_workschedulelevels.csv}
  \item
    \protect\hyperlink{model_transportation_costscsv}{model\_transportation\_costs.csv}
  \item
    \protect\hyperlink{model_veh_mpg_by_yearcsv}{model\_veh\_mpg\_by\_year.csv}
  \item
    \protect\hyperlink{model_phev_range_prop_mpg_mpkwhcsv}{model\_phev\_range\_prop\_mpg\_mpkwh.csv}
  \item
    \protect\hyperlink{model_hev_prop_mpgcsv}{model\_hev\_prop\_mpg.csv}
  \item
    \protect\hyperlink{model_ev_range_prop_mpkwhcsv}{model\_ev\_range\_prop\_mpkwh.csv}
  \end{itemize}
\item
  JSON Parameters

  \begin{itemize}
  \tightlist
  \item
    \protect\hyperlink{annvmtinflator}{AnnVmtInflator}
  \item
    \protect\hyperlink{basecostpermile}{BaseCostPerMile}
  \item
    \protect\hyperlink{DvmtBudgetProp}{DvmtBudgetProp}
  \item
    \protect\hyperlink{FuelCost}{FuelCost}
  \item
    \protect\hyperlink{kwhcost}{KwhCost}
  \item
    \protect\hyperlink{GasTax}{GasTax}
  \item
    \protect\hyperlink{LtTruckProp}{LtTruckProp}
  \item
    \protect\hyperlink{TranRevMiAdjFactor}{TranRevMiAdjFactor}
  \item
    \protect\hyperlink{TruckVmtGrowthMultiplier}{TruckVmtGrowthMultiplier}
  \item
    \protect\hyperlink{WorkVmtProp}{WorkVmtProp}
  \end{itemize}
\end{itemize}

\hypertarget{input-files-to-change}{%
\subsection{Input Files to Change}\label{input-files-to-change}}

The user should change the input files described here.

\hypertarget{built-environment}{%
\subsection{Built Environment}\label{built-environment}}

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\hypertarget{csv-inputs}{%
\subsubsection{CSV Inputs}\label{csv-inputs}}

\hypertarget{bzone_pop_emp_prop.csv}{%
\subsubsection{bzone\_pop\_emp\_prop.csv}\label{bzone_pop_emp_prop.csv}}

\textbf{Population and Jobs by Place Type}: This file contains the distribution of population and employment among the 13 place types for base and future year. See \href{https://github.com/visioneval/VisionEval/wiki/VERPAT-Inputs-and-Outputs\#geocsv}{this} explanation for more infomation regarding place types. Each column, for each year, must sum to one (1). It is acceptable to have no land use (i.e.~a value of 0) in certain categories.

The yearly TAZ employment and population totals were summed by the 13 place type and then scaled to total one for both employment and population. The allocation of growth between the base and the future years in population and employment to each of the 13 place types is captured by the rows containing future years. The discussion of the population and jobs by place type input above describes how to allocate existing land use to the 13 place types. A similar approach can be used to allocate expected growth from spatial planning resources such as TAZ or Census Block Group level forecasts to the place types.
Here is a snapshot of the file:

\begin{longtable}[]{@{}llll@{}}
\toprule()
Geo & Year & Pop & Emp \\
\midrule()
\endhead
Rur & 2005 & 0.05 & 0.1 \\
Sub\_R & 2005 & 0.3 & 0 \\
Sub\_E & 2005 & 0 & 0.2 \\
Sub\_M & 2005 & 0.1 & 0.1 \\
Sub\_T & 2005 & 0 & 0 \\
CIC\_R & 2005 & 0.15 & 0 \\
CIC\_E & 2005 & 0 & 0.2 \\
CIC\_M & 2005 & 0.1 & 0.1 \\
CIC\_T & 2005 & 0 & 0 \\
UC\_R & 2005 & 0.1 & 0 \\
UC\_E & 2005 & 0 & 0.1 \\
UC\_M & 2005 & 0.1 & 0.1 \\
UC\_T & 2005 & 0.1 & 0.1 \\
Rur & 2035 & 0.05 & 0.1 \\
Sub\_R & 2035 & 0.3 & 0 \\
Sub\_E & 2035 & 0 & 0.2 \\
Sub\_M & 2035 & 0.1 & 0.1 \\
Sub\_T & 2035 & 0 & 0 \\
CIC\_R & 2035 & 0.15 & 0 \\
CIC\_E & 2035 & 0 & 0.2 \\
CIC\_M & 2035 & 0.1 & 0.1 \\
CIC\_T & 2035 & 0 & 0 \\
UC\_R & 2035 & 0.1 & 0 \\
UC\_E & 2035 & 0 & 0.1 \\
UC\_M & 2035 & 0.1 & 0.1 \\
UC\_T & 2035 & 0.1 & 0.1 \\
\bottomrule()
\end{longtable}

\hypertarget{demand}{%
\subsection{Demand}\label{demand}}

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\hypertarget{csv-inputs-1}{%
\subsubsection{CSV Inputs}\label{csv-inputs-1}}

\hypertarget{region_trips_per_cap.csv}{%
\subsubsection{region\_trips\_per\_cap.csv}\label{region_trips_per_cap.csv}}

\textbf{Auto and transit trips per capita}: This file contains regional averages for auto and transit trips per capita per day for the base year.

\begin{itemize}
\tightlist
\item
  \textbf{Auto} is the regional average of auto trips per capita, including drive alone and shared ride travel. This data can be derived from the \href{https://nhts.ornl.gov/}{National Household Travel Survey} by region or from a local household travel survey or regional travel demand forecasting model.
\item
  \textbf{Transit} is the regional average of transit trips per capita, including walk and drive access to transit. This data can be derived from the \href{https://www.transit.dot.gov/ntd/ntd-data}{National Transit Database} where the annual database contains a ``service'' table that has annual transit trip data for each transit operator or from a local household travel survey or regional travel demand forecasting model.
\end{itemize}

Here is a snapshot of the files:

\begin{longtable}[]{@{}ll@{}}
\toprule()
Mode & Trips \\
\midrule()
\endhead
Auto & 3.2 \\
Transit & 0.4 \\
\bottomrule()
\end{longtable}

\hypertarget{azone_employment_by_naics.csv}{%
\subsubsection{azone\_employment\_by\_naics.csv}\label{azone_employment_by_naics.csv}}

\textbf{Employment}: This file contains employment data for each of the counties that make up the region. The file is derived from County Business Pattern (\href{http://www.census.gov/econ/cbp/}{CBP}) data by county. Industries are categorized by the North American Industrial Classification System (NAICS) 6 digit codes. Firm size categories are:

\begin{itemize}
\tightlist
\item
  \textbf{n1\_4}: 1- 4 employees
\item
  \textbf{n5\_9}: 5-9 employees
\item
  \textbf{n10\_19}: 10-19 employees
\item
  \textbf{n20\_99}: 20-99 employees
\item
  \textbf{n100\_249}: 100-249 employees
\item
  \textbf{n250\_499}: 250-499 employees
\item
  \textbf{n500\_999}: 500-999 employees
\item
  \textbf{n1000}: 1,000 or More Employee Size Class
\item
  \textbf{n1000\_1}: 1,000-1,499 employees
\item
  \textbf{n1000\_2}: 1,500-2,499 employees
\item
  \textbf{n1000\_3}: 2,500 to 4, 999 Employees
\item
  \textbf{n1000\_4}: Over 5,000 employees
\end{itemize}

While the county field is required to be present, the business synthesis process does not require a meaningful value and therefore users may simply enter `region'. The consistency in the naming of the ``region'' should be maintained across all the files that contains the label \emph{``county''} or \emph{``Geo''}. It is also not necessary to use such detailed NAICS categories if those are not available; the current business synthesis model and subsequent models do not use this level of detail (although future versions of the model may) -- at minimum, the number of establishments for all employment types can be provided by size category. Regions with significant employment in industries such as government and public administration that are not covered by the CBP may need to add records to the file that cover this type of employment to more accurately match employment totals in their region. The two additional fields contained in the file are:

\begin{itemize}
\tightlist
\item
  \textbf{emp}: Total number of employees
\item
  \textbf{est}: Total number of establishments
\end{itemize}

Here is the snapshot of the file:

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 34\tabcolsep) * \real{0.0818}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 34\tabcolsep) * \real{0.0364}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 34\tabcolsep) * \real{0.0545}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 34\tabcolsep) * \real{0.0364}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 34\tabcolsep) * \real{0.0364}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 34\tabcolsep) * \real{0.0364}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 34\tabcolsep) * \real{0.0364}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 34\tabcolsep) * \real{0.0545}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 34\tabcolsep) * \real{0.0545}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 34\tabcolsep) * \real{0.0545}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 34\tabcolsep) * \real{0.0727}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 34\tabcolsep) * \real{0.0727}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 34\tabcolsep) * \real{0.0727}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 34\tabcolsep) * \real{0.0455}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 34\tabcolsep) * \real{0.0636}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 34\tabcolsep) * \real{0.0636}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 34\tabcolsep) * \real{0.0636}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 34\tabcolsep) * \real{0.0636}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
county
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
year
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
naics
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
emp
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
est
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
n1\_4
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
n5\_9
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
n10\_19
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
n20\_49
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
n50\_99
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
n100\_249
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
n250\_499
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
n500\_999
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
n1000
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
n1000\_1
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
n1000\_2
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
n1000\_3
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
n1000\_4
\end{minipage} \\
\midrule()
\endhead
Multnomah & 2005 & 113110 & 0 & 5 & 2 & 1 & 0 & 2 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 \\
Multnomah & 2005 & 113310 & 0 & 3 & 2 & 0 & 0 & 1 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 \\
Multnomah & 2005 & 114111 & 0 & 1 & 0 & 1 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 \\
Multnomah & 2005 & 114112 & 0 & 1 & 1 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 \\
Multnomah & 2005 & 115114 & 0 & 1 & 0 & 0 & 0 & 0 & 0 & 0 & 1 & 0 & 0 & 0 & 0 & 0 & 0 \\
Multnomah & 2005 & 115210 & 0 & 4 & 3 & 1 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 \\
Multnomah & 2005 & 115310 & 0 & 5 & 2 & 0 & 1 & 1 & 1 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 \\
Multnomah & 2005 & 212319 & 0 & 1 & 1 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 \\
Multnomah & 2005 & 212321 & 0 & 4 & 1 & 1 & 1 & 1 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 \\
\bottomrule()
\end{longtable}

\hypertarget{azone_hh_pop_by_age.csv}{%
\subsubsection{azone\_hh\_pop\_by\_age.csv}\label{azone_hh_pop_by_age.csv}}

\textbf{Household population}: This file contains population estimates/forecasts by county and age cohort for each of the base and future years. The file format includes six age categories used by the population synthesis model:

\begin{itemize}
\tightlist
\item
  \textbf{0-14}
\item
  \textbf{15-19}
\item
  \textbf{20-29}
\item
  \textbf{30-54}
\item
  \textbf{55-64}
\item
  \textbf{65 Plus}
\end{itemize}

Future year data must be developed by the user; in many regions population forecasts are available from regional or state agencies and/or local academic sources. As with the employment data inputs the future data need not be county specific. Rather, regional totals by age group can be entered into the file with a value such as ``region'' entered in the county field.

Here is a snapshot of the file:

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 14\tabcolsep) * \real{0.1364}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 14\tabcolsep) * \real{0.0606}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 14\tabcolsep) * \real{0.1212}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 14\tabcolsep) * \real{0.1364}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 14\tabcolsep) * \real{0.1364}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 14\tabcolsep) * \real{0.1364}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 14\tabcolsep) * \real{0.1364}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 14\tabcolsep) * \real{0.1364}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Geo
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Year
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Age0to14
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Age15to19
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Age20to29
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Age30to54
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Age55to64
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Age65Plus
\end{minipage} \\
\midrule()
\endhead
Multnomah & 2005 & 129869 & 41133 & 99664 & 277854 & 71658 & 72648 \\
Multnomah & 2035 & 169200 & 48800 & 144050 & 327750 & 116100 & 162800 \\
\bottomrule()
\end{longtable}

\hypertarget{azone_gq_pop_by_age.csv-construction}{%
\subsubsection{azone\_gq\_pop\_by\_age.csv :construction:}\label{azone_gq_pop_by_age.csv-construction}}

\textbf{Group quarter population}: This file contains group quarters population estimates/forecasts by county and age cohort for each of the base and future years. The file format includes six age categories used by the population synthesis model:

\begin{itemize}
\tightlist
\item
  \textbf{0-14}
\item
  \textbf{15-19}
\item
  \textbf{20-29}
\item
  \textbf{30-54}
\item
  \textbf{55-64}
\item
  \textbf{65 Plus}
\end{itemize}

Here is a snapshot of the file:

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 14\tabcolsep) * \real{0.1071}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 14\tabcolsep) * \real{0.0476}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 14\tabcolsep) * \real{0.1310}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 14\tabcolsep) * \real{0.1429}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 14\tabcolsep) * \real{0.1429}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 14\tabcolsep) * \real{0.1429}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 14\tabcolsep) * \real{0.1429}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 14\tabcolsep) * \real{0.1429}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Geo
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Year
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
GrpAge0to14
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
GrpAge15to19
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
GrpAge20to29
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
GrpAge30to54
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
GrpAge55to64
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
GrpAge65Plus
\end{minipage} \\
\midrule()
\endhead
Multnomah & 2005 & 0 & 0 & 0 & 1 & 0 & 0 \\
Multnomah & 2035 & 0 & 0 & 0 & 1 & 0 & 0 \\
\bottomrule()
\end{longtable}

\hypertarget{azone_hhsize_targets.csv-construction}{%
\subsubsection{azone\_hhsize\_targets.csv :construction:}\label{azone_hhsize_targets.csv-construction}}

\textbf{Household size (\emph{azone\_hhsize\_targets.csv})}: This file contains the household specific targets. This contain two household specific attributes:

\begin{itemize}
\tightlist
\item
  \textbf{AveHhSize}: Average household size of households (non-group quarters)
\item
  \textbf{Prop1PerHh}: Proportion of households (non-group quarters) having only one person
\end{itemize}

Here is a snapshot of the file:

\begin{longtable}[]{@{}llll@{}}
\toprule()
Geo & Year & AveHhSize & Prop1PerHh \\
\midrule()
\endhead
Multnomah & 2005 & NA & NA \\
Multnomah & 2035 & NA & NA \\
\bottomrule()
\end{longtable}

\hypertarget{azone_per_cap_inc.csv}{%
\subsubsection{azone\_per\_cap\_inc.csv}\label{azone_per_cap_inc.csv}}

\textbf{Regional income}: This file contains information on regional average per capita household (\textbf{HHIncomePC}) and group quarters (\textbf{GQIncomePC}) income by forecast year in year 2000 dollars. The data can be obtained from the U.S. Department of \href{http://www.bea.gov/regional/index.htm}{Commerce Bureau of Economic Analysis} for the current year or from regional or state sources for forecast years. In order to use current year dollars just replace \textbf{\emph{2000}} in column labels with current year. For example, if the data is obtained in year 2005 dollars then the column labels in the file shown below will become \textbf{HHIncomePC.2005} and \textbf{GQIncomePC.2005}.
Here is a snapshot of the file:

\begin{longtable}[]{@{}llll@{}}
\toprule()
Geo & Year & HHIncomePC.2000 & GQIncomePC.2000 \\
\midrule()
\endhead
Multnomah & 2005 & 32515 & 0 \\
Multnomah & 2035 & 40000 & 0 \\
\bottomrule()
\end{longtable}

\hypertarget{azone_relative_employment.csv}{%
\subsubsection{azone\_relative\_employment.csv}\label{azone_relative_employment.csv}}

\textbf{Relative employment}: This file contains ratio of workers to persons by age cohort in model year vs.~estimation data year. The relative employment value for each age group, which is the employment rate for the age group relative to the employment rate for the model estimation year data is used to adjust the relative employment to reflect changes in relative employment for other years. This file contains five age cohorts:

\begin{itemize}
\tightlist
\item
  \textbf{RelEmp15to19}: Ratio of workers to persons age 15 to 19 in model year vs.~in estimation data year
\item
  \textbf{RelEmp20to29}: Ratio of workers to persons age 20 to 29 in model year vs.~in estimation data year
\item
  \textbf{RelEmp30to54}: Ratio of workers to persons age 30 to 54 in model year vs.~in estimation data year
\item
  \textbf{RelEmp55to64}: Ratio of workers to persons age 55 to 64 in model year vs.~in estimation data year
\item
  \textbf{RelEmp65Plus}: Ratio of workers to persons age 65 or older in model year vs.~in estimation data year
\end{itemize}

Here is a snapshot of the file:

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 12\tabcolsep) * \real{0.1233}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 12\tabcolsep) * \real{0.0548}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 12\tabcolsep) * \real{0.1644}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 12\tabcolsep) * \real{0.1644}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 12\tabcolsep) * \real{0.1644}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 12\tabcolsep) * \real{0.1644}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 12\tabcolsep) * \real{0.1644}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Geo
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Year
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
RelEmp15to19
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
RelEmp20to29
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
RelEmp30to54
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
RelEmp55to64
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
RelEmp65Plus
\end{minipage} \\
\midrule()
\endhead
Multnomah & 2005 & 1 & 1 & 1 & 1 & 1 \\
Multnomah & 2035 & 1 & 1 & 1 & 1 & 1 \\
\bottomrule()
\end{longtable}

\hypertarget{region_truck_bus_vmt.csv}{%
\subsubsection{region\_truck\_bus\_vmt.csv}\label{region_truck_bus_vmt.csv}}

\textbf{Truck and bus vmt}: This file contains the region's proportion of VMT by truck and bus as well as the distribution of that VMT across functional classes (\emph{freeway}, \emph{arterial}, \emph{other}). The file includes one row for bus VMT data and one row for Truck VMT data. It should be noted that it is not necessary to enter values in the \textbf{PropVmt} column for \textbf{BusVmt} as this is calculated using the values in the \textbf{\emph{transportation\_supply.csv}} \#EDIT (marea\_rev\_miles\_pc.csv?) user input file. The truck VMT proportion (PropVMT column, TruckVMT row) can be obtained from \href{http://www.fhwa.dot.gov/policyinformation/hpms.cfm}{Highway Performance Monitoring System} data and local sources or the regional travel demand model if one exists.
The proportions of VMT by functional class can be derived from the Federal Highway Cost Allocation Study and data from transit operators. The Federal Highway Cost Allocation Study (Table II-6, 1997 Federal Highway Cost Allocation Study Final Report, \href{http://www.fhwa.dot.gov/policy/hcas/final/two.cfm}{Chapter II} is used to calculate the average proportion of truck VMT by functional class. Data from transit authorities are used to calculate the proportions of bus VMT by urban area functional class.
Here is a snapshot of the file:

\begin{longtable}[]{@{}lllll@{}}
\toprule()
Type & PropVmt & Fwy & Art & Other \\
\midrule()
\endhead
BusVmt & 0 & 0.15 & 0.591854 & 0.258146 \\
TruckVmt & 0.08 & 0.452028 & 0.398645 & 0.149327 \\
\bottomrule()
\end{longtable}

\hypertarget{json-inputs}{%
\subsubsection{JSON Inputs}\label{json-inputs}}

\hypertarget{baseltvehdvmt}{%
\subsubsection{BaseLtVehDvmt}\label{baseltvehdvmt}}

\textbf{Light vehicle dvmt (\emph{BaseLtVehDvmt})}: Total light vehicle daily VMT for the base year in thousands of miles. This data can be derived from a combination of \href{http://www.fhwa.dot.gov/policyinformation/hpms.cfm}{Highway Performance Monitoring System} data, Federal Highway Cost Allocation Study data, and regional data. Light vehicle daily VMT can be estimated by subtracting truck and bus VMT from total VMT provided in the Highway Performance Monitoring System (HPMS). Regional travel demand model outputs can also be used to derive these data. It should be defined in \protect\hyperlink{model_parametersjson}{model\_parameters.json} as follows:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{\{}
    \DataTypeTok{"NAME"} \FunctionTok{:} \StringTok{"BaseLtVehDvmt"}\FunctionTok{,}
    \DataTypeTok{"VALUE"}\FunctionTok{:} \StringTok{"27244"}\FunctionTok{,}
    \DataTypeTok{"TYPE"} \FunctionTok{:} \StringTok{"compound"}\FunctionTok{,}
    \DataTypeTok{"UNITS"} \FunctionTok{:} \StringTok{"MI/DAY"}\FunctionTok{,}
    \DataTypeTok{"PROHIBIT"} \FunctionTok{:} \StringTok{"c(\textquotesingle{}NA\textquotesingle{}, \textquotesingle{}\textless{} 0\textquotesingle{})"}\FunctionTok{,}
    \DataTypeTok{"ISELEMENTOF"} \FunctionTok{:} \StringTok{""}
\FunctionTok{\}}
\end{Highlighting}
\end{Shaded}

\hypertarget{basefwyartprop}{%
\subsubsection{BaseFwyArtProp}\label{basefwyartprop}}

\textbf{Dvmt proportion by functional class (\emph{BaseFwyArtProp})}: The proportions of daily VMT for light vehicles that takes place on freeways and arterials (i.e., the remainder of VMT takes place on lower functional class roads for the base year. This data can be derived from a combination of \href{http://www.fhwa.dot.gov/policyinformation/hpms.cfm}{Highway Performance Monitoring System} data, Federal Highway Cost Allocation Study data, and regional data. The proportions of light vehicle daily VMT on freeways and arterials can be derived from the HPMS data. Regional travel demand model outputs can also be used to derive these data. It should be defined in \protect\hyperlink{model_parametersjson}{model\_parameters.json} as follows:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{\{}
    \DataTypeTok{"NAME"} \FunctionTok{:} \StringTok{"BaseFwyArtProp"}\FunctionTok{,}
    \DataTypeTok{"VALUE"}\FunctionTok{:} \StringTok{"0.77"}\FunctionTok{,}
    \DataTypeTok{"TYPE"} \FunctionTok{:} \StringTok{"double"}\FunctionTok{,}
    \DataTypeTok{"UNITS"} \FunctionTok{:} \StringTok{"proportion"}\FunctionTok{,}
    \DataTypeTok{"PROHIBIT"} \FunctionTok{:} \StringTok{"c(\textquotesingle{}NA\textquotesingle{}, \textquotesingle{}\textless{} 0\textquotesingle{}, \textquotesingle{}\textgreater{} 1\textquotesingle{})"}\FunctionTok{,}
    \DataTypeTok{"ISELEMENTOF"} \FunctionTok{:} \StringTok{""}
\FunctionTok{\}}
\end{Highlighting}
\end{Shaded}

\hypertarget{employmentgrowth}{%
\subsubsection{EmploymentGrowth}\label{employmentgrowth}}

\textbf{Employment Growth (\emph{EmploymentGrowth})}: This variable represents a growth rate for employment in the region between the base year and the future year. A rate of 1 indicates no changes in overall employment, a value of more than 1 indicates some growth (e.g., 1.5 = 50\% growth) and a value of less than 1 indicates decline in employment. It should be defined in \protect\hyperlink{model_parametersjson}{model\_parameters.json} as follows:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{\{}
    \DataTypeTok{"NAME"}\FunctionTok{:} \StringTok{"EmploymentGrowth"}\FunctionTok{,}
    \DataTypeTok{"VALUE"}\FunctionTok{:} \StringTok{"1.5"}\FunctionTok{,}
    \DataTypeTok{"TYPE"}\FunctionTok{:} \StringTok{"double"}\FunctionTok{,}
    \DataTypeTok{"UNITS"}\FunctionTok{:} \StringTok{"multiplier"}\FunctionTok{,}
    \DataTypeTok{"PROHIBIT"}\FunctionTok{:} \StringTok{""}\FunctionTok{,}
    \DataTypeTok{"ISELEMENTOF"}\FunctionTok{:} \StringTok{""}
\FunctionTok{\}}
\end{Highlighting}
\end{Shaded}

\hypertarget{transport-supply-1}{%
\subsection{Transport Supply}\label{transport-supply-1}}

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\hypertarget{csv-inputs-2}{%
\subsubsection{CSV Inputs}\label{csv-inputs-2}}

\hypertarget{marea_lane_miles.csv}{%
\subsubsection{marea\_lane\_miles.csv}\label{marea_lane_miles.csv}}

\textbf{Road lane miles}: This file contains the amount of transportation supply by base year in terms of lane miles of freeways and arterial roadways in the region. The base year data is duplicated for future year.
\textbf{Freeway} and \textbf{Arterial} are total lane miles for those functional classes in the region. These data can be derived from the Federal Highway Administration's (FHWA) Highway \href{http://www.fhwa.dot.gov/policy/ohim/hs05/roadway_extent.cfm}{Statistics data}.
Here is a snapshot of the file:

\begin{longtable}[]{@{}llll@{}}
\toprule()
Geo & Year & FwyLaneMi & ArtLaneMi \\
\midrule()
\endhead
Multnomah & 2005 & 250 & 900 \\
Multnomah & 2035 & 250 & 900 \\
\bottomrule()
\end{longtable}

\hypertarget{marea_rev_miles_pc.csv}{%
\subsubsection{marea\_rev\_miles\_pc.csv}\label{marea_rev_miles_pc.csv}}

\textbf{Transit revenue miles}: This file contains the amount of transportation supply by base year in terms of the revenue miles operating by the transit system in the region. The base year data is duplicated for future year.
\textbf{Bus} and \textbf{Rail} are annual bus and rail revenue miles per capita for the region. These data can be derived from the \href{https://www.transit.dot.gov/ntd/ntd-data}{National Transit Database}, where the annual database contains a ``service'' table that has annual revenue mile data by mode for each transit operator.
Here is a snapshot of the file:

\begin{longtable}[]{@{}llll@{}}
\toprule()
Geo & Year & BusRevMiPC & RailRevMiPC \\
\midrule()
\endhead
Multnomah & 2005 & 19 & 4 \\
Multnomah & 2035 & 19 & 4 \\
\bottomrule()
\end{longtable}

\hypertarget{policy}{%
\subsection{Policy}\label{policy}}

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\hypertarget{csv-inputs-3}{%
\subsubsection{CSV Inputs}\label{csv-inputs-3}}

\hypertarget{region_commute_options.csv}{%
\subsubsection{region\_commute\_options.csv}\label{region_commute_options.csv}}

\textbf{Percentage of employees offered commute options}: This file contains assumptions about the availability and participation in work based travel demand management programs. The policies are ridesharing programs, transit pass programs, telecommuting or alternative work schedule programs, and vanpool programs. For each, the user enters the proportion of workers who participate (the data items with the ``Participation'' suffix). For one program, the transit subsidy, the user must also enter the subsidy level in dollars for the TransitSubsidyLevel data item.
Here is a snapshot of the file:

\begin{longtable}[]{@{}lll@{}}
\toprule()
TDMProgram & DataItem & DataValue \\
\midrule()
\endhead
Ridesharing & RidesharingParticipation & 0.05 \\
TransitSubsidy & TransitSubsidyParticipation & 0.1 \\
TransitSubsidy & TransitSubsidyLevel & 1.25 \\
WorkSchedule & Schedule980Participation & 0.01 \\
WorkSchedule & Schedule440Participation & 0.01 \\
WorkSchedule & Telecommute1.5DaysParticipation & 0.01 \\
Vanpooling & LowLevelParticipation & 0.04 \\
Vanpooling & MediumLevelParticipation & 0.01 \\
Vanpooling & HighLevelParticipation & 0.01 \\
\bottomrule()
\end{longtable}

\hypertarget{azone_its_prop.csv}{%
\subsubsection{azone\_its\_prop.csv}\label{azone_its_prop.csv}}

\textbf{Percent road miles with ITS treatment}: This file is an estimate of the proportion of road miles that have improvements which reduce incidents through ITS treatments in both the base and future years. Values entered should be between 0 and 1, with 1 indicating that 100\% of road miles are treated.
The ITS policy measures the effects of incident management supported by ITS. The ITS table is used to inform the congestion model and the travel demand model. The model uses the mean speeds with and without incidents to compute an overall average speed by road type and congestion level providing a simple level of sensitivity to the potential effects of incident management programs on delay and emissions.
The ITS treatments are evaluated only on freeways and arterials. The ITS treatments that can be evaluated are those that the analyst considers will reduce non-recurring congestion due to incidents. This policy does not deal with other operational improvements such as signal coordination, or temporary capacity increases such as allowing shoulder use in the peak.
Here is a snapshot of the file:

\begin{longtable}[]{@{}lll@{}}
\toprule()
Geo & Year & ITS \\
\midrule()
\endhead
Multnomah & 2005 & 0 \\
Multnomah & 2035 & 0 \\
\bottomrule()
\end{longtable}

\hypertarget{region_light_vehicles.csv}{%
\subsubsection{region\_light\_vehicles.csv}\label{region_light_vehicles.csv}}

\textbf{Bicycling/light vehicles targets}: This file contains input data for the non-motorized vehicle model. In VERPAT, non-motorized vehicles are bicycles, and also electric bicycles, segways, and similar vehicles that are small, light-weight and can travel at bicycle speeds or slightly higher. The parameters are as follows:

\begin{itemize}
\tightlist
\item
  \textbf{TargetProp}: non-motorized vehicle ownership rate (average ratio of non-motorized vehicles to driver age population)
\item
  \textbf{Threshold}: single-occupant vehicle (SOV) tour mileage threshold used in the SOV travel proportion model. This is the upper limit for tour lengths that are suitable for reallocation to non-motorized modes.
\item
  \textbf{PropSuitable}: proportion of SOV travel suitable for non-motorized vehicle travel. This variable describes the proportion of SOV tours within the mileage threshold for which non-motorized vehicles might be substituted. This variable takes into account such factors as weather and trip purpose.
\end{itemize}

The non-motorized vehicle model predicts the ownership and use of non-motorized vehicles (where non-motorized vehicles are bicycles, and also electric bicycles, segways and similar vehicles that are small, light-weight and can travel at bicycle speeds or slightly higher than bicycle speeds). The core concept of the model is that non-motorized vehicle usage will primarily be a substitute for short-distance SOV travel. Therefore, the model estimates the proportion of the household vehicle travel that occurs in short-distance SOV tours. The model determines the maximum potential for household VMT to be diverted to non-motorized vehicles, which is also dependent on the availability of non-motorized vehicles.
Note that bike share programs (BSP) serve to increase the availability of non-motorized vehicles and can be taken into account by increasing the \textbf{TargetProp} variable. Use national estimates of non-motorized ownership if regional estimates of non-motorized ownership are not available (unless the region has notably atypical levels of bicycle usage). See \href{http://www.academia.edu/1839374/Bicycle_Ownership_in_the_United_States_Empirical_Analysis_of_Regional_Differences}{Bicycle Ownership in the United States} for an analysis of regional differences.
Here is a snapshot of the file:

\begin{longtable}[]{@{}ll@{}}
\toprule()
DataItem & DataValue \\
\midrule()
\endhead
TargetProp & 0.2 \\
Threshold & 2 \\
PropSuitable & 0.1 \\
\bottomrule()
\end{longtable}

\hypertarget{marea_parking_growth.csv}{%
\subsubsection{marea\_parking\_growth.csv}\label{marea_parking_growth.csv}}

\textbf{Increase in parking cost and supply}: This file contains information that allows the effects of policies such as workplace parking charges and ``\emph{cash-out buy-back}'' programs to be tested. The input parameters are as follows and should be entered for both the base and future year:

\begin{itemize}
\tightlist
\item
  \textbf{PropWorkParking}: proportion of employees that park at work
\item
  \textbf{PropWorkCharged}: proportion of employers that charge for parking
\item
  \textbf{PropCashOut}: proportion of employment parking that is converted from being free to pay under a ``\emph{cash-out buy-back}'' type of program
\item
  \textbf{PropOtherCharged}: proportion of other parking that is not free
\item
  \textbf{ParkingCost.2000}: average daily parking cost in 2000 year USD. In order to use base year dollars just replace \textbf{\emph{2000}} in column labels with base year. This variable is the average daily parking cost for those who incur a fee to park. If the paid parking varies across the region, then the ``\emph{PkgCost}'' value should reflect the average of those parking fees, but weighted by the supply -- so if most parking is in the Center City, then the average will be heavily weighted toward the price in the Center City.
\end{itemize}

Here is a snapshot of the file:

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 12\tabcolsep) * \real{0.1047}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 12\tabcolsep) * \real{0.0465}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 12\tabcolsep) * \real{0.1744}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 12\tabcolsep) * \real{0.1744}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 12\tabcolsep) * \real{0.1279}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 12\tabcolsep) * \real{0.1860}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 12\tabcolsep) * \real{0.1860}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Geo
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Year
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
PropWorkParking
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
PropWorkCharged
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
PropCashOut
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
PropOtherCharged
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
ParkingCost.2000
\end{minipage} \\
\midrule()
\endhead
Multnomah & 2005 & 1 & 0.1 & 0 & 0.05 & 5 \\
Multnomah & 2035 & 1 & 0.1 & 0 & 0.05 & 5 \\
\bottomrule()
\end{longtable}

\hypertarget{json-inputs-1}{%
\subsubsection{JSON Inputs}\label{json-inputs-1}}

\hypertarget{autocostgrowth}{%
\subsubsection{AutoCostGrowth}\label{autocostgrowth}}

\textbf{\% Increase in Auto Operating Cost (\emph{AutoCostGrowth}):} This parameter reflects the proportional increase in auto operating cost. This can be used to test different assumptions for future gas prices or the effects of increased gas taxes. A value of 1.5 multiplies base year operating costs by 1.5 and thus reflects a 50\% increase. It should be defined in \protect\hyperlink{model_parametersjson}{model\_parameters.json} as follows:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{\{}
    \DataTypeTok{"NAME"} \FunctionTok{:} \StringTok{"AutoCostGrowth"}\FunctionTok{,}
    \DataTypeTok{"VALUE"}\FunctionTok{:} \StringTok{"1.5"}\FunctionTok{,}
    \DataTypeTok{"TYPE"} \FunctionTok{:} \StringTok{"double"}\FunctionTok{,}
    \DataTypeTok{"UNITS"} \FunctionTok{:} \StringTok{"multiplier"}\FunctionTok{,}
    \DataTypeTok{"PROHIBIT"} \FunctionTok{:} \StringTok{"c(\textquotesingle{}NA\textquotesingle{}, \textquotesingle{}\textless{} 0\textquotesingle{})"}\FunctionTok{,}
    \DataTypeTok{"ISELEMENTOF"} \FunctionTok{:} \StringTok{""}
\FunctionTok{\}}
\end{Highlighting}
\end{Shaded}

\hypertarget{fwylanemigrowth}{%
\subsubsection{FwyLaneMiGrowth}\label{fwylanemigrowth}}

\textbf{FwyLaneMiGrowth}: The variable indicates the percent increase in supply of freeways lane miles in the future year compared to base year. By default, the transportation supply is assumed to grow in line with population increase; therefore a value of 1 indicates growth in proportion with population growth. A value less than 1 indicates that there will be less freeway lane mile supply, per person, in the future. A value of 1 indicates faster freeway expansion than population growth. It should be defined in \protect\hyperlink{model_parametersjson}{model\_parameters.json} as follows:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{\{}
    \DataTypeTok{"NAME"}\FunctionTok{:} \StringTok{"FwyLaneMiGrowth"}\FunctionTok{,}
    \DataTypeTok{"VALUE"}\FunctionTok{:} \StringTok{"1"}\FunctionTok{,}
    \DataTypeTok{"TYPE"} \FunctionTok{:} \StringTok{"double"}\FunctionTok{,}
    \DataTypeTok{"UNITS"} \FunctionTok{:} \StringTok{"multiplier"}\FunctionTok{,}
    \DataTypeTok{"PROHIBIT"} \FunctionTok{:} \StringTok{"c(\textquotesingle{}NA\textquotesingle{}, \textquotesingle{}\textless{} 0\textquotesingle{})"}\FunctionTok{,}
    \DataTypeTok{"ISELEMENTOF"} \FunctionTok{:} \StringTok{""}
\FunctionTok{\}}
\end{Highlighting}
\end{Shaded}

\hypertarget{artlanemigrowth}{%
\subsubsection{ArtLaneMiGrowth}\label{artlanemigrowth}}

\textbf{ArtLaneMiGrowth}: The variable indicates the percent increase in supply of arterial lane miles in the future year compared to base year. It is a similar value to freeway except that it measures arterial lane mile growth. It is also proportional to population growth. It should be defined in \protect\hyperlink{model_parametersjson}{model\_parameters.json} as follows:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{\{}
    \DataTypeTok{"NAME"} \FunctionTok{:} \StringTok{"ArtLaneMiGrowth"}\FunctionTok{,}
    \DataTypeTok{"VALUE"}\FunctionTok{:} \StringTok{"1"}\FunctionTok{,}
    \DataTypeTok{"TYPE"} \FunctionTok{:} \StringTok{"double"}\FunctionTok{,}
    \DataTypeTok{"UNITS"} \FunctionTok{:} \StringTok{"multiplier"}\FunctionTok{,}
    \DataTypeTok{"PROHIBIT"} \FunctionTok{:} \StringTok{"c(\textquotesingle{}NA\textquotesingle{}, \textquotesingle{}\textless{} 0\textquotesingle{})"}\FunctionTok{,}
    \DataTypeTok{"ISELEMENTOF"} \FunctionTok{:} \StringTok{""}
\FunctionTok{\}}
\end{Highlighting}
\end{Shaded}

\hypertarget{busrevmipcgrowth}{%
\subsubsection{BusRevMiPCGrowth}\label{busrevmipcgrowth}}

\textbf{BusRevMiPCGrowth}: It is the percent increase in transit revenue miles per capita for bus. It behaves in a similar way to the freeway and rail values in that a value of 1 indicates per capita revenue miles stays constant. It should be defined in \protect\hyperlink{model_parametersjson}{model\_parameters.json} as follows:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{\{}
    \DataTypeTok{"NAME"} \FunctionTok{:} \StringTok{"BusRevMiPCGrowth"}\FunctionTok{,}
    \DataTypeTok{"VALUE"}\FunctionTok{:} \StringTok{"1"}\FunctionTok{,}
    \DataTypeTok{"TYPE"} \FunctionTok{:} \StringTok{"double"}\FunctionTok{,}
    \DataTypeTok{"UNITS"} \FunctionTok{:} \StringTok{"multiplier"}\FunctionTok{,}
    \DataTypeTok{"PROHIBIT"} \FunctionTok{:} \StringTok{"c(\textquotesingle{}NA\textquotesingle{}, \textquotesingle{}\textless{} 0\textquotesingle{})"}\FunctionTok{,}
    \DataTypeTok{"ISELEMENTOF"} \FunctionTok{:} \StringTok{""}
\FunctionTok{\}}
\end{Highlighting}
\end{Shaded}

\hypertarget{railrevmipcgrowth}{%
\subsubsection{RailRevMiPCGrowth}\label{railrevmipcgrowth}}

\textbf{RailRevMiPCGrowth}: It is the percent increase in transit revenue miles per capita for rail. This encompasses all rail modes, from light rail through to commuter rail. It should be defined in \protect\hyperlink{model_parametersjson}{model\_parameters.json} as follows:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{\{}
    \DataTypeTok{"NAME"} \FunctionTok{:} \StringTok{"RailRevMiPCGrowth"}\FunctionTok{,}
    \DataTypeTok{"VALUE"}\FunctionTok{:} \StringTok{"1"}\FunctionTok{,}
    \DataTypeTok{"TYPE"} \FunctionTok{:} \StringTok{"double"}\FunctionTok{,}
    \DataTypeTok{"UNITS"} \FunctionTok{:} \StringTok{"multiplier"}\FunctionTok{,}
    \DataTypeTok{"PROHIBIT"} \FunctionTok{:} \StringTok{"c(\textquotesingle{}NA\textquotesingle{}, \textquotesingle{}\textless{} 0\textquotesingle{})"}\FunctionTok{,}
    \DataTypeTok{"ISELEMENTOF"} \FunctionTok{:} \StringTok{""}
\FunctionTok{\}}
\end{Highlighting}
\end{Shaded}

\hypertarget{vmtcharge}{%
\subsubsection{VmtCharge}\label{vmtcharge}}

\textbf{Auto Operating Surcharge Per VMT (\emph{VmtCharge})}: It is a cost in cents per mile that would be levied on auto users through the form of a VMT charge. It should be defined in \protect\hyperlink{model_parametersjson}{model\_parameters.json} as follows:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{\{}
    \DataTypeTok{"NAME"} \FunctionTok{:} \StringTok{"VmtCharge"}\FunctionTok{,}
    \DataTypeTok{"VALUE"}\FunctionTok{:} \StringTok{"0.05"}\FunctionTok{,}
    \DataTypeTok{"TYPE"} \FunctionTok{:} \StringTok{"compound"}\FunctionTok{,}
    \DataTypeTok{"UNITS"} \FunctionTok{:} \StringTok{"USD/MI"}\FunctionTok{,}
    \DataTypeTok{"PROHIBIT"} \FunctionTok{:} \StringTok{"c(\textquotesingle{}NA\textquotesingle{}, \textquotesingle{}\textless{} 0\textquotesingle{})"}\FunctionTok{,}
    \DataTypeTok{"ISELEMENTOF"} \FunctionTok{:} \StringTok{""}
\FunctionTok{\}}
\end{Highlighting}
\end{Shaded}

\hypertarget{model-parameters-1}{%
\subsection{Model Parameters}\label{model-parameters-1}}

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

Users can modify these parameters to test alternative scenarios. For e.g.~users can use \protect\hyperlink{model_veh_mpg_by_yearcsv}{model\_veh\_mpg\_by\_year.csv} to test alternative vehicle development scenarios, such as improved technology and/or fuel economy standards that lead to higher fuel economies.

\hypertarget{csv-inputs-4}{%
\subsubsection{CSV Inputs}\label{csv-inputs-4}}

\hypertarget{model_accident_rates.csv}{%
\subsubsection{model\_accident\_rates.csv}\label{model_accident_rates.csv}}

\textbf{Accident Rates}: Road safety impacts are calculated by factoring the amount of VMT. The following national average rates, from the Fatality Analysis Reporting System General Estimates System (2009) by US Department of Transportation, are applied to calculate the number of fatal and injury accidents and the value of property damage:

\begin{itemize}
\tightlist
\item
  Fatal: 1.14 per 100 Million Miles Traveled
\item
  Injury: 51.35 per 100 Million Miles Traveled
\item
  Property damage: 133.95 per 100 Million Miles Traveled
\end{itemize}

Here is a snapshot of the file:

\begin{longtable}[]{@{}ll@{}}
\toprule()
Accident & Rate \\
\midrule()
\endhead
Fatal & 1.14 \\
Injury & 51.35 \\
Property & 133.95 \\
\bottomrule()
\end{longtable}

\hypertarget{model_fuel_prop_by_veh.csv}{%
\subsubsection{model\_fuel\_prop\_by\_veh.csv}\label{model_fuel_prop_by_veh.csv}}

\textbf{Vehicle VMT proportion by fuel (\emph{model\_fuel\_prop\_by\_veh.csv})}: The file contains allocation of VMT for each of the four road vehicle types that VERPAT represents (\emph{auto}, \emph{light truck}, \emph{bus}, and \emph{heavy truck}) to different fuel types (\emph{Diesel}, \emph{CNG}, \emph{Gasoline}). This file is used in the calculations of fuel consumption. This file can be used to test alternative fuel scenarios by varying the shares of non-gasoline fuels.

\begin{itemize}
\tightlist
\item
  \textbf{PropDiesel}: The proportion of the fleet that uses diesel
\item
  \textbf{PropCng}: The proportion of the fleet that uses CNG
\item
  \textbf{PropGas}: The proportion of the fleet that uses gasoline
\end{itemize}

Here is a snapshot of the file:

\begin{longtable}[]{@{}llll@{}}
\toprule()
VehType & PropDiesel & PropCng & PropGas \\
\midrule()
\endhead
Auto & 0.007 & 0 & 0.993 \\
LtTruck & 0.04 & 0 & 0.96 \\
Bus & 0.995 & 0.005 & 0 \\
Truck & 0.945 & 0.005 & 0.05 \\
\bottomrule()
\end{longtable}

\hypertarget{model_fuel_composition_prop.csv}{%
\subsubsection{model\_fuel\_composition\_prop.csv}\label{model_fuel_composition_prop.csv}}

\textbf{Fuel composition}: This file contains the composition of fuel used for each of the four road vehicle types that VERPAT represents (\emph{auto}, \emph{light truck}, \emph{bus}, and \emph{heavy truck}). This file is also used in the calculations of fuel consumption along with the aforementioned file. The column labels in the file are:

\begin{itemize}
\tightlist
\item
  \textbf{GasPropEth}: The average ethanol proportion in gasoline sold
\item
  \textbf{DieselPropBio}: The average biodiesel proportion in diesel sold
\end{itemize}

Here is a snapshot of the file:

\begin{longtable}[]{@{}lll@{}}
\toprule()
VehType & GasPropEth & DieselPropBio \\
\midrule()
\endhead
Auto & 0.1 & 0.05 \\
LtTruck & 0.1 & 0.05 \\
Bus & 0.1 & 0.05 \\
Truck & 0.1 & 0.01 \\
\bottomrule()
\end{longtable}

\hypertarget{model_fuel_co2.csv}{%
\subsubsection{model\_fuel\_co2.csv}\label{model_fuel_co2.csv}}

\textbf{Emission Rate}: The emissions rate file contains information on ``pump-to-wheels'' CO2 equivalent emissions by fuel type in grams per mega Joule of fuel energy content. There is one row for each fuel type: ULSD, biodiesel, RFG (reformulated gasoline), CARBOB (gasoline formulated to be blended with ethanol), ethanol, and CNG. This file is used to convert fuel use to CO2 equivalent emissions.
Here is a snapshot of the file:

\begin{longtable}[]{@{}ll@{}}
\toprule()
Fuel & Intensity \\
\midrule()
\endhead
ULSD & 77.19 \\
Biodiesel & 76.81 \\
RFG & 75.65 \\
CARBOB & 75.65 \\
Ethanol & 74.88 \\
Cng & 62.14 \\
\bottomrule()
\end{longtable}

\hypertarget{model_place_type_elasticities.csv}{%
\subsubsection{model\_place\_type\_elasticities.csv}\label{model_place_type_elasticities.csv}}

This file contains elasticities for four performance metrics:

\begin{itemize}
\tightlist
\item
  \textbf{VMT} -- Following the estimate of travel demand that incorporates induced demand, an adjustment is made to travel demand that accounts for changes in growth by the place types that are used in the model to describe urban form. These changes are interpreted as changes in design (intersection street density), accessibility (job accessibility by auto), distance to transit (nearest transit stop), density (population density) and diversity (land use mix). The effect on travel demand is determined as changes in VMT by these urban form categories, as shown in the table below. The elasticities that are shown in the table are multiplied by the D values for each place type. The D values are proportion values for each place type that are relative to the regional average, which is set to 1.0.
\item
  \textbf{VehicleTrips} -- The change in the number of vehicle trips is calculated using a set of elasticities from Index 4D Values (2001) that pivots from the current number of vehicle trips per capita based on the scenario's allocation of growth by place type. The elasticities shown in the table are applied to D values, which are proportional values for each place type that are relative to a regional average for that D value that is set to 1.0. The model reports the additional number of trips caused by the growth assumed in the scenario and not the regional total.
\item
  \textbf{TransitTrips} -- The change in the number of transit trips is calculated using a set of elasticities from Index 4D Values (2001) that pivots from the current number of transit trips per capita based on the scenario's allocation of growth by place type. The elasticities shown in the table are applied to D values, which are proportional values for each place type that are relative to a regional average for that D value that is set to 1.0. The model reports the additional number of trips caused by the growth assumed in the scenario and not the regional total.
\item
  \textbf{Walking} -- The elasticities shown in the table are applied to D values, which are proportional values for each place type that are relative to a regional average for that D value that is set to 1.0. The product of the elasticity and D value is applied to the place type growth quantities for the scenario to calculated the percentage increase or decrease in walking for new residents in the region relative to a the current place type distribution.
\end{itemize}

Here is a snapshot of the file:

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 8\tabcolsep) * \real{0.3793}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 8\tabcolsep) * \real{0.0862}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 8\tabcolsep) * \real{0.2069}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 8\tabcolsep) * \real{0.2069}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 8\tabcolsep) * \real{0.1207}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Parameters
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
VMT
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
VehicleTrips
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
TransitTrips
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Walking
\end{minipage} \\
\midrule()
\endhead
Density & -0.04 & -0.043 & 0.07 & 0.07 \\
Diversity & -0.09 & -0.051 & 0.12 & 0.15 \\
Design & -0.12 & -0.031 & 0.23 & 0.39 \\
Regional\_Accessibility & -0.2 & -0.036 & 0 & 0 \\
Distance\_to\_Transit & -0.05 & 0 & 0.29 & 0.15 \\
\bottomrule()
\end{longtable}

\hypertarget{model_place_type_relative_values.csv}{%
\subsubsection{model\_place\_type\_relative\_values.csv}\label{model_place_type_relative_values.csv}}

This file contains the \emph{D} values, which are proportional values for each of the 13 place types (\emph{Bzones}) that are relative to a regional average, for each of the five Ds used in VERPAT - design (intersection street density), accessibility (job accessibility by auto), distance to transit (nearest transit stop), density (population density) and diversity (land use mix).
Here is a snapshot of the file:

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.0735}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.1029}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.1324}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.0882}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.3235}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.2794}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Geo
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Density
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Diversity
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Design
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Regional\_Accessibility
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Distance\_to\_Transit
\end{minipage} \\
\midrule()
\endhead
Rur & 0.5 & 0.5 & 0.5 & 0.5 & 0.5 \\
Sub\_R & 0.75 & 0.75 & 0.75 & 0.75 & 0.75 \\
Sub\_E & 0.75 & 0.75 & 0.75 & 0.75 & 0.75 \\
Sub\_M & 1 & 1 & 1 & 0.75 & 0.75 \\
Sub\_T & 1 & 1 & 1 & 1 & 1 \\
CIC\_R & 1.2 & 1.2 & 1.2 & 1.2 & 1 \\
CIC\_E & 1.2 & 1.2 & 1.2 & 1.2 & 1 \\
CIC\_M & 1.2 & 1.2 & 1.2 & 1.2 & 1 \\
CIC\_T & 1.2 & 1.2 & 1.2 & 1.2 & 1.2 \\
UC\_R & 1.5 & 1.2 & 1.5 & 1.5 & 1.2 \\
UC\_E & 1.5 & 1.2 & 1.5 & 1.5 & 1.2 \\
UC\_M & 1.5 & 1.5 & 1.5 & 1.5 & 1.2 \\
UC\_T & 1.5 & 1.5 & 1.5 & 1.5 & 1.5 \\
\bottomrule()
\end{longtable}

\hypertarget{model_tdm_ridesharing.csv}{%
\subsubsection{model\_tdm\_ridesharing.csv}\label{model_tdm_ridesharing.csv}}

\textbf{Travel Demand Management: Ridesharing}: The ridesharing Travel Demand Management file contains parameters describing the effectiveness of ridesharing programs by place type. The proportion of employees participating in the ridesharing program is a policy input. This is converted into a proportion of working-age persons by using an assumed labor force participation rate (0.65) to sample working-age persons in households. The ridesharing sub-model then computes the anticipated level of VMT reduction resulting from the implementation of ridesharing, based on the place type the household lives in, using the effectiveness values shown in this parameter file. Previous studies have determined that the level of ridesharing participation will be less in the rural and suburban areas, as compared to the more-urban areas. Typically, more people will carpool in the more urbanized areas due to the presence of parking charges, potential difficulties in finding parking, and other disincentives that are typically present in more urbanized areas.
Here is a snapshot of the file:

\begin{longtable}[]{@{}ll@{}}
\toprule()
ModelGeo & Effectiveness \\
\midrule()
\endhead
Rur & 0 \\
Sub & 0.05 \\
CIC & 0.1 \\
UC & 0.15 \\
\bottomrule()
\end{longtable}

\hypertarget{model_tdm_transit.csv}{%
\subsubsection{model\_tdm\_transit.csv}\label{model_tdm_transit.csv}}

\textbf{Travel Demand Management: Transit Fares}: The transit fare Travel Demand Management files are parameters for the effectiveness (level of VMT reduction) and fare subsidy values for employer. The subsidized/discounted transit model begins by evaluating the level of participation within the region. Monte Carlo processes are used to identify which households participate in transit pass programs. The proportion of employees participating in this program is a policy input. This is converted into a proportion of working-age persons by using an assumed labor force participation rate (0.65) to sample working-age persons in households. The model then allows the selection of one of four potential subsidy levels (also a policy inputs), which influence the level of VMT reduction based on the level of subsidy applied to the place type. The anticipated level of VMT reduction is then further reduced to account for the proportion of work travel in overall daily travel.
Here is a snapshot of the file:

\begin{longtable}[]{@{}llllll@{}}
\toprule()
ModelGeo & Subsidy0 & Subsidy1 & Subsidy2 & Subsidy3 & Subsidy4 \\
\midrule()
\endhead
Rur & 0 & 0 & 0 & 0 & 0 \\
Sub & 0 & 0.02 & 0.033 & 0.079 & 0.2 \\
CIC & 0 & 0.034 & 0.073 & 0.164 & 0.2 \\
UC & 0 & 0.062 & 0.129 & 0.2 & 0.2 \\
\bottomrule()
\end{longtable}

\hypertarget{model_tdm_transitlevels.csv}{%
\subsubsection{model\_tdm\_transitlevels.csv}\label{model_tdm_transitlevels.csv}}

\textbf{Travel Demand Management: Transit Subsidy Levels}: This file contains the dollar value match to the subsidy levels used in \protect\hyperlink{model_tdm_transitcsv}{model\_tdm\_transit.csv} file.
Here is a snapshot of the file:

\begin{longtable}[]{@{}ll@{}}
\toprule()
SubsidyLevel & SubsidyValue.2000 \\
\midrule()
\endhead
Subsidy0 & 0 \\
Subsidy1 & 0.75 \\
Subsidy2 & 1.49 \\
Subsidy3 & 2.98 \\
Subsidy4 & 5.96 \\
\bottomrule()
\end{longtable}

\hypertarget{model_tdm_vanpooling.csv}{%
\subsubsection{model\_tdm\_vanpooling.csv}\label{model_tdm_vanpooling.csv}}

\textbf{Travel Demand Management: Vanpooling}: This file contains parameters describing the effectiveness in terms of VMT reductions for vanpooling programs across three levels of employee involvement.
The vanpool program sub-model operates by evaluating the likely level of participation. Monte Carlo processes are used to identify which households participate in vanpool programs. The proportion of employees participating in this program is a policy input. This is converted into a proportion of working-age persons by using an assumed labor force participation rate (0.65) to sample working-age persons in households. Those employers that would participate in the program are then categorized into three levels of involvement from low to medium to high. The level of involvement reflects the extent to which an employer would actively facilitate and promote vanpooling. For example, a low level of involvement might represent an employer who organizes only a minimal number of vanpools. The high level of involvement could represent an employer who has an extensive vanpooling program to cover a large number of employees. Based on the level of involvement, the reduction in VMT is estimated on the basis of the values in this file.
Here is a snapshot of the file:

\begin{longtable}[]{@{}ll@{}}
\toprule()
VanpoolingParticipation & VMTReduction \\
\midrule()
\endhead
Low & 0.003 \\
Medium & 0.0685 \\
High & 0.134 \\
\bottomrule()
\end{longtable}

\hypertarget{model_tdm_workschedule.csv}{%
\subsubsection{model\_tdm\_workschedule.csv}\label{model_tdm_workschedule.csv}}

\textbf{Travel Demand Management: Work Schedule}: This file contains parameters that describe the effectiveness for different participation levels for three different telecommuting or alternative work schedules.
The telecommuting or alternative work schedule model first evaluates the likely level of participation throughout the region in terms of telecommuting or alternatively-works schedules. Monte Carlo processes are used to identify which households participate in telecommuting programs. The proportion of employees participating in this program is a policy input. This is converted into a proportion of working-age persons by using an assumed labor force participation rate (0.65) to sample working-age persons in households. The model then determines the type of programs that might be implemented. Three potential alternatives are offered including:

\begin{itemize}
\tightlist
\item
  \textbf{4/40 Schedule}: 4 days per week with 40 hours per week
\item
  \textbf{9/80 Schedule}: working 4 days every other week with an average of 80 hours over 2 weeks
\item
  \textbf{Telecommuting}: Workers may work 1 to 2 days a week remotely
\end{itemize}

Once the option has been identified and the level of participation, the estimated VMT is determined on the basis of the parameters in this file.
Here is a snapshot of the file:

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 12\tabcolsep) * \real{0.2294}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 12\tabcolsep) * \real{0.1284}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 12\tabcolsep) * \real{0.1284}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 12\tabcolsep) * \real{0.1284}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 12\tabcolsep) * \real{0.1284}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 12\tabcolsep) * \real{0.1284}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 12\tabcolsep) * \real{0.1284}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
WorkSchedulePolicy
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Participation0
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Participation1
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Participation2
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Participation3
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Participation4
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Participation5
\end{minipage} \\
\midrule()
\endhead
Schedule980 & 0 & 0.0007 & 0.0021 & 0.0035 & 0.007 & 0.0175 \\
Schedule440 & 0 & 0.0015 & 0.0045 & 0.007 & 0.015 & 0.0375 \\
TelecommuteoneandhalfDays & 0 & 0.0022 & 0.0066 & 0.011 & 0.022 & 0.055 \\
\bottomrule()
\end{longtable}

\hypertarget{model_tdm_workschedulelevels.csv}{%
\subsubsection{model\_tdm\_workschedulelevels.csv}\label{model_tdm_workschedulelevels.csv}}

\textbf{Travel Demand Management: Work Schedule Participation Levels}: This file describes the proportion of employees participating in the program corresponding to the participation levels used in \emph{model\_tdm\_workschedule.csv} file.
Here is a snapshot of the file:

\begin{longtable}[]{@{}ll@{}}
\toprule()
ParticipationLevel & ParticipationValue \\
\midrule()
\endhead
Participation0 & 0 \\
Participation1 & 0.01 \\
Participation2 & 0.03 \\
Participation3 & 0.05 \\
Participation4 & 0.1 \\
Participation5 & 0.25 \\
\bottomrule()
\end{longtable}

\hypertarget{model_transportation_costs.csv}{%
\subsubsection{model\_transportation\_costs.csv}\label{model_transportation_costs.csv}}

\textbf{Transportation Costs}: This file contains unit cost rates for transportation infrastructure investments and operating costs and transit fare revenue. The parameters are used in the calculations of the transportation costs performance metrics.
The source for transit capital, operating costs, and fare revenue is the \href{https://www.transit.dot.gov/ntd}{NTD}, and in particular the National Transit Profile which is available on the NTDB website. Costs are available in a variety of index formats, e.g.~cost per revenue mile or hour; cost per passenger trip is used in VERPAT.
The source for highway infrastructure costs is FHWA's Highway Economic Requirements System model, or HERS. Information was obtained from Chapter 6 of the 2005 Technical Report for all US states (FHWA, 2005). Table 8-1 in HERS provides unit costs (per lane mile) for both Rural and Urban highway systems, and distinguishes among three functional classes: interstates, freeways and expressways; other principal arterials; and minor arterials and collectors. Costs estimates are provided for the following improvements:

\begin{itemize}
\tightlist
\item
  Reconstruction and widening
\item
  Reconstruct pavement
\item
  Resurface and widen lanes
\item
  Resurface pavement
\item
  Improve shoulders
\end{itemize}

Additional choices are offered to distinguish between adding a lane at ``normal'' vs.~``high cost'', and also for pavement realignment, also under normal vs.~high cost conditions. For practical reasons, it was decided to use only ``new construction'' (which also includes adding lanes) costs as the basis for the cost estimates, and to ignore the categories of reconstruction, resurfacing, and realignment. These construction costs include right of way, construction, and a ``small'' allowance for bridges and support facilities.
The infrastructure costs focus only on the ``urban'' system, not rural, which also makes it possible to differentiate by three size classes: Small Urban, Small Urbanized, and Large Urbanized. The numbers from HERS are in 2002 dollars; FHWA advises escalation to current dollars using its NHCCI, which is available online at \url{http://www.fhwa.dot.gov/policyinformation/nhcci.cfm}); the report in VERPAT escalates uses this Index to escalate to 2010 values.
The parameter values in this file are average values per lane mile, simplifying the calculations of highway costs to just differentiate investments in freeway vs.~arterial functional class roads.
Here is a snapshot of the file:

\begin{longtable}[]{@{}llll@{}}
\toprule()
SupplyClass & CapCosts.2000 & OpCosts.2000 & Fare.2000 \\
\midrule()
\endhead
Freeway & 17 & 0 & 0 \\
Arterial & 7 & 0 & 0 \\
Bus & 0.71 & 3.4 & 0.91 \\
Rail & 5.11 & 4.87 & 2.19 \\
\bottomrule()
\end{longtable}

\hypertarget{model_veh_mpg_by_year.csv}{%
\subsubsection{model\_veh\_mpg\_by\_year.csv}\label{model_veh_mpg_by_year.csv}}

\textbf{Vehicle fuel economy (\emph{model\_veh\_mpg\_by\_year.csv})}: This file contains the estimates and forecasts of average fuel economy and power economy in miles per gallon for autos, light trucks, heavy trucks (trucks) and miles per kilowatt for trains by vehicle model year. Note that this is not the fleet average for that year. It is the average for new vehicles sold in that year. The fuel economy is the same for all fuel types and is measured in gasoline equivalent gallons (i.e.~energy content of a gallon of gasoline). This file is used in the calculations of fuel consumption.
Here is a snapshot of the file:

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.1667}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.1667}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.1667}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.1667}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.1667}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.1667}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
ModelYear
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
AutoMpg
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
LtTruckMpg
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
TruckMpg
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
BusMpg
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
TrainMpg
\end{minipage} \\
\midrule()
\endhead
1975 & 15.1 & 12.7 & 5.1 & 4.2 & 0.098266 \\
1976 & 16.6 & 13.2 & 5.1 & 4.1 & 0.098266 \\
1977 & 17.4 & 14.1 & 5.1 & 4.1 & 0.098266 \\
1978 & 19.2 & 13.7 & 5.1 & 4 & 0.098266 \\
\includegraphics{./VERPAT_images/vdots.gif} & \includegraphics{./VERPAT_images/vdots.gif} & \includegraphics{./VERPAT_images/vdots.gif} & \includegraphics{./VERPAT_images/vdots.gif} & \includegraphics{./VERPAT_images/vdots.gif} & \includegraphics{./VERPAT_images/vdots.gif} \\
2046 & 63.7 & 41.1 & 5.6 & 4.8 & 0.121191 \\
2047 & 63.7 & 41.1 & 5.6 & 4.8 & 0.121191 \\
2048 & 63.7 & 41.1 & 5.6 & 4.8 & 0.121191 \\
2049 & 63.7 & 41.1 & 5.6 & 4.8 & 0.121191 \\
2050 & 63.7 & 41.1 & 5.6 & 4.8 & 0.121191 \\
\bottomrule()
\end{longtable}

\hypertarget{model_phev_range_prop_mpg_mpkwh.csv}{%
\subsubsection{model\_phev\_range\_prop\_mpg\_mpkwh.csv}\label{model_phev_range_prop_mpg_mpkwh.csv}}

\textbf{Plugin hybrid electric vehicles characteristics (\emph{model\_phev\_range\_prop\_mpg\_mpkwh.csv})}: This file contains the estimates and forecasts of range, fuel efficiency (mpg), power efficiency (mpkwh), and proportions of automobiles and light trucks that are plugin hybrid electric vehicles by vehicle model year. Note that this is not the fleet average for that year. It is the average of new vehicles sold in that year. This file is used in identification of plugin hybrid electric and electric vehicles. Here is a snapshot of the file:

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 16\tabcolsep) * \real{0.0874}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 16\tabcolsep) * \real{0.1262}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 16\tabcolsep) * \real{0.1165}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 16\tabcolsep) * \real{0.0874}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 16\tabcolsep) * \real{0.0680}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 16\tabcolsep) * \real{0.1553}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 16\tabcolsep) * \real{0.1456}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 16\tabcolsep) * \real{0.1165}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 16\tabcolsep) * \real{0.0971}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
ModelYear
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
AutoPhevRange
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
AutoPropPhev
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
AutoMpkwh
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
AutoMpg
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
LtTruckPhevRange
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
LtTruckPropPhev
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
LtTruckMpkwh
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
LtTruckMpg
\end{minipage} \\
\midrule()
\endhead
1975 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 \\
1976 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 \\
1977 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 \\
1978 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 \\
1979 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 \\
\includegraphics{./VERPAT_images/vdots.gif} & \includegraphics{./VERPAT_images/vdots.gif} & \includegraphics{./VERPAT_images/vdots.gif} & \includegraphics{./VERPAT_images/vdots.gif} & \includegraphics{./VERPAT_images/vdots.gif} & \includegraphics{./VERPAT_images/vdots.gif} & & & \\
2045 & 40 & 0.66 & 4.375 & 74.5 & 40 & 0.586666667 & 2.875 & 58.2 \\
2046 & 40 & 0.708 & 4.4 & 74.9 & 40 & 0.629333333 & 2.9 & 58.5 \\
2047 & 40 & 0.756 & 4.425 & 75.3 & 40 & 0.672 & 2.925 & 58.8 \\
2048 & 40 & 0.816 & 4.45 & 75.6 & 40 & 0.725333333 & 2.95 & 59.1 \\
2049 & 40 & 0.864 & 4.475 & 76 & 40 & 0.768 & 2.975 & 59.3 \\
2050 & 40 & 0.9 & 4.5 & 76.4 & 40 & 0.8 & 3 & 59.6 \\
\bottomrule()
\end{longtable}

\hypertarget{model_hev_prop_mpg.csv}{%
\subsubsection{model\_hev\_prop\_mpg.csv}\label{model_hev_prop_mpg.csv}}

\textbf{Hybrid electric vehicles characteristics (\emph{model\_hev\_prop\_mpg.csv})}: This file contains the estimates and forecasts of fuel efficiency (mpg), and proportions of automobiles and light trucks that are hybrid electric vehicles (that are neither plugin hybrid nor electric vehicle) by vehicle model year. Note that this is not the fleet average for that year. It is the average of new vehicles sold in that year. This file is used in identification of hybrid electric that are not plugin hybrid or electric vehicles. Here is a snapshot of the file:

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 8\tabcolsep) * \real{0.1579}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 8\tabcolsep) * \real{0.1930}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 8\tabcolsep) * \real{0.1754}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 8\tabcolsep) * \real{0.2456}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 8\tabcolsep) * \real{0.2281}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
ModelYear
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
AutoPropHev
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
AutoHevMpg
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
LtTruckPropHev
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
LtTruckHevMpg
\end{minipage} \\
\midrule()
\endhead
1975 & 0 & 0 & 0 & 0 \\
1976 & 0 & 0 & 0 & 0 \\
1977 & 0 & 0 & 0 & 0 \\
1978 & 0 & 0 & 0 & 0 \\
1979 & 0 & 0 & 0 & 0 \\
1980 & 0 & 0 & 0 & 0 \\
\includegraphics{./VERPAT_images/vdots.gif} & \includegraphics{./VERPAT_images/vdots.gif} & \includegraphics{./VERPAT_images/vdots.gif} & \includegraphics{./VERPAT_images/vdots.gif} & \includegraphics{./VERPAT_images/vdots.gif} \\
2046 & 0.981481481 & 74.2 & 0.736111111 & 55.4 \\
2047 & 0.981481481 & 74.5 & 0.736111111 & 55.6 \\
2048 & 1 & 74.9 & 0.75 & 55.9 \\
2049 & 1 & 75.2 & 0.75 & 56.1 \\
2050 & 1 & 75.5 & 0.75 & 56.3 \\
\bottomrule()
\end{longtable}

\hypertarget{model_ev_range_prop_mpkwh.csv}{%
\subsubsection{model\_ev\_range\_prop\_mpkwh.csv}\label{model_ev_range_prop_mpkwh.csv}}

\textbf{Electric vehicles characteristics (\emph{model\_ev\_range\_prop\_mpkwh.csv})}: This file contains the estimates and forecasts of range, power efficiency (mpkwh), and proportions of automobiles and light trucks that are electric vehicles by vehicle model year. Note that this is not the fleet average for that year. It is the average of new vehicles sold in that year. This file is used in identification of electric vehicles. Here is a snapshot of the file:

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 12\tabcolsep) * \real{0.1216}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 12\tabcolsep) * \real{0.1216}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 12\tabcolsep) * \real{0.1351}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 12\tabcolsep) * \real{0.1216}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 12\tabcolsep) * \real{0.1622}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 12\tabcolsep) * \real{0.1757}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 12\tabcolsep) * \real{0.1622}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
ModelYear
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
AutoRange
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
AutoPropEv
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
AutoMpkwh
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
LtTruckRange
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
LtTruckPropEv
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
LtTruckMpkwh
\end{minipage} \\
\midrule()
\endhead
1975 & 0 & 0 & 0 & 0 & 0 & 0 \\
1976 & 0 & 0 & 0 & 0 & 0 & 0 \\
1977 & 0 & 0 & 0 & 0 & 0 & 0 \\
1978 & 0 & 0 & 0 & 0 & 0 & 0 \\
1979 & 0 & 0 & 0 & 0 & 0 & 0 \\
\includegraphics{./VERPAT_images/vdots.gif} & \includegraphics{./VERPAT_images/vdots.gif} & \includegraphics{./VERPAT_images/vdots.gif} & \includegraphics{./VERPAT_images/vdots.gif} & \includegraphics{./VERPAT_images/vdots.gif} & \includegraphics{./VERPAT_images/vdots.gif} & \\
2046 & 277.5 & 0.72 & 4.4 & 185 & 0.56 & 2.9 \\
2047 & 283.125 & 0.75 & 4.425 & 188.75 & 0.583333333 & 2.925 \\
2048 & 288.75 & 0.795 & 4.45 & 192.5 & 0.618333333 & 2.95 \\
2049 & 294.375 & 0.855 & 4.475 & 196.25 & 0.665 & 2.975 \\
2050 & 300 & 0.9 & 4.5 & 200 & 0.7 & 3 \\
\bottomrule()
\end{longtable}

\hypertarget{json-inputs-2}{%
\subsubsection{JSON Inputs}\label{json-inputs-2}}

\hypertarget{annvmtinflator}{%
\subsubsection{AnnVmtInflator}\label{annvmtinflator}}

\textbf{Annual VMT inflator (\emph{AnnVmtInflator})}: Factor to convert VMT between annual and average daily amounts. It should be defined in \protect\hyperlink{model_parametersjson}{model\_parameters.json} as follows:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{\{}
    \DataTypeTok{"NAME"} \FunctionTok{:} \StringTok{"AnnVmtInflator"}\FunctionTok{,}
    \DataTypeTok{"VALUE"}\FunctionTok{:} \StringTok{"365"}\FunctionTok{,}
    \DataTypeTok{"TYPE"} \FunctionTok{:} \StringTok{"integer"}\FunctionTok{,}
    \DataTypeTok{"UNITS"} \FunctionTok{:} \StringTok{"DAYS"}\FunctionTok{,}
    \DataTypeTok{"PROHIBIT"} \FunctionTok{:} \StringTok{"c(\textquotesingle{}NA\textquotesingle{}, \textquotesingle{}\textless{} 0\textquotesingle{})"}\FunctionTok{,}
    \DataTypeTok{"ISELEMENTOF"} \FunctionTok{:} \StringTok{""}
\FunctionTok{\}}
\end{Highlighting}
\end{Shaded}

\hypertarget{basecostpermile}{%
\subsubsection{BaseCostPerMile}\label{basecostpermile}}

\textbf{Base cost per mile (\emph{BaseCostPerMile})}: Base cost per mile in dollars for transportation costs used in the travel demand model to initially represent travel as close to unconstrained by transportation costs. The transportation costs are then fully constrained later in the model as travel reductions caused by budget constraints are estimated. It should be defined in \protect\hyperlink{model_parametersjson}{model\_parameters.json} as follows:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{\{}
    \DataTypeTok{"NAME"} \FunctionTok{:} \StringTok{"BaseCostPerMile"}\FunctionTok{,}
    \DataTypeTok{"VALUE"}\FunctionTok{:} \StringTok{"0.04"}\FunctionTok{,}
    \DataTypeTok{"TYPE"} \FunctionTok{:} \StringTok{"compound"}\FunctionTok{,}
    \DataTypeTok{"UNITS"} \FunctionTok{:} \StringTok{"USD/MI"}\FunctionTok{,}
    \DataTypeTok{"PROHIBIT"} \FunctionTok{:} \StringTok{"c(\textquotesingle{}NA\textquotesingle{}, \textquotesingle{}\textless{} 0\textquotesingle{})"}\FunctionTok{,}
    \DataTypeTok{"ISELEMENTOF"} \FunctionTok{:} \StringTok{""}
\FunctionTok{\}}
\end{Highlighting}
\end{Shaded}

\hypertarget{dvmtbudgetprop}{%
\subsubsection{DvmtBudgetProp}\label{dvmtbudgetprop}}

\textbf{Dvmt budget proportion (\emph{DvmtBudgetProp})}: The proportion of household budget that can be allocated to transportation spending. The travel demand models includes a constraint that reduces household travel if too high a proportion of household spending is spent on transportation. It should be defined in \protect\hyperlink{model_parametersjson}{model\_parameters.json} as follows:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{\{}
    \DataTypeTok{"NAME"} \FunctionTok{:} \StringTok{"DvmtBudgetProp"}\FunctionTok{,}
    \DataTypeTok{"VALUE"}\FunctionTok{:} \StringTok{"0.1"}\FunctionTok{,}
    \DataTypeTok{"TYPE"} \FunctionTok{:} \StringTok{"double"}\FunctionTok{,}
    \DataTypeTok{"UNITS"} \FunctionTok{:} \StringTok{"multiplier"}\FunctionTok{,}
    \DataTypeTok{"PROHIBIT"} \FunctionTok{:} \StringTok{"c(\textquotesingle{}NA\textquotesingle{}, \textquotesingle{}\textless{} 0\textquotesingle{}, \textquotesingle{}\textgreater{} 1\textquotesingle{})"}\FunctionTok{,}
    \DataTypeTok{"ISELEMENTOF"} \FunctionTok{:} \StringTok{""}
\FunctionTok{\}}
\end{Highlighting}
\end{Shaded}

\hypertarget{fuelcost}{%
\subsubsection{FuelCost}\label{fuelcost}}

\textbf{Fuel cost (\emph{FuelCost})}: Average cost per gallon of fuel (before taxes are added). It should be defined in \protect\hyperlink{model_parametersjson}{model\_parameters.json} as follows:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{\{}
    \DataTypeTok{"NAME"} \FunctionTok{:} \StringTok{"FuelCost"}\FunctionTok{,}
    \DataTypeTok{"VALUE"}\FunctionTok{:} \StringTok{"1.82"}\FunctionTok{,}
    \DataTypeTok{"TYPE"} \FunctionTok{:} \StringTok{"compound"}\FunctionTok{,}
    \DataTypeTok{"UNITS"} \FunctionTok{:} \StringTok{"USD/GAL"}\FunctionTok{,}
    \DataTypeTok{"PROHIBIT"} \FunctionTok{:} \StringTok{"c(\textquotesingle{}NA\textquotesingle{}, \textquotesingle{}\textless{} 0\textquotesingle{})"}\FunctionTok{,}
    \DataTypeTok{"ISELEMENTOF"} \FunctionTok{:} \StringTok{""}
\FunctionTok{\}}
\end{Highlighting}
\end{Shaded}

\hypertarget{kwhcost}{%
\subsubsection{KwhCost}\label{kwhcost}}

\textbf{Power cost (\emph{KwhCost})}: Average cost per kwh of power consumption (before taxes are added). It should be defined in \protect\hyperlink{model_parametersjson}{model\_parameters.json} as follows:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{\{}
    \DataTypeTok{"NAME"} \FunctionTok{:} \StringTok{"KwhCost"}\FunctionTok{,}
    \DataTypeTok{"VALUE"}\FunctionTok{:} \StringTok{"0.257"}\FunctionTok{,}
    \DataTypeTok{"TYPE"} \FunctionTok{:} \StringTok{"compound"}\FunctionTok{,}
    \DataTypeTok{"UNITS"} \FunctionTok{:} \StringTok{"USD/KWH"}\FunctionTok{,}
    \DataTypeTok{"PROHIBIT"} \FunctionTok{:} \StringTok{"c(\textquotesingle{}NA\textquotesingle{}, \textquotesingle{}\textless{} 0\textquotesingle{})"}\FunctionTok{,}
    \DataTypeTok{"ISELEMENTOF"} \FunctionTok{:} \StringTok{""}
\FunctionTok{\}}
\end{Highlighting}
\end{Shaded}

\hypertarget{gastax}{%
\subsubsection{GasTax}\label{gastax}}

\textbf{Gas tax (\emph{GasTax})}: Average cost per gallon of fuel of gas taxes. It should be defined in \protect\hyperlink{model_parametersjson}{model\_parameters.json} as follows:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{\{}
    \DataTypeTok{"NAME"} \FunctionTok{:} \StringTok{"GasTax"}\FunctionTok{,}
    \DataTypeTok{"VALUE"}\FunctionTok{:} \StringTok{"0.424"}\FunctionTok{,}
    \DataTypeTok{"TYPE"} \FunctionTok{:} \StringTok{"compound"}\FunctionTok{,}
    \DataTypeTok{"UNITS"} \FunctionTok{:} \StringTok{"USD/GAL"}\FunctionTok{,}
    \DataTypeTok{"PROHIBIT"} \FunctionTok{:} \StringTok{"c(\textquotesingle{}NA\textquotesingle{}, \textquotesingle{}\textless{} 0\textquotesingle{})"}\FunctionTok{,}
    \DataTypeTok{"ISELEMENTOF"} \FunctionTok{:} \StringTok{""}
\FunctionTok{\}}
\end{Highlighting}
\end{Shaded}

\hypertarget{lttruckprop}{%
\subsubsection{LtTruckProp}\label{lttruckprop}}

\textbf{Light Truck Proportions (\emph{LtTruckProp})}: The proportion of household vehicles that are light trucks (SUVs, pickup trucks) as opposed to autos. It should be defined in \protect\hyperlink{model_parametersjson}{model\_parameters.json} as follows:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{\{}
    \DataTypeTok{"NAME"} \FunctionTok{:} \StringTok{"LtTruckProp"}\FunctionTok{,}
    \DataTypeTok{"VALUE"}\FunctionTok{:} \StringTok{"0.45"}\FunctionTok{,}
    \DataTypeTok{"TYPE"} \FunctionTok{:} \StringTok{"double"}\FunctionTok{,}
    \DataTypeTok{"UNITS"} \FunctionTok{:} \StringTok{"multiplier"}\FunctionTok{,}
    \DataTypeTok{"PROHIBIT"} \FunctionTok{:} \StringTok{"c(\textquotesingle{}NA\textquotesingle{}, \textquotesingle{}\textless{} 0\textquotesingle{})"}\FunctionTok{,}
    \DataTypeTok{"ISELEMENTOF"} \FunctionTok{:} \StringTok{""}
\FunctionTok{\}}
\end{Highlighting}
\end{Shaded}

\hypertarget{tranrevmiadjfactor}{%
\subsubsection{TranRevMiAdjFactor}\label{tranrevmiadjfactor}}

\textbf{Transit revenue adjustment factor (\emph{TranRevMiAdjFactor})}: Factor to convert transit revenue miles (i.e.~miles run in service on routes) to total transit vehicle miles operated to account for vehicle miles run while deadheading from depots to route endpoints. It should be defined in \protect\hyperlink{model_parametersjson}{model\_parameters.json} as follows:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{\{}
    \DataTypeTok{"NAME"} \FunctionTok{:} \StringTok{"TranRevMiAdjFactor"}\FunctionTok{,}
    \DataTypeTok{"VALUE"}\FunctionTok{:} \StringTok{"1.12"}\FunctionTok{,}
    \DataTypeTok{"TYPE"} \FunctionTok{:} \StringTok{"double"}\FunctionTok{,}
    \DataTypeTok{"UNITS"} \FunctionTok{:} \StringTok{"multiplier"}\FunctionTok{,}
    \DataTypeTok{"PROHIBIT"} \FunctionTok{:} \StringTok{"c(\textquotesingle{}NA\textquotesingle{}, \textquotesingle{}\textless{} 0\textquotesingle{})"}\FunctionTok{,}
    \DataTypeTok{"ISELEMENTOF"} \FunctionTok{:} \StringTok{""}
\FunctionTok{\}}
\end{Highlighting}
\end{Shaded}

\hypertarget{truckvmtgrowthmultiplier}{%
\subsubsection{TruckVmtGrowthMultiplier}\label{truckvmtgrowthmultiplier}}

\textbf{Truck vmt growth multiplier (\emph{TruckVmtGrowthMultiplier})}: Rate at which heavy truck VMT growth in relation to total regional household income growth in the region. A value of 1 indicates that heavy truck VMT grows at the same rate as total regional household income. A value less than 1 means slower growth in truck VMT, and greater than 1 means faster growth in truck VMT than total regional household income. It should be defined in \protect\hyperlink{model_parametersjson}{model\_parameters.json} as follows:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{\{}
    \DataTypeTok{"NAME"} \FunctionTok{:} \StringTok{"TruckVmtGrowthMultiplier"}\FunctionTok{,}
    \DataTypeTok{"VALUE"}\FunctionTok{:} \StringTok{"1"}\FunctionTok{,}
    \DataTypeTok{"TYPE"} \FunctionTok{:} \StringTok{"double"}\FunctionTok{,}
    \DataTypeTok{"UNITS"} \FunctionTok{:} \StringTok{"multiplier"}\FunctionTok{,}
    \DataTypeTok{"PROHIBIT"} \FunctionTok{:} \StringTok{"c(\textquotesingle{}NA\textquotesingle{}, \textquotesingle{}\textless{} 0\textquotesingle{})"}\FunctionTok{,}
    \DataTypeTok{"ISELEMENTOF"} \FunctionTok{:} \StringTok{""}
\FunctionTok{\}}
\end{Highlighting}
\end{Shaded}

\hypertarget{workvmtprop}{%
\subsubsection{WorkVmtProp}\label{workvmtprop}}

\textbf{Work VMT Proportion (\emph{WorkVmtProp})}: The proportion of household VMT that takes place for commute to work purposes; used to differentiate between travel purposes for use in estimating overall VMT reductions that are targeted at the commute to work. It should be defined in \protect\hyperlink{model_parametersjson}{model\_parameters.json} as follows:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{\{}
    \DataTypeTok{"NAME"} \FunctionTok{:} \StringTok{"WorkVmtProp"}\FunctionTok{,}
    \DataTypeTok{"VALUE"}\FunctionTok{:} \StringTok{"0.25"}\FunctionTok{,}
    \DataTypeTok{"TYPE"} \FunctionTok{:} \StringTok{"double"}\FunctionTok{,}
    \DataTypeTok{"UNITS"} \FunctionTok{:} \StringTok{"proportion"}\FunctionTok{,}
    \DataTypeTok{"PROHIBIT"} \FunctionTok{:} \StringTok{"c(\textquotesingle{}NA\textquotesingle{}, \textquotesingle{}\textless{} 0\textquotesingle{})"}\FunctionTok{,}
    \DataTypeTok{"ISELEMENTOF"} \FunctionTok{:} \StringTok{""}
\FunctionTok{\}}
\end{Highlighting}
\end{Shaded}

\hypertarget{validation-and-troubleshooting}{%
\chapter{Validation and Troubleshooting}\label{validation-and-troubleshooting}}

Each model run will produce a time stamped \texttt{Log.txt\ file}. This log file is the first thing that the user should reference in troubleshooting errors. The log file should point to which input files have errors and help to define the error. If a model is not producing a log file, that indicates a more deep-rooted issue related to the model set-up, installation, or one or more packages.

Other common errors users should watch out for include:

\begin{itemize}
\tightlist
\item
  Files having data for years other than model run years will generate an error, files can only have data for model run years
\item
  Consistent geography names across input files
\item
  Input files in different modules need to be consistent

  \begin{itemize}
  \tightlist
  \item
    Zero land area for an azone location type when there are non-zero values for households in that azone location type
  \item
    Zero land area for an azone location type when there are non-zero values for employment in that azone location type
  \end{itemize}
\end{itemize}

\hypertarget{validation-1}{%
\section{Validation}\label{validation-1}}

This section summarizes additional detail on the validation of VisionEval models with key considerations by concept. Each concept will highlight its respective model inputs and assumptions that can be changed to better match observed local patterns and trends. These outputs covered are only a handful that can be used to validate the VE model.

\hypertarget{household-synthesis-and-land-use-validation}{%
\subsection{Household Synthesis and Land Use Validation}\label{household-synthesis-and-land-use-validation}}

Two key metrics to validate are \textbf{population} and \textbf{income} due to the influential nature of these metrics on model results. Some additional considerations are as follows:

\begin{itemize}
\tightlist
\item
  The choice of geographies used in VisionEval can influence validation results. For example, if economic conditions or driver licensing rates vary significantly across the modeled area it might be a good idea to define Azones to reflect those differences.
\item
  The \texttt{VESimHouseholds} package processes PUMS data to derive parameters for several of its sub-modules. The default PUMS files in the \texttt{inst/extdata} folder from Oregon should be replaced with data for the area they are modeling. This is done by simply replacing the PUMS data in the \texttt{inst/extdata} folder with local data, which are then processed by several modules as part of a normal model run. This requires rebuilding the \texttt{VESimHousehold} package, more information can be found in the \protect\hyperlink{ve-buildprocess}{Module Build Process} chapter.
\item
  The average household size (\texttt{AveHhSize}) and proportion of one-person households (\texttt{Prop1PerHh}) can be set in the \texttt{azone\_hhsize\_targets.csv} file.
\item
  Care should be taken to match the real dollar amount of \texttt{azone\_per\_cap\_inc.csv} and other files with dollar values to the year specified in the file to account for inflation.
\item
  The relative employment rate by age group by Azone can be specified to match observed differences across a metropolitan area or levels at various points of economic cycles. Lower employment rates, especially in certain age groups, should be reflected in \texttt{azone\_relative\_employment.csv}. The relative employment rate is relative to the average employment rate for the worker group in the PUMS data (e.g., a value of 0.5 would be entered if the employment rate for 20-29 age group in one Azone was half the employment rate for persons in that age group in the metropolitan area).
\item
  The \texttt{VELandUse} package also uses the PUMS data, which can be further adjusted in two ways:

  \begin{itemize}
  \tightlist
  \item
    The mix of single family versus multi-family households will reflect local patterns if PUMS data for the modeled region are used instead of the default data from Oregon. See the {[} insert link to the build process PUMS case study{]}
  \item
    The proportion of households residing in mixed-use neighborhoods within each Bzone can optionally be set in the \texttt{bzone\_urban-mixed-use\_prop.csv} file. Such adjustments are subjective, as the definition of ``urban mixed-use'' neighborhoods \href{https://nhts.ornl.gov/2009/pub/DerivedAddedVariables2009.pdf}{derived from the Claritas data} in the \href{https://nhts.ornl.gov/}{NHTS} are imprecise.
  \end{itemize}
\end{itemize}

\hypertarget{household-travel-behavior-validation}{%
\subsection{Household Travel Behavior Validation}\label{household-travel-behavior-validation}}

One key metric to validate for household travel behavior is \textbf{household DVMT}. Because VisionEval models do not have a network, users should prioritize validating household DVMT using NHTS or local household travel survey data. Users can also use Highway Statistics reports or imputed from annual HPMS estimates to validate at higher levels of geography, such as the state or metropolitan area level.

\begin{itemize}
\tightlist
\item
  Care should be taken in choosing the validation targets to match model predictions. VE household travel modules predict household travel regardless of where the travel occurs within the modeled region. Therefore the results should be compared with household survey data where possible which provide similarly defined estimates.
\item
  Care should similarly be taken in comparing the model results with daily roadway VMT data, such as those reported in Highway Statistics reports or imputed from annual HPMS estimates. If such comparisons are made the model estimates of roadway DVMT calculated by the \texttt{CalculateRoadDvmt} module should be used for comparison (rather than HPMS data that is defined as all vehicles but only those miles on roadways within a specific geography).
\item
  If the modeled road DVMT estimates match for the base year but not for prior years the modeled household DVMT trends should be checked against road DVMT trends. In particular, check whether reduction of DVMT (or reduction of DVMT growth rate) observed during the \href{https://en.wikipedia.org/wiki/Great_Recession}{Great Recession} and increase in DVMT (or increase in the DVMT growth rate) afterwards are reflected in the modeled household DVMT. If not, the values in the following files should be checked and adjusted if warranted:
\item
  There are few opportunities to adjust the parameters in the \texttt{VEHouseholdTravel} package, as most are derived from the NHTS and PUMS input data. Note that the optionally specified driver licensing rates described above can substantially affect daily household VMT. It is possible to specify the percentage of household SOV travel diverted to bicycles in the \texttt{azone\_prop\_sov\_dvmt\_diverted.csv} file to better match observed local values.
\end{itemize}

\hypertarget{vehicles-and-fuels-validation}{%
\subsection{Vehicles and Fuels Validation}\label{vehicles-and-fuels-validation}}

Another important metric to validate is \textbf{vehicle ownership}, which has a strong correlation with household DVMT.

\begin{itemize}
\tightlist
\item
  If modeled DVMT matches validation data but fuel consumption does not (e.g.~light-duty vehicle fuel consumption reported in Highway Statistics), the values in \texttt{ldv\_powertrain\_characteristics.csv} for current and past years can be adjusted to achieve a match. Fuel consumption may not match for several reasons such as:

  \begin{itemize}
  \tightlist
  \item
    The definition of crossover vehicles as light trucks vs.~autos used in the vehicle type model does not match the average fuel consumption characteristics in the \texttt{ldv\_powertrain\_characteristics.csv} file.
  \item
    The average fuel consumption characteristics in \texttt{ldv\_powertrain\_characteristics.csv} do not represent real world fuel economy.
  \end{itemize}
\item
  Most of the parameters in the \texttt{VEHouseholdVehicles} package are self-calibrating. However, the relative driver licensing rate by age group can be coded in the \texttt{region\_hh\_driver\_adjust\_prop.csv} file and should be used to account for the reduction in driver licensing rates among young or elderly drivers.
\item
  Users can also use the \texttt{azone\_hh\_ave\_veh\_per\_driver.csv} to reduce or increase vehicle ownership at the Azone level. It should be noted that this file inherently reduces the sensitivity of the \texttt{AdjustVehicleOwnership} module.
\item
  If validation data are available for commercial service vehicles, heavy trucks, and public transit vehicles changes can be made to the respective powertrain characteristics files for those vehicle types to match observed values.
\item
  Rebuilding the \texttt{VEPowertrainsAndFuels} package is good practice. The default data inputs in the \texttt{VEPowertrainsAndFuels} package substantially affect modeled fuel consumption and vehicle emissions rates. These default inputs are contained in the \texttt{inst/extdata} folder of the source package. Note that the package needs to be built (installed) from the source package after adjustments have been made in order for the changes to have effect. more information can be found in the \protect\hyperlink{ve-buildprocess}{Module Build Process} chapter.
\end{itemize}

\hypertarget{congestion-and-roadway-travel-validation}{%
\subsection{Congestion and Roadway Travel Validation}\label{congestion-and-roadway-travel-validation}}

\begin{itemize}
\tightlist
\item
  The \texttt{VETravelPerformance} package is self-calibrating. However, the user must provide several estimates used as constraints during that process:

  \begin{itemize}
  \tightlist
  \item
    Estimates of urbanized area light-duty vehicle and heavy truck VMT (\texttt{UrbanLdvDvmt} and \texttt{UrbanHvyTrkDvmt}, respectively) must be coded in the \texttt{marea\_base\_year\_dvmt.csv} input file.
  \end{itemize}
\item
  The user must also provide a regional estimate of heavy truck VMT (\texttt{HvyTrkDvmt}) in the \texttt{region\_base\_year\_dvmt.csv} that is consistent with the urbanized area heavy truck VMT estimates.
\item
  The user should check the basis used for estimating commercial service VMT (\texttt{ComSvcDvmtGrowthBasis}) and heavy truck VMT (\texttt{HvyTrkDvmtGrowthBasis}).
\end{itemize}

\hypertarget{additional-customizations}{%
\section{Additional Customizations}\label{additional-customizations}}

The \texttt{VESimHouseholds} and \texttt{PowertrainsAndFuels} packages are the two that should be prioritized for re-estimating with local data. Users do have the option to customize or re-estimate other model packages based on local data. Some additional packages with built-in estimation scripts are described below.

Note: For a deeper dive into how to customize packages and the various data that is available for local estimation, users should reference the \protect\hyperlink{ve-estimation}{Estimation in VisionEval} and \protect\hyperlink{ve-buildprocess}{Module Build Process} chapters.

\begin{itemize}
\item
  \textbf{VETravelPerformance}: The \href{https://github.com/VisionEval/VisionEval-Dev/blob/development-next/sources/modules/VETravelPerformance/R/LoadDefaultRoadDvmtValues.R}{LoadDefaultRoadDvmtValues} script pulls in datasets from the 2010 Highway Statistics reports are used to calculate state and urbanized area travel statistics as described below. A data from the Transportation Energy Databook (Edition 31) are used to calculate the ratio of commercial service vehicle DVMT with household DVMT. These datasets are in the ``inst/extdata'' folder of the package. Documentation for these datasets are included. Advanced users may update the datasets if desired.
\item
  \textbf{BudgetHouseholdDvmt}: The CES data used to estimate the BudgetHouseholdDvmt model are included in \texttt{inst/extdata} folder of the source package in the \texttt{ces\_vehicle\_op-cost.csv} with documentation in \texttt{ces\_vehicle\_op-cost.txt}. The \texttt{ces.R} R script file contains the code used to download the raw CES dataset from the BLS website and process it to produce the dataset in the \texttt{ces\_vehicle\_op-cost.csv} file. CES data for the years 2003 to 2015 are used in model estimation. 2003 being the first year that the BLS included income subcategories for incomes greater than \$70,000. 2015 being the last year of complete data when the model was estimated.
\item
  \textbf{VETravelPerformance \& CalculateVehicleOperatingCost}: Vehicle maintenance, repair, and tire costs as a function of the vehicle age are calculated based on data from the American Automobile Association (AAA) and the Bureau of Labor Statistics (BLS). AAA publishes reports yearly on the cost of vehicle use by vehicle type over the first 5 years of the vehicle's life. The 2017 report, a copy of which is included as the `17-0013\_Your-Driving-Costs-Brochure-2017-FNL-CX-1.pdf' file in the \texttt{inst/extdata/sources} directory of this package, is used to calculate baseline MRT cost by vehicle type. Data from a BLS report, ``Beyond the Numbers, Prices and Spending, Americans' Aging Autos, BLS, May 2014, Vol.3/No.9'', are used to establish the relationship between MRT cost and vehicle age. A copy of the report is included as the `americans-aging-autos.pdf' file in the \texttt{inst/extdata/sources} directory of this package. This report includes estimates of average MRT cost by vehicle age category for all household vehicles. The MRT costs by vehicle type and age are calculated as the outer product of the AAA costs by vehicle type and the BLS ratio of MRT cost by vehicle age. Since the BLS data don't distinguish between vehicle types, it is assumed that the effect of age on MRT expenses is the same for all vehicle types.
\item
  \textbf{VETravelPerformance \& CalculateVehicleOperatingCost}: Default carbon cost values are from ``Technical Support Document: Technical Update of the Social Cost of Carbon for Regulatory Impact Analysis Under Executive Order 12866, Interagency Working Group on Social Cost of Greenhouse Gases, United States Government, August 2016''. A copy of the report is included as the `sc\_co2\_tsd\_august\_2016.pdf' file in the \texttt{inst/extdata} directory of this package. Carbon costs are estimated by year and assumed discount rate scenarios: 5\%, 3\%, 2.5\%. In addition, they are calculated for a lower probability but higher impact scenario. The default carbon costs used in the model are the values listed for the 3\% discount rate. Non-carbon social costs for other social costs are derived from an white paper prepared for ODOT to support the development of ODOT's statewide transportation strategy for reducing greenhouse gas emissions from the transportation sector. This paper is included as the `STS\_White\_Paper\_on\_External\_Costs\_9-21-2011.pdf' file in the \texttt{inst/extdata} directory of this package. The included social cost categories are air pollution, other resource pollution, energy security, safety, and noise.
\end{itemize}

\hypertarget{developing-scenarios}{%
\chapter{Developing Scenarios}\label{developing-scenarios}}

Strategic planning often requires the assessment of large numbers of future scenarios, each assessing a different combination of prioritizations, policy decisions, and constraints.

The VEScenarios module provides the capability to quickly set up, run, and visualize large numbers of VERSPM scenarios using a baseline scenario combined with multiple changes to model inputs.
After going to \texttt{../models/VERSPM\_Scenarios} folder, you will see multiple subfolders and scripts.

\includegraphics[width=1\textwidth,height=\textheight]{images/multiple_scenarios.PNG}

\hypertarget{verspm-base-model}{%
\section{VERSPM Base Model}\label{verspm-base-model}}

This directory contains the inputs and R script necessary to run the base scenario, as described above.

\hypertarget{defs-1}{%
\subsection{defs}\label{defs-1}}

\texttt{VE-RSPM\_Scenarios/defs} directory contains the same files as the \texttt{VERSPM\_base\_model/defs} directory, but the \texttt{model\_parameters.json} file differs between \texttt{VERSPM\_base\_model/defs} and\texttt{VE-RSPM\_Scenarios/defs} differs in that the latter
version contains just four parameters specifying the locations of inputs and outputs, as well as the number of processors (NWorkers) to use. The default is 4, but be sure to set this to a number appropriate to your machine.

\begin{verbatim}
[
  {
    "NAME": "ModelFolder",
    "VALUE": "VERSPM_base_model",
    "TYPE": "character",
    "UNITS": "NA",
    "PROHIBIT": "NA",
    "SIZE": 20,
    "ISELEMENTOF": ""
  },
  {
    "NAME": "ScenarioInputFolder",
    "VALUE": "scenario_inputs",
    "TYPE": "character",
    "UNITS": "NA",
    "PROHIBIT": "NA",
    "SIZE": 20,
    "ISELEMENTOF": ""
  },
  {
    "NAME" : "ScenarioOutputFolder",
    "VALUE": "scenarios",
   "TYPE": "character",
   "UNITS": "NA",
   "PROHIBIT": "NA",
   "SIZE": 20,
   "ISELEMENTOF": ""
  },
  {
    "NAME" : "NWorkers",
    "VALUE": "6",
    "TYPE" : "integer",
    "UNITS" : "NA",
    "PROHIBIT" : "c('NA', '< 0')",
    "ISELEMENTOF" : ""
  }
]
\end{verbatim}

\hypertarget{inputs}{%
\subsection{Inputs}\label{inputs}}

The \texttt{inputs} folder in \texttt{VERRSPM\_Scenarios} also differs from that in \texttt{VERSPM\_base\_model}. In this case, there is only a single file specifying the output data tables that should be exported as CSV files in the \texttt{outputs} directory.

\includegraphics[width=1\textwidth,height=\textheight]{images/VERSPM_scenarios.PNG}

\hypertarget{scenario_inputs}{%
\paragraph{scenario\_inputs}\label{scenario_inputs}}

Model scenarios are defined in terms of combinations of individual model input parameters and policy choices. The various inputs are defined in the \texttt{scenario\_inputs} folder.

Scenario inputs consist of eleven folders, one for each of a particular category of input, as described below. All eleven folders are required.

Within each folder, there are subfolders containing input files, one per specific input. Each of the folders must contain at least one subfolder named ``1'', defining the input for the base scenario. Subsequent numbered folders contain input files modifying parameters of interest, as shown in the screenshots below:

Model inputs not otherwise specified in the \texttt{scenario\_inputs} directory are drawn from files in \texttt{VERSPM\_base\_model/defs} and \texttt{VERSPM\_base\_model/inputs}

\includegraphics[width=1\textwidth,height=\textheight]{images/VERSPM_scenarios2.PNG}

The subfolder names and scenario inputs are defined as follows (input file to modify given in parentheses):

\begin{itemize}
\tightlist
\item
  B - Bicycles (\texttt{azone\_prop\_sov\_dvmt\_diverted.csv}) : Network improvements, incentives, and technologies that encourage bicycling and other light-weight vehicle travel

  \begin{itemize}
  \tightlist
  \item
    1 - Base bicycling percentage of SOV tours less than 20 miles (9.75\%)
  \item
    2 - Increase diversion of SOV tours to 20\%
  \end{itemize}
\item
  C - Vehicle Travel Cost (\texttt{azone\_hh\_veh\_own\_taxes.csv}) and (\texttt{region\_prop\_externalities\_paid.csv}) : Combination of fuel prices and charges to pay for roadway costs and possibly externalities

  \begin{itemize}
  \tightlist
  \item
    1 - No change in fuel prices or increase in roadway or externality charges
  \item
    2 - Keep the vehicle ownership cost the same
  \item
    3 - Higher climate cost and pay as you drive insurance
  \end{itemize}
\item
  D - DemandManagement (\texttt{bzone\_travel\_demand\_mgt.csv}) : Programs to encourage less private vehicle travel

  \begin{itemize}
  \tightlist
  \item
    1 - Baseline implementation of ITS
  \item
    2 - Increase the effectiveness of implementation of ITS
  \end{itemize}
\item
  E - Driving Efficiency (\texttt{marea\_operations\_deployment.csv}) and (\texttt{marea\_speed\_smooth\_ecodrive.csv}) and (\texttt{other\_ops\_effectiveness.csv}) : Driving efficiency by increasing implementation of ITS

  \begin{itemize}
  \tightlist
  \item
    1 - Base
  \item
    2 - Increased the proportion by 10\%\\
  \end{itemize}
\item
  F - Technology Mix and CI (\texttt{marea\_transit\_powertrain\_prop.csv}) and (\texttt{region\_carsvc\_powertrain\_prop.csv}) and (region\_comsvc\_powertrain\_prop.csv`) : Vehicle technology mix and carbon intensity of fuels.

  \begin{itemize}
  \tightlist
  \item
    1 - Baseline vehicle technology mix
  \item
    2 - Increased percentage of electric vehicles in household and commercial setting by 20\%\\
  \end{itemize}
\item
  G - Fuel Price (\texttt{azone\_fuel\_power\_cost.csv}) : Real fuel price in 2010 USD

  \begin{itemize}
  \tightlist
  \item
    1 - Baseline fuel price
  \item
    2 - Double fuel price
  \item
    3 - Quadruple fuel price
  \end{itemize}
\item
  I - Income (\texttt{azone\_fuel\_power\_cost.csv}) : Real average household income in 2010 USD

  \begin{itemize}
  \tightlist
  \item
    1 - Baseline household income
  \item
    2 - Income growth of 7\% w.r.t reference
  \item
    3 - Income growth of 14\% w.r.t reference
  \end{itemize}
\item
  L - LandUse (\texttt{azone\_hhsize\_targets.csv}) and (\texttt{bzone\_urban\_du\_proportions.csv}) : Distribution of population and employment by place type

  \begin{itemize}
  \tightlist
  \item
    1 - Base, Maintain current distribution
  \item
    2 - LU overlaps with HHsize + Population
  \end{itemize}
\item
  P - Parking (\texttt{bzone\_parking.csv}) : The extent of paid parking and its price

  \begin{itemize}
  \tightlist
  \item
    1 - Current extent and daily fee
  \item
    2 - Increase parking cost by 100\% and proportion charted by 10\%.
  \end{itemize}
\item
  T - Transit (\texttt{marea\_transit\_service.csv}) : The extent and frequency of transit service

  \begin{itemize}
  \tightlist
  \item
    1 - Current public transit service level
  \item
    2 - Double public transit service level
  \item
    3 - Quadruple public transit service level
  \end{itemize}
\item
  V - Vehicle Characteristics (\texttt{azone\_hh\_veh\_mean\_age.csv}) and (\texttt{azone\_lttrk\_prop}): The combination of fuel prices and vehicle travel charges to pay for roadways and to pay for externalities such as carbon pricing

  \begin{itemize}
  \tightlist
  \item
    1 - Base
  \item
    2 - Light truck proportion at 35\% of the fleet and the average vehicle age at 8 years
  \end{itemize}
\end{itemize}

Running all of these input values will result in 10368 total scenarios, which would take days to run. User usually does not need all the possible combinations of scenarios.
VE-RSPM Scenarios are grouped in 5 different categories which you can modify in \texttt{category\_config.json} :

\begin{itemize}
\tightlist
\item
  \textbf{Community Design} : Policies that seek to enable shorter trips and alternate modes such as promotion of mixed use land use, transit service, bicycling, and parking management. ( group of L, B, P , T )
\item
  \textbf{Marketing/Incentive} : Policies that improve driving efficiency such as ecodriving,and Intelligent Transportation System efforts, as well as programs that reduce auto demand such as carsharing, and home or work-based transportation demand management.( group of D, E )
\item
  \textbf{Pricing : Policies} that move towards true cost pricing such as road user fees to pay for the cost of operating, maintaining and improving roads, pay-as-you-drive (PAYD) insurance, and environmental impact fees such as a carbon tax. ( C )
\item
  \textbf{Vehicles/Fuels} : Factors representing changes to future vehicles and fuels ( group of V, F )
\item
  \textbf{Income} : Context factor on the assumed growth of statewide average per capita income ( I )
\end{itemize}

Depending on how many scenarios exist in each of these five groups, total number of scenarios will be determined.

To test the multi-scenario capability in less time, reduce the number of scenario inputs by deleting some of the numbered folders, making sure to retain the ``1'' folder for each of the six options.
Note that if you change the directory structure in scenario\_inputs, you will have to change \texttt{category\_config.json} and \texttt{scenario\_config.json} to match the new directory structure.

To modify the scenario inputs, the numbered subdirectories can be created or deleted. Each directory contains a single input file containing the modified model parameter.

\hypertarget{running-the-model-for-multiple-scenarios}{%
\paragraph{Running the model for multiple scenarios}\label{running-the-model-for-multiple-scenarios}}

Similar to base case the model can be run in the command line. To run the model using R, run the following commands:

\begin{verbatim}
scenario_rspm <- openModel('VERSPM_Scenarios')
scenario_rspm$run()
\end{verbatim}

After starting the run,model automatically builds scenarios by creating all possible combinations of settings found in scenario\_inputs. The scenarios to run are found in the newly created scenarios directory.

\includegraphics[width=1\textwidth,height=\textheight]{images/scenarios.PNG}

Each directory is essentially a copy of VERSPM\_base\_model, with inputs modified as specified in the scenario\_inputs directory. Each scenario directory contains the results of a model run with its own inputs, datastore, and log file.

When finished, the VE-RSPM Scenario Viewer will automatically open to display the results.

In detail, the model specified by the \texttt{run\_model.R} script. In this case, the script runs four modules that create the scenarios from the inputs, runs each and combines the results.

\includegraphics[width=1\textwidth,height=\textheight]{images/run_model_Scenario.PNG}

\hypertarget{case-studies}{%
\section{Case Studies}\label{case-studies}}

\hypertarget{using-visioneval-to-assess-bike-network-changes}{%
\subsection{Using VisionEval to Assess Bike Network Changes}\label{using-visioneval-to-assess-bike-network-changes}}

A 2020 OregonDOT-Metro-NITC research project being led by Joe Broach of Portland State University, will update VisionEval code (VE-RSPM) to enable VisionEval to respond to bike networks as perceived by differnt users. This includes the following elements.

In the current VE-RSPM light vehicle (e.g.~bicycle, electric bicycle, scooter) diversion module users specify the proportion of single-occupant vehicle (SOV) mileage diverted to light-vehicle travel in the base and future years. Historical value can be derived from household travel surveys bike usage; future year inputs are specified through aspirational goals or exploratory processes. Methods for generating realistic bicycle diversion input have not been established, and the inputs are hard to tie to specific investment actions. The exploratory or aspirational approaches can be useful for strategic planning purposes, providing decision makers with information about what levels of SOV diversion to bicycle travel are necessary to meet identified goals, but they do not offer information about the level of infrastructure or other transportation system investments needed to achieve the given levels of bicycle diversion.

The objective of the proposed research is to develop a new bicycle diversion module for the GreenSTEP-derived family of scenario planning models that internalizes bicycle diversion within the model by allowing users to specify changes in cycling infrastructure (and allow the model to estimate diversion), rather than assuming the outcome of cycling investments.

The research will develop new VE-RSPM modules to estimate SOV short-trip diversion, using input variables related to:
1. Socio-demographic and other household characteristics (drawing from existing variables in the model),
2. Land use characteristics (again drawing from existing variables in the model), and
3. Bicycle network characteristics.

Because VisionEval does not use an explicit network, bicycle network indicators will be used to represent the attractiveness of the bicycle facilities near the home location. The anticipated work includes pre-processors to extract bicycle network indicators from detailed bike network data, and potentially terrain data (from a digital elevation model) to capture the effects of hills on cycling propensity. Bicycle network indicators that may be included in VisionEval include the coverage, connectivity, and quality of bicycle facilities, and other measures shown in past research to have a significant relationship with cycling volumes, cycling mode share, or cycling attractiveness.

Several pre-processors are under consideration to develop connectivity and quality of bike networks, including: Bike Level of Traffic Stress (LTS)(\href{https://www.oregon.gov/ODOT/Planning/Documents/APMv2_Ch14.pdf}{see ODOT APMv2\_Ch14}), Highway Capacity Manual Multi-Modal LOS methods (\href{https://trid.trb.org/view/1326489}{see TRB}), and Scalable-Risk Analysis Method (\href{https://safety.fhwa.dot.gov/ped_bike/tools_solve/fhwasa17041/index.cfm}{SCRAM}).

The following figures highlight the selected changes that the model makes to the VE-RSPM packages and modules.

\begin{figure}
\centering
\includegraphics[width=1\textwidth,height=\textheight]{VE_PackagesModules/VERSPM_Bike.JPG}
\caption{Bike Network Research}
\end{figure}

Note: The project also intends to synchronize the disaggregate Bike Network assumptions with the Bike Module in Portland Metro's new Activity Based Model, where the full network, not just the aggregated metrics of VisionEval, could be utilized directly.

\hypertarget{user-impact}{%
\subsection{User Impact}\label{user-impact}}

The VisionEval Bike upgrades will change both methods, inputs and outputs. Methods will reflect the new functional form of travel by mode, and new data (updated NHTS2009 and EPA SLD land use data), leading to different outcomes for household travel by bike.

Users will likely need to provide more detailed bike network data (for historic and forecast years) to a pre-processor to develop Bzone inputs for use in VisionEval.

\hypertarget{status}{%
\subsection{Status}\label{status}}

The multi-agency research agreement was signed in early 2020. The Research team anticipates the project will last roughly 12-18 months. As with other VE research, additional efforts may be needed to implement the work within the VE codebase.

\hypertarget{ve-estimation}{%
\chapter{Estimation in VisionEval}\label{ve-estimation}}

\hypertarget{introduction}{%
\section{Introduction}\label{introduction}}

\hypertarget{overview-and-content-of-this-chapter}{%
\subsection{Overview and Content of this Chapter}\label{overview-and-content-of-this-chapter}}

Model estimation in VisionEval, either statistical estimation of model parameters (such as estimating linear regression or logit models) or tabulation of external data to produce model parameters, is designed to be integrated into VE modules and to take place during the build process of the modules into packages.

While this is convenient, the current process in existing VE modules has limitations:

\begin{itemize}
\tightlist
\item
  It is difficult to replace models with local or updated data due to complexity and lack of documentation
\item
  Several modules obscure data and parameters in the estimation portion of the package and therefore require package rebuilds if changes are made
\item
  Legacy model estimation (i.e., from earlier work prior to the development of the VE framework and which does not conform to the current recommended code structure for implementing modules in VE) is incorporated in several modules, e.g., modules that were part of the RPAT model
\item
  There are data discontinuities preventing users from estimating models where, for example, restricted or confidential data have been used to estimate model components (e.g., use of restricted spatial data in VETravelDemandMM) preventing the data from being included in the model package.
\end{itemize}

This chapter forms an element of work to improve the ability for those applying VE to incorporate newer publicly available datasets or custom datasets to develop locally relevant models for use in VE. This work will include defining a process for users to make use of the latest NHTS data, local HTS data, and local PUMS data, to update models estimated using older versions of the NHTS and PUMS data from different states or regions.

This chapter includes, in the section \protect\hyperlink{ve-estimation-classification}{VE Estimation Classification}, a classification of the source data and estimation approaches with respect to how important it might be to re-estimate models using localized and/or updated versions of the source information, and whether the estimation approach used in those packages forms a barrier to that re-estimation. The discussion is intended to provide input to the next step of work, which is designed approaches to improve the flexibility and usability of the estimation procedures in VE.

This chapter includes, in the section \protect\hyperlink{ve-modules-with-estimation}{VE Modules With Estimation}, a detailed catalog of estimated models in all of the VE modules and lists the underlying data used in the estimation process for each module.

Finally, this chapter includes, in the section \protect\hyperlink{ve-module-structure}{VE Module Structure}, a more complete discussion of the typical R package structure of modules in VE, include discussion of the location of data used in various types of estimation and the ideal structure of scripts that are used to estimate models, apply those estimated models, and to develop documentation. This section can be used as a reference for model developers to adjust models in existing packages (particularly those that do conform to the current VE structure and support estimation during the package build process) and how to set up new modules.

\hypertarget{key-concepts}{%
\subsection{Key Concepts}\label{key-concepts}}

There are several key concepts referred to in the discussions in this chapter, which are introduced here:

\begin{itemize}
\item
  VE modules and packages: A VE model, such as VE-State, is a sequences of models that simulate population, landuse, and travel in a region. Each element of that simulate is comprised of a module that simulates a step, such as developing the set of households in the region. The R package structure is used to house the code and data required to estimate and apply that step of the model. The R package structure is described in detail in \protect\hyperlink{ve-module-structure}{VE Module Structure}.
\item
  Model estimation and model application: model estimation is the process of either statistically estimating the parameters of models such as linear regression models from a dataset, or of creating a set of parameters in another way such as by deriving a distribution by tabulating a dataset. Those parameters and tabulation can then be used in the model application. The model application is the process of actually running a model scenario for the region that the model system has been implemented.
\item
  Package build process: R packages are comprised of R code, datasets, documentation, and other files. The build process, some details of which are included in the \protect\hyperlink{ve-module-structure}{VE Module Structure}, is the standard R process where a package is compiled into a form that can be installed and loaded, making the functions and datasets included in the package available to be called by R scripts in the model application. As a package is built its R code is executed, which provides the opportunity to run data processing and model estimation code to create data and model objects that are available when the model is applied. This process supports a typical workflow for a model developer where module data and data processing and model estimation scripts can be modified and then the changes will be reflected in the module R package when it is built, ready for use in model application. (As noted below, not all VE modules conform to this approach where estimation is updated during the build process).
\end{itemize}

\hypertarget{ve-estimation-classification}{%
\section{VE Estimation Classification}\label{ve-estimation-classification}}

There are several main estimation methods used in current VE modules. Their characteristics are discussed here with particular focus on places where the methods already lend themselves to updates and places where the current approach makes updates to the package by users more difficult. The specific data sources and approaches used for each module is cataloged in detail in the section \protect\hyperlink{ve-modules-with-estimation}{VE Modules With Estimation} below.

\hypertarget{modules-importing-data-from-venhts2001}{%
\subsection{Modules importing data from VENHTS2001}\label{modules-importing-data-from-venhts2001}}

The VENHTS2001 module processes the 2001 NHTS publicly available datasets to create a household dataset which is augmented with other public data on transport supply. The built VENHTS2001 package can then be used in other modules to support model estimation. For example, the VEHouseholdTravel uses the data output by the VENHTS2001 package to estimate its various travel demand models. There are instances of a second round of dependencies, where models estimated using the data from the VENHTS2001 package are used in the estimation of additional models, for example in the VEPowertrainsAndFuels module. During a complete build of VE, where all packages are built, the order of package building needs to be cognizant of these dependencies -- packages functions, model objects, and datasets required in order to estimate models need to be built first.

The general approach is shown here:

\begin{verbatim}
* VENHTS2001
  + Make2001NHTSDataset: process NHTS data and add FHWA HPMS and FTA NTD
  + Creates NHTS data frame on package build
* VEHouseholdTravel
  + CalculateAltModeTrips: estimates models of household transit trips, walk trips, and bike trips
  + CalculateHouseholdDvmt: estimates models of household average daily vehicle miles traveled
  + (other components in VEHouseholdTravel also estimate models with VENHTS2001)
  + Creates estimated model objects on package build
* VEHouseholdVehicles
  + AssignDrivers: estimates model to assign drivers by age group to each household
  + (other components in VEHouseholdVehicles also estimate models with VENHTS2001)
  + Creates estimated model objects on package build
* VEPowertrainsAndFuels
  + AssignHhVehiclePowertrain: 
    - estimates model to assign a powertrain type to each household vehicle. 
    - uses the VEHouseholdTravel::DvmtModel_ls, which is based on VENHTS2001, for estimation
    - Creates estimated model objects on package build
  
\end{verbatim}

This sequential and modularized approach, where data processing is contained in one package, and then those data are used to support estimation in several other modules, lends itself well to incorporating updated datasets. In this case, alternative versions of the NHTS might be substituted for the 2001 NHTS, or a local household travel survey could be used in place of the NHTS, as long as the output format currently used in the VENHTS2001 package was conformed with.

The development requirements here are:

\begin{itemize}
\tightlist
\item
  A method to select between different household travel source data during the package build process.
\item
  A documented approach to developing alternative household travel survey source data in the correct format.
\item
  NHTS 2009 and NHTS 2017 packages consistent with the NHTS 2001 package to allow for substitution with newer versions of the NHTS.
\end{itemize}

\hypertarget{modules-using-confidential-nhts-data}{%
\subsection{Modules using confidential NHTS data}\label{modules-using-confidential-nhts-data}}

The use of publicly available data for model estimation, where the data and estimation scripts are included in modules and are freely available to model users, is an attractive aspect of VE.

A new package developed using the NHTS 2009, VETravelDemandMM, doesn't fully conform to this ideal. Estimation in this package incorporates neighborhood land use characteristics around each of the NHTS households taken from the EPA's Smart Location Database. However, the connection between the NHTS and the SLD requires the data item describing the Census block group of the household, which is a confidential data item only provided to researchers by FHWA following the completion of a non-disclosure process.

In this case, estimated model objects can be included in the package but the estimation data cannot be included, preventing easy re-estimation of the models by other developers.

The development requirements here are:

\begin{itemize}
\tightlist
\item
  Consider alternative methods for attributing the NHTS with the neighborhood land use variables that might not require confidentiality requirements.
\end{itemize}

\hypertarget{modules-imported-from-rpat}{%
\subsection{Modules imported from RPAT}\label{modules-imported-from-rpat}}

VERPAT is the VE implementation of the RPAT model, which was originally developed as part of the SHRP 2 C16 project. While the RPAT model was converted to run as a set of VE modules, the modules do not incorporate model estimation during package build. In most cases, RPAT used models imported from the GreenSTEP model, which were later incorporated into VE and form the basis of many of the models still used in, for example, the VEHouseholdTravel module.

If VERPAT is to be maintained, it would be of benefit to re-establish the connections back to the model estimation processes used in modules such as VEHouseholdTravel and VEHouseholdVehicles

The development requirements here are:

\begin{itemize}
\tightlist
\item
  Identify the specific connections between VERPAT models and the locations where those models are now estimated in VE modules.
\item
  Replace the hardcoded models and imported model objects currently used in VERPAT modules with references to the models estimated during a build of VE. This would allow, for example, connections to updated NHTS data and/or local household travel survey data discussed above.
\end{itemize}

\hypertarget{modules-estimated-with-local-data}{%
\subsection{Modules estimated with local data}\label{modules-estimated-with-local-data}}

In some cases, locally specific data were used to develop model inputs and estimate models that are incorporated into modules. One example is the use of the Census Public User Microdata Sample (PUMS) for Oregon, which is used to estimate income models and to develop probability distributions used in the VESimHouseholds package.

Ideally, the implementation of a VE model in another state would replace the Oregon data with a local dataset. The data are also from 2001, and would ideally be replaced with a more recent version of the PUMS data, for example from the American Community Survey (ACS) 5 year data or an alternative local data source.

The development requirements here are:

\begin{itemize}
\tightlist
\item
  Documentation of an approach to replace the 2001 Oregon data with an alternative data source
\item
  Consider the development of a separate package or module in VESimHouseholds to process a selected state or region's ACS data via an automatic download or API call to source the data.
\end{itemize}

\hypertarget{modules-estimated-with-other-types-of-data}{%
\subsection{Modules estimated with other types of data}\label{modules-estimated-with-other-types-of-data}}

Several other data sources are used in the development of modules, particularly those that deal with vehicle operations and congestion. These are generally reasonably well documented and the estimation process is traceable from data included in the modules through an estimation script to a final model object. The estimation work could be considered for updating by model users where local conditions are sufficiently different from those covered in the original estimation date, or over time as the original estimation data being aged and are superseded.

The development requirements here are:

\begin{itemize}
\tightlist
\item
  Further refine the cataloging of estimation work in this chapter to clearly identify each data source and its vintage.
\item
  Identify the public availability (or not) of the data source and whether more recent data are already available.
\end{itemize}

\hypertarget{ve-modules-with-estimation}{%
\section{VE Modules With Estimation}\label{ve-modules-with-estimation}}

The table lists the VE modules that currently exist and whether they include estimation. Several of the modules, notably the original and more recently developed household travel modules (VEHouseholdTravel and VETravelDemandMM) contain a high number of estimated models. Several modules include no estimation.

\begin{tabular}{l|r}
\hline
Module Name & Estimated Components and Models\\
\hline
VEHouseholdTravel & 22\\
\hline
VEHouseholdVehicles & 7\\
\hline
VELandUse & 5\\
\hline
VENHTS2001 & 1\\
\hline
VEPowertrainsAndFuels & 2\\
\hline
VEReports & 1\\
\hline
VEScenario & 2\\
\hline
VESimHouseholds & 4\\
\hline
VESimLandUse & 5\\
\hline
VESimLandUseData & 1\\
\hline
VESimTransportSupply & 1\\
\hline
VESyntheticFirms & 0\\
\hline
VETransportSupply & 1\\
\hline
VETransportSupplyUse & 3\\
\hline
VETravelDemandMM & 24\\
\hline
VETravelPerformance & 9\\
\hline
\end{tabular}

This section describes the estimation that takes places in each module.

\hypertarget{venhts2001}{%
\subsection{VENHTS2001}\label{venhts2001}}

2001 NHTS data package This package processes the 2001 NHTS publically available datasets to create a household dataset which is used for model estimations. The NHTS data are augmented with transportation service data.
This module contains the following step(s):

\hypertarget{make2001nhtsdataset}{%
\subsubsection{Make2001NHTSDataset}\label{make2001nhtsdataset}}

This module creates a data frame of data from the publically available data from the 2001 National Household Travel Survey (NHTS) augmented with data on metropolitan area freeway supply and transit supply. The package produces a data frame of values by household.

\begin{itemize}
\tightlist
\item
  Data sources include NHTS 2001, FHWA HPMS, FTA NTD
\item
  Model types include Tabulation of data by household
\item
  Estimation uses the following methods: Package build
\item
  Documented in R Script only, no md file produced
\end{itemize}

The models in this model step are:

\begin{itemize}
\tightlist
\item
  Model name: Processed NHTS 2001 Dataset

  \begin{itemize}
  \tightlist
  \item
    Model type: Tabulation of data by household
  \item
    Estimation data: inst/extdata/highway\_statistics.csv, inst/extdata/uza\_bus\_eq\_rev\_mi.csv, NHTS data downloaded from ``\url{https://raw.githubusercontent.com/gregorbj/NHTS2001/master/data}'' if not already present in data-raw
  \item
    Estimation method: Package build
  \item
    Estimation script: R/Make2001NHTSDataset.r
  \item
    Model object: data-raw/Dt\_df.rda, data-raw/Hh\_df.rda, data-raw/Per\_df.rda, data-raw/ToursByHh\_df.Rda, data-raw/Veh\_df.rda
  \item
    Notes: Original data are housed in another repository and downloaded and processed if that has not already been done before, checks for presence of processed files in data-raw before initiating new download. The outputs from this module are used in the estimation of many other modules (notes by VE2001 in Estimation data field)
  \end{itemize}
\end{itemize}

\hypertarget{vehouseholdtravel}{%
\subsection{VEHouseholdTravel}\label{vehouseholdtravel}}

VisionEval module for calculating household vehicle travel and travel by other modes (public transit, walk, bike)
This module contains the following step(s):

\hypertarget{applydvmtreductions}{%
\subsubsection{ApplyDvmtReductions}\label{applydvmtreductions}}

This module applies the computed proportional reductions in household DVMT due to the application of travel demand management programs and the diversion of single-occupant vehicle travel to bicycles, electric bicycles, or other light-weight vehicles. It also computes added bike trips due to the diversion.

This module step has no estimated parameters or other model types derived from data.

\hypertarget{calculatealtmodetrips}{%
\subsubsection{CalculateAltModeTrips}\label{calculatealtmodetrips}}

This module calculates household transit trips, walk trips, and bike trips. The models are sensitive to household DVMT so they are run after all household DVMT adjustments (e.g.~to account for cost on household DVMT) are made.

\begin{itemize}
\tightlist
\item
  Data sources include NHTS 2001
\item
  Model types include Hurdle
\item
  Estimation uses the following methods: Package build
\item
  Documented in inst/module\_docs/CalculateAltModeTrips.md
\end{itemize}

The models in this model step are:

\begin{itemize}
\tightlist
\item
  Model name: Metropolitan Walk Trip Model

  \begin{itemize}
  \tightlist
  \item
    Model type: Hurdle
  \item
    Estimation data: VE2001NHTS::Hh\_df
  \item
    Estimation method: Package build
  \item
    Estimation script: R/CalculateAltModeTrips.R
  \item
    Model object: data/AltModeModels\_ls.rda
  \item
    Notes: Sources estimation data from the VE NHTS 2001 package.
  \end{itemize}
\item
  Model name: Nonmetropolitan Walk Trip Model

  \begin{itemize}
  \tightlist
  \item
    Model type: Hurdle
  \item
    Estimation data: VE2001NHTS::Hh\_df
  \item
    Estimation method: Package build
  \item
    Estimation script: R/CalculateAltModeTrips.R
  \item
    Model object: data/AltModeModels\_ls.rda
  \item
    Notes: Sources estimation data from the VE NHTS 2001 package.
  \end{itemize}
\item
  Model name: Metropolitan Bike Trip Model

  \begin{itemize}
  \tightlist
  \item
    Model type: Hurdle
  \item
    Estimation data: VE2001NHTS::Hh\_df
  \item
    Estimation method: Package build
  \item
    Estimation script: R/CalculateAltModeTrips.R
  \item
    Model object: data/AltModeModels\_ls.rda
  \item
    Notes: Sources estimation data from the VE NHTS 2001 package.
  \end{itemize}
\item
  Model name: Nonmetropolitan Bike Trip Model

  \begin{itemize}
  \tightlist
  \item
    Model type: Hurdle
  \item
    Estimation data: VE2001NHTS::Hh\_df
  \item
    Estimation method: Package build
  \item
    Estimation script: R/CalculateAltModeTrips.R
  \item
    Model object: data/AltModeModels\_ls.rda
  \item
    Notes: Sources estimation data from the VE NHTS 2001 package.
  \end{itemize}
\item
  Model name: Metropolitan Transit Trip Model

  \begin{itemize}
  \tightlist
  \item
    Model type: Hurdle
  \item
    Estimation data: VE2001NHTS::Hh\_df
  \item
    Estimation method: Package build
  \item
    Estimation script: R/CalculateAltModeTrips.R
  \item
    Model object: data/AltModeModels\_ls.rda
  \item
    Notes: Sources estimation data from the VE NHTS 2001 package.
  \end{itemize}
\item
  Model name: Nonmetropolitan Transit Trip Model

  \begin{itemize}
  \tightlist
  \item
    Model type: Hurdle
  \item
    Estimation data: VE2001NHTS::Hh\_df
  \item
    Estimation method: Package build
  \item
    Estimation script: R/CalculateAltModeTrips.R
  \item
    Model object: data/AltModeModels\_ls.rda
  \item
    Notes: Sources estimation data from the VE NHTS 2001 package.
  \end{itemize}
\end{itemize}

\hypertarget{calculatehouseholddvmt}{%
\subsubsection{CalculateHouseholdDvmt}\label{calculatehouseholddvmt}}

This module models household average daily vehicle miles traveled as a function of household characteristics, vehicle ownership, and attributes of the neighborhood and metropolitan area where the household resides

\begin{itemize}
\tightlist
\item
  Data sources include NHTS 2001
\item
  Model types include Linear regression
\item
  Estimation uses the following methods: Package build
\item
  Documented in inst/module\_docs/CalculateHouseholdDvmt.md
\end{itemize}

The models in this model step are:

\begin{itemize}
\tightlist
\item
  Model name: metropolitan household power-transformed simulated average DVMT linear model

  \begin{itemize}
  \tightlist
  \item
    Model type: Linear regression
  \item
    Estimation data: VE2001NHTS::Hh\_df
  \item
    Estimation method: Package build
  \item
    Estimation script: R/CalculateHouseholdDvmt.R
  \item
    Model object: data/DvmtModel\_ls.rda
  \item
    Notes: Sources estimation data from the VE NHTS 2001 package. The final linear regression model is estimated following a multistep process that estimates a series of models to simulate annual travel from survey day travel
  \end{itemize}
\item
  Model name: non-metropolitan household power-transformed simulated average DVMT linear model

  \begin{itemize}
  \tightlist
  \item
    Model type: Linear regression
  \item
    Estimation data: VE2001NHTS::Hh\_df
  \item
    Estimation method: Package build
  \item
    Estimation script: R/CalculateHouseholdDvmt.R
  \item
    Model object: data/DvmtModel\_ls.rda
  \item
    Notes: Sources estimation data from the VE NHTS 2001 package. The final linear regression model is estimated following a multistep process that estimates a series of models to simulate annual travel from survey day travel
  \end{itemize}
\item
  Model name: 95th percentile DVMT model for metropolitan households

  \begin{itemize}
  \tightlist
  \item
    Model type: Linear regression
  \item
    Estimation data: VE2001NHTS::Hh\_df
  \item
    Estimation method: Package build
  \item
    Estimation script: R/CalculateHouseholdDvmt.R
  \item
    Model object: data/DvmtModel\_ls.rda
  \item
    Notes: Sources estimation data from the VE NHTS 2001 package. The final linear regression model is estimated following a multistep process that estimates a series of models to simulate annual travel from survey day travel
  \end{itemize}
\item
  Model name: 95th percentile DVMT model for non-metropolitan households

  \begin{itemize}
  \tightlist
  \item
    Model type: Linear regression
  \item
    Estimation data: VE2001NHTS::Hh\_df
  \item
    Estimation method: Package build
  \item
    Estimation script: R/CalculateHouseholdDvmt.R
  \item
    Model object: data/DvmtModel\_ls.rda
  \item
    Notes: Sources estimation data from the VE NHTS 2001 package. The final linear regression model is estimated following a multistep process that estimates a series of models to simulate annual travel from survey day travel
  \end{itemize}
\end{itemize}

\hypertarget{calculatevehicletrips}{%
\subsubsection{CalculateVehicleTrips}\label{calculatevehicletrips}}

This module calculates average daily vehicle trips for households consistent with the household DVMT. An average trip length model is applied to estimate average length of household trips reflecting the characteristics of the household and the place where they live. The average trip length is divided into the average household DVMT to get an estimate of average number of daily vehicle trips.

\begin{itemize}
\tightlist
\item
  Data sources include NHTS 2001
\item
  Model types include Linear regression
\item
  Estimation uses the following methods: Package build
\item
  Documented in inst/module\_docs/CalculateVehicleTrips.md
\end{itemize}

The models in this model step are:

\begin{itemize}
\tightlist
\item
  Model name: metropolitan model~of average vehicle trip length

  \begin{itemize}
  \tightlist
  \item
    Model type: Linear regression
  \item
    Estimation data: VE2001NHTS::Hh\_df
  \item
    Estimation method: Package build
  \item
    Estimation script: R/CalculateVehicleTrips.R
  \item
    Model object: data/VehTrpLenModel\_ls.rda
  \item
    Notes: Sources estimation data from the VE NHTS 2001 package. The final linear regression model is estimated following a two step process
  \end{itemize}
\item
  Model name: non-metropolitan model~of average vehicle trip length

  \begin{itemize}
  \tightlist
  \item
    Model type: Linear regression
  \item
    Estimation data: VE2001NHTS::Hh\_df
  \item
    Estimation method: Package build
  \item
    Estimation script: R/CalculateVehicleTrips.R
  \item
    Model object: data/VehTrpLenModel\_ls.rda
  \item
    Notes: Sources estimation data from the VE NHTS 2001 package. The final linear regression model is estimated following a two step process
  \end{itemize}
\end{itemize}

\hypertarget{divertsovtravel}{%
\subsubsection{DivertSovTravel}\label{divertsovtravel}}

This module reduces household single-occupant vehicle (SOV) travel to achieve goals that are inputs to the model. The purpose of this module is to enable users to do `what if' analysis of the potential of light-weight vehicles (e.g.~bicycles, electric bikes, electric scooters) and infrastructure to support their use to reduce SOV travel

\begin{itemize}
\tightlist
\item
  Data sources include NHTS 2001
\item
  Model types include Linear regression
\item
  Estimation uses the following methods: Package build
\item
  Documented in inst/module\_docs/DivertSovTravel.md
\end{itemize}

The models in this model step are:

\begin{itemize}
\tightlist
\item
  Model name: Model of Proportion of DVMT in Qualifying SOV Tours

  \begin{itemize}
  \tightlist
  \item
    Model type: Linear regression
  \item
    Estimation data: VE2001NHTS::Hh\_df
  \item
    Estimation method: Package build
  \item
    Estimation script: R/DivertSovTravel.R
  \item
    Model object: data/SovModel\_ls.rda
  \item
    Notes: Sources estimation data from the VE NHTS 2001 package. The final linear regression model is estimated following a two step process
  \end{itemize}
\item
  Model name: Metropolitan Area Model of Average Length of Trips in Qualifying SOV Tours

  \begin{itemize}
  \tightlist
  \item
    Model type: Linear regression
  \item
    Estimation data: VE2001NHTS::Hh\_df
  \item
    Estimation method: Package build
  \item
    Estimation script: R/DivertSovTravel.R
  \item
    Model object: data/SovModel\_ls.rda
  \item
    Notes: Sources estimation data from the VE NHTS 2001 package.
  \end{itemize}
\item
  Model name: Non-Metropolitan Area Model of Average Length of Trips in Qualifying SOV Tours

  \begin{itemize}
  \tightlist
  \item
    Model type: Linear regression
  \item
    Estimation data: VE2001NHTS::Hh\_df
  \item
    Estimation method: Package build
  \item
    Estimation script: R/DivertSovTravel.R
  \item
    Model object: data/SovModel\_ls.rda
  \item
    Notes: Sources estimation data from the VE NHTS 2001 package.
  \end{itemize}
\end{itemize}

\hypertarget{calculateinduceddemand}{%
\subsubsection{CalculateInducedDemand}\label{calculateinduceddemand}}

This module calculates average daily vehicle miles traveld for households. It also calculates average DVMT, daily consumption of fuel (in gallons), and average daily Co2 equivalent greenhouse emissions for all vehicles.

This module step has no estimated parameters or other model types derived from data.

\hypertarget{calculatepolicyvmt}{%
\subsubsection{CalculatePolicyVmt}\label{calculatepolicyvmt}}

This module models adjusts the VMT for the policies entered for the scenario. The outputs form this module contains `Policy' as the suffix in their names

\begin{itemize}
\tightlist
\item
  Data sources include NHTS 2001
\item
  Model types include Linear regression
\item
  Estimation uses the following methods: Parameters hardcoded in script
\item
  Documented in R Script only, no md file produced
\end{itemize}

The models in this model step are:

\begin{itemize}
\tightlist
\item
  Model name: Metropolitan light vehicle ownership model

  \begin{itemize}
  \tightlist
  \item
    Model type: Linear regression
  \item
    Estimation data: NA
  \item
    Estimation method: Parameters hardcoded in script
  \item
    Estimation script: R/CalculatePolicyVmt.R
  \item
    Model object: data/LtVehOwnModels\_ls.rda
  \item
    Notes: This module has no estimated model parameters, derived from RPAT scripts. Original source of models is generally GreenSTEP models estimated with NHTS 2001 data, See inst/extdata/GreenSTEP\_.RData
  \end{itemize}
\item
  Model name: Non-Metropolitan light vehicle ownership model

  \begin{itemize}
  \tightlist
  \item
    Model type: Linear regression
  \item
    Estimation data: NA
  \item
    Estimation method: Parameters hardcoded in script
  \item
    Estimation script: R/CalculatePolicyVmt.R
  \item
    Model object: data/LtVehOwnModels\_ls.rda
  \item
    Notes: This module has no estimated model parameters, derived from RPAT scripts. Original source of models is generally GreenSTEP models estimated with NHTS 2001 data, See inst/extdata/GreenSTEP\_.RData
  \end{itemize}
\item
  Model name: Average single-occupant vehicle (SOV) travel proportion model

  \begin{itemize}
  \tightlist
  \item
    Model type: Linear regression
  \item
    Estimation data: NA
  \item
    Estimation method: Parameters hardcoded in script
  \item
    Estimation script: R/CalculatePolicyVmt.R
  \item
    Model object: data/AveSovPropModels\_ls.rda
  \item
    Notes: This module has no estimated model parameters, derived from RPAT scripts. Original source of models is generally GreenSTEP models estimated with NHTS 2001 data, See inst/extdata/GreenSTEP\_.RData
  \end{itemize}
\end{itemize}

\hypertarget{calculatetraveldemand}{%
\subsubsection{CalculateTravelDemand}\label{calculatetraveldemand}}

This module calculates average daily vehicle miles traveld for households. It also calculates average DVMT, daily consumption of fuel (in gallons), and average daily Co2 equivalent greenhouse emissions for all vehicles.

\begin{itemize}
\tightlist
\item
  Data sources include NHTS 2001 and ?
\item
  Model types include Linear regression and Tabulation of data by vehicle vintage
\item
  Estimation uses the following methods: Parameters hardcoded in script and Data file in data-raw/PhevModelData\_ls.rda
\item
  Documented in R Script only, no md file produced
\end{itemize}

The models in this model step are:

\begin{itemize}
\tightlist
\item
  Model name: DVMT assignment models for metropolitan households (Ave DVMT, 95th percentile DVMT, and max DVMT)

  \begin{itemize}
  \tightlist
  \item
    Model type: Linear regression
  \item
    Estimation data: NA
  \item
    Estimation method: Parameters hardcoded in script
  \item
    Estimation script: R/CalculateTravelDemand.R
  \item
    Model object: data/DvmtLmModels\_ls.rda
  \item
    Notes: This module has no estimated model parameters, derived from RPAT scripts. Original source of models is generally GreenSTEP models estimated with NHTS 2001 data, See inst/extdata/GreenSTEP\_.RData
  \end{itemize}
\item
  Model name: DVMT assignment models for non-metropolitan households (Ave DVMT, 95th percentile DVMT, and max DVMT)

  \begin{itemize}
  \tightlist
  \item
    Model type: Linear regression
  \item
    Estimation data: NA
  \item
    Estimation method: Parameters hardcoded in script
  \item
    Estimation script: R/CalculateTravelDemand.R
  \item
    Model object: data/DvmtLmModels\_ls.rda
  \item
    Notes: This module has no estimated model parameters, derived from RPAT scripts. Original source of models is generally GreenSTEP models estimated with NHTS 2001 data, See inst/extdata/GreenSTEP\_.RData
  \end{itemize}
\item
  Model name: PHEV/HEV model: fixed characteristics files for PHEVs and HEVs from RPAT model

  \begin{itemize}
  \tightlist
  \item
    Model type: Tabulation of data by vehicle vintage
  \item
    Estimation data: data-raw/PhevModelData\_ls.rda
  \item
    Estimation method: Data file in data-raw/PhevModelData\_ls.rda
  \item
    Estimation script: R/CalculateTravelDemand.R
  \item
    Model object: data/PhevModelData\_ls.rda
  \item
    Notes: This module has no estimated model parameters, derived from RPAT scripts. Data file is a scenario input in GreenSTEP
  \end{itemize}
\end{itemize}

\hypertarget{calculatetraveldemandfuture}{%
\subsubsection{CalculateTravelDemandFuture}\label{calculatetraveldemandfuture}}

This module calculates average daily vehicle miles traveld for households. It also calculates average DVMT, daily consumption of fuel (in gallons), and average daily Co2 equivalent greenhouse emissions for all vehicles.

This module step has no estimated parameters or other model types derived from data.

\hypertarget{initialize}{%
\subsubsection{Initialize}\label{initialize}}

This module processes optional roadway DVMT and operations inputs. The optional roadway DVMT inputs allow users to specify base year roadway DVMT by vehicle type and how the DVMT by type splits across road classes. If these data are not provided, the model calculates values based on default data.

This module step has no estimated parameters or other model types derived from data.

\hypertarget{loaddefaultvalues}{%
\subsubsection{LoadDefaultValues}\label{loaddefaultvalues}}

This module processes default carbon intensity of electricity consumption for all counties

\begin{itemize}
\tightlist
\item
  Data sources include ?
\item
  Model types include Tabulation of data
\item
  Estimation uses the following methods: Data file in inst/extdata/power\_co2.csv
\item
  Documented in R Script only, no md file produced
\end{itemize}

The models in this model step are:

\begin{itemize}
\tightlist
\item
  Model name: C02 from Electricity

  \begin{itemize}
  \tightlist
  \item
    Model type: Tabulation of data
  \item
    Estimation data: inst/extdata/power\_co2.csv
  \item
    Estimation method: Data file in inst/extdata/power\_co2.csv
  \item
    Estimation script: R/LoadDefaultValues.R
  \item
    Model object: data/TravelDemandDefaults\_ls.rda
  \item
    Notes: This module has no estimated model parameters, derived from RPAT scripts. Uses deafult Power data, which are included in the inst/extdata fold
  \end{itemize}
\end{itemize}

\hypertarget{vehouseholdvehicles}{%
\subsection{VEHouseholdVehicles}\label{vehouseholdvehicles}}

Vehicle ownership simulation package for VisionEval This package contains modules that work in the VisionEval framework to calculate vehicle ownership and to adjust ownership based on participation in carsharing programs
This module contains the following step(s):

\hypertarget{assigndrivers}{%
\subsubsection{AssignDrivers}\label{assigndrivers}}

This module assigns drivers by age group to each household as a function of the numbers of persons and workers by age group, the household income, land use characteristics, and public transit availability. Users may specify the relative driver licensing rate relative to the model estimation data year in order to account for observed or projected changes in licensing rates.

\begin{itemize}
\tightlist
\item
  Data sources include NHTS 2001
\item
  Model types include Binary Logit
\item
  Estimation uses the following methods: Package build
\item
  Documented in inst/module\_docs/AssignDrivers.md
\end{itemize}

The models in this model step are:

\begin{itemize}
\tightlist
\item
  Model name: Metropolitan Driver (license) Binary Model

  \begin{itemize}
  \tightlist
  \item
    Model type: Binary Logit
  \item
    Estimation data: VE2001NHTS::Hh\_df
  \item
    Estimation method: Package build
  \item
    Estimation script: R/AssignDrivers.R
  \item
    Model object: data/DriverModel\_ls.rda
  \item
    Notes: Sources estimation data from the VE NHTS 2001 package.
  \end{itemize}
\item
  Model name: Non-metropolitan Driver (license) Binary Model

  \begin{itemize}
  \tightlist
  \item
    Model type: Binary Logit
  \item
    Estimation data: VE2001NHTS::Hh\_df
  \item
    Estimation method: Package build
  \item
    Estimation script: R/AssignDrivers.R
  \item
    Model object: data/DriverModel\_ls.rda
  \item
    Notes: Sources estimation data from the VE NHTS 2001 package.
  \end{itemize}
\end{itemize}

\hypertarget{assignvehicleage}{%
\subsubsection{AssignVehicleAge}\label{assignvehicleage}}

This module assigns vehicle ages to each household vehicle. Vehicle age is assigned as a function of the vehicle type (auto or light truck), household income, and assumed mean vehicle age by vehicle type and Azone. Car service vehicles are assigned an age based on input assumptions with no distinction between vehicle type.

\begin{itemize}
\tightlist
\item
  Data sources include NHTS 2001
\item
  Model types include Joint Probability Distributions
\item
  Estimation uses the following methods: Package build
\item
  Documented in inst/module\_docs/AssignVehicleAge.md
\end{itemize}

The models in this model step are:

\begin{itemize}
\tightlist
\item
  Model name: Joint probability distribution

  \begin{itemize}
  \tightlist
  \item
    Model type: Joint Probability Distributions
  \item
    Estimation data: VE2001NHTS::Hh\_df
    VE2001NHTS::Veh\_df
  \item
    Estimation method: Package build
  \item
    Estimation script: R/AssignVehicleAge.R
  \item
    Model object: data/VehicleAgeModel\_ls.rda
  \item
    Notes: Sources estimation data from the VE NHTS 2001 package.
  \end{itemize}
\end{itemize}

\hypertarget{assignvehicleownership}{%
\subsubsection{AssignVehicleOwnership}\label{assignvehicleownership}}

This module determines the number of vehicles owned or leased by each household as a function of household characteristics, land use characteristics, and transportation system characteristics.

\begin{itemize}
\tightlist
\item
  Data sources include NHTS 2001
\item
  Model types include Hurdle
\item
  Estimation uses the following methods: Package build
\item
  Documented in inst/module\_docs/AssignVehicleOwnership.md
\end{itemize}

The models in this model step are:

\begin{itemize}
\tightlist
\item
  Model name: Metropolitan Binary Logit Vehicle Ownership Model

  \begin{itemize}
  \tightlist
  \item
    Model type: Hurdle
  \item
    Estimation data: VE2001NHTS::Hh\_df
  \item
    Estimation method: Package build
  \item
    Estimation script: R/AssignVehicleOwnership.R
  \item
    Model object: data/AutoOwnModels\_ls.rda
  \item
    Notes: Sources estimation data from the VE NHTS 2001 package.
  \end{itemize}
\item
  Model name: Non-metropolitan Binary Logit Vehicle Ownership Model

  \begin{itemize}
  \tightlist
  \item
    Model type: Hurdle
  \item
    Estimation data: VE2001NHTS::Hh\_df
  \item
    Estimation method: Package build
  \item
    Estimation script: R/AssignVehicleOwnership.R
  \item
    Model object: data/AutoOwnModels\_ls.rda
  \item
    Notes: Sources estimation data from the VE NHTS 2001 package.
  \end{itemize}
\end{itemize}

\hypertarget{assignvehicletype}{%
\subsubsection{AssignVehicleType}\label{assignvehicletype}}

This module identifies how many household vehicles are light trucks and how many are automobiles. Light trucks include pickup trucks, sport utility vehicles, vans, and any other vehicle not classified as a passenger car. Automobiles are vehicles classified as passenger cars.

\begin{itemize}
\tightlist
\item
  Data sources include NHTS 2001
\item
  Model types include Binary Logit
\item
  Estimation uses the following methods: Package build
\item
  Documented in inst/module\_docs/AssignVehicleType.md
\end{itemize}

The models in this model step are:

\begin{itemize}
\tightlist
\item
  Model name: Truck or Car binary logit

  \begin{itemize}
  \tightlist
  \item
    Model type: Binary Logit
  \item
    Estimation data: VE2001NHTS::Hh\_df
  \item
    Estimation method: Package build
  \item
    Estimation script: R/AssignVehicleType.R
  \item
    Model object: data/VehicleTypeModel\_ls.rda
  \item
    Notes: Sources estimation data from the VE NHTS 2001 package.
  \end{itemize}
\end{itemize}

\hypertarget{calculatevehicleowncost}{%
\subsubsection{CalculateVehicleOwnCost}\label{calculatevehicleowncost}}

This module calculates average vehicle ownership cost for each vehicle based on the vehicle type and age using data from the American Automobile Association (AAA).

\begin{itemize}
\tightlist
\item
  Data sources include AAA Costs
\item
  Model types include Log-Linear Depreciation
\item
  Estimation uses the following methods: Package build\\
\item
  Documented in inst/module\_docs/CalculateVehicleOwnCost.md
\end{itemize}

The models in this model step are:

\begin{itemize}
\tightlist
\item
  Model name: (log) Linear Age-Depreciation model

  \begin{itemize}
  \tightlist
  \item
    Model type: Log-Linear Depreciation
  \item
    Estimation data: inst/extdata/aaa\_vehicle\_ownership\_costs.txt
  \item
    Estimation method: Package build\\
  \item
    Estimation script: R/CalculateVehicleOwnCost.R
  \item
    Model object: data/VehOwnCost\_ls.rda
  \item
    Notes: Uses AAA car ownership and depreciation model data
  \end{itemize}
\end{itemize}

\hypertarget{createvehicletable}{%
\subsubsection{CreateVehicleTable}\label{createvehicletable}}

This module creates a vehicle table and populates it with household ID and geography fields.

This module step has no estimated parameters or other model types derived from data.

\hypertarget{adjustvehicleownership}{%
\subsubsection{AdjustVehicleOwnership}\label{adjustvehicleownership}}

This module adjusts household vehicle ownership based on a comparison of the cost of owning a vehicle per mile of travel compared to the cost per mile of using a car service where the level of service is high. The determination of whether car services are substituted for ownership also depends on input assumptions regarding the average likelihood that an owner would substitute car services for a household vehicle.

This module step has no estimated parameters or other model types derived from data.

\hypertarget{velanduse}{%
\subsection{VELandUse}\label{velanduse}}

Land Use simulation package for VisionEval This package contains a number of modules that work in the VisionEval framework to calculate land use characteristics.
This module contains the following step(s):

\hypertarget{assigncarsvcavailability}{%
\subsubsection{AssignCarSvcAvailability}\label{assigncarsvcavailability}}

This module reads in user specified data and assigns car service availability in Bzones.

This module step has no estimated parameters or other model types derived from data.

\hypertarget{assigndemandmanagement}{%
\subsubsection{AssignDemandManagement}\label{assigndemandmanagement}}

This module assigns demand management program participation to households and to workers.

\begin{itemize}
\tightlist
\item
  Data sources include NHTS 2001 and default data specified in CSV
\item
  Model types include Proportions
\item
  Estimation uses the following methods: Package build\\
\item
  Documented in inst/module\_docs/AssignDemandManagement.md
\end{itemize}

The models in this model step are:

\begin{itemize}
\tightlist
\item
  Model name: Proportional VMT Reduction Estimation

  \begin{itemize}
  \tightlist
  \item
    Model type: Proportions
  \item
    Estimation data: VE2001NHTS::Hh\_df
    VE2001NHTS::HhTours\_df
    inst/extdata/tdm\_parameters.csv
  \item
    Estimation method: Package build\\
  \item
    Estimation script: R/AssignDemandManagement.R
  \item
    Model object: data/TdmModel\_ls.rda
  \item
    Notes: Sources estimation data from the VE NHTS 2001 package and default user specifications
  \end{itemize}
\end{itemize}

\hypertarget{assigndevtypes}{%
\subsubsection{AssignDevTypes}\label{assigndevtypes}}

This module assigns households to development types: Urban (located within an urbanized area boundary) and Rural (located outside of an urbanized area boundary).

This module step has no estimated parameters or other model types derived from data.

\hypertarget{assignloctypes}{%
\subsubsection{AssignLocTypes}\label{assignloctypes}}

This module assigns households to location types: Urban (located within an urbanized area boundary), Town (located in a smaller urban area that does not have enough population to qualify as an urbanized area), and Rural (located in an area characterized by low density dispersed development).

This module step has no estimated parameters or other model types derived from data.

\hypertarget{assignparkingrestrictions}{%
\subsubsection{AssignParkingRestrictions}\label{assignparkingrestrictions}}

This module identifies parking restrictions and prices affecting households at their residences, workplaces, and other places they are likely to visit in the urban area.

This module step has no estimated parameters or other model types derived from data.

\hypertarget{calculate4dmeasures}{%
\subsubsection{Calculate4DMeasures}\label{calculate4dmeasures}}

This module calculates several 4D measures by Bzone including density, diversity (i.e.~mixing of land uses), transportation network design, and destination accessibility

This module step has no estimated parameters or other model types derived from data.

\hypertarget{calculateurbanmixmeasures}{%
\subsubsection{CalculateUrbanMixMeasures}\label{calculateurbanmixmeasures}}

This module calculates an urban mixed-use measure based on the 2001 National Household Travel Survey measure of the tract level urban/rural indicator

\begin{itemize}
\tightlist
\item
  Data sources include NHTS 2001
\item
  Model types include Binary Logit
\item
  Estimation uses the following methods: Package build\\
\item
  Documented in inst/module\_docs/CalculateUrbanMixMeasure.md
\end{itemize}

The models in this model step are:

\begin{itemize}
\tightlist
\item
  Model name: Probability that household is urban mixed-use (binary logit)

  \begin{itemize}
  \tightlist
  \item
    Model type: Binary Logit
  \item
    Estimation data: VE2001NHTS::Hh\_df
  \item
    Estimation method: Package build\\
  \item
    Estimation script: R/CalculateUrbanMixMeasure.R
  \item
    Model object: data/UrbanMixModel\_ls.rda
  \item
    Notes: Sources estimation data from the VE NHTS 2001 package.
  \end{itemize}
\end{itemize}

\hypertarget{locateemployment}{%
\subsubsection{LocateEmployment}\label{locateemployment}}

This module places employment in Bzones based on input assumptions of employment by type and Bzone

This module step has no estimated parameters or other model types derived from data.

\hypertarget{predicthousing}{%
\subsubsection{PredictHousing}\label{predicthousing}}

This module assigns a housing type, either single-family (SF) or multifamily (MF) to regular households based on the respective supplies of SF and MF dwelling units in the housing market to which the household is assigned (i.e.~the Azone the household is assigned to) and on household characteristics.

\begin{itemize}
\tightlist
\item
  Data sources include PUMS (processed in VESimHouseholds)
\item
  Model types include Binomial Logit \& IPF
\item
  Estimation uses the following methods: Package build\\
\item
  Documented in inst/module\_docs/PredictHousing.md
\end{itemize}

The models in this model step are:

\begin{itemize}
\tightlist
\item
  Model name: Binary logit single family or multifamily dwelling and IPF to balance results

  \begin{itemize}
  \tightlist
  \item
    Model type: Binomial Logit \& IPF
  \item
    Estimation data: VESimHouseholds::Hh\_df
  \item
    Estimation method: Package build\\
  \item
    Estimation script: R/PredictHousing.R
  \item
    Model object: data/HouseTypeModel\_ls.rda
  \item
    Notes: Sources estimation from Census PUMS prepared in the VESimHousehold package
  \end{itemize}
\end{itemize}

\hypertarget{calculatebaseplacetypes}{%
\subsubsection{CalculateBasePlaceTypes}\label{calculatebaseplacetypes}}

This module calculates place types for households and firms for the base year.

\begin{itemize}
\tightlist
\item
  Data sources include NHTS 2001
\item
  Model types include Multinomial Logit
\item
  Estimation uses the following methods: Data file in data-raw/HhAllocationModelCoeff.rda
\item
  Documented in R Script only, no md file produced
\end{itemize}

The models in this model step are:

\begin{itemize}
\tightlist
\item
  Model name: MNL model of household allocation to place types based on household structures and income

  \begin{itemize}
  \tightlist
  \item
    Model type: Multinomial Logit
  \item
    Estimation data: data-raw/HhAllocationModelCoeff.rda
  \item
    Estimation method: Data file in data-raw/HhAllocationModelCoeff.rda
  \item
    Estimation script: R/CalculateBasePlaceTypes.R
  \item
    Model object: data/HhAllocationModelCoeff\_df.rda
  \item
    Notes: This module has no estimated model parameters, model was estimated in the development of RPAT and transferred as a model object saved in data-raw.
  \end{itemize}
\end{itemize}

\hypertarget{calculatefutureplacetypes}{%
\subsubsection{CalculateFuturePlaceTypes}\label{calculatefutureplacetypes}}

This module calculates place types for households and firms for the future year.

\begin{itemize}
\tightlist
\item
  Data sources include NHTS 2001
\item
  Model types include Multinomial Logit
\item
  Estimation uses the following methods: Data file in data-raw/HhAllocationModelCoeff.rda
\item
  Documented in R Script only, no md file produced
\end{itemize}

The models in this model step are:

\begin{itemize}
\tightlist
\item
  Model name: MNL model of household allocation to place types based on household structures and income

  \begin{itemize}
  \tightlist
  \item
    Model type: Multinomial Logit
  \item
    Estimation data: data-raw/HhAllocationModelCoeff.rda
  \item
    Estimation method: Data file in data-raw/HhAllocationModelCoeff.rda
  \item
    Estimation script: R/CalculateFuturePlaceTypes.R
  \item
    Model object: data/HhAllocationModelCoeff\_df.rda
  \item
    Notes: This module has no estimated model parameters, model was estimated in the development of RPAT and transferred as a model object saved in data-raw.
  \end{itemize}
\end{itemize}

\hypertarget{vepowertrainsandfuels}{%
\subsection{VEPowertrainsAndFuels}\label{vepowertrainsandfuels}}

VisionEval module for calculating energy consumption and emissions from transportation. Includes modules for inputting energy consumption characteristics of different vehicle technologies, carbon intensities of different fuels, functions for calculating energy consumption and emissions from household, commercial, and public transit travel.
This module contains the following step(s):

\hypertarget{assignhhvehiclepowertrain}{%
\subsubsection{AssignHhVehiclePowertrain}\label{assignhhvehiclepowertrain}}

This module assigns a powertrain type to each household vehicle. The powertrain types are internal combustion engine vehicle (ICEV), hybrid electric vehicle (HEV), plug-in hybrid electric vehicle (PHEV), and battery electric vehicles (BEV). The module also assigns related characteristics to household vehicles

\begin{itemize}
\tightlist
\item
  Data sources include NHTS 2001
\item
  Model types include lookup tables\\
\item
  Estimation uses the following methods: Package build\\
\item
  Documented in inst/module\_docs/AssignHhVehiclePowertrain.md
\end{itemize}

The models in this model step are:

\begin{itemize}
\tightlist
\item
  Model name: calculate the proportions of PHEV vehicle travel powered by electricity vs.~fuel

  \begin{itemize}
  \tightlist
  \item
    Model type: lookup tables\\
  \item
    Estimation data: VEHouseholdTravel::DvmtModel\_ls
  \item
    Estimation method: Package build\\
  \item
    Estimation script: R/AssignHhVehiclePowertrain.R
  \item
    Model object: data/PhevElecProp\_ls.rda
  \item
    Notes: Sources models estimated in the VEHouseholdTravel module that were estimated using data in the VE NHTS 2001 package
  \end{itemize}
\end{itemize}

\hypertarget{calculatecarbonintensity}{%
\subsubsection{CalculateCarbonIntensity}\label{calculatecarbonintensity}}

This module calculates the average carbon intensity of fuels (grams CO2e per megajoule) by transportation mode and vehicle type.

This module step has no estimated parameters or other model types derived from data.

\hypertarget{initialize-1}{%
\subsubsection{Initialize}\label{initialize-1}}

This module processes vehicle and fuel characteristics files that model users may optionally supply. When these files are supplied, modules in the package that compute carbon intensities of vehicle travel will use the user-supplied data instead of the datasets that are part of the package (see the LoadDefaultValues.R script)

This module step has no estimated parameters or other model types derived from data.

\hypertarget{loaddefaultvalues-1}{%
\subsubsection{LoadDefaultValues}\label{loaddefaultvalues-1}}

Powertrain and fuels data are some of the most complex datasets used in VisionEval models to develop. To simplify matters for the user, default datasets are included in the package and are processed when the package is built. The user can then work with a simpler set of input files to develop scenarios.

\begin{itemize}
\tightlist
\item
  Data sources include Described in text files in inst/extdata
\item
  Model types include Tabulation of data
\item
  Estimation uses the following methods: Data files in inst/extdata/power\_co2.csv
\item
  Documented in inst/module\_docs/LoadDefaultValues.md
\end{itemize}

The models in this model step are:

\begin{itemize}
\tightlist
\item
  Model name: Default data for powertrain and fuels data

  \begin{itemize}
  \tightlist
  \item
    Model type: Tabulation of data
  \item
    Estimation data: NA
  \item
    Estimation method: Data files in inst/extdata/power\_co2.csv
  \item
    Estimation script: R/LoadDefaultValues.R
  \item
    Model object: data/PowertrainFuelDefaults\_ls.rda
  \item
    Notes: Processes a large set of default data into a set of model inputs
  \end{itemize}
\end{itemize}

\hypertarget{vesimhouseholds}{%
\subsection{VESimHouseholds}\label{vesimhouseholds}}

Household simulation package for VisionEval This package will contain a number of modules that work in the VisionEval framework to simulate households and their characteristics.
This module contains the following step(s):

\hypertarget{assignlifecycle}{%
\subsubsection{AssignLifeCycle}\label{assignlifecycle}}

This module assigns a life cycle category to each household. The life cycle categories are similar, but not the same as, those established for the NHTS.~

This module step has no estimated parameters or other model types derived from data.

\hypertarget{createhouseholds}{%
\subsubsection{CreateHouseholds}\label{createhouseholds}}

This module creates a~Household~table in the datastore and populates the table with datasets characterizing simulated households.

\begin{itemize}
\tightlist
\item
  Data sources include Census PUMS, OR 2000 Census data are included in the package
\item
  Model types include Tabulation of data
\item
  Estimation uses the following methods: Package Build
\item
  Documented in inst/module\_docs/CreateHouseholds.md
\end{itemize}

The models in this model step are:

\begin{itemize}
\tightlist
\item
  Model name: Probability matrix that a person in each age group is in one of several hundred regular household types

  \begin{itemize}
  \tightlist
  \item
    Model type: Tabulation of data
  \item
    Estimation data: inst/extdata/pums\_households.csv, inst/extdata/pums\_persons.csv
  \item
    Estimation method: Package Build
  \item
    Estimation script: R/CreateHouseholds.R, R/CreateEstimationDatasets.R
  \item
    Model object: data/HtProb\_HtAp.rda
  \item
    Notes: This module develops a table of probabilities processed in two scripts from Census PUMS data. The data in the package are for Oregon.
  \end{itemize}
\end{itemize}

\hypertarget{predictincome}{%
\subsubsection{PredictIncome}\label{predictincome}}

This module predicts the income for each simulated household given the number of workers in each age group and the average per capita income for the Azone where the household resides.

\begin{itemize}
\tightlist
\item
  Data sources include Census PUMS, OR 2000 Census data are included in the package
\item
  Model types include Linear regression
\item
  Estimation uses the following methods: Package Build
\item
  Documented in inst/module\_docs/PredictIncome.md
\end{itemize}

The models in this model step are:

\begin{itemize}
\tightlist
\item
  Model name: Household income linear model

  \begin{itemize}
  \tightlist
  \item
    Model type: Linear regression
  \item
    Estimation data: inst/extdata/pums\_households.csv, inst/extdata/pums\_persons.csv
  \item
    Estimation method: Package Build
  \item
    Estimation script: R/PredictIncome.R, R/CreateEstimationDatasets.R
  \item
    Model object: data/HHIncModel\_ls.rda
  \item
    Notes: This module develops regression models using data processed in a separate module script from Census PUMS data. The data in the package are for Oregon.
  \end{itemize}
\item
  Model name: Group Quarters households income linear model

  \begin{itemize}
  \tightlist
  \item
    Model type: Linear regression
  \item
    Estimation data: inst/extdata/pums\_households.csv, inst/extdata/pums\_persons.csv
  \item
    Estimation method: Package Build
  \item
    Estimation script: R/PredictIncome.R, R/CreateEstimationDatasets.R
  \item
    Model object: data/GQIncModel\_ls.rda
  \item
    Notes: This module develops regression models using data processed in a separate module script from Census PUMS data. The data in the package are for Oregon.
  \end{itemize}
\end{itemize}

\hypertarget{predictworkers}{%
\subsubsection{PredictWorkers}\label{predictworkers}}

This module assigns workers by age to households and to noninstitutional group quarters population. It is a simple model which predicts workers as a function of the age composition of household members.

\begin{itemize}
\tightlist
\item
  Data sources include Census PUMS, OR 2000 Census data are included in the package
\item
  Model types include Tabulation of data
\item
  Estimation uses the following methods: Package Build
\item
  Documented in inst/module\_docs/PredictWorkers.md
\end{itemize}

The models in this model step are:

\begin{itemize}
\tightlist
\item
  Model name: Probability matrix that a person in each age group in a specified household type is a worker

  \begin{itemize}
  \tightlist
  \item
    Model type: Tabulation of data
  \item
    Estimation data: inst/extdata/pums\_households.csv, inst/extdata/pums\_persons.csv
  \item
    Estimation method: Package Build
  \item
    Estimation script: R/PredictWokers.R, R/CreateEstimationDatasets.R
  \item
    Model object: data/PropHhWkr\_HtAg.rda
  \item
    Notes: This module develops a table of probabilities processed in two scripts from Census PUMS data. The data in the package are for Oregon.
  \end{itemize}
\end{itemize}

\hypertarget{vesimlanduse}{%
\subsection{VESimLandUse}\label{vesimlanduse}}

This module simulates various land use characteristics
This module contains the following step(s):

\hypertarget{assigncarsvcavailability-1}{%
\subsubsection{AssignCarSvcAvailability}\label{assigncarsvcavailability-1}}

This module assigns car service availability levels (Low, High) to Bzones and households.

This module step has no estimated parameters or other model types derived from data.

\hypertarget{assigndemandmanagement-1}{%
\subsubsection{AssignDemandManagement}\label{assigndemandmanagement-1}}

This module assigns demand management program participation to households and to workers.

\begin{itemize}
\tightlist
\item
  Data sources include NHTS 2001
\item
  Model types include Proportions
\item
  Estimation uses the following methods: Imports from VELandUse
\item
  Documented in inst/module\_docs/AssignDemandManagement.md
\end{itemize}

The models in this model step are:

\begin{itemize}
\tightlist
\item
  Model name: Proportional VMT Reduction Estimation

  \begin{itemize}
  \tightlist
  \item
    Model type: Proportions
  \item
    Estimation data: VELandUse::TdmModel\_ls
  \item
    Estimation method: Imports from VELandUse
  \item
    Estimation script: R/AssignDemandManagement.R
  \item
    Model object: NA
  \item
    Notes: This module has no estimated model parameters. It loads the model estimated in the VELandUse module
  \end{itemize}
\end{itemize}

\hypertarget{assignparkingrestrictions-1}{%
\subsubsection{AssignParkingRestrictions}\label{assignparkingrestrictions-1}}

This module identifies parking restrictions and prices affecting households at their residences, workplaces, and other places they are likely to visit in the urban area.

\begin{itemize}
\tightlist
\item
  Data sources include none
\item
  Model types include none
\item
  Estimation uses the following methods: none
\item
  Documented in inst/module\_docs/AssignParkingRestrictions.md
\end{itemize}

The models in this model step are:

\begin{itemize}
\tightlist
\item
  Model name: Proportional/Average assignment

  \begin{itemize}
  \tightlist
  \item
    Model type: NA
  \item
    Estimation data: NA
  \item
    Estimation method: NA
  \item
    Estimation script: R/AssignParkingRestrictions.R
  \item
    Model object: NA
  \item
    Notes: This module has no estimated model parameters. Function appplied by this model is deterministic.
  \end{itemize}
\end{itemize}

\hypertarget{createsimbzonemodels}{%
\subsubsection{CreateSimBzoneModels}\label{createsimbzonemodels}}

This module estimates all the models for synthesizing Bzones and their land use attributes as a function of Azone characteristics as well as data derived from the US Environmental Protection Agency's Smart Location Database (SLD) augmented with US Census housing and household income data, and data from the National Transit Database.

\begin{itemize}
\tightlist
\item
  Data sources include VESimLandUseData
\item
  Model types include Distributions
\item
  Estimation uses the following methods: Package build\\
\item
  Documented in inst/module\_docs/CreateSimBzoneModels.md
\end{itemize}

The models in this model step are:

\begin{itemize}
\tightlist
\item
  Model name: Distribution profiles

  \begin{itemize}
  \tightlist
  \item
    Model type: Distributions
  \item
    Estimation data: VESimLandUseData::SimLandUseData\_df
  \item
    Estimation method: Package build\\
  \item
    Estimation script: R/CreateSimBzoneModels.R
  \item
    Model object: data/SimBzone\_ls.rda
    data/UsaBlkGrpTypes\_df.rda
  \item
    Notes: This modules estimates a system of models to synthesize Bzones and their attributes as a funciton of Azone characteristics and other data in the VESimLandUseData pacakge
  \end{itemize}
\end{itemize}

\hypertarget{createsimbzones}{%
\subsubsection{CreateSimBzones}\label{createsimbzones}}

This module synthesizes Bzones and their land use attributes as a function of Azone characteristics as well as data derived from the US Environmental Protection Agency's Smart Location Database (SLD) augmented with US Census housing and household income data, and data from the National Transit Database.

This module step has no estimated parameters or other model types derived from data.

\hypertarget{initialize-2}{%
\subsubsection{Initialize}\label{initialize-2}}

Initialization and data check

This module step has no estimated parameters or other model types derived from data.

\hypertarget{simulate4dmeasures}{%
\subsubsection{Simulate4DMeasures}\label{simulate4dmeasures}}

This module calculates several 4D measures by SimBzone including density, diversity (i.e.~mixing of land uses), and pedestrian-orientedn transportation network design.

This module step has no estimated parameters or other model types derived from data.

\hypertarget{simulateemployment}{%
\subsubsection{SimulateEmployment}\label{simulateemployment}}

This module assign workers SimBzone work locations. A worker table is created which identifies a unique worker ID, the household ID the worker is a part of, and the SimBzone, Azone, and Marea of the worker job location.

This module step has no estimated parameters or other model types derived from data.

\hypertarget{simulate-housing}{%
\subsubsection{Simulate Housing}\label{simulate-housing}}

This module assigns a housing type, either single-family (SF) or multifamily (MF) to~regular~households based on the respective supplies of SF and MF dwelling units in the housing market to which the household is assigned (i.e.~the Azone the household is assigned to) and on household characteristics.~

\begin{itemize}
\tightlist
\item
  Data sources include PUMS (processed in VESimHouseholds)
\item
  Model types include Binary search algorithm
\item
  Estimation uses the following methods: Imports from VELandUse
\item
  Documented in inst/module\_docs/SimulateHousing.md
\end{itemize}

The models in this model step are:

\begin{itemize}
\tightlist
\item
  Model name: housing choice model estimated by the `PredictHousing' module in the `VELandUse' package.

  \begin{itemize}
  \tightlist
  \item
    Model type: Binary search algorithm
  \item
    Estimation data: VELandUse::HouseTypeModel\_ls
  \item
    Estimation method: Imports from VELandUse
  \item
    Estimation script: R/SimulateHousing.R
  \item
    Model object: data/HouseTypeModel\_ls.rda
  \item
    Notes: Sources models estimated in the VELandUse module that were estimated using PUMS data processed in the VESimHouseholds package
  \end{itemize}
\end{itemize}

\hypertarget{simulateurbanmixmeasure}{%
\subsubsection{SimulateUrbanMixMeasure}\label{simulateurbanmixmeasure}}

This module simulates an urban mixed-use measure based on the 2001 National Household Travel Survey measure of the tract level urban/rural indicator.

\begin{itemize}
\tightlist
\item
  Data sources include NHTS 2001
\item
  Model types include Binary Logit
\item
  Estimation uses the following methods: Imports from VELandUse
\item
  Documented in inst/module\_docs/SimulateUrbanMixMeasure.md
\end{itemize}

The models in this model step are:

\begin{itemize}
\tightlist
\item
  Model name: binary logit model estimated in the CalculateUrbanMixMeasure module of the VELandUse package

  \begin{itemize}
  \tightlist
  \item
    Model type: Binary Logit
  \item
    Estimation data: VELandUse::UrbanMixModel\_ls
  \item
    Estimation method: Imports from VELandUse
  \item
    Estimation script: R/SimulateUrbanMixMeasure.R
  \item
    Model object: data/UrbanMixModelSim\_ls.rda
  \item
    Notes: Sources models estimated in the VELandUse module that were estimated using PUMS data processed in the VESimHouseholds package
  \end{itemize}
\end{itemize}

\hypertarget{vesimlandusedata}{%
\subsection{VESimLandUseData}\label{vesimlandusedata}}

This package processes data from several sources to produce a dataset that is used to estimate several models for synthesizing Bzones and their likely land use attributes.
This module contains the following step(s):

\hypertarget{makesimbzoneestdataset}{%
\subsubsection{MakeSimBzoneEstDataset}\label{makesimbzoneestdataset}}

This script combines data from the US Census, the EPA Smart Location Database (SLD), and the National Transit Database

\begin{itemize}
\tightlist
\item
  Data sources include US Census Housing and Household Income Data, Smart Location Database, National Transit Database
\item
  Model types include Tabulation of data by household
\item
  Estimation uses the following methods: Package build\\
\item
  Documented in inst/module\_docs/MakeSimBzoneEstDataset.md
\end{itemize}

The models in this model step are:

\begin{itemize}
\tightlist
\item
  Model name: Processed Dataset

  \begin{itemize}
  \tightlist
  \item
    Model type: Tabulation of data by household
  \item
    Estimation data: data-raw/2010\_Service.csv
    data-raw/2010\_transit\_uza\_data.csv
    data-raw/2010\_Agency\_Information.csv
  \item
    Estimation method: Package build\\
  \item
    Estimation script: R/MakeSimBzoneEstDataset.R
  \item
    Model object: data/SimLandUseData\_df.rda
  \item
    Notes: This module processes data for use in the VESimLandUse module
  \end{itemize}
\end{itemize}

\hypertarget{vesimtransportsupply}{%
\subsection{VESimTransportSupply}\label{vesimtransportsupply}}

This package contains modules that work in the VisionEval framework to simulate transportation supply characteristics including roadway supply and public transit supply.
This module contains the following step(s):

\hypertarget{simulateroadmiles}{%
\subsubsection{SimulateRoadMiles}\label{simulateroadmiles}}

This module assigns freeway and arterial lane-miles to metropolitan areas (Marea) and calculates freeway lane-miles per capita.

This module step has no estimated parameters or other model types derived from data.

\hypertarget{simulatetransitservice}{%
\subsubsection{SimulateTransitService}\label{simulatetransitservice}}

This module assigns transit service level to the urbanized portion of each Marea and to neighborhoods (SimBzones) within the urbanized area.

\begin{itemize}
\tightlist
\item
  Data sources include VESimLandUseData
\item
  Model types include Distributions
\item
  Estimation uses the following methods: Imports from VELandUse
\item
  Documented in R Script only, no md file produced
\end{itemize}

The models in this model step are:

\begin{itemize}
\tightlist
\item
  Model name: Models estimated in the VESimLandUse modules

  \begin{itemize}
  \tightlist
  \item
    Model type: Distributions
  \item
    Estimation data: VESimLandUse::SimBzone\_ls
  \item
    Estimation method: Imports from VELandUse
  \item
    Estimation script: R/SimulateTransitService.R
  \item
    Model object: data/D4cModels\_ls.rda
  \item
    Notes: Sources models estimated in the VELandUse module.
  \end{itemize}
\end{itemize}

\hypertarget{vesyntheticfirms}{%
\subsection{VESyntheticFirms}\label{vesyntheticfirms}}

VisionEval Synthetic Firms module
This module contains the following step(s):

\hypertarget{createbasesyntheticfirms}{%
\subsubsection{CreateBaseSyntheticFirms}\label{createbasesyntheticfirms}}

Creates a list of base year synthetic firms

This module step has no estimated parameters or other model types derived from data.

\hypertarget{createfuturesyntheticfirms}{%
\subsubsection{CreateFutureSyntheticFirms}\label{createfuturesyntheticfirms}}

Creates a list of future year synthetic firms

This module step has no estimated parameters or other model types derived from data.

\hypertarget{vetransportsupply}{%
\subsection{VETransportSupply}\label{vetransportsupply}}

This package contains a number of modules that work in the VisionEval framework to calculate transportation supply characteristics including roadway supply and public transit supply.
This module contains the following step(s):

\hypertarget{simulateroadmiles-1}{%
\subsubsection{SimulateRoadMiles}\label{simulateroadmiles-1}}

This module assigns freeway and arterial lane-miles to metropolitan areas (Marea) and calculates freeway lane-miles per capita.

This module step has no estimated parameters or other model types derived from data.

\hypertarget{simulatetransitservice-1}{%
\subsubsection{SimulateTransitService}\label{simulatetransitservice-1}}

This module assigns transit service level to the urbanized portion of each Marea and to neighborhoods (SimBzones) within the urbanized area.

\begin{itemize}
\tightlist
\item
  Data sources include FTA NTD
\item
  Model types include Factors
\item
  Estimation uses the following methods: Package build\\
\item
  Documented in inst/module\_docs/AssignTransitService.md
\end{itemize}

The models in this model step are:

\begin{itemize}
\tightlist
\item
  Model name: Factors to convert revenue mules, develop bus equivalency factors, compare vehicle miles by mode

  \begin{itemize}
  \tightlist
  \item
    Model type: Factors
  \item
    Estimation data: inst/extdata/2015\_Agency\_information.csv, inst/extdata/2015\_Service.csv
  \item
    Estimation method: Package build\\
  \item
    Estimation script: R/AssignTransitService.R
  \item
    Model object: data/BusEquivalents\_df.rda, data/VehMiFactors\_df.rda, data/UZABusEqRevMile\_df.rda
  \item
    Notes: The module develops factors based on FTA NTD data
  \end{itemize}
\end{itemize}

\hypertarget{vetransportsupplyuse}{%
\subsection{VETransportSupplyUse}\label{vetransportsupplyuse}}

VisionEval module for roadway speeds, delay, and congestion costs using run year data
This module contains the following step(s):

\hypertarget{calculatecongestionbase}{%
\subsubsection{CalculateCongestionBase}\label{calculatecongestionbase}}

This module calculates the amount of congestion for base year - automobile, light truck, truck, and bus vmt are allocated to freeways, arterials, and other roadways.

\begin{itemize}
\tightlist
\item
  Data sources include 2009 Urban Mobility Study
\item
  Model types include lookup tables\\
\item
  Estimation uses the following methods: Data files in inst/extdata
\item
  Documented in R Script only, no md file produced
\end{itemize}

The models in this model step are:

\begin{itemize}
\tightlist
\item
  Model name: Speed estimated from demand vs lane-mile supply

  \begin{itemize}
  \tightlist
  \item
    Model type: lookup tables\\
  \item
    Estimation data: inst/extdata/CongModel\_ls.RData
  \item
    Estimation method: Data files in inst/extdata
  \item
    Estimation script: R/CalculateCongestionBase.R
  \item
    Model object: data/CongModel\_ls.rda
  \item
    Notes: This module has no estimated model parameters, derived from RPAT scripts. Original source of models is GreenSTEP models.
  \end{itemize}
\end{itemize}

\hypertarget{calculatecongestionfuture}{%
\subsubsection{CalculateCongestionFuture}\label{calculatecongestionfuture}}

This module calculates the amount of congestion for future year - automobile, light truck, truck, and bus vmt are allocated to freeways, arterials, and other roadways.

\begin{itemize}
\tightlist
\item
  Data sources include 2009 Urban Mobility Study
\item
  Model types include lookup tables\\
\item
  Estimation uses the following methods: Data files in inst/extdata
\item
  Documented in R Script only, no md file produced
\end{itemize}

The models in this model step are:

\begin{itemize}
\tightlist
\item
  Model name: Speed estimated from demand vs lane-mile supply

  \begin{itemize}
  \tightlist
  \item
    Model type: lookup tables\\
  \item
    Estimation data: inst/extdata/CongModel\_ls.RData
  \item
    Estimation method: Data files in inst/extdata
  \item
    Estimation script: R/CalculateCongestionFuture.R
  \item
    Model object: NA
  \item
    Notes: This module has no estimated model parameters, derived from RPAT scripts. Original source of models is GreenSTEP models.
  \end{itemize}
\end{itemize}

\hypertarget{calculatecongestionpolicy}{%
\subsubsection{CalculateCongestionPolicy}\label{calculatecongestionpolicy}}

This module calculates the amount of congestion - automobile, light truck, truck, and bus vmt are allocated to freeways, arterials, and other roadways adjusted by policy applied for the selected scenario.

\begin{itemize}
\tightlist
\item
  Data sources include 2009 Urban Mobility Study
\item
  Model types include lookup tables\\
\item
  Estimation uses the following methods: Data files in inst/extdata
\item
  Documented in R Script only, no md file produced
\end{itemize}

The models in this model step are:

\begin{itemize}
\tightlist
\item
  Model name: Speed estimated from demand vs lane-mile supply, adjusted by intervention policy

  \begin{itemize}
  \tightlist
  \item
    Model type: lookup tables\\
  \item
    Estimation data: inst/extdata/CongModel\_ls.RData
  \item
    Estimation method: Data files in inst/extdata
  \item
    Estimation script: R/CalculateCongestionPolicy.R
  \item
    Model object: NA
  \item
    Notes: This module has no estimated model parameters, derived from RPAT scripts. Original source of models is GreenSTEP models.
  \end{itemize}
\end{itemize}

\hypertarget{vetraveldemandmm}{%
\subsection{VETravelDemandMM}\label{vetraveldemandmm}}

This package contains a module for the VisionEval framework that simulates multi-modal travel demand for individual households
This module contains the following step(s):

\hypertarget{calculatealtmodetrips-1}{%
\subsubsection{CalculateAltModeTrips}\label{calculatealtmodetrips-1}}

Predicts transit, bike, walk PMT and trips

\begin{itemize}
\tightlist
\item
  Data sources include NHTS 2009, FHWA HPMS, FTA NTD, EPA SLD
\item
  Model types include Hurdle and Linear regression
\item
  Estimation uses the following methods: Pre-estimated, saved objects in data-raw/estimated
\item
  Documented in inst/module\_docs/CalculateAltModeTrips.md
\end{itemize}

The models in this model step are:

\begin{itemize}
\tightlist
\item
  Model name: Bike PMT for metropolitan households

  \begin{itemize}
  \tightlist
  \item
    Model type: Hurdle
  \item
    Estimation data: inst/extdata/sources.md, confidential data not included in package
  \item
    Estimation method: Pre-estimated, saved objects in data-raw/estimated
  \item
    Estimation script: data-raw/BikePMTModel\_df.R
  \item
    Model object: data/BikePMTModel\_df.rda
  \item
    Notes: This model uses confidential spatial elements of the NHTS 2009 data to link to the EPA Smart Location Database. The estimated models are included with the package but not the estimation dataset.
  \end{itemize}
\item
  Model name: Bike PMT for non-metropolitan households

  \begin{itemize}
  \tightlist
  \item
    Model type: Hurdle
  \item
    Estimation data: inst/extdata/sources.md, confidential data not included in package
  \item
    Estimation method: Pre-estimated, saved objects in data-raw/estimated
  \item
    Estimation script: data-raw/BikePMTModel\_df.R
  \item
    Model object: data/BikePMTModel\_df.rda
  \item
    Notes: This model uses confidential spatial elements of the NHTS 2009 data to link to the EPA Smart Location Database. The estimated models are included with the package but not the estimation dataset.
  \end{itemize}
\item
  Model name: Bike trip freqiency for metropolitan households

  \begin{itemize}
  \tightlist
  \item
    Model type: Hurdle
  \item
    Estimation data: inst/extdata/sources.md, confidential data not included in package
  \item
    Estimation method: Pre-estimated, saved objects in data-raw/estimated
  \item
    Estimation script: data-raw/BikeTFLModel\_df.R
  \item
    Model object: data/BikeTFLModel\_df.rda
  \item
    Notes: This model uses confidential spatial elements of the NHTS 2009 data to link to the EPA Smart Location Database. The estimated models are included with the package but not the estimation dataset.
  \end{itemize}
\item
  Model name: Bike trip freqiency for non-metropolitan households

  \begin{itemize}
  \tightlist
  \item
    Model type: Hurdle
  \item
    Estimation data: inst/extdata/sources.md, confidential data not included in package
  \item
    Estimation method: Pre-estimated, saved objects in data-raw/estimated
  \item
    Estimation script: data-raw/BikeTFLModel\_df.R
  \item
    Model object: data/BikeTFLModel\_df.rda
  \item
    Notes: This model uses confidential spatial elements of the NHTS 2009 data to link to the EPA Smart Location Database. The estimated models are included with the package but not the estimation dataset.
  \end{itemize}
\item
  Model name: Bike trip average distance for metropolitan households

  \begin{itemize}
  \tightlist
  \item
    Model type: Linear regression
  \item
    Estimation data: inst/extdata/sources.md, confidential data not included in package
  \item
    Estimation method: Pre-estimated, saved objects in data-raw/estimated
  \item
    Estimation script: data-raw/BikeTFLModel\_df.R
  \item
    Model object: data/BikeTFLModel\_df.rda
  \item
    Notes: This model uses confidential spatial elements of the NHTS 2009 data to link to the EPA Smart Location Database. The estimated models are included with the package but not the estimation dataset.
  \end{itemize}
\item
  Model name: Bike trip average distance for non-metropolitan households

  \begin{itemize}
  \tightlist
  \item
    Model type: Linear regression
  \item
    Estimation data: inst/extdata/sources.md, confidential data not included in package
  \item
    Estimation method: Pre-estimated, saved objects in data-raw/estimated
  \item
    Estimation script: data-raw/BikeTFLModel\_df.R
  \item
    Model object: data/BikeTFLModel\_df.rda
  \item
    Notes: This model uses confidential spatial elements of the NHTS 2009 data to link to the EPA Smart Location Database. The estimated models are included with the package but not the estimation dataset.
  \end{itemize}
\item
  Model name: Transit PMT for metropolitan households

  \begin{itemize}
  \tightlist
  \item
    Model type: Hurdle
  \item
    Estimation data: inst/extdata/sources.md, confidential data not included in package
  \item
    Estimation method: Pre-estimated, saved objects in data-raw/estimated
  \item
    Estimation script: data-raw/TransitPMTModel\_df.R
  \item
    Model object: data/TransitPMTModel\_df.rda
  \item
    Notes: This model uses confidential spatial elements of the NHTS 2009 data to link to the EPA Smart Location Database. The estimated models are included with the package but not the estimation dataset.
  \end{itemize}
\item
  Model name: Transit PMT for non-metropolitan households

  \begin{itemize}
  \tightlist
  \item
    Model type: Hurdle
  \item
    Estimation data: inst/extdata/sources.md, confidential data not included in package
  \item
    Estimation method: Pre-estimated, saved objects in data-raw/estimated
  \item
    Estimation script: data-raw/TransitPMTModel\_df.R
  \item
    Model object: data/TransitPMTModel\_df.rda
  \item
    Notes: This model uses confidential spatial elements of the NHTS 2009 data to link to the EPA Smart Location Database. The estimated models are included with the package but not the estimation dataset.
  \end{itemize}
\item
  Model name: Transit trip freqiency for metropolitan households

  \begin{itemize}
  \tightlist
  \item
    Model type: Hurdle
  \item
    Estimation data: inst/extdata/sources.md, confidential data not included in package
  \item
    Estimation method: Pre-estimated, saved objects in data-raw/estimated
  \item
    Estimation script: data-raw/TransitTFLModel\_df.R
  \item
    Model object: data/TransitTFLModel\_df.rda
  \item
    Notes: This model uses confidential spatial elements of the NHTS 2009 data to link to the EPA Smart Location Database. The estimated models are included with the package but not the estimation dataset.
  \end{itemize}
\item
  Model name: Transit trip freqiency for non-metropolitan households

  \begin{itemize}
  \tightlist
  \item
    Model type: Hurdle
  \item
    Estimation data: inst/extdata/sources.md, confidential data not included in package
  \item
    Estimation method: Pre-estimated, saved objects in data-raw/estimated
  \item
    Estimation script: data-raw/TransitTFLModel\_df.R
  \item
    Model object: data/TransitTFLModel\_df.rda
  \item
    Notes: This model uses confidential spatial elements of the NHTS 2009 data to link to the EPA Smart Location Database. The estimated models are included with the package but not the estimation dataset.
  \end{itemize}
\item
  Model name: Transit trip average distance for metropolitan households

  \begin{itemize}
  \tightlist
  \item
    Model type: Linear regression
  \item
    Estimation data: inst/extdata/sources.md, confidential data not included in package
  \item
    Estimation method: Pre-estimated, saved objects in data-raw/estimated
  \item
    Estimation script: data-raw/TransitTFLModel\_df.R
  \item
    Model object: data/TransitTFLModel\_df.rda
  \item
    Notes: This model uses confidential spatial elements of the NHTS 2009 data to link to the EPA Smart Location Database. The estimated models are included with the package but not the estimation dataset.
  \end{itemize}
\item
  Model name: Transit trip average distance for non-metropolitan households

  \begin{itemize}
  \tightlist
  \item
    Model type: Linear regression
  \item
    Estimation data: inst/extdata/sources.md, confidential data not included in package
  \item
    Estimation method: Pre-estimated, saved objects in data-raw/estimated
  \item
    Estimation script: data-raw/TransitTFLModel\_df.R
  \item
    Model object: data/TransitTFLModel\_df.rda
  \item
    Notes: This model uses confidential spatial elements of the NHTS 2009 data to link to the EPA Smart Location Database. The estimated models are included with the package but not the estimation dataset.
  \end{itemize}
\item
  Model name: Walk PMT for metropolitan households

  \begin{itemize}
  \tightlist
  \item
    Model type: Hurdle
  \item
    Estimation data: inst/extdata/sources.md, confidential data not included in package
  \item
    Estimation method: Pre-estimated, saved objects in data-raw/estimated
  \item
    Estimation script: data-raw/WalkPMTModel\_df.R
  \item
    Model object: data/WalkPMTModel\_df.rda
  \item
    Notes: This model uses confidential spatial elements of the NHTS 2009 data to link to the EPA Smart Location Database. The estimated models are included with the package but not the estimation dataset.
  \end{itemize}
\item
  Model name: Walk PMT for non-metropolitan households

  \begin{itemize}
  \tightlist
  \item
    Model type: Hurdle
  \item
    Estimation data: inst/extdata/sources.md, confidential data not included in package
  \item
    Estimation method: Pre-estimated, saved objects in data-raw/estimated
  \item
    Estimation script: data-raw/WalkPMTModel\_df.R
  \item
    Model object: data/WalkPMTModel\_df.rda
  \item
    Notes: This model uses confidential spatial elements of the NHTS 2009 data to link to the EPA Smart Location Database. The estimated models are included with the package but not the estimation dataset.
  \end{itemize}
\item
  Model name: Walk trip freqiency for metropolitan households

  \begin{itemize}
  \tightlist
  \item
    Model type: Hurdle
  \item
    Estimation data: inst/extdata/sources.md, confidential data not included in package
  \item
    Estimation method: Pre-estimated, saved objects in data-raw/estimated
  \item
    Estimation script: data-raw/WalkTFLModel\_df.R
  \item
    Model object: data/WalkTFLModel\_df.rda
  \item
    Notes: This model uses confidential spatial elements of the NHTS 2009 data to link to the EPA Smart Location Database. The estimated models are included with the package but not the estimation dataset.
  \end{itemize}
\item
  Model name: Walk trip freqiency for non-metropolitan households

  \begin{itemize}
  \tightlist
  \item
    Model type: Hurdle
  \item
    Estimation data: inst/extdata/sources.md, confidential data not included in package
  \item
    Estimation method: Pre-estimated, saved objects in data-raw/estimated
  \item
    Estimation script: data-raw/WalkTFLModel\_df.R
  \item
    Model object: data/WalkTFLModel\_df.rda
  \item
    Notes: This model uses confidential spatial elements of the NHTS 2009 data to link to the EPA Smart Location Database. The estimated models are included with the package but not the estimation dataset.
  \end{itemize}
\item
  Model name: Walk trip average distance for metropolitan households

  \begin{itemize}
  \tightlist
  \item
    Model type: Linear regression
  \item
    Estimation data: inst/extdata/sources.md, confidential data not included in package
  \item
    Estimation method: Pre-estimated, saved objects in data-raw/estimated
  \item
    Estimation script: data-raw/WalkTFLModel\_df.R
  \item
    Model object: data/WalkTFLModel\_df.rda
  \item
    Notes: This model uses confidential spatial elements of the NHTS 2009 data to link to the EPA Smart Location Database. The estimated models are included with the package but not the estimation dataset.
  \end{itemize}
\item
  Model name: Walk trip average distance for non-metropolitan households

  \begin{itemize}
  \tightlist
  \item
    Model type: Linear regression
  \item
    Estimation data: inst/extdata/sources.md, confidential data not included in package
  \item
    Estimation method: Pre-estimated, saved objects in data-raw/estimated
  \item
    Estimation script: data-raw/WalkTFLModel\_df.R
  \item
    Model object: data/WalkTFLModel\_df.rda
  \item
    Notes: This model uses confidential spatial elements of the NHTS 2009 data to link to the EPA Smart Location Database. The estimated models are included with the package but not the estimation dataset.
  \end{itemize}
\end{itemize}

\hypertarget{calculatehouseholddvmt-1}{%
\subsubsection{CalculateHouseholdDvmt}\label{calculatehouseholddvmt-1}}

This module predicts AADVMT for households. It uses the model object in data/AADVMTModel\_df.rda and variables and coefficients therein to predict AADVMT.

\begin{itemize}
\tightlist
\item
  Data sources include NHTS 2009, FHWA HPMS, FTA NTD, EPA SLD and NHTS 2001
\item
  Model types include Linear regression
\item
  Estimation uses the following methods: Pre-estimated, saved objects in data-raw/estimated
\item
  Documented in inst/module\_docs/CalculateHouseholdDVMT.md and inst/module\_docs/HouseholdDvmtQuantileEstimation.md
\end{itemize}

The models in this model step are:

\begin{itemize}
\tightlist
\item
  Model name: Household Dvmt for metropolitan households

  \begin{itemize}
  \tightlist
  \item
    Model type: Linear regression
  \item
    Estimation data: inst/extdata/sources.md, confidential data not included in package
  \item
    Estimation method: Pre-estimated, saved objects in data-raw/estimated
  \item
    Estimation script: data-raw/AADVMTModel\_df.R
  \item
    Model object: data/AADVMTModel\_df.rda
  \item
    Notes: This model uses confidential spatial elements of the NHTS 2009 data to link to the EPA Smart Location Database. The estimated models are included with the package but not the estimation dataset.
  \end{itemize}
\item
  Model name: Household Dvmt for non-metropolitan households

  \begin{itemize}
  \tightlist
  \item
    Model type: Linear regression
  \item
    Estimation data: inst/extdata/sources.md, confidential data not included in package
  \item
    Estimation method: Pre-estimated, saved objects in data-raw/estimated
  \item
    Estimation script: data-raw/AADVMTModel\_df.R
  \item
    Model object: data/AADVMTModel\_df.rda
  \item
    Notes: This model uses confidential spatial elements of the NHTS 2009 data to link to the EPA Smart Location Database. The estimated models are included with the package but not the estimation dataset.
  \end{itemize}
\item
  Model name: 95th percentile DVMT model for metropolitan households

  \begin{itemize}
  \tightlist
  \item
    Model type: Linear regression
  \item
    Estimation data: inst/extdata/sources.md, confidential data not included in package
  \item
    Estimation method: Pre-estimated, saved objects in data-raw/estimated
  \item
    Estimation script: data-raw/HouseholdDvmtQuantileEstimation.R
  \item
    Model object: data/DvmtModel\_ls.rda
  \item
    Notes: These models and estimation scripts are included in this package and were transferred from the VEHouseholdTravel module
  \end{itemize}
\item
  Model name: 95th percentile DVMT model for non-metropolitan households

  \begin{itemize}
  \tightlist
  \item
    Model type: Linear regression
  \item
    Estimation data: inst/extdata/sources.md, confidential data not included in package
  \item
    Estimation method: Pre-estimated, saved objects in data-raw/estimated
  \item
    Estimation script: data-raw/HouseholdDvmtQuantileEstimation.R
  \item
    Model object: data/DvmtModel\_ls.rda
  \item
    Notes: These models and estimation scripts are included in this package and were transferred from the VEHouseholdTravel module
  \end{itemize}
\end{itemize}

\hypertarget{predictdrivers}{%
\subsubsection{PredictDrivers}\label{predictdrivers}}

This module predicts number of licensed drivers for households. It uses the model object in data/DriversModel\_df.rda (ordered logit model by default) and variables and coefficients therein to predict Drivers.

\begin{itemize}
\tightlist
\item
  Data sources include NHTS 2009, FHWA HPMS, FTA NTD, EPA SLD
\item
  Model types include Ordered logit
\item
  Estimation uses the following methods: Pre-estimated, saved objects in data-raw/estimated
\item
  Documented in inst/module\_docs/PredictDrivers.md
\end{itemize}

The models in this model step are:

\begin{itemize}
\tightlist
\item
  Model name: Drivers in the household

  \begin{itemize}
  \tightlist
  \item
    Model type: Ordered logit
  \item
    Estimation data: inst/extdata/sources.md, confidential data not included in package
  \item
    Estimation method: Pre-estimated, saved objects in data-raw/estimated
  \item
    Estimation script: data-raw/DriversModel\_df.R
  \item
    Model object: data/DriversModel\_df.rda
  \item
    Notes: This model uses confidential spatial elements of the NHTS 2009 data to link to the EPA Smart Location Database. The estimated models are included with the package but not the estimation dataset.
  \end{itemize}
\end{itemize}

\hypertarget{predictvehicles}{%
\subsubsection{PredictVehicles}\label{predictvehicles}}

This module predicts number of light-duty vehicles for households. It uses the model object in data/VehiclesModel\_df.rda (ordered logit model by default) and variables and coefficients therein to predict number of vehicles.

\begin{itemize}
\tightlist
\item
  Data sources include NHTS 2009, FHWA HPMS, FTA NTD, EPA SLD
\item
  Model types include Ordered logit
\item
  Estimation uses the following methods: Pre-estimated, saved objects in data-raw/estimated
\item
  Documented in inst/module\_docs/PredictVehicles.md
\end{itemize}

The models in this model step are:

\begin{itemize}
\tightlist
\item
  Model name: Number of light duty vehicles

  \begin{itemize}
  \tightlist
  \item
    Model type: Ordered logit
  \item
    Estimation data: inst/extdata/sources.md, confidential data not included in package
  \item
    Estimation method: Pre-estimated, saved objects in data-raw/estimated
  \item
    Estimation script: data-raw/VehiclesModel\_df.R
  \item
    Model object: data/VehiclesModel\_df.rda
  \item
    Notes: This model uses confidential spatial elements of the NHTS 2009 data to link to the EPA Smart Location Database. The estimated models are included with the package but not the estimation dataset.
  \end{itemize}
\end{itemize}

\hypertarget{vetravelperformance}{%
\subsection{VETravelPerformance}\label{vetravelperformance}}

Travel performance metrics
This module contains the following step(s):

\hypertarget{adjusthhvehiclempgmpkwh}{%
\subsubsection{AdjustHhVehicleMpgMpkwh}\label{adjusthhvehiclempgmpkwh}}

This module adjusts the fuel economy (MPG) and power efficiency (MPKWH) of household vehicles to reflect the effects of congestion, speed smoothing, and eco-driving that are calculated by the CalculateMpgMpkwhAdjustments module.

This module step has no estimated parameters or other model types derived from data.

\hypertarget{balanceroadcostsandrevenues}{%
\subsubsection{BalanceRoadCostsAndRevenues}\label{balanceroadcostsandrevenues}}

This module calculates an extra mileage tax (\$ per vehicle mile traveled) for household vehicles needed to make up any difference in the cost of constructing, maintaining, and operating roadways and the revenues from fuel, VMT, and congestion taxes.

This module step has no estimated parameters or other model types derived from data.

\hypertarget{budgethouseholddvmt}{%
\subsubsection{BudgetHouseholdDvmt}\label{budgethouseholddvmt}}

This module adjusts average household DVMT to keep the quantity within the limit of the household vehicle operating cost budget.~

\begin{itemize}
\tightlist
\item
  Data sources include US BEA CES
\item
  Model types include Linear regression
\item
  Estimation uses the following methods: Package Build
\item
  Documented in inst/module\_docs/BudgetHouseholdDvmt.md
\end{itemize}

The models in this model step are:

\begin{itemize}
\tightlist
\item
  Model name: model to calculate the maximum proportion of household income a household is willing to pay to operate vehicles used by the household

  \begin{itemize}
  \tightlist
  \item
    Model type: Linear regression
  \item
    Estimation data: inst/extdata/ces\_vehicle\_op-cost.csv
  \item
    Estimation method: Package Build
  \item
    Estimation script: R/BudgetHouseholdDvmt.R
  \item
    Model object: data/OpPropModel\_ls.rda
  \item
    Notes: Estimated model uses CES data, script inst/extdata/ces.R processes data into the format for the estimation input dataset
  \end{itemize}
\end{itemize}

\hypertarget{calculatecomenergyandemissions}{%
\subsubsection{CalculateComEnergyAndEmissions}\label{calculatecomenergyandemissions}}

This module calculates the energy consumption and carbon emissions of heavy trucks and light-duty commercial service vehicles.~

This module step has no estimated parameters or other model types derived from data.

\hypertarget{calculatempgmpkwhadjustments}{%
\subsubsection{CalculateMpgMpkwhAdjustments}\label{calculatempgmpkwhadjustments}}

This module calculates adjustments to fuel economy and electric energy efficiency (for plug-in vehicles) resulting from traffic congestion, speed smoothing (i.e.~active traffic management which reduces speed variation), and eco-driving. Eco-driving is the practice of driving in ways that increase fuel economy and reduce carbon emissions.

\begin{itemize}
\tightlist
\item
  Data sources include Outputs from EPA PERE model
\item
  Model types include Tabulation of data
\item
  Estimation uses the following methods: Package Build
\item
  Documented in inst/module\_docs/CalculateMpgMpkwhAdjustments.md
\end{itemize}

The models in this model step are:

\begin{itemize}
\tightlist
\item
  Model name: Model of the Effects of Speed on Fuel Economy

  \begin{itemize}
  \tightlist
  \item
    Model type: Tabulation of data
  \item
    Estimation data: vehicle\_fuel\_speed\_curves.csv
  \item
    Estimation method: Package Build
  \item
    Estimation script: R/CalculateMpgMpkwhAdjustments.R
  \item
    Model object: data/MpgMpkwhAdj\_ls.rda
  \item
    Notes: Model is based on outputs from the EPA's PERE model, estimation here is limited to tabulation and other simple processing
  \end{itemize}
\item
  Model name: Speed Smoothing and Eco-driving Model

  \begin{itemize}
  \tightlist
  \item
    Model type: Tabulation of data
  \item
    Estimation data: max\_smooth\_improve.csv
  \item
    Estimation method: Package Build
  \item
    Estimation script: R/CalculateMpgMpkwhAdjustments.R
  \item
    Model object: data/MpgMpkwhAdj\_ls.rda
  \item
    Notes: Model is based on outputs from the EPA's PERE model, estimation here is limited to tabulation and other simple processing
  \end{itemize}
\end{itemize}

\hypertarget{calculateptranenergyandemissions}{%
\subsubsection{CalculatePtranEnergyAndEmissions}\label{calculateptranenergyandemissions}}

This module calculates the energy consumption and carbon emissions from public transportation vehicles in urbanized areas. Note that fuel consumption and emissions from car services (e.g.~taxi, Uber, Lyft) are calculated in conjunction with the calculation of household vehicle emissions and are attributed to the household.

This module step has no estimated parameters or other model types derived from data.

\hypertarget{calculateroaddvmt}{%
\subsubsection{CalculateRoadDvmt}\label{calculateroaddvmt}}

module computes several factors used in computing roadway DVMT including factors for calculating commercial service vehicle travel and heavy truck travel.~

This module step has no estimated parameters or other model types derived from data.

\hypertarget{calculateroadperformance}{%
\subsubsection{CalculateRoadPerformance}\label{calculateroadperformance}}

This module calculates freeway and arterial congestion level and the amounts of DVMT by congestion level. It also calculates the average speed and delay at each congestion level. In addition, it splits light-duty vehicle (LDV) DVMT between freeways and arterials as a function of relative speeds and congestion prices

\begin{itemize}
\tightlist
\item
  Data sources include 2009 Urban Mobility Study and NHTS 2017 research by Bigazzi and Clifton and NHTS 2017
\item
  Model types include lookup tables and Lookup tables and equation Linear regression and Lookup tables and equation
\item
  Estimation uses the following methods: Package Build
\item
  Documented in inst/module\_docs/CalculateRoadPerformance.md
\end{itemize}

The models in this model step are:

\begin{itemize}
\tightlist
\item
  Model name: Model of Congestion as a Function of Daily Demand

  \begin{itemize}
  \tightlist
  \item
    Model type: lookup tables\\
  \item
    Estimation data: inst/extdata/ums\_2009.csv
  \item
    Estimation method: Package Build
  \item
    Estimation script: R/CalculateRoadPerformance.R
  \item
    Model object: data/CongestedProportions\_ls.rda
  \item
    Notes: This module estimates models using Urban mobility study data
  \end{itemize}
\item
  Model name: Model of Congested Speeds and the Effects of Operations Programs (e.g.~ramp metering, signal coordination)

  \begin{itemize}
  \tightlist
  \item
    Model type: lookup tables\\
  \item
    Estimation data: inst/extdata/base\_speeds.csv, ramp\_metering.csv, incident\_management.csv, signal\_coordination.csv, access\_management.csv
  \item
    Estimation method: Package Build
  \item
    Estimation script: R/CalculateRoadPerformance.R, CalculateSpeeds.R
  \item
    Model object: data/BaseSpeeds\_df.rda, data/Delay\_df.rda, data/Ramp\_df.rda, data/Incident\_df.rda, data/Signal\_df.rda, data/Access\_df.rda
  \item
    Notes: This module estimates models based on research documented in the package
  \end{itemize}
\item
  Model name: Model of the Split of Light-duty Vehicle (LDV) DVMT between Freeways and Arterials

  \begin{itemize}
  \tightlist
  \item
    Model type: Linear regression
  \item
    Estimation data: inst/extdata/ums\_2009.csv
  \item
    Estimation method: Package Build
  \item
    Estimation script: R/CalculateRoadPerformance.R
  \item
    Model object: data/DvmtSplit\_LM.rda
  \item
    Notes: This module estimates models using Urban mobility study data
  \end{itemize}
\item
  Model name: Model to Calculate Average Non-urban Road Speed from Average Urban Road Speed

  \begin{itemize}
  \tightlist
  \item
    Model type: Lookup tables and equation
  \item
    Estimation data: inst/extdata/urban\_rural\_trip\_length\_duration.csv
  \item
    Estimation method: Package Build
  \item
    Estimation script: R/CalculateRoadPerformance.R
  \item
    Model object: data/UrbanRuralAveSpeed\_ls.rda
  \item
    Notes: This module estimates models using NHTS 2017 data tabulated and included in the package
  \end{itemize}
\end{itemize}

\hypertarget{calculatesafetymeasures}{%
\subsubsection{CalculateSafetyMeasures}\label{calculatesafetymeasures}}

This module aims to calculate safety measures for the model area. It uses the fatality and injury crash rates for different modes All these rates are per miles traveled. Therefore this module simply uses calculated VMT from model to estimate the fatality and injury rates for Marea.

This module step has no estimated parameters or other model types derived from data.

\hypertarget{calculatehhvehicleoperatingcosts}{%
\subsubsection{CalculateHhVehicleOperatingCosts}\label{calculatehhvehicleoperatingcosts}}

This module calculates vehicle operating costs per mile of travel and uses those costs to determine the proportional split of DVMT among household vehicles. The module also calculates the average out-of-pocket costs per mile of vehicle travel by household, as well as the cost of social and environmental impacts, and road use taxes per mile of vehicle travel.

\begin{itemize}
\tightlist
\item
  Data sources include ? and data from the American Automobile Association and the Bureau of Labor Statistics
\item
  Model types include Cobb-Douglas utility function and Products of rates
\item
  Estimation uses the following methods: Package Build
\item
  Documented in inst/module\_docs/CalculateVehicleOperatingCost.md
\end{itemize}

The models in this model step are:

\begin{itemize}
\tightlist
\item
  Model name: model for splitting household DVMT among household vehicles as a function of the unit cost of using each vehicle

  \begin{itemize}
  \tightlist
  \item
    Model type: Cobb-Douglas utility function
  \item
    Estimation data: ?
  \item
    Estimation method: Package Build
  \item
    Estimation script: R/CalculateVehicleOperatingCost.R
  \item
    Model object: data/OpCosts\_ls.rda
  \item
    Notes: Missing estimation script and data for this model?
  \end{itemize}
\item
  Model name: Models for Calculating Out-of-pocket Costs

  \begin{itemize}
  \tightlist
  \item
    Model type: Products of rates
  \item
    Estimation data: deflators.csv, aa\_vehicle\_operating\_costs.csv
  \item
    Estimation method: Package Build
  \item
    Estimation script: R/CalculateVehicleOperatingCost.R
  \item
    Model object: data/OpCosts\_ls.rda
  \item
    Notes: This module estimates models using BLS and AAA data
  \end{itemize}
\end{itemize}

\hypertarget{loaddefaultroaddvmtvalues}{%
\subsubsection{LoadDefaultRoadDvmtValues}\label{loaddefaultroaddvmtvalues}}

This script calculates default values for base year roadway DVMT by vehicle type (light-duty, heavy truck, bus), the distribution of roadway DVMT by vehicle type to roadway classes (freeway, arterial, other), and the ratio of commercial service light-duty vehicle travel to household vehicle travel.

This module step has no estimated parameters or other model types derived from data.

\hypertarget{traveltimereliability}{%
\subsubsection{TravelTimeReliability}\label{traveltimereliability}}

This module calculates travel time reliability measures for the model area. Average speeds at different congestion levels (None, Mod, Hvy, Sev, Ext) on freeways and arterials by marea calculated in the CalculateRoadPerformance Module are used as inputs to calculate travel time index.

This module step has no estimated parameters or other model types derived from data.

\hypertarget{vereports}{%
\subsection{VEReports}\label{vereports}}

This module calculates and reports various performance metrics
This module contains the following step(s):

\hypertarget{reportrpatmetrics}{%
\subsubsection{ReportRPATMetrics}\label{reportrpatmetrics}}

This module calculates and reports various performance metrics. These performance metrics include environment and energey impacts, financial and economic impacts, and community impacts.

\begin{itemize}
\tightlist
\item
  Data sources include ?
\item
  Model types include Tabulation of data
\item
  Estimation uses the following methods: Data file in inst/extdata/TruckBusAgeDist\_.Rdata
\item
  Documented in R Script only, no md file produced
\end{itemize}

The models in this model step are:

\begin{itemize}
\tightlist
\item
  Model name: Truck and Bus age distribution data

  \begin{itemize}
  \tightlist
  \item
    Model type: Tabulation of data
  \item
    Estimation data: inst/extdata/TruckBusAgeDist\_.RData
  \item
    Estimation method: Data file in inst/extdata/TruckBusAgeDist\_.Rdata
  \item
    Estimation script: R/ReportRPATMetrics.R
  \item
    Model object: data/TruckBusAgeDist\_mx.rda
  \item
    Notes: This module has no estimated model parameters, derived from RPAT scripts. Data file is a model input in GreenSTEP
  \end{itemize}
\end{itemize}

\hypertarget{vescenario}{%
\subsection{VEScenario}\label{vescenario}}

Scenario management for VE models
This module contains the following step(s):

\hypertarget{verpatresults}{%
\subsubsection{VERPATResults}\label{verpatresults}}

This module gathers the output of scenario runs in data.table and returns it as a list

\begin{itemize}
\tightlist
\item
  Data sources include Hardcoded configuration
\item
  Model types include config file
\item
  Estimation uses the following methods: Package Build
\item
  Documented in R Script only, no md file produced
\end{itemize}

The models in this model step are:

\begin{itemize}
\tightlist
\item
  Model name: VERPAT OUTPUT config file

  \begin{itemize}
  \tightlist
  \item
    Model type: config file
  \item
    Estimation data: Hardcoded configuration
  \item
    Estimation method: Package Build
  \item
    Estimation script: R/VERPATResults.R
  \item
    Model object: data/VERPATOutputConfig.rda
  \item
    Notes: This module creates a scenario configuration file during package build
  \end{itemize}
\end{itemize}

\hypertarget{verspmresults}{%
\subsubsection{VERSPMResults}\label{verspmresults}}

This module gathers the output of scenario runs in data.table and returns it as a list

\begin{itemize}
\tightlist
\item
  Data sources include Hardcoded configuration
\item
  Model types include config file
\item
  Estimation uses the following methods: Package Build
\item
  Documented in R Script only, no md file produced
\end{itemize}

The models in this model step are:

\begin{itemize}
\tightlist
\item
  Model name: VERSPM OUTPUT config file

  \begin{itemize}
  \tightlist
  \item
    Model type: config file
  \item
    Estimation data: Hardcoded configuration
  \item
    Estimation method: Package Build
  \item
    Estimation script: R/VERSPMResults.R
  \item
    Model object: data/VERSPMOutputConfig.rda
  \item
    Notes: This module creates a scenario configuration file during package build
  \end{itemize}
\end{itemize}

\hypertarget{ve-module-structure}{%
\section{VE Module Structure}\label{ve-module-structure}}

All modules are made available in the form of standard R packages that meet framework specifications. Packages may be in source form or installed form. The following presentation refers to the source form of VisionEval packages. When a package is installed (built) the R system runs the scripts in the R directory and saves functions that are defined within and datasets that are saved by the script. The structure of this installed package is not covered by this document with the exception of the \emph{module\_docs} directory in the installed package. If the module developer follows the guidelines for module documentation, a \emph{module\_docs} directory will be included in the installed package. This will include module documentation in the form of markdown documents.

A package may contain more than one module. The package organization follows the standard organization of R packages. The structure is shown in the following diagram. The components are described below in the order that they are presented in the diagram. The file names are examples.

\begin{verbatim}
VESimHouseholds
|   DESCRIPTION
|   NAMESPACE
|   LICENSE
|     
|
|____R
|    |   CreateHouseholds.R  
|    |   PredictWorkers.R
|    |   CreateEstimationDatasets.R
|    |   ...
|
|
|____inst  
|    |    NOTICE
|    |____extdata  
|         |   pums_households.csv
|         |   pums_households.txt
|         |   pums_persons.csv
|         |   pums_persons.txt
|         |   ...
|         
|
|____data-raw
|    |    some_processed_model_dataset.rda
|    |    ...
|    
|
|____tests
     |____scripts
     |    |   test.R
     |    |   test_functions.R
     |    |   verspm_test.R 
     |    |   vestate_test.R    
     |
     |____verspm
     |    |   logs
     |    |   |   Log_CreateHouseholds.txt
     |    |   |   ...
     |    |
     |    |   ModelState.Rda
     |    
     |____vestate
     |    |   ...
     |
     |    ...
\end{verbatim}

The \emph{DESCRIPTION} and \emph{NAMESPACE} files are standard files required by the R package system. There are good sources available for describing the required contents of these files (\href{http://r-pkgs.had.co.nz/}{R Packages}), so that will not be done here. Most of the entries in these files can be produced automatically from annotations in the R scripts that will be described next, using freely available tools such as \href{https://github.com/hadley/devtools}{devtools} and \href{https://www.rstudio.com/}{RStudio}. The \emph{LICENSE} file contains the text for the Apache 2 license which is the open source license that should be used for VisionEval packages. The accompanying Apache 2 \emph{NOTICE} file is in the \emph{inst} directory.

\hypertarget{the-r-directory}{%
\subsection{The R Directory}\label{the-r-directory}}

The \emph{R} directory is where all the R scripts are placed which define the modules that are included in the package. Each module is defined by a single R script which has the name of the module (and the .R file extension). A module script does 4 things:\\
1) It specifies the model and estimates model parameters. Model estimation datasets may be processed by the script or may be loaded from other sources (see below).\\
2) It defines all the specifications for data that the module depends on.\\
3) It defines all of the functions that implement the submodel.
4) It includes test code used during module development

When a binary (installed) package is built from the source package, each R script is run; estimation datasets are processed, model parameters are saved, module specifications are saved, functions are parsed into a more efficient form. Following section describe the structure of a module R script in more detail. An example of the \emph{AssignTransitService} module script from the \emph{VETransportSupply} package is included in Appendix E.

By convention, the module script is organized into 4 sections reflecting the list above. Following sections 8.1.1 to 8.1.4 explain each module script section in detail. Section 8.1.1 explains how model specification and estimation is handled. Subsection 8.1.1.1 focuses in on the handling of model estimation data which, in some cases, may use specialized scripts. Section 8.1.2 explains how to write module specifications which tell the framework how the module is to be run, what input data are to be processed, what data are to be retrieved from the datastore, and what data are to be saved to the datastore. Subsection 8.1.2.1 focuses in on the \emph{OPTIONAL} specification that module developers can use to enable optional model inputs. Subsection 8.1.2.2 focuses in the the \emph{CALL} specification that enables modules to call other modules to perform calculation services. Section 8.1.3 describes how to write a main function and supporting functions to implement a module. Section 8.1.4 explains test code that is commonly included in a module to assist the module developer in the module development process. Finally, Section 8.1.5 explains a special module named \emph{Initialize} that may be included in a package. The purpose of this module is to enable module developers to include specialized input data checks and preparation.

\hypertarget{model-specification-and-estimation}{%
\subsubsection{Model Specification and Estimation}\label{model-specification-and-estimation}}

As the name suggests, this section of the script handles tasks related to processing model estimation data, model specification, and model parameter estimation. This should be done in a manner which enables others to understand the structure of the model, the data it is based on, and how parameters are estimated. It should enable others to replicate the process and to test modifications. Typically, model specification and estimation code does 4 things: loading the data to be used, defining functions that carry out key specification and estimation procedures, applying the functions to produce objects that define the model(s), and saving the model objects.

Models vary in their complexity. In some modules the model may simply be an algorithm with decision rules or asserted parameters. In this case, there is no need to fill out this section of the script. For example, the \emph{AssignLifeCycle} module in the \emph{VESimHouseholds} package assigns lifecycle codes to households using rules regarding the numbers of adults, children, and workers in the household. In cases like this, the model estimation and specification section will be empty. In other cases, models will be quite complex and this section of the script will be extensive. For example, the ``CalculateHouseholdDvmt'' module does the following in the process of building models and comprises hundreds of lines of code:\\
- Estimate a binomial logit model of the probability that a household has any DVMT
- Estimate a linear model of the amount of household DVMT given that a household has any DVMT
- Estimate a dispersion factor for the linear model so that the variance of modeled DVMT matches the observed variance
- Simulate household DVMT 1000 times by stochastically applying the binomial and linear models
- Calculate quantiles of simulated DVMT
- Estimate a linear model of average DVMT using the simulation data
- Estimate models of the DVMT quantiles as a function of the average DVMT

Model estimation data preparation may also be extensive. Whether it is or not, documenting the data used in building a model and making those data available are key to making the models reproducible and extensible. Moreover, for some modules it is important that model users be able to have model parameters reflect the conditions for their region. For example, the \emph{CreateHouseholds}, \emph{PredictWorkers}, and \emph{PredictIncome} modules use Census public use microdata sample data for the region to estimate parameters. There are several ways that model estimation data can be handled in the VisionEval model system. These are described in detail in Section 8.1.1.1.

The model estimation code should also save objects to use in documenting the modules such as:
1. Model summary statistics such as is produced when a model object (such as a linear model estimated using the \emph{lm} function) is processed by the \emph{summary} function;
2. Data frames, tables, and matrices; and,
3. Graphs or other static data visualizations.

The first two should be saved as objects just like any other object saved to implement a model. It is suggested that these documentation objects be stored in a list along with the model that they document. For example, follow is a portion of the \emph{PredictIncome.R} script which saves (and documents) a list which contains the household income model including documentation of the summary statistics for the model.

\begin{verbatim}
#Save the household income model
#-------------------------------
#' Household income model
#'
#' A list containing the income model equation and other information needed to
#' implement the household income model.
#'
#' @format A list having the following components:
#' \describe{
#'   \item{Type}{a string identifying the type of model ("linear")}
#'   \item{Formula}{makeModelFormulaString(IncModel_LM)}
#'   \item{PrepFun}{a function that prepares inputs to be applied in the linear model}
#'   \item{OutFun}{a function that transforms the result of applying the linear model}
#'   \item{Summary}{the summary of the linear model estimation results}
#'   \item{SearchRange}{a two-element vector specifying the range of search values}
#' }
#' @source PredictIncome.R script.
"HHIncModel_ls"
usethis::use_data(HHIncModel_ls, overwrite = TRUE)
\end{verbatim}

The \emph{Summary} component of this list shows the summary statistics for the model. As explained in the module documentation section below, this can be automatically inserted into the module documentation. It is recommended that the \emph{capture.output} function be used rather than the \emph{print} function to capture model summary statistics because the \emph{print} function will insert line numbers. This method can be used to save other text that can then be inserted into module documentation. This example also shows how objects are documented and saved.

It can also be useful to save data frames, tables, matrices to use in the model documentation. These can be saved like any other data object and then inserted as described in the module documentation section.

Graphs or other visualizations are saved in a different manner. If these are saved as an image file in ``png'' format, they can be inserted into the module documentation. They must be saved to the ``data'' directory to do so. Following is an example:

\begin{verbatim}
#Plot comparison of observed and estimated income distributions
png(
  filename = "data/reg-hh-inc_obs-vs-est_distributions.png",
  width = 480,
  height = 480
)
plot(
  density(IncObs_),
  xlim = c(0, 200000),
  xlab = "Annual Dollars ($2000)",
  main = "Distributions of Observed and Predicted Household Income \nRegular Households"
  )
lines(density(IncEst_), lty = 2)
legend("topright", legend = c("Observed", "Predicted"), lty = c(1,2))
dev.off()
\end{verbatim}

There are many ways that a module developer can code the model specification and parameter estimation procedures. However this is done, the code should be well organized and commented so that it is understandable to reviewers. All code should follow the VisionEval coding guidelines. In addition, it is highly recommended that code be grouped into functions to aid understandability and reduce unnecessary code repetition which can lead to errors. Complex functions should be well documented. Function documentation is done using \href{http://r-pkgs.had.co.nz/man.html}{Roxygen syntax}. Following is an example of the code which estimates a housing choice model (single-family vs.~multifamily) in the \emph{PredictHousing} module of the \emph{VELandUse} package.

\begin{verbatim}
#Define a function to estimate housing choice model
#--------------------------------------------------
#' Estimate housing choice model
#'
#' \code{estimateHousingModel} estimates a binomial logit model for choosing
#' between single family and multifamily housing
#'
#' This function estimates a binomial logit model for predicting housing choice
#' (single family or multifamily) as a function of the supply of housing of
#' these types and the demographic and income characteristics of the household.
#'
#' @param Data_df A data frame containing estimation data.
#' @param StartTerms_ A character vector of the terms of the model to be
#' tested in the model.
#' @return A list which has the following components:
#' Type: a string identifying the type of model ("binomial"),
#' Formula: a string representation of the model equation,
#' PrepFun: a function that prepares inputs to be applied in the binomial model,
#' OutFun: a function that transforms the result of applying the binomial model.
#' Summary: the summary of the binomial model estimation results.
#' @import visioneval stats
#Define function to estimate the income model
estimateHousingModel <- function(Data_df, StartTerms_) {
  #Define function to prepare inputs for estimating model
  prepIndepVar <-
    function(In_df) {
      Ah <-
        c("Age15to19",
          "Age20to29",
          "Age30to54",
          "Age55to64",
          "Age65Plus")
      Out_df <-
        data.frame(t(apply(In_df[, Ah], 1, function(x) {
          AgeLvl_ <- 1:5 #Age levels
          HhAgeLvl_ <- rep(AgeLvl_, x)
          HeadOfHh_ <- numeric(5)
          if (max(HhAgeLvl_) < 5) {
            HeadOfHh_[max(HhAgeLvl_)] <- 1
          } else {
            if (all(HhAgeLvl_ == 5)) {
              HeadOfHh_[5] <- 1
            } else {
              NumMidAge <- sum(HhAgeLvl_ %in% c(3, 4))
              NumElderly <- sum(HhAgeLvl_ == 5)
              if (NumMidAge > NumElderly) {
                HeadOfHh_[max(HhAgeLvl_[HhAgeLvl_ < 5])] <- 1
              } else {
                HeadOfHh_[5] <- 1
              }
            }
          }
          HeadOfHh_
        })))
      names(Out_df) <- paste0("Head", Ah)
      Out_df$HhSize <- In_df$HhSize
      Out_df$Income <- In_df$Income
      Out_df$RelLogIncome <- log1p(In_df$Income) / mean(log1p(In_df$Income))
      Out_df$Intercept <- 1
      Out_df
    }
  EstData_df <- prepIndepVar(Data_df)
  EstData_df$SingleFamily <- as.numeric(Data_df$HouseType == "SF")
  #Define function to make the model formula
  makeFormula <-
    function(StartTerms_) {
      FormulaString <-
        paste("SingleFamily ~ ", paste(StartTerms_, collapse = "+"))
      as.formula(FormulaString)
    }
  #Estimate model
  HouseTypeModel <-
    glm(makeFormula(StartTerms_), family = binomial, data = EstData_df)
  #Return model
  list(
    Type = "binomial",
    Formula = makeModelFormulaString(HouseTypeModel),
    Choices = c("SF", "MF"),
    PrepFun = prepIndepVar,
    Summary = summary(HouseTypeModel)
  )
}

#Estimate the binomial logit model
#---------------------------------
#Load the household estimation data
Hh_df <- VESimHouseholds::Hh_df
#Select regular households
Hh_df <- Hh_df[Hh_df$HhType == "Reg",]
Hh_df$Income[Hh_df$Income == 0] <- 1
#Estimate the housing model
HouseTypeModelTerms_ <-
  c(
    "HeadAge20to29",
    "HeadAge30to54",
    "HeadAge55to64",
    "HeadAge65Plus",
    "RelLogIncome",
    "HhSize",
    "RelLogIncome:HhSize"
  )
HouseTypeModel_ls <- estimateHousingModel(Hh_df, HouseTypeModelTerms_)
rm(HouseTypeModelTerms_)
\end{verbatim}

As can be seen in this example, most of the code defines and documents a function which estimates a binomial choice model given a estimation dataset and a list of model variable names. This function does a number of things including transforming estimation data, creating a model formulation from the list of independent variables, estimating the variables, and returning a list of model components. After the function is defined, it is applied using the model estimation data and a specified list of independent variables. This approach to model specification and estimation makes it easy for a module developer to try out different model specifications, measuring their relative performance, and documenting the results.

The approach used in this example takes advantage of some helper functions in the framework software. The \emph{makeModelFormulaString} function takes an R model formula object and converts it into a string representation. When the model is applied in the module, the string is parsed and evaluated with a data frame of independent variables. This provides a compact way to store a model and a fast way to apply it. Several other framework functions assist with applying models in this form. The \emph{applyBinomialModel} applies a binomial logit model. The \emph{applyLinearModel} applies a linear regression model. Both of these functions enable the models to self calibrate to match an input target. For example, the \emph{PredictHousing} module adjusts the constant of the model so that the proportions of households in single-family vs.~multifamily dwelling units matches the housing supply in the area. The \emph{applyBinomialModel} does this efficiently by calling the \emph{binarySearch} function which implements a binary search algorithm.

Module developers are not limited to using the previous approach to specifying and implementing a model. Most if not all R functions that estimate models also have companion prediction functions to apply the estimated model to a new set of data. This is often the simplest and best way to apply a model. One drawback of this approach, however, is that the object that is returned by the model estimation function and that is used in making a prediction is often very large because it includes a copy of all of the estimation data and datasets used to calculate model statistics. If the model estimation datasets are very large, this will pose a problem for keeping the module package in a central repository. In that case, the module code needs to remove parts of the model object that are not necessary for prediction. For example, the \emph{AssignVehicleOwnership} module in the \emph{VEHouseholdVehicles} package uses an ordered logit model to predict household auto ownership for households owning one or more vehicles. The model is estimated using data from the 2001 NHTS so the model object returned by the estimation function (\emph{clm} in the \emph{ordinal} package) is large. Portions of the model object not needed by the corresponding prediction function are removed. It is often a matter of trial and error to find out how much can be removed from the model object without adversely affecting the prediction function.

\begin{verbatim}
#Model number of vehicles of non-zero vehicle households
EstData_df <- EstData_df[EstData_df$ZeroVeh == 0,]
EstData_df$VehOrd <- EstData_df$NumVeh
EstData_df$VehOrd[EstData_df$VehOrd > 6] <- 6
EstData_df$VehOrd <- ordered(EstData_df$VehOrd)
AutoOwnModels_ls$Metro$Count <-
  clm(
    VehOrd ~ Workers + LogIncome + DrvAgePop + HhSize + OnlyElderly + IsSF +
      IsUrbanMixNbrhd + LogDensity + TranRevMiPC,
    data = EstData_df,
    threshold = "equidistant"
  )
#Trim down model
AutoOwnModels_ls$Metro$Count[c("fitted.values", "model", "y")] <- NULL
\end{verbatim}

After a model has been estimated, the model objects which embody the model need to be saved as part of the package. There is a standard way of doing this which is illustrated in the following example of saving the model in the \emph{PredictHousing} module. The housing prediction model object is a list called `HouseTypeModel\_ls'. This list is saved in the `data' directory of the package. By saving the model object in the `data' directory, it can be addressed directly in the module function that applies the model. Note how documentation is handled.

\begin{verbatim}
#Save the housing choice model
#-----------------------------
#' Housing choice model
#'
#' A list containing the housing choice model equation and other information
#' needed to implement the housing choice model.
#'
#' @format A list having the following components:
#' \describe{
#'   \item{Type}{a string identifying the type of model ("binomial")}
#'   \item{Formula}{makeModelFormulaString(HouseTypeModel)}
#'   \item{PrepFun}{a function that prepares inputs to be applied in the model}
#'   \item{Summary}{the summary of the binomial logit model estimation results}
#'   \item{SearchRange}{a two-element vector specifying the range of search values}
#' }
#' @source PredictHousing.R script.
"HouseTypeModel_ls"
usethis::use_data(HouseTypeModel_ls, overwrite = TRUE)
\end{verbatim}

The \emph{use\_data} function in the \emph{usethis} package saves the data and documentation correctly in the package and simplifies the procedure for doing so.

Although model estimation code is usually included in the module script, in some instances it may be more understandable to estimate the models for several modules in one script. This is what is done in the \emph{CreateSimBzoneModels.R} script in the \emph{VESimLandUse} package. This script estimates all the models for modules in the package. Model estimation is handled this way because the same model estimation dataset is used for all the models and the models build upon each other. Including all the model estimations in one file makes it easier to code and easier to review.

\hypertarget{model-estimation-datasets}{%
\subsubsection{Model Estimation Datasets}\label{model-estimation-datasets}}

Model estimation datasets may be read in from several sources. If model estimation data are large and are used by multiple modules located in different packages, then they may be housed in their own package. This is the case with the 2001 NHTS data which are in the \emph{VE2001NHTS} package. The estimation data in the package can be directly addressed in the model estimation code using the standard `PackageName::DatasetName' notation as shown in the following example:

\begin{verbatim}
Hh_df <- VE2001NHTS::Hh_df
\end{verbatim}

If estimation data are retrieved from another package as in this case, the DESCRIPTION file for the package must list the package from which the data are retrieved in the \emph{Imports} section. For example, the Imports section of the VEHouseholdTravel package reads as follows. The VE2001NHTS package is listed as are other packages that this package relies on.

\begin{verbatim}
Imports:
    visioneval,
    devtools,
    VE2001NHTS,
    data.table
\end{verbatim}

If estimation data is to be shared among several modules that are all within the same package, then all the data preparation can be done in one script which is run first when the package is built. This approach is used in the \emph{VESimHouseholds} package. The \emph{CreateEstimationDatasets.R} script loads and processes a Census public use microdata sample dataset that is used in estimating models in 3 modules that are in the package (\emph{CreateHouseholds}, \emph{PredictWorkers}, \emph{PredictIncome}). When, as in this case, a separate script is used to prepare the estimation data for several modules in the package, the data are saved in the data directory of the package and the other scripts load the dataset from that directory. The following extracts shows how a processed PUMS household dataset (a data frame named Hh\_df) is saved in the CreateEstimationDatasets.R script. The lines starting with \texttt{\#\textquotesingle{}} are data documentation in \href{https://cran.r-project.org/web/packages/roxygen2/vignettes/roxygen2.html}{roxygen2} form. Although data documentation can be tedious, especially for large datasets, it is should always be done and is an important aspect of the VisionEval model system.

\begin{verbatim}
#' Household data from Census PUMS
#'
#' A household dataset containing the data used for estimating the
#' CreateHouseholds, PredictWorkers, PredictLifeCycle, PredictIncome, and
#' PredictHouseType modules derived from from year 2000 PUMS data for Oregon.
#'
#' @format A data frame with 65988 rows and 17 variables (there may be a
#' different number of rows if PUMS datasets are used for different areas):
#' \describe{
#'   \item{Age0to14}{number of persons in 0 to 14 age group}
#'   \item{Age15to19}{number of persons in 15 to 19 age group}
#'   \item{Age20to29}{number of persons in 20 to 29 age group}
#'   \item{Age30to54}{number of persons in 30 to 54 age group}
#'   \item{Age55to64}{number of persons in 55 to 64 age group}
#'   \item{Age65Plus}{number of persons 65 years or older}
#'   \item{Wkr15to19}{number of workers in 15 to 19 age group}
#'   \item{Wkr20to29}{number of workers in 20 to 29 age group}
#'   \item{Wkr30to54}{number of workers in 30 to 54 age group}
#'   \item{Wkr55to64}{number of workers in 55 to 64 age group}
#'   \item{Wkr65Plus}{number of workers 65 years or older}
#'   \item{AvePerCapInc}{average per capita income of PUMA, nominal $}
#'   \item{HouseType}{housing type (SF = single family, MF = multifamily)}
#'   \item{Income}{annual household income, nominal 1999$}
#'   \item{HhSize}{number of persons in household}
#'   \item{HhType}{household type (Reg = regular household, Grp = group quarters)}
#'   \item{HhWeight}{household sample weight}
#' }
#' @source CreateEstimationDatasets.R script.
"Hh_df"
devtools::use_data(Hh_df, overwrite = TRUE)
rm(Hh_df)
\end{verbatim}

If as in this case, one script processes the estimation data for use by several modules, it is important that the data processing script be run prior to the other scripts when the package is built. Otherwise the processed estimation data will not be available to the module packages that need it. Managing the order of package script processing is handled by the \emph{Collate} section of the package \emph{DESCRIPTION} file. Following is an example from the \emph{VESimHouseholds} package:

\begin{verbatim}
Collate: 
    'CreateEstimationDatasets.R'
    'CreateHouseholds.R'
    'PredictWorkers.R'
    'PredictIncome.R'
    'AssignLifeCycle.R'
\end{verbatim}

The best way to establish the proper collation (i.e.~ordering) of script execution is to carry out model estimation through the definition and invocation of a function, and to have an \emph{\citet{include}} statement which lists the estimation data processing script in the function documentation using \href{http://r-pkgs.had.co.nz/man.html}{Roxygen syntax}. When the package documentation is compiled, the \emph{Collate} section of the package \emph{DESCRIPTION} file will be filled out properly. Following is an example of function documentation containing a \emph{\citet{include}} statement from the \emph{CreateHouseholds.R} module script in the \emph{VESimHouseholds} package:

\begin{verbatim}
#Define a function to estimate household size proportion parameters
#------------------------------------------------------------------
#' Calculate proportions of households by household size
#'
#' \code{calcHhAgeTypes} creates a matrix of household types and age
#' probabilities.
#'
#' This function produces a matrix of probabilities that a person in one of six
#' age groups is in one of many household types where each household type is
#' determined by the number of persons in each age category.
#'
#' @param HhData_df A dataframe of household estimation data as produced by the
#' CreateEstimationDatasets.R script.
#' @param Threshold A number between 0 and 1 identifying the percentile
#' cutoff for determining the most prevalent households.
#' @return A matrix where the rows are the household types and the columns are
#' the age categories and the values are the number of persons.
#' @include CreateEstimationDatasets.R
#' @export
\end{verbatim}

If model estimation data are only used by a single module, then the processing code should be included in the module script.

There are several places where model estimation datasets may be located depending on the size of the datasets, whether the datasets were preprocessed using other tools or scripts, and whether the intention of the module developer is to enable model users to customize model estimation to reflect data for the region where the model is to be applied.

For some modules, it is desirable that model parameters be estimated to reflect data for the region where the model is to be applied. This is the case for the \emph{CreateHouseholds}, \emph{PredictWorkers}, and \emph{PredictIncome} modules in the \emph{VESimHouseholds} package because household and worker age compositions and income distributions are likely to vary by region. For modules like these, the estimation data should be included in the `inst/extdata' directory of the package in the form of CSV-formatted text files. The data files should be accompanied by text files having the same names but with a `.txt' extension rather than a `.csv' extension. The purpose of the text files is to document the corresponding data files so that model users will know how to obtain and prepare datasets for their region that can be used in model estimation. For example, the `inst/extdata' directory of the \emph{VESimHouseholds} package contains the following files: `pums\_households.csv', `pums\_households.txt', `pums\_persons.csv', and `pums\_persons.txt'.

If a module's estimation datasets are to be loaded from `csv' files in the `inst/extdata' directory, then the module code should include procedures to check those data for correctness to assure that the model parameters will be estimated correctly. The framework includes as function, \emph{processEstimationInputs}, to assist with this task. The \emph{processEstimationInputs} function has 3 arguments: \emph{Inp\_ls}, \emph{FileName}, and \emph{ModuleName}. \emph{ModuleName} is the name of the module that is doing the processing. The sole purpose of this argument is to identify the module in any error messages that are written to the log. \emph{FileName} is the name of the file in the `inst/extdata' directory to be processed. \emph{Inp\_ls} is a list of data specifications that are used in checking the correctness of the data. This is explained in more detail below. The \emph{processEstimationInputs} function returns a data frame which contains the data in the specified file, if those data have no errors. Following is an example of how the \emph{processEstimationInputs} function is used:

\begin{verbatim}
Hh_df <- processEstimationInputs(
    Inp_ls = PumsHhInp_ls,
    FileName = "pums_households.csv",
    ModuleName = "CreateEstimationDatasets")
\end{verbatim}

Before the estimation data may be checked, the script must describe specifications for the data. The structure of the specifications is best described using an example. The following code snippet is from the \emph{CreateEstimationDatasets.R} script:

\begin{verbatim}
PumsHhInp_ls <- items(
  item(
    NAME =
      items("SERIALNO",
            "PUMA5",
            "HWEIGHT",
            "UNITTYPE",
            "PERSONS"),
    TYPE = "integer",
    PROHIBIT = c("NA", "< 0"),
    ISELEMENTOF = "",
    UNLIKELY = "",
    TOTAL = ""
  ),
  item(
    NAME = "BLDGSZ",
    TYPE = "integer",
    PROHIBIT = c("< 0"),
    ISELEMENTOF = "",
    UNLIKELY = "",
    TOTAL = ""
  ),
  item(
    NAME = "HINC",
    TYPE = "double",
    PROHIBIT = c("NA"),
    ISELEMENTOF = "",
    UNLIKELY = "",
    TOTAL = ""
  )
)
\end{verbatim}

The meanings of these specifications are as follows:\\
- \textbf{NAME} This is the name(s) of the data column in the file. The name must be a character string (i.e.~surrounded by quotation marks). If multiple columns of the file have the same specifications except for their names, they can listed as in the first item in the example. This method avoids a lot of redundant specifications. Note that the order of specifications does not need to be the same as the order of the columns in the file. Also note that it is OK if the file contains columns that are not specified, as long as it contains all of the columns that are specified. Columns that are not listed are ignored.\\
- \textbf{TYPE} This the data type of the data contained in the column. Allowable types are the 4 primitive types recognized by the R language (integer, double, character, and logical), the complex types listed in section 6.4, or `compound'. The type must be a character string.\\
- \textbf{PROHIBIT} This is a character vector which identifies all prohibited data conditions. For example, the specification for the ``PERSONS'' data column in the example above is c(``NA'', ``\textless{} 0''). This means that there cannot be any values that are undefined (NA) or less than 0. The symbols that may be used in a PROHIBIT specification are: NA, ==, !=, \textless, \textless=, \textgreater, \textgreater= (i.e.~undefined, equal to, not equal to, less than, less than or equal to, greater than, greater than or equal to). Note that prohibited conditions must be represented as character strings. If there is more than one prohibited condition, as in the example, the conditions must be entered as an R vector using the `c()' function, as shown in the example. The absence of prohibited conditions is represented by an empty character string (i.e.~````).\\
- \textbf{ISELEMENTOF} This is a vector which specifies the set of allowed values. It is used when the input values must be elements of a set of discrete values. The vector describing the set must be of the same type as is specified for the input data. Vectors of elements are entered using the `c()' function. For example, if the entries in a column of data could only have the values `urban' or `rural', then the specification would be written as c(''urban'', ``rural''). The absence of a specification for this is represented by an empty character string.\\
- \textbf{UNLIKELY} This is a vector of conditions that while not prohibited, are not likely to occur. While conditions identified in the PROHIBIT and ISELEMENTOF specifications will produce an error if they are not met (thereby stopping the calculation of parameters), the conditions identified in the UNLIKELY specification will only produce a warning message. Vectors of conditions are entered using the `c()' function.
- \textbf{TOTAL} This specifies a required total value for the column of data. This is useful if the data represents proportions or percentages and must add up to 1 or 100. The absence of a specification for this is represented by an empty character string.

In some instances it is impractical to include the model estimation data as files in the `inst/extdata' directory, and not necessary for model users to provide regional model estimation data. If, for example, the source data has confidential elements, it may be necessary to preprocess the data to anonymize it before including in the package; or the source data may be too large to include as a text file in the package. In these cases, source data may be processed outside of the package and then the processed datasets included in the package as datasets in R binary files. If that is done, the binary data files should be placed in a directory named `data-raw' in the package.

For large datasets, it is also possible to have them stored remotely and to have the module code retrieve them from remote storage. This is what is done in the \emph{Make2001NHTSDataset.r} script in the \emph{VE2001NHTS} package. Zip archives of the public use datasets for the 2001 National Household Travel Survey are stored in a GitHub repository (\url{https://github.com/VisionEval/NHTS2001}). There are 4 zip archive files stored in the `data' directory of the repository: DAYPUB.zip, HHPUB.zip, PERPUB.zip, and VEHPUB.zip. Each zip archive contains a compressed `csv' formatted text file containing the data of interest. Because the process of downloading and unzipping some of the files takes an appreciable amount of time, the script checks whether that has already been done (by the presence of a file in the `data-raw' directory). If it has not been done, the script calls a function which handles the downloading, unzipping, and reading of the file. It also cleans up temporary files created when the zip archive was downloaded and unzipped.

If a module is to download datafiles from remote storage, the module developer will need to write R code to handle the requisite tasks. The framework does not build in any functionality to do this. The coding is not complicated as the following example of commented snippets of code from the \emph{Make2001NHTSDataset.r} script illustrate. The first section of code identifies the address of the data repository. The second section defines a function which handles downloading, unzipping, and reading a dataset stored in the repository, and cleaning up temporary files created in the process. The third section applies the handler function to download NHTS public use household data (HHPUB), selects relevant data fields, and saves those data as an R binary file to the `data-raw' directory. If the R binary file already exists, the data are not downloaded from the repository but are loaded from the saved file instead.

\begin{verbatim}
#Identify the code repository. Note that in order to access data
#files from a GitHub repository, the beginning of the address must 
#be 'raw.githubusercontent.com' not 'github.com'
Nhts2001Repo <-
  "https://github.com/VisionEval/NHTS2001/blob/master/data"
  
#Define a function to handle retrieving a zipped dataset from the
#repository, unzipping it, reading the unzipped file, and cleaning
#up temporary files
getZipDatasetFromRepo <- function(Repo, DatasetName) {
  ZipArchiveFileName <- paste0(DatasetName, ".zip")
  CsvFileName <- paste0(DatasetName, ".csv")
  download.file(paste0(file.path(Repo, ZipArchiveFileName),"?raw=true"), ZipArchiveFileName)
  Data_df <- read.csv(unzip(ZipArchiveFileName), as.is = TRUE)
  file.remove(ZipArchiveFileName, CsvFileName)
  Data_df
}

#Download NHTS 2001 public use household data from repository and 
#process if it has not already been done
if (!file.exists("data-raw/Hh_df.rda")) {
  Hh_df <- getZipDatasetFromRepo(Nhts2001Repo, "HHPUB")
  Keep_ <- c("HOUSEID", "AGE_P1", "AGE_P2", "AGE_P3", "AGE_P4", "AGE_P5", "AGE_P6",
             "AGE_P7", "AGE_P8", "AGE_P9", "AGE_P10", "AGE_P11", "AGE_P12", "AGE_P13",
             "AGE_P14", "CENSUS_D", "CENSUS_R", "DRVRCNT", "EXPFLHHN", "EXPFLLHH",
             "FLGFINCM", "HBHRESDN", "HBHUR", "HBPPOPDN", "HHC_MSA", "HHFAMINC",
             "HHINCTTL", "HHNUMBIK", "HHR_AGE", "HHR_DRVR", "HHR_RACE", "HHR_SEX",
             "HHSIZE", "HHVEHCNT", "HOMETYPE", "HTEEMPDN", "HTHRESDN", "HTHUR",
             "HTPPOPDN", "LIF_CYC", "MSACAT", "MSASIZE", "RAIL", "RATIO16V",
             "URBAN", "URBRUR", "WRKCOUNT", "CNTTDHH")
  Hh_df <- Hh_df[, Keep_]
  save(Hh_df, file = "data-raw/Hh_df.rda", compress = TRUE)
} else {
  load("data-raw/Hh_df.rda")
}
\end{verbatim}

\hypertarget{module-specifications}{%
\subsubsection{Module Specifications}\label{module-specifications}}

The module specifications section of the module script provides specifications that are used by the framework in a number of ways. The specifications:\\
- Identify the level of geography that the model is to be run at;
- Describe all the data to be loaded from input files and enable unit conversions;
- Describe all the data that the module needs from the datastore in order to run;
- Describe all the data that the module produces that needs to be saved to the datastore;
- Identify other modules the module needs to call in order to do its calculations;
- Allow the framework to check and load all input files before any modules are run;
- Allow the framework to check that modules are compatible with one another in terms of the data that they produce and consume;
- Allow the sequence of model steps (module calls) to be simulated to check whether each module will have the data it needs when it is run; and,
- Provide detailed documentation about all data that is produced by a model run.

These specifications are declared in a list that is similar to the list for specifying model estimation data described in Section 8.1.1.1. A full example is shown in Appendix E. Following is a skeleton of a module specifications list for a module whose name is \emph{MyModule}. The name of the specifications list must be the concatenation of the module name and \emph{Specifications}, so in this example the name is \emph{MyModuleSpecifications}. Note that the functions \emph{items} and \emph{item} are aliases for the R \emph{list} function. Their purpose is to make the specifications easier to read.

\begin{verbatim}
MyModuleSpecifications <- list(
  RunBy = ...,
  NewInpTable = items(
    item(
      ...
    ),
    item(
      ...
    )
  ),
  NewSetTable = items(
    item(
      ...
    ),
    item(
      ...
    )
  ),
  Inp = items(
    item(
      ...
    ),
    item(
      ...
    )
  ),
  Get = items(
     item(
      ...
    ),
    item(
      ...
    )
  ),
  Set = items(
    item(
      ...
    ),
    item(
      ...
    )
  ),
  Call = items(
     item(
      ...
    ),
    item(
      ...
    )
  )
)
\end{verbatim}

Following are detailed descriptions and examples of each component of the specifications list.

The \textbf{RunBy} component specifies the level of geography that the model is to be run at. For example, the congestion submodel in the GreenSTEP and RSPM models runs at the Marea level. This specification is used by the software framework to determine how to index data that is read from the datastore and data that is written to the datastore. Acceptable values are ``Region'', ``Azone'', ``Bzone'', and ``Marea''. The \emph{RunBy} specification looks like the following example:

\begin{verbatim}
RunBy = "Marea",
\end{verbatim}

The \textbf{NewInpTable} and \textbf{NewSetTable} components specify any new tables that need to be created in the datastore to accommodate input data or data produced by a module respectively. The following specifications are required for each new table that is to be created.\\
- TABLE: the name of the table that is to be created; and,
- GROUP: the type of group the table is to be put into. There are 3 group types: \emph{Global}, \emph{BaseYear}, and \emph{Year}. If \emph{Global}, the table is created in the global group of the datastore. If \emph{BaseYear} the table is created in the year group for the base year and only in that year group. For example, if the model base year is 2010, the table will be created in the \emph{2010} group. If \emph{Year}, the table will be created in the group for every model run year. For example, if the run years are 2010 and 2040, the table will be created in both the \emph{2010} group and the \emph{2040} group.\\
Following is an example of a \emph{NewSetTable} specification for creating a Vehicle table in each model run year group.

\begin{verbatim}
NewSetTable = items(
  item(
    TABLE = "Vehicle",
    GROUP = "Year"
  )
),
\end{verbatim}

The \textbf{Inp} component specifies all model inputs that the module requires. Each item in the list describes one or more data fields in an input file. Each item must have the following attributes (except for the OPTIONAL attribute):\\
- NAME: the names of one or more data fields in the input file, and the names used for the datasets when they are loaded into the datastore. The names must match corresponding column names with the exception that column names in input files may contain \emph{year} and \emph{multiplier} modifiers as described in Section 6.4.;\\
- FILE: the name of the file that contains the data fields;\\
- TABLE: the name of the datastore table the datasets will be put into;\\
- GROUP: the type of group where the table is located in the datastore (i.e.~Global, Year, BaseYear);
- TYPE: the data type (e.g.~double, distance, compound);\\
- UNITS: the measurement units for the data;\\
- NAVALUE: the value used to represent NA (i.e.~missing value) in the datastore;\\
- SIZE: the maximum number of characters for character data (or 0 for numeric data);\\
- PROHIBIT: data values that are prohibited or ``\,'' if not applicable (see Section 8.1.1.1 for explanation);\\
- ISELEMENTOF: allowed categorical data values or ``\,'' if not applicable (see Section 8.1.1.1 for explanation);\\
- UNLIKELY: data conditions that are unlikely or ``\,'' if not applicable (see Section 8.1.1.1 for explanation);\\
- TOTAL: the total for all values (e.g.~1) or ``\,'' if not applicable;\\
- DESCRIPTION: descriptions of the data corresponding to the names in the NAME attribute; and,\\
- OPTIONAL: optional specification which identifies whether dataset is optional (see section 8.1.2.1)\\
Following is an example of the \emph{Inp} component for the \emph{PredictHousingSpecifications} in the \emph{VELandUse} package. The \emph{Inp} specifications include two items. Each item lists one or more field names (i.e.~column names in the input file) in the NAME attribute. Multiple field names can be listed in an item if all the other attributes except for DESCRIPTION are the same for all the fields. The descriptions in the DESCRIPTION attribute must correspond in order to the dataset names in the NAME attribute in order for them to be stored correctly in the datastore. The values that may be entered for the TYPE and UNITS attributes are described in Section 6.3. It should be noted that the UNITS attribute must not include `year' (for `currency' type) or `multiplier' information. That information is part of the input file field names instead (where relevant). This is explained in more detail in Section 6.4. The framework uses the information in the \emph{Inp} to read the input files, check whether the data are correct, and save the data to the correct location in the datastore.

\begin{verbatim}
Inp = items(
  item(
    NAME =
      items(
        "SFDU",
        "MFDU",
        "GQDU"),
    FILE = "bzone_dwelling_units.csv",
    TABLE = "Bzone",
    GROUP = "Year",
    TYPE = "integer",
    UNITS = "DU",
    NAVALUE = -1,
    SIZE = 0,
    PROHIBIT = c("NA", "< 0"),
    ISELEMENTOF = "",
    UNLIKELY = "",
    TOTAL = "",
    DESCRIPTION =
      items(
        "Number of single family dwelling units (PUMS codes 01 - 03) in zone",
        "Number of multi-family dwelling units (PUMS codes 04 - 09) in zone",
        "Number of qroup quarters population accommodations in zone"
      )
  ),
  item(
    NAME = items(
      "HhPropIncQ1",
      "HhPropIncQ2",
      "HhPropIncQ3",
      "HhPropIncQ4"),
    FILE = "bzone_hh_inc_qrtl_prop.csv",
    TABLE = "Bzone",
    GROUP = "Year",
    TYPE = "double",
    UNITS = "NA",
    NAVALUE = -1,
    SIZE = 0,
    PROHIBIT = c("NA", "< 0"),
    ISELEMENTOF = "",
    UNLIKELY = "",
    TOTAL = "",
    DESCRIPTION =
      items(
        "Proportion of Bzone households (non-group quarters) in 1st quartile of Azone household income",
        "Proportion of Bzone households (non-group quarters) in 2nd quartile of Azone household income",
        "Proportion of Bzone households (non-group quarters) in 3rd quartile of Azone household income",
        "Proportion of Bzone households (non-group quarters) in 4th quartile of Azone household income"
      )
  )
),
\end{verbatim}

The \textbf{Get} component contains one or more items that identify data that the module need to have retrieved from the datastore. Note that the \emph{Get} component must identify all datasets the module requires (other than those that are included in the package), including those specified in the \emph{Inp} component. The datasets identified in the \emph{Inp} component are not automatically made available to the module. Each item in the \emph{Get} component specifies attributes for one or more related datasets as follows:\\
- NAME: the names of one or more datasets to be loaded;\\
- TABLE: the name of the table that the datasets are located in;\\
- GROUP: the type of group where the table is located in the datastore (i.e.~Global, Year, BaseYear);\\
- TYPE: the data type (e.g.~double, distance, compound);\\
- UNITS: the measurement units for the data;\\
- PROHIBIT: data values that are prohibited or ``\,'' if not applicable (see Section 8.1.1.1 for explanation);\\
- ISELEMENTOF: allowed categorical data values or ``\,'' if not applicable (see Section 8.1.1.1 for explanation); and,
- OPTIONAL: optional specification which identifies whether dataset is optional (see section 8.1.2.1)\\
Unlike the `Inp' specifications, the `Get' specifications for UNITS must include `year' information for `currency' types. This is necessary in order for the framework to convert the currency data being requested from the datastore to the year denomination that the module needs. The UNITS attribute may also include a multiplier specification if the module needs the values to be modified in that way. For example, if the module needs VMT in thousands of miles, the UNITS specification would be `MI.1e3'. Section 6.3 provides more information on how `year' and `multiplier' options are added to a UNITS specification. Following is an example of the \emph{Get} component of the \emph{AssignRoadMilesSpecifications} in the \emph{VETransportSupply} package.

\begin{verbatim}
Get = items(
  item(
    NAME = "Marea",
    TABLE = "Marea",
    GROUP = "Year",
    TYPE = "character",
    UNITS = "ID",
    PROHIBIT = "",
    ISELEMENTOF = ""
  ),
  item(
    NAME =
      items(
        "FwyLaneMi",
        "ArtLaneMi"),
    TABLE = "Marea",
    GROUP = "Year",
    TYPE = "distance",
    UNITS = "MI",
    PROHIBIT = c("NA", "< 0"),
    ISELEMENTOF = ""
  ),
  item(
    NAME = "Marea",
    TABLE = "Bzone",
    GROUP = "Year",
    TYPE = "character",
    UNITS = "ID",
    PROHIBIT = "",
    ISELEMENTOF = ""
  ),
  item(
    NAME = "UrbanPop",
    TABLE = "Bzone",
    GROUP = "Year",
    TYPE = "people",
    UNITS = "PRSN",
    PROHIBIT = c("NA", "<= 0"),
    ISELEMENTOF = ""
  )
),
\end{verbatim}

The \textbf{Set} component contains one or more items describing datasets to be saved in the datastore. Each item in the \emph{Set} component specifies attributes for one or more related datasets as follows:\\
- NAME: the names of one or more datasets to be saved;\\
- TABLE: the name of the table that the datasets are to be saved in;\\
- GROUP: the type of group where the table is located in the datastore (i.e.~Global, Year, BaseYear);\\
- TYPE: the data type (e.g.~double, distance, compound);\\
- UNITS: the measurement units for the data;\\
- NAVALUE: the value used to represent NA in the datastore;\\
- PROHIBIT: data values that are prohibited or ``\,'' if not applicable (see Section 8.1.1.1 for explanation);\\
- ISELEMENTOF: allowed categorical data values or ``\,'' if not applicable (see Section 8.1.1.1 for explanation);\\
- SIZE: the maximum number of characters for character data (or 0 for numeric data); and,
- DESCRIPTION: descriptions of the data corresponding to the names in the NAME attribute\\
The requirements for the UNITS attribute are the same as described above for \emph{Get} component items. Following is an example of the \emph{Set} component of the \emph{AssignRoadMilesSpecifications} in the \emph{VETransportSupply} package.

\begin{verbatim}
Set = items(
  item(
    NAME = "FwyLaneMiPC",
    TABLE = "Marea",
    GROUP = "Year",
    TYPE = "compound",
    UNITS = "MI/PRSN",
    NAVALUE = -1,
    PROHIBIT = c("NA", "< 0"),
    ISELEMENTOF = "",
    SIZE = 0,
    DESCRIPTION = "Ratio of urbanized area freeway and expressway lane-miles to urbanized area population"
  )
)
\end{verbatim}

It should be noted that it may not be possible to prespecify the SIZE attribute for a dataset. For example, if a unique household ID is assigned, the SIZE attribute will depend on the number of households and so must be calculated when the module is run. In such a circumstance, the SIZE attribute is omitted from the item and the module function must calculate it and include the calculated value as an attribute of the output dataset. The following code snippet from the \emph{CreateHouseholds} module code in the \emph{VESimHouseholds} package shows how this is done. In this example, the list of data that the module function returns is named \emph{Out\_ls}. The household ID (\emph{HhId}) dataset is in the \emph{Household} table of the \emph{Year} group. The R \emph{attributes} function is called to set the SIZE attribute of the \emph{HhId} dataset equal to the maximum of the number of characters in each of the entries in the dataset.

\begin{verbatim}
attributes(Out_ls$Year$Household$HhId)$SIZE <- max(nchar(Out_ls$Year$Household$HhId))  
\end{verbatim}

The last component in the the module specifications list is the \textbf{Call} component. This is an optional component of the module specifications and is included if the module calls any other modules or if the module may be called by other modules. Following are \emph{Call} component examples. The first is an example for a module that may be called. The second is an example for a module which calls another module. Section 8.1.2.2 explains module calling in detail.

\begin{verbatim}
#Call component for a module that may be called
Call = TRUE

#Call component for a module that calls another module
Call = items(
  CalcDvmt = "VEHouseholdTravel::CalculateHouseholdDvmt"
)
\end{verbatim}

\hypertarget{optional-attribute}{%
\subsubsection{OPTIONAL Attribute}\label{optional-attribute}}

Module developers can use the OPTIONAL attribute to identify optional inputs or data to be retrieved from the datastore. This enables modules to be written to respond to optional inputs. For example, in the GreenSTEP and RSPM models, users may provide inputs on the average carbon intensity of fuels (grams CO2e per megajoule) by model run year. This allows users to model a scenario where state regulations require the average carbon intensity of fuels to be reduced over time. If the user supplies those data, the models calculate carbon emissions using those inputs. If not, the model calculates emissions using data on the carbon intensities of different fuel types and the mix of those fuel types.

If the OPTIONAL attribute for an item is missing, then the item is not optional. If the OPTIONAL attribute is not missing but is set equal to \emph{FALSE} then the item is not optional as well. Only when the OPTIONAL attribute is present and set equal to \emph{TRUE} does the framework regard the item as optional (\texttt{OPTIONAL\ =\ TRUE}).

If an input (\emph{Inp}) item is identified as optional, the framework checks whether the identified input file is present. If the file is present, then the framework will process the data and load it into the datastore. Otherwise the item is ignored. Note that optional inputs can't be combined with non-optional inputs in the same file. This will cause an error. Also not that since the framework does not automatically supply inputs to the module, there must be optional \emph{Get} items corresponding to the optional \emph{Inp} items. When the framework sees an optional \emph{Get} item, it checks the datastore to see whether the optional dataset(s) are present. If so, it retrieves them.

\hypertarget{call-specification}{%
\subsubsection{CALL Specification}\label{call-specification}}

If same calculation code needs to be executed a number of times, it is best to define a function to encapsulate the code and then call the function whenever the calculation needs to be carried out. This reduces errors and code maintenance hassles. Likewise, module code duplication is reduced in the VisionEval model system by allowing modules to call other modules for their calculation services. For example, the \emph{BudgetHouseholdDvmt} module in the \emph{VETravelPerformance} package calls the \emph{CalculateAltModeTrips} module in the \emph{VEHouseholdTravel} package to recalculate trips by alternate modes (walk, bike, transit) to reflect budget-adjusted household DVMT. Calling a module is more involved than just calling the function that carries out the module's calculations because the module function will not work unless it is supplied with the datasets identified in its \emph{Get} specifications. Of course the calling module could include those specifications in its own specifications, but that would create a significant potential for coding errors and maintenance problems (e.g.~if the called module is module is modified at a later time). For this reason the software design includes functionality for calling modules in a simple manner which leaves the data management details to the framework behind the scenes.

A module's call status is specified in the \emph{Call} component of the module specifications. There are 3 possibilities for a module's call status. First, a module may be called by other modules. In this case the specification is \texttt{Call\ =\ TRUE}. Second, the module may call other modules. In this case the call specification is a list that identifies each of the modules that are called, assigning a reference to the module to an alias (i.e.~\emph{alias = module}) as shown in the following example:

\begin{verbatim}
Call = items(
  CalcDvmt = "CalculateHouseholdDvmt",
  ReduceDvmt = "ApplyDvmtReductions",
  CalcVehTrips = "CalculateVehicleTrips",
  CalcAltTrips = "CalculateAltModeTrips"
)
\end{verbatim}

The \emph{alias} is the name that the called module will be referred to by the calling module code. The \emph{module} is the name of the called module. The VisionEval framework software identifies which package the module resides in from the \emph{ModulesByPackage\_df} table in the \emph{ModelState\_ls} list. It is also possible to hard code the package name in the call definition. For example the \emph{CalcDvmt} alias could be assign to \texttt{VEHouseholdTravel::CalculateHouseholdDvmt}. This is discouraged, however, because doing so limits the ability to maintain different versions of packages that have module modifications.

\begin{verbatim}
Call = items(
  CalcDvmt = "VEHouseholdTravel::CalculateHouseholdDvmt"
)
\end{verbatim}

The third possibility is that a module may not be called and calls no other modules. In that case a \emph{Call} component is not included in the module specifications.

There are some important restrictions to module calling. First, a module that may be called cannot call another module. If this restriction did not exist, there could be deeply nested module calls which could make debugging and understanding how a model works very difficult. Second, a module that may be called cannot have any inputs (i.e.~\emph{Inp} component). The reason for this restriction is that the function of called modules is to provide calculation services and those are hidden from model users. Unless a called module was also called directly in the model run script, there would be no way model user would know to supply input files without diving into the details about the module doing the calling.

The framework does the following when a module is run which calls one or more other modules. For each of the modules that are called, the framework:\\
1) Reads the `Get' specifications for the called module, gets the datasets from the datastore, puts them in the standard list structure, and adds to the list that will be returned to the calling module as a component whose name is the assigned alias. In the example above, the retrieved datasets would be in a component named ``CalcDvmt''.\\
2) Creates a list which holds the values of the called module functions. Each called module function is a component of the list whose name is the assigned alias. In the example above, this function list would have one component named ``CalcDvmt'' which contains the value of the CalculateHouseholdDVMT function.\\
3) The framework passes these two lists to the calling module when it is run. Thus the calling module function must be written to accept two arguments rather than one.

The calling module code invokes the called module by calling it from the function list that the framework passes it and passing to it the data it needs from the data list. Following from the example above, if the data list is called `L' and the function list is called `M', then the \emph{CalculateHouseholdDVMT} module function would be called in the \emph{AssignHhVehiclePowertrain} module as follows:

\begin{verbatim}
M$CalcDvmt(L$CalcDvmt)
\end{verbatim}

\hypertarget{module-function}{%
\subsubsection{Module Function}\label{module-function}}

The \textbf{function definitions} section of the module script is used to define all functions that will be used to implement the module. One of these functions is the main function that is called by the software framework to run the module. This function must have the same name as the module name. For example, the main function of the \emph{CreateHouseholds} module is named \emph{CreateHouseholds} as well. This function must be written to accept one argument, a list, which by convention is named L if the module calls no other modules, and two arguments (as explained in the previous section) if the module calls other modules. This list contains all of the datasets identified in the \emph{Get} component of the module data specifications. The structure of this list is described in Section 7. The main function returns a list which contains all of the datasets identified in the \emph{Set} component of the module data specifications and structured as described in Section 7. The software framework includes a function, \emph{initDataList}, to initialize an outputs list having the proper structure with \emph{Global}, \emph{Year}, and \emph{BaseYear} components. The module code will fill in each component with components for each of the specified tables and datasets within those tables. Following is a simple example from the \emph{AssignTransitService} module in the \emph{VETransportSupply} package. First, here are the module's \emph{Set} items to provide context for the module code:

\begin{verbatim}
Set = items(
  item(
    NAME = "TranRevMiPC",
    TABLE = "Marea",
    GROUP = "Year",
    TYPE = "compound",
    UNITS = "MI/PRSN",
    NAVALUE = -1,
    PROHIBIT = c("NA", "< 0"),
    ISELEMENTOF = "",
    SIZE = 0,
    DESCRIPTION = "Ratio of bus-equivalent revenue-miles (i.e. revenue-miles at the same productivity - passenger miles per revenue mile - as standard bus) to urbanized area population"
  )
)
\end{verbatim}

The \emph{AssignTransitService} function returns one dataset called \emph{TranRevMiPc}. This dataset will be placed in the \emph{Marea} table in the \emph{Year} group (i.e.~in the group for each model run year). Following is the function definition:

\begin{verbatim}
AssignTransitService <- function(L) {
  #Set up
  #------
  #Fix seed as synthesis involves sampling
  set.seed(L$G$Seed)
  #Define vector of modes
  Md <- as.character(BusEquivalents_df$Mode)
  #Define vector of Mareas
  Ma <- L$Year$Marea$Marea

  #Calculate bus equivalent revenue miles
  #--------------------------------------
  #Make table of revenue miles by Marea
  RevMi_df <- data.frame(L$Year$Marea[paste0(Md, "RevMi")])
  colnames(RevMi_df) <- Md
  rownames(RevMi_df) <- Ma
  RevMi_MaMd <- as.matrix(RevMi_df)
  #Calculate the bus equivalent revenue miles
  BusEq_Md <- BusEquivalents_df$BusEquivalents
  names(BusEq_Md) <- Md
  BusEqRevMi_Ma <-
    rowSums(sweep(RevMi_MaMd, 2, BusEq_Md, "*"))[Ma]

  #Calculate the bus equivalent revenue miles per capita
  #-----------------------------------------------------
  #Calculate population in the urbanized area
  UrbanPop_Ma <-
    tapply(L$Year$Bzone$UrbanPop, L$Year$Bzone$Marea, sum)[Ma]
  #Calculate Marea bus equivalent revenue miles per capita
  TranRevMiPC_Ma <- BusEqRevMi_Ma / UrbanPop_Ma

  #Return the results
  #------------------
  #Initialize output list
  Out_ls <- initDataList()
  Out_ls$Year$Marea <-
    list(TranRevMiPC = TranRevMiPC_Ma)
  #Return the outputs list
  Out_ls
}
\end{verbatim}

A module should include procedures as necessary to check for errors in output datasets. In most cases this won't be necessary if the module passes tests during development because the framework checks that all datasets passed to the module meet the module's specifications. However there may be conditions where some combinations of acceptable inputs produce unacceptable outputs. In such cases, the module code should check for unacceptable outputs and if found, report those to the framework for reporting to the model user and stopping the model run. The module should not stop the model run. Instead it composes a descriptive error message and adds it to an \emph{Errors} component of the module outputs list. If there is more than one error, the \emph{Errors} component will be a vector of error messages. The framework writes the error message(s) to the model run log and stops model execution.

Warnings are handled in a similar way. If the module code is checks for warning conditions (i.e.~model execution should not be stopped but users should be about the condition) and finds any, it composes a warning message that is added to a \emph{Warnings} component of the module outputs list. The framework writes warnings messages to the model run log.

The functionality for processing module errors and warnings is used primarily by \emph{Initialize} modules as explained in Section 8.1.5.

\hypertarget{module-documentation}{%
\subsubsection{Module Documentation}\label{module-documentation}}

It is recommended that module documentation be included at the top of the module script file if possible to make it easier to review and analyze the module. A standardized approach has been developed to do this that produces documentation in \href{https://en.wikipedia.org/wiki/Markdown}{markdown} format that can be viewed as a web page or converted to other formats for printing. At the end of the module script the \emph{documentModule} function like this \texttt{documentModule("PredictIncome")}. The \emph{documentModule} parses the module script, extracts the documentation block at the head of the file and inserts any text, tables, or figures that are saved by the script and inserted into the documentation using special \emph{tags} as explained below. In addition, the \emph{documentModule} function reads the module specifications and creates formatted tables showing module inputs, datasets used, and datasets produced. The documentation file(s) are then saved to a \emph{model\_docs} directory in the \emph{inst/extdata} directory which is in turn a directory in the installed package. The \emph{documentModule} function is called at the end of the script because the rest of the script must be executed to produce the datasets that are inserted into the documentation file. Following is an example of what a documentation block looks like.

\begin{verbatim}
#<doc>
## PredictIncome Module
#### September 6, 2018
#
#This module predicts the income for each simulated household given the number of workers in each age group and the average per capita income for the Azone where the household resides.
#
### Model Parameter Estimation
#Household income models are estimated for *regular* households and for *group quarters* households.
#
#The household income models are estimated using Census public use microsample (PUMS) data that are compiled into a R dataset (HhData_df) by the 'CreateEstimationDatasets.R' script when the VESimHouseholds package is built. The data that are supplied with the VESimHouseholds package downloaded from the VisionEval repository may be used, but it is preferrable to use data for the region being modeled. How this is done is explained in the documentation for the *CreateEstimationDatasets.R* script.
#
#The household income models are linear regression models in which the dependent variable is a power transformation of income. Power transformation is needed in order to normalize the income data distribution which has a long right-hand tail. The power transform is found which minimizes the skewness of the income distribution. The power transform for *regular* households is:
#
#<txt:HHIncModel_ls$Pow>
#
#The power transform for *group quarters* households is:
#
#<txt:GQIncModel_ls$Pow>
#
#The independent variables for the linear models are power transformed per capita income for the area, the number of workers in each of 4 worker age groups (15-19, 20-29, 30-54, 55-64), and the number of persons in the 65+ age group. In addition, power-transformed per capita income is interacted with each of the 4 worker groups and 65+ age group variable. The summary statistics for the *regular* household model are as follows:
#
#<txt:HHIncModel_ls$Summary>
#
#The summary statistics for the *group quarters* household model are as follows:
#
#<txt:GQIncModel_ls$Summary>
#
#An additional step must be carried out in order to predict household income. Because the linear model does not account for all of the observed variance, and because income is power distribution, the average of the predicted per capita income is less than the average per capita income of the population. To compensate, random variation needs to be added to each household prediction of power-transformed income by randomly selecting from a normal distribution that is centered on the value predicted by the linear model and has a standard deviation that is calculated so as the resulting average per capita income of households match the input value. A binary search process is used to find the suitable standard deviation. Following is the comparison of mean values for the observed *regular* household income for the estimation dataset and the corresponding predicted values for the estimation dataset.
#
#<tab:HHIncModel_ls$MeanCompare>
#
#The following figure compares the distributions of the observed and predicted incomes of *regular* households.
#
#<fig:reg-hh-inc_obs-vs-est_distributions.png>
#
#Following is the comparison of mean values for the observed *group quarters* household income for the estimation dataset and the corresponding predicted values for the estimation dataset.
#
#<tab:GQIncModel_ls$MeanCompare>
#
#The following figure compares the distributions of the observed and predicted incomes of *groups quarters* households.
#
#<fig:gq-hh-inc_obs-vs-est_distributions.png>
#
### How the Module Works
#This module runs at the Azone level. Azone household average per capita income and group quarters average per capita income are user inputs to the model. The other model inputs are in the datastore, having been created by the CreateHouseholds and PredictWorkers modules. Household income is predicted separately for *regular* and *group quarters* households. Per capita income is transformed using the estimated power transform, the model dependent variables are calculated, and the linear model is applied. Random variation is applied so that the per capita mean income for the predicted household income matches the input value.
#

#</doc>
\end{verbatim}

There are several things to note about this example. The first is that all text in the block is commented out (preceded by \#). Since R doesn't support block comments, each line must be commented. It may not look this way in the example because of word wrapping, but every line is commented. Second, the start and end of the documentation block are denoted by matching \texttt{\textless{}doc\textgreater{}} and \texttt{\textless{}/doc\textgreater{}} tags. The parser uses these to extract the documentation from the script. After the document has been extracted, the leading comments are stripped off, resulting in markdown-formatted text. The other comment (\#) symbols in the text are actually markdown formatting to identify headings of different levels. Documentation can include any standard markdown formatting such as emphasis, links, and tables. In addition, the documentation can include special tags as shown in the example. Three types of tags are available:

\begin{itemize}
\item
  \texttt{\textless{}txt:xxxx\textgreater{}} inserts a block of text that is contained in the referenced object. For example the \texttt{\textless{}txt:GQIncModel\_ls\$Summary\textgreater{}} tag in the example will insert summary statistics for the group quarters income model.
\item
  \texttt{\textless{}tab:xxxx\textgreater{}} inserts data that can be presented in table for such as a data frame. For example the \texttt{\textless{}tab:HHIncModel\_ls\$MeanCompare\textgreater{}} tag in the example will insert a table which compares observed and estimated mean values.
\item
  \texttt{\textless{}fig:xxxx\textgreater{}} creates a markdown reference to an image file so that it will be show in the proper place when the markdown is displayed in a browser or converted to another document form. For example the \texttt{\textless{}fig:reg-hh-inc\_obs-vs-est\_distributions.png\textgreater{}} tag in the example will insert a figure which compares observed and estimated income distributions when the markdown is displayed.
\end{itemize}

It is helpful to include test code in the module script to aid with module development. The framework includes a \emph{testModule} function to assist with module testing. This function is described in detail in Section 9.2.1. Testing requires having sample input files containing datasets specified by the modules \emph{Inp} specifications. These are stored in the `inputs' directory of the `tests' directory. The `tests' directory also must contain a `defs' directory which contains all the required model definitions files (see Section 6.1). Finally, the `tests' directory must contain a datastore of the type specified in the `run\_parameters.json' file, which contains all of the datasets specified in the modules \emph{Get} specifications. In the first stage of module testing, the module specifications are checked, all input files are checked, the presence of all required data is checked, and an input list (L) is returned for use in module development. For this test, the \emph{DoRun} argument of the \emph{testModule} function needs to be set to \emph{FALSE}. After the module code has been written, the module is tested again to check whether the module code is working correctly and that it returns results that are consistent with the \emph{Set} specifications for the module. For this test, the \emph{DoRun} argument of the \emph{testModule} function must be \emph{TRUE}. After the module has been tested, it is important to comment out all the testing code in the script because it must not be run when the package is built. Following is an example of testing code in a module that has been commented out.

\hypertarget{initialize-module}{%
\subsubsection{Initialize Module}\label{initialize-module}}

Although the framework performs several checks on module input data based on the module specifications, there will be times when additional checks of inputs will be necessary and possibly transformations as well. For example, several datasets could have proportions data that must add up to 1 across the datasets. For example, 4 input datasets for the \emph{PredictHousing} module of the *VELandUse** package give the proportions of households in each Bzone that are in each of 4 income quartiles for the Azone that the Bzones are located in. These inputs should be checked to assure that the sum of all quartile proportions for each Bzone adds up to one. If any sums are not close to 1, then the model user needs to be alerted to the fact so that they can correct the input file. If all the sums are close to 1 but some are not exactly 1 (due to rounding errors in preparing inputs), the inputs should be automatically adjusted to equal 1 before they are saved in the datastore. If a module developer needs to establish more complex checks and transformations like this, they do so in a special module that they name \emph{Initialize}.

In the \emph{Initialize} module, the module specifications identify all of the input datasets that need to be checked. This is done in same manner as described in Section 8.1.2. The module specifications will not have \emph{Get} or \emph{Set} components since the only purpose of the \emph{Initialize} module is to process inputs. There can only be one \emph{Initialize} module in a package and so all inputs that need additional checking, regardless of which module in the package will use them, need to be processed in the \emph{Initialize} module. Datasets that are listed in the \emph{Inp} specifications of the \emph{Initialize} module must not be included in the \emph{Inp} specifications of any other module in the package.

When a model is intialized by the \emph{initializeModel} function in the \emph{run\_model.R} script (Section 5 and Appendix A), each of the module packages that will be run by the script is checked for the presence of an \emph{Initialize} module. Any that are found are added to a list of modules that require input processing. When the \emph{initializeModel} function processes the inputs for an \emph{Initialize} module it does so in two steps. In the first step, it performs the standard input processing that is done for all modules (input files are read and datasets are checked for completeness and correctness). The output of this checking process is a standard outputs list with \emph{Global}, \emph{BaseYear}, and \emph{Year} components. In the second step, the framework calls the \emph{Initialize} module function and passes it the outputs list from the first step. The \emph{Initialize} module does whatever enhanced data checking and transformation is necessary and returns an outputs list having the same structure as the inputs list with the addition of \emph{Errors} and \emph{Warnings} components (see Section 8.1.3). Several of the VisionEval packages include \emph{Initialize} modules and can be used as examples.

\hypertarget{the-instextdata-directory}{%
\subsection{The inst/extdata Directory}\label{the-instextdata-directory}}

By convention, the `inst/extdata' directory is the standard place to put external (raw) data files as opposed to R datasets which are placed in the `data' directory. This is where most model estimation data is kept. Section 8.1.1.1 provides a detailed explanation. The directory should include a subdirectory named `sources' to hold reports or other external documentation if needed.

\hypertarget{the-data-raw-directory}{%
\subsection{The data-raw Directory}\label{the-data-raw-directory}}

In some instances it is impractical to include the model estimation data as files in the `inst/extdata' directory, and not necessary for model users to provide regional model estimation data. If, for example, the source data has confidential elements, it may be necessary to preprocess the data to anonymize it before including in the package; or the source data may be too large to include as a text file in the package. In these cases, source data may be processed outside of the package and then the processed datasets included in the package as datasets in R binary files. If that is done, the binary data files should be placed in a directory named `data-raw' in the package.

\hypertarget{the-tests-directory}{%
\subsection{The tests Directory}\label{the-tests-directory}}

The `tests' directory contains R scripts and the results of module tests. The \emph{scripts} directory contains all the scripts used to carry out module tests. The directory also contains subdirectories for each of the model types the module is to be tested with (e.g VE-RSPM, VE-State, VE-RPAT). Two approaches are available for handing module data that includes input files the module uses, all the \emph{defs} files, and a datastore which contains all the datasets used by the module aside from those in the input files. These data can be included in the package or they may be kept in a central repository. If they are included in the package, they must be placed in the directory for the corresponding model. This is necessary to avoid conflicts in the test data for different models. The scripts directory includes a testing script which runs the tests on all modules in a package for a particular module. For example, the script for testing modules in a VE-State application is named \emph{vestate\_test.R}. The scripts directory also includes a \emph{test.R} script which calls the individual model test scripts for automated package testing. If the centralized data testing approach is used, a \emph{test\_functions.R} script needs to be included. This includes functions needed to support the centralized test data approach. The test process is still not finalized. In the future this functionality will be included in the framework software. Following is an example of a test script using the central data approach:

\begin{verbatim}
#vestate_test.R
#--------------

#Load packages and test functions
library(visioneval)
library(filesstrings)
source("tests/scripts/test_functions.R")

#Define test setup parameters
TestSetup_ls <- list(
  TestDataRepo = "../Test_Data/VE-State",
  DatastoreName = "Datastore.tar",
  LoadDatastore = FALSE,
  TestDocsDir = "vestate",
  ClearLogs = TRUE,
  # SaveDatastore = TRUE
  SaveDatastore = FALSE
)

#Define the module tests
Tests_ls <- list(
  list(ModuleName = "CreateHouseholds", LoadDatastore = FALSE, SaveDatastore = TRUE, DoRun = TRUE),
  list(ModuleName = "PredictWorkers", LoadDatastore = TRUE, SaveDatastore = TRUE, DoRun = TRUE),
  list(ModuleName = "AssignLifeCycle", LoadDatastore = TRUE, SaveDatastore = TRUE, DoRun = TRUE),
  list(ModuleName = "PredictIncome", LoadDatastore = TRUE, SaveDatastore = TRUE, DoRun = TRUE)
)

#Set up, run tests, and save test results
setUpTests(TestSetup_ls)
doTests(Tests_ls, TestSetup_ls)
saveTestResults(TestSetup_ls)
\end{verbatim}

\hypertarget{ve-buildprocess}{%
\chapter{Module Build Process}\label{ve-buildprocess}}

\hypertarget{introduction-1}{%
\section{Introduction}\label{introduction-1}}

This chapter describes the package build process for creating or modifying packages and their constituent modules within the VisionEval framework. The build process can be used to incorporate localized or custom data into VE by making a change to a module and then rebuilding it. This chapter includes a simple case study example of substituting the default households population data with a locally-specific Public Use Microdata Sample (PUMS) from the US Census, and then rebuilding the package in VisionEval.

A summary of steps described are:

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  Prerequisites: Installing R and RStudio.
\item
  Install VisionEval environment.
\item
  Install VisionEval package source.
\item
  Replace data: Download data and place in the package source location.
\item
  Package rebuild: Configure building and run package build.
\end{enumerate}

\hypertarget{context}{%
\section{Context}\label{context}}

The VisionEval ``build process'' rebuilds VisionEval packages to incorporate modified data in the module's model estimation and data processing steps in order to update data resources and estimated model coefficients. The reason that a modified module must be rebuilt before it is available for use in VisionEval is that VisionEval creates its own R environment with its own VisionEval modules built as R packages.

\hypertarget{what-is-an-r-package}{%
\subsection{What is an R ``package''?}\label{what-is-an-r-package}}

R is a community-based project and depends upon a community of re-usable, reproducible, and shareable code. To facilitate this, R uses a standardized method for bundling a collection of code and data into a built into a shareable binary ``package''. Packages can then be downloaded and installed into your local R environment.

\hypertarget{why-is-this-relevant}{%
\subsubsection{Why is this relevant?}\label{why-is-this-relevant}}

VisionEval relies on this fundamental package framework for inheriting code and data from its modules. Thus, in order to alter the data in a VisionEval module (i.e., an R Package) it must be repackaged, or re-built, using the new data. Otherwise, if only the source data is altered and not re-built, the VisionEval environment

\hypertarget{visioneval-environment-vs-package-source}{%
\subsubsection{VisionEval Environment vs Package Source}\label{visioneval-environment-vs-package-source}}

It is crucial for users to understand the distinction between the VisionEval \emph{environment} code-base and the VisionEval \emph{package source} code-base. In general, the latter is used build the former. More simply, VisionEval environment is the environment from where the models are run, drawing from the data and code built into the environment as R packages. This is an important distinction in the above steps \#2 and \#3.

\hypertarget{what-are-pums}{%
\subsection{What are PUMS?}\label{what-are-pums}}

To summarize, the US Census Bureau provides anonymized data in two general forms:

\begin{itemize}
\item
  \textbf{Aggregated census tables} - These tables provide the total or estimated counts by topic (e.g., total number of persons by age group). The smallest geographic unit are census blocks, but not all data are available at that level.
\item
  \textbf{Disaggregated PUMS} - A sample of individual record-level data for each person or household counted. (e.g., a persons age, gender, employment and the household they belong to.). The smallest geographic unit are Public Use Microdata Areas (PUMAs), which are aggregated areas to protect confidentiality and must include at least 100,000 persons.
\end{itemize}

Most people are at least somewhat familiar with the US Census and the information they collect. The primary function of the US Census is to collect a count of people living in the United States for federal allocation of political representatives and taxes. However, the US Census has since expanded to include a variety of other useful statistical information regarding demographics and employment. Census data are spatially organized into a hierarchy of sub-divided spatial areas, the smallest of which is called a Census Blocks, which aggregate into Block Groups, Tracts, Counties, and States. See the example figure below:

\begin{figure}
\centering
\includegraphics[width=5in,height=\textheight]{images/census_geographies.png}
\caption{Example Census geographic hierarchy}
\end{figure}

The primary census program is the Decennial Census, which is a comprehensive count collected every 10 years. However, because populations can significantly change within a decade, the American Community Survey (ACS) was created to obtain data at more frequent intervals. Rather than a full census, the ACS collects ongoing samples on a monthly basis. These data are then used to publish statistically adjusted estimates in 1-year, 3-year, and 5-year estimates. 1-year estimates use the most recent data but are the least reliable because the sample is smaller, whereas the 5-year estimate uses data from the previous 5 years. Although not exactly equivalent, the 1- and 5-year estimates are often consider analogous with a 1\% and 5\% sample of the population.

The summary tables provide the total count of persons, but are aggregated, meaning that it only shows the total number of persons in each topic, but not the combination of topics. For example, we may know the count of people by age group, gender, occupation, and household size; but we do not know the count for a particular combination of those variables, or to which household they belong. For this reason, the US Census Bureau also releases what it calls a Public Use Microdata Sample (PUMS) using sample data from the ACS.

\hypertarget{instructions}{%
\section{Instructions}\label{instructions}}

The following steps will be described in more detail below:

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  Prerequisites: Installing R and RStudio.
\item
  Install VisionEval environment.
\item
  Install VisionEval package source.
\item
  Replace data: Download data and place in the package source location.
\item
  Package rebuild: Configure building and run package build.
\end{enumerate}

\hypertarget{install-r-and-rstudio}{%
\subsubsection{1. Install R and RStudio}\label{install-r-and-rstudio}}

R is a free software environment for statistical computing. On its own, R is an interpreted programming language executed using a command line interface, meaning the code does not need to be compiled. However, the R community has an integrated development environment (IDE) specific to R called RStudio (being renamed Posit in October 2022) which provides a user friendly graphical interface to allow users to develop and execute commands as well as to inspect and visualize the data as it is handled in R.

To install R and RStudio, users must first download and install R, and then download and install RStudio (R must be install for RStudio to function!)

\begin{itemize}
\item
  R for windows can be downloaded here: \url{https://cran.rstudio.com/} (tested using R 4.1.2)
\item
  RStudio for windows can be downloaded here: \url{https://www.rstudio.com/products/rstudio/download/}
\end{itemize}

\hypertarget{install-visioneval-environment}{%
\subsubsection{2. Install VisionEval Environment}\label{install-visioneval-environment}}

This zip file contains a pre-built standalone copy of VisionEval 2.0 for Windows (approx. 555MB file). It contains the entire VisionEval framework environment code, sample models, and all necessary R packages installed into the R VisionEval environment.

A. Download the \href{https://github.com/VisionEval/VisionEval/releases/download/public-2.0/VE-2.0-Installer-Windows-R4.1.2_2022-01-03.zip}{VE-2.0-Installer-Windows-R4.1.2\_2022-01-03.zip} from \url{https://visioneval.org/category/download.html}

B. Extract the entire contents of the zip file into a directory of your choice (e.g., \texttt{C:/Users/\textless{}user\ name\textgreater{}/Documents/VisionEval}) .

C. To start the VisionEval environment, navigate to this folder and double click \texttt{VisionEval.Rproj}.

Note: Advanced users may also Build VisionEval natively from source, but this process can take several hours. See VisionEval-Dev full model build \%\%\%\%LINK TO\%\%\%\%

\hypertarget{download-visioneval-source-code}{%
\subsubsection{3. Download VisionEval source code}\label{download-visioneval-source-code}}

In the previous step, users have downloaded the pre-built VisionEval environment, but to make modifications to the package data users must re-build the packages from the source code.

\begin{itemize}
\item
  Clone or ``fork'' a copy of the VisionEval from the Github repository (\url{https://github.com/VisionEval/VisionEval}).
\item
  If users are not familiar with \href{https://git-scm.com/downloads}{git} and GitHub, simply download the repository as a zip file (\url{https://github.com/VisionEval/VisionEval/archive/refs/heads/master.zip}). In either case, the download is very large (over 900MB compressed and 3.4GB uncompressed as git clone).
\item
  In either case, extract the source code into a separate directory (e.g., \texttt{C:/Users/\textless{}user\ name\textgreater{}/Documents/VisionEval-Source}).
\end{itemize}

\href{https://github.com/VisionEval/VisionEval/archive/refs/heads/master.zip}{\includegraphics[width=7.73958in,height=\textheight]{images/gitscreenshot.png}}

\hypertarget{replace-data}{%
\subsubsection{4. Replace data:}\label{replace-data}}

In this example we will be replacing the default PUMS data in the VESimHouseholds package with different local PUMS data. The source code for this package should be located in sources/modules folder of your source packages folder (e.g, \texttt{C:/Users/\textless{}user\ name\textgreater{}/Documents/VisionEval-source/sources/modules/VESimHouseholds}).

Packages will require the data to be in a certain format, and in this case the VESimHouseholds package requires two input data files \texttt{pums\_households.csv} and \texttt{pums\_persons.csv}.

\emph{A) Download PUMS data}

US Census data are available from the Census' website (\url{https://www.census.gov/}), which provides an interface to search, browse, and download Census data in a variety of formats, the most typical being Comma Separated Value (CSV) files. PUMS data can be filtered using the Census data browser, or the entire PUMS tables for States can be downloaded from the legacy FTP website: \url{https://www2.census.gov/programs-surveys/acs/data/pums/}

The files are named according file type, (e.g., csv\_), record type (``h'' for household or ``p'' for persons), and then the State abbreviation. For example, \texttt{"csv\_haz.zip"} are household PUMS data for Arizona. Additional documentation can be found here: \url{https://www.census.gov/programs-surveys/acs/microdata/access.html}\\

\emph{B) Process PUMS data.}

VE was originally coded using an older PUMS file, which had slightly different field names and must be renamed. A name mapping key is in the table below:

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.2099}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1975}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1481}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.4444}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Table name
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
VESimHouseholds field
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
New PUMS field
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule()
\endhead
\textbf{pums\_households.csv} & SERIALNO & SERIALNO & Housing/Group Quarters Unit Serial Number \\
& PUMA5 & PUMA & 5\% Public Use Microdata Area code \\
& HWEIGHT & WGTP & Housing unit weight \\
& UNITTYPE & TYPEHUGQ & Type of housing unit \\
& PERSONS & NP & Number of persons living in housing unit \\
& BLDGSZ & BLD & Size of Building \\
& HINC & HINCP & Household Total Income in 1999 \\
\textbf{pums\_persons.csv} & AGE & AGEP & Age \\
& WRKLYR & WKL & Worked in year \\
& MILITARY & MIL & In military \\
& INCTOT & PINCP & Person's total employment \\
\bottomrule()
\end{longtable}

Depending on the file, other pre-processing may be required, such as removing NAs or converting categories. For example, missing NA values to 0 in HINC, shifting UNITYPE scale from \{1,2,3\} to \{0,1,2\}, or aggregating the 4-level WKL categories into 3-levels of WRKLYR. If these conversions are not made, issues may rrise in the package building step.

For a more detailed example of processing PUMS with example R scripts, see \%\%\%\%LINK TO

\emph{C) Replace PUMS files}

Once processing is complete, replace the old files in your VisionEval \uline{source} package location with the the new \texttt{pums\_households.csv} and \texttt{pums\_persons.csv}. External data for VisionEval packages are typically located in the \texttt{inst/exdata} folder (e.g., \texttt{C:/Users/\textless{}user\ name\textgreater{}/Documents/VisionEval-source/sources/modules/VESimHouseholds/inst/extdata}) .

\hypertarget{package-building}{%
\subsubsection{5. Package building}\label{package-building}}

The critical objective of re-building a package is to build a package \textbf{\emph{from}} the package source \textbf{\emph{to}} the VisionEval environment. To achieve this:

\emph{A) Initialize the VisionEval Environment}

If not already started in Step 2C, start VisionEval environment by clicking the \texttt{VisionEval.Rproj} in the VisionEval \emph{environment} directory (e.g., \texttt{C:/Users/\textless{}user\ name\textgreater{}/Documents/VisionEval}).

\emph{B) Select Configure Build Tools from the Build menu}

\includegraphics[width=5.48958in,height=\textheight]{images/buildgui-1.png}

\emph{C) Configure Build tools from the build menu}

i. From ``Project build tools'', select ``Package'' from the drop-down.

ii. For ``Package directory'', browse to your source package folder (e.g., \texttt{C:/Users/\textless{}user\ name\textgreater{}/Documents/VisionEval-source/sources/modules/VESimHouseholds}).

\includegraphics[width=5.28125in,height=\textheight]{images/buildgui-2.png}

Click OK. RStudio will flicker and restart.

\emph{D) Install from package source}

If you want to test the new files before building it, you may run ``Check Package'' first.

Click the ``Build'' drop-down from the main banner menu again. This time there will be new options, select ``Install Package''.

\includegraphics[width=5.09375in,height=\textheight]{images/buildgui-3.png}

\begin{quote}
NOTE: In some cases you may run into the error \texttt{ERROR:\ a\ \textquotesingle{}NAMESPACE\textquotesingle{}\ file\ is\ required}.

This is because newer versions of R (\textgreater3.0.0) require a NAMESPACE file to point the package to any dependencies. As a workaround you must create a NAMESPACE file. You can either run ``Check Package'' from the build menu, this will run a suite of tests on the package and if possible, create any necessary files in a new folder called \texttt{VESimHouseholds.Rcheck/VESimHouseholds}.

Or you can create the file manually with Notepad and paste following:

\begin{verbatim}
# Export all names
exportPattern(".")

# Import all packages listed as Imports or Depends
import(
  visioneval
)
\end{verbatim}

Save the file as \texttt{"NAMESPACE"} \uline{with the quotes} in the VESimHouseholds folder. The quotes tells Windows not to add ``.txt''.
\end{quote}

\emph{E) Build again}

After one successful build, it is strongly recommended that you run build again. This is to ensure that the the new source data files have been generated and propagated through to the VisionEval environment as a package.

This this point the new data should now be imported and usable through the VESimHouseholds package. This can be tested by inspecting the data against the old using \texttt{VESimHouseholds::Hh\_df}.

\hypertarget{verspm}{%
\chapter{VERSPM Model Details}\label{verspm}}

\hypertarget{overview-1}{%
\subsection{Overview}\label{overview-1}}

VERSPM is a strategic planning model that assists state and metropolitan area planners with the evaluation of transportation and land use policy scenarios. It considers a large number of factors which affect the performance of transportation systems and their effects on people and the environment. The Regional Strategic Planning Model (RSPM), was developed by the Oregon Department of Transportation (ODOT) for the purpose of estimating and forecasting the effects of various policies and other influences on the amount of vehicle travel, the types of vehicles and fuels used, and the resulting greenhouse gas (GHG) emissions among other outcomes.

The VERSPM model was initially developed to address the following factors:

\begin{itemize}
\tightlist
\item
  Changes in population demographics (age structure);
\item
  Changes in personal income;
\item
  Relative amounts of development occurring in metropolitan, urban and rural areas;
\item
  Metropolitan, other urban, and rural area densities;
\item
  Urban form in metropolitan areas (proportion of population living in mixed use areas with a well interconnected street and walkway system);
\item
  Amounts of metropolitan area transit service;
\item
  Metropolitan freeway and arterial supplies;
\item
  Auto and light truck proportions by year;
\item
  Average vehicle fuel economy by vehicle type and year;
\item
  Vehicle age distribution by vehicle type;
\item
  Electric vehicles (EVs), plug-in hybrid electric vehicles (PHEVs)
\item
  Light-weight vehicles such as bicycles, electric bicycles, electric scooters, etc.;
\item
  Pricing -- fuel, vehicle miles traveled (VMT), parking;
\item
  Demand management -- employer-based and individual marketing;
\item
  Car-sharing;
\item
  Effects of congestion on fuel economy;
\item
  Effects of incident management on fuel economy;
\item
  Vehicle operation and maintenance -- eco-driving, low rolling resistance tires, speed limits;
\item
  Carbon intensity of fuels, including the well to wheels emissions; and
\item
  Carbon production from the electric power that is generated to run electric vehicles.
\end{itemize}

\hypertarget{structure}{%
\subsection{Structure}\label{structure}}

VERSPM is a disaggregate policy model that predicts travel demand impacts at an individual household level. The model estimates vehicle ownership, vehicle travel, fuel consumption, and GHG emissions at the individual household level. This structure accounts for the synergistic and antagonistic effects of multiple policies and factors (e.g.~gas prices) on vehicle travel and emissions. For example, the battery range of electric vehicles (EVs) and plug‐in hybrid electric vehicles (PHEVs) is less of an issue for households residing in compact mixed‐use neighborhoods because those households tend to drive fewer miles each day. Modeling at the household level makes it possible to evaluate the relationships between travel, emissions and the characteristics of households, land use, transportation systems, vehicles, and other factors. In addition, household level analysis makes it possible to evaluate the equitability of the costs and benefits of different strategies.

The model comprises sequential steps with feedback. Each calculation step is composed of a number of calculations that operate on the results of the previous calculation step and on input data that reflect inputs.

The VERSPM steps are grouped as follows:

\includegraphics[width=1\textwidth,height=\textheight]{images/VE_Steps.png}

The iterative process to balance the VMT with travel costs allows congestion and other costs introduced at this step influence the amount of travel. This step balances the amount of household travel with the cost of travel and recalculates household VMT, Fuel \& GHG in the process. The primary outputs of the RSPM are household travel, fuel and power consumption, and GHG emissions calculations, but other information is produced for households and commercial vehicles as well. The amount of commercial (light‐duty) and freight (heavy duty) travel is calculated as well as associated fuel, power consumption and GHG emissions for those vehicles.

\hypertarget{modules}{%
\subsection{Modules}\label{modules}}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  \textbf{Household Modules} - \emph{VESimHouseholds package}
\end{enumerate}

The following four modules create a set of households for each forecast year that represents each resident in the model area with the likely household mix of household and person characteristics:

\begin{itemize}
\tightlist
\item
  \href{https://github.com/visioneval/VisionEval/blob/master/sources/modules/VESimHouseholds/inst/module_docs/CreateHouseholds.md}{Create Households}
\item
  \href{https://github.com/visioneval/VisionEval/blob/master/sources/modules/VESimHouseholds/inst/module_docs/PredictWorkers.md}{Predict Workers}
\item
  \href{https://github.com/visioneval/VisionEval/blob/master/sources/modules/VESimHouseholds/inst/module_docs/AssignLifeCycle.md}{Assign Life Cycle}
\item
  \href{https://github.com/visioneval/VisionEval/blob/master/sources/modules/VESimHouseholds/inst/module_docs/PredictIncome.md}{Predict Income}
\end{itemize}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\setcounter{enumi}{1}
\tightlist
\item
  \textbf{Land Use Modules} - \emph{VELandUse package}
\end{enumerate}

The following five modules assigns a housing type to households (e.g.~single-family, multi-family, etc.) and a development type (metropolitan, town, rural) based on available input dwelling units. Households are assigned a location in the metropolitan area based on the projected supply of housing and neighborhood affordability. Neighborhood population density and mixed-use character are calculated.

\begin{itemize}
\tightlist
\item
  \href{https://github.com/visioneval/VisionEval/blob/master/sources/modules/VELandUse/inst/module_docs/PredictHousing.md}{Predict Housing}
\item
  \href{https://github.com/visioneval/VisionEval/blob/master/sources/modules/VELandUse/inst/module_docs/LocateEmployment.md}{Locate Employment}
\item
  \href{https://github.com/visioneval/VisionEval/blob/master/sources/modules/VELandUse/inst/module_docs/AssignDevTypes.md}{Assign Location Types}
\item
  \href{https://github.com/visioneval/VisionEval/blob/master/sources/modules/VELandUse/inst/module_docs/Calculate4DMeasures.md}{Calculate `4D' Measures}
\item
  \href{https://github.com/visioneval/VisionEval/blob/master/sources/modules/VELandUse/inst/module_docs/CalculateUrbanMixMeasure.md}{Calculate Urban Mix Measures}
\end{itemize}

The following three modules identifies parking restrictions and prices affecting households, identifies households participating in TDM programs and assigns car service availability to zones (including car sharing and taxis):

\begin{itemize}
\tightlist
\item
  \href{https://github.com/visioneval/VisionEval/blob/master/sources/modules/VELandUse/inst/module_docs/AssignParkingRestrictions.md}{Assign Parking Restrictions}
\item
  \href{https://github.com/visioneval/VisionEval/blob/master/sources/modules/VELandUse/inst/module_docs/AssignDemandManagement.md}{Assign Demand Management}
\item
  \href{https://github.com/visioneval/VisionEval/blob/master/sources/modules/VELandUse/inst/module_docs/AssignCarSvcAvailability.md}{Assign Car Service Availability}
\end{itemize}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\setcounter{enumi}{2}
\tightlist
\item
  \textbf{Transport Supply Modules} - \emph{VETransportSupply package}
\end{enumerate}

The following two modules gather details about the relevant roadway and public transport systems considered in the simulation of travel:

\begin{itemize}
\tightlist
\item
  \href{https://github.com/visioneval/VisionEval/blob/master/sources/modules/VETransportSupply/inst/module_docs/AssignTransitService.md}{Assign Transit Service}
\item
  \href{https://github.com/visioneval/VisionEval/blob/master/sources/modules/VETransportSupply/inst/module_docs/AssignRoadMiles.md}{Assign Road Miles}
\end{itemize}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\setcounter{enumi}{3}
\tightlist
\item
  \textbf{Household Vehicle Modules} - \emph{VEHouseholdVehicles package}
\end{enumerate}

The following seven modules simulate details about the drivers of vehicles in the simulation and types of vehicles they drive:

\begin{itemize}
\tightlist
\item
  \href{https://github.com/visioneval/VisionEval/blob/master/sources/modules/VEHouseholdVehicles/inst/module_docs/AssignDrivers.md}{Assign Drivers}
\item
  \href{https://github.com/visioneval/VisionEval/blob/master/sources/modules/VEHouseholdVehicles/inst/module_docs/AssignVehicleOwnership.md}{Assign Vehicle Ownership}
\item
  \href{https://github.com/visioneval/VisionEval/blob/master/sources/modules/VEHouseholdVehicles/inst/module_docs/AssignVehicleType.md}{Assign Vehicle Type}
\item
  \href{https://github.com/visioneval/VisionEval/blob/master/sources/modules/VEHouseholdVehicles/inst/module_docs/CreateVehicleTable.md}{Create Vehicle Table}
\item
  \href{https://github.com/visioneval/VisionEval/blob/master/sources/modules/VEHouseholdVehicles/inst/module_docs/AssignVehicleAge.md}{Assign Vehicle Age}
\item
  \href{https://github.com/visioneval/VisionEval/blob/master/sources/modules/VEHouseholdVehicles/inst/module_docs/CalculateVehicleOwnCost.md}{Calculate Vehicle Ownership Cost}
\item
  \href{https://github.com/visioneval/VisionEval/blob/master/sources/modules/VEHouseholdVehicles/inst/module_docs/AdjustVehicleOwnership.md}{Adjust Vehicle Ownership}
\end{itemize}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\setcounter{enumi}{4}
\tightlist
\item
  \textbf{Household Travel Modules} - \emph{VEHouseholdTravel package}
\end{enumerate}

The following four module provides an initial estimate of average daily vehicle miles traveled (DVMT) for each household based on the household characteristics (e.g., demographics, income, transportation options, and land use). They also calculate the households non-motorized trips.

\begin{itemize}
\tightlist
\item
  \href{https://github.com/visioneval/VisionEval/blob/master/sources/modules/VEHouseholdTravel/inst/module_docs/CalculateHouseholdDvmt.md}{Calculate Household Daily Vehicle Miles Traveled}
\item
  \href{https://github.com/visioneval/VisionEval/blob/master/sources/modules/VEHouseholdTravel/inst/module_docs/CalculateAltModeTrips.md}{Calculate Non-Automobile or `Alternative' Mode Trips}
\item
  \href{https://github.com/visioneval/VisionEval/blob/master/sources/modules/VEHouseholdTravel/inst/module_docs/CalculateVehicleTrips.md}{Calculate Vehicle Trips}
\item
  \href{https://github.com/visioneval/VisionEval/blob/master/sources/modules/VEHouseholdTravel/inst/module_docs/DivertSovTravel.md}{Divert Single-occupant Vehicle Travel}.
\end{itemize}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\setcounter{enumi}{5}
\tightlist
\item
  \textbf{Powertrain and Fuel Modules} - \emph{VEPowertrainsAndFuels package}
\end{enumerate}

The following two modules identifies the vehicles powertrain as an internal combustion engine (ICE), hybrid-electric vehicle (HEV), plug-in hybrid electric vehicle (PHEV), or electric vehicle (EV) and calculates each household vehicle's emission.

\begin{itemize}
\tightlist
\item
  \href{https://github.com/visioneval/VisionEval/blob/master/sources/modules/VEPowertrainsAndFuels/inst/module_docs/CalculateCarbonIntensity.md}{Calculate Carbon Intensity}
\item
  \href{https://github.com/visioneval/VisionEval/blob/master/sources/modules/VEPowertrainsAndFuels/inst/module_docs/CalculateCarbonIntensity.md}{Assign Household Vehicle Powertrains}
\end{itemize}

\hypertarget{feedback}{%
\subsection{Feedback}\label{feedback}}

THe next step balance the amount of household travel with the cost of travel and recalculate household VMT, Fuel and GHG emissions . This is necessary because: 1) congestion calculations affect fuel economy and thus the amount and cost of fuel consumed; 2) congestion pricing affects the amount of travel and household travel costs; 3) fuel, vehicle travel, and other taxes and fees affect the amount and cost of travel; and 4) eco-driving improves fuel economy and reduces fuel cost. The effect of these adjustments to household travel costs need to be included in the total household travel costs and the adjustment to household DVMT.

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\setcounter{enumi}{6}
\tightlist
\item
  \textbf{Travel Performance} - \emph{VETravelPerformance package}
\end{enumerate}

The following modules run iteratively to balance the DVMT and travel costs. Total light duty vehicle (household and commercial service vehicle), truck and bus DVMT is calculated for the metropolitan area and assigned to portions of the road system (freeway, arterial, other). Congestion levels are and associated speed reductions are calculated considering the traffic loads and inputs regarding the deployment of traffic operations programs (e.g.~ramp metering, traffic signal coordination) and congestion pricing. Speed-adjusted fuel economy is calculated considering variations by powertrain. Travel cost per mile due to congestion pricing is also calculated. Household travel costs are calculated from the amounts of miles driven, fuel consumed, electricity consumed, and GHG emitted. Other inputs establish the rates for fuel costs, power costs, fuel taxes, VMT taxes, PAYD insurance, and several external costs. Finally a household budget model is used to adjust household DVMT to reflect the effect of household travel costs on the amount of household travel. The adjusted household DVMT is allocated to vehicles in proportion to the previous allocation. This process can run multiple times until DVMT changes very little between iterations.

\begin{itemize}
\tightlist
\item
  \href{https://github.com/visioneval/VisionEval/blob/master/sources/modules/VETravelPerformance/inst/module_docs/CalculateRoadDvmt.md}{Calculate Road VMT}
\item
  \href{https://github.com/visioneval/VisionEval/blob/master/sources/modules/VETravelPerformance/inst/module_docs/CalculateRoadPerformance.md}{Calculate Road Performance};
\item
  \href{https://github.com/visioneval/VisionEval/blob/master/sources/modules/VETravelPerformance/inst/module_docs/CalculateMpgMpkwhAdjustments.md}{Calculate Fuel and Electric Energy Economy}
\item
  \href{https://github.com/visioneval/VisionEval/blob/master/sources/modules/VETravelPerformance/inst/module_docs/AdjustHhVehicleMpgMpkwh.md}{Adjust Fuel and Electric Energy Economy}
\item
  \href{https://github.com/visioneval/VisionEval/blob/master/sources/modules/VETravelPerformance/inst/module_docs/CalculateVehicleOperatingCost.md}{Calculate Vehicle Operating Cost}
\item
  \href{https://github.com/visioneval/VisionEval/blob/master/sources/modules/VETravelPerformance/inst/module_docs/BudgetHouseholdDvmt.md}{Adjust DVMT Based on Budget}
\end{itemize}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\setcounter{enumi}{7}
\tightlist
\item
  \textbf{Heavy Vehicles Emissions} - \emph{VETravelPerformance}
\end{enumerate}

The following two modules calculate heavy vehicle fuel and power consumption and GHG emissions:

\begin{itemize}
\tightlist
\item
  \href{https://github.com/visioneval/VisionEval/blob/master/sources/modules/VETravelPerformance/inst/module_docs/CalculateComEnergyAndEmissions.md}{Calculate Commercial Vehicles Emissions}
\item
  \href{https://github.com/visioneval/VisionEval/blob/master/sources/modules/VETravelPerformance/inst/module_docs/CalculatePtranEnergyAndEmission.md}{Calculate Transit Vehicles Emissions}
\end{itemize}

\hypertarget{inputs-and-parameters}{%
\section{Inputs and Parameters}\label{inputs-and-parameters}}

The VERSPM model directory is organized with the following subdirectories:

\begin{itemize}
\tightlist
\item
  \protect\hyperlink{defs}{defs}
\item
  \protect\hyperlink{verspm-inputs}{inputs}
\item
  results (created after a completed model run)
\item
  scripts
\end{itemize}

Generally speaking, the VERPSM inputs are classified into the five following categories:

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  \textbf{User input model parameters}: These are input parameters (model or scenario specific), or \protect\hyperlink{defs}{model definition files}, that users should review and modify as needed.
\item
  \textbf{Fixed input model parameters}: These are input parameters, or \protect\hyperlink{defs}{model definition files}, specific to the model that users should not typically modify.
\item
  \textbf{User input files}: These are \protect\hyperlink{verspm-inputs}{input files} (model or scenario specific) that users should review and modify as needed.
\item
  \textbf{Fixed input files}: These are \protect\hyperlink{verspm-inputs}{input files} specific to the model that that users should not typically modify.
\item
  \textbf{Internal module inputs}: These are inputs created by other VERSPM modules.
\end{enumerate}

\hypertarget{modules-and-outputs}{%
\section{Modules and Outputs}\label{modules-and-outputs}}

The VERSPM model is a compilation of several modules, listed below:

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 2\tabcolsep) * \real{0.7000}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 2\tabcolsep) * \real{0.3000}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
MODULE
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
PACKAGE
\end{minipage} \\
\midrule()
\endhead
\protect\hyperlink{verspm-createhouseholds}{CreateHouseholds} & VESimHouseholds \\
\protect\hyperlink{verspm-predictworkers}{PredictWorkers} & VESimHouseholds \\
\protect\hyperlink{verspm-assignlifecycle}{AssignLifeCycle} & VESimHouseholds \\
\protect\hyperlink{verspm-predictincome}{PredictIncome} & VESimHouseholds \\
\protect\hyperlink{verspm-predicthousing}{PredictHousing} & VELandUse \\
\protect\hyperlink{verspm-locateemployment}{LocateEmployment} & VELandUse \\
\protect\hyperlink{verspm-assignloctypes}{AssignLocTypes} & VELandUse \\
\protect\hyperlink{verspm-calculate4dmeasures}{Calculate4DMeasures} & VELandUse \\
\protect\hyperlink{verspm-calculateurbanmixmeasure}{CalculateUrbanMixMeasure} & VELandUse \\
\protect\hyperlink{verspm-assignparkingrestrictions}{AssignParkingRestrictions} & VELandUse \\
\protect\hyperlink{verspm-assigndemandmanagement}{AssignDemandManagement} & VELandUse \\
\protect\hyperlink{verspm-assigncarsvcavailability}{AssignCarSvcAvailability} & VELandUse \\
\protect\hyperlink{verspm-assigntransitservice}{AssignTransitService} & VETransportSupply \\
\protect\hyperlink{verspm-assignroadmiles}{AssignRoadMiles} & VETransportSupply \\
\protect\hyperlink{verspm-assigndrivers}{AssignDrivers} & VEHouseholdVehicles \\
\protect\hyperlink{verspm-assignvehicleownership}{AssignVehicleOwnership} & VEHouseholdVehicles \\
\protect\hyperlink{verspm-assignvehicletype}{AssignVehicleType} & VEHouseholdVehicles \\
\protect\hyperlink{verspm-createvehicletable}{CreateVehicleTable} & VEHouseholdVehicles \\
\protect\hyperlink{verspm-assignvehicleage}{AssignVehicleAge} & VEHouseholdVehicles \\
\protect\hyperlink{verspm-calculatevehicleowncost}{CalculateVehicleOwnCost} & VEHouseholdVehicles \\
\protect\hyperlink{verspm-adjustvehicleownership}{AdjustVehicleOwnership} & VEHouseholdVehicles \\
\protect\hyperlink{verspm-calculatehouseholddvmt}{CalculateHouseholdDvmt} & VEHouseholdTravel \\
\protect\hyperlink{verspm-calculatealtmodetrips}{CalculateAltModeTrips} & VEHouseholdTravel \\
\protect\hyperlink{verspm-calculatevehicletrips}{CalculateVehicleTrips} & VEHouseholdTravel \\
\protect\hyperlink{verspm-divertsovtravel}{DivertSovTravel} & VEHouseholdTravel \\
\protect\hyperlink{verspm-initialize-vepowertrainsandfuels}{Initialize} & VEPowertrainsAndFuels \\
\protect\hyperlink{verspm-calculatecarbonintensity}{CalculateCarbonIntensity} & VEPowertrainsAndFuels \\
\protect\hyperlink{verspm-assignhhvehiclepowertrain}{AssignHhVehiclePowertrain} & VEPowertrainsAndFuels \\
\protect\hyperlink{verspm-initialize-vetravelperformance}{Initialize} & VETravelPerformance \\
\protect\hyperlink{verspm-calculatebaseroaddvmt}{CalculateBaseRoadDvmt} & VETravelPerformance \\
\protect\hyperlink{verspm-calculatefutureroaddvmt}{CalculateFutureRoadDvmt} & VETravelPerformance \\
\protect\hyperlink{verspm-calculateroadperformance}{CalculateRoadPerformance} & VETravelPerformance \\
\protect\hyperlink{verspm-calculatempgmpkwhadjustments}{CalculateMpgMpkwhAdjustments} & VETravelPerformance \\
\protect\hyperlink{verspm-adjusthhvehiclempgmpkwh}{AdjustHhVehicleMpgMpkwh} & VETravelPerformance \\
\protect\hyperlink{verspm-calculatevehicleoperatingcost}{CalculateVehicleOperatingCost} & VETravelPerformance \\
\protect\hyperlink{verspm-budgethouseholddvmt}{BudgetHouseholdDvmt} & VETravelPerformance \\
\protect\hyperlink{verspm-calculatecomenergyandemissions}{CalculateComEnergyAndEmissions} & VETravelPerformance \\
\protect\hyperlink{verspm-calculateptranenergyandemissions}{CalculatePtranEnergyAndEmission} & VETravelPerformance \\
\bottomrule()
\end{longtable}

The following section describes each module, its required inputs, and its generated outputs.

\hypertarget{verspm-createhouseholds}{%
\subsection{CreateHouseholds}\label{verspm-createhouseholds}}

This module creates simulated households using inputs of population by age group by simulation year.

\hypertarget{user-input-files}{%
\subsubsection*{User Input Files}\label{user-input-files}}
\addcontentsline{toc}{subsubsection}{User Input Files}

\hypertarget{household-population-azone_hh_pop_by_age.csv}{%
\paragraph*{Household Population (azone\_hh\_pop\_by\_age.csv)}\label{household-population-azone_hh_pop_by_age.csv}}
\addcontentsline{toc}{paragraph}{Household Population (azone\_hh\_pop\_by\_age.csv)}

This file contains population estimates/forecasts by age for each of the base and future years. The file format includes number of persons within six age groups:

\begin{itemize}
\tightlist
\item
  0-14
\item
  15-19
\item
  20-29
\item
  30-54
\item
  55-64
\item
  65 Plus
\end{itemize}

Base year data for population by age category can be sourced from the Census. Future year data must be developed by the user; in many regions population forecasts are available from regional or state agencies such as population data centers, universities, metropolitan planning organizations, or similar agencies.

Here is a snapshot of the file:

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 14\tabcolsep) * \real{0.0870}}
  >{\centering\arraybackslash}p{(\columnwidth - 14\tabcolsep) * \real{0.1304}}
  >{\centering\arraybackslash}p{(\columnwidth - 14\tabcolsep) * \real{0.1304}}
  >{\centering\arraybackslash}p{(\columnwidth - 14\tabcolsep) * \real{0.1304}}
  >{\centering\arraybackslash}p{(\columnwidth - 14\tabcolsep) * \real{0.1304}}
  >{\centering\arraybackslash}p{(\columnwidth - 14\tabcolsep) * \real{0.1304}}
  >{\centering\arraybackslash}p{(\columnwidth - 14\tabcolsep) * \real{0.1304}}
  >{\centering\arraybackslash}p{(\columnwidth - 14\tabcolsep) * \real{0.1304}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Geo
\end{minipage} & \begin{minipage}[b]{\linewidth}\centering
Year
\end{minipage} & \begin{minipage}[b]{\linewidth}\centering
Age0to14
\end{minipage} & \begin{minipage}[b]{\linewidth}\centering
Age15to19
\end{minipage} & \begin{minipage}[b]{\linewidth}\centering
Age20to29
\end{minipage} & \begin{minipage}[b]{\linewidth}\centering
Age30to54
\end{minipage} & \begin{minipage}[b]{\linewidth}\centering
Age55to64
\end{minipage} & \begin{minipage}[b]{\linewidth}\centering
Age65Plus
\end{minipage} \\
\midrule()
\endhead
RVMPO & 2010 & 30193 & 10970 & 20557 & 52327 & 24840 & 29240 \\
RVMPO & 2038 & 39759 & 12781 & 24972 & 75984 & 27563 & 66139 \\
\bottomrule()
\end{longtable}

\hypertarget{household-size-azone_hhsize_targets.csv}{%
\paragraph*{Household Size (azone\_hhsize\_targets.csv)}\label{household-size-azone_hhsize_targets.csv}}
\addcontentsline{toc}{paragraph}{Household Size (azone\_hhsize\_targets.csv)}

This file contains the household-specific targets for the population synthesizer. This file contains two attributes:

\begin{itemize}
\tightlist
\item
  \textbf{AveHhSize}: Average household size for non-group quarters households
\item
  \textbf{Prop1PerHh}: Proportion of non-group quarters households having only one person
\end{itemize}

Household size data for the base year can be sourced from the Census.

Here is a snapshot of the file:

\begin{longtable}[]{@{}lccc@{}}
\toprule()
Geo & Year & AveHhSize & Prop1PerHh \\
\midrule()
\endhead
RVMPO & 2010 & NA & 0.3 \\
RVMPO & 2038 & NA & NA \\
\bottomrule()
\end{longtable}

\hypertarget{group-quarter-population-azone_gq_pop_by_age.csv}{%
\paragraph*{Group Quarter Population (azone\_gq\_pop\_by\_age.csv)}\label{group-quarter-population-azone_gq_pop_by_age.csv}}
\addcontentsline{toc}{paragraph}{Group Quarter Population (azone\_gq\_pop\_by\_age.csv)}

This file contains group quarters population estimates/forecasts by age for each of the base and future years. The file format includes number of persons within the following six age categories:

\begin{itemize}
\tightlist
\item
  0-14
\item
  15-19
\item
  20-29
\item
  30-54
\item
  55-64
\item
  65 Plus
\end{itemize}

Group quarters are distinguished between two types: institutional and non-institutional. Institutional group quarter populations are those in correctional facilities or nursing homes. Non-institutional group quarters include college dormitories, military barracks, group homes, missions, or shelters. Only non-institutional group quarters are included in the modeled population, given the assumption that institutional group quarters populations do not account for much, if any, travel. Base year data for group quarter populations can be sourced from the Census.

Here is a snapshot of the file:

\begin{table}
\centering
\begin{tabular}{l|r|r|r|r|r|r|r}
\hline
Geo & Year & GrpAge0to14 & GrpAge15to19 & GrpAge20to29 & GrpAge30to54 & GrpAge55to64 & GrpAge65Plus\\
\hline
RVMPO & 2010 & 0 & 666 & 382 & 66 & 7 & 0\\
\hline
RVMPO & 2038 & 0 & 666 & 382 & 66 & 7 & 0\\
\hline
\end{tabular}
\end{table}

\hypertarget{module-outputs}{%
\subsubsection*{Module Outputs}\label{module-outputs}}
\addcontentsline{toc}{subsubsection}{Module Outputs}

Households are created with the number of persons in each of six age categories (0-14, 15-19, 20-29, 30-54, 55-64, and 65+) and the total number of persons in the household. Two types of households are created: regular households (i.e.~not persons living in group quarters) and group quarters households .

\begin{itemize}
\tightlist
\item
  \textbf{HhId}: Unique household ID
\item
  \textbf{HhSize}: Number of persons
\item
  \textbf{Age0to14}: Persons in 0 to 14 year old age group
\item
  \textbf{Age15to19}: Persons in 15 to 19 year old age group
\item
  \textbf{Age20to29}: Persons in 20 to 29 year old age group
\item
  \textbf{Age30to54}: Persons in 30 to 54 year old age group
\item
  \textbf{Age55to64}: Persons in 55 to 64 year old age group
\item
  \textbf{Age65Plus}: Persons in 65 or older age group
\item
  \textbf{HhType}: Coded household age composition (e.g., \texttt{2-1-0-2-0-0}) or \texttt{Grp} for group quarters
\end{itemize}

For more information see \href{https://github.com/visioneval/VisionEval/blob/master/sources/modules/VESimHouseholds/inst/module_docs/CreateHouseholds.md}{here}

\hypertarget{verspm-predictworkers}{%
\subsection{PredictWorkers}\label{verspm-predictworkers}}

This module assigns workers by age to households and to non-institutional group quarters population. It is a simple model which predicts workers as a function of the household type and age composition.

\hypertarget{user-input-files-1}{%
\subsubsection*{User Input Files}\label{user-input-files-1}}
\addcontentsline{toc}{subsubsection}{User Input Files}

\hypertarget{relative-employment-azone_relative_employment.csv}{%
\paragraph*{Relative employment (azone\_relative\_employment.csv)}\label{relative-employment-azone_relative_employment.csv}}
\addcontentsline{toc}{paragraph}{Relative employment (azone\_relative\_employment.csv)}

This file contains the ratio of workers to persons by age cohort in the model year relative to the model estimation data year. This file contains five age cohorts:

\begin{itemize}
\tightlist
\item
  \textbf{RelEmp15to19}: Ratio of workers to persons age 15 to 19 in model year versus in estimation data year
\item
  \textbf{RelEmp20to29}: Ratio of workers to persons age 20 to 29 in model year versus in estimation data year
\item
  \textbf{RelEmp30to54}: Ratio of workers to persons age 30 to 54 in model year versus in estimation data year
\item
  \textbf{RelEmp55to64}: Ratio of workers to persons age 55 to 64 in model year versus in estimation data year
\item
  \textbf{RelEmp65Plus}: Ratio of workers to persons age 65 or older in model year versus in estimation data year
\end{itemize}

Setting a value of 1 assumes that the ratio of workers to persons is consistent with estimation data for that specific age cohort.

Here is a snapshot of the file:

\begin{table}
\centering
\begin{tabular}{l|c|c|c|c|c|c}
\hline
Geo & Year & RelEmp15to19 & RelEmp20to29 & RelEmp30to54 & RelEmp55to64 & RelEmp65Plus\\
\hline
RVMPO & 2010 & 1 & 1 & 1 & 1 & 1\\
\hline
RVMPO & 2038 & 1 & 1 & 1 & 1 & 1\\
\hline
\end{tabular}
\end{table}

\hypertarget{internal-module-inputs}{%
\subsubsection*{Internal Module Inputs}\label{internal-module-inputs}}
\addcontentsline{toc}{subsubsection}{Internal Module Inputs}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.2000}}
  >{\centering\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.3000}}
  >{\centering\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.3000}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.2000}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Package
\end{minipage} & \begin{minipage}[b]{\linewidth}\centering
Module
\end{minipage} & \begin{minipage}[b]{\linewidth}\centering
Outputs
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule()
\endhead
VESimHouseholds & \protect\hyperlink{verspm-createhouseholds}{CreateHouseholds} & \textbf{Age0to14} & Persons in 0 to 14 year old age group \\
VESimHouseholds & \protect\hyperlink{verspm-createhouseholds}{CreateHouseholds} & \textbf{Age15to19} & Persons in 15 to 19 year old age group \\
VESimHouseholds & \protect\hyperlink{verspm-createhouseholds}{CreateHouseholds} & \textbf{Age20to29} & Persons in 20 to 29 year old age group \\
VESimHouseholds & \protect\hyperlink{verspm-createhouseholds}{CreateHouseholds} & \textbf{Age30to54} & Persons in 30 to 54 year old age group \\
VESimHouseholds & \protect\hyperlink{verspm-createhouseholds}{CreateHouseholds} & \textbf{Age55to64} & Persons in 55 to 64 year old age group \\
VESimHouseholds & \protect\hyperlink{verspm-createhouseholds}{CreateHouseholds} & \textbf{Age65Plus} & Persons in 65 or older age group \\
VESimHouseholds & \protect\hyperlink{verspm-createhouseholds}{CreateHouseholds} & \textbf{HHType} & Coded household age composition \\
\bottomrule()
\end{longtable}

\hypertarget{module-outputs-1}{%
\subsubsection*{Module Outputs}\label{module-outputs-1}}
\addcontentsline{toc}{subsubsection}{Module Outputs}

\begin{itemize}
\tightlist
\item
  \textbf{Wkr15to19}: Workers in 15 to 19 year old age group
\item
  \textbf{Wkr20to29}: Workers in 20 to 29 year old age group
\item
  \textbf{Wkr30to54}: Workers in 30 to 54 year old age group
\item
  \textbf{Wkr55to64}: Workers in 55 to 64 year old age group
\item
  \textbf{Wkr65Plus}: Workers in 65 or older age group
\item
  \textbf{Workers}: Total workers
\item
  \textbf{NumWkr}: Number of workers residing in the zone
\end{itemize}

For more information see \href{https://github.com/visioneval/VisionEval/blob/master/sources/modules/VESimHouseholds/inst/module_docs/PredictWorkers.md}{here}

\hypertarget{verspm-assignlifecycle}{%
\subsection{AssignLifeCycle}\label{verspm-assignlifecycle}}

This module assigns a life cycle category to each household. The life cycle categories are similar, but not the same as, those established for the National Household Travel Survey (NHTS). The age categories used in VisionEval models are broader than those used by the NHTS to identify children of different ages. This is a simple model with set of rules that assigns age group categories based on the age of persons and workers in the household.

\hypertarget{user-input-files-2}{%
\subsubsection*{User Input Files}\label{user-input-files-2}}
\addcontentsline{toc}{subsubsection}{User Input Files}

This module has no user input requirements.

\hypertarget{internal-module-inputs-1}{%
\subsubsection*{Internal Module Inputs}\label{internal-module-inputs-1}}
\addcontentsline{toc}{subsubsection}{Internal Module Inputs}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1724}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.3362}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1207}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.3707}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Package
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Module
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Outputs
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule()
\endhead
VESimHouseholds & \protect\hyperlink{verspm-createhouseholds}{CreateHouseholds} & \textbf{Age0to14} & Persons in 0 to 14 year old age group \\
VESimHouseholds & \protect\hyperlink{verspm-createhouseholds}{CreateHouseholds} & \textbf{Age15to19} & Persons in 15 to 19 year old age group \\
VESimHouseholds & \protect\hyperlink{verspm-createhouseholds}{CreateHouseholds} & \textbf{Age20to29} & Persons in 20 to 29 year old age group \\
VESimHouseholds & \protect\hyperlink{verspm-createhouseholds}{CreateHouseholds} & \textbf{Age30to54} & Persons in 30 to 54 year old age group \\
VESimHouseholds & \protect\hyperlink{verspm-createhouseholds}{CreateHouseholds} & \textbf{Age55to64} & Persons in 55 to 64 year old age group \\
VESimHouseholds & \protect\hyperlink{verspm-createhouseholds}{CreateHouseholds} & \textbf{Age65Plus} & Persons in 65 or older age group \\
VESimHouseholds & \protect\hyperlink{verspm-createhouseholds}{CreateHouseholds} & \textbf{HHType} & Coded household age composition \\
VESimHouseholds & \protect\hyperlink{verspm-predictworkers}{PredictWorkers} & \textbf{Wrk15to19} & Workers in 15 to 19 year old age group \\
VESimHouseholds & \protect\hyperlink{verspm-predictworkers}{PredictWorkers} & \textbf{Wrk20to29} & Workers in 20 to 29 year old age group \\
VESimHouseholds & \protect\hyperlink{verspm-predictworkers}{PredictWorkers} & \textbf{Wrk30to54} & Workers in 30 to 54 year old age group \\
VESimHouseholds & \protect\hyperlink{verspm-predictworkers}{PredictWorkers} & \textbf{Wrk55to64} & Workers in 55 to 64 year old age group \\
VESimHouseholds & \protect\hyperlink{verspm-predictworkers}{PredictWorkers} & \textbf{Wrk65Plus} & Workers in 65 or older age group \\
\bottomrule()
\end{longtable}

\hypertarget{module-outputs-2}{%
\subsubsection*{Module Outputs}\label{module-outputs-2}}
\addcontentsline{toc}{subsubsection}{Module Outputs}

\begin{itemize}
\tightlist
\item
  \textbf{LifeCycle}: Household life cycle as defined by 2009 NHTS \texttt{LIF\_CYC} variable
\end{itemize}

For more information see \href{https://github.com/visioneval/VisionEval/blob/master/sources/modules/VESimHouseholds/inst/module_docs/AssignLifeCycle.md}{here}

\hypertarget{verspm-predictincome}{%
\subsection{PredictIncome}\label{verspm-predictincome}}

This module predicts the income for each simulated household given the number of workers in each age group and the average per capita income for the \texttt{Azone} where the household resides.

\hypertarget{user-input-files-3}{%
\subsubsection*{User Input Files}\label{user-input-files-3}}
\addcontentsline{toc}{subsubsection}{User Input Files}

\hypertarget{regional-income-azone_per_cap_inc.csv}{%
\paragraph*{Regional Income (azone\_per\_cap\_inc.csv)}\label{regional-income-azone_per_cap_inc.csv}}
\addcontentsline{toc}{paragraph}{Regional Income (azone\_per\_cap\_inc.csv)}

This file contains information on regional average per capita household (\texttt{HHIncomePC}) and group quarters (\texttt{GQIncomePC}) income by forecast year in year 2010 dollars. The data can be obtained from the U.S. Department of Commerce Bureau of Economic Analysis for the current year or from regional or state sources for forecast years. In order to use current year dollars just replace 2010 in column labels with current year. For example, if the data is obtained in year 2015 dollars then the column labels in the file shown below will become \texttt{HHIncomePC.2015} and \texttt{GQIncomePC.2015}.

Here is a snapshot of the file:

\begin{tabular}{l|c|c|c}
\hline
Geo & Year & HHIncomePC.2010 & GQIncomePC.2010\\
\hline
RVMPO & 2010 & 32164 & 7500\\
\hline
RVMPO & 2038 & 43334 & 10000\\
\hline
\end{tabular}

\hypertarget{internal-module-inputs-2}{%
\subsubsection*{Internal Module Inputs}\label{internal-module-inputs-2}}
\addcontentsline{toc}{subsubsection}{Internal Module Inputs}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1724}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.3362}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1207}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.3707}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Package
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Module
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Outputs
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule()
\endhead
VESimHouseholds & \protect\hyperlink{verspm-createhouseholds}{CreateHouseholds} & \textbf{HHSize} & Number of persons in the household \\
VESimHouseholds & \protect\hyperlink{verspm-createhouseholds}{CreateHouseholds} & \textbf{Age65Plus} & Persons in 65 or older age group \\
VESimHouseholds & \protect\hyperlink{verspm-createhouseholds}{CreateHouseholds} & \textbf{HHType} & Coded household age composition \\
VESimHouseholds & \protect\hyperlink{verspm-predictworkers}{PredictWorkers} & \textbf{Wrk15to19} & Workers in 15 to 19 year old age group \\
VESimHouseholds & \protect\hyperlink{verspm-predictworkers}{PredictWorkers} & \textbf{Wrk20to29} & Workers in 20 to 29 year old age group \\
VESimHouseholds & \protect\hyperlink{verspm-predictworkers}{PredictWorkers} & \textbf{Wrk30to54} & Workers in 30 to 54 year old age group \\
VESimHouseholds & \protect\hyperlink{verspm-predictworkers}{PredictWorkers} & \textbf{Wrk55to64} & Workers in 55 to 64 year old age group \\
\bottomrule()
\end{longtable}

\hypertarget{module-outputs-3}{%
\subsubsection*{Module Outputs}\label{module-outputs-3}}
\addcontentsline{toc}{subsubsection}{Module Outputs}

\begin{itemize}
\tightlist
\item
  \textbf{Income}: Total annual household (non-qroup and group quarters) income
\end{itemize}

For more information see \href{https://github.com/visioneval/VisionEval/blob/master/sources/modules/VESimHouseholds/inst/module_docs/PredictIncome.md}{here}

\hypertarget{verspm-predicthousing}{%
\subsection{PredictHousing}\label{verspm-predicthousing}}

This module assigns a housing type, either single-family (\texttt{SF}) or multifamily (\texttt{MF}) to non-group quarters households based on the respective supplies of \texttt{SF} and \texttt{MF} dwelling units in the housing market to which the household is assigned (i.e.~the \texttt{Azone} the household is assigned to) and household characteristics. The model then assigns each household to a \texttt{Bzone} based on the household's housing type and income quartile as well as the supply of housing by type and \texttt{Bzone} (an input), and the distribution of households by income quartile for each \texttt{Bzone} (an input). The module assigns non-institutional group quarters households to \texttt{Bzones} based on the supply of group quarters units by \texttt{Bzone}.

\hypertarget{user-input-files-4}{%
\subsubsection*{User Input Files}\label{user-input-files-4}}
\addcontentsline{toc}{subsubsection}{User Input Files}

\hypertarget{dwelling-units-bzone_dwelling_units.csv}{%
\paragraph*{Dwelling Units (bzone\_dwelling\_units.csv)}\label{dwelling-units-bzone_dwelling_units.csv}}
\addcontentsline{toc}{paragraph}{Dwelling Units (bzone\_dwelling\_units.csv)}

This file contains the number single-family dwelling units (\texttt{SFDU}), multifamily dwelling units (\texttt{MFDU}) and group-quarter dwelling units (\texttt{GQDU}) by \texttt{Bzone} for each of the base and future years. Data for the base year for single-family and multifamily dwelling units can be sourced from Census housing data with information on units in structure, with multifamily dwelling units defined as any structures with 2-or-more units. For group quarters, unless more detailed local data is available, Census data for non-institutionalized group quarter population can serve as a proxy for dwelling units assuming a \texttt{1:1} ratio of dwelling unit per GQ population.

Here is a snapshot of the file:

\begin{tabular}{l|c|c|c|c}
\hline
Geo & Year & SFDU & MFDU & GQDU\\
\hline
D410290014002 & 2010 & 559 & 0 & 0\\
\hline
D410290013012 & 2010 & 79 & 8 & 523\\
\hline
D410290014001 & 2010 & 1398 & 180 & 0\\
\hline
D410290014003 & 2010 & 1385 & 172 & 0\\
\hline
D410290013021 & 2010 & 271 & 0 & 0\\
\hline
\end{tabular}

\hypertarget{household-proportion-by-income-bzone_hh_inc_qrtl_prop.csv}{%
\paragraph*{Household Proportion by Income (bzone\_hh\_inc\_qrtl\_prop.csv)}\label{household-proportion-by-income-bzone_hh_inc_qrtl_prop.csv}}
\addcontentsline{toc}{paragraph}{Household Proportion by Income (bzone\_hh\_inc\_qrtl\_prop.csv)}

This file contains the proportion of \texttt{Bzone} non-group quarters households by quartile of \texttt{Azone} household income category for each of the base and future years. The total for each \texttt{Bzone} should sum to \texttt{1}.

Here is a snapshot of the file:

\begin{tabular}{l|c|c|c|c|c}
\hline
Geo & Year & HhPropIncQ1 & HhPropIncQ2 & HhPropIncQ3 & HhPropIncQ4\\
\hline
D410290014002 & 2010 & 0.12 & 0.54 & 0.26 & 0.54\\
\hline
D410290013012 & 2010 & 0.00 & 0.32 & 0.36 & 0.32\\
\hline
D410290014001 & 2010 & 0.24 & 0.16 & 0.26 & 0.16\\
\hline
D410290014003 & 2010 & 0.16 & 0.19 & 0.36 & 0.19\\
\hline
D410290013021 & 2010 & 0.29 & 0.29 & 0.15 & 0.29\\
\hline
\end{tabular}

\hypertarget{internal-module-inputs-3}{%
\subsubsection*{Internal Module Inputs}\label{internal-module-inputs-3}}
\addcontentsline{toc}{subsubsection}{Internal Module Inputs}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1724}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.3362}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1207}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.3707}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Package
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Module
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Outputs
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule()
\endhead
VESimHouseholds & \protect\hyperlink{verspm-createhouseholds}{CreateHouseholds} & \textbf{HHSize} & Number of persons in the household \\
VESimHouseholds & \protect\hyperlink{verspm-createhouseholds}{CreateHouseholds} & \textbf{HHType} & Coded household age composition \\
VESimHouseholds & \protect\hyperlink{verspm-createhouseholds}{CreateHouseholds} & \textbf{Age15to19} & Persons in 15 to 19 year old age group \\
VESimHouseholds & \protect\hyperlink{verspm-createhouseholds}{CreateHouseholds} & \textbf{Age20to29} & Persons in 20 to 29 year old age group \\
VESimHouseholds & \protect\hyperlink{verspm-createhouseholds}{CreateHouseholds} & \textbf{Age30to54} & Persons in 30 to 54 year old age group \\
VESimHouseholds & \protect\hyperlink{verspm-createhouseholds}{CreateHouseholds} & \textbf{Age55to64} & Persons in 55 to 64 year old age group \\
VESimHouseholds & \protect\hyperlink{verspm-createhouseholds}{CreateHouseholds} & \textbf{Age65Plus} & Persons in 65 or older age group \\
VESimHouseholds & \protect\hyperlink{verspm-predictworkers}{PredictWorkers} & \textbf{Workers} & Total workers in the household \\
VESimHouseholds & \protect\hyperlink{verspm-predictincome}{PredictIncome} & \textbf{Income} & Total annual income of household \\
\bottomrule()
\end{longtable}

\hypertarget{module-outputs-4}{%
\subsubsection*{Module Outputs}\label{module-outputs-4}}
\addcontentsline{toc}{subsubsection}{Module Outputs}

\begin{itemize}
\tightlist
\item
  \textbf{HouseType}: Type of dwelling unit of the household
\item
  \textbf{SF}: Number of households living in single family dwelling units in zone
\item
  \textbf{MF}: Number of households living in multi-family dwelling units in zone
\item
  \textbf{GQ}: Number of persons living in group quarters in zone
\item
  \textbf{Pop}: Population residing in zone
\item
  \textbf{NumHh}: Number of households in zone
\item
  \textbf{NumWkr}: Number of workers in zone
\end{itemize}

For more information see \href{https://github.com/visioneval/VisionEval/blob/master/sources/modules/VELandUse/inst/module_docs/PredictHousing.md}{here}

\hypertarget{locateemployment-verspm-locateemployment}{%
\subsection{LocateEmployment \{verspm-locateemployment\}}\label{locateemployment-verspm-locateemployment}}

This module places employment in \texttt{Bzone}s based on input assumptions of employment by type and \texttt{Bzone}. The model adjusts the employment numbers to balance with the number of workers in the region. The module creates a worker table and assigns workers to \texttt{Bzone} employment locations as a function of the number of jobs in each \texttt{Bzone} and the distance between residence and employment \texttt{Bzone}s.

\hypertarget{user-input-files-5}{%
\subsubsection*{User Input Files}\label{user-input-files-5}}
\addcontentsline{toc}{subsubsection}{User Input Files}

\hypertarget{employment-data-bzone_employment.csv}{%
\paragraph*{Employment Data (bzone\_employment.csv)}\label{employment-data-bzone_employment.csv}}
\addcontentsline{toc}{paragraph}{Employment Data (bzone\_employment.csv)}

This file contains the total, retail and service employment by zone for each of the base and future years. Employment categorizations are from the Environmental Protection Agency's (EPA) \href{https://www.epa.gov/smartgrowth/smart-location-database-technical-documentation-and-user-guide}{Smart Location Database} 5-tier employment classification.

\begin{itemize}
\tightlist
\item
  \textbf{TotEmp}: Total number of jobs in zone
\item
  \textbf{RetEmp}: Number of jobs in retail sector in zone (Census LEHD: CNS07)
\item
  \textbf{SvcEmp}: Number of jobs in service sector in zone (Census LEHD: CNS12 + CNS14 + CNS15 + CNS16 + CNS19)
\end{itemize}

Here is a snapshot of the file:

\begin{tabular}{l|c|c|c|c}
\hline
Geo & Year & TotEmp & RetEmp & SvcEmp\\
\hline
D410290014002 & 2010 & 403 & 262 & 96\\
\hline
D410290013012 & 2010 & 1382 & 73 & 880\\
\hline
D410290014001 & 2010 & 271 & 12 & 172\\
\hline
D410290014003 & 2010 & 609 & 66 & 413\\
\hline
D410290013021 & 2010 & 49 & 1 & 41\\
\hline
\end{tabular}

\hypertarget{zonal-latituted-longitude-bzone_lat_lon.csv}{%
\paragraph*{Zonal Latituted Longitude (bzone\_lat\_lon.csv)}\label{zonal-latituted-longitude-bzone_lat_lon.csv}}
\addcontentsline{toc}{paragraph}{Zonal Latituted Longitude (bzone\_lat\_lon.csv)}

This file contains the latitude and longitude of the centroid of the zone.

Here is a snapshot of the file:

\begin{tabular}{l|c|c|c}
\hline
Geo & Year & Latitude & Longitude\\
\hline
D410290014002 & 2010 & 42.48657 & -122.8014\\
\hline
D410290013012 & 2010 & 42.44259 & -122.8461\\
\hline
D410290014001 & 2010 & 42.46010 & -122.7925\\
\hline
D410290014003 & 2010 & 42.47673 & -122.8008\\
\hline
D410290013021 & 2010 & 42.37304 & -122.7793\\
\hline
\end{tabular}

\hypertarget{internal-module-inputs-4}{%
\subsubsection*{Internal Module Inputs}\label{internal-module-inputs-4}}
\addcontentsline{toc}{subsubsection}{Internal Module Inputs}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1724}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.3362}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1207}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.3707}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Package
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Module
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Outputs
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule()
\endhead
VESimHouseholds & \protect\hyperlink{verspm-createhouseholds}{CreateHouseholds} & \textbf{HhId} & Household id \\
VESimHouseholds & \protect\hyperlink{verspm-predictworkers}{PredictWorkers} & \textbf{Workers} & Total workers in the household \\
VESimHouseholds & \protect\hyperlink{verspm-predictworkers}{PredictWorkers} & \textbf{NumWkr} & Number of workers residing in the zone \\
\bottomrule()
\end{longtable}

\hypertarget{module-outputs-5}{%
\subsubsection*{Module Outputs}\label{module-outputs-5}}
\addcontentsline{toc}{subsubsection}{Module Outputs}

\begin{itemize}
\tightlist
\item
  \textbf{TotEmp}: Total number of jobs in zone
\item
  \textbf{RetEmp}: Number of jobs in retail sector in zone
\item
  \textbf{SvcEmp}: Number of jobs in service sector in zone
\item
  \textbf{WkrId}: Unique worker ID
\item
  \textbf{DistanceToWork}: Distance from home to work assuming location at \texttt{Bzone} centroid and `Manhattan' distance
\end{itemize}

For more information see \href{https://github.com/visioneval/VisionEval/blob/master/sources/modules/VELandUse/inst/module_docs/LocateEmployment.md}{here}

\hypertarget{verspm-assignloctypes}{%
\subsection{AssignLocTypes}\label{verspm-assignloctypes}}

This module assigns households to location types: \texttt{Urban} (located within an urbanized area boundary), \texttt{Town} (located in a smaller urban area that does not have enough population to qualify as an urbanized area), and \texttt{Rural} (located in an area characterized by low density dispersed development).

\hypertarget{user-input-files-6}{%
\subsubsection*{User Input Files}\label{user-input-files-6}}
\addcontentsline{toc}{subsubsection}{User Input Files}

\hypertarget{urban-dwelling-proportion-bzone_urban-town_du_proportions.csv}{%
\paragraph*{Urban dwelling proportion (bzone\_urban-town\_du\_proportions.csv)}\label{urban-dwelling-proportion-bzone_urban-town_du_proportions.csv}}
\addcontentsline{toc}{paragraph}{Urban dwelling proportion (bzone\_urban-town\_du\_proportions.csv)}

This file contains proportion of SF, MF and GQ dwelling units within the urban portion of the zone.

\begin{itemize}
\tightlist
\item
  \textbf{PropUrbanSFDU}: Proportion of single family dwelling units located within the urban portion of the zone
\item
  \textbf{PropUrbanMFDU}: Proportion of multi-family dwelling units located within the urban portion of the zone
\item
  \textbf{PropUrbanGQDU}: Proportion of group quarters accommodations located within the urban portion of the zone
\item
  \textbf{PropTownSFDU}: Proportion of single family dwelling units located within the town portion of the zone
\item
  \textbf{PropTownMFDU}: Proportion of multi-family dwelling units located within the town portion of the zone
\item
  \textbf{PropTownGQDU}: Proportion of group quarters accommodations located within the town portion of the zone
\end{itemize}

Here is a snapshot of the file:

\begin{tabular}{l|c|c|c|c|c|c|c}
\hline
Geo & Year & PropUrbanSFDU & PropUrbanMFDU & PropUrbanGQDU & PropTownSFDU & PropTownMFDU & PropTownGQDU\\
\hline
D410290014002 & 2010 & 0.4686941 & 1 & 1 & 0 & 0 & 0\\
\hline
D410290013012 & 2010 & 0.8860759 & 1 & 1 & 0 & 0 & 0\\
\hline
D410290014001 & 2010 & 0.8626609 & 1 & 1 & 0 & 0 & 0\\
\hline
D410290014003 & 2010 & 0.9906137 & 1 & 1 & 0 & 0 & 0\\
\hline
D410290013021 & 2010 & 0.0147601 & 1 & 1 & 0 & 0 & 0\\
\hline
\end{tabular}

\hypertarget{internal-module-inputs-5}{%
\subsubsection*{Internal Module Inputs}\label{internal-module-inputs-5}}
\addcontentsline{toc}{subsubsection}{Internal Module Inputs}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1724}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.3362}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1207}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.3707}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Package
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Module
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Outputs
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule()
\endhead
VESimHouseholds & \protect\hyperlink{verspm-createhouseholds}{CreateHouseholds} & \textbf{HhId} & Household id \\
VESimHouseholds & \protect\hyperlink{verspm-predictworkers}{PredictWorkers} & \textbf{HhSize} & Number of persons in household \\
VESimHouseholds & \protect\hyperlink{verspm-predictincome}{PredictIncome} & \textbf{Income} & Total annual income of household \\
VELandUse & \protect\hyperlink{verspm-predicthousing}{PredictHousing} & \textbf{HouseType} & Type of dwelling unit of the household \\
\bottomrule()
\end{longtable}

\hypertarget{module-outputs-6}{%
\subsubsection*{Module Outputs}\label{module-outputs-6}}
\addcontentsline{toc}{subsubsection}{Module Outputs}

\begin{itemize}
\tightlist
\item
  \textbf{LocType}: Location type (Urban, Town, Rural) of the place where the household resides
\item
  \textbf{UrbanPop}: Urbanized area population
\item
  \textbf{RuralPop}: Rural (i.e.~non-urbanized area) population
\item
  \textbf{TownPop}: Town (i.e.~urban but non-urbanized area) population
\item
  \textbf{UrbanIncome}: Total household income of the urbanized area population
\item
  \textbf{TownIncome}: Total household income of the town (i.e.~urban but non-urbanized area) population
\item
  \textbf{RuralIncome}: Total household income of the rural (i.e.~non-urbanized area) population
\end{itemize}

For more information see \href{https://github.com/visioneval/VisionEval/blob/master/sources/modules/VELandUse/inst/module_docs/AssignLocTypes.md}{here}

\hypertarget{verspm-calculate4dmeasures}{%
\subsection{Calculate4DMeasures}\label{verspm-calculate4dmeasures}}

This module calculates several so-called `4D' measures by \texttt{Bzone} including density, diversity (i.e.~mixing of land uses), transportation network design, and destination accessibility, i.e., the four `Ds' of density, diversity, design, and destination accessibility. These measures are the same as or are similar to measures included in the EPA's \href{https://www.epa.gov/smartgrowth/smart-location-database-technical-documentation-and-user-guide}{Smart Location Database}

\hypertarget{user-input-files-7}{%
\subsubsection*{User Input Files}\label{user-input-files-7}}
\addcontentsline{toc}{subsubsection}{User Input Files}

\hypertarget{developable-area-bzone_unprotected_area.csv}{%
\paragraph*{Developable Area (bzone\_unprotected\_area.csv)}\label{developable-area-bzone_unprotected_area.csv}}
\addcontentsline{toc}{paragraph}{Developable Area (bzone\_unprotected\_area.csv)}

This file contains the information about unprotected (i.e., developable) area within the zone.

\begin{itemize}
\tightlist
\item
  \textbf{UrbanArea}: Area that is \texttt{Urban} and unprotected (i.e.~developable) within the zone (Acres)
\item
  \textbf{TownArea}: Area that is \texttt{Town} and unprotected within the zone (Acres)
\item
  \textbf{RuralArea}: Area that is \texttt{Rural} and unprotected within the zone (Acres)
\end{itemize}

Here is a snapshot of the file:

\begin{tabular}{l|c|c|c|c}
\hline
Geo & Year & UrbanArea & TownArea & RuralArea\\
\hline
D410290014002 & 2010 & 298.6487137 & 0 & 4996.11876\\
\hline
D410290013012 & 2010 & 830.6009450 & 0 & 384.80922\\
\hline
D410290014001 & 2010 & 983.1506646 & 0 & 3699.94017\\
\hline
D410290014003 & 2010 & 439.2145619 & 0 & 90.86259\\
\hline
D410290013021 & 2010 & 0.3548548 & 0 & 6212.57640\\
\hline
\end{tabular}

\hypertarget{network-density-bzone_network_design.csv}{%
\paragraph*{Network density (bzone\_network\_design.csv)}\label{network-density-bzone_network_design.csv}}
\addcontentsline{toc}{paragraph}{Network density (bzone\_network\_design.csv)}

This file contains values for \texttt{D3bpo4}, a measure for intersection density determined by the number of pedestrian-oriented intersections having four or more legs per square mile. The data to inform this input can be sourced from the EPA's \href{https://www.epa.gov/smartgrowth/smart-location-database-technical-documentation-and-user-guide}{Smart Location Database}.

Here is a snapshot of the file:

\begin{tabular}{l|c|c}
\hline
Geo & Year & D3bpo4\\
\hline
D410290014002 & 2010 & 0.2618757\\
\hline
D410290013012 & 2010 & 0.4830901\\
\hline
D410290014001 & 2010 & 1.8038130\\
\hline
D410290014003 & 2010 & 18.9766301\\
\hline
D410290013021 & 2010 & 0.1013039\\
\hline
\end{tabular}

\hypertarget{internal-module-inputs-6}{%
\subsubsection*{Internal Module Inputs}\label{internal-module-inputs-6}}
\addcontentsline{toc}{subsubsection}{Internal Module Inputs}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1724}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.3362}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1207}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.3707}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Package
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Module
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Outputs
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule()
\endhead
VELandUse & \protect\hyperlink{verspm-predicthousing}{PredictHousing} & \textbf{Pop} & Population residing in zone \\
VELandUse & \protect\hyperlink{verspm-predicthousing}{PredictHousing} & \textbf{NumHh} & Number of households in zone \\
VELandUse & \protect\hyperlink{verspm-predicthousing}{PredictHousing} & \textbf{NumWkr} & Number of workers in zone \\
VELandUse & \protect\hyperlink{verspm-locateemployment}{LocateEmployment} & \textbf{TotEmp} & Total number of jobs in zone \\
VELandUse & \protect\hyperlink{verspm-locateemployment}{LocateEmployment} & \textbf{RetEmp} & Number of jobs in retail sector in zone \\
VELandUse & \protect\hyperlink{verspm-locateemployment}{LocateEmployment} & \textbf{SvcEmp} & Number of jobs in service sector in zone \\
\bottomrule()
\end{longtable}

\hypertarget{module-outputs-7}{%
\subsubsection*{Module Outputs}\label{module-outputs-7}}
\addcontentsline{toc}{subsubsection}{Module Outputs}

\begin{itemize}
\tightlist
\item
  \textbf{D1B}: Gross population density (people/acre) on unprotected (i.e.~developable) land in zone
\item
  \textbf{D1C}: Gross employment density (jobs/acre) on unprotected land land in zone
\item
  \textbf{D1D}: Gross activity density (employment + households) on unprotected land in zone
\item
  \textbf{D2A\_JPHH}: Ratio of jobs to households in zone
\item
  \textbf{D2A\_WRKEMP}: Ratio of workers to jobs in zone
\item
  \textbf{D2A\_EPHHM}: Employment and household entropy measure for zone considering numbers of households, retail jobs, service jobs, and other jobs
\item
  \textbf{D5}: Destination accessibility of zone calculated as harmonic mean of jobs within two (2) miles and population within five (5) miles
\end{itemize}

For more information see \href{https://github.com/visioneval/VisionEval/blob/master/sources/modules/VELandUse/inst/module_docs/Calculate4DMeasures.md}{here}

\hypertarget{verspm-calculateurbanmixmeasure}{%
\subsection{CalculateUrbanMixMeasure}\label{verspm-calculateurbanmixmeasure}}

This module calculates an urban mixed-use measure based on the 2001 National Household Travel Survey (NHTS) measure of the tract level urban/rural indicator. This measure, developed by Claritas, uses the density of the tract and surrounding tracts to identify the urban/rural context of the tract. The categories include \texttt{urban}, \texttt{suburban}, \texttt{second\ city}, \texttt{town} and \texttt{rural}. Mapping of example metropolitan areas shows that places identified as \texttt{urban} correspond to central city and inner neighborhoods characterized by mixed use, higher levels of urban accessibility, and higher levels of walk/bike/transit accessibility.

\hypertarget{user-input-files-8}{%
\subsubsection*{User Input Files}\label{user-input-files-8}}
\addcontentsline{toc}{subsubsection}{User Input Files}

\hypertarget{household-neighborhood-bzone_urban-mixed-use_prop.csv}{%
\paragraph*{Household Neighborhood (bzone\_urban-mixed-use\_prop.csv)}\label{household-neighborhood-bzone_urban-mixed-use_prop.csv}}
\addcontentsline{toc}{paragraph}{Household Neighborhood (bzone\_urban-mixed-use\_prop.csv)}

This file contains the target proportion of households located in mixed-used neighborhoods in each zone.

\begin{itemize}
\tightlist
\item
  \textbf{MixUseProp}: Target for proportion of households located in mixed-use neighborhoods in zone (or \texttt{NA} if no target)
\end{itemize}

Here is a snapshot of the file:

\begin{tabular}{l|c|c}
\hline
Geo & Year & MixUseProp\\
\hline
D410290014002 & 2010 & 0.1\\
\hline
D410290013012 & 2010 & NA\\
\hline
D410290014001 & 2010 & NA\\
\hline
D410290014003 & 2010 & NA\\
\hline
D410290013021 & 2010 & NA\\
\hline
\end{tabular}

\hypertarget{internal-module-inputs-7}{%
\subsubsection*{Internal Module Inputs}\label{internal-module-inputs-7}}
\addcontentsline{toc}{subsubsection}{Internal Module Inputs}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1724}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.3362}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1207}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.3707}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Package
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Module
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Outputs
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule()
\endhead
VESimHouseholds & \protect\hyperlink{verspm-createhouseholds}{CreateHouseholds} & \textbf{HhId} & Household id \\
VELandUse & \protect\hyperlink{verspm-predicthousing}{PredictHousing} & \textbf{HouseType} & Type of dwelling unit of the household \\
VELandUse & \protect\hyperlink{verspm-predicthousing}{PredictHousing} & \textbf{NumHh} & Number of households in zone \\
VELandUse & \protect\hyperlink{verspm-assignloctypes}{AssignLocTypes} & \textbf{UrbanPop} & Urbanized area population \\
VELandUse & \protect\hyperlink{verspm-assignloctypes}{AssignLocTypes} & \textbf{RuralPop} & Rural (i.e.~non-urbanized area) population \\
\bottomrule()
\end{longtable}

\hypertarget{module-outputs-8}{%
\subsubsection*{Module Outputs}\label{module-outputs-8}}
\addcontentsline{toc}{subsubsection}{Module Outputs}

\begin{itemize}
\tightlist
\item
  \textbf{IsUrbanMixNbrhd}: Flag identifying whether household is (\texttt{1}) or is not (\texttt{0}) in an urban, mixed-use neighborhood
\end{itemize}

For more information see \href{https://github.com/visioneval/VisionEval/blob/master/sources/modules/VELandUse/inst/module_docs/CalculateUrbanMixMeasure.md}{here}

\hypertarget{verspm-assignparkingrestrictions}{%
\subsection{AssignParkingRestrictions}\label{verspm-assignparkingrestrictions}}

This module identifies parking restrictions and prices affecting households at their residences, workplaces, and other places they are likely to visit in the urban area. The parking restriction/cost information is used by other modules in calculating the cost of vehicle ownership and the cost of vehicle use.

\hypertarget{user-input-files-9}{%
\subsubsection*{User Input Files}\label{user-input-files-9}}
\addcontentsline{toc}{subsubsection}{User Input Files}

\hypertarget{parking-availability-bzone_parking.csv}{%
\paragraph*{Parking Availability (bzone\_parking.csv)}\label{parking-availability-bzone_parking.csv}}
\addcontentsline{toc}{paragraph}{Parking Availability (bzone\_parking.csv)}

This file contains the parking information by \texttt{Bzone} for each of the base and future years. Users should use available local data on parking availability, costs, and program participation to develop this input.

\begin{itemize}
\tightlist
\item
  \textbf{PkgSpacesPerSFDU}: Average number of free parking spaces available to residents of single-family dwelling units
\item
  \textbf{PkgSpacesPerMFDU}: Average number of free parking spaces available to residents of multifamily dwelling units
\item
  \textbf{PkgSpacesPerGQ}: Average number of free parking spaces available to group quarters residents
\item
  \textbf{PropWkrPay}: Proportion of workers who pay for parking
\item
  \textbf{PropCashOut}: Proportions of workers paying for parking in a cash-out-buy-back program
\item
  \textbf{PkgCost}: Average daily cost for long-term parking (e.g.~paid on monthly basis)
\end{itemize}

Here is a snapshot of the file:

\begin{tabular}{l|c|c|c|c|c|c|c}
\hline
Geo & Year & PkgSpacesPerSFDU & PkgSpacesPerMFDU & PkgSpacesPerGQ & PropWkrPay & PropCashOut & PkgCost.2010\\
\hline
D410290014002 & 2010 & 3 & 1.5 & 0 & 0 & 0 & 0\\
\hline
D410290013012 & 2010 & 4 & 4.0 & 0 & 0 & 0 & 0\\
\hline
D410290014001 & 2010 & 4 & 4.0 & 0 & 0 & 0 & 0\\
\hline
D410290014003 & 2010 & 4 & 4.0 & 0 & 0 & 0 & 0\\
\hline
D410290013021 & 2010 & 4 & 4.0 & 0 & 0 & 0 & 0\\
\hline
\end{tabular}

\hypertarget{internal-module-inputs-8}{%
\subsubsection*{Internal Module Inputs}\label{internal-module-inputs-8}}
\addcontentsline{toc}{subsubsection}{Internal Module Inputs}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1724}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.3362}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1207}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.3707}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Package
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Module
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Outputs
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule()
\endhead
VELandUse & \protect\hyperlink{verspm-predicthousing}{PredictHousing} & \textbf{NumHh} & Number of households in zone \\
VELandUse & \protect\hyperlink{verspm-predicthousing}{PredictHousing} & \textbf{HouseType} & Type of dwelling unit of the household \\
VELandUse & \protect\hyperlink{verspm-locateemployment}{LocateEmployment} & \textbf{RetEmp} & Number of jobs in retail sector in zone \\
VELandUse & \protect\hyperlink{verspm-locateemployment}{LocateEmployment} & \textbf{SvcEmp} & Number of jobs in service sector in zone \\
\bottomrule()
\end{longtable}

\hypertarget{module-outputs-9}{%
\subsubsection*{Module Outputs}\label{module-outputs-9}}
\addcontentsline{toc}{subsubsection}{Module Outputs}

\begin{itemize}
\tightlist
\item
  \textbf{FreeParkingSpaces}: Number of free parking spaces available to the household
\item
  \textbf{ParkingUnitCost}: Daily cost for long-term parking (e.g., parking paid for on a monthly basis)
\item
  \textbf{OtherParkingCost}: Daily cost for parking at shopping locations or other locations of paid parking not including work
\item
  \textbf{PaysForParking}: Does worker pay for parking: \texttt{1} = yes, \texttt{0} = no
\item
  \textbf{IsCashOut}: Is worker part of a cash-out-buy-back program: \texttt{1} = yes, \texttt{0} = no
\item
  \textbf{ParkingCost}: Daily cost for long-term parking (e.g., parking paid for on a monthly basis)
\end{itemize}

For more information see \href{https://github.com/visioneval/VisionEval/blob/master/sources/modules/VELandUse/inst/module_docs/AssignParkingRestrictions.md}{here}

\hypertarget{verspm-assigndemandmanagement}{%
\subsection{AssignDemandManagement}\label{verspm-assigndemandmanagement}}

This module assigns demand management program participation to households and to workers. Households are assigned to individualized marketing program participation. Workers are assigned to employee commute options participation. The module computes the net proportional reduction in household daily VMT (\texttt{DVMT}) based on the participation in travel demand management programs.

\hypertarget{user-input-files-10}{%
\subsubsection*{User Input Files}\label{user-input-files-10}}
\addcontentsline{toc}{subsubsection}{User Input Files}

\hypertarget{demand-management-bzone_travel_demand_mgt.csv}{%
\paragraph*{Demand Management (bzone\_travel\_demand\_mgt.csv)}\label{demand-management-bzone_travel_demand_mgt.csv}}
\addcontentsline{toc}{paragraph}{Demand Management (bzone\_travel\_demand\_mgt.csv)}

This file contains the information about workers and households participating in demand management programs. Users should use available local data on travel demand management programs to develop this input.
* \textbf{EcoProp}: Proportion of workers working in \texttt{Bzone} who participate in strong employee commute options program (can also be used to approximate the impacts of teleworking)
* \textbf{ImpProp}: Proportion of households residing in \texttt{Bzone} who participate in strong individualized marketing program

Here is a snapshot of the file:

\begin{tabular}{l|c|c|c}
\hline
Geo & Year & EcoProp & ImpProp\\
\hline
D410290014002 & 2010 & 0.0 & 0.0\\
\hline
D410290013012 & 2010 & 0.2 & 0.4\\
\hline
D410290014001 & 2010 & 0.2 & 0.4\\
\hline
D410290014003 & 2010 & 0.0 & 0.0\\
\hline
D410290013021 & 2010 & 0.0 & 0.0\\
\hline
\end{tabular}

\hypertarget{internal-module-inputs-9}{%
\subsubsection*{Internal Module Inputs}\label{internal-module-inputs-9}}
\addcontentsline{toc}{subsubsection}{Internal Module Inputs}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1724}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.3362}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1207}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.3707}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Package
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Module
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Outputs
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule()
\endhead
VESimHouseholds & \protect\hyperlink{verspm-createhouseholds}{CreateHouseholds} & \textbf{HhId} & Household id \\
VESimHouseholds & \protect\hyperlink{verspm-createhouseholds}{CreateHouseholds} & \textbf{HHSize} & Number of persons in the household \\
VESimHouseholds & \protect\hyperlink{verspm-predictworkers}{PredictWorkers} & \textbf{Workers} & Total workers in the household \\
\bottomrule()
\end{longtable}

\hypertarget{module-outputs-10}{%
\subsubsection*{Module Outputs}\label{module-outputs-10}}
\addcontentsline{toc}{subsubsection}{Module Outputs}

\begin{itemize}
\tightlist
\item
  \textbf{IsIMP}: Identifies whether household is participant in travel demand management individualized marketing program (IMP): \texttt{1} = yes, \texttt{0} = no
\item
  \textbf{PropTdmDvmtReduction}: Proportional reduction in household DVMT due to participation in travel demand management programs
\item
  \textbf{IsECO}: Identifies whether worker is a participant in travel demand management employee commute options program: \texttt{1} = yes, \texttt{0} = no
\end{itemize}

For more information see \href{https://github.com/visioneval/VisionEval/blob/master/sources/modules/VELandUse/inst/module_docs/AssignDemandManagement.md}{here}

\hypertarget{verspm-assigncarsvcavailability}{%
\subsection{AssignCarSvcAvailability}\label{verspm-assigncarsvcavailability}}

This module reads in and assigns `car service' availability in \texttt{Bzone}s. Car services include taxis, car sharing services (e.g.~Car-To-Go, Zipcar), and future automated taxi services. A high level of car service is increases household car availability -- similar to owning a car. Low levels of car service does not have competitive access time and therefore does not increase household car availability.

\hypertarget{user-input-files-11}{%
\subsubsection*{User Input Files}\label{user-input-files-11}}
\addcontentsline{toc}{subsubsection}{User Input Files}

\hypertarget{car-service-availability-bzone_carsvc_availability.csv}{%
\paragraph*{Car Service Availability (bzone\_carsvc\_availability.csv)}\label{car-service-availability-bzone_carsvc_availability.csv}}
\addcontentsline{toc}{paragraph}{Car Service Availability (bzone\_carsvc\_availability.csv)}

This file contains the information about level of car service availability and contains a value of either \texttt{Low} or \texttt{High} for \texttt{Bzones}. \texttt{High} means car service access is competitive with household owned car and will impact household vehicle ownership; \texttt{Low} is not competitive and will not impact household vehicle ownership.

Here is a snapshot of the file:

\begin{tabular}{l|c|c}
\hline
Geo & Year & CarSvcLevel\\
\hline
D410290014002 & 2010 & Low\\
\hline
D410290013012 & 2010 & Low\\
\hline
D410290014001 & 2010 & Low\\
\hline
D410290014003 & 2010 & Low\\
\hline
D410290013021 & 2010 & Low\\
\hline
\end{tabular}

\hypertarget{internal-module-inputs-10}{%
\subsubsection*{Internal Module Inputs}\label{internal-module-inputs-10}}
\addcontentsline{toc}{subsubsection}{Internal Module Inputs}

This module does not have any internal module inputs

\hypertarget{module-outputs-11}{%
\subsubsection*{Module Outputs}\label{module-outputs-11}}
\addcontentsline{toc}{subsubsection}{Module Outputs}

\begin{itemize}
\tightlist
\item
  \textbf{CarSvcLevel}: Level of car service availability for household. \texttt{High} means access is competitive with household owned car; \texttt{Low} is not competitive.
\end{itemize}

For more information see \href{https://github.com/visioneval/VisionEval/blob/master/sources/modules/VELandUse/inst/module_docs/AssignCarSvcAvailability.md}{here}

\hypertarget{verspm-assigntransitservice}{%
\subsection{AssignTransitService}\label{verspm-assigntransitservice}}

This module assigns transit service level to the metropolitan area (\texttt{Marea}) and neighborhoods (\texttt{Bzones}). Annual revenue-miles (i.e.~transit miles in revenue service) by transit mode type are read from an input file. The following eight modes are recognized:

\begin{itemize}
\tightlist
\item
  \texttt{DR} = Demand-responsive
\item
  \texttt{VP} = Vanpool and similar
\item
  \texttt{MB} = Standard motor bus
\item
  \texttt{RB} = Bus rapid transit and commuter bus
\item
  \texttt{MG} = Monorail/automated guideway
\item
  \texttt{SR} = Streetcar/trolley bus/inclined plain
\item
  \texttt{HR} = Heavy Rail/Light Rail
\item
  \texttt{CR} = Commuter Rail/Hybrid Rail/Cable Car/Aerial Tramway
\end{itemize}

Revenue miles are converted to bus (i.e., \texttt{MB}) equivalents using factors derived from urbanized area data from the National Transit Database (NTD). Bus-equivalent revenue miles are used in models which predict vehicle ownership and household DVMT.

Revenue miles by mode type are also translated (using NTD data) into vehicle miles by three vehicle types: van, bus, and rail. Miles by vehicle type are used to calculate public transit energy consumption and emissions.

\hypertarget{user-input-files-12}{%
\subsubsection*{User Input Files}\label{user-input-files-12}}
\addcontentsline{toc}{subsubsection}{User Input Files}

\hypertarget{transit-service-for-marea-marea_transit_service.csv}{%
\paragraph*{Transit Service for Marea (marea\_transit\_service.csv)}\label{transit-service-for-marea-marea_transit_service.csv}}
\addcontentsline{toc}{paragraph}{Transit Service for Marea (marea\_transit\_service.csv)}

This file contains annual revenue-miles for different transit modes for metropolitan area. Data to develop this input can be sourced from the Federal Transit Administration NTD.

\begin{itemize}
\tightlist
\item
  \textbf{DRRevMi}: Annual revenue-miles of demand-responsive public transit service
\item
  \textbf{VPRevMi}: Annual revenue-miles of van-pool and similar public transit service
\item
  \textbf{MBRevMi}: Annual revenue-miles of standard bus public transit service
\item
  \textbf{RBRevMi}: Annual revenue-miles of rapid-bus and commuter bus public transit service
\item
  \textbf{MGRevMi}: Annual revenue-miles of monorail and automated guideway public transit service
\item
  \textbf{SRRevMi}: Annual revenue-miles of streetcar and trolleybus public transit service
\item
  \textbf{HRRevMi}: Annual revenue-miles of light rail and heavy rail public transit service
\item
  \textbf{CRRevMi}: Annual revenue-miles of commuter rail, hybrid rail, cable car, and aerial tramway public transit service
\end{itemize}

Here is a snapshot of the file:

\begin{tabular}{l|c|c|c|c|c|c|c|c|c}
\hline
Geo & Year & DRRevMi & VPRevMi & MBRevMi & RBRevMi & MGRevMi & SRRevMi & HRRevMi & CRRevMi\\
\hline
RVMPO & 2010 & 382639 & 0 & 607922 & 0 & 0 & 0 & 0 & 0\\
\hline
RVMPO & 2038 & 2381995 & 0 & 3580237 & 0 & 0 & 0 & 0 & 0\\
\hline
\end{tabular}

\hypertarget{transit-service-for-bzone-bzone_transit_service.csv}{%
\paragraph*{Transit service for Bzone (bzone\_transit\_service.csv)}\label{transit-service-for-bzone-bzone_transit_service.csv}}
\addcontentsline{toc}{paragraph}{Transit service for Bzone (bzone\_transit\_service.csv)}

This file supplies the data on relative public transit accessibility at the \texttt{Bzone} level. The data to inform this input can be sourced from the EPA's \href{https://www.epa.gov/smartgrowth/smart-location-database-technical-documentation-and-user-guide}{Smart Location Database}.

\begin{itemize}
\tightlist
\item
  \textbf{D4c}: Aggregate frequency of transit service within 0.25 miles of block group boundary per hour during evening peak period (Ref: EPA 2010 Smart Location Database)
\end{itemize}

Here is a snapshot of the file:

\begin{tabular}{l|c|c}
\hline
Geo & Year & D4c\\
\hline
D410290014002 & 2010 & 0\\
\hline
D410290013012 & 2010 & 0\\
\hline
D410290014001 & 2010 & 0\\
\hline
D410290014003 & 2010 & 0\\
\hline
D410290013021 & 2010 & 0\\
\hline
\end{tabular}

\hypertarget{internal-module-inputs-11}{%
\subsubsection*{Internal Module Inputs}\label{internal-module-inputs-11}}
\addcontentsline{toc}{subsubsection}{Internal Module Inputs}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1724}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.3362}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1207}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.3707}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Package
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Module
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Outputs
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule()
\endhead
VELandUse & \protect\hyperlink{verspm-assignloctypes}{AssignLocTypes} & \textbf{UrbanPop} & Urbanized area population \\
\bottomrule()
\end{longtable}

\hypertarget{module-outputs-12}{%
\subsubsection*{Module Outputs}\label{module-outputs-12}}
\addcontentsline{toc}{subsubsection}{Module Outputs}

\begin{itemize}
\tightlist
\item
  \textbf{TranRevMiPC}: Ratio of annual bus-equivalent revenue-miles (i.e., revenue-miles at the same productivity - passenger miles per revenue mile - as standard bus) to urbanized area population
\item
  \textbf{VanDvmt}: Total daily miles traveled by vans of various sizes to provide demand responsive, vanpool, and similar services.
\item
  \textbf{BusDvmt}: Total daily miles traveled by buses of various sizes to provide bus service of various types.
\item
  \textbf{RailDvmt}: Total daily miles traveled by light rail, heavy rail, commuter rail, and similar types of vehicles.
\end{itemize}

For more information see \href{https://github.com/gregorbj/VisionEval/blob/ve_rspm_state/sources/modules/VETransportSupply/inst/module_docs/AssignTransitService.md}{here}

\hypertarget{verspm-assignroadmiles}{%
\subsection{AssignRoadMiles}\label{verspm-assignroadmiles}}

This module assigns freeway and arterial lane-miles to metropolitan areas (\texttt{Marea}) and calculates freeway lane-miles per capita.

\hypertarget{user-input-files-13}{%
\subsubsection*{User Input Files}\label{user-input-files-13}}
\addcontentsline{toc}{subsubsection}{User Input Files}

\hypertarget{lane-miles-marea_lane_miles.csv}{%
\paragraph*{Lane-Miles (marea\_lane\_miles.csv)}\label{lane-miles-marea_lane_miles.csv}}
\addcontentsline{toc}{paragraph}{Lane-Miles (marea\_lane\_miles.csv)}

This file contains inputs on the numbers of freeway lane-miles and arterial lane-miles by \texttt{Marea} and year. The data to develop this input can be sourced from the FHWA Highway Performance Monitoring System (HPMS), using either the HPMS geospatial data or Highway Statistics, or the State DOT.

\begin{itemize}
\tightlist
\item
  \textbf{FwyLaneMi}: Lane-miles of roadways functionally classified as freeways or expressways in the urbanized portion of the metropolitan area
\item
  \textbf{ArtLaneMi}: Lane-miles of roadways functionally classified as arterials (but not freeways or expressways) in the urbanized portion of the metropolitan area
\end{itemize}

Here is a snapshot of the file:

\begin{tabular}{l|c|c|c}
\hline
Geo & Year & FwyLaneMi & ArtLaneMi\\
\hline
RVMPO & 2010 & 91 & 356\\
\hline
RVMPO & 2038 & 97 & 371\\
\hline
\end{tabular}

\hypertarget{internal-module-inputs-12}{%
\subsubsection*{Internal Module Inputs}\label{internal-module-inputs-12}}
\addcontentsline{toc}{subsubsection}{Internal Module Inputs}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1724}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.3362}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1207}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.3707}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Package
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Module
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Outputs
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule()
\endhead
VELandUse & \protect\hyperlink{verspm-assignloctypes}{AssignLocTypes} & \textbf{UrbanPop} & Urbanized area population \\
\bottomrule()
\end{longtable}

\hypertarget{module-outputs-13}{%
\subsubsection*{Module Outputs}\label{module-outputs-13}}
\addcontentsline{toc}{subsubsection}{Module Outputs}

\begin{itemize}
\tightlist
\item
  \textbf{FwyLaneMiPC}: Ratio of urbanized area freeway and expressway lane-miles to urbanized area population
\end{itemize}

For more information see \href{https://github.com/gregorbj/VisionEval/blob/ve_rspm_state/sources/modules/VETransportSupply/inst/module_docs/AssignRoadMiles.md}{here}

\hypertarget{verspm-assigndrivers}{%
\subsection{AssignDrivers}\label{verspm-assigndrivers}}

This module assigns drivers by age group to each household as a function of the numbers of persons and workers by age group, the household income, land use characteristics, and public transit availability.

\hypertarget{user-input-files-14}{%
\subsubsection*{User Input Files}\label{user-input-files-14}}
\addcontentsline{toc}{subsubsection}{User Input Files}

\hypertarget{adjustment-for-household-drivers-region_hh_driver_adjust_prop.csv}{%
\paragraph*{Adjustment for Household Drivers (region\_hh\_driver\_adjust\_prop.csv)}\label{adjustment-for-household-drivers-region_hh_driver_adjust_prop.csv}}
\addcontentsline{toc}{paragraph}{Adjustment for Household Drivers (region\_hh\_driver\_adjust\_prop.csv)}

This file is optional and can be used to adjust the estimate of household drivers by age cohort. The file specifies the relative driver licensing rate relative to the model estimation data year in order to account for observed or projected changes in licensing rates.

\begin{itemize}
\tightlist
\item
  \textbf{Drv15to19AdjProp}: Target proportion of unadjusted model number of drivers 15 to 19 years old (\texttt{1} = no adjustment)
\item
  \textbf{Drv20to29AdjProp}: Target proportion of unadjusted model number of drivers 20 to 29 years old (\texttt{1} = no adjustment)
\item
  \textbf{Drv30to54AdjProp}: Target proportion of unadjusted model number of drivers 30 to 54 years old (\texttt{1} = no adjustment)
\item
  \textbf{Drv55to64AdjProp}: Target proportion of unadjusted model number of drivers 55 to 64 years old (\texttt{1} = no adjustment)
\item
  \textbf{Drv65PlusAdjProp}: Target proportion of unadjusted model number of drivers 65 or older (\texttt{1} = no adjustment)
\end{itemize}

Here is a snapshot of the file:

\begin{tabular}{l|c|c|c|c|c}
\hline
Year & DrvPerPrsn15to19 & Drv20to29AdjProp & Drv30to54AdjProp & Drv55to64AdjProp & Drv65PlusAdjProp\\
\hline
2010 & 0.8174609 & 0.9466447 & 0.9466447 & 0.9900000 & 0.9349951\\
\hline
2038 & 0.9091840 & 0.9091840 & 0.9091840 & 0.9508236 & 0.8979954\\
\hline
\end{tabular}

\hypertarget{internal-module-inputs-13}{%
\subsubsection*{Internal Module Inputs}\label{internal-module-inputs-13}}
\addcontentsline{toc}{subsubsection}{Internal Module Inputs}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1724}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.3362}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1207}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.3707}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Package
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Module
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Outputs
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule()
\endhead
VETransportSupply & \protect\hyperlink{verspm-assigntransitservice}{AssignTransitService} & \textbf{TranRevMiPC} & Ratio of annual bus-equivalent revenue-miles (i.e.~revenue-miles at the same productivity - passenger miles per revenue mile - as standard bus) to urbanized area population \\
VELandUse & \protect\hyperlink{verspm-calculate4dmeasures}{Calculate4DMeasures} & \textbf{D1B} & Gross population density (people/acre) on unprotected (i.e.~developable) land in zone \\
VESimHouseholds & \protect\hyperlink{verspm-createhouseholds}{CreateHouseholds} & \textbf{HhId} & Household id \\
VESimHouseholds & \protect\hyperlink{verspm-createhouseholds}{CreateHouseholds} & \textbf{Age15to19} & Persons in 15 to 19 year old age group \\
VESimHouseholds & \protect\hyperlink{verspm-createhouseholds}{CreateHouseholds} & \textbf{Age20to29} & Persons in 20 to 29 year old age group \\
VESimHouseholds & \protect\hyperlink{verspm-createhouseholds}{CreateHouseholds} & \textbf{Age30to54} & Persons in 30 to 54 year old age group \\
VESimHouseholds & \protect\hyperlink{verspm-createhouseholds}{CreateHouseholds} & \textbf{Age55to64} & Persons in 55 to 64 year old age group \\
VESimHouseholds & \protect\hyperlink{verspm-createhouseholds}{CreateHouseholds} & \textbf{Age65Plus} & Persons in 65 or older age group \\
VESimHouseholds & \protect\hyperlink{verspm-predictincome}{PredictIncome} & \textbf{Income} & Total annual income of household \\
VESimHouseholds & \protect\hyperlink{verspm-createhouseholds}{CreateHouseholds} & \textbf{HHSize} & Number of persons in the household \\
VELandUse & \protect\hyperlink{verspm-calculateurbanmixmeasure}{CalculateUrbanMixMeasure} & \textbf{IsUrbanMixNbrhd} & Flag identifying whether household is (\texttt{1}) or is not (\texttt{0}) in urban mixed-use neighborhood \\
VELandUse & \protect\hyperlink{verspm-assignloctypes}{AssignLocTypes} & \textbf{LocType} & Location type (Urban, Town, Rural) of the place where the household resides \\
\bottomrule()
\end{longtable}

\hypertarget{module-outputs-14}{%
\subsubsection*{Module Outputs}\label{module-outputs-14}}
\addcontentsline{toc}{subsubsection}{Module Outputs}

\begin{itemize}
\tightlist
\item
  \textbf{Drv15to19}: Number of drivers 15 to 19 years old
\item
  \textbf{Drv20to29}: Number of drivers 20 to 29 years old
\item
  \textbf{Drv30to54}: Number of drivers 30 to 54 years old
\item
  \textbf{Drv55to64}: Number of drivers 55 to 64 years old
\item
  \textbf{Drv65Plus}: Number of drivers 65 or older
\item
  \textbf{Drivers}: Number of drivers in household
\item
  \textbf{DrvAgePersons}: Number of people 15 year old or older in the household
\end{itemize}

For more information see \href{https://github.com/visioneval/VisionEval/blob/master/sources/modules/VEHouseholdVehicles/inst/module_docs/AssignDrivers.md}{here}

\hypertarget{verspm-assignvehicleownership}{%
\subsection{AssignVehicleOwnership}\label{verspm-assignvehicleownership}}

This module determines the number of vehicles owned or leased by each household as a function of household characteristics, land use characteristics, and transportation system characteristics.

\hypertarget{user-input-files-15}{%
\subsubsection*{User Input Files}\label{user-input-files-15}}
\addcontentsline{toc}{subsubsection}{User Input Files}

This module has no user input requirements.

\hypertarget{internal-module-inputs-14}{%
\subsubsection*{Internal Module Inputs}\label{internal-module-inputs-14}}
\addcontentsline{toc}{subsubsection}{Internal Module Inputs}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1724}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.3362}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1207}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.3707}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Package
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Module
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Outputs
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule()
\endhead
VETransportSupply & \protect\hyperlink{verspm-assigntransitservice}{AssignTransitService} & \textbf{TranRevMiPC} & Ratio of annual bus-equivalent revenue-miles to urbanized area population \\
VELandUse & \protect\hyperlink{verspm-calculate4dmeasures}{Calculate4DMeasures} & \textbf{D1B} & Gross population density (people/acre) on unprotected (i.e.~developable) land in zone \\
VESimHouseholds & \protect\hyperlink{verspm-predictworkers}{PredictWorkers} & \textbf{Workers} & Total workers in the household \\
VEHouseholdVehicles & \protect\hyperlink{verspm-assigndrivers}{AssignDrivers} & \textbf{Drivers} & Number of drivers in household \\
VESimHouseholds & \protect\hyperlink{verspm-createhouseholds}{CreateHouseholds} & \textbf{Age65Plus} & Persons in 65 or older age group \\
VELandUse & \protect\hyperlink{verspm-predicthousing}{PredictHousing} & \textbf{HouseType} & Type of dwelling unit of the household \\
VESimHouseholds & \protect\hyperlink{verspm-predictincome}{PredictIncome} & \textbf{Income} & Total annual income of household \\
VESimHouseholds & \protect\hyperlink{verspm-createhouseholds}{CreateHouseholds} & \textbf{HHSize} & Number of persons in the household \\
VELandUse & \protect\hyperlink{verspm-calculateurbanmixmeasure}{CalculateUrbanMixMeasure} & \textbf{IsUrbanMixNbrhd} & Flag identifying whether household is (\texttt{1}) or is not (\texttt{0}) in urban mixed-use neighborhood \\
VELandUse & \protect\hyperlink{verspm-assignloctypes}{AssignLocTypes} & \textbf{LocType} & Location type (Urban, Town, Rural) of the place where the household resides \\
\bottomrule()
\end{longtable}

\hypertarget{module-outputs-15}{%
\subsubsection*{Module Outputs}\label{module-outputs-15}}
\addcontentsline{toc}{subsubsection}{Module Outputs}

\begin{itemize}
\tightlist
\item
  \textbf{Vehicles}: Number of automobiles and light trucks owned or leased by the household including high level car service vehicles available to driving-age persons
\end{itemize}

For more information see \href{https://github.com/gregorbj/VisionEval/blob/develop/sources/modules/VEHouseholdVehicles/inst/module_docs/AssignVehicleOwnership.md}{here}

\hypertarget{verspm-assignvehicletype}{%
\subsection{AssignVehicleType}\label{verspm-assignvehicletype}}

This module identifies how many household vehicles are light trucks and how many are automobiles. Light trucks include pickup trucks, sport utility vehicles, vans, and any other vehicle not classified as a passenger car. Automobiles are vehicles classified as passenger cars.

\hypertarget{user-input-files-16}{%
\subsubsection*{User Input Files}\label{user-input-files-16}}
\addcontentsline{toc}{subsubsection}{User Input Files}

\hypertarget{light-truck-proportion-for-household-vehicles-azone_lttrk_prop.csv}{%
\paragraph*{Light Truck Proportion for Household Vehicles (azone\_lttrk\_prop.csv)}\label{light-truck-proportion-for-household-vehicles-azone_lttrk_prop.csv}}
\addcontentsline{toc}{paragraph}{Light Truck Proportion for Household Vehicles (azone\_lttrk\_prop.csv)}

This file specifies the light truck proportion of the vehicle fleet. The user can be developed from local registration data. Alternatively, if MOVES is available for the model region, this input can be calculated from the MOVES vehicle population data (SourceTypeYear). The vehicle types used in MOVES (SourceType) correspond with the two categories of passenger vehicles used in EERPAT: MOVES SourceType 21, Passenger Car, is equivalent to autos in EERPAT and MOVES Source Type 31, Passenger Truck, is equivalent to light trucks.

\begin{itemize}
\tightlist
\item
  \textbf{LtTrkProp}: Proportion of household vehicles that are light trucks (pickup, SUV, van).
\end{itemize}

Here is a snapshot of the file:

\begin{tabular}{l|c|c}
\hline
Geo & Year & LtTrkProp\\
\hline
RVMPO & 2010 & 0.45\\
\hline
RVMPO & 2038 & 0.34\\
\hline
\end{tabular}

\hypertarget{internal-module-inputs-15}{%
\subsubsection*{Internal Module Inputs}\label{internal-module-inputs-15}}
\addcontentsline{toc}{subsubsection}{Internal Module Inputs}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1724}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.3362}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1207}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.3707}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Package
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Module
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Outputs
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule()
\endhead
VELandUse & \protect\hyperlink{verspm-calculate4dmeasures}{Calculate4DMeasures} & \textbf{D1B} & Gross population density (people/acre) on unprotected (i.e.~developable) land in zone \\
VESimHouseholds & \protect\hyperlink{verspm-createhouseholds}{CreateHouseholds} & \textbf{HhId} & Household id \\
VESimHouseholds & \protect\hyperlink{verspm-createhouseholds}{CreateHouseholds} & \textbf{Age0to14} & Persons in 0 to 14 year old age group \\
VESimHouseholds & \protect\hyperlink{verspm-createhouseholds}{CreateHouseholds} & \textbf{Age15to19} & Persons in 15 to 19 year old age group \\
VEHouseholdVehicles & \protect\hyperlink{verspm-assigndrivers}{AssignDrivers} & \textbf{Drivers} & Number of drivers in household \\
VEHouseholdVehicles & \protect\hyperlink{verspm-assignvehicleownership}{AssignVehicleOwnership} & \textbf{Vehicles} & Number of automobiles and light trucks owned or leased by the household including high level car service vehicles available to driving-age persons \\
VELandUse & \protect\hyperlink{verspm-predicthousing}{PredictHousing} & \textbf{HouseType} & Type of dwelling unit of the household \\
VESimHouseholds & \protect\hyperlink{verspm-predictincome}{PredictIncome} & \textbf{Income} & Total annual income of household \\
VESimHouseholds & \protect\hyperlink{verspm-createhouseholds}{CreateHouseholds} & \textbf{HHSize} & Number of persons in the household \\
VELandUse & \protect\hyperlink{verspm-calculateurbanmixmeasure}{CalculateUrbanMixMeasure} & \textbf{IsUrbanMixNbrhd} & Flag identifying whether household is (\texttt{1}) or is not (\texttt{0}) in urban mixed-use neighborhood \\
\bottomrule()
\end{longtable}

\hypertarget{module-outputs-16}{%
\subsubsection*{Module Outputs}\label{module-outputs-16}}
\addcontentsline{toc}{subsubsection}{Module Outputs}

\begin{itemize}
\tightlist
\item
  \textbf{NumLtTrk}: Number of light trucks (pickup, sport-utility vehicle, and van) owned or leased by household
\item
  \textbf{NumAuto}: Number of automobiles (i.e., four-tire passenger vehicles that are not light trucks) owned or leased by household
\end{itemize}

For more information see \href{https://github.com/visioneval/VisionEval/blob/master/sources/modules/VEHouseholdVehicles/inst/module_docs/AssignVehicleType.md}{here}

\hypertarget{verspm-createvehicletable}{%
\subsection{CreateVehicleTable}\label{verspm-createvehicletable}}

This module creates a vehicle table and populates it with household ID and geography fields.

\hypertarget{user-input-files-17}{%
\subsubsection{User Input Files}\label{user-input-files-17}}

\hypertarget{car-service-characteristics-azone_carsvc_characteristics.csv}{%
\paragraph*{\texorpdfstring{Car Service Characteristics (\textbf{azone\_carsvc\_characteristics.csv})}{Car Service Characteristics (azone\_carsvc\_characteristics.csv)}}\label{car-service-characteristics-azone_carsvc_characteristics.csv}}
\addcontentsline{toc}{paragraph}{Car Service Characteristics (\textbf{azone\_carsvc\_characteristics.csv})}

This file specifies the different characteristics for high and low car service levels by \texttt{Azone}. Changing this input is \emph{optional} and using the default input values is standard practice.

\begin{itemize}
\tightlist
\item
  \textbf{HighCarSvcCost}: Average cost in dollars per mile for travel by high service level car service exclusive of the cost of fuel, road use taxes, and carbon taxes (and any other social costs charged to vehicle use)
\item
  \textbf{LowCarSvcCost}: Average cost in dollars per mile for travel by low service level car service exclusive of the cost of fuel, road use taxes, and carbon taxes (and any other social costs charged to vehicle use)
\item
  \textbf{AveCarSvcVehicleAge}: Average age of car service vehicles in years
\item
  \textbf{LtTrkCarSvcSubProp}: The proportion of light-truck owners who would substitute a less-costly car service option for owning their light truck
\item
  \textbf{AutoCarSvcSubProp}: The proportion of automobile owners who would substitute a less-costly car service option for owning their automobile
\end{itemize}

Here is a snapshot of the file:

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 12\tabcolsep) * \real{0.1000}}
  >{\centering\arraybackslash}p{(\columnwidth - 12\tabcolsep) * \real{0.1500}}
  >{\centering\arraybackslash}p{(\columnwidth - 12\tabcolsep) * \real{0.1500}}
  >{\centering\arraybackslash}p{(\columnwidth - 12\tabcolsep) * \real{0.1500}}
  >{\centering\arraybackslash}p{(\columnwidth - 12\tabcolsep) * \real{0.1500}}
  >{\centering\arraybackslash}p{(\columnwidth - 12\tabcolsep) * \real{0.1500}}
  >{\centering\arraybackslash}p{(\columnwidth - 12\tabcolsep) * \real{0.1500}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Geo
\end{minipage} & \begin{minipage}[b]{\linewidth}\centering
Year
\end{minipage} & \begin{minipage}[b]{\linewidth}\centering
HighCarSvcCost.2010
\end{minipage} & \begin{minipage}[b]{\linewidth}\centering
LowCarSvcCost.2010
\end{minipage} & \begin{minipage}[b]{\linewidth}\centering
AveCarSvcVehicleAge
\end{minipage} & \begin{minipage}[b]{\linewidth}\centering
LtTrkCarSvcSubProp
\end{minipage} & \begin{minipage}[b]{\linewidth}\centering
AutoCarSvcSubProp
\end{minipage} \\
\midrule()
\endhead
RVMPO & 2010 & 1 & 3 & 3 & 0.75 & 1 \\
RVMPO & 2038 & 1 & 3 & 3 & 0.75 & 1 \\
\bottomrule()
\end{longtable}

\hypertarget{internal-module-inputs-16}{%
\subsubsection*{Internal Module Inputs}\label{internal-module-inputs-16}}
\addcontentsline{toc}{subsubsection}{Internal Module Inputs}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1724}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.3362}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1207}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.3707}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Package
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Module
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Outputs
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule()
\endhead
VEHouseholdVehicles & \protect\hyperlink{verspm-assignvehicleownership}{AssignVehicleOwnership} & \textbf{Vehicles} & Number of automobiles and light trucks owned or leased by the household including high level car service vehicles available to driving-age persons \\
VEHouseholdVehicles & \protect\hyperlink{verspm-assigndrivers}{AssignDrivers} & \textbf{DrvAgePersons} & Number of people 15 year old or older in the household \\
VELandUse & \protect\hyperlink{verspm-assigncarsvcavailability}{AssignCarSvcAvailability} & \textbf{CarSvcLevel} & Level of car service availability for household. High means access is competitive with household owned car. Low is not competitive. \\
\bottomrule()
\end{longtable}

\hypertarget{module-outputs-17}{%
\subsubsection*{Module Outputs}\label{module-outputs-17}}
\addcontentsline{toc}{subsubsection}{Module Outputs}

\begin{itemize}
\tightlist
\item
  \textbf{VehId}: Unique vehicle ID
\item
  \textbf{VehicleAccess}: Identifier whether vehicle is owned by household (\texttt{Own}), if vehicle is low level car service (\texttt{LowCarSvc}), or if vehicle is high level car service (\texttt{HighCarSvc})
\end{itemize}

For more information see \href{https://github.com/gregorbj/VisionEval/blob/develop/sources/modules/VEHouseholdVehicles/inst/module_docs/CreateVehicleTable.md}{here}

\hypertarget{verspm-assignvehicleage}{%
\subsection{AssignVehicleAge}\label{verspm-assignvehicleage}}

This module assigns vehicle ages to each household vehicle. Vehicle age is assigned as a function of the vehicle type (auto or light truck), household income, and assumed mean vehicle age by vehicle type and \texttt{Azone}. Car service vehicles are assigned an age based on input assumptions with no distinction between vehicle type.

\hypertarget{user-input-files-18}{%
\subsubsection*{User Input Files}\label{user-input-files-18}}
\addcontentsline{toc}{subsubsection}{User Input Files}

\hypertarget{vehicles-mean-age-azone_hh_veh_mean_age.csv}{%
\paragraph*{Vehicles Mean Age (azone\_hh\_veh\_mean\_age.csv)}\label{vehicles-mean-age-azone_hh_veh_mean_age.csv}}
\addcontentsline{toc}{paragraph}{Vehicles Mean Age (azone\_hh\_veh\_mean\_age.csv)}

This file provides inputs for mean auto age and mean light truck age by \texttt{Azone}. The user can develop this file using State DMV data.

\begin{itemize}
\tightlist
\item
  \textbf{AutoMeanAge}: Mean age of automobiles owned or leased by households.
\item
  \textbf{LtTrkMeanAge}: Mean age of light trucks owned or leased by households.
\end{itemize}

Here is a snapshot of the file:

\begin{tabular}{l|c|c|c}
\hline
Geo & Year & AutoMeanAge & LtTrkMeanAge\\
\hline
RVMPO & 2010 & 10.8 & 10.5\\
\hline
RVMPO & 2038 & 12.0 & 12.0\\
\hline
\end{tabular}

\hypertarget{internal-module-inputs-17}{%
\subsubsection*{Internal Module Inputs}\label{internal-module-inputs-17}}
\addcontentsline{toc}{subsubsection}{Internal Module Inputs}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1389}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.2708}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.0972}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.4931}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Package
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Module
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Outputs
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule()
\endhead
VESimHouseholds & \protect\hyperlink{verspm-createhouseholds}{CreateHouseholds} & \textbf{HhId} & Household id \\
VEHouseholdVehicles & \protect\hyperlink{verspm-createvehicletable}{CreateVehicleTable} & \textbf{VehId} & Unique vehicle ID \\
VESimHouseholds & \protect\hyperlink{verspm-predictincome}{PredictIncome} & \textbf{Income} & Total annual income of household \\
VEHouseholdVehicles & \protect\hyperlink{verspm-assignvehicleownership}{AssignVehicleOwnership} & \textbf{Vehicles} & Number of automobiles and light trucks owned or leased by the household including high level car service vehicles available to driving-age persons \\
VEHouseholdVehicles & \protect\hyperlink{verspm-assignvehicletype}{AssignVehicleType} & \textbf{NumLtTrk} & Number of light trucks (pickup, sport-utility vehicle, and van) owned or leased by household \\
VEHouseholdVehicles & \protect\hyperlink{verspm-assignvehicletype}{AssignVehicleType} & \textbf{NumAuto} & Number of automobiles (i.e.~4-tire passenger vehicles that are not light trucks) owned or leased by household \\
VEHouseholdVehicles & \protect\hyperlink{verspm-createvehicletable}{CreateVehicleTable} & \textbf{VehicleAccess} & Identifier whether vehicle is owned by household (Own), if vehicle is low level car service (LowCarSvc), or if vehicle is high level car service (\texttt{HighCarSvc}) \\
\bottomrule()
\end{longtable}

\hypertarget{module-outputs-18}{%
\subsubsection*{Module Outputs}\label{module-outputs-18}}
\addcontentsline{toc}{subsubsection}{Module Outputs}

\begin{itemize}
\tightlist
\item
  \textbf{Type}: Vehicle body type: Auto = automobile, LtTrk = light trucks (i.e.~pickup, SUV, Van)
\item
  \textbf{Age}: Vehicle age in years
\end{itemize}

For more information see \href{https://github.com/visioneval/VisionEval/blob/master/sources/modules/VEHouseholdVehicles/inst/module_docs/AssignVehicleAge.md}{here}

\hypertarget{verspm-calculatevehicleowncost}{%
\subsection{CalculateVehicleOwnCost}\label{verspm-calculatevehicleowncost}}

This module calculates average vehicle ownership cost for each vehicle based on the vehicle type and age using data from the American Automobile Association (AAA). To this are added the cost of parking at the vehicle residence if free parking is not available for all household vehicles. The ownership cost is converted into an average ownership cost per mile by predicting the household DVMT, given the number of owned vehicles and splitting the miles equally among each vehicle.

\hypertarget{user-input-files-19}{%
\subsubsection*{User Input Files}\label{user-input-files-19}}
\addcontentsline{toc}{subsubsection}{User Input Files}

\hypertarget{vehicle-ownership-taxes-azone_hh_veh_own_taxes.csv}{%
\paragraph*{Vehicle Ownership Taxes (azone\_hh\_veh\_own\_taxes.csv)}\label{vehicle-ownership-taxes-azone_hh_veh_own_taxes.csv}}
\addcontentsline{toc}{paragraph}{Vehicle Ownership Taxes (azone\_hh\_veh\_own\_taxes.csv)}

This file provides inputs for flat fees/taxes (i.e.~annual cost per vehicle) and ad valorem taxes (i.e.~percentage of vehicle value paid in taxes).

\begin{itemize}
\tightlist
\item
  \textbf{VehOwnFlatRateFee}: Annual flat rate tax per vehicle in dollars
\item
  \textbf{VehOwnAdValoremTax}: Annual proportion of vehicle value paid in taxes
\end{itemize}

Here is a snapshot of the file:

\begin{tabular}{l|c|c|c}
\hline
Geo & Year & VehOwnFlatRateFee.2015 & VehOwnAdValoremTax\\
\hline
RVMPO & 2010 & 50 & 0.00\\
\hline
RVMPO & 2038 & 0 & 0.01\\
\hline
\end{tabular}

\hypertarget{proportion-of-pay-as-you-drive-payd-insurance-azone_payd_insurance_prop.csv}{%
\paragraph*{Proportion of Pay-as-you-drive (PAYD) Insurance (azone\_payd\_insurance\_prop.csv)}\label{proportion-of-pay-as-you-drive-payd-insurance-azone_payd_insurance_prop.csv}}
\addcontentsline{toc}{paragraph}{Proportion of Pay-as-you-drive (PAYD) Insurance (azone\_payd\_insurance\_prop.csv)}

This file provides inputs on the proportion of households having PAYD insurance.

\begin{itemize}
\tightlist
\item
  \textbf{PaydHhProp}: Proportion of households in the Azone who have pay-as-you-drive insurance for their vehicles
\end{itemize}

Here is a snapshot of the file:

\begin{tabular}{l|c|c}
\hline
Geo & Year & PaydHhProp\\
\hline
RVMPO & 2010 & 0.01\\
\hline
RVMPO & 2038 & 0.50\\
\hline
\end{tabular}

\hypertarget{internal-module-inputs-18}{%
\subsubsection*{Internal Module Inputs}\label{internal-module-inputs-18}}
\addcontentsline{toc}{subsubsection}{Internal Module Inputs}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1724}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.3362}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1207}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.3707}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Package
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Module
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Outputs
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule()
\endhead
VESimHouseholds & \protect\hyperlink{verspm-createhouseholds}{CreateHouseholds} & \textbf{HhId} & Household id \\
VEHouseholdVehicles & \protect\hyperlink{verspm-createvehicletable}{CreateVehicleTable} & \textbf{VehId} & Unique vehicle ID \\
VEHouseholdVehicles & \protect\hyperlink{verspm-createvehicletable}{CreateVehicleTable} & \textbf{VehicleAccess} & Identifier whether vehicle is owned by household (\texttt{Own}), if vehicle is low level car service (\texttt{LowCarSvc}), or if vehicle is high level car service (\texttt{HighCarSvc}) \\
VEHouseholdVehicles & \protect\hyperlink{verspm-assignvehicleage}{AssignVehicleAge} & \textbf{Type} & Vehicle body type: \texttt{Auto} = automobile, \texttt{LtTrk} = light trucks (i.e.~pickup, SUV, Van) \\
VEHouseholdVehicles & \protect\hyperlink{verspm-assignvehicleage}{AssignVehicleAge} & \textbf{Age} & Vehicle age in years \\
VELandUse & \protect\hyperlink{verspm-assignparkingrestrictions}{AssignParkingRestrictions} & \textbf{FreeParkingSpaces} & Number of free parking spaces available to the household \\
VELandUse & \protect\hyperlink{verspm-assignparkingrestrictions}{AssignParkingRestrictions} & \textbf{ParkingUnitCost} & Daily cost for long-term parking (e.g.~paid on monthly basis) \\
VEHouseholdVehicles & \protect\hyperlink{verspm-assigndrivers}{AssignDrivers} & \textbf{Drivers} & Number of drivers in household \\
VEHouseholdVehicles & \protect\hyperlink{verspm-assigndrivers}{AssignDrivers} & \textbf{Drv15to19} & Number of drivers 15 to 19 years old \\
VEHouseholdVehicles & \protect\hyperlink{verspm-assigndrivers}{AssignDrivers} & \textbf{Drv20to29} & Number of drivers 20 to 29 years old \\
VEHouseholdVehicles & \protect\hyperlink{verspm-assigndrivers}{AssignDrivers} & \textbf{Drv30to54} & Number of drivers 30 to 54 years old \\
VEHouseholdVehicles & \protect\hyperlink{verspm-assigndrivers}{AssignDrivers} & \textbf{Drv55to64} & Number of drivers 55 to 64 years old \\
VEHouseholdVehicles & \protect\hyperlink{verspm-assigndrivers}{AssignDrivers} & \textbf{Drv65Plus} & Number of drivers 65 and older \\
VESimHouseholds & \protect\hyperlink{verspm-predictincome}{PredictIncome} & \textbf{Income} & Total annual income of household \\
VELandUse & \protect\hyperlink{verspm-assignloctypes}{AssignLocTypes} & \textbf{LocType} & Location type (Urban, Town, Rural) of the place where the household resides \\
VEHouseholdVehicles & \protect\hyperlink{verspm-assignvehicletype}{AssignVehicleType} & \textbf{NumLtTrk} & Number of light trucks (pickup, sport-utility vehicle, and van) owned or leased by household \\
VEHouseholdVehicles & \protect\hyperlink{verspm-assignvehicletype}{AssignVehicleType} & \textbf{NumAuto} & Number of automobiles (i.e.~4-tire passenger vehicles that are not light trucks) owned or leased by household \\
\bottomrule()
\end{longtable}

\hypertarget{module-outputs-19}{%
\subsubsection*{Module Outputs}\label{module-outputs-19}}
\addcontentsline{toc}{subsubsection}{Module Outputs}

\begin{itemize}
\tightlist
\item
  \textbf{OwnCost}: Annual cost of vehicle ownership including depreciation, financing, insurance, taxes, and residential parking in dollars
\item
  \textbf{OwnCostPerMile}: Annual cost of vehicle ownership per mile of vehicle travel (dollars per mile)
\item
  \textbf{InsCost}: Annual vehicle insurance cost in dollars
\item
  \textbf{HasPaydIns}: Identifies whether household has pay-as-you-drive insurance for vehicles: 1 = Yes, 0 = no
\end{itemize}

For more information see \href{https://github.com/visioneval/VisionEval/blob/master/sources/modules/VEHouseholdVehicles/inst/module_docs/CalculateVehicleOwnCost.md}{here}

\hypertarget{verspm-adjustvehicleownership}{%
\subsection{AdjustVehicleOwnership}\label{verspm-adjustvehicleownership}}

This module adjusts household vehicle ownership based on a comparison of the cost of owning a vehicle per mile of travel compared to the cost per mile of using a car service in locations where the level of car service quality is high. The determination of whether car services are substituted for ownership also depends on input assumptions regarding the average likelihood that an owner would substitute car services for a household vehicle.

\hypertarget{user-input-files-20}{%
\subsubsection*{User Input Files}\label{user-input-files-20}}
\addcontentsline{toc}{subsubsection}{User Input Files}

\hypertarget{car-service-characteristics-azone_carsvc_characteristics.csv-1}{%
\paragraph*{\texorpdfstring{Car Service Characteristics (\textbf{azone\_carsvc\_characteristics.csv})}{Car Service Characteristics (azone\_carsvc\_characteristics.csv)}}\label{car-service-characteristics-azone_carsvc_characteristics.csv-1}}
\addcontentsline{toc}{paragraph}{Car Service Characteristics (\textbf{azone\_carsvc\_characteristics.csv})}

This file specifies the different characteristics for high and low car service levels by \texttt{Azone}. Changing this input is \emph{optional} and using the default input values is standard practice.

\begin{itemize}
\tightlist
\item
  \textbf{HighCarSvcCost}: Average cost in dollars per mile for travel by high service level car service exclusive of the cost of fuel, road use taxes, and carbon taxes (and any other social costs charged to vehicle use)
\item
  \textbf{LowCarSvcCost}: Average cost in dollars per mile for travel by low service level car service exclusive of the cost of fuel, road use taxes, and carbon taxes (and any other social costs charged to vehicle use)
\item
  \textbf{AveCarSvcVehicleAge}: Average age of car service vehicles in years
\item
  \textbf{LtTrkCarSvcSubProp}: The proportion of light-truck owners who would substitute a less-costly car service option for owning their light truck
\item
  \textbf{AutoCarSvcSubProp}: The proportion of automobile owners who would substitute a less-costly car service option for owning their automobile
\end{itemize}

Here is a snapshot of the file:

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 12\tabcolsep) * \real{0.1000}}
  >{\centering\arraybackslash}p{(\columnwidth - 12\tabcolsep) * \real{0.1500}}
  >{\centering\arraybackslash}p{(\columnwidth - 12\tabcolsep) * \real{0.1500}}
  >{\centering\arraybackslash}p{(\columnwidth - 12\tabcolsep) * \real{0.1500}}
  >{\centering\arraybackslash}p{(\columnwidth - 12\tabcolsep) * \real{0.1500}}
  >{\centering\arraybackslash}p{(\columnwidth - 12\tabcolsep) * \real{0.1500}}
  >{\centering\arraybackslash}p{(\columnwidth - 12\tabcolsep) * \real{0.1500}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Geo
\end{minipage} & \begin{minipage}[b]{\linewidth}\centering
Year
\end{minipage} & \begin{minipage}[b]{\linewidth}\centering
HighCarSvcCost.2010
\end{minipage} & \begin{minipage}[b]{\linewidth}\centering
LowCarSvcCost.2010
\end{minipage} & \begin{minipage}[b]{\linewidth}\centering
AveCarSvcVehicleAge
\end{minipage} & \begin{minipage}[b]{\linewidth}\centering
LtTrkCarSvcSubProp
\end{minipage} & \begin{minipage}[b]{\linewidth}\centering
AutoCarSvcSubProp
\end{minipage} \\
\midrule()
\endhead
RVMPO & 2010 & 1 & 3 & 3 & 0.75 & 1 \\
RVMPO & 2038 & 1 & 3 & 3 & 0.75 & 1 \\
\bottomrule()
\end{longtable}

\hypertarget{internal-module-inputs-19}{%
\subsubsection*{Internal Module Inputs}\label{internal-module-inputs-19}}
\addcontentsline{toc}{subsubsection}{Internal Module Inputs}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1724}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.3362}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1207}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.3707}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Package
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Module
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Outputs
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule()
\endhead
VESimHouseholds & \protect\hyperlink{verspm-createhouseholds}{CreateHouseholds} & \textbf{HhId} & Household id \\
VEHouseholdVehicles & \protect\hyperlink{verspm-createvehicletable}{CreateVehicleTable} & \textbf{VehId} & Unique vehicle ID \\
VEHouseholdVehicles & \protect\hyperlink{verspm-assignvehicleownership}{AssignVehicleOwnership} & \textbf{Vehicles} & Number of automobiles and light trucks owned or leased by the household including high level car service vehicles available to driving-age persons \\
VEHouseholdVehicles & \protect\hyperlink{verspm-createvehicletable}{CreateVehicleTable} & \textbf{VehicleAccess} & Identifier whether vehicle is owned by household (\texttt{Own}), if vehicle is low level car service (\texttt{LowCarSvc}), or if vehicle is high level car service (\texttt{HighCarSvc}) \\
VEHouseholdVehicles & \protect\hyperlink{verspm-assignvehicletype}{AssignVehicleType} & \textbf{NumLtTrk} & Number of light trucks (pickup, sport-utility vehicle, and van) owned or leased by household \\
VEHouseholdVehicles & \protect\hyperlink{verspm-assignvehicletype}{AssignVehicleType} & \textbf{NumAuto} & Number of automobiles (i.e.~4-tire passenger vehicles that are not light trucks) owned or leased by household \\
VELandUse & \protect\hyperlink{verspm-assigncarsvcavailability}{AssignCarSvcAvailability} & \textbf{CarSvcLevel} & Level of car service availability for household. High means access is competitive with household owned car. Low is not competitive. \\
VEHouseholdVehicles & \protect\hyperlink{verspm-assignvehicleage}{AssignVehicleAge} & \textbf{Type} & Vehicle body type: \texttt{Auto} = automobile, \texttt{LtTrk} = light trucks (i.e.~pickup, SUV, Van) \\
VEHouseholdVehicles & \protect\hyperlink{verspm-assignvehicleage}{AssignVehicleAge} & \textbf{Age} & Vehicle age in years \\
ouseholdVehicles & \protect\hyperlink{verspm-calculatevehicleowncost}{CalculateVehicleOwnCost} & \textbf{OwnCost} & Annual cost of vehicle ownership including depreciation, financing, insurance, taxes, and residential parking in dollars \\
VEHouseholdVehicles & \protect\hyperlink{verspm-calculatevehicleowncost}{CalculateVehicleOwnCost} & \textbf{OwnCostPerMile} & Annual cost of vehicle ownership per mile of vehicle travel (dollars per mile) \\
VEHouseholdVehicles & \protect\hyperlink{verspm-calculatevehicleowncost}{CalculateVehicleOwnCost} & \textbf{InsCost} & Annual vehicle insurance cost in dollars \\
\bottomrule()
\end{longtable}

\hypertarget{module-outputs-20}{%
\subsubsection*{Module Outputs}\label{module-outputs-20}}
\addcontentsline{toc}{subsubsection}{Module Outputs}

\begin{itemize}
\tightlist
\item
  \textbf{VehicleAccess}: Identifier whether vehicle is owned by household (Own), if vehicle is low level car service (\texttt{LowCarSvc}), or if vehicle is high level car service (\texttt{HighCarSvc})
\item
  \textbf{OwnCost}: Annual cost of vehicle ownership per mile of vehicle travel (dollars per mile)
\item
  \textbf{OwnCostPerMile}:Annual cost of vehicle ownership per mile of vehicle travel (dollars per mile)
\item
  \textbf{InsCost}: Annual vehicle insurance cost in dollars
\item
  \textbf{SwitchToCarSvc}: Identifies whether a vehicle was switched from owned to car service
\item
  \textbf{OwnCostSavings}: Annual vehicle ownership cost (depreciation, finance, insurance, taxes) savings in dollars resulting from substituting the use of car services for a household vehicle
\item
  \textbf{OwnCost}:Annual household vehicle ownership cost (depreciation, finance, insurance, taxes) savings in dollars
\item
  \textbf{Vehicles}:Number of automobiles and light trucks owned or leased by the household including high level car service vehicles available to driving-age persons
\item
  \textbf{NumLtTrk}:Number of light trucks (pickup, sport-utility vehicle, and van) owned or leased by household
\item
  \textbf{NumAuto}:Number of automobiles (i.e.~4-tire passenger vehicles that are not light trucks) owned or leased by household
\item
  \textbf{NumHighCarSvc}:Number of high level service car service vehicles available to the household (difference between number of vehicles owned by the household and number of driving age persons for households having availability of high level car services
\end{itemize}

For more information see \href{https://github.com/gregorbj/VisionEval/blob/develop/sources/modules/VEHouseholdVehicles/inst/module_docs/AdjustVehicleOwnership.md}{here}

\hypertarget{verspm-calculatehouseholddvmt}{%
\subsection{CalculateHouseholdDvmt}\label{verspm-calculatehouseholddvmt}}

This module models household average daily vehicle miles traveled as a function of household characteristics, vehicle ownership, and attributes of the neighborhood and metropolitan area where the household resides.

\hypertarget{user-input-files-21}{%
\subsubsection*{User Input Files}\label{user-input-files-21}}
\addcontentsline{toc}{subsubsection}{User Input Files}

This module has no user input requirements.

\hypertarget{internal-module-inputs-20}{%
\subsubsection*{Internal Module Inputs}\label{internal-module-inputs-20}}
\addcontentsline{toc}{subsubsection}{Internal Module Inputs}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1724}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.3362}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1207}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.3707}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Package
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Module
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Outputs
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule()
\endhead
VETransportSupply & \protect\hyperlink{verspm-assigntransitservice}{AssignTransitService} & \textbf{TranRevMiPC} & Ratio of annual bus-equivalent revenue-miles (i.e.~revenue-miles at the same productivity - passenger miles per revenue mile - as standard bus) to urbanized area population \\
VETransportSupply & \protect\hyperlink{verspm-assignroadmiles}{AssignRoadMiles} & \textbf{FwyLaneMiPC} & Ratio of urbanized area freeway and expressway lane-miles to urbanized area population \\
VELandUse & \protect\hyperlink{verspm-calculate4dmeasures}{Calculate4DMeasures} & \textbf{D1B} & Gross population density (people/acre) on unprotected (i.e., developable) land in zone \\
VESimHouseholds & \protect\hyperlink{verspm-createhouseholds}{CreateHouseholds} & \textbf{Age0to14} & Persons in 0 to 14 year old age group \\
VEHouseholdVehicles & \protect\hyperlink{verspm-assigndrivers}{AssignDrivers} & \textbf{Drivers} & Number of drivers in household \\
VESimHouseholds & \protect\hyperlink{verspm-predictworkers}{PredictWorkers} & \textbf{Workers} & Total workers in the household \\
VESimHouseholds & \protect\hyperlink{verspm-createhouseholds}{CreateHouseholds} & \textbf{HHSize} & Number of persons in the household \\
VELandUse & \protect\hyperlink{verspm-assignloctypes}{AssignLocTypes} & \textbf{LocType} & Location type (\texttt{Urban}, \texttt{Town}, \texttt{Rural}) of the place where the household resides \\
VEHouseholdVehicles & \protect\hyperlink{verspm-assignvehicleownership}{AssignVehicleOwnership} & \textbf{Vehicles} & Number of automobiles and light trucks owned or leased by the household including high level car service vehicles available to driving-age persons \\
VESimHouseholds & \protect\hyperlink{verspm-predictincome}{PredictIncome} & \textbf{Income} & Total annual income of household \\
VELandUse & \protect\hyperlink{verspm-calculateurbanmixmeasure}{CalculateUrbanMixMeasure} & \textbf{IsUrbanMixNbrhd} & Flag identifying whether household is (\texttt{1}) or is not (\texttt{0}) in urban mixed-use neighborhood \\
\bottomrule()
\end{longtable}

\hypertarget{module-outputs-21}{%
\subsubsection*{Module Outputs}\label{module-outputs-21}}
\addcontentsline{toc}{subsubsection}{Module Outputs}

\begin{itemize}
\tightlist
\item
  \textbf{Dvmt}: Average daily vehicle miles traveled by the household in autos or light trucks
\item
  \textbf{UrbanHhDvmt}: Average daily vehicle miles traveled in autos or light trucks by households residing in the urbanized portion of the \texttt{Marea}
\item
  \textbf{TownHhDvmt}: Average daily vehicle miles traveled in autos or light trucks by households residing in town (urban but not urbanized) portion of the \texttt{Marea}
\item
  \textbf{RuralHhDvmt}: Average daily vehicle miles traveled in autos or light trucks by households residing in the rural (non-urban) portion of the \texttt{Marea}
\end{itemize}

For more information see \href{https://github.com/gregorbj/VisionEval/blob/develop/sources/modules/VEHouseholdTravel/inst/module_docs/CalculateHouseholdDvmt.md}{here}

\hypertarget{verspm-calculatealtmodetrips}{%
\subsection{CalculateAltModeTrips}\label{verspm-calculatealtmodetrips}}

This module calculates household transit trips, walk trips, and bike trips. The models are sensitive to household DVMT so they are run after all household DVMT adjustments (e.g.~to account for cost on household DVMT) are made.

\hypertarget{user-input-files-22}{%
\subsubsection*{User Input Files}\label{user-input-files-22}}
\addcontentsline{toc}{subsubsection}{User Input Files}

This module has no user input requirements.

\hypertarget{internal-module-inputs-21}{%
\subsubsection*{Internal Module Inputs}\label{internal-module-inputs-21}}
\addcontentsline{toc}{subsubsection}{Internal Module Inputs}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1724}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.3362}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1207}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.3707}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Package
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Module
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Outputs
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule()
\endhead
VETransportSupply & \protect\hyperlink{verspm-assigntransitservice}{AssignTransitService} & \textbf{TranRevMiPC} & Ratio of annual bus-equivalent revenue-miles (i.e.~revenue-miles at the same productivity - passenger miles per revenue mile - as standard bus) to urbanized area population \\
VELandUse & \protect\hyperlink{verspm-calculate4dmeasures}{Calculate4DMeasures} & \textbf{D1B} & Gross population density (people/acre) on unprotected (i.e.~developable) land in zone \\
VESimHouseholds & \protect\hyperlink{verspm-createhouseholds}{CreateHouseholds} & \textbf{Age15to19} & Persons in 15 to 19 year old age group \\
VESimHouseholds & \protect\hyperlink{verspm-createhouseholds}{CreateHouseholds} & \textbf{Age20to29} & Persons in 20 to 29 year old age group \\
VESimHouseholds & \protect\hyperlink{verspm-createhouseholds}{CreateHouseholds} & \textbf{Age30to54} & Persons in 30 to 54 year old age group \\
VESimHouseholds & \protect\hyperlink{verspm-createhouseholds}{CreateHouseholds} & \textbf{Age55to64} & Persons in 55 to 64 year old age group \\
VESimHouseholds & \protect\hyperlink{verspm-createhouseholds}{CreateHouseholds} & \textbf{Age65Plus} & Persons in 65 or older age group \\
VESimHouseholds & \protect\hyperlink{verspm-createhouseholds}{CreateHouseholds} & \textbf{Age0to14} & Persons in 0 to 14 year old age group \\
VESimHouseholds & \protect\hyperlink{verspm-createhouseholds}{CreateHouseholds} & \textbf{HHSize} & Number of persons in the household \\
VELandUse & \protect\hyperlink{verspm-assignloctypes}{AssignLocTypes} & \textbf{LocType} & Location type (\texttt{Urban}, \texttt{Town}, \texttt{Rural}) of the place where the household resides \\
VEHouseholdVehicles & \protect\hyperlink{verspm-assignvehicleownership}{AssignVehicleOwnership} & \textbf{Vehicles} & Number of automobiles and light trucks owned or leased by the household including high level car service vehicles available to driving-age persons \\
VESimHouseholds & \protect\hyperlink{verspm-predictincome}{PredictIncome} & \textbf{Income} & Total annual income of household \\
VELandUse & \protect\hyperlink{verspm-calculateurbanmixmeasure}{CalculateUrbanMixMeasure} & \textbf{IsUrbanMixNbrhd} & Flag identifying whether household is (\texttt{1}) or is not (\texttt{0}) in urban mixed-use neighborhood \\
VEHouseholdTravel & \protect\hyperlink{verspm-calculatehouseholddvmt}{CalculateHouseholdDvmt} & \textbf{Dvmt} & Average daily vehicle miles traveled by the household in autos or light trucks \\
\bottomrule()
\end{longtable}

\hypertarget{module-outputs-22}{%
\subsubsection{Module Outputs}\label{module-outputs-22}}

\begin{itemize}
\tightlist
\item
  \textbf{WalkTrips}: Average number of walk trips per year by household members
\item
  \textbf{BikeTrips}: Average number of bicycle trips per year by household members
\item
  \textbf{TransitTrips}:Average number of public transit trips per year by household members
\end{itemize}

For more information see \href{https://github.com/gregorbj/VisionEval/blob/develop/sources/modules/VEHouseholdTravel/inst/module_docs/CalculateAltModeTrips.md}{here}

\hypertarget{verspm-calculatevehicletrips}{%
\subsection{CalculateVehicleTrips}\label{verspm-calculatevehicletrips}}

This module calculates average daily vehicle trips for households consistent with the household DVMT. An average trip length model is applied to estimate average length of household trips reflecting the characteristics of the household and the place where they live. The average trip length is divided into the average household DVMT to get an estimate of average number of daily vehicle trips.

\hypertarget{user-input-files-23}{%
\subsubsection*{User Input Files}\label{user-input-files-23}}
\addcontentsline{toc}{subsubsection}{User Input Files}

This module has no user input requirements.

\hypertarget{internal-module-inputs-22}{%
\subsubsection*{Internal Module Inputs}\label{internal-module-inputs-22}}
\addcontentsline{toc}{subsubsection}{Internal Module Inputs}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1724}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.3362}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1207}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.3707}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Package
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Module
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Outputs
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule()
\endhead
VETransportSupply & \protect\hyperlink{verspm-assignroadmiles}{AssignRoadMiles} & \textbf{FwyLaneMiPC} & Ratio of urbanized area freeway and expressway lane-miles to urbanized area population \\
VELandUse & \protect\hyperlink{verspm-calculate4dmeasures}{Calculate4DMeasures} & \textbf{D1B} & Gross population density (people/acre) on unprotected (i.e.~developable) land in zone \\
VESimHouseholds & \protect\hyperlink{verspm-createhouseholds}{CreateHouseholds} & \textbf{HHSize} & Number of persons in the household \\
VELandUse & \protect\hyperlink{verspm-assignloctypes}{AssignLocTypes} & \textbf{LocType} & Location type (Urban, Town, Rural) of the place where the household resides \\
VEHouseholdVehicles & \protect\hyperlink{verspm-assignvehicleownership}{AssignVehicleOwnership} & \textbf{Vehicles} & Number of automobiles and light trucks owned or leased by the household including high level car service vehicles available to driving-age persons \\
VEHouseholdVehicles & \protect\hyperlink{verspm-assigndrivers}{AssignDrivers} & \textbf{Drivers} & Number of drivers in household \\
VESimHouseholds & \protect\hyperlink{verspm-predictincome}{PredictIncome} & \textbf{Income} & Total annual income of household \\
VELandUse & \protect\hyperlink{verspm-calculateurbanmixmeasure}{CalculateUrbanMixMeasure} & \textbf{IsUrbanMixNbrhd} & Flag identifying whether household is (\texttt{1}) or is not (\texttt{0}) in urban mixed-use neighborhood \\
VEHouseholdTravel & \protect\hyperlink{verspm-calculatehouseholddvmt}{CalculateHouseholdDvmt} & \textbf{Dvmt} & Average daily vehicle miles traveled by the household in autos or light trucks \\
\bottomrule()
\end{longtable}

\hypertarget{module-outputs-23}{%
\subsubsection*{Module Outputs}\label{module-outputs-23}}
\addcontentsline{toc}{subsubsection}{Module Outputs}

\begin{itemize}
\tightlist
\item
  \textbf{VehicleTrips}: Average number of vehicle trips per day by household members
\item
  \textbf{AveVehTripLen}: Average household vehicle trip length in miles
\end{itemize}

For more information see \href{https://github.com/gregorbj/VisionEval/blob/develop/sources/modules/VEHouseholdTravel/inst/module_docs/CalculateVehicleTrips.md}{here}

\hypertarget{verspm-divertsovtravel}{%
\subsection{DivertSovTravel}\label{verspm-divertsovtravel}}

This module reduces household single-occupant vehicle (SOV) travel to achieve goals that are inputs to the model. The purpose of this module is to enable users to do `what if' analysis of the potential of light-weight vehicles (e.g.~bicycles, electric bikes, electric scooters) and infrastructure to support their use to reduce SOV travel.

Note: SOV DVMT reduction is only applied to households in urban and town location types (LocTypes) because it is unlikely that actions/services could be provided in rural areas that could significantly divert SOV DVMT to bicycles, electric bicycles, scooters or other similar modes.

\hypertarget{user-input-files-24}{%
\subsubsection{User Input Files}\label{user-input-files-24}}

\hypertarget{proportion-of-diverted-sov-travel-azone_prop_sov_dvmt_diverted.csv}{%
\paragraph{Proportion of Diverted SOV Travel (azone\_prop\_sov\_dvmt\_diverted.csv)}\label{proportion-of-diverted-sov-travel-azone_prop_sov_dvmt_diverted.csv}}

This file provides inputs for a goal for diverting a portion of SOV travel within a 20-mile tour distance (round trip distance). The user can use local household travel survey data (if available) to develop this input.

\begin{itemize}
\tightlist
\item
  \textbf{PropSovDvmtDiverted}: Goals for the proportion of household DVMT in single occupant vehicle tours with round-trip distances of 20 miles or less be diverted to bicycling or other slow speed modes of travel
\end{itemize}

Here is a snapshot of the file:

\begin{tabular}{l|c|c}
\hline
Geo & Year & PropSovDvmtDiverted\\
\hline
RVMPO & 2010 & 0.04\\
\hline
RVMPO & 2038 & 0.80\\
\hline
\end{tabular}

\hypertarget{internal-module-inputs-23}{%
\subsubsection*{Internal Module Inputs}\label{internal-module-inputs-23}}
\addcontentsline{toc}{subsubsection}{Internal Module Inputs}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1724}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.3362}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1207}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.3707}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Package
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Module
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Outputs
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule()
\endhead
VETransportSupply & \protect\hyperlink{verspm-assignroadmiles}{AssignRoadMiles} & \textbf{FwyLaneMiPC} & Ratio of urbanized area freeway and expressway lane-miles to urbanized area population \\
VELandUse & \protect\hyperlink{verspm-calculate4dmeasures}{Calculate4DMeasures} & \textbf{D1B} & Gross population density (people/acre) on unprotected (i.e.~developable) land in zone \\
VESimHouseholds & \protect\hyperlink{verspm-createhouseholds}{CreateHouseholds} & \textbf{HHSize} & Number of persons in the household \\
VELandUse & \protect\hyperlink{verspm-assignloctypes}{AssignLocTypes} & \textbf{LocType} & Location type (\texttt{Urban}, \texttt{Town}, \texttt{Rural}) of the place where the household resides \\
VEHouseholdVehicles & \protect\hyperlink{verspm-assignvehicleownership}{AssignVehicleOwnership} & \textbf{Vehicles} & Number of automobiles and light trucks owned or leased by the household including high level car service vehicles available to driving-age persons \\
VEHouseholdVehicles & \protect\hyperlink{verspm-assigndrivers}{AssignDrivers} & \textbf{Drivers} & Number of drivers in household \\
VESimHouseholds & \protect\hyperlink{verspm-predictincome}{PredictIncome} & \textbf{Income} & Total annual income of household \\
VELandUse & \protect\hyperlink{verspm-calculateurbanmixmeasure}{CalculateUrbanMixMeasure} & \textbf{IsUrbanMixNbrhd} & Flag identifying whether household is (\texttt{1}) or is not (\texttt{0}) in urban mixed-use neighborhood \\
VEHouseholdTravel & \protect\hyperlink{verspm-calculatehouseholddvmt}{CalculateHouseholdDvmt} & \textbf{Dvmt} & Average daily vehicle miles traveled by the household in autos or light trucks \\
VESimHouseholds & \protect\hyperlink{verspm-createhouseholds}{CreateHouseholds} & \textbf{Age0to14} & Persons in 0 to 14 year old age group \\
VESimHouseholds & \protect\hyperlink{verspm-createhouseholds}{CreateHouseholds} & \textbf{Age15to19} & Persons in 15 to 19 year old age group \\
VELandUse & \protect\hyperlink{verspm-predicthousing}{PredictHousing} & \textbf{HouseType} & Type of dwelling unit of the household \\
\bottomrule()
\end{longtable}

\hypertarget{module-outputs-24}{%
\subsubsection*{Module Outputs}\label{module-outputs-24}}
\addcontentsline{toc}{subsubsection}{Module Outputs}

\begin{itemize}
\tightlist
\item
  \textbf{PropDvmtDiverted}: Proportion of household DVMT diverted to bicycling, electric bikes, or other `low-speed' travel modes
\item
  \textbf{AveTrpLenDiverted}: Average length in miles of vehicle trips diverted to bicycling, electric bikes, or other `low-speed' travel modes
\end{itemize}

For more information see \href{https://github.com/gregorbj/VisionEval/blob/develop/sources/modules/VEHouseholdTravel/inst/module_docs/DivertSovTravel.md}{here}

\hypertarget{verspm-initialize-vepowertrainsandfuels}{%
\subsection{Initialize-vepowertrainsandfuels}\label{verspm-initialize-vepowertrainsandfuels}}

This module processes vehicle and fuel characteristics files that model users may optionally supply. When these files are supplied, modules in the package that compute carbon intensities of vehicle travel will use the user-supplied data instead of the datasets that are part of the package (see the \texttt{LoadDefaultValues.R} script).

\hypertarget{user-input-files-25}{%
\subsubsection*{User Input Files}\label{user-input-files-25}}
\addcontentsline{toc}{subsubsection}{User Input Files}

\hypertarget{carbon-intensity-of-electricity-azone_electricity_carbon_intensity.csv}{%
\paragraph*{\texorpdfstring{Carbon Intensity of Electricity (\textbf{azone\_electricity\_carbon\_intensity.csv})}{Carbon Intensity of Electricity (azone\_electricity\_carbon\_intensity.csv)}}\label{carbon-intensity-of-electricity-azone_electricity_carbon_intensity.csv}}
\addcontentsline{toc}{paragraph}{Carbon Intensity of Electricity (\textbf{azone\_electricity\_carbon\_intensity.csv})}

This input file specifies the carbon intensity of electricity by \texttt{Azone}. This input file is OPTIONAL and is only needed if the user wants to modify the carbon intensity of electricity.

\begin{itemize}
\tightlist
\item
  \textbf{ElectricityCI}: Carbon intensity of electricity at point of consumption (grams CO2e per megajoule)
\end{itemize}

Here is a snapshot of the file:

\begin{longtable}[]{@{}lcc@{}}
\toprule()
Geo & Year & ElectricityCI \\
\midrule()
\endhead
RVMPO & 2010 & 153 \\
RVMPO & 2038 & 23 \\
\bottomrule()
\end{longtable}

\hypertarget{average-fuel-carbon-intensity-of-transit-marea_transit_ave_fuel_carbon_intensity.csv}{%
\paragraph*{Average Fuel Carbon Intensity of Transit (marea\_transit\_ave\_fuel\_carbon\_intensity.csv)}\label{average-fuel-carbon-intensity-of-transit-marea_transit_ave_fuel_carbon_intensity.csv}}
\addcontentsline{toc}{paragraph}{Average Fuel Carbon Intensity of Transit (marea\_transit\_ave\_fuel\_carbon\_intensity.csv)}

This input file is OPTIONAL. It is only needed if the user wants to modify the average carbon intensity of fuel used by transit.

\begin{itemize}
\tightlist
\item
  \textbf{TransitVanFuelCI}: Average carbon intensity of fuel used by transit vans (grams CO2e per megajoule)
\item
  \textbf{TransitBusFuelCI}: Average carbon intensity of fuel used by transit buses (grams CO2e per megajoule)
\item
  \textbf{TransitRailFuelCI}: Average carbon intensity of fuel used by transit rail vehicles (grams CO2e per megajoule)
\end{itemize}

Here is a snapshot of the file:

\begin{tabular}{l|c|c|c|c}
\hline
Geo & Year & TransitVanFuelCI & TransitBusFuelCI & TransitRailFuelCI\\
\hline
RVMPO & 2010 & 90.38 & NA & NA\\
\hline
RVMPO & 2038 & 72.30 & NA & NA\\
\hline
\end{tabular}

\hypertarget{biofuels-proportions-of-transit-fuels-marea_transit_biofuel_mix.csv}{%
\paragraph*{Biofuels Proportions of Transit Fuels (marea\_transit\_biofuel\_mix.csv)}\label{biofuels-proportions-of-transit-fuels-marea_transit_biofuel_mix.csv}}
\addcontentsline{toc}{paragraph}{Biofuels Proportions of Transit Fuels (marea\_transit\_biofuel\_mix.csv)}

This input file is OPTIONAL. It is only needed if the user wants to modify the biofuel used by transit services.

\begin{itemize}
\tightlist
\item
  \textbf{TransitEthanolPropGasoline}: Ethanol proportion of gasoline used by transit vehicles
\item
  \textbf{TransitBiodieselPropDiesel}: Biodiesel proportion of diesel used by transit vehicles
\item
  \textbf{TransitRngPropCng}: Renewable natural gas proportion of compressed natural gas used by transit vehicles
\end{itemize}

Here is a snapshot of the file:

\begin{tabular}{l|c|c|c|c}
\hline
Geo & Year & TransitEthanolPropGasoline & TransitBiodieselPropDiesel & TransitRngPropCng\\
\hline
RVMPO & 2010 & 0.1 & 0.05 & 0\\
\hline
RVMPO & 2038 & 0.1 & 0.05 & 0\\
\hline
\end{tabular}

\hypertarget{transit-fuels-proportions-by-transit-vehicle-type-marea_transit_fuel.csv}{%
\paragraph*{Transit Fuels Proportions by Transit Vehicle Type (marea\_transit\_fuel.csv)}\label{transit-fuels-proportions-by-transit-vehicle-type-marea_transit_fuel.csv}}
\addcontentsline{toc}{paragraph}{Transit Fuels Proportions by Transit Vehicle Type (marea\_transit\_fuel.csv)}

This input file is OPTIONAL. It is only needed if the user wants to modify the transit fuels proportions.

\begin{itemize}
\tightlist
\item
  \textbf{VanPropDiesel}: Proportion of non-electric transit van travel powered by diesel
\item
  \textbf{VanPropGasoline}: Proportion of non-electric transit van travel powered by gasoline
\item
  \textbf{VanPropCng}: Proportion of non-electric transit van travel powered by compressed natural gas
\item
  \textbf{BusPropDiesel}: Proportion of non-electric transit bus travel powered by diesel
\item
  \textbf{BusPropGasoline}: Proportion of non-electric transit bus travel powered by gasoline
\item
  \textbf{BusPropCng}: Proportion of non-electric transit bus travel powered by compressed natural gas
\item
  \textbf{RailPropDiesel}: Proportion of non-electric transit rail travel powered by diesel
\item
  \textbf{RailPropGasoline}: Proportion of non-electric transit rail travel powered by gasoline
\end{itemize}

Here is a snapshot of the file:

\begin{tabular}{l|c|c|c|c|c|c|c|c|c}
\hline
Geo & Year & VanPropDiesel & VanPropGasoline & VanPropCng & BusPropDiesel & BusPropGasoline & BusPropCng & RailPropDiesel & RailPropGasoline\\
\hline
RVMPO & 2010 & 0 & 1 & 0 & 0.2 & 0 & 0.8 & 1 & 0\\
\hline
RVMPO & 2038 & 0 & 1 & 0 & 0.2 & 0 & 0.8 & 1 & 0\\
\hline
\end{tabular}

\hypertarget{transit-powertrain-proportions-by-transit-vehicle-type-marea_transit_powertrain_prop.csv}{%
\paragraph{Transit Powertrain Proportions by Transit Vehicle Type (marea\_transit\_powertrain\_prop.csv)}\label{transit-powertrain-proportions-by-transit-vehicle-type-marea_transit_powertrain_prop.csv}}

This input file is OPTIONAL. It is only needed if the user wants to modify the mixes of transit vehicle powertrains.

\begin{itemize}
\tightlist
\item
  \textbf{VanPropIcev}: Proportion of transit van travel using internal combustion engine powertrains
\item
  \textbf{VanPropHev}: Proportion of transit van travel using hybrid electric powertrains
\item
  \textbf{VanPropBev}: Proportion of transit van travel using battery electric powertrains
\item
  \textbf{BusPropIcev}: Proportion of transit bus travel using internal combustion engine powertrains
\item
  \textbf{BusPropHev}: Proportion of transit bus travel using hybrid electric powertrains
\item
  \textbf{BusPropBev}: Proportion of transit bus travel using battery electric powertrains
\item
  \textbf{RailPropIcev}: Proportion of transit rail travel using internal combustion engine powertrains
\item
  \textbf{RailPropHev}: Proportion of transit rail travel using hybrid electric powertrains
\item
  \textbf{RailPropEv}: Proportion of transit rail travel using electric powertrains
\end{itemize}

Here is a snapshot of the file:

\begin{tabular}{l|c|c|c|c|c|c|c|c|c|l}
\hline
Geo & Year & VanPropIcev & VanPropHev & VanPropBev & BusPropIcev & BusPropHev & BusPropBev & RailPropIcev & RailPropHev & RailPropEv\\
\hline
RVMPO & 2010 & 1 & 0 & 0 & 1 & 0 & 0 & 0 & 0 & 1\\
\hline
RVMPO & 2038 & 1 & 0 & 0 & 1 & 0 & 0 & 0 & 0 & 1\\
\hline
\end{tabular}

\hypertarget{average-carbon-intensities-of-fuels-region_ave_fuel_carbon_intensity.csv}{%
\paragraph{Average Carbon Intensities of Fuels (region\_ave\_fuel\_carbon\_intensity.csv)}\label{average-carbon-intensities-of-fuels-region_ave_fuel_carbon_intensity.csv}}

This input file is OPTIONAL. It is only needed if the user wants to modify the average carbon density for different vehicle types for the model region.

\begin{itemize}
\tightlist
\item
  \textbf{HhFuelCI}: Average carbon intensity of fuels used by household vehicles (grams CO2e per megajoule)
\item
  \textbf{CarSvcFuelCI}: Average carbon intensity of fuels used by car service vehicles (grams CO2e per megajoule)
\item
  \textbf{ComSvcFuelCI}: Average carbon intensity of fuels used by commercial service vehicles (grams CO2e per megajoule)
\item
  \textbf{HvyTrkFuelCI}: Average carbon intensity of fuels used by heavy trucks (grams CO2e per megajoule)
\item
  \textbf{TransitVanFuelCI}: Average carbon intensity of fuels used by transit vans (grams CO2e per megajoule)
\item
  \textbf{TransitBusFuelCI}: Average carbon intensity of fuels used by transit buses (grams CO2e per megajoule)
\item
  \textbf{TransitRailFuelCI}: Average carbon intensity of fuels used by transit rail vehicles (grams CO2e per megajoule)
\end{itemize}

Here is a snapshot of the file:

\begin{tabular}{l|c|c|c|c|c|c|c|c}
\hline
Geo & Year & HhFuelCI & CarSvcFuelCI & ComSvcFuelCI & HvyTrkFuelCI & TransitVanFuelC & TransitBusFuelC & TransitRailFuel\\
\hline
RVMPO & 2010 & 90.23 & 90.23 & 90.23 & NA & NA & NA & NA\\
\hline
RVMPO & 2038 & 72.30 & 72.30 & 72.30 & NA & NA & NA & NA\\
\hline
\end{tabular}

\hypertarget{car-service-vehicle-powertrains-region_carsvc_powertrain_prop.csv}{%
\paragraph{Car Service Vehicle Powertrains (region\_carsvc\_powertrain\_prop.csv)}\label{car-service-vehicle-powertrains-region_carsvc_powertrain_prop.csv}}

This input file is OPTIONAL. It is only needed if the user wants to modify the powertrain proportion of car services.

\begin{itemize}
\tightlist
\item
  \textbf{CarSvcAutoPropIcev}: Proportion of car service automobile travel powered by internal combustion engine powertrains
\item
  \textbf{CarSvcAutoPropHev}: Proportion of car service automobile travel powered by hybrid electric powertrains
\item
  \textbf{CarSvcAutoPropBev}: Proportion of car service automobile travel powered by battery electric powertrains
\item
  \textbf{CarSvcLtTrkPropIcev}: Proportion of car service light truck travel powered by internal combustion engine powertrains
\item
  \textbf{CarSvcLtTrkPropHev}: Proportion of car service light truck travel powered by hybrid electric powertrains
\item
  \textbf{CarSvcLtTrkPropBev}: Proportion of car service light truck travel powered by battery electric powertrains
\end{itemize}

Here is a snapshot of the file:

\begin{tabular}{l|c|c|c|c|c|c|c}
\hline
Geo & Year & CarSvcAutoPropIcev & CarSvcAutoPropHev & CarSvcAutoPropBev & CarSvcLtTrkPropIce & CarSvcLtTrkPropHev & CarSvcLtTrkPropBev\\
\hline
RVMPO & 2010 & 0.990 & 0.010 & 0.000 & 1.0000 & 0.0000 & 0.0000\\
\hline
RVMPO & 2038 & 0.441 & 0.528 & 0.031 & 0.5335 & 0.4572 & 0.0093\\
\hline
\end{tabular}

\hypertarget{commercial-service-vehicle-powertrains-region_comsvc_powertrain_prop.csv}{%
\paragraph{Commercial Service Vehicle Powertrains (region\_comsvc\_powertrain\_prop.csv)}\label{commercial-service-vehicle-powertrains-region_comsvc_powertrain_prop.csv}}

This input file is OPTIONAL. It is only needed if the user wants to modify the powertrain proportion of commercial vehicles.

\begin{itemize}
\tightlist
\item
  \textbf{ComSvcAutoPropIcev}: Proportion of commercial service automobile travel powered by internal combustion engine powertrains
\item
  \textbf{ComSvcAutoPropHev}: Proportion of commercial service automobile travel powered by hybrid electric powertrains
\item
  \textbf{ComSvcAutoPropBev}: Proportion of commercial service automobile travel powered by battery electric powertrains
\item
  \textbf{ComSvcLtTrkPropIcev}: Proportion of commercial service light truck travel powered by internal combustion engine powertrains
\item
  \textbf{ComSvcLtTrkPropHev}: Proportion of commercial service light truck travel powered by hybrid electric powertrains
\item
  \textbf{ComSvcLtTrkPropBev}: Proportion of commercial service light truck travel powered by battery electric powertrainss
\end{itemize}

Here is a snapshot of the file:

\begin{tabular}{l|c|c|c|c|c|c|c}
\hline
Geo & Year & ComSvcAutoPropIcev & ComSvcAutoPropHev & ComSvcAutoPropBev & ComSvcLtTrkPropIcev & ComSvcLtTrkPropHev & ComSvcLtTrkPropBev\\
\hline
RVMPO & 2010 & 0.990 & 0.010 & 0.000 & 1.0000 & 0.0000 & 0.0000\\
\hline
RVMPO & 2038 & 0.441 & 0.528 & 0.031 & 0.5335 & 0.4572 & 0.0093\\
\hline
\end{tabular}

\hypertarget{heavy-duty-truck-powertrains-region_hvytrk_powertrain_prop.csv}{%
\paragraph{Heavy duty Truck Powertrains (region\_hvytrk\_powertrain\_prop.csv)}\label{heavy-duty-truck-powertrains-region_hvytrk_powertrain_prop.csv}}

This input file is OPTIONAL. It is only needed if the user wants to modify the powertrain proportion of heavy duty trucks.

\begin{itemize}
\tightlist
\item
  \textbf{HvyTrkPropIcev}: Proportion of heavy truck travel powered by internal combustion engine powertrains
\item
  \textbf{HvyTrkPropHev}: Proportion of heavy truck travel powered by hybrid electric powertrains
\item
  \textbf{HvyTrkPropBev}: Proportion of heavy truck travel powered by battery electric powertrains
\end{itemize}

Here is a snapshot of the file:

\begin{tabular}{l|c|c|c|c}
\hline
Geo & Year & HvyTrkPropIcev & HvyTrkPropHev & HvyTrkPropBev\\
\hline
RVMPO & 2010 & 1.0 & 0.0 & 0.0\\
\hline
RVMPO & 2038 & 0.4 & 0.4 & 0.2\\
\hline
\end{tabular}

\hypertarget{internal-module-inputs-24}{%
\subsubsection*{Internal Module Inputs}\label{internal-module-inputs-24}}
\addcontentsline{toc}{subsubsection}{Internal Module Inputs}

This module uses no datasets that are in the datastore.

\hypertarget{module-outputs-25}{%
\subsubsection*{Module Outputs}\label{module-outputs-25}}
\addcontentsline{toc}{subsubsection}{Module Outputs}

This module produces no datasets to store in the datastore.

For more information see \href{https://github.com/visioneval/VisionEval/blob/master/sources/modules/VEPowertrainsAndFuels/inst/module_docs/Initialize.md}{here}

\hypertarget{verspm-calculatecarbonintensity}{%
\subsection{CalculateCarbonIntensity}\label{verspm-calculatecarbonintensity}}

This module calculates the average carbon intensity of fuels (grams CO2e per megajoule) by transportation mode and vehicle type. The transportation modes and vehicle types are:

\begin{longtable}[]{@{}ll@{}}
\toprule()
Mode & Vehicle Types \\
\midrule()
\endhead
Household & automobile, light truck \\
Car Service & automobile, light truck \\
Commercial Service & automobile, light truck \\
Heavy Truck & heavy truck \\
Public Transit & van, bus, rail \\
\bottomrule()
\end{longtable}

Average fuel carbon intensities for public transit vehicles are calculated by \texttt{Marea}. The average fuel carbon intensities for the other mode vehicles are calculated for the entire model region. The module also calculates the average carbon intensity of electricity at the \texttt{Azone} level. Note that this module uses the user input files only if the user runs \protect\hyperlink{initialize}{Initialize} module. Otherwise the module uses default inputs in the \href{https://github.com/gregorbj/VisionEval/tree/898fc016893f5b7dd78507e101c37d04486826b3/sources/modules/VEPowertrainsAndFuels/inst/extdata}{inst\extdata folder}.

\hypertarget{user-input-files-26}{%
\subsubsection*{User Input Files}\label{user-input-files-26}}
\addcontentsline{toc}{subsubsection}{User Input Files}

\hypertarget{carbon-intensity-of-electricity-azone_electricity_carbon_intensity.csv-1}{%
\paragraph{Carbon Intensity of Electricity (azone\_electricity\_carbon\_intensity.csv)}\label{carbon-intensity-of-electricity-azone_electricity_carbon_intensity.csv-1}}

This input file is OPTIONAL. It is only needed if the user wants to modify the carbon intensity of electricity.

\begin{itemize}
\tightlist
\item
  \textbf{ElectricityCI}: Carbon intensity of electricity at point of consumption (grams CO2e per megajoule)
\end{itemize}

Here is a snapshot of the file:

\begin{tabular}{l|c|c}
\hline
Geo & Year & ElectricityCI\\
\hline
RVMPO & 2010 & 153\\
\hline
RVMPO & 2038 & 23\\
\hline
\end{tabular}

\hypertarget{internal-module-inputs-25}{%
\subsubsection*{Internal Module Inputs}\label{internal-module-inputs-25}}
\addcontentsline{toc}{subsubsection}{Internal Module Inputs}

This module does not have any internal module inputs

\hypertarget{module-outputs-26}{%
\subsubsection*{Module Outputs}\label{module-outputs-26}}
\addcontentsline{toc}{subsubsection}{Module Outputs}

\begin{itemize}
\tightlist
\item
  \textbf{ElectricityCI}: Carbon intensity of electricity at point of consumption (grams CO2e per megajoule)
\item
  \textbf{HhAutoFuelCI}: Average carbon intensity of fuels used by household automobiles (grams CO2e per megajoule)
\item
  \textbf{HhLtTrkFuelCI}: Average carbon intensity of fuels used by household light trucks (grams CO2e per megajoule)
\item
  \textbf{CarSvcAutoFuelCI}: Average carbon intensity of fuels used by car service automobiles (grams CO2e per megajoule)
\item
  \textbf{CarSvcLtTrkFuelCI}: Average carbon intensity of fuels used by car service light trucks (grams CO2e per megajoule)
\item
  \textbf{ComSvcAutoFuelCI}: Average carbon intensity of fuels used by commercial service automobiles (grams CO2e per megajoule)
\item
  \textbf{ComSvcLtTrkFuelCI}: Average carbon intensity of fuels used by commercial service light trucks (grams CO2e per megajoule)
\item
  \textbf{HvyTrkFuelCI}: Average carbon intensity of fuels used by heavy trucks (grams CO2e per megajoule)
\item
  \textbf{TransitVanFuelCI}: Average carbon intensity of fuel used by transit vans (grams CO2e per megajoule)
\item
  \textbf{TransitBusFuelCI}: Average carbon intensity of fuel used by transit buses (grams CO2e per megajoule)
\item
  \textbf{TransitRailFuelCI}: Average carbon intensity of fuel used by transit rail vehicles (grams CO2e per megajoule)
\end{itemize}

For more information see \href{https://github.com/visioneval/VisionEval/blob/master/sources/modules/VEPowertrainsAndFuels/inst/module_docs/CalculateCarbonIntensity.md}{here}

\hypertarget{verspm-assignhhvehiclepowertrain}{%
\subsection{AssignHhVehiclePowertrain}\label{verspm-assignhhvehiclepowertrain}}

This module assigns a powertrain type to each household vehicle. The powertrain types are internal combustion engine vehicle (ICEV), hybrid electric vehicle (HEV), plug-in hybrid electric vehicle (PHEV), and battery electric vehicles (BEV). The module also assigns related characteristics to household vehicles including:

\begin{itemize}
\tightlist
\item
  Battery range (for PHEV and BEV)
\item
  Miles per gallon (MPG) and gallons per mile (GPM)
\item
  Miles per kilowatt-hour (MPKWH) and kilowatt-hours per mile (KWHPM)
\item
  Miles per gasoline gallon equivalent (MPGe)
\item
  The proportion of DVMT powered by electricity
\item
  Carbon dioxide equivalent emissions per mile powered by hydrocarbon fuel
\item
  Carbon dioxide equivalent emissions per mile powered by electricity
\end{itemize}

\hypertarget{user-input-files-27}{%
\subsubsection*{User Input Files}\label{user-input-files-27}}
\addcontentsline{toc}{subsubsection}{User Input Files}

\hypertarget{charging-availability-azone_charging_availability.csv}{%
\paragraph*{\texorpdfstring{Charging Availability (\textbf{azone\_charging\_availability.csv})}{Charging Availability (azone\_charging\_availability.csv)}}\label{charging-availability-azone_charging_availability.csv}}
\addcontentsline{toc}{paragraph}{Charging Availability (\textbf{azone\_charging\_availability.csv})}

This input file supplies data on proportion of different household types with plug-in electric vehicle (PEV) charging available by \texttt{Azone}.

\begin{itemize}
\tightlist
\item
  \textbf{PropSFChargingAvail}: Proportion of single-family dwellings in Azone that have PEV charging facilities installed or able to be installed
\item
  \textbf{PropMFChargingAvail}: Proportion of multifamily dwelling units in Azone that have PEV charging facilities available
\item
  \textbf{PropGQChargingAvail}: Proportion of group quarters dwelling units in Azone that have PEV charging facilities available
\end{itemize}

Here is a snapshot of the file:

\begin{tabular}{l|c|c|c|c}
\hline
Geo & Year & PropSFChargingAvail & PropMFChargingAvail & PropGQChargingAvail\\
\hline
RVMPO & 2010 & 1 & 0.0 & 0\\
\hline
RVMPO & 2038 & 1 & 0.2 & 0\\
\hline
\end{tabular}

\hypertarget{car-service-vehicle-powertrains-region_carsvc_powertrain_prop.csv-1}{%
\paragraph{Car Service Vehicle Powertrains (region\_carsvc\_powertrain\_prop.csv)}\label{car-service-vehicle-powertrains-region_carsvc_powertrain_prop.csv-1}}

This input file is OPTIONAL. It is only needed if the user wants to modify the powertrain proportion of car services.

\begin{itemize}
\tightlist
\item
  \textbf{CarSvcAutoPropIcev}: Proportion of car service automobile travel powered by internal combustion engine powertrains
\item
  \textbf{CarSvcAutoPropHev}: Proportion of car service automobile travel powered by hybrid electric powertrains
\item
  \textbf{CarSvcAutoPropBev}: Proportion of car service automobile travel powered by battery electric powertrains
\item
  \textbf{CarSvcLtTrkPropIcev}: Proportion of car service light truck travel powered by internal combustion engine powertrains
\item
  \textbf{CarSvcLtTrkPropHev}: Proportion of car service light truck travel powered by hybrid electric powertrains
\item
  \textbf{CarSvcLtTrkPropBev}: Proportion of car service light truck travel powered by battery electric powertrains
\end{itemize}

Here is a snapshot of the file:

\begin{tabular}{l|c|c|c|c|c|c|c}
\hline
Geo & Year & CarSvcAutoPropIcev & CarSvcAutoPropHev & CarSvcAutoPropBev & CarSvcLtTrkPropIce & CarSvcLtTrkPropHev & CarSvcLtTrkPropBev\\
\hline
RVMPO & 2010 & 0.990 & 0.010 & 0.000 & 1.0000 & 0.0000 & 0.0000\\
\hline
RVMPO & 2038 & 0.441 & 0.528 & 0.031 & 0.5335 & 0.4572 & 0.0093\\
\hline
\end{tabular}

\hypertarget{internal-module-inputs-26}{%
\subsubsection*{Internal Module Inputs}\label{internal-module-inputs-26}}
\addcontentsline{toc}{subsubsection}{Internal Module Inputs}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1724}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.3362}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1207}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.3707}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Package
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Module
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Outputs
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule()
\endhead
VEPowertrainsAndFuels & \protect\hyperlink{verspm-calculatecarbonintensity}{CalculateCarbonIntensity} & \textbf{ElectricityCI} & Carbon intensity of electricity at point of consumption (grams CO2e per megajoule) \\
VEPowertrainsAndFuels & \protect\hyperlink{verspm-calculatecarbonintensity}{CalculateCarbonIntensity} & \textbf{HhAutoFuelCI} & Average carbon intensity of fuels used by household automobiles (grams CO2e per megajoule)) \\
VEPowertrainsAndFuels & \protect\hyperlink{verspm-calculatecarbonintensity}{CalculateCarbonIntensity} & \textbf{HhLtTrkFuelCI} & Average carbon intensity of fuels used by household light trucks (grams CO2e per megajoule) \\
VEPowertrainsAndFuels & \protect\hyperlink{verspm-calculatecarbonintensity}{CalculateCarbonIntensity} & \textbf{CarSvcAutoFuelCI} & Average carbon intensity of fuels used by car service automobiles (grams CO2e per megajoule) \\
VEPowertrainsAndFuels & \protect\hyperlink{verspm-calculatecarbonintensity}{CalculateCarbonIntensity} & \textbf{CarSvcLtTrkFuelCI} & Average carbon intensity of fuels used by car service light trucks (grams CO2e per megajoule) \\
ESimHouseholds & \protect\hyperlink{verspm-createhouseholds}{CreateHouseholds} & \textbf{HhId} & Household id \\
VELandUse & \protect\hyperlink{verspm-assignloctypes}{AssignLocTypes} & \textbf{LocType} & Location type (Urban, Town, Rural) of the place where the household resides \\
VEHouseholdVehicles & \protect\hyperlink{verspm-assignvehicleownership}{AssignVehicleOwnership} & \textbf{Vehicles} & Number of automobiles and light trucks owned or leased by the household including high level car service vehicles available to driving-age persons \\
VEHouseholdVehicles & \protect\hyperlink{verspm-assignvehicletype}{AssignVehicleType} & \textbf{NumAuto} & Number of automobiles (i.e.~4-tire passenger vehicles that are not light trucks) owned or leased by household \\
VEHouseholdVehicles & \protect\hyperlink{verspm-assignvehicletype}{AssignVehicleType} & \textbf{NumLtTrk} & Number of light trucks (pickup, sport-utility vehicle, and van) owned or leased by household \\
VELandUse & \protect\hyperlink{verspm-predicthousing}{PredictHousing} & \textbf{HouseType} & Type of dwelling unit of the household \\
VEHouseholdTravel & \protect\hyperlink{verspm-calculatehouseholddvmt}{CalculateHouseholdDvmt} & \textbf{Dvmt} & Average daily vehicle miles traveled by the household in autos or light trucks \\
VEHouseholdVehicles & \protect\hyperlink{verspm-createvehicletable}{CreateVehicleTable} & \textbf{VehId} & Unique vehicle ID \\
VEHouseholdVehicles & \protect\hyperlink{verspm-assignvehicleage}{AssignVehicleAge} & \textbf{Type} & Vehicle body type: Auto = automobile, LtTrk = light trucks (i.e.~pickup, SUV, Van) \\
VEHouseholdVehicles & \protect\hyperlink{verspm-assignvehicleage}{AssignVehicleAge} & \textbf{Age} & Vehicle age in years \\
VEHouseholdVehicles & \protect\hyperlink{verspm-createvehicletable}{CreateVehicleTable} & \textbf{VehicleAccess} & Identifier whether vehicle is owned by household (Own), if vehicle is low level car service (LowCarSvc), or if vehicle is high level car service (HighCarSvc) \\
\bottomrule()
\end{longtable}

\hypertarget{module-outputs-27}{%
\subsubsection*{Module Outputs}\label{module-outputs-27}}
\addcontentsline{toc}{subsubsection}{Module Outputs}

\begin{itemize}
\tightlist
\item
  \textbf{Powertrain}: Vehicle powertrain type: ICEV = internal combustion engine vehicle, HEV = hybrid electric vehicle, PHEV = plug-in hybrid electric vehicle, BEV = battery electric vehicle, NA = not applicable because is a car service vehicle
\item
  \textbf{BatRng}: Miles of travel possible on fully charged battery
\item
  \textbf{MPG}: Average miles of vehicle travel powered by fuel per gasoline equivalent gallon
\item
  \textbf{GPM}: Average gasoline equivalent gallons per mile of vehicle travel powered by fuel
\item
  \textbf{MPKWH}: Average miles of vehicle travel powered by electricity per kilowatt-hour
\item
  \textbf{KWHPM}: Average kilowatt-hours per mile of vehicle travel powered by electricity
\item
  \textbf{MPGe}: Average miles of vehicle travel per gasoline equivalent gallon (fuel and electric powered)
\item
  \textbf{ElecDvmtProp}: Average miles of vehicle travel per gasoline equivalent gallon (fuel and electric powered)
\item
  \textbf{FuelCO2ePM}: Average grams of carbon-dioxide equivalents produced per mile of travel powered by fuel
\item
  \textbf{ElecCO2ePM}: Average grams of carbon-dioxide equivalents produced per mile of travel powered by electricity
\end{itemize}

For more information see \href{https://github.com/visioneval/VisionEval/blob/master/sources/modules/VEPowertrainsAndFuels/inst/module_docs/AssignHhVehiclePowertrain.md}{here}

\hypertarget{verspm-initialize-vetravelperformance}{%
\subsection{Initialize-vetravelperformance}\label{verspm-initialize-vetravelperformance}}

This module reads and processes roadway DVMT and operations inputs.
The following input files are optional. If these data are not provided, the model calculates values based on default data included with the package and processed by the \texttt{LoadDefaultRoadDvmtValues.R} script.

\hypertarget{user-input-files-28}{%
\subsubsection*{User Input Files}\label{user-input-files-28}}
\addcontentsline{toc}{subsubsection}{User Input Files}

\hypertarget{base-year-heavy-truck-dvmt-region_base_year_dvmt.csv}{%
\paragraph*{Base Year Heavy Truck DVMT (region\_base\_year\_dvmt.csv)}\label{base-year-heavy-truck-dvmt-region_base_year_dvmt.csv}}
\addcontentsline{toc}{paragraph}{Base Year Heavy Truck DVMT (region\_base\_year\_dvmt.csv)}

This input file is OPTIONAL. It is only needed if the user wants to adjust heavy truck DVMT for base year

\begin{itemize}
\tightlist
\item
  \textbf{HvyTrkDvmtGrowthBasis}: Factor used to grow heavy truck DVMT from base year value
\item
  \textbf{HvyTrkDvmt}: Average daily vehicle miles of travel on roadways in the region by heavy trucks during he base year
\item
  \textbf{ComSvcDvmtGrowthBasis}: Factor used to grow commercial service vehicle DVMT in Marea from base year value
\end{itemize}

Here is a snapshot of the file:

\begin{tabular}{l|c|c|c}
\hline
StateAbbrLookup & HvyTrkDvmtGrowthBasis & HvyTrkDvmt & ComSvcDvmtGrowthBasis\\
\hline
 & Income & NA & Population\\
\hline
\end{tabular}

\hypertarget{base-year-dvmt-marea_base_year_dvmt.csv}{%
\paragraph*{Base Year DVMT (marea\_base\_year\_dvmt.csv)}\label{base-year-dvmt-marea_base_year_dvmt.csv}}
\addcontentsline{toc}{paragraph}{Base Year DVMT (marea\_base\_year\_dvmt.csv)}

This input file is OPTIONAL. It is only needed if the user wants to modify the adjust dvmt growth factors from base year in by Marea

\begin{itemize}
\tightlist
\item
  \textbf{UrbanLdvDvmt}: Average daily vehicle miles of travel on roadways in the urbanized portion of the Marea by light-duty vehicles during the base year
\item
  \textbf{UrbanHvyTrkDvmt}: Average daily vehicle miles of travel on roadways in the urbanized portion of the Marea by heavy trucks during he base year
\end{itemize}

Here is a snapshot of the file:

\begin{tabular}{l|c|c|c}
\hline
Geo & UzaNameLookup & UrbanLdvDvmt & UrbanHvyTrkDvmt\\
\hline
RVMPO & Medford/OR & NA & NA\\
\hline
\end{tabular}

\hypertarget{dvmt-split-by-road-class-marea_dvmt_split_by_road_class.csv}{%
\paragraph*{DVMT Split by Road Class (marea\_dvmt\_split\_by\_road\_class.csv)}\label{dvmt-split-by-road-class-marea_dvmt_split_by_road_class.csv}}
\addcontentsline{toc}{paragraph}{DVMT Split by Road Class (marea\_dvmt\_split\_by\_road\_class.csv)}

This input file is OPTIONAL. It is only needed if the user wants to modify the DVMT split for different road classes. This data can be derived from the FHWA \href{https://www.fhwa.dot.gov/policyinformation/statistics.cfm}{Highway Statistics} data.

\begin{itemize}
\tightlist
\item
  \textbf{LdvFwyArtDvmtProp}: Proportion of light-duty daily vehicle miles of travel in the urbanized portion of the Marea occurring on freeway or aerial roadways
\item
  \textbf{LdvOthDvmtProp}: Proportion of light-duty daily vehicle miles of travel in the urbanized portion of the Marea occurring on other roadways
\item
  \textbf{HvyTrkFwyDvmtProp}: Proportion of heavy truck daily vehicle miles of travel in the urbanized portion of the Marea occurring on freeways
\item
  \textbf{HvyTrkArtDvmtProp}: Proportion of heavy truck daily vehicle miles of travel in the urbanized portion of the Marea occurring on arterial rdways
\item
  \textbf{HvyTrkOthDvmtProp}: Proportion of heavy truck daily vehicle miles of travel in the urbanized portion of the Marea occurring on other roadways
\item
  \textbf{BusFwyDvmtProp}: Proportion of bus daily vehicle miles of travel in the urbanized portion of the Marea occurring on freeways
\item
  \textbf{BusArtDvmtProp}: Proportion of bus daily vehicle miles of travel in the urbanized portion of the Marea occurring on arterial roadways
\item
  \textbf{BusOthDvmtProp}: Proportion of bus daily vehicle miles of travel in the urbanized portion of the Marea occuring on other roadways
\end{itemize}

Here is a snapshot of the file:

\begin{tabular}{l|c|c|c|c|c|c|c|c|c}
\hline
Geo & LdvFwyDvmtProp & LdvArtDvmtProp & LdvOthDvmtProp & HvyTrkFwyDvmtProp & HvyTrkArtDvmtProp & HvyTrkOthDvmtProp & BusFwyDvmtProp & BusArtDvmtProp & BusOthDvmtProp\\
\hline
RVMPO & 0.2632296 & 0.47739 & 0.2593804 &  &  &  & 0 & 0.6962986 & 0.3037014\\
\hline
\end{tabular}

\hypertarget{operations-deployment-effects-on-dvmt-marea_operations_deployment.csv}{%
\paragraph*{\texorpdfstring{Operations Deployment Effects on DVMT (\textbf{marea\_operations\_deployment.csv})}{Operations Deployment Effects on DVMT (marea\_operations\_deployment.csv)}}\label{operations-deployment-effects-on-dvmt-marea_operations_deployment.csv}}
\addcontentsline{toc}{paragraph}{Operations Deployment Effects on DVMT (\textbf{marea\_operations\_deployment.csv})}

This input file is OPTIONAL. It is only needed if the user wants to modify the proportion of DVMT affected by operations for different road classes.

\begin{itemize}
\tightlist
\item
  \textbf{RampMeterDeployProp}: Proportion of freeway DVMT affected by ramp metering deployment
\item
  \textbf{IncidentMgtDeployProp}: Proportion of freeway DVMT affected by incident management deployment
\item
  \textbf{SignalCoordDeployProp}: Proportion of arterial DVMT affected by signal coordination deployment
\item
  \textbf{AccessMgtDeployProp}: Proportion of arterial DVMT affected by access management deployment
\item
  \textbf{OtherFwyOpsDeployProp}: Proportion of freeway DVMT affected by deployment of other user-defined freeway operations measures
\item
  \textbf{OtherArtOpsDeployProp}: Proportion of arterial DVMT affected by deployment of other user-defined arterial operations measures
\end{itemize}

Here is a snapshot of the file:

\begin{tabular}{l|c|c|c|c|c|c|c}
\hline
Geo & Year & RampMeterDeployProp & IncidentMgtDeployProp & SignalCoordDeployProp & AccessMgtDeployProp & OtherFwyOpsDeployProp & OtherArtOpsDeployProp\\
\hline
RVMPO & 2010 & 0.00 & 0.50 & 0.50 & 0.00 & 0 & 0\\
\hline
RVMPO & 2038 & 0.95 & 0.95 & 0.95 & 0.24 & 0 & 0\\
\hline
\end{tabular}

\hypertarget{other-operations-effects-other_ops_effectiveness.csv}{%
\paragraph*{Other Operations Effects (other\_ops\_effectiveness.csv)}\label{other-operations-effects-other_ops_effectiveness.csv}}
\addcontentsline{toc}{paragraph}{Other Operations Effects (other\_ops\_effectiveness.csv)}

This input file is OPTIONAL. It is only needed if the user wants to modify the other delay effects of operations in different road classes

\begin{itemize}
\tightlist
\item
  \textbf{Level}: Congestion levels: None = none, Mod = moderate, Hvy = heavy, Sev = severe, Ext = extreme
\item
  \textbf{Art\_Rcr}: Percentage reduction of recurring arterial delay that would occur with full deployment of other user-defined arterial operations measures
\item
  \textbf{Art\_NonRcr}: Percentage reduction of non-recurring arterial delay that would occur with full deployment of other user-defined arterial operations measures
\item
  \textbf{Fwy\_Rcr}: Percentage reduction of recurring freeway delay that would occur with full deployment of other user-defined freeway operations measures
\item
  \textbf{Fwy\_NonRcr}: Percentage reduction of non-recurring freeway delay that would occur with full deployment of other user-defined freeway operations measures
\end{itemize}

Here is a snapshot of the file:

\begin{tabular}{l|c|c|c|c|c|c|c}
\hline
Level & Art\_Rcr & Art\_NonRcr & Fwy\_Rcr & Fwy\_NonRcr & AccessMgtDeployProp & OtherFwyOpsDeployProp & OtherArtOpsDeployProp\\
\hline
None & 0 & 0 & 0 & 0 & 0 & 0 & 0\\
\hline
Mod & 0 & 0 & 0 & 0 & 0 & 0 & 0\\
\hline
Hvy & 0 & 0 & 0 & 0 & 0 & 0 & 0\\
\hline
sev & 0 & 0 & 0 & 0 & 0 & 0 & 0\\
\hline
Ext & 0 & 0 & 0 & 0 & 0 & 0 & 0\\
\hline
\end{tabular}

\hypertarget{congestion-charges-marea_congestion_charges.csv}{%
\paragraph*{\texorpdfstring{Congestion Charges (\textbf{marea\_congestion\_charges.csv})}{Congestion Charges (marea\_congestion\_charges.csv)}}\label{congestion-charges-marea_congestion_charges.csv}}
\addcontentsline{toc}{paragraph}{Congestion Charges (\textbf{marea\_congestion\_charges.csv})}

This input file is OPTIONAL. It is only needed if the user wants to add a congestion charge policy for vehicle travel using different congestion levels and roadway classes.

\begin{itemize}
\tightlist
\item
  \textbf{FwyNoneCongChg}: Charge per mile (U.S. dollars) of vehicle travel on freeways during periods of no congestion
\item
  \textbf{FwyModCongChg}: Charge per mile (U.S. dollars) of vehicle travel on freeways during periods of moderate congestion
\item
  \textbf{FwyHvyCongChg}: Charge per mile (U.S. dollars) of vehicle travel on freeways during periods of heavy congestion
\item
  \textbf{FwySevCongChg}: Charge per mile (U.S. dollars) of vehicle travel on freeways during periods of severe congestion
\item
  \textbf{FwyExtCongChg}: Charge per mile (U.S. dollars) of vehicle travel on freeways during periods of extreme congestion
\item
  \textbf{ArtNoneCongChg}: Charge per mile (U.S. dollars) of vehicle travel on arterials during periods of no congestion
\item
  \textbf{ArtModCongChg}: Charge per mile (U.S. dollars) of vehicle travel on arterials during periods of moderate congestion
\item
  \textbf{ArtHvyCongChg}: Charge per mile (U.S. dollars) of vehicle travel on arterials during periods of heavy congestion
\item
  \textbf{ArtSevCongChg}: Charge per mile (U.S. dollars) of vehicle travel on arterials during periods of severe congestion
\item
  \textbf{ArtExtCongChg}: Charge per mile (U.S. dollars) of vehicle travel on arterials during periods of extreme congestion
\end{itemize}

Here is a snapshot of the file:

\begin{tabular}{l|c|c|c|c|c|c|c|c|c|c|c}
\hline
Geo & Year & FwyNoneCongChg.2010 & FwyModCongChg.2010 & FwyHvyCongChg.2010 & FwySevCongChg.2010 & FwyExtCongChg.2010 & ArtNoneCongChg.2010 & ArtModCongChg.2010 & ArtHvyCongChg.2010 & ArtSevCongChg.2010 & ArtExtCongChg.2010\\
\hline
RVMPO & 2010 & 0 & 0 & 0 & 0.0 & 0.0 & 0 & 0 & 0 & 0 & 0\\
\hline
RVMPO & 2038 & 0 & 0 & 0 & 0.1 & 0.2 & 0 & 0 & 0 & 0 & 0\\
\hline
\end{tabular}

\hypertarget{internal-module-inputs-27}{%
\subsubsection*{Internal Module Inputs}\label{internal-module-inputs-27}}
\addcontentsline{toc}{subsubsection}{Internal Module Inputs}

This module uses no datasets that are in the datastore.

\hypertarget{module-outputs-28}{%
\subsubsection*{Module Outputs}\label{module-outputs-28}}
\addcontentsline{toc}{subsubsection}{Module Outputs}

This module produces no datasets to store in the datastore.

\hypertarget{verspm-calculatebaseroaddvmt}{%
\subsection{CalculateBaseRoadDvmt}\label{verspm-calculatebaseroaddvmt}}

This module calculates base year roadway DVMT by vehicle type (light-duty, heavy truck, bus) and the distribution of roadway DVMT by vehicle type to roadway classes (freeway, arterial, other)
This module uses optional user inputs if \protect\hyperlink{initialize-vetravelperformance}{Initialize} module is run. Otherwise, it uses default data in \href{https://github.com/gregorbj/VisionEval/tree/develop/sources/modules/VETravelPerformance/inst/extdata}{inst\extdata folder}

\hypertarget{user-input-files-29}{%
\subsubsection*{User Input Files}\label{user-input-files-29}}
\addcontentsline{toc}{subsubsection}{User Input Files}

\hypertarget{base-year-heavy-truck-dvmt-region_base_year_dvmt.csv-1}{%
\paragraph*{\texorpdfstring{Base Year Heavy Truck DVMT (\textbf{region\_base\_year\_dvmt.csv})}{Base Year Heavy Truck DVMT (region\_base\_year\_dvmt.csv)}}\label{base-year-heavy-truck-dvmt-region_base_year_dvmt.csv-1}}
\addcontentsline{toc}{paragraph}{Base Year Heavy Truck DVMT (\textbf{region\_base\_year\_dvmt.csv})}

This input file is OPTIONAL. It is only needed if the user wants to adjust heavy truck DVMT for base year

\begin{itemize}
\tightlist
\item
  \textbf{HvyTrkDvmtGrowthBasis}: Factor used to grow heavy truck DVMT from base year value
\item
  \textbf{HvyTrkDvmt}: Average daily vehicle miles of travel on roadways in the region by heavy trucks during he base year
\item
  \textbf{ComSvcDvmtGrowthBasis}: Factor used to grow commercial service vehicle DVMT in Marea from base year value
\end{itemize}

Here is a snapshot of the file:

\begin{tabular}{l|c|c|c}
\hline
StateAbbrLookup & HvyTrkDvmtGrowthBasis & HvyTrkDvmt & ComSvcDvmtGrowthBasis\\
\hline
 & Income & NA & Population\\
\hline
\end{tabular}

\hypertarget{base-year-dvmt-marea_base_year_dvmt.csv-1}{%
\paragraph*{\texorpdfstring{Base Year DVMT (\textbf{marea\_base\_year\_dvmt.csv})}{Base Year DVMT (marea\_base\_year\_dvmt.csv)}}\label{base-year-dvmt-marea_base_year_dvmt.csv-1}}
\addcontentsline{toc}{paragraph}{Base Year DVMT (\textbf{marea\_base\_year\_dvmt.csv})}

This input file is OPTIONAL. It is only needed if the user wants to modify the adjust dvmt growth factors from base year in by Marea

\begin{itemize}
\tightlist
\item
  \textbf{UrbanLdvDvmt}: Average daily vehicle miles of travel on roadways in the urbanized portion of the Marea by light-duty vehicles during the base year
\item
  \textbf{UrbanHvyTrkDvmt}: Average daily vehicle miles of travel on roadways in the urbanized portion of the Marea by heavy trucks during he base year
\end{itemize}

Here is a snapshot of the file:

\begin{tabular}{l|c|c|c}
\hline
Geo & UzaNameLookup & UrbanLdvDvmt & UrbanHvyTrkDvmt\\
\hline
RVMPO & Medford/OR & NA & NA\\
\hline
\end{tabular}

\hypertarget{dvmt-split-by-road-class-marea_dvmt_split_by_road_class.csv-1}{%
\paragraph*{DVMT Split by Road Class (marea\_dvmt\_split\_by\_road\_class.csv)}\label{dvmt-split-by-road-class-marea_dvmt_split_by_road_class.csv-1}}
\addcontentsline{toc}{paragraph}{DVMT Split by Road Class (marea\_dvmt\_split\_by\_road\_class.csv)}

This input file is OPTIONAL. It is only needed if the user wants to modify the dvmt split for different road classes. This data can be derived from the FHWA \href{https://www.fhwa.dot.gov/policyinformation/statistics.cfm}{Highway Statistics} data.

\begin{itemize}
\tightlist
\item
  \textbf{LdvFwyArtDvmtProp}: Proportion of light-duty daily vehicle miles of travel in the urbanized portion of the Marea occurring on freeway or aerial roadways
\item
  \textbf{LdvOthDvmtProp}: Proportion of light-duty daily vehicle miles of travel in the urbanized portion of the Marea occurring on other roadways
\item
  \textbf{HvyTrkFwyDvmtProp}: Proportion of heavy truck daily vehicle miles of travel in the urbanized portion of the Marea occurring on freeways
\item
  \textbf{HvyTrkArtDvmtProp}: Proportion of heavy truck daily vehicle miles of travel in the urbanized portion of the Marea occurring on arterial rdways
\item
  \textbf{HvyTrkOthDvmtProp}: Proportion of heavy truck daily vehicle miles of travel in the urbanized portion of the Marea occurring on other roadways
\item
  \textbf{BusFwyDvmtProp}: Proportion of bus daily vehicle miles of travel in the urbanized portion of the Marea occurring on freeways
\item
  \textbf{BusArtDvmtProp}: Proportion of bus daily vehicle miles of travel in the urbanized portion of the Marea occurring on arterial roadways
\item
  \textbf{BusOthDvmtProp}: Proportion of bus daily vehicle miles of travel in the urbanized portion of the Marea occuring on other roadways
\end{itemize}

Here is a snapshot of the file:

\begin{tabular}{l|c|c|c|c|c|c|c|c|c}
\hline
Geo & LdvFwyDvmtProp & LdvArtDvmtProp & LdvOthDvmtProp & HvyTrkFwyDvmtProp & HvyTrkArtDvmtProp & HvyTrkOthDvmtProp & BusFwyDvmtProp & BusArtDvmtProp & BusOthDvmtProp\\
\hline
RVMPO & 0.2632296 & 0.47739 & 0.2593804 &  &  &  & 0 & 0.6962986 & 0.3037014\\
\hline
\end{tabular}

\hypertarget{internal-module-inputs-28}{%
\subsubsection*{Internal Module Inputs}\label{internal-module-inputs-28}}
\addcontentsline{toc}{subsubsection}{Internal Module Inputs}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1724}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.3362}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1207}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.3707}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Package
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Module
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Outputs
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule()
\endhead
VETransportSupply & \protect\hyperlink{verspm-assigntransitservice}{AssignTransitService} & \textbf{VanDvmt} & Total daily miles traveled by vans of various sizes to provide demand responsive, vanpool, and similar services \\
VETransportSupply & \protect\hyperlink{verspm-assigntransitservice}{AssignTransitService} & \textbf{BusDvmt} & Total daily miles traveled by buses of various sizes to provide bus service of various types \\
VETransportSupply & \protect\hyperlink{verspm-assigntransitservice}{AssignTransitService} & \textbf{RailDvmt} & Total daily miles traveled by light rail, heavy rail, commuter rail, and similar types of vehicles \\
VELandUse & \protect\hyperlink{verspm-assignloctypes}{AssignLocTypes} & \textbf{UrbanPop} & Urbanized area population \\
VELandUse & \protect\hyperlink{verspm-assignloctypes}{AssignLocTypes} & \textbf{RuralPop} & Rural (i.e.~non-urbanized area) population \\
VELandUse & \href{assignloctypes}{AssignLocTypes} & \textbf{RuralIncome} & Total household income of the rural (i.e.~non-urbanized area) population \\
VELandUse & \protect\hyperlink{verspm-assignloctypes}{AssignLocTypes} & \textbf{UrbanIncome} & Total household income of the rural (i.e.~non-urbanized area) population \\
VEHouseholdTravel & \protect\hyperlink{verspm-calculatehouseholddvmt}{CalculateHouseholdDvmt} & \textbf{UrbanHhDvmt} & Average daily vehicle miles traveled in autos or light trucks by households residing in the urbanized portion of the Marea \\
VEHouseholdTravel & \protect\hyperlink{verspm-calculatehouseholddvmt}{CalculateHouseholdDvmt} & \textbf{RuralHhDvmt} & Average daily vehicle miles traveled in autos or light trucks by households residing in the rural (non-urban) portion of the Marea \\
\bottomrule()
\end{longtable}

\hypertarget{module-outputs-29}{%
\subsubsection*{Module Outputs}\label{module-outputs-29}}
\addcontentsline{toc}{subsubsection}{Module Outputs}

\begin{itemize}
\tightlist
\item
  \textbf{HvyTrkDvmtUrbanProp}: Proportion of Region heavy truck daily vehicle miles of travel occurring on urbanized area roadways
\item
  \textbf{HvyTrkDvmtIncomeFactor}: Ratio of Region base year heavy truck DVMT to household income
\item
  \textbf{HvyTrkDvmtPopulationFactor}: Ratio of Region base year heavy truck DVMT to population
\item
  \textbf{HvyTrkUrbanDvmt}: Base year Region heavy truck daily vehicle miles of travel in urbanized areas
\item
  \textbf{HvyTrkRuralDvmt}: Base year Region heavy truck daily vehicle miles of travel in rural (i.e.~non-urbanized) areas
\item
  \textbf{ComSvcDvmtHhDvmtFactor}: Ratio of Marea base year commercial service DVMT to household DVMT
\item
  \textbf{ComSvcDvmtIncomeFactor}: Ratio of base year commercial service vehicle DVMT to household income
\item
  \textbf{ComSvcDvmtPopulationFactor}: Ratio of base year commercial service vehicle DVMT to population
\item
  \textbf{HvyTrkDvmtPopulationFactor}: Ratio of base year heavy truck DVMT to population
\item
  \textbf{LdvRoadDvmtLdvDemandRatio}: Ratio between light-duty vehicle (LDV) daily vehicle miles of travel (DVMT) on urbanized area roadways in the Marea to the total LDV DVMT of households residing in the urbanized area, the commercial service vehicle travel related to household demand, and LDV public transit DVMT.
\item
  \textbf{ComSvcUrbanDvmt}: Commercial service daily vehicle miles of travel associated with Marea urbanized household activity
\item
  \textbf{ComSvcRuralDvmt}: Commercial service daily vehicle miles of travel associated with Marea rural household activity
\item
  \textbf{LdvFwyArtDvmtProp}: Proportion of light-duty daily vehicle miles of travel in the urbanized portion of the Marea occurring on freeway or arterial roadways
\item
  \textbf{LdvOthDvmtProp}: Proportion of light-duty daily vehicle miles of travel in the urbanized portion of the Marea occurring on other roadways
\item
  \textbf{HvyTrkFwyDvmtProp}: Proportion of heavy truck daily vehicle miles of travel in the urbanized portion of the Marea occurring on freeways
\item
  \textbf{HvyTrkArtDvmtProp}: Proportion of heavy truck daily vehicle miles of travel in the urbanized portion of the Marea occurring on arterial roadways
\item
  \textbf{HvyTrkOthDvmtProp}: Proportion of heavy truck daily vehicle miles of travel in the urbanized portion of the Marea occurring on other roadways
\item
  \textbf{BusFwyDvmtProp}: Proportion of bus daily vehicle miles of travel in the urbanized portion of the Marea occurring on freeways
\item
  \textbf{BusArtDvmtProp}: Proportion of bus daily vehicle miles of travel in the urbanized portion of the Marea occurring on arterial roadways
\item
  \textbf{BusOthDvmtProp}: Proportion of bus daily vehicle miles of travel in the urbanized portion of the Marea occuring on other roadways
\item
  \textbf{LdvFwyArtDvmt}: Light-duty daily vehicle miles of travel in the urbanized portion of the Marea occurring on freeway or arterial roadways
\item
  \textbf{LdvOthDvmt}: Light-duty daily vehicle miles of travel in the urbanized portion of the Marea occurring on other roadways
\item
  \textbf{HvyTrkFwyDvmt}: Heavy truck daily vehicle miles of travel in the urbanized portion of the Marea occurring on freeways
\item
  \textbf{HvyTrkArtDvmt}:Heavy truck daily vehicle miles of travel in the urbanized portion of the Marea occurring on arterial roadways
\item
  \textbf{HvyTrkOthDvmt}: Heavy truck daily vehicle miles of travel in the urbanized portion of the Marea occurring on other roadways
\item
  \textbf{BusFwyDvmt}: Bus daily vehicle miles of travel in the urbanized portion of the Marea occurring on freeways
\item
  \textbf{BusArtDvmt}: Bus daily vehicle miles of travel in the urbanized portion of the Marea occurring on arterial roadways
\item
  \textbf{BusOthDvmt}: Bus daily vehicle miles of travel in the urbanized portion of the Marea occuring on other roadways
\end{itemize}

\hypertarget{verspm-calculatefutureroaddvmt}{%
\subsection{CalculateFutureRoadDvmt}\label{verspm-calculatefutureroaddvmt}}

This module calculates future year roadway DVMT by vehicle type (light-duty, heavy truck, bus) and the distribution of roadway DVMT by vehicle type to roadway classes (freeway, arterial, other)
This module uses optional user inputs if \protect\hyperlink{initialize-vetravelperformance}{Initialize} module is run. Otherwise, it uses default data in \href{https://github.com/gregorbj/VisionEval/tree/develop/sources/modules/VETravelPerformance/inst/extdata}{inst\extdata folder}

\hypertarget{user-input-files-30}{%
\subsubsection*{User Input Files}\label{user-input-files-30}}
\addcontentsline{toc}{subsubsection}{User Input Files}

\hypertarget{base-year-heavy-truck-dvmt-region_base_year_dvmt.csv-2}{%
\paragraph*{Base Year Heavy Truck DVMT (region\_base\_year\_dvmt.csv)}\label{base-year-heavy-truck-dvmt-region_base_year_dvmt.csv-2}}
\addcontentsline{toc}{paragraph}{Base Year Heavy Truck DVMT (region\_base\_year\_dvmt.csv)}

This input file is OPTIONAL. It is only needed if the user wants to adjust heavy truck DVMT for base year

\begin{itemize}
\tightlist
\item
  \textbf{HvyTrkDvmtGrowthBasis}: Factor used to grow heavy truck DVMT from base year value
\item
  \textbf{HvyTrkDvmt}: Average daily vehicle miles of travel on roadways in the region by heavy trucks during he base year
\item
  \textbf{ComSvcDvmtGrowthBasis}: Factor used to grow commercial service vehicle DVMT in Marea from base year value
\end{itemize}

Here is a snapshot of the file:

\begin{tabular}{l|c|c|c}
\hline
StateAbbrLookup & HvyTrkDvmtGrowthBasis & HvyTrkDvmt & ComSvcDvmtGrowthBasis\\
\hline
 & Income & NA & Population\\
\hline
\end{tabular}

\hypertarget{base-year-dvmt-marea_base_year_dvmt.csv-2}{%
\paragraph*{Base Year DVMT (marea\_base\_year\_dvmt.csv)}\label{base-year-dvmt-marea_base_year_dvmt.csv-2}}
\addcontentsline{toc}{paragraph}{Base Year DVMT (marea\_base\_year\_dvmt.csv)}

This input file is OPTIONAL. It is only needed if the user wants to modify the adjust dvmt growth factors from base year in by Marea

\begin{itemize}
\tightlist
\item
  \textbf{UrbanLdvDvmt}: Average daily vehicle miles of travel on roadways in the urbanized portion of the Marea by light-duty vehicles during the base year
\item
  \textbf{UrbanHvyTrkDvmt}: Average daily vehicle miles of travel on roadways in the urbanized portion of the Marea by heavy trucks during he base year
\end{itemize}

Here is a snapshot of the file:

\begin{tabular}{l|c|c|c}
\hline
Geo & UzaNameLookup & UrbanLdvDvmt & UrbanHvyTrkDvmt\\
\hline
RVMPO & Medford/OR & NA & NA\\
\hline
\end{tabular}

\hypertarget{internal-module-inputs-29}{%
\subsubsection{Internal Module Inputs}\label{internal-module-inputs-29}}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1724}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.3362}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1207}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.3707}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Package
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Module
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Outputs
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule()
\endhead
VETravelPerformance & \protect\hyperlink{verspm-calculatebaseroaddvmt}{CalculateBaseRoadDvmt} & \textbf{HvyTrkDvmtIncomeFactor} & Ratio of Region base year heavy truck DVMT to household income \\
vetravelperformance & \protect\hyperlink{verspm-calculatebaseroaddvmt}{CalculateBaseRoadDvmt} & \textbf{HvyTrkDvmtUrbanProp} & proportion of region heavy truck daily vehicle miles of travel occurring on urbanized area roadways \\
VETravelPerformance & \protect\hyperlink{verspm-calculatebaseroaddvmt}{CalculateBaseRoadDvmt} & \textbf{HvyTrkDvmtPopulationFactor} & Ratio of Region base year heavy truck DVMT to population \\
VETravelPerformance & \protect\hyperlink{verspm-calculatebaseroaddvmt}{CalculateBaseRoadDvmt} & \textbf{LdvFwyArtDvmtProp} & Proportion of light-duty daily vehicle miles of travel in the urbanized portion of the Marea occurring on freeway or arterial roadways \\
VETravelPerformance & \protect\hyperlink{verspm-calculatebaseroaddvmt}{CalculateBaseRoadDvmt} & \textbf{LdvOthDvmtProp} & Proportion of light-duty daily vehicle miles of travel in the urbanized portion of the Marea occurring on other roadways \\
VETravelPerformance & \protect\hyperlink{verspm-calculatebaseroaddvmt}{CalculateBaseRoadDvmt} & \textbf{HvyTrkFwyDvmtProp} & Proportion of heavy truck daily vehicle miles of travel in the urbanized portion of the Marea occurring on freeways \\
VETravelPerformance & \protect\hyperlink{verspm-calculatebaseroaddvmt}{CalculateBaseRoadDvmt} & \textbf{LdvOthDvmtProp} & Proportion of heavy truck daily vehicle miles of travel in the urbanized portion of the Marea occurring on freeways \\
VETravelPerformance & \protect\hyperlink{verspm-calculatebaseroaddvmt}{CalculateBaseRoadDvmt} & \textbf{HvyTrkFwyDvmtProp} & Proportion of heavy truck daily vehicle miles of travel in the urbanized portion of the Marea occurring on arterial roadways \\
VETravelPerformance & \protect\hyperlink{verspm-calculatebaseroaddvmt}{CalculateBaseRoadDvmt} & \textbf{HvyTrkArtDvmtProp} & Proportion of heavy truck daily vehicle miles of travel in the urbanized portion of the Marea occurring on arterial roadways \\
VETravelPerformance & \protect\hyperlink{verspm-calculatebaseroaddvmt}{CalculateBaseRoadDvmt} & \textbf{HvyTrkOthDvmtProp} & Proportion of heavy truck daily vehicle miles of travel in the urbanized portion of the Marea occurring on other roadways \\
VETravelPerformance & \protect\hyperlink{verspm-calculatebaseroaddvmt}{CalculateBaseRoadDvmt} & \textbf{BusFwyDvmtProp} & Proportion of bus daily vehicle miles of travel in the urbanized portion of the Marea occurring on freeways \\
VETravelPerformance & \protect\hyperlink{verspm-calculatebaseroaddvmt}{CalculateBaseRoadDvmt} & \textbf{BusArtDvmtProp} & Proportion of bus daily vehicle miles of travel in the urbanized portion of the Marea occurring on arterial roadways \\
VETravelPerformance & \protect\hyperlink{verspm-calculatebaseroaddvmt}{CalculateBaseRoadDvmt} & \textbf{BusOthDvmtProp} & Proportion of bus daily vehicle miles of travel in the urbanized portion of the Marea occuring on other roadways \\
VETravelPerformance & \protect\hyperlink{verspm-calculatebaseroaddvmt}{CalculateBaseRoadDvmt} & \textbf{ComSvcDvmtHhDvmtFactor} & Ratio of Marea base year commercial service DVMT to household DVMT \\
VETravelPerformance & \protect\hyperlink{verspm-calculatebaseroaddvmt}{CalculateBaseRoadDvmt} & \textbf{ComSvcDvmtIncomeFactor} & Ratio of base year commercial service vehicle DVMT to household income \\
VELandUse & \protect\hyperlink{verspm-calculatebaseroaddvmt}{CalculateBaseRoadDvmt} & \textbf{ComSvcDvmtPopulationFactor} & Ratio of base year commercial service vehicle DVMT to population \\
VELandUse & \protect\hyperlink{verspm-calculatebaseroaddvmt}{CalculateBaseRoadDvmt} & \textbf{HvyTrkDvmtPopulationFactor} & Ratio of base year heavy truck DVMT to population \\
VELandUse & \href{calculatebaseroaddvmt}{CalculateBaseRoadDvmt} & \textbf{LdvRoadDvmtLdvDemandRatio} & Ratio between light-duty vehicle (LDV) daily vehicle miles of travel (DVMT) on urbanized area roadways in the Marea to the total LDV DVMT of households residing in the urbanized area, the commercial service vehicle travel related to household demand, and LDV public transit DVMT \\
VETransportSupply & \protect\hyperlink{verspm-assigntransitservice}{AssignTransitService} & \textbf{VanDvmt} & Total daily miles traveled by vans of various sizes to provide demand responsive, vanpool, and similar services \\
VETransportSupply & \protect\hyperlink{verspm-assigntransitservice}{AssignTransitService} & \textbf{BusDvmt} & Total daily miles traveled by buses of various sizes to provide bus service of various types \\
VELandUse & \protect\hyperlink{verspm-assignloctypes}{AssignLocTypes} & \textbf{UrbanPop} & Urbanized area population \\
VELandUse & \protect\hyperlink{verspm-assignloctypes}{AssignLocTypes} & \textbf{RuralPop} & Rural (i.e.~non-urbanized area) population \\
VELandUse & \href{assignloctypes}{AssignLocTypes} & \textbf{RuralIncome} & Total household income of the rural (i.e.~non-urbanized area) population \\
VELandUse & \protect\hyperlink{verspm-assignloctypes}{AssignLocTypes} & \textbf{UrbanIncome} & Total household income of the rural (i.e.~non-urbanized area) population \\
VEHouseholdTravel & \protect\hyperlink{verspm-calculatehouseholddvmt}{CalculateHouseholdDvmt} & \textbf{UrbanHhDvmt} & Average daily vehicle miles traveled in autos or light trucks by households residing in the urbanized portion of the Marea \\
VEHouseholdTravel & \protect\hyperlink{verspm-calculatehouseholddvmt}{CalculateHouseholdDvmt} & \textbf{RuralHhDvmt} & Average daily vehicle miles traveled in autos or light trucks by households residing in the rural (non-urban) portion of the Marea \\
\bottomrule()
\end{longtable}

\hypertarget{module-outputs-30}{%
\subsubsection{Module Outputs}\label{module-outputs-30}}

\begin{itemize}
\tightlist
\item
  \textbf{HvyTrkUrbanDvmt}: Base year Region heavy truck daily vehicle miles of travel in urbanized areas
\item
  \textbf{HvyTrkRuralDvmt}: Base year Region heavy truck daily vehicle miles of travel in rural (i.e.~non-urbanized) areas
\item
  \textbf{ComSvcUrbanDvmt}: Commercial service daily vehicle miles of travel associated with Marea urbanized household activity
\item
  \textbf{ComSvcRuralDvmt}: Commercial service daily vehicle miles of travel associated with Marea rural household activity
\item
  \textbf{LdvFwyArtDvmt}: Light-duty daily vehicle miles of travel in the urbanized portion of the Marea occurring on freeway or arterial roadways
\item
  \textbf{LdvOthDvmt}: Light-duty daily vehicle miles of travel in the urbanized portion of the Marea occurring on other roadways
\item
  \textbf{HvyTrkFwyDvmt}: Heavy truck daily vehicle miles of travel in the urbanized portion of the Marea occurring on freeways
\item
  \textbf{HvyTrkArtDvmt}:Heavy truck daily vehicle miles of travel in the urbanized portion of the Marea occurring on arterial roadways
\item
  \textbf{HvyTrkOthDvmt}: Heavy truck daily vehicle miles of travel in the urbanized portion of the Marea occurring on other roadways
\item
  \textbf{BusFwyDvmt}: Bus daily vehicle miles of travel in the urbanized portion of the Marea occurring on freeways
\item
  \textbf{BusArtDvmt}: Bus daily vehicle miles of travel in the urbanized portion of the Marea occurring on arterial roadways
\item
  \textbf{BusOthDvmt}: Bus daily vehicle miles of travel in the urbanized portion of the Marea occuring on other roadways
\end{itemize}

\hypertarget{verspm-calculateroadperformance}{%
\subsection{CalculateRoadPerformance}\label{verspm-calculateroadperformance}}

This module splits light-duty vehicle (LDV) daily vehicle miles of travel DVHT between freeways and arterials as a function of relative speeds and congestion prices. Speeds and prices are combined to calculate an average `effective' speed for freeways and for arterials. The ratio of freeway and arterial `effective' speeds and a split factor calculated for the metropolitan area are used to split the LDV DVMT. Iteration is used to find an equilibrium split value. In addition to the LDV freeway DVMT and arterial DVMT, the following performance measures are saved to the datastore:

\begin{itemize}
\tightlist
\item
  Average freeway speed by congestion level;
\item
  Average arterial speed by congestion level;
\item
  Average freeway delay by congestion level;
\item
  Average arterial delay by congestion level;
\item
  Freeway DVMT proportions by congestion level;
\item
  Arterial DVMT proportions by congestion level;
\item
  Average amount paid per mile in congestion pricing fees; and,
\item
  Vehicle hours of delay by vehicle type.
\end{itemize}

\hypertarget{user-input-files-31}{%
\subsubsection*{User Input Files}\label{user-input-files-31}}
\addcontentsline{toc}{subsubsection}{User Input Files}

\hypertarget{operations-deployment-effects-on-dvmt-marea_operations_deployment.csv-1}{%
\paragraph*{\texorpdfstring{Operations Deployment Effects on DVMT (\textbf{marea\_operations\_deployment.csv})}{Operations Deployment Effects on DVMT (marea\_operations\_deployment.csv)}}\label{operations-deployment-effects-on-dvmt-marea_operations_deployment.csv-1}}
\addcontentsline{toc}{paragraph}{Operations Deployment Effects on DVMT (\textbf{marea\_operations\_deployment.csv})}

This input file is OPTIONAL. It is only needed if the user wants to modify the proportion of DVMT affected by operations for different road classes.

\begin{itemize}
\tightlist
\item
  \textbf{RampMeterDeployProp}: Proportion of freeway DVMT affected by ramp metering deployment
\item
  \textbf{IncidentMgtDeployProp}: Proportion of freeway DVMT affected by incident management deployment
\item
  \textbf{SignalCoordDeployProp}: Proportion of arterial DVMT affected by signal coordination deployment
\item
  \textbf{AccessMgtDeployProp}: Proportion of arterial DVMT affected by access management deployment
\item
  \textbf{OtherFwyOpsDeployProp}: Proportion of freeway DVMT affected by deployment of other user-defined freeway operations measures
\item
  \textbf{OtherArtOpsDeployProp}: Proportion of arterial DVMT affected by deployment of other user-defined arterial operations measures
\end{itemize}

Here is a snapshot of the file:

\begin{tabular}{l|c|c|c|c|c|c|c}
\hline
Geo & Year & RampMeterDeployProp & IncidentMgtDeployProp & SignalCoordDeployProp & AccessMgtDeployProp & OtherFwyOpsDeployProp & OtherArtOpsDeployProp\\
\hline
RVMPO & 2010 & 0.00 & 0.50 & 0.50 & 0.00 & 0 & 0\\
\hline
RVMPO & 2038 & 0.95 & 0.95 & 0.95 & 0.24 & 0 & 0\\
\hline
\end{tabular}

\hypertarget{other-operations-effects-other_ops_effectiveness.csv-1}{%
\paragraph*{Other Operations Effects (other\_ops\_effectiveness.csv)}\label{other-operations-effects-other_ops_effectiveness.csv-1}}
\addcontentsline{toc}{paragraph}{Other Operations Effects (other\_ops\_effectiveness.csv)}

This input file is OPTIONAL. It is only needed if the user wants to modify the other delay effects of operations in different road classes

\begin{itemize}
\tightlist
\item
  \textbf{Level}: Congestion levels: None = none, Mod = moderate, Hvy = heavy, Sev = severe, Ext = extreme
\item
  \textbf{Art\_Rcr}: Percentage reduction of recurring arterial delay that would occur with full deployment of other user-defined arterial operations measures
\item
  \textbf{Art\_NonRcr}: Percentage reduction of non-recurring arterial delay that would occur with full deployment of other user-defined arterial operations measures
\item
  \textbf{Fwy\_Rcr}: Percentage reduction of recurring freeway delay that would occur with full deployment of other user-defined freeway operations measures
\item
  \textbf{Fwy\_NonRcr}: Percentage reduction of non-recurring freeway delay that would occur with full deployment of other user-defined freeway operations measures
\end{itemize}

Here is a snapshot of the file:

\begin{tabular}{l|c|c|c|c|c|c|c}
\hline
Level & Art\_Rcr & Art\_NonRcr & Fwy\_Rcr & Fwy\_NonRcr & AccessMgtDeployProp & OtherFwyOpsDeployProp & OtherArtOpsDeployProp\\
\hline
None & 0 & 0 & 0 & 0 & 0 & 0 & 0\\
\hline
Mod & 0 & 0 & 0 & 0 & 0 & 0 & 0\\
\hline
Hvy & 0 & 0 & 0 & 0 & 0 & 0 & 0\\
\hline
sev & 0 & 0 & 0 & 0 & 0 & 0 & 0\\
\hline
Ext & 0 & 0 & 0 & 0 & 0 & 0 & 0\\
\hline
\end{tabular}

\hypertarget{congestion-charges-marea_congestion_charges.csv-1}{%
\paragraph*{\texorpdfstring{Congestion Charges (\textbf{marea\_congestion\_charges.csv})}{Congestion Charges (marea\_congestion\_charges.csv)}}\label{congestion-charges-marea_congestion_charges.csv-1}}
\addcontentsline{toc}{paragraph}{Congestion Charges (\textbf{marea\_congestion\_charges.csv})}

This input file is OPTIONAL. It is only needed if the user wants to add a congestion charge policy for vehicle travel using different congestion levels and roadway classes.

\begin{itemize}
\tightlist
\item
  \textbf{FwyNoneCongChg}: Charge per mile (U.S. dollars) of vehicle travel on freeways during periods of no congestion
\item
  \textbf{FwyModCongChg}: Charge per mile (U.S. dollars) of vehicle travel on freeways during periods of moderate congestion
\item
  \textbf{FwyHvyCongChg}: Charge per mile (U.S. dollars) of vehicle travel on freeways during periods of heavy congestion
\item
  \textbf{FwySevCongChg}: Charge per mile (U.S. dollars) of vehicle travel on freeways during periods of severe congestion
\item
  \textbf{FwyExtCongChg}: Charge per mile (U.S. dollars) of vehicle travel on freeways during periods of extreme congestion
\item
  \textbf{ArtNoneCongChg}: Charge per mile (U.S. dollars) of vehicle travel on arterials during periods of no congestion
\item
  \textbf{ArtModCongChg}: Charge per mile (U.S. dollars) of vehicle travel on arterials during periods of moderate congestion
\item
  \textbf{ArtHvyCongChg}: Charge per mile (U.S. dollars) of vehicle travel on arterials during periods of heavy congestion
\item
  \textbf{ArtSevCongChg}: Charge per mile (U.S. dollars) of vehicle travel on arterials during periods of severe congestion
\item
  \textbf{ArtExtCongChg}: Charge per mile (U.S. dollars) of vehicle travel on arterials during periods of extreme congestion
\end{itemize}

Here is a snapshot of the file:

\begin{tabular}{l|c|c|c|c|c|c|c|c|c|c|c}
\hline
Geo & Year & FwyNoneCongChg.2010 & FwyModCongChg.2010 & FwyHvyCongChg.2010 & FwySevCongChg.2010 & FwyExtCongChg.2010 & ArtNoneCongChg.2010 & ArtModCongChg.2010 & ArtHvyCongChg.2010 & ArtSevCongChg.2010 & ArtExtCongChg.2010\\
\hline
RVMPO & 2010 & 0 & 0 & 0 & 0.0 & 0.0 & 0 & 0 & 0 & 0 & 0\\
\hline
RVMPO & 2038 & 0 & 0 & 0 & 0.1 & 0.2 & 0 & 0 & 0 & 0 & 0\\
\hline
\end{tabular}

\hypertarget{user-input-parameters}{%
\subsubsection*{User Input Parameters}\label{user-input-parameters}}
\addcontentsline{toc}{subsubsection}{User Input Parameters}

\textbf{Value of time (valueoftime)} : This parameter set the value of time (base cost year dollars per hour). It should be defined in \protect\hyperlink{model_parameters.json-1}{model\_parameters.json}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{\{}\DataTypeTok{"NAME"}\FunctionTok{:} \StringTok{"ValueOfTime"}\FunctionTok{,} 
\DataTypeTok{"VALUE"}\FunctionTok{:} \StringTok{"16"}\FunctionTok{,} 
\DataTypeTok{"TYPE"}\FunctionTok{:} \StringTok{"double"}\FunctionTok{,} 
\DataTypeTok{"UNITS"}\FunctionTok{:} \StringTok{"base cost year dollars per hour"}
\FunctionTok{\}}
\end{Highlighting}
\end{Shaded}

\hypertarget{internal-module-inputs-30}{%
\subsubsection*{Internal Module Inputs}\label{internal-module-inputs-30}}
\addcontentsline{toc}{subsubsection}{Internal Module Inputs}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1724}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.3362}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1207}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.3707}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Package
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Module
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Outputs
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule()
\endhead
VELandUse & \protect\hyperlink{verspm-assignloctypes}{AssignLocTypes} & \textbf{UrbanPop} & Urbanized area population \\
VETransportSupply & \protect\hyperlink{verspm-assignroadmiles}{AssignRoadMiles} & \textbf{FwyLaneMi} & Lane-miles of roadways functionally classified as freeways or expressways in the urbanized portion of the metropolitan area \\
VETravelPerformance & \protect\hyperlink{verspm-calculatebaseroaddvmt}{CalculateBaseRoadDvmt} & \textbf{LdvFwyArtDvmt} & Light-duty daily vehicle miles of travel in the urbanized portion of the Marea occurring on freeway or arterial roadways \\
VETravelPerformance & \protect\hyperlink{verspm-calculatebaseroaddvmt}{CalculateBaseRoadDvmt} & \textbf{LdvOthDvmt} & Light-duty daily vehicle miles of travel in the urbanized portion of the Marea occurring on freeway or arterial roadways \\
VETravelPerformance & \protect\hyperlink{verspm-calculatebaseroaddvmt}{CalculateBaseRoadDvmt} & \textbf{HvyTrkFwyDvmt} & Heavy truck daily vehicle miles of travel in the urbanized portion of the Marea occurring on freeways \\
VETravelPerformance & \protect\hyperlink{verspm-calculatebaseroaddvmt}{CalculateBaseRoadDvmt} & \textbf{HvyTrkArtDvmt} & Heavy truck daily vehicle miles of travel in the urbanized portion of the Marea occurring on arterial roadways \\
VETravelPerformance & \protect\hyperlink{verspm-calculatebaseroaddvmt}{CalculateBaseRoadDvmt} & \textbf{HvyTrkOthDvmt} & Light-duty daily vehicle miles of travel in the urbanized portion of the Marea occurring on other roadways \\
VETravelPerformance & \protect\hyperlink{verspm-calculatebaseroaddvmt}{CalculateBaseRoadDvmt} & \textbf{BusFwyDvmt} & Bus daily vehicle miles of travel in the urbanized portion of the Marea occurring on freeways \\
VETravelPerformance & \protect\hyperlink{verspm-calculatebaseroaddvmt}{CalculateBaseRoadDvmt} & \textbf{BusArtDvmt} & Bus daily vehicle miles of travel in the urbanized portion of the Marea occurring on arterial roadways \\
VETravelPerformance & \protect\hyperlink{verspm-calculatebaseroaddvmt}{CalculateBaseRoadDvmt} & \textbf{BusOthDvmt} & Bus daily vehicle miles of travel in the urbanized portion of the Marea occuring on other roadways \\
VELandUse & \protect\hyperlink{verspm-calculate4dmeasures}{Calculate4DMeasures} & \textbf{UrbanArea} & Area that is Urban and unprotected (i.e.~developable) within the zone \\
\bottomrule()
\end{longtable}

\hypertarget{module-outputs-31}{%
\subsubsection*{Module Outputs}\label{module-outputs-31}}
\addcontentsline{toc}{subsubsection}{Module Outputs}

\begin{itemize}
\tightlist
\item
  \textbf{LdvFwyDvmt}: Light-duty daily vehicle miles of travel in the urbanized portion of the Marea occurring on freeways
\item
  \textbf{LdvArtDvmt}: Light-duty daily vehicle miles of travel in the urbanized portion of the Marea occurring on arterial roadways
\item
  \textbf{FwyNoneCongSpeed}: Average freeway speed (miles per hour) when there is no congestion
\item
  \textbf{FwyModCongSpeed}: Average freeway speed (miles per hour) when congestion is moderate
\item
  \textbf{FwyHvyCongSpeed}: Average freeway speed (miles per hour) when congestion is heavy
\item
  \textbf{FwySevCongSpeed}: Average freeway speed (miles per hour) when congestion is severe
\item
  \textbf{FwyExtCongSpeed}: Average freeway speed (miles per hour) when congestion is extreme
\item
  \textbf{ArtNoneCongSpeed}: Average arterial speed (miles per hour) when there is no congestion
\item
  \textbf{ArtModCongSpeed}: Average arterial speed (miles per hour) when congestion is moderate
\item
  \textbf{ArtHvyCongSpeed}: Average arterial speed (miles per hour) when congestion is heavy
\item
  \textbf{ArtSevCongSpeed}: Average arterial speed (miles per hour) when congestion is severe
\item
  \textbf{ArtExtCongSpeed}: Average arterial speed (miles per hour) when congestion is extreme
\item
  \textbf{OthSpd}: Average speed (miles per hour) on other roadways
\item
  \textbf{AveLdvSpd}: Average light-duty vehicle speed (miles per hour) on all roadways weighted by the proportions of light-duty vehicle travel
\item
  \textbf{FwyNoneCongDelay}: Average freeway delay (hours per mile) occurring when there is no congestion
\item
  \textbf{FwyModCongDelay}: Average freeway delay (hours per mile) occurring when congestion is moderate
\item
  \textbf{FwyHvyCongDelay}: Average freeway delay (hours per mile) occurring when congestion is heavy
\item
  \textbf{FwySevCongDelay}: Average freeway delay (hours per mile) occurring when congestion is severe
\item
  \textbf{FwyExtCongDelay}: Average freeway delay (hours per mile) occurring when congestion is extreme
\item
  \textbf{ArtNoneCongDelay}: Average arterial delay (hours per mile) occurring when there is no congestion
\item
  \textbf{ArtModCongDelay}: Average arterial delay (hours per mile) occurring when congestion is moderate
\item
  \textbf{ArtHvyCongDelay}: Average arterial delay (hours per mile) occurring when congestion is heavy
\item
  \textbf{ArtSevCongDelay}: Average arterial delay (hours per mile) occurring when congestion is severe
\item
  \textbf{ArtExtCongDelay}: Average arterial delay (hours per mile) occurring when congestion is extreme
\item
  \textbf{FwyDvmtPropNoneCong}: Proportion of freeway DVMT occurring when there is no congestion
\item
  \textbf{FwyDvmtPropModCong}: Proportion of freeway DVMT occurring when congestion is moderate
\item
  \textbf{FwyDvmtPropHvyCong}: Proportion of freeway DVMT occurring when congestion is heavy
\item
  \textbf{FwyDvmtPropSevCong}: Proportion of freeway DVMT occurring when congestion is severe
\item
  \textbf{FwyDvmtPropExtCong}: Proportion of freeway DVMT occurring when congestion is extreme
\item
  \textbf{ArtDvmtPropNoneCong}: Proportion of arterial DVMT occurring when there is no congestion
\item
  \textbf{ArtDvmtPropModCong}: Proportion of arterial DVMT occurring when congestion is moderate
\item
  \textbf{ArtDvmtPropHvyCong}: Proportion of arterial DVMT occurring when congestion is heavy
\item
  \textbf{ArtDvmtPropSevCong}: Proportion of arterial DVMT occurring when congestion is severe
\item
  \textbf{ArtDvmtPropExtCong}: Proportion of arterial DVMT occurring when congestion is extreme
\item
  \textbf{AveCongPrice}: Average price paid (dollars per mile) in congestion fees
\end{itemize}

For more information see \href{https://github.com/visioneval/VisionEval/blob/master/sources/modules/VETravelPerformance/inst/module_docs/CalculateRoadPerformance.md}{here}

\hypertarget{verspm-calculatempgmpkwhadjustments}{%
\subsection{CalculateMpgMpkwhAdjustments}\label{verspm-calculatempgmpkwhadjustments}}

This module calculates adjustments to fuel economy and electric energy economy for plug-in vehicles) resulting from traffic congestion, speed smoothing(i.e.~active traffic management which reduces speed variation), and ecodriving practices.

\hypertarget{user-input-files-32}{%
\subsubsection*{User Input Files}\label{user-input-files-32}}
\addcontentsline{toc}{subsubsection}{User Input Files}

\hypertarget{speed-smoothing-and-eco-drive-marea_speed_smooth_ecodrive.csv}{%
\paragraph*{Speed Smoothing and Eco-drive (marea\_speed\_smooth\_ecodrive.csv)}\label{speed-smoothing-and-eco-drive-marea_speed_smooth_ecodrive.csv}}
\addcontentsline{toc}{paragraph}{Speed Smoothing and Eco-drive (marea\_speed\_smooth\_ecodrive.csv)}

This input file supplies information of deployment of speed smoothing and ecodriving by road class and vehicle type.

\begin{itemize}
\tightlist
\item
  \textbf{FwySmooth}:Fractional deployment of speed smoothing traffic management on freeways, where 0 is no deployment and 1 is the full potential fuel savings
\item
  \textbf{ArtSmooth}: Fractional deployment of speed smoothing traffic management on arterials, where 0 is no deployment and 1 is the full potential fuel savings
\item
  \textbf{LdvEcoDrive}: Eco-driving penetration for light-duty vehicles; the fraction of vehicles from 0 to 1
\item
  \textbf{HvyTrkEcoDrive}: Eco-driving penetration for heavy-duty vehicles; the fraction of vehicles from 0 to 1
\end{itemize}

Here is a snapshot of the file:

\begin{longtable}[]{@{}llllll@{}}
\toprule()
Geo & Year & FwySmooth & ArtSmooth & LdvEcoDrive & HvyTrkEcoDrive \\
\midrule()
\endhead
RVMPO & 2010 & 0.2 & 0.1 & 0.2 & 0.05 \\
RVMPO & 2038 & 0.4 & 0.2 & 0.4 & 0.2 \\
\bottomrule()
\end{longtable}

\hypertarget{internal-module-inputs-31}{%
\subsubsection{Internal Module Inputs}\label{internal-module-inputs-31}}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1724}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.3362}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1207}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.3707}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Package
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Module
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Outputs
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule()
\endhead
VETravelPerformance & \protect\hyperlink{verspm-calculateroadperformance}{CalculateRoadPerformance} & \textbf{LdvFwyDvmt} & Light-duty daily vehicle miles of travel in the urbanized portion of the Marea occurring on freeways \\
VETravelPerformance & \protect\hyperlink{verspm-calculateroadperformance}{CalculateRoadPerformance} & \textbf{LdvArtDvmt} & Light-duty daily vehicle miles of travel in the urbanized portion of the Marea occurring on arterial roadways \\
VETravelPerformance & \protect\hyperlink{verspm-calculatebaseroaddvmt}{CalculateBaseRoadDvmt} & \textbf{LdvOthDvmt} & Light-duty daily vehicle miles of travel in the urbanized portion of the Marea occurring on freeway or arterial roadways \\
VETravelPerformance & \protect\hyperlink{verspm-calculatebaseroaddvmt}{CalculateBaseRoadDvmt} & \textbf{HvyTrkFwyDvmt} & Heavy truck daily vehicle miles of travel in the urbanized portion of the Marea occurring on freeways \\
VETravelPerformance & \protect\hyperlink{verspm-calculatebaseroaddvmt}{CalculateBaseRoadDvmt} & \textbf{HvyTrkArtDvmt} & Heavy truck daily vehicle miles of travel in the urbanized portion of the Marea occurring on arterial roadways \\
VETravelPerformance & \protect\hyperlink{verspm-calculatebaseroaddvmt}{CalculateBaseRoadDvmt} & \textbf{HvyTrkOthDvmt} & Light-duty daily vehicle miles of travel in the urbanized portion of the Marea occurring on other roadways \\
VETravelPerformance & \protect\hyperlink{verspm-calculatebaseroaddvmt}{CalculateBaseRoadDvmt} & \textbf{BusFwyDvmt} & Bus daily vehicle miles of travel in the urbanized portion of the Marea occurring on freeways \\
VETravelPerformance & \protect\hyperlink{verspm-calculatebaseroaddvmt}{CalculateBaseRoadDvmt} & \textbf{BusArtDvmt} & Bus daily vehicle miles of travel in the urbanized portion of the Marea occurring on arterial roadways \\
VETravelPerformance & \protect\hyperlink{verspm-calculatebaseroaddvmt}{CalculateBaseRoadDvmt} & \textbf{BusOthDvmt} & Bus daily vehicle miles of travel in the urbanized portion of the Marea occuring on other roadways \\
VETravelPerformance & \protect\hyperlink{verspm-calculateroadperformance}{CalculateRoadPerformance} & \textbf{FwyNoneCongSpeed} & Average freeway speed (miles per hour) when there is no congestion \\
VETravelPerformance & \protect\hyperlink{verspm-calculateroadperformance}{CalculateRoadPerformance} & \textbf{FwyModCongSpeed} & Light-duty daily vehicle miles of travel in the urbanized portion of the Marea occurring on arterial roadways \\
VETravelPerformance & \protect\hyperlink{verspm-calculateroadperformance}{CalculateRoadPerformance} & \textbf{FwyHvyCongSpeed} & Average freeway speed (miles per hour) when congestion is heavy \\
VETravelPerformance & \protect\hyperlink{verspm-calculateroadperformance}{CalculateRoadPerformance} & \textbf{FwySevCongSpeed} & Average freeway speed (miles per hour) when congestion is severe \\
VETravelPerformance & \protect\hyperlink{verspm-calculateroadperformance}{CalculateRoadPerformance} & \textbf{FwyExtCongSpeed} & Light-duty daily vehicle miles of travel in the urbanized portion of the Marea occurring on other roadways \\
VETravelPerformance & \protect\hyperlink{verspm-calculateroadperformance}{CalculateRoadPerformance} & \textbf{BusFwyDvmt} & Bus daily vehicle miles of travel in the urbanized portion of the Marea occurring on freeways \\
VETravelPerformance & \protect\hyperlink{verspm-calculateroadperformance}{CalculateRoadPerformance} & \textbf{BusArtDvmt} & Bus daily vehicle miles of travel in the urbanized portion of the Marea occurring on arterial roadways \\
VETravelPerformance & \protect\hyperlink{verspm-calculateroadperformance}{CalculateRoadPerformance} & \textbf{BusOthDvmt} & Bus daily vehicle miles of travel in the urbanized portion of the Marea occuring on other roadways \\
VETravelPerformance & \protect\hyperlink{verspm-calculateroadperformance}{CalculateRoadPerformance} & \textbf{FwyDvmtPropNoneCong} & Proportion of freeway DVMT occurring when there is no congestion \\
VETravelPerformance & \protect\hyperlink{verspm-calculateroadperformance}{CalculateRoadPerformance} & \textbf{FwyDvmtPropModCong} & Proportion of freeway DVMT occurring when congestion is moderate \\
VETravelPerformance & \protect\hyperlink{verspm-calculateroadperformance}{CalculateRoadPerformance} & \textbf{FwyDvmtPropHvyCong} & Proportion of freeway DVMT occurring when congestion is heavy \\
VETravelPerformance & \protect\hyperlink{verspm-calculateroadperformance}{CalculateRoadPerformance} & \textbf{FwyDvmtPropSevCong} & Proportion of freeway DVMT occurring when congestion is severe \\
VETravelPerformance & \protect\hyperlink{verspm-calculateroadperformance}{CalculateRoadPerformance} & \textbf{FwyDvmtPropExtCong} & Proportion of freeway DVMT occurring when congestion is extreme \\
VETravelPerformance & \protect\hyperlink{verspm-calculateroadperformance}{CalculateRoadPerformance} & \textbf{ArtDvmtPropNoneCong} & Proportion of arterial DVMT occurring when there is no congestion \\
VETravelPerformance & \protect\hyperlink{verspm-calculateroadperformance}{CalculateRoadPerformance} & \textbf{ArtDvmtPropModCong} & Proportion of arterial DVMT occurring when congestion is moderate \\
VETravelPerformance & \protect\hyperlink{verspm-calculateroadperformance}{CalculateRoadPerformance} & \textbf{ArtDvmtPropHvyCong} & Proportion of arterial DVMT occurring when congestion is heavy \\
VETravelPerformance & \protect\hyperlink{verspm-calculateroadperformance}{CalculateRoadPerformance} & \textbf{ArtDvmtPropSevCong} & Proportion of arterial DVMT occurring when congestion is severe \\
VETravelPerformance & \protect\hyperlink{verspm-calculateroadperformance}{CalculateRoadPerformance} & \textbf{ArtDvmtPropExtCong} & Proportion of arterial DVMT occurring when congestion is extereme \\
\bottomrule()
\end{longtable}

\hypertarget{module-outputs-32}{%
\subsubsection*{Module Outputs}\label{module-outputs-32}}
\addcontentsline{toc}{subsubsection}{Module Outputs}

\begin{itemize}
\tightlist
\item
  \textbf{LdvSpdSmoothFactor}: Proportional adjustment of light-duty internal combustion engine (ICE) vehicle MPG due to speed smoothing
\item
  \textbf{HvyTrkSpdSmoothFactor}: Proportional adjustment of heavy truck internal combustion engine (ICE) vehicle MPG due to speed smoothing
\item
  \textbf{BusSpdSmoothFactor}: Proportional adjustment of bus internal combustion engine (ICE) vehicle MPG due to speed smoothing
\item
  \textbf{LdvEcoDriveFactor}: Proportional adjustment of light-duty internal combustion engine (ICE) vehicle MPG due to eco-driving
\item
  \textbf{HvyTrkEcoDriveFactor}: Proportional adjustment of heavy truck internal combustion engine (ICE) vehicle MPG due to eco-driving
\item
  \textbf{BusEcoDriveFactor}: Proportional adjustment of bus internal combustion engine (ICE) vehicle MPG due to eco-driving
\item
  \textbf{LdIceFactor}: Proportional adjustment of light-duty internal combustion engine (ICE) vehicle MPG due to congestion
\item
  \textbf{LdHevFactor}: Proportional adjustment of light-duty hybrid-electric vehicle (HEV) MPG due to congestion
\item
  \textbf{LdEvFactor}: Proportional adjustment of light-duty battery electric vehicle (EV) MPkWh due to congestion
\item
  \textbf{LdFcvFactor}: Proportional adjustment of light-duty fuel cell vehicle (FCV) MPkWh due to congestion
\item
  \textbf{HdIceFactor}: Proportional adjustment of heavy-duty internal combustion engine (ICE) vehicle MPG due to congestion
\end{itemize}

\hypertarget{verspm-adjusthhvehiclempgmpkwh}{%
\subsection{AdjustHhVehicleMpgMpkwh}\label{verspm-adjusthhvehiclempgmpkwh}}

This module adjusts the fuel economy and power efficiency of household vehicles to reflect roadway congestion.

\hypertarget{user-input-files-33}{%
\subsubsection*{User Input Files}\label{user-input-files-33}}
\addcontentsline{toc}{subsubsection}{User Input Files}

\hypertarget{car-service-vehicle-powertrains-region_carsvc_powertrain_prop.csv-2}{%
\paragraph{Car Service Vehicle Powertrains (region\_carsvc\_powertrain\_prop.csv)}\label{car-service-vehicle-powertrains-region_carsvc_powertrain_prop.csv-2}}

This input file is OPTIONAL. It is only needed if the user wants to modify the powertrain proportion of car services.

\begin{itemize}
\tightlist
\item
  \textbf{CarSvcAutoPropIcev}: Proportion of car service automobile travel powered by internal combustion engine powertrains
\item
  \textbf{CarSvcAutoPropHev}: Proportion of car service automobile travel powered by hybrid electric powertrains
\item
  \textbf{CarSvcAutoPropBev}: Proportion of car service automobile travel powered by battery electric powertrains
\item
  \textbf{CarSvcLtTrkPropIcev}: Proportion of car service light truck travel powered by internal combustion engine powertrains
\item
  \textbf{CarSvcLtTrkPropHev}: Proportion of car service light truck travel powered by hybrid electric powertrains
\item
  \textbf{CarSvcLtTrkPropBev}: Proportion of car service light truck travel powered by battery electric powertrains
\end{itemize}

Here is a snapshot of the file:

\begin{tabular}{l|c|c|c|c|c|c|c}
\hline
Geo & Year & CarSvcAutoPropIcev & CarSvcAutoPropHev & CarSvcAutoPropBev & CarSvcLtTrkPropIce & CarSvcLtTrkPropHev & CarSvcLtTrkPropBev\\
\hline
RVMPO & 2010 & 0.990 & 0.010 & 0.000 & 1.0000 & 0.0000 & 0.0000\\
\hline
RVMPO & 2038 & 0.441 & 0.528 & 0.031 & 0.5335 & 0.4572 & 0.0093\\
\hline
\end{tabular}

\hypertarget{internal-module-inputs-32}{%
\subsubsection{Internal Module Inputs}\label{internal-module-inputs-32}}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1724}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.3362}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1207}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.3707}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Package
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Module
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Outputs
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule()
\endhead
VETravelPerformance & \protect\hyperlink{verspm-calculatempgmpkwhadjustments}{CalculateMpgMpkwhAdjustments} & \textbf{LdvEcoDrive} & Eco-driving penetration for light-duty vehicles; the fraction of vehicles from 0 to 1 \\
VETravelPerformance & \protect\hyperlink{verspm-calculatempgmpkwhadjustments}{CalculateMpgMpkwhAdjustments} & \textbf{LdvSpdSmoothFactor} & Proportional adjustment of light-duty internal combustion engine (ICE) vehicle MPG due to speed smoothing \\
VETravelPerformance & \protect\hyperlink{verspm-calculatempgmpkwhadjustments}{CalculateMpgMpkwhAdjustments} & \textbf{LdvEcoDriveFactor} & Proportional adjustment of light-duty internal combustion engine (ICE) vehicle MPG due to eco-driving \\
VETravelPerformance & \protect\hyperlink{verspm-calculatempgmpkwhadjustments}{CalculateMpgMpkwhAdjustments} & \textbf{LdIceFactor} & Proportional adjustment of light-duty internal combustion engine (ICE) vehicle MPG due to congestion \\
VETravelPerformance & \protect\hyperlink{verspm-calculatempgmpkwhadjustments}{CalculateMpgMpkwhAdjustments} & \textbf{LdHevFactor} & Proportional adjustment of light-duty hybrid-electric vehicle (HEV) MPG due to congestion \\
VETravelPerformance & \protect\hyperlink{verspm-calculatempgmpkwhadjustments}{CalculateMpgMpkwhAdjustments} & \textbf{LdFcvFactor} & Proportional adjustment of light-duty fuel cell vehicle (FCV) MPkWh due to congestion \\
VESimHouseholds & \protect\hyperlink{verspm-createhouseholds}{CreateHouseholds} & \textbf{HhId} & Household id \\
VELandUse & \protect\hyperlink{verspm-assignloctypes}{AssignLocTypes} & \textbf{LocType} & Location type (Urban, Town, Rural) of the place where the household resides \\
VEHouseholdVehicles & \protect\hyperlink{verspm-assignvehicleownership}{AssignVehicleOwnership} & \textbf{Vehicles} & Number of automobiles and light trucks owned or leased by the household including high level car service vehicles available to driving-age persons \\
VEHouseholdVehicles & \protect\hyperlink{verspm-assignvehicletype}{AssignVehicleType} & \textbf{NumLtTrk} & Number of light trucks (pickup, sport-utility vehicle, and van) owned or leased by household \\
VEHouseholdVehicles & \protect\hyperlink{verspm-assignvehicletype}{AssignVehicleType} & \textbf{NumAuto} & Number of automobiles (i.e.~4-tire passenger vehicles that are not light trucks) owned or leased by household \\
VEHouseholdTravel & \protect\hyperlink{verspm-calculatehouseholddvmt}{CalculateHouseholdDvmt} & \textbf{Dvmt} & Average daily vehicle miles traveled by the household in autos or light trucks \\
VEHouseholdVehicles & \protect\hyperlink{verspm-assignvehicleage}{AssignVehicleAge} & \textbf{Type} & Vehicle body type: Auto = automobile, LtTrk = light trucks (i.e.~pickup, SUV, Van) \\
VEPowertrainsAndFuels & \protect\hyperlink{verspm-assignhhvehiclepowertrain}{AssignHhVehiclePowertrain} & \textbf{Powertrain} & Vehicle powertrain type: ICEV = internal combustion engine vehicle, HEV = hybrid electric vehicle, PHEV = plug-in hybrid electric vehicle, BEV = battery electric vehicle, NA = not applicable because is a car service vehicle \\
VEHouseholdVehicles & \protect\hyperlink{verspm-createvehicletable}{CreateVehicleTable} & \textbf{VehicleAccess} & Identifier whether vehicle is owned by household (Own), if vehicle is low level car service (LowCarSvc), or if vehicle is high level car service (HighCarSvc) \\
VEPowertrainsAndFuels & \protect\hyperlink{verspm-assignhhvehiclepowertrain}{AssignHhVehiclePowertrain} & \textbf{MPG} & Average miles of vehicle travel powered by fuel per gasoline equivalent gallon \\
VEPowertrainsAndFuels & \protect\hyperlink{verspm-assignhhvehiclepowertrain}{AssignHhVehiclePowertrain} & \textbf{GPM} & Average gasoline equivalent gallons per mile of vehicle travel powered by fuel \\
VEPowertrainsAndFuels & \protect\hyperlink{verspm-assignhhvehiclepowertrain}{AssignHhVehiclePowertrain} & \textbf{MPKWH} & Average miles of vehicle travel powered by electricity per kilowatt-hour \\
VEPowertrainsAndFuels & \protect\hyperlink{verspm-assignhhvehiclepowertrain}{AssignHhVehiclePowertrain} & \textbf{KWHPM} & Average kilowatt-hours per mile of vehicle travel powered by electricity \\
VEPowertrainsAndFuels & \protect\hyperlink{verspm-assignhhvehiclepowertrain}{AssignHhVehiclePowertrain} & \textbf{MPGe} & Average miles of vehicle travel per gasoline equivalent gallon (fuel and electric powered) \\
VEPowertrainsAndFuels & \protect\hyperlink{verspm-assignhhvehiclepowertrain}{AssignHhVehiclePowertrain} & \textbf{ElecDvmtProp} & Average miles of vehicle travel per gasoline equivalent gallon (fuel and electric powered) \\
VEPowertrainsAndFuels & \protect\hyperlink{verspm-assignhhvehiclepowertrain}{AssignHhVehiclePowertrain} & \textbf{FuelCO2ePM} & Average grams of carbon-dioxide equivalents produced per mile of travel powered by fuel \\
VEPowertrainsAndFuels & \protect\hyperlink{verspm-assignhhvehiclepowertrain}{AssignHhVehiclePowertrain} & \textbf{ElecCO2ePM} & Average grams of carbon-dioxide equivalents produced per mile of travel powered by electricity \\
\bottomrule()
\end{longtable}

\hypertarget{module-outputs-33}{%
\subsubsection*{Module Outputs}\label{module-outputs-33}}
\addcontentsline{toc}{subsubsection}{Module Outputs}

\begin{itemize}
\tightlist
\item
  \textbf{MPG}: Average miles of vehicle travel powered by fuel per gasoline equivalent gallon
\item
  \textbf{GPM}: Average gasoline equivalent gallons per mile of vehicle travel powered by fuel
\item
  \textbf{MPKWH}: Average miles of vehicle travel powered by electricity per kilowatt-hour
\item
  \textbf{KWHPM}: Average kilowatt-hours per mile of vehicle travel powered by electricity
\item
  \textbf{MPGe}: Average miles of vehicle travel per gasoline equivalent gallon (fuel and electric powered)
\item
  \textbf{ElecDvmtProp}: Average miles of vehicle travel per gasoline equivalent gallon (fuel and electric powered)
\item
  \textbf{FuelCO2ePM}: Average grams of carbon-dioxide equivalents produced per mile of travel powered by fuel
\item
  \textbf{IsEcoDrive}: Flag identifying whether drivers in household are eco-drivers
\end{itemize}

\hypertarget{verspm-calculatevehicleoperatingcost}{%
\subsection{CalculateVehicleOperatingCost}\label{verspm-calculatevehicleoperatingcost}}

This module calculates vehicle operating costs per mile of travel and uses those costs to determine the proportional split of DVMT among household vehicles. The module also calculates the average out-of-pocket costs per mile of vehicle by household, as well as the cost of social and environmental impacts, and road use taxes per mile of vehicle travel.

\hypertarget{user-input-files-34}{%
\subsubsection*{User Input Files}\label{user-input-files-34}}
\addcontentsline{toc}{subsubsection}{User Input Files}

\hypertarget{vehicle-access-time-azone_vehicle_access_times.csv}{%
\paragraph*{Vehicle Access Time (azone\_vehicle\_access\_times.csv)}\label{vehicle-access-time-azone_vehicle_access_times.csv}}
\addcontentsline{toc}{paragraph}{Vehicle Access Time (azone\_vehicle\_access\_times.csv)}

This file supplies data for vehicle access and eagress time by Azone.

\begin{itemize}
\tightlist
\item
  \textbf{OwnedVehAccessTime}:Average amount of time in minutes required for access to and egress from a household-owned vehicle for a trip
\item
  \textbf{HighCarSvcAccessTime}: Average amount of time in minutes required for access to and egress from a high service level car service for a trip
\item
  \textbf{LowCarSvcAccessTime}: Average amount of time in minutes required for access to and egress from a low service level car service for a trip
\end{itemize}

Here is a snapshot of the file:

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 8\tabcolsep) * \real{0.0758}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 8\tabcolsep) * \real{0.0606}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 8\tabcolsep) * \real{0.2727}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 8\tabcolsep) * \real{0.3030}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 8\tabcolsep) * \real{0.2879}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Geo
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Year
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
OwnedVehAccessTime
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
HighCarSvcAccessTime
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
LowCarSvcAccessTime
\end{minipage} \\
\midrule()
\endhead
RVMPO & 2010 & 5 & 10 & 45 \\
RVMPO & 2038 & 5 & 10 & 45 \\
\bottomrule()
\end{longtable}

\hypertarget{fuel-and-electricity-costs-azone_fuel_power_cost.csv}{%
\paragraph*{\texorpdfstring{Fuel and Electricity Costs (\textbf{azone\_fuel\_power\_cost.csv})}{Fuel and Electricity Costs (azone\_fuel\_power\_cost.csv)}}\label{fuel-and-electricity-costs-azone_fuel_power_cost.csv}}
\addcontentsline{toc}{paragraph}{Fuel and Electricity Costs (\textbf{azone\_fuel\_power\_cost.csv})}

This file supplies data for retail cost of fuel and electricity by Azone. This input can be developed using local history or querying the Energy Information Administration (EIA) for historical \href{https://www.eia.gov/petroleum/}{gasoline and diesel} and \href{https://www.eia.gov/electricity/}{power} prices.

\begin{itemize}
\tightlist
\item
  \textbf{FuelCost}:Retail cost of fuel per gas gallon equivalent in dollars (before taxes are added)
\item
  \textbf{PowerCost}: Retail cost of electric power per kilowatt-hour in dollars (before taxes are added)
\end{itemize}

Here is a snapshot of the file:

\begin{longtable}[]{@{}lccc@{}}
\toprule()
Geo & Year & FuelCost.2005 & PowerCost.2005 \\
\midrule()
\endhead
RVMPO & 2010 & 2.43 & 0.08 \\
RVMPO & 2038 & 5.75 & 0.208 \\
\bottomrule()
\end{longtable}

\hypertarget{vehicle-taxes-azone_veh_use_taxes.csv}{%
\paragraph*{Vehicle Taxes (azone\_veh\_use\_taxes.csv)}\label{vehicle-taxes-azone_veh_use_taxes.csv}}
\addcontentsline{toc}{paragraph}{Vehicle Taxes (azone\_veh\_use\_taxes.csv)}

This file supplies data for vehicle taxes related to \protect\hyperlink{vehicle-operating-costs}{vehicle operating costs}.

\begin{itemize}
\tightlist
\item
  \textbf{FuelTax}:Tax per gas gallon equivalent of fuel in dollars
\item
  \textbf{VmtTax}: Tax per gas gallon equivalent of fuel in dollars
\item
  \textbf{PevSurchgTaxProp}: Proportion of equivalent gas tax per mile paid by hydrocarbon fuel consuming vehicles to be charged to plug-in electric vehicles per mile of travel powered by electricity
\end{itemize}

Here is a snapshot of the file:

\begin{longtable}[]{@{}lllll@{}}
\toprule()
Geo & Year & FuelTax.2005 & VmtTax.2005 & PevSurchgTaxProp \\
\midrule()
\endhead
RVMPO & 2010 & 0.424 & 0 & 0 \\
RVMPO & 2038 & 0.484 & 0 & 0 \\
\bottomrule()
\end{longtable}

\hypertarget{external-costs-region_prop_externalities_paid.csv}{%
\subsection*{External Costs (region\_prop\_externalities\_paid.csv)}\label{external-costs-region_prop_externalities_paid.csv}}
\addcontentsline{toc}{subsection}{External Costs (region\_prop\_externalities\_paid.csv)}

Proportional external costs for the ragion (This file supplies data for climate change and other social costs.

\begin{itemize}
\tightlist
\item
  \textbf{PropClimateCostPaid}: Proportion of climate change costs paid by users (i.e.~ratio of carbon taxes to climate change costs
\item
  \textbf{PropOtherExtCostPaid}: Proportion of other social costs paid by users
\end{itemize}

Here is a snapshot of the file:

\begin{longtable}[]{@{}lll@{}}
\toprule()
Year & PropClimateCostPaid & PropOtherExtCostPaid \\
\midrule()
\endhead
2038 & 1 & 0.5 \\
2010 & 0 & 0 \\
\bottomrule()
\end{longtable}

\hypertarget{user-input-parameters-1}{%
\subsubsection*{User Input Parameters}\label{user-input-parameters-1}}
\addcontentsline{toc}{subsubsection}{User Input Parameters}

\textbf{Value of time (valueoftime)}: This parameter set the value of time (base cost year dollars per hour). It should be defined in \protect\hyperlink{model_parameters.json-1}{model\_parameters.json}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{\{}\DataTypeTok{"NAME"}\FunctionTok{:} \StringTok{"ValueOfTime"}\FunctionTok{,} 
\DataTypeTok{"VALUE"}\FunctionTok{:} \StringTok{"16"}\FunctionTok{,} 
\DataTypeTok{"TYPE"}\FunctionTok{:} \StringTok{"double"}\FunctionTok{,} 
\DataTypeTok{"UNITS"}\FunctionTok{:} \StringTok{"base cost year dollars per hour"}
\FunctionTok{\}}
\end{Highlighting}
\end{Shaded}

\hypertarget{internal-module-inputs-33}{%
\subsubsection*{Internal Module Inputs}\label{internal-module-inputs-33}}
\addcontentsline{toc}{subsubsection}{Internal Module Inputs}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1724}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.3362}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1207}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.3707}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Package
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Module
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Outputs
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule()
\endhead
VETravelPerformance & \protect\hyperlink{verspm-calculateroadperformance}{CalculateRoadPerformance} & \textbf{AveLdvSpd} & Average light-duty vehicle speed (miles per hour) on all roadways weighted by the proportions of light-duty vehicle travel \\
VETravelPerformance & \protect\hyperlink{verspm-calculateroadperformance}{CalculateRoadPerformance} & \textbf{AveCongPrice} & Average price paid (dollars per mile) in congestion fees \\
VEHouseholdVehicles & \protect\hyperlink{verspm-createvehicletable}{CreateVehicleTable} & \textbf{HighCarSvcCost} & Average cost in dollars per mile for travel by high service level car service \\
VEHouseholdVehicles & \protect\hyperlink{verspm-createvehicletable}{CreateVehicleTable} & \textbf{LowCarSvcCost} & Average cost in dollars per mile for travel by low service level car service \\
VESimHouseholds & \protect\hyperlink{verspm-createhouseholds}{CreateHouseholds} & \textbf{HhId} & Household id \\
VEHouseholdVehicles & \protect\hyperlink{verspm-createvehicletable}{CreateVehicleTable} & \textbf{VehId} & Unique vehicle ID \\
VESimHouseholds & \protect\hyperlink{verspm-predictincome}{PredictIncome} & \textbf{Income} & Total annual income of household \\
VEHouseholdTravel & \protect\hyperlink{verspm-calculatehouseholddvmt}{CalculateHouseholdDvmt} & \textbf{Dvmt} & Average daily vehicle miles traveled by the household in autos or light trucks \\
VEHouseholdVehicles & \protect\hyperlink{verspm-calculatevehicleowncost}{CalculateVehicleOwnCost} & \textbf{HasPaydIns} & Identifies whether household has pay-as-you-drive insurance for vehicles: 1 = Yes, 0 = no \\
VEHouseholdTravel & \protect\hyperlink{verspm-calculatevehicletrips}{CalculateVehicleTrips} & \textbf{VehicleTrips} & Average number of vehicle trips per day by household members \\
VELandUse & \protect\hyperlink{verspm-assignparkingrestrictions}{AssignParkingRestrictions} & \textbf{OtherParkingCost} & Daily cost for parking at shopping locations or other locations of paid parking not including work \\
VEHouseholdVehicles & \protect\hyperlink{verspm-assignvehicleage}{AssignVehicleAge} & \textbf{Type} & Vehicle body type: Auto = automobile, LtTrk = light trucks (i.e.~pickup, SUV, Van) \\
VEHouseholdVehicles & \protect\hyperlink{verspm-assignvehicleage}{AssignVehicleAge} & \textbf{Age} & Vehicle age in years \\
VEHouseholdVehicles & \protect\hyperlink{verspm-createvehicletable}{CreateVehicleTable} & \textbf{VehicleAccess} & Identifier whether vehicle is owned by household (Own), if vehicle is low level car service (LowCarSvc), or if vehicle is high level car service (HighCarSvc) \\
VEPowertrainsAndFuels & \protect\hyperlink{verspm-assignhhvehiclepowertrain}{AssignHhVehiclePowertrain} & \textbf{Powertrain} & Vehicle powertrain type: ICEV = internal combustion engine vehicle, HEV = hybrid electric vehicle, PHEV = plug-in hybrid electric vehicle, BEV = battery electric vehicle, NA = not applicable because is a car service vehicle \\
VEPowertrainsAndFuels & \protect\hyperlink{verspm-assignhhvehiclepowertrain}{AssignHhVehiclePowertrain} & \textbf{GPM} & Average gasoline equivalent gallons per mile of vehicle travel powered by fuel \\
VEPowertrainsAndFuels & \protect\hyperlink{verspm-assignhhvehiclepowertrain}{AssignHhVehiclePowertrain} & \textbf{KWHPM} & Average kilowatt-hours per mile of vehicle travel powered by electricity \\
VEPowertrainsAndFuels & \protect\hyperlink{verspm-assignhhvehiclepowertrain}{AssignHhVehiclePowertrain} & \textbf{ElecDvmtProp} & Average miles of vehicle travel per gasoline equivalent gallon (fuel and electric powered) \\
VEPowertrainsAndFuels & \protect\hyperlink{verspm-assignhhvehiclepowertrain}{AssignHhVehiclePowertrain} & \textbf{FuelCO2ePM} & Average grams of carbon-dioxide equivalents produced per mile of travel powered by fuel \\
VEPowertrainsAndFuels & \protect\hyperlink{verspm-assignhhvehiclepowertrain}{AssignHhVehiclePowertrain} & \textbf{ElecCO2ePM} & Average grams of carbon-dioxide equivalents produced per mile of travel powered by electricity \\
VEHouseholdVehicles & \protect\hyperlink{verspm-calculatevehicleowncost}{CalculateVehicleOwnCost} & \textbf{InsCost} & Annual vehicle insurance cost in dollars \\
VELandUse & \protect\hyperlink{verspm-assignparkingrestrictions}{AssignParkingRestrictions} & \textbf{ParkingCost} & Daily cost for long-term parking (e.g.~paid on monthly basis) \\
VELandUse & \protect\hyperlink{verspm-assignparkingrestrictions}{AssignParkingRestrictions} & \textbf{IsCashOut} & Is worker paid parking in cash-out-buy-back program: 1 = yes, 0 = no \\
VELandUse & \protect\hyperlink{verspm-assignparkingrestrictions}{AssignParkingRestrictions} & \textbf{PaysForParking} & Does worker pay for parking: 1 = yes, 0 = no \\
\bottomrule()
\end{longtable}

\hypertarget{module-outputs-34}{%
\subsubsection*{Module Outputs}\label{module-outputs-34}}
\addcontentsline{toc}{subsubsection}{Module Outputs}

\begin{itemize}
\tightlist
\item
  \textbf{AveVehCostPM}: Average out-of-pocket cost in dollars per mile of vehicle travel
\item
  \textbf{AveSocEnvCostPM}: Average cost in dollars of the social and environmental impacts per mile of vehicle travel
\item
  \textbf{AveRoadUseTaxPM}: Average road use taxes in dollars collected per mile of vehicle travel
\item
  \textbf{DvmtProp}: Proportion of household DVMT allocated to vehicle
\item
  \textbf{AveGPM}: Average gasoline equivalent gallons per mile of household vehicle travel
\item
  \textbf{AveKWHPM}: Average kilowatt-hours per mile of household vehicle travel
\item
  \textbf{AveCO2ePM}: Average grams of carbon-dioxide equivalents produced per mile of household vehicle travel
\end{itemize}

\hypertarget{verspm-budgethouseholddvmt}{%
\subsection{BudgetHouseholdDvmt}\label{verspm-budgethouseholddvmt}}

This module adjusts average household DVMT to keep the quantity within household operating cost limits. The limit for each household is calculated in several steps. First, the proportion of the household's income that may be spent on vehicle operating costs is calculated using a model that is explained below. This is called the budget proportion. Then an adjusted household income
for budget calculation purposes is calculated by adding the annual cost of insurance for households subscribing to payd-as-you-drive (PAYD) insurance, cash-out parking payments for workers who work at an employer that has cash-out-buy-back parking, and any vehicle ownership cost savings for households that substitute high level car service for one or more household vehicles. The adjusted household income is muliplied by the budget proportion and divided by the average vehicle operating cost per mile for the household to determine the maximum household DVMT that fits within the household budget. The household DVMT is then set at the lesser of this budget maximum or the modeled household DVMT.

The budget proportion model is estimated using data from the Bureau of Labor's consumer expenditure survey for the years from 2003 to 2015. The data used are the nominal dollar expenditures by household income category and year by transportation category. The values for the operating cost categories (gas and oil, and maintenance and repair) are summed and then divided by the midpoint value for each income category to calculate the budget proportion for each income group and each year. From this the mean value is computed for each income group. The budget proportions for each income group and year are divided by the mean values by income group to normalize values. The standard deviation for the combined normalized values is computed and value of 3 deviations above the mean is set as the maximum normalized value. The mean values by income group are multiplied by this normalized maximum to derive a budget proportion maximum by income group. A smoothed splines model of the budget proportion as a function of income is then estimated from the calculated budget proportion maximums. This model is used to calculate the budget proportion for a household based on the household income. The minimum and
maximum values of the calculated budget proportion maximums are used as constraints to avoid unreasonable results for very low incomes and very high incomes.

\hypertarget{user-input-files-35}{%
\subsubsection*{User Input Files}\label{user-input-files-35}}
\addcontentsline{toc}{subsubsection}{User Input Files}

This module does not have user-supplied input files

\hypertarget{internal-module-inputs-34}{%
\subsubsection*{Internal Module Inputs}\label{internal-module-inputs-34}}
\addcontentsline{toc}{subsubsection}{Internal Module Inputs}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1724}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.3362}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1207}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.3707}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Package
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Module
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Outputs
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule()
\endhead
VESimHouseholds & \protect\hyperlink{verspm-createhouseholds}{CreateHouseholds} & \textbf{HhId} & Household id \\
VESimHouseholds & \protect\hyperlink{verspm-createhouseholds}{CreateHouseholds} & \textbf{HHSize} & Number of persons in the household \\
VESimHouseholds & \protect\hyperlink{verspm-predictincome}{PredictIncome} & \textbf{Income} & Total annual income of household \\
VELandUse & \protect\hyperlink{verspm-assignloctypes}{AssignLocTypes} & \textbf{LocType} & Location type (Urban, Town, Rural) of the place where the household resides \\
VETravelPerformance & \protect\hyperlink{verspm-calculatevehicleoperatingcost}{CalculateVehicleOperatingCost} & \textbf{AveVehCostPM} & Average out-of-pocket cost in dollars per mile of vehicle travel \\
VEHouseholdVehicles & \protect\hyperlink{verspm-adjustvehicleownership}{AdjustVehicleOwnership} & \textbf{OwnCostSavings} & Annual vehicle ownership cost (depreciation, finance, insurance, taxes) savings in dollars resulting from substituting the use of car services for a household vehicle \\
VEHouseholdVehicles & \protect\hyperlink{verspm-calculatevehicleowncost}{CalculateVehicleOwnCost} & \textbf{HasPaydIns} & Identifies whether household has pay-as-you-drive insurance for vehicles: 1 = Yes, 0 = no \\
VETravelPerformance & \protect\hyperlink{verspm-calculatevehicleoperatingcost}{CalculateVehicleOperatingCost} & \textbf{AveGPM} & Average gasoline equivalent gallons per mile of household vehicle travel \\
VETravelPerformance & \protect\hyperlink{verspm-calculatevehicleoperatingcost}{CalculateVehicleOperatingCost} & \textbf{AveKWHPM} & Average kilowatt-hours per mile of household vehicle travel \\
VETravelPerformance & \protect\hyperlink{verspm-calculatevehicleoperatingcost}{CalculateVehicleOperatingCost} & \textbf{AveCO2ePM} & Average grams of carbon-dioxide equivalents produced per mile of household vehicle travel \\
VELandUse & \protect\hyperlink{verspm-assignparkingrestrictions}{AssignParkingRestrictions} & \textbf{ParkingCost} & Daily cost for long-term parking (e.g.~paid on monthly basis) \\
VELandUse & \protect\hyperlink{verspm-assignparkingrestrictions}{AssignParkingRestrictions} & \textbf{IsCashOut} & Is worker paid parking in cash-out-buy-back program: 1 = yes, 0 = no \\
VELandUse & \protect\hyperlink{verspm-assignparkingrestrictions}{AssignParkingRestrictions} & \textbf{PaysForParking} & Does worker pay for parking: 1 = yes, 0 = no \\
VEHouseholdVehicles & \protect\hyperlink{verspm-calculatevehicleowncost}{CalculateVehicleOwnCost} & \textbf{InsCost} & Annual vehicle insurance cost in dollars \\
& & & \\
\bottomrule()
\end{longtable}

\hypertarget{module-outputs-35}{%
\subsubsection*{Module Outputs}\label{module-outputs-35}}
\addcontentsline{toc}{subsubsection}{Module Outputs}

\begin{itemize}
\tightlist
\item
  \textbf{Dvmt}: Average daily vehicle miles traveled by the household in autos or light trucks
\item
  \textbf{UrbanHhDvmt}: Average daily vehicle miles traveled in autos or light trucks by households residing in the urbanized portion of the Marea
\item
  \textbf{RuralHhDvmt}: Average daily vehicle miles traveled in autos or light trucks by households residing in the non-urbanized portion of the Marea
\item
  \textbf{DailyGGE}: Gasoline equivalent gallons consumed per day by household vehicle travel
\item
  \textbf{DailyKWH}: Kilowatt-hours consumed per day by household vehicle travel
\item
  \textbf{DailyCO2e}: Grams of carbon-dioxide equivalents produced per day by household vehicle travel
\item
  \textbf{WalkTrips}: Average number of walk trips per year by household members
\item
  \textbf{BikeTrips}: Average number of bicycle trips per year by household members
\item
  \textbf{TransitTrips}: Average number of public transit trips per year by household members
\item
  \textbf{VehicleTrips}: Average number of vehicle trips per day by household members
\end{itemize}

\hypertarget{verspm-calculatecomenergyandemissions}{%
\subsection{CalculateComEnergyAndEmissions}\label{verspm-calculatecomenergyandemissions}}

This module calculates the energy consumption and carbon emissions of heavy trucks and light-duty commercial service vehicles. It does not calculate the values for car service vehicles which are calculated as part of the household emissions. It also does not calculate public transit emissions which are calculated in the CalculateTransitEnergyAndEmissions module.

\hypertarget{user-input-files-36}{%
\subsubsection*{User Input Files}\label{user-input-files-36}}
\addcontentsline{toc}{subsubsection}{User Input Files}

\hypertarget{commercial-service-light-trucks-proportion-region_comsvc_lttrk_prop.csv}{%
\paragraph*{Commercial Service Light Trucks Proportion (region\_comsvc\_lttrk\_prop.csv)}\label{commercial-service-light-trucks-proportion-region_comsvc_lttrk_prop.csv}}
\addcontentsline{toc}{paragraph}{Commercial Service Light Trucks Proportion (region\_comsvc\_lttrk\_prop.csv)}

This file supplies data for the light truck proportion of commercial vehicles for the region.

\begin{itemize}
\tightlist
\item
  \textbf{ComSvcLtTrkProp}: Regional proportion of commercial service vehicles that are light trucks
\end{itemize}

Here is a snapshot of the file:

\begin{longtable}[]{@{}ll@{}}
\toprule()
Year & ComSvcLtTrkProp \\
\midrule()
\endhead
2010 & 0.51 \\
2038 & 0.51 \\
\bottomrule()
\end{longtable}

\hypertarget{commercial-service-vehicle-powertrains-region_comsvc_powertrain_prop.csv-1}{%
\paragraph*{Commercial Service Vehicle Powertrains (region\_comsvc\_powertrain\_prop.csv)}\label{commercial-service-vehicle-powertrains-region_comsvc_powertrain_prop.csv-1}}
\addcontentsline{toc}{paragraph}{Commercial Service Vehicle Powertrains (region\_comsvc\_powertrain\_prop.csv)}

This input file is OPTIONAL. It is only needed if the user wants to modify the powertrain proportion of commercial vehicles.

\begin{itemize}
\tightlist
\item
  \textbf{ComSvcAutoPropIcev}: Proportion of commercial service automobile travel powered by internal combustion engine powertrains
\item
  \textbf{ComSvcAutoPropHev}: Proportion of commercial service automobile travel powered by hybrid electric powertrains
\item
  \textbf{ComSvcAutoPropBev}: Proportion of commercial service automobile travel powered by battery electric powertrains
\item
  \textbf{ComSvcLtTrkPropIcev}: Proportion of commercial service light truck travel powered by internal combustion engine powertrains
\item
  \textbf{ComSvcLtTrkPropHev}: Proportion of commercial service light truck travel powered by hybrid electric powertrains
\item
  \textbf{ComSvcLtTrkPropBev}: Proportion of commercial service light truck travel powered by battery electric powertrainss
\end{itemize}

Here is a snapshot of the file:

\begin{tabular}{l|c|c|c|c|c|c|c}
\hline
Geo & Year & ComSvcAutoPropIcev & ComSvcAutoPropHev & ComSvcAutoPropBev & ComSvcLtTrkPropIcev & ComSvcLtTrkPropHev & ComSvcLtTrkPropBev\\
\hline
RVMPO & 2010 & 0.990 & 0.010 & 0.000 & 1.0000 & 0.0000 & 0.0000\\
\hline
RVMPO & 2038 & 0.441 & 0.528 & 0.031 & 0.5335 & 0.4572 & 0.0093\\
\hline
\end{tabular}

\hypertarget{heavy-duty-truck-powertrains-region_hvytrk_powertrain_prop.csv-1}{%
\paragraph*{Heavy duty Truck Powertrains (region\_hvytrk\_powertrain\_prop.csv)}\label{heavy-duty-truck-powertrains-region_hvytrk_powertrain_prop.csv-1}}
\addcontentsline{toc}{paragraph}{Heavy duty Truck Powertrains (region\_hvytrk\_powertrain\_prop.csv)}

This input file is OPTIONAL. It is only needed if the user wants to modify the powertrain proportion of heavy duty trucks.

\begin{itemize}
\tightlist
\item
  \textbf{HvyTrkPropIcev}: Proportion of heavy truck travel powered by internal combustion engine powertrains
\item
  \textbf{HvyTrkPropHev}: Proportion of heavy truck travel powered by hybrid electric powertrains
\item
  \textbf{HvyTrkPropBev}: Proportion of heavy truck travel powered by battery electric powertrains
\end{itemize}

Here is a snapshot of the file:

\begin{tabular}{l|c|c|c|c}
\hline
Geo & Year & HvyTrkPropIcev & HvyTrkPropHev & HvyTrkPropBev\\
\hline
RVMPO & 2010 & 1.0 & 0.0 & 0.0\\
\hline
RVMPO & 2038 & 0.4 & 0.4 & 0.2\\
\hline
\end{tabular}

\hypertarget{internal-module-inputs-35}{%
\subsubsection*{Internal Module Inputs}\label{internal-module-inputs-35}}
\addcontentsline{toc}{subsubsection}{Internal Module Inputs}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1724}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.3362}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1207}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.3707}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Package
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Module
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Outputs
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule()
\endhead
VEPowertrainsAndFuels & \protect\hyperlink{verspm-calculatecarbonintensity}{CalculateCarbonIntensity} & \textbf{ElectricityCI} & Carbon intensity of electricity at point of consumption (grams CO2e per megajoule) \\
VEPowertrainsAndFuels & \protect\hyperlink{verspm-calculatecarbonintensity}{CalculateCarbonIntensity} & \textbf{HhAutoFuelCI} & Average carbon intensity of fuels used by household automobiles (grams CO2e per megajoule)) \\
VEPowertrainsAndFuels & \protect\hyperlink{verspm-calculatecarbonintensity}{CalculateCarbonIntensity} & \textbf{HhLtTrkFuelCI} & Average carbon intensity of fuels used by household light trucks (grams CO2e per megajoule) \\
VEPowertrainsAndFuels & \protect\hyperlink{verspm-calculatecarbonintensity}{CalculateCarbonIntensity} & \textbf{HvyTrkFuelCI} & Average carbon intensity of fuels used by heavy trucks (grams CO2e per megajoule) \\
VETravelPerformance & \protect\hyperlink{verspm-calculatempgmpkwhadjustments}{CalculateMpgMpkwhAdjustments} & \textbf{LdvEcoDrive} & Eco-driving penetration for light-duty vehicles; the fraction of vehicles from 0 to 1 \\
VETravelPerformance & \protect\hyperlink{verspm-calculatempgmpkwhadjustments}{CalculateMpgMpkwhAdjustments} & \textbf{HvyTrkEcoDrive} & Eco-driving penetration for heavy-duty vehicles; the fraction of vehicles from 0 to 1 \\
VETravelPerformance & \protect\hyperlink{verspm-calculatempgmpkwhadjustments}{CalculateMpgMpkwhAdjustments} & \textbf{LdvSpdSmoothFactor} & Proportional adjustment of light-duty internal combustion engine (ICE) vehicle MPG due to speed smoothing \\
VETravelPerformance & \protect\hyperlink{verspm-calculatempgmpkwhadjustments}{CalculateMpgMpkwhAdjustments} & \textbf{LdvEcoDriveFactor} & Proportional adjustment of light-duty internal combustion engine (ICE) vehicle MPG due to eco-driving \\
VETravelPerformance & \protect\hyperlink{verspm-calculatempgmpkwhadjustments}{CalculateMpgMpkwhAdjustments} & \textbf{HvyTrkSpdSmoothFactor} & Proportional adjustment of heavy truck internal combustion engine (ICE) vehicle MPG due to speed smoothing \\
VETravelPerformance & \protect\hyperlink{verspm-calculatempgmpkwhadjustments}{CalculateMpgMpkwhAdjustments} & \textbf{LdIceFactor} & Proportional adjustment of light-duty internal combustion engine (ICE) vehicle MPG due to congestion \\
VETravelPerformance & \protect\hyperlink{verspm-calculatempgmpkwhadjustments}{CalculateMpgMpkwhAdjustments} & \textbf{LdHevFactor} & Proportional adjustment of light-duty hybrid-electric vehicle (HEV) MPG due to congestion \\
VETravelPerformance & \protect\hyperlink{verspm-calculatempgmpkwhadjustments}{CalculateMpgMpkwhAdjustments} & \textbf{HvyTrkEcoDriveFactor} & Proportional adjustment of heavy truck internal combustion engine (ICE) vehicle MPG due to eco-driving \\
VETravelPerformance & \protect\hyperlink{verspm-calculatempgmpkwhadjustments}{CalculateMpgMpkwhAdjustments} & \textbf{LdEvFactor} & Proportional adjustment of light-duty battery electric vehicle (EV) MPkWh due to congestion \\
VETravelPerformance & \protect\hyperlink{verspm-calculatempgmpkwhadjustments}{CalculateMpgMpkwhAdjustments} & \textbf{HdIceFactor} & Proportional adjustment of heavy-duty internal combustion engine (ICE) vehicle MPG due to congestion \\
VETravelPerformance & \protect\hyperlink{verspm-calculatebaseroaddvmt}{CalculateBaseRoadDvmt} & \textbf{HvyTrkUrbanDvmt} & Base year Region heavy truck daily vehicle miles of travel in urbanized areas \\
VETravelPerformance & \protect\hyperlink{verspm-calculatebaseroaddvmt}{CalculateBaseRoadDvmt} & \textbf{HvyTrkRuralDvmt} & Base year Region heavy truck daily vehicle miles of travel in rural (i.e.~non-urbanized) areas \\
VETravelPerformance & \protect\hyperlink{verspm-calculatebaseroaddvmt}{CalculateBaseRoadDvmt} & \textbf{ComSvcUrbanDvmt} & Commercial service daily vehicle miles of travel associated with Marea urbanized household activity \\
VETravelPerformance & \protect\hyperlink{verspm-calculatebaseroaddvmt}{CalculateBaseRoadDvmt} & \textbf{ComSvcRuralDvmt} & Commercial service daily vehicle miles of travel associated with Marea rural household activity \\
\bottomrule()
\end{longtable}

\hypertarget{module-outputs-36}{%
\subsubsection*{Module Outputs}\label{module-outputs-36}}
\addcontentsline{toc}{subsubsection}{Module Outputs}

\begin{itemize}
\item
  \textbf{ComSvcUrbanGGE}: Average daily amount of hydrocarbon fuels consumed by commercial service vehicles associated with urban household activity in gas gallon equivalents
\item
  \textbf{ComSvcRuralGGE}: Average daily amount of hydrocarbon fuels consumed by commercial service vehicles associated with rural household activity in gas gallon equivalents
\item
  \textbf{HvyTrkUrbanGGE}: Average daily amount of hydrocarbon fuels consumed by heavy trucks on urbanized area roadways in the Marea in gas gallon equivalents
\item
  \textbf{ComSvcUrbanKWH}: Average daily amount of electricity consumed by commercial service vehicles associated with urban household activity in kilowatt-hours
\item
  \textbf{ComSvcRuralKWH}: Average daily amount of electricity consumed by commercial service vehicles associated with rural household activity in kilowatt-hours
\item
  \textbf{ComSvcUrbanCO2e}: Average daily amount of carbon-dioxide equivalents produced by commercial service vehicles associated with urban household activity in grams
\item
  \textbf{ComSvcRuralCO2e}: Average daily amount of carbon-dioxide equivalents produced by commercial service vehicles associated with rural household activity in grams
\item
  \textbf{HvyTrkUrbanCO2e}: Average daily amount of carbon-dioxide equivalents produced by heavy trucks on urbanized area roadways in the Marea in grams
\item
  \textbf{ComSvcAveUrbanAutoCO2eRate}: Average amount of carbon-dioxide equivalents produced by commercial service automobiles per mile of travel on urbanized area roadways in grams per mile
\item
  \textbf{ComSvcAveUrbanLtTrkCO2eRate}: Average amount of carbon-dioxide equivalents produced by commercial service light trucks per mile of travel on urbanized area roadways in grams per mile
\item
  \textbf{HvyTrkAveUrbanCO2eRate}: Average amount of carbon-dioxide equivalents produced by heavy trucks per mile of travel on urbanized area roadways in grams per mile
\item
  \textbf{HvyTrkRuralGGE}: Average daily amount of hydrocarbon fuels consumed by heavy trucks on rural roadways in the Region in gas gallon equivalents
\item
  \textbf{HvyTrkUrbanGGE}: Average daily amount of hydrocarbon fuels consumed by heavy trucks on urbanized area roadways in the Region in gas gallon equivalents
\item
  \textbf{HvyTrkRuralKWH}: Average daily amount of electricity consumed by heavy trucks on rural roadways in the Region in kilowatt-hours
\item
  \textbf{HvyTrkUrbanKWH}: Average daily amount of electricity consumed by heavy trucks on urbanized area roadways in the Region in kilowatt-hours
\item
  \textbf{HvyTrkRuralCO2e}: Average daily amount of carbon-dioxide equivalents produced by heavy trucks on rural roadways in the Region in grams
\item
  \textbf{HvyTrkUrbanCO2e}: Average daily amount of carbon-dioxide equivalents produced by heavy trucks on urbanized area roadways in the Region in grams
\end{itemize}

\hypertarget{verspm-calculateptranenergyandemissions}{%
\subsection{CalculatePtranEnergyAndEmissions}\label{verspm-calculateptranenergyandemissions}}

This module calculates the energy consumption and carbon emissions of public transit vehicle emissions in urbanized areas.

\hypertarget{user-input-files-37}{%
\subsubsection*{User Input Files}\label{user-input-files-37}}
\addcontentsline{toc}{subsubsection}{User Input Files}

\hypertarget{transit-powertrain-proportions-by-transit-vehicle-type-marea_transit_powertrain_prop.csv-1}{%
\paragraph*{Transit Powertrain Proportions by Transit Vehicle Type (marea\_transit\_powertrain\_prop.csv)}\label{transit-powertrain-proportions-by-transit-vehicle-type-marea_transit_powertrain_prop.csv-1}}
\addcontentsline{toc}{paragraph}{Transit Powertrain Proportions by Transit Vehicle Type (marea\_transit\_powertrain\_prop.csv)}

This input file is OPTIONAL. It is only needed if the user wants to modify the mixes of transit vehicle powertrains.

\begin{itemize}
\tightlist
\item
  \textbf{VanPropIcev}: Proportion of transit van travel using internal combustion engine powertrains
\item
  \textbf{VanPropHev}: Proportion of transit van travel using hybrid electric powertrains
\item
  \textbf{VanPropBev}: Proportion of transit van travel using battery electric powertrains
\item
  \textbf{BusPropIcev}: Proportion of transit bus travel using internal combustion engine powertrains
\item
  \textbf{BusPropHev}: Proportion of transit bus travel using hybrid electric powertrains
\item
  \textbf{BusPropBev}: Proportion of transit bus travel using battery electric powertrains
\item
  \textbf{RailPropIcev}: Proportion of transit rail travel using internal combustion engine powertrains
\item
  \textbf{RailPropHev}: Proportion of transit rail travel using hybrid electric powertrains
\item
  \textbf{RailPropEv}: Proportion of transit rail travel using electric powertrains
\end{itemize}

Here is a snapshot of the file:

\begin{tabular}{l|c|c|c|c|c|c|c|c|c|l}
\hline
Geo & Year & VanPropIcev & VanPropHev & VanPropBev & BusPropIcev & BusPropHev & BusPropBev & RailPropIcev & RailPropHev & RailPropEv\\
\hline
RVMPO & 2010 & 1 & 0 & 0 & 1 & 0 & 0 & 0 & 0 & 1\\
\hline
RVMPO & 2038 & 1 & 0 & 0 & 1 & 0 & 0 & 0 & 0 & 1\\
\hline
\end{tabular}

\hypertarget{internal-module-inputs-36}{%
\subsubsection*{Internal Module Inputs}\label{internal-module-inputs-36}}
\addcontentsline{toc}{subsubsection}{Internal Module Inputs}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1724}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.3362}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1207}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.3707}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Package
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Module
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Outputs
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule()
\endhead
VEPowertrainsAndFuels & \protect\hyperlink{verspm-calculatecarbonintensity}{CalculateCarbonIntensity} & \textbf{ElectricityCI} & Carbon intensity of electricity at point of consumption (grams CO2e per megajoule) \\
VEPowertrainsAndFuels & \protect\hyperlink{verspm-calculatecarbonintensity}{CalculateCarbonIntensity} & \textbf{TransitVanFuelCI} & Average carbon intensity of fuel used by transit vans (grams CO2e per megajoule) \\
VEPowertrainsAndFuels & \protect\hyperlink{verspm-calculatecarbonintensity}{CalculateCarbonIntensity} & \textbf{TransitBusFuelCI} & Average carbon intensity of fuel used by transit buses (grams CO2e per megajoule) \\
VEPowertrainsAndFuels & \protect\hyperlink{verspm-calculatecarbonintensity}{CalculateCarbonIntensity} & \textbf{TransitRailFuelCI} & Average carbon intensity of fuel used by transit rail vehicles (grams CO2e per megajoule) \\
VETransportSupply & \protect\hyperlink{verspm-assigntransitservice}{AssignTransitService} & \textbf{VanDvmt} & Total daily miles traveled by vans of various sizes to provide demand responsive, vanpool, and similar services \\
VETransportSupply & \protect\hyperlink{verspm-assigntransitservice}{AssignTransitService} & \textbf{BusDvmt} & Total daily miles traveled by buses of various sizes to provide bus service of various types \\
VETransportSupply & \protect\hyperlink{verspm-assigntransitservice}{AssignTransitService} & \textbf{RailDvmt} & Total daily miles traveled by light rail, heavy rail, commuter rail, and similar types of vehicles \\
\bottomrule()
\end{longtable}

\hypertarget{module-outputs-37}{%
\subsubsection*{Module Outputs}\label{module-outputs-37}}
\addcontentsline{toc}{subsubsection}{Module Outputs}

\begin{itemize}
\tightlist
\item
  \textbf{BusGGE}: Average daily amount of hydrocarbon fuels consumed by bus transit vehicles in urbanized area in gas gallon equivalents
\item
  \textbf{RailGGE}: Average daily amount of hydrocarbon fuels consumed by rail transit vehicles in urbanized area in gas gallon equivalents
\item
  \textbf{VanGGE}: Average daily amount of hydrocarbon fuels consumed by van transit vehicles in urbanized area in gas gallon equivalents
\item
  \textbf{BusKWH}: Average daily amount of electricity consumed by bus transit vehicles in urbanized area in kilowatt-hours
\item
  \textbf{RailKWH}: Average daily amount of electricity consumed by rail transit vehicles in urbanized area in kilowatt-hours
\item
  \textbf{VanKWH}:Average daily amount of electricity consumed by van transit vehicles in urbanized area in kilowatt-hours
\item
  \textbf{BusCO2e}: Average daily amount of carbon-dioxide equivalents produced by bus transit vehicles in urbanized area in grams
\item
  \textbf{RailCO2e}: Average daily amount of carbon-dioxide equivalents produced by rail transit vehicles in urbanized area in grams
\item
  \textbf{VanCO2e}: Average daily amount of carbon-dioxide equivalents produced by van transit vehicles in urbanized area in grams
\item
  \textbf{BusCO2eRate}: Average amount of carbon-dioxide equivalents produced by bus transit vehicles per mile of travel in urbanized area in grams per mile
\item
  \textbf{RailCO2eRate}: Average amount of carbon-dioxide equivalents produced by rail transit vehicles per mile of travel in urbanized area in grams per mile
\item
  \textbf{VanCO2eRate}: Average amount of carbon-dioxide equivalents produced by van transit vehicles per mile of travel in urbanized area in grams per mile
\end{itemize}

\hypertarget{model-outputs}{%
\section{Model Outputs}\label{model-outputs}}

A large number of performance metrics are produced during the run of the RPAT model, including environment and energy impacts, financial and economic impacts, and community impacts.

The full list of outputs available is as follows. Based on the geo level, you will find our these metrics in of the three files ( \texttt{Azone.csv} , \texttt{Bzone.csv} , \texttt{Marea.csv} ) in the \texttt{outputs} folder

\begin{itemize}
\tightlist
\item
  \textbf{VanDvmt}: Total daily miles traveled by vans of various sizes to provide demand responsive, vanpool, and similar services.
\item
  \textbf{BusDvmt}: Total daily miles traveled by buses of various sizes to provide bus service of various types.
\item
  \textbf{RailDvmt}: Total daily miles traveled by light rail, heavy rail, commuter rail, and similar types of vehicles.
\item
  \textbf{UrbanHhDvmt}: Average daily vehicle miles traveled in autos or light trucks by households residing in the urbanized portion of the Marea
\item
  \textbf{RuralHhDvmt}: Average daily vehicle miles traveled in autos or light trucks by households residing in the non-urbanized portion of the Marea
\item
  \textbf{TownHhDvmt}: Average daily vehicle miles traveled in autos or light trucks by households residing in town (urban but not urbanized) portion of the Marea
\item
  \textbf{ComSvcUrbanDvmt}: Commercial service daily vehicle miles of travel associated with Marea urbanized household activity
\item
  \textbf{ComSvcRuralDvmt}: Commercial service daily vehicle miles of travel associated with Marea rural household activity
\item
  \textbf{HvyTrkUrbanDvmt}: Base year Region heavy truck daily vehicle miles of travel in urbanized areas
\item
  \textbf{LdvOthDvmt}: Light-duty daily vehicle miles of travel in the urbanized portion of the Marea occurring on other roadways
\item
  \textbf{LdvFwyArtDvmt}: Light-duty daily vehicle miles of travel in the urbanized portion of the Marea occurring on freeway or arterial roadways
\item
  \textbf{HvyTrkFwyDvmt}: Heavy truck daily vehicle miles of travel in the urbanized portion of the Marea occurring on freeways
\item
  \textbf{HvyTrkArtDvmt}:Heavy truck daily vehicle miles of travel in the urbanized portion of the Marea occurring on arterial roadways
\item
  \textbf{HvyTrkOthDvmt}: Heavy truck daily vehicle miles of travel in the urbanized portion of the Marea occurring on other roadways
\item
  \textbf{BusFwyDvmt}: Bus daily vehicle miles of travel in the urbanized portion of the Marea occurring on freeways
\item
  \textbf{BusArtDvmt}: Bus daily vehicle miles of travel in the urbanized portion of the Marea occurring on arterial roadways
\item
  \textbf{BusOthDvmt}: Bus daily vehicle miles of travel in the urbanized portion of the Marea occuring on other roadways
\item
  \textbf{LdvFwyDvmt}: Light-duty daily vehicle miles of travel in the urbanized portion of the Marea occurring on freeways
\item
  \textbf{LdvArtDvmt}: Light-duty daily vehicle miles of travel in the urbanized portion of the Marea occurring on arterial roadways
\item
  \textbf{FwyNoneCongSpeed}: Average freeway speed (miles per hour) when there is no congestion
\item
  \textbf{FwyModCongSpeed}: Average freeway speed (miles per hour) when congestion is moderate
\item
  \textbf{FwyHvyCongSpeed}: Average freeway speed (miles per hour) when congestion is heavy
\item
  \textbf{FwySevCongSpeed}: Average freeway speed (miles per hour) when congestion is severe
\item
  \textbf{FwyExtCongSpeed}: Average freeway speed (miles per hour) when congestion is extreme
\item
  \textbf{ArtNoneCongSpeed}: Average arterial speed (miles per hour) when there is no congestion
\item
  \textbf{ArtModCongSpeed}: Average arterial speed (miles per hour) when congestion is moderate
\item
  \textbf{ArtHvyCongSpeed}: Average arterial speed (miles per hour) when congestion is heavy
\item
  \textbf{ArtSevCongSpeed}: Average arterial speed (miles per hour) when congestion is severe
\item
  \textbf{ArtExtCongSpeed}: Average arterial speed (miles per hour) when congestion is extreme
\item
  \textbf{OthSpd}: Average speed (miles per hour) on other roadways
\item
  \textbf{AveLdvSpd}: Average light-duty vehicle speed (miles per hour) on all roadways weighted by the proportions of light-duty vehicle travel
\item
  \textbf{FwyNoneCongDelay}: Average freeway delay (hours per mile) occurring when there is no congestion
\item
  \textbf{FwyModCongDelay}: Average freeway delay (hours per mile) occurring when congestion is moderate
\item
  \textbf{FwyHvyCongDelay}: Average freeway delay (hours per mile) occurring when congestion is heavy
\item
  \textbf{FwySevCongDelay}: Average freeway delay (hours per mile) occurring when congestion is severe
\item
  \textbf{FwyExtCongDelay}: Average freeway delay (hours per mile) occurring when congestion is extreme
\item
  \textbf{ArtNoneCongDelay}: Average arterial delay (hours per mile) occurring when there is no congestion
\item
  \textbf{ArtModCongDelay}: Average arterial delay (hours per mile) occurring when congestion is moderate
\item
  \textbf{ArtHvyCongDelay}: Average arterial delay (hours per mile) occurring when congestion is heavy
\item
  \textbf{ArtSevCongDelay}: Average arterial delay (hours per mile) occurring when congestion is severe
\item
  \textbf{ArtExtCongDelay}: Average arterial delay (hours per mile) occurring when congestion is extreme
\item
  \textbf{FwyDvmtPropNoneCong}: Proportion of freeway DVMT occurring when there is no congestion
\item
  \textbf{FwyDvmtPropModCong}: Proportion of freeway DVMT occurring when congestion is moderate
\item
  \textbf{FwyDvmtPropHvyCong}: Proportion of freeway DVMT occurring when congestion is heavy
\item
  \textbf{FwyDvmtPropSevCong}: Proportion of freeway DVMT occurring when congestion is severe
\item
  \textbf{FwyDvmtPropExtCong}: Proportion of freeway DVMT occurring when congestion is extreme
\item
  \textbf{ArtDvmtPropNoneCong}: Proportion of arterial DVMT occurring when there is no congestion
\item
  \textbf{ArtDvmtPropModCong}: Proportion of arterial DVMT occurring when congestion is moderate
\item
  \textbf{ArtDvmtPropHvyCong}: Proportion of arterial DVMT occurring when congestion is heavy
\item
  \textbf{ArtDvmtPropSevCong}: Proportion of arterial DVMT occurring when congestion is severe
\item
  \textbf{ArtDvmtPropExtCong}: Proportion of arterial DVMT occurring when congestion is extreme
\item
  \textbf{AveCongPrice}: Average price paid (dollars per mile) in congestion fees
\item
  \textbf{LdvSpdSmoothFactor}: Proportional adjustment of light-duty internal combustion engine (ICE) vehicle MPG due to speed smoothing
\item
  \textbf{HvyTrkSpdSmoothFactor}: Proportional adjustment of heavy truck internal combustion engine (ICE) vehicle MPG due to speed smoothing
\item
  \textbf{BusSpdSmoothFactor}: Proportional adjustment of bus internal combustion engine (ICE) vehicle MPG due to speed smoothing
\item
  \textbf{LdvEcoDriveFactor}: Proportional adjustment of light-duty internal combustion engine (ICE) vehicle MPG due to eco-driving
\item
  \textbf{HvyTrkEcoDriveFactor}: Proportional adjustment of heavy truck internal combustion engine (ICE) vehicle MPG due to eco-driving
\item
  \textbf{BusEcoDriveFactor}: Proportional adjustment of bus internal combustion engine (ICE) vehicle MPG due to eco-driving
\item
  \textbf{LdIceFactor}: Proportional adjustment of light-duty internal combustion engine (ICE) vehicle MPG due to congestion
\item
  \textbf{LdHevFactor}: Proportional adjustment of light-duty hybrid-electric vehicle (HEV) MPG due to congestion
\item
  \textbf{LdEvFactor}: Proportional adjustment of light-duty battery electric vehicle (EV) MPkWh due to congestion
\item
  \textbf{LdFcvFactor}: Proportional adjustment of light-duty fuel cell vehicle (FCV) MPkWh due to congestion
\item
  \textbf{HdIceFactor}: Proportional adjustment of heavy-duty internal combustion engine (ICE) vehicle MPG due to congestion
\item
  \textbf{ComSvcUrbanGGE}: Average daily amount of hydrocarbon fuels consumed by commercial service vehicles associated with urban household activity in gas gallon equivalents
\item
  \textbf{ComSvcRuralGGE}: Average daily amount of hydrocarbon fuels consumed by commercial service vehicles associated with rural household activity in gas gallon equivalents
\item
  \textbf{HvyTrkUrbanGGE}: Average daily amount of hydrocarbon fuels consumed by heavy trucks on urbanized area roadways in the Marea in gas gallon equivalents
\item
  \textbf{ComSvcUrbanKWH}: Average daily amount of electricity consumed by commercial service vehicles associated with urban household activity in kilowatt-hours
\item
  \textbf{ComSvcRuralKWH}: Average daily amount of electricity consumed by commercial service vehicles associated with rural household activity in kilowatt-hours
\item
  \textbf{ComSvcUrbanCO2e}: Average daily amount of carbon-dioxide equivalents produced by commercial service vehicles associated with urban household activity in grams
\item
  \textbf{ComSvcRuralCO2e}: Average daily amount of carbon-dioxide equivalents produced by commercial service vehicles associated with rural household activity in grams
\item
  \textbf{HvyTrkUrbanCO2e}: Average daily amount of carbon-dioxide equivalents produced by heavy trucks on urbanized area roadways in the Marea in grams
\item
  \textbf{ComSvcAveUrbanAutoCO2eRate}: Average amount of carbon-dioxide equivalents produced by commercial service automobiles per mile of travel on urbanized area roadways in grams per mile
\item
  \textbf{ComSvcAveUrbanLtTrkCO2eRate}: Average amount of carbon-dioxide equivalents produced by commercial service light trucks per mile of travel on urbanized area roadways in grams per mile
\item
  \textbf{HvyTrkAveUrbanCO2eRate}: Average amount of carbon-dioxide equivalents produced by heavy trucks per mile of travel on urbanized area roadways in grams per mile
\item
  \textbf{HvyTrkRuralGGE}: Average daily amount of hydrocarbon fuels consumed by heavy trucks on rural roadways in the Region in gas gallon equivalents
\item
  \textbf{HvyTrkUrbanGGE}: Average daily amount of hydrocarbon fuels consumed by heavy trucks on urbanized area roadways in the Region in gas gallon equivalents
\item
  \textbf{HvyTrkRuralKWH}: Average daily amount of electricity consumed by heavy trucks on rural roadways in the Region in kilowatt-hours
\item
  \textbf{HvyTrkUrbanKWH}: Average daily amount of electricity consumed by heavy trucks on urbanized area roadways in the Region in kilowatt-hours
\item
  \textbf{HvyTrkRuralCO2e}: Average daily amount of carbon-dioxide equivalents produced by heavy trucks on rural roadways in the Region in grams
\item
  \textbf{HvyTrkUrbanCO2e}: Average daily amount of carbon-dioxide equivalents produced by heavy trucks on urbanized area roadways in the Region in grams
\item
  \textbf{BusGGE}: Average daily amount of hydrocarbon fuels consumed by bus transit vehicles in urbanized area in gas gallon equivalents
\item
  \textbf{RailGGE}: Average daily amount of hydrocarbon fuels consumed by rail transit vehicles in urbanized area in gas gallon equivalents
\item
  \textbf{VanGGE}: Average daily amount of hydrocarbon fuels consumed by van transit vehicles in urbanized area in gas gallon equivalents
\item
  \textbf{BusKWH}: Average daily amount of electricity consumed by bus transit vehicles in urbanized area in kilowatt-hours
\item
  \textbf{RailKWH}: Average daily amount of electricity consumed by rail transit vehicles in urbanized area in kilowatt-hours
\item
  \textbf{VanKWH}:Average daily amount of electricity consumed by van transit vehicles in urbanized area in kilowatt-hours
\item
  \textbf{BusCO2e}: Average daily amount of carbon-dioxide equivalents produced by bus transit vehicles in urbanized area in grams
\item
  \textbf{RailCO2e}: Average daily amount of carbon-dioxide equivalents produced by rail transit vehicles in urbanized area in grams
\item
  \textbf{VanCO2e}: Average daily amount of carbon-dioxide equivalents produced by van transit vehicles in urbanized area in grams
\item
  \textbf{BusCO2eRate}: Average amount of carbon-dioxide equivalents produced by bus transit vehicles per mile of travel in urbanized area in grams per mile
\item
  \textbf{RailCO2eRate}: Average amount of carbon-dioxide equivalents produced by rail transit vehicles per mile of travel in urbanized area in grams per mile
\item
  \textbf{VanCO2eRate}: Average amount of carbon-dioxide equivalents produced by van transit vehicles per mile of travel in urbanized area in grams per mile
\item
  \textbf{AveVehCostPM}: Average out-of-pocket cost in dollars per mile of vehicle travel
\item
  \textbf{AveSocEnvCostPM}: Average cost in dollars of the social and environmental impacts per mile of vehicle travel
\item
  \textbf{AveRoadUseTaxPM}: Average road use taxes in dollars collected per mile of vehicle travel
\item
  \textbf{WalkTrips}: Average number of walk trips per year by household members
\item
  \textbf{BikeTrips}: Average number of bicycle trips per year by household members
\item
  \textbf{TransitTrips}: Average number of public transit trips per year by household members
\item
  \textbf{VehicleTrips}: Average number of vehicle trips per day by household members
\end{itemize}

For simplicity, eight key metrics are calculated from multiple scenario runs and are shown on the Scenario Viewer output page:

\begin{itemize}
\tightlist
\item
  \textbf{GHG Target Reduction}: percentage reduction in light-duty vehicle CHG emissions
\item
  \textbf{DVMT Per Capita}: daily vehicle miles of travel of residents divided by population
\item
  \textbf{Walk Trips Per Capita}: annual residents walk trips ( not including recreation or walk to transit)
\item
  \textbf{Air Pollution Emissions}: daily metric tons of pollutants emitted from all light-duty vehicle travel
\item
  \textbf{Annual Fuel Use}: annual million gallons of gasoline and other fuels consumed by all light-duty vehicle travel
\item
  \textbf{Truck Delay}: daily vehicle-hours of delay for heavy truck trael on area roads
\item
  \textbf{Household Vehicle Cost as Percentage of Income}: average percentage of income spent by all households by owning and operating light-duty vehicles
\item
  \textbf{Low Income Household Vehicle Cost as Percentage of Income}: average percentage of income spent by low-income households on owning and operating light-duty vehicles
\end{itemize}

\hypertarget{vestate}{%
\chapter{VE-State Model Details}\label{vestate}}

\hypertarget{ve-state-vs.-ve-rspm}{%
\section{VE-State Vs. VE-RSPM}\label{ve-state-vs.-ve-rspm}}

The main difference between VE-RSPM models and VE-State models is that a number of VE-RSPM inputs are specified at the Bzone level. The Bzones are sub-regional geographies, typically census tracts or block groups. Diagrams are available on the VisionEval wiki for a visual explanation of the \href{https://github.com/VisionEval/VisionEval/wiki/VERSPM-Training/VE-RSPM_Inputs_by_Geo.pdf}{VE-RSPM} and \href{https://github.com/VisionEval/VisionEval/wiki/VERSPM-Training/VE-State_Inputs_by_Geo.pdf}{VE-State} geographies.
Also, note that `Azones' are typically counties, and `Mareas' are metropolitan areas, typically defined by the boundaries of an MPO.

The following diagrams show how these two model differ at the early stages.
VE-State uses simulation methods to generate land use and housing input in Bzone level.

\hypertarget{ve-rspm-structure}{%
\subsection{VE-RSPM Structure}\label{ve-rspm-structure}}

\hypertarget{ve-state-structure}{%
\subsection{VE-State Structure}\label{ve-state-structure}}

Bzone level attributes are required by a number of modules so methods need to be developed for synthesizing a representative set of Bzones and their characteristics from policies and attributes specified at the Azone and Marea levels. Something like this is done in the GreenSTEP model where a likely distribution of neighborhood population density is synthesized from the overall metropolitan area density. Azone level inputs are provided for base year population and area by development type (metropolitan, town, rural), population growth by development type, and the ratio of urban area growth to population growth. From these inputs, average density is calculated by Azone and development type and a model is applied to synthesize a distribution of neighborhood densities from the average density.
All of the VE-RSPM modules which assign Bzone characteristics are contained in the \texttt{VELandUse} package. The modules that are developed to synthesize Bzones and their characteristics will be placed in a \texttt{VESimLandUse} package. When a VE-State model is run, the modules in the \texttt{VESimLandUse} package will be run instead of the modules in the \texttt{VELandUse} package. Otherwise the model setup is nearly the same for VE-State and VE-RSPM. The use of the \texttt{VESimLandUse} modules is not be limited to statewide applications however. Users could simulate Bzones in an VE-RSPM-type application that would enable metropolitan area planners to more easily define and model alternative land use scenarios as is done in VE-RPAT (Rapid Policy Analysis Tool) applications.

\hypertarget{required-bzone-attributes}{%
\section{Required Bzone Attributes}\label{required-bzone-attributes}}

Land use modeling in VE-RSPM is the basis for the land use modeling in VE-State. These modules were designed to produce datasets needed to run the new multi-modal travel model. The multi-modal module requires several activity density, diversity (i.e., activity mixing), and destination accessibility measures that in turn require households and employment to be located at the Bzone level to calculate those measures. In addition, a few multi-modal network and service level measures need to be calculated. Second, locating jobs at the Bzone level allows for the travel demand management (TDM) and parking pricing modules to establish more realistic relationships between policies and the households they would affect. This also allows household workers to be assigned to job sites and that information can be used to translate job site TDM and parking policies back to households. Finally, simulated households are assigned to Bzones. In VE-RSPM a number of single family and multifamily dwelling units are assigned to Bzones as inputs along with the relative income distribution of households in each Bzone. VE-RSPM models the housing choice of each household based on the overall supply of housing of each type in the Azone and the household characteristics. Then the model assigns each household to a Bzone based on the household's housing choice and income, and on the relative supplies of housing of the type and household income distribution in the Bzone. The Bzone attributes that need to be synthesized are:

\begin{itemize}
\tightlist
\item
  Destination accessibility (i.e., accessibility to jobs and housing) measured consistent as it is used in the multi-modal travel model -- This information is one of the 5D measured used in the VE-RSPM multi-modal travel model. Since synthetic zones won't have physical locations, it can't be calculated simply from households and employment by zone.
\item
  Number of households proportional split of dwelling units between single family and multifamily -- Number of households and dwelling unit split by Bzone is needed in order to assign households to Bzones.
\item
  Number of jobs by sector (retail, service, other) is used in calculating several diversity measures used in the RSPM multi-modal travel model. The number of jobs is also used to associate household workers with workplace Bzones
\item
  Area type and development type -- Some practical system of zonal development classification is needed for organizing policy inputs. Policies such as travel demand management policies will be specified by Azone and area type and/or development type. These designations will also be used in the calculation of the design and distance to transit `5D' measure categories that are used in the VE-RSPM multi-modal travel model.
\end{itemize}

\hypertarget{approach-for-synthesizing-bzones-and-their-attributes}{%
\section{Approach for Synthesizing Bzones and their Attributes}\label{approach-for-synthesizing-bzones-and-their-attributes}}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  The user provides inputs on:\\
\end{enumerate}

\begin{itemize}
\tightlist
\item
  Azone proportional split of dwelling units by location type (metropolitan, town and rural)
\item
  Azone proportional split of workers by job site location types (for example, proportions of rural residents in the Azone who work in rural locations, town locations, or the metropolitan area)
\item
  Marea proportional split of Marea employment among Azones
\end{itemize}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\setcounter{enumi}{1}
\item
  Total activity -- numbers of households and jobs -- will determine the number of SimBzones in the Azone. SimBzones will have equal amounts of activity and unequal areas since activity density will vary among SimBzones. An appropriate average SimBzone activity value will be determined through evaluation of the \href{https://www.epa.gov/smartgrowth/smart-location-mapping\#SLD}{EPA Smart Location Database (SLD)}.
\item
  Models will be applied to select a destination accessibility value for each Bzone. For metropolitan type development, the model will create a distribution of destination accessibility values that is consistent with the overall activity density in the metropolitan area. Random sampling from the distribution will be used to assign destination accessibility values to metropolitan SimBzones. Models will also be developed for town and rural types, but more investigation is needed in order to determine their form.
\item
  Activity density of each SimBzones will be determined as a function of the destination accessibility of each zone (because destination accessibility is a measure of activity density at a larger geographic scale). A model will be estimated from the SLD which creates a distribution of zone densities as a function of destination accessibility. An adjustment process, such as an iterative proportional fitting process (IPF), will be used to adjust densities and destination accessibilities so that the overall activity density of all the zones in a metropolitan area is equal to the input value
\item
  Further subdivision of the metropolitan area into area types will be done as a function of the destination accessibility and activity density of each zone. Four such area types are proposed: urban core, close in community, and suburban/town, low density/rural. The final typology and the relationship of area types to destination accessibility and activity density will be developed through examination of the SLD dataset. It is envisioned that area types will be defined as fuzzy sets rather than crisp sets. Although some SimBzones may be wholly one type, many SimBzones will have degrees of membership in several types. Using fuzzy sets is a more realistic recognition of the nature of area types and avoids aberrations resulting from threshold effects.
\item
  The total activity in each SimBzone is split into households and jobs using a model which relates zonal mixing to destination accessibility, activity density, and area type. This model will be specified and estimated based on investigations using the SLD data. It is anticipated that the model will produce distributions of activity splits from which values will be drawn. IPF or some other adjustment process will be used to adjust values so that the aggregation of the splits for all the SimBzones in an Azone is consistent with the Azone inputs. This model will also need to specify the split of land area between households and jobs.
\item
  Once the number of households is determined for each SimBzone, the split of dwelling units by housing type (single family, multifamily) as a function of activity density. The SLD and census data will be used to develop this model. IPF is be used to fit the distribution of SimBzone values to Azone level control totals. This will allow users to specify Azone ratios as policy inputs.
\item
  A variant of the VE-RSPM housing model is applied to assign households to housing types and to Bzones. One thing to be worked out is whether the allocation to SimBzones considers household income or not. In VE-RSPM, relative Bzone income distributions are input and these are used in the process of allocating households to Bzones. This enables VE-State users to model general relationships of income to parts of the metropolitan area (e.g., the effect of gentrification in the urban core).
\item
  Jobs in each SimBzone will be split into numbers of retail, service, and other jobs. The approach for doing this is yet to be determined. SimBzone splits will be constrained so that they total to Azone splits that are inputs. The model will probably be a function of the destination accessibility, employment density, and mixing of households and employment in the SimBzone. The SLD data will be used to develop and estimate this model. Thought will be given as to whether there should be control totals on the mix for a metropolitan area. If so, IPF or some other adjustment process would need to be used to match the totals.
\item
  Workers will be assigned to SimBzone job sites. How this is done is yet to be determined. It is proposed that an agile development approach be used where the first iteration of the model will be a random assignment of workers to job sites. Other extensions that could be considered if there is time/budget investigation could be done using LEHD data and SLD data to look for relationships between worker residence by area type and worker job site by area type. Relative income could also be considered.
\item
  Once numbers of households and numbers of jobs by type are assigned to SimBzones, all the remaining density and diversity measures can be calculated.
\item
  The distance to transit measure is modeled for metropolitan SimBzones as a function of the metropolitan-level transit supply measure and the SimBzone attributes for destination
\item
  Development type (e.g., residential, employment, mixed, transit-oriented development, greenfield), are assigned to SimBzones based on the density, diversity, and distance to transit measures. These development types, like the area types may be fuzzy sets. The SLD is used to create the development type specifications. The design will enable model users to input Marea goals for the proportional split of development types. The model will adjust the allocation of development types consistent with the goals but constrained to plausible levels.
\item
  Network design measures used by the VE-RSPM multi-modal travel model (e.g., multi-modal network density, pedestrian network density) will be applied based on inputs related to area and development type. The SLD will be used to identify ranges of values by area and development type. Users will specify in inputs goals relative to these ranges by Azone, development type and area type.
\item
  The parking pricing, travel demand management, and car service inputs is specified by Azone, area type, and development type. These will then be translated to the SimBzone based on the SimBzone area type and development type. After that is done, the \texttt{AssignDemandManagement}, \texttt{AssignParkingRestrictions}, and \texttt{AssignCarSvcAvailability} modules can run as they currently do. Thought will be given as to how to simplify inputs so that users are not required to provide inputs for every combination of Azone, area type and development type.
\end{enumerate}

\hypertarget{modules-and-outputs-1}{%
\section{Modules and Outputs}\label{modules-and-outputs-1}}

The VE-State model is a compilation of several modules, listed below:

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 2\tabcolsep) * \real{0.7071}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 2\tabcolsep) * \real{0.2929}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
MODULE
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
PACKAGE
\end{minipage} \\
\midrule()
\endhead
\protect\hyperlink{vestate-createhouseholds}{CreateHouseholds} & VESimHouseholds \\
\protect\hyperlink{vestate-predictworkers}{PredictWorkers} & VESimHouseholds \\
\protect\hyperlink{vestate-assignlifecycle}{AssignLifeCycle} & VESimHouseholds \\
\protect\hyperlink{vestate-predictincome}{PredictIncome} & VESimHouseholds \\
\protect\hyperlink{vestate-initialize}{Initialize} & VESimLandUse \\
\protect\hyperlink{vestate-createsimbzones}{CreateSimBzones} & VESimLandUse \\
\protect\hyperlink{vestate-simulatehousing}{SimulateHousing} & VESimLandUse \\
\protect\hyperlink{vestate-simulateemployment}{SimulateEmployment} & VESimLandUse \\
\protect\hyperlink{vestate-simulate4dmeasures}{Simulate4DMeasures} & VESimLandUse \\
\protect\hyperlink{vestate-simulateurbanmixmeasure}{SimulateUrbanMixMeasure} & VESimLandUse \\
\protect\hyperlink{vestate-assignparkingrestrictions}{AssignParkingRestrictions} & VESimLandUse \\
\protect\hyperlink{vestate-assigndemandmanagement}{AssignDemandManagement} & VESimLandUse \\
\protect\hyperlink{vestate-assigncarsvcavailability}{AssignCarSvcAvailability} & VESimLandUse \\
\protect\hyperlink{vestate-simulatetransitservice}{SimulateTransitService} & VESimTransportSupply \\
\protect\hyperlink{vestate-simulateroadmiles}{SimulateRoadMiles} & VESimTransportSupply \\
\protect\hyperlink{vestate-assigndrivers}{AssignDrivers} & VEHouseholdVehicles \\
\protect\hyperlink{vestate-assignvehicleownership}{AssignVehicleOwnership} & VEHouseholdVehicles \\
\protect\hyperlink{vestate-assignvehicletype}{AssignVehicleType} & VEHouseholdVehicles \\
\protect\hyperlink{vestate-createvehicletable}{CreateVehicleTable} & VEHouseholdVehicles \\
\protect\hyperlink{vestate-assignvehicleage}{AssignVehicleAge} & VEHouseholdVehicles \\
\protect\hyperlink{vestate-calculatevehicleowncost}{CalculateVehicleOwnCost} & VEHouseholdVehicles \\
\protect\hyperlink{vestate-adjustvehicleownership}{AdjustVehicleOwnership} & VEHouseholdVehicles \\
\protect\hyperlink{vestate-calculatehouseholddvmt}{CalculateHouseholdDvmt} & VEHouseholdTravel \\
\protect\hyperlink{vestate-calculatealtmodetrips}{CalculateAltModeTrips} & VEHouseholdTravel \\
\protect\hyperlink{vestate-calculatevehicletrips}{CalculateVehicleTrips} & VEHouseholdTravel \\
\protect\hyperlink{vestate-divertsovtravel}{DivertSovTravel} & VEHouseholdTravel \\
\protect\hyperlink{vestate-initialize-vepowertrainsandfuels}{Initialize} & VEPowertrainsAndFuels \\
\protect\hyperlink{vestate-calculatecarbonintensity}{CalculateCarbonIntensity} & VEPowertrainsAndFuels \\
\protect\hyperlink{vestate-assignhhvehiclepowertrain}{AssignHhVehiclePowertrain} & VEPowertrainsAndFuels \\
\protect\hyperlink{vestate-initialize-vetravelperformance}{Initialize} & VETravelPerformance \\
\protect\hyperlink{vestate-calculatebaseroaddvmt}{CalculateBaseRoadDvmt} & VETravelPerformance \\
\protect\hyperlink{vestate-calculatefutureroaddvmt}{CalculateFutureRoadDvmt} & VETravelPerformance \\
\protect\hyperlink{vestate-calculateroadperformance}{CalculateRoadPerformance} & VETravelPerformance \\
\protect\hyperlink{vestate-calculatempgmpkwhadjustments}{CalculateMpgMpkwhAdjustments} & VETravelPerformance \\
\protect\hyperlink{vestate-adjusthhvehiclempgmpkwh}{AdjustHhVehicleMpgMpkwh} & VETravelPerformance \\
\protect\hyperlink{vestate-calculatevehicleoperatingcost}{CalculateVehicleOperatingCost} & VETravelPerformance \\
\protect\hyperlink{vestate-budgethouseholddvmt}{BudgetHouseholdDvmt} & VETravelPerformance \\
\protect\hyperlink{vestate-balanceroadcostsandrevenues}{BalanceRoadCostsAndRevenues} & VETravelPerformance \\
\protect\hyperlink{vestate-calculatecomenergyandemissions}{CalculateComEnergyAndEmissions} & VETravelPerformance \\
\protect\hyperlink{vestate-calculateptranenergyandemissions}{CalculatePtranEnergyAndEmission} & VETravelPerformance \\
\bottomrule()
\end{longtable}

Each of these modules use different input data. Generally speaking, the VE-State inputs are classified into the five following categories:

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  \textbf{User input model parameters}: These are input parameters (model or scenario specific), defined in \protect\hyperlink{model_parametersjson}{model\_parameters.json}, that users should review and modify as needed.
\item
  \textbf{Fixed input model parameters}: These are input parameters specific to the model, defined in \protect\hyperlink{model_parametersjson}{model\_parameters.json}, that users should not typically modify.
\item
  \textbf{User input files}: These are input files (model or scenario specific) that users should review and modify as needed.
\item
  \textbf{Fixed input files}: These are input parameters specific to the model that are fixed.
\item
  \textbf{Internal module inputs}: These are inputs created by other VE-RSPM modules.
\end{enumerate}

The following section decribes each module, its required inputs, and its generated outputs.

\hypertarget{vestate-createhouseholds}{%
\subsection{CreateHouseholds}\label{vestate-createhouseholds}}

This module creates simulated households using inputs of population by age group by simulation year.

\hypertarget{user-input-files-38}{%
\subsubsection{User Input Files}\label{user-input-files-38}}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\item
  Household population (\protect\hyperlink{vestate-azone_hh_pop_by_age.csv}{azone\_hh\_pop\_by\_age.csv})
\item
  Household size (\protect\hyperlink{vestate-azone_hhsize_targets.csv}{azone\_hhsize\_targets.csv})
\item
  Group quarter population (\protect\hyperlink{vestate-azone_gq_pop_by_age.csv}{azone\_gq\_pop\_by\_age.csv})
\end{enumerate}

\hypertarget{module-outputs-38}{%
\subsubsection{Module Outputs}\label{module-outputs-38}}

Households are created with the number of persons in each of six age categories (0-14, 15-19, 20-29, 30-54, 55-64, and 65+) and the total number of persons in the household. Two types of households are created: regular households (i.e.~not persons living in group quarters) and group quarters households .

\begin{itemize}
\tightlist
\item
  \textbf{HhId}: Unique household ID
\item
  \textbf{HhSize}: Number of persons
\item
  \textbf{Age0to14}: Persons in 0 to 14 year old age group
\item
  \textbf{Age15to19}: Persons in 15 to 19 year old age group
\item
  \textbf{Age20to29}: Persons in 20 to 29 year old age group
\item
  \textbf{Age30to54}: Persons in 30 to 54 year old age group
\item
  \textbf{Age55to64}: Persons in 55 to 64 year old age group
\item
  \textbf{Age65Plus}: Persons in 65 or older age group
\item
  \textbf{HhType}: Coded household age composition (e.g., \texttt{2-1-0-2-0-0}) or \texttt{Grp} for group quarters
\end{itemize}

For more information see \href{https://github.com/VisionEval/VisionEval/blob/master/sources/modules/VESimHouseholds/inst/module_docs/CreateHouseholds.md}{here}

\hypertarget{vestate-predictworkers}{%
\subsection{PredictWorkers}\label{vestate-predictworkers}}

This module assigns workers by age to households and to non-institutional group quarters population. It is a simple model which predicts workers as a function of the household type and age composition.

\hypertarget{user-input-files-39}{%
\subsubsection{User Input Files}\label{user-input-files-39}}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  Relative employment (\protect\hyperlink{vestate-azone_relative_employment.csv}{azone\_relative\_employment.csv})
\end{enumerate}

\hypertarget{internal-module-inputs-37}{%
\subsubsection{Internal Module Inputs}\label{internal-module-inputs-37}}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1724}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.3362}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1207}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.3707}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Package
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Module
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Outputs
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule()
\endhead
VESimHouseholds & \protect\hyperlink{vestate-createhouseholds}{CreateHouseholds} & \textbf{Age0to14} & Persons in 0 to 14 year old age group \\
VESimHouseholds & \protect\hyperlink{vestate-createhouseholds}{CreateHouseholds} & \textbf{Age15to19} & Persons in 15 to 19 year old age group \\
VESimHouseholds & \protect\hyperlink{vestate-createhouseholds}{CreateHouseholds} & \textbf{Age20to29} & Persons in 20 to 29 year old age group \\
VESimHouseholds & \protect\hyperlink{vestate-createhouseholds}{CreateHouseholds} & \textbf{Age30to54} & Persons in 30 to 54 year old age group \\
VESimHouseholds & \protect\hyperlink{vestate-createhouseholds}{CreateHouseholds} & \textbf{Age55to64} & Persons in 55 to 64 year old age group \\
VESimHouseholds & \protect\hyperlink{vestate-createhouseholds}{CreateHouseholds} & \textbf{Age65Plus} & Persons in 65 or older age group \\
VESimHouseholds & \protect\hyperlink{vestate-createhouseholds}{CreateHouseholds} & \textbf{HHType} & Coded household age composition \\
\bottomrule()
\end{longtable}

\hypertarget{module-outputs-39}{%
\subsubsection{Module Outputs}\label{module-outputs-39}}

\begin{itemize}
\tightlist
\item
  \textbf{Wkr15to19}: Workers in 15 to 19 year old age group
\item
  \textbf{Wkr20to29}: Workers in 20 to 29 year old age group
\item
  \textbf{Wkr30to54}: Workers in 30 to 54 year old age group
\item
  \textbf{Wkr55to64}: Workers in 55 to 64 year old age group
\item
  \textbf{Wkr65Plus}: Workers in 65 or older age group
\item
  \textbf{Workers}: Total workers
\item
  \textbf{NumWkr}: Number of workers residing in the zone
\end{itemize}

For more information see \href{https://github.com/VisionEval/VisionEval/blob/master/sources/modules/VESimHouseholds/inst/module_docs/PredictWorkers.md}{here}

\hypertarget{vestate-assignlifecycle}{%
\subsection{AssignLifeCycle}\label{vestate-assignlifecycle}}

This module assigns a life cycle category to each household. The life cycle categories are similar, but not the same as, those established for the National Household Travel Survey (NHTS). The age categories used in VisionEval models are broader than those used by the NHTS to identify children of different ages. This is a simple model with set of rules that assigns age group categories based on the age of persons and workers in the household.

\hypertarget{user-input-files-40}{%
\subsubsection{User Input Files}\label{user-input-files-40}}

This module has no user input requirements.

\hypertarget{internal-module-inputs-38}{%
\subsubsection{Internal Module Inputs}\label{internal-module-inputs-38}}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1724}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.3362}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1207}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.3707}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Package
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Module
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Outputs
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule()
\endhead
VESimHouseholds & \protect\hyperlink{vestate-createhouseholds}{CreateHouseholds} & \textbf{Age0to14} & Persons in 0 to 14 year old age group \\
VESimHouseholds & \protect\hyperlink{vestate-createhouseholds}{CreateHouseholds} & \textbf{Age15to19} & Persons in 15 to 19 year old age group \\
VESimHouseholds & \protect\hyperlink{vestate-createhouseholds}{CreateHouseholds} & \textbf{Age20to29} & Persons in 20 to 29 year old age group \\
VESimHouseholds & \protect\hyperlink{vestate-createhouseholds}{CreateHouseholds} & \textbf{Age30to54} & Persons in 30 to 54 year old age group \\
VESimHouseholds & \protect\hyperlink{vestate-createhouseholds}{CreateHouseholds} & \textbf{Age55to64} & Persons in 55 to 64 year old age group \\
VESimHouseholds & \protect\hyperlink{vestate-createhouseholds}{CreateHouseholds} & \textbf{Age65Plus} & Persons in 65 or older age group \\
VESimHouseholds & \protect\hyperlink{vestate-createhouseholds}{CreateHouseholds} & \textbf{HHType} & Coded household age composition \\
VESimHouseholds & \protect\hyperlink{vestate-predictworkers}{PredictWorkers} & \textbf{Wrk15to19} & Workers in 15 to 19 year old age group \\
VESimHouseholds & \protect\hyperlink{vestate-predictworkers}{PredictWorkers} & \textbf{Wrk20to29} & Workers in 20 to 29 year old age group \\
VESimHouseholds & \protect\hyperlink{vestate-predictworkers}{PredictWorkers} & \textbf{Wrk30to54} & Workers in 30 to 54 year old age group \\
VESimHouseholds & \protect\hyperlink{vestate-predictworkers}{PredictWorkers} & \textbf{Wrk55to64} & Workers in 55 to 64 year old age group \\
VESimHouseholds & \protect\hyperlink{vestate-predictworkers}{PredictWorkers} & \textbf{Wrk65Plus} & Workers in 65 or older age group \\
\bottomrule()
\end{longtable}

\hypertarget{module-outputs-40}{%
\subsubsection{Module Outputs}\label{module-outputs-40}}

\begin{itemize}
\tightlist
\item
  \textbf{LifeCycle}: Household life cycle as defined by 2009 NHTS \texttt{LIF\_CYC} variable
\end{itemize}

For more information see \href{https://github.com/VisionEval/VisionEval/blob/master/sources/modules/VESimHouseholds/inst/module_docs/AssignLifeCycle.md}{here}

\hypertarget{predictincome-1}{%
\subsection{PredictIncome}\label{predictincome-1}}

This module predicts the income for each simulated household given the number of workers in each age group and the average per capita income for the \texttt{Azone} where the household resides.

\hypertarget{user-input-files-41}{%
\subsubsection{User Input Files}\label{user-input-files-41}}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  Regional income (\protect\hyperlink{vestate-azone_per_cap_inc.csv}{azone\_per\_cap\_inc.csv})
\end{enumerate}

\hypertarget{internal-module-inputs-39}{%
\subsubsection{Internal Module Inputs}\label{internal-module-inputs-39}}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1724}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.3362}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1207}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.3707}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Package
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Module
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Outputs
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule()
\endhead
VESimHouseholds & \protect\hyperlink{vestate-createhouseholds}{CreateHouseholds} & \textbf{HHSize} & Number of persons in the household \\
VESimHouseholds & \protect\hyperlink{vestate-createhouseholds}{CreateHouseholds} & \textbf{Age65Plus} & Persons in 65 or older age group \\
VESimHouseholds & \protect\hyperlink{vestate-createhouseholds}{CreateHouseholds} & \textbf{HHType} & Coded household age composition \\
VESimHouseholds & \protect\hyperlink{vestate-predictworkers}{PredictWorkers} & \textbf{Wrk15to19} & Workers in 15 to 19 year old age group \\
VESimHouseholds & \protect\hyperlink{vestate-predictworkers}{PredictWorkers} & \textbf{Wrk20to29} & Workers in 20 to 29 year old age group \\
VESimHouseholds & \protect\hyperlink{vestate-predictworkers}{PredictWorkers} & \textbf{Wrk30to54} & Workers in 30 to 54 year old age group \\
VESimHouseholds & \protect\hyperlink{vestate-predictworkers}{PredictWorkers} & \textbf{Wrk55to64} & Workers in 55 to 64 year old age group \\
\bottomrule()
\end{longtable}

\hypertarget{module-outputs-41}{%
\subsubsection{Module Outputs}\label{module-outputs-41}}

\begin{itemize}
\tightlist
\item
  \textbf{Income}: Total annual household (non-group and group quarters) income
\end{itemize}

For more information see \href{https://github.com/VisionEval/VisionEval/blob/master/sources/modules/VESimHouseholds/inst/module_docs/PredictIncome.md}{here}

\hypertarget{vestate-initialize}{%
\subsection{Initialize}\label{vestate-initialize}}

Modules in the VESimLandUse package synthesize Bzones and their land use attributes as a function of Azone characteristics as well as data derived from the US Environmental Protection Agency's Smart Location Database (SLD) augmented with US Census housing and household income data, and data from the National Transit Database. Details on these data are included in the VESimLandUseData package. The combined dataset contains a number of land use attributes at the US Census block group level. The goal of Bzone synthesis to generate a set of SimBzones in each Azone that reasonably represent block group land use characteristics given the characteristics of the Azone, the Marea that the Azone is a part of, and scenario inputs provided by the user.

Many of the models and procedures used in Bzone synthesis pivot from profiles developed from these data sources for specific urbanized areas, as well as more general profiles for different urbanized area population size categories, towns, and rural areas. Using these specific and general profiles enables the simulated Bzones (SimBzones) to better represent the areas being modeled and the variety of conditions found in different states. Following is a listing of the urbanized areas for which profiles have been developed. Note that urbanized areas that cross state lines are split into the individual state components. This is done to facilitate the development of state models and to better reflect the characteristics of the urbanized area characteristics in each state.

It is incumbent on the model user to identify the name of the urbanized area profile that will be used for each of the Mareas in the model. This module reads in the names assigned in the ``marea\_uza\_profile\_names.csv'' file and checks their validity. If any are invalid, input processing will stop and error messages will be written to the log identifying the problem names. The following table identifies the names that may be used.

\hypertarget{user-input-files-42}{%
\subsubsection{User Input Files}\label{user-input-files-42}}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\item
  Metropolitan area names (\protect\hyperlink{vestate-marea_uza_profile_names.csv}{marea\_uza\_profile\_names.csv})
\item
  Household location type proportions (\protect\hyperlink{vestate-azone_hh_loc_type_prop.csv}{azone\_hh\_loc\_type\_prop.csv})
\item
  Work location type proportions (\protect\hyperlink{vestate-azone_wkr_loc_type_prop.csv}{azone\_wkr\_loc\_type\_prop.csv})
\item
  Land area by location type (\protect\hyperlink{vestate-azone_loc_type_land_area.csv}{azone\_loc\_type\_land\_area.csv})
\item
  Group quarter population by location type proportions (\protect\hyperlink{vestate-azone_gq_pop-prop_by_area-type.csv}{azone\_gq\_pop-prop\_by\_area-type.csv})
\end{enumerate}

\hypertarget{vestate-createsimbzones}{%
\subsection{CreateSimBzones}\label{vestate-createsimbzones}}

This module synthesizes Bzones and their land use attributes as a function of Azone characteristics as well as data derived from the US Environmental Protection Agency's Smart Location Database (SLD) augmented with US Census housing and household income data, and data from the National Transit Database. Details on these data are included in the \texttt{VESimLandUseData} package. The combined dataset contains a number of land use attributes at the US Census block group level. The goal of Bzone synthesis to generate a set of SimBzones in each Azone that reasonably represent block group land use characteristics given the characteristics of the Azone, the Marea that the Azone is a part of, and scenario inputs provided by the user.

Many of the models and procedures used in Bzone synthesis pivot from profiles developed from these data sources for specific urbanized areas, as well as more general profiles for different urbanized area population size categories, towns, and rural areas. Using these specific and general profiles enables the simulated Bzones (SimBzones) to better represent the areas being modeled and the variety of conditions found in different states. The documentation for the \texttt{Initialize} module has a listing of urbanized area profile names.

The models and procedures in this module create SimBzones within each Azone that simulate the land use characteristics of neighborhoods likely to be found in the Azone. The SimBzones are assigned quantities of households and jobs and are attributed with several land use measures in the process. The characteristics are:

\begin{itemize}
\tightlist
\item
  \textbf{Location Type}: Identification of whether the SimBzone is located in an urbanized area, a town (i.e.~an urban-type area that is not large enough to be urbanized), rural (i.e.~dispersed low-density development)
\item
  \textbf{Households}: Number of households in each SimBzone
\item
  \textbf{Employment}: Number of jobs in each SimBzone
\item
  \textbf{Activity Density}: Number of households and jobs per acre
\item
  \textbf{Land Use Diversity}: Measures of the degree of mixing of households and jobs
\item
  \textbf{Destination Accessibility}: Measures of proximity to households and jobs
\item
  \textbf{Area Type and Development Type}: Categories which describe the relative urban nature of the SimBzone (area type) and the character of development in the SimBzone (development type).
\item
  \textbf{Employment Split}: Number of retail, service, and other jobs in each SimBzone.
\end{itemize}

\hypertarget{user-input-files-43}{%
\subsubsection{User Input Files}\label{user-input-files-43}}

This module has no user input requirements.

\hypertarget{internal-module-inputs-40}{%
\subsubsection{Internal Module Inputs}\label{internal-module-inputs-40}}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1724}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.3362}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1207}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.3707}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Package
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Module
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Outputs
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule()
\endhead
VESimHouseholds & \protect\hyperlink{vestate-predictworkers}{PredictWorkers} & \textbf{NumWkr} & see \protect\hyperlink{vestate-predictworkers}{PredictWorkers} \\
VESimLandUse & \protect\hyperlink{vestate-initialize}{Initialize} & \textbf{PropMetroHh} & see \protect\hyperlink{vestate-initialize}{Initialize} \\
VESimLandUse & \protect\hyperlink{vestate-initialize}{Initialize} & \textbf{PropTownHh} & see \protect\hyperlink{vestate-initialize}{Initialize} \\
VESimLandUse & \protect\hyperlink{vestate-initialize}{Initialize} & \textbf{PropRuralHh} & see \protect\hyperlink{vestate-initialize}{Initialize} \\
VESimLandUse & \protect\hyperlink{vestate-initialize}{Initialize} & \textbf{PropWkrInMetroJobs} & see \protect\hyperlink{vestate-initialize}{Initialize} \\
VESimLandUse & \protect\hyperlink{vestate-initialize}{Initialize} & \textbf{PropWkrInTownJobs} & see \protect\hyperlink{vestate-initialize}{Initialize} \\
VESimLandUse & \protect\hyperlink{vestate-initialize}{Initialize} & \textbf{PropWkrInRuralJobs} & see \protect\hyperlink{vestate-initialize}{Initialize} \\
VESimLandUse & \protect\hyperlink{vestate-initialize}{Initialize} & \textbf{PropMetroJobs} & see \protect\hyperlink{vestate-initialize}{Initialize} \\
VESimLandUse & \protect\hyperlink{vestate-initialize}{Initialize} & \textbf{MetroLandArea} & see \protect\hyperlink{vestate-initialize}{Initialize} \\
VESimLandUse & \protect\hyperlink{vestate-initialize}{Initialize} & \textbf{TownLandArea} & see \protect\hyperlink{vestate-initialize}{Initialize} \\
VESimLandUse & \protect\hyperlink{vestate-initialize}{Initialize} & \textbf{RuralAveDensity} & see \protect\hyperlink{vestate-initialize}{Initialize} \\
\bottomrule()
\end{longtable}

\hypertarget{module-outputs-42}{%
\subsubsection{Module Outputs}\label{module-outputs-42}}

\begin{itemize}
\tightlist
\item
  \textbf{LocType}: Location type (Urban, Town, Rural) of the place where the household resides
\item
  \textbf{NumHh}: Number of households allocated to the SimBzone
\item
  \textbf{TotEmp}: Total number of jobs in zone
\item
  \textbf{RetEmp}: Number of jobs in retail sector in zone
\item
  \textbf{SvcEmp}: Number of jobs in service sector in zone
\item
  \textbf{OthEmp}: Number of jobs in other than the retail and service sectors in zone
\item
  \textbf{AreaType}: Area type (center, inner, outer, fringe) of the Bzone
\item
  \textbf{DevType}: Location type (Urban, Town, Rural) of the Bzone
\item
  \textbf{D1D}: Gross activity density (employment + households) on unprotected land in zone (Ref: EPA 2010 Smart Location Database)
\item
  \textbf{D5}: Destination accessibility of zone calculated as harmonic mean of jobs within 2 miles and population within 5 miles
\item
  \textbf{UrbanArea}: Area that is Urban and unprotected (i.e.~developable) within the zone
\item
  \textbf{TownArea}: Area that is Town and unprotected (i.e.~developable) within the zone
\item
  \textbf{RuralArea}: Area that is Rural and unprotected (i.e.~developable) within the zone
\item
  \textbf{SFDU}: Number of single family dwelling units (PUMS codes 01 - 03) in zone
\item
  \textbf{MFDU}: Number of multi-family dwelling units (PUMS codes 04 - 09) in zone
\end{itemize}

For more information see \href{https://github.com/VisionEval/VisionEval-Dev/blob/master/sources/modules/VESimLandUse/inst/module_docs/CreateSimBzones.md}{here}

\hypertarget{vestate-simulatehousing}{%
\subsection{SimulateHousing}\label{vestate-simulatehousing}}

This module assigns a housing type, either single-family (SF) or multifamily (MF) to regular households based on the respective supplies of SF and MF dwelling units in the housing market to which the household is assigned (i.e.~the Azone the household is assigned to) and on household characteristics. It then assigns each household to a SimBzone based on the household's housing type as well as the supply of housing by type and SimBzone. The module assigns non-institutional group quarters households to SimBzones randomly.

\hypertarget{user-input-files-44}{%
\subsubsection{User Input Files}\label{user-input-files-44}}

This module has no user input requirements.

\hypertarget{internal-module-inputs-41}{%
\subsubsection{Internal Module Inputs}\label{internal-module-inputs-41}}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1724}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.3362}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1207}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.3707}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Package
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Module
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Outputs
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule()
\endhead
VESimHouseholds & \protect\hyperlink{vestate-createhouseholds}{CreateHouseholds} & \textbf{HhId} & Household id \\
VESimHouseholds & \protect\hyperlink{vestate-predictworkers}{PredictWorkers} & \textbf{Workers} & Total workers in the household \\
VESimLandUse & \protect\hyperlink{vestate-initialize}{Initialize} & \textbf{PropGQPopCenter} & see \protect\hyperlink{vestate-initialize}{Initialize} \\
VESimLandUse & \protect\hyperlink{vestate-initialize}{Initialize} & \textbf{PropGQPopInner} & see \protect\hyperlink{vestate-initialize}{Initialize} \\
VESimLandUse & \protect\hyperlink{vestate-initialize}{Initialize} & \textbf{PropGQPopOuter} & see \protect\hyperlink{vestate-initialize}{Initialize} \\
VESimLandUse & \protect\hyperlink{vestate-initialize}{Initialize} & \textbf{PropGQPopFringe} & see \protect\hyperlink{vestate-initialize}{Initialize} \\
VESimLandUse & \protect\hyperlink{vestate-createsimbzones}{CreateSimBzones} & \textbf{SFDU} & see \protect\hyperlink{vestate-createsimbzones}{CreateSimBzones} \\
VESimLandUse & \protect\hyperlink{vestate-createsimbzones}{CreateSimBzones} & \textbf{MFDU} & see \protect\hyperlink{vestate-createsimbzones}{CreateSimBzones} \\
VESimLandUse & \protect\hyperlink{vestate-createsimbzones}{CreateSimBzones} & \textbf{LocType} & see \protect\hyperlink{vestate-createsimbzones}{CreateSimBzones} \\
VESimLandUse & \protect\hyperlink{vestate-createsimbzones}{CreateSimBzones} & \textbf{AreaType} & see \protect\hyperlink{vestate-createsimbzones}{CreateSimBzones} \\
VESimHouseholds & \protect\hyperlink{vestate-createhouseholds}{CreateHouseholds} & \textbf{HhSize} & Total workers in the household \\
VESimHouseholds & \protect\hyperlink{vestate-createhouseholds}{CreateHouseholds} & \textbf{Age15to19} & Number of workers residing in the zone \\
VESimHouseholds & \protect\hyperlink{vestate-createhouseholds}{CreateHouseholds} & \textbf{Age20to29} & Household id \\
VESimHouseholds & \protect\hyperlink{vestate-createhouseholds}{CreateHouseholds} & \textbf{Age30to54} & Total workers in the household \\
VESimHouseholds & \protect\hyperlink{vestate-createhouseholds}{CreateHouseholds} & \textbf{Age55to64} & Number of workers residing in the zone \\
VESimHouseholds & \protect\hyperlink{vestate-createhouseholds}{CreateHouseholds} & \textbf{Age65Plus} & Total workers in the household \\
VESimHouseholds & \protect\hyperlink{vestate-createhouseholds}{CreateHouseholds} & \textbf{HhType} & Number of workers residing in the zone \\
\bottomrule()
\end{longtable}

\hypertarget{module-outputs-43}{%
\subsubsection{Module Outputs}\label{module-outputs-43}}

\begin{itemize}
\tightlist
\item
  \textbf{HouseType}: Type of dwelling unit in which the household resides (SF = single family, MF = multi-family, GQ = group quarters
\item
  \textbf{LocType}: Location type (Urban, Town, Rural) of the place where the household resides
\item
  \textbf{Pop}: Total population residing in Bzone
\item
  \textbf{UrbanPop}: Urbanized area population in the Marea
\item
  \textbf{TownPop}: Town (i.e.~urban but non-urbanized area) in the Marea
\item
  \textbf{RuralPop}: Rural (i.e.~not urbanized and not town) population in the Marea
\item
  \textbf{NumWkr}: Number of jobs in retail sector in zone
\item
  \textbf{UrbanIncome}: Total household income of the urbanized area population in the Marea
\item
  \textbf{TownIncome}: Total household income of the town (i.e.~urban but non-urbanized area) population in the Marea
\item
  \textbf{RuralIncome}: Total household income of the rural (i.e.~not urbanized and not town) population in the Marea
\end{itemize}

For more information see \href{https://github.com/VisionEval/VisionEval-Dev/blob/master/sources/modules/VESimLandUse/inst/module_docs/SimulateHousing.md}{here}

\hypertarget{vestate-simulateemployment}{%
\subsection{SimulateEmployment}\label{vestate-simulateemployment}}

This module assign workers SimBzone work locations. A worker table is created which identifies a unique worker ID, the household ID the worker is a part of, and the SimBzone, Azone, and Marea of the worker job location.

\hypertarget{user-input-files-45}{%
\subsubsection{User Input Files}\label{user-input-files-45}}

This module has no user input requirements.

\hypertarget{internal-module-inputs-42}{%
\subsubsection{Internal Module Inputs}\label{internal-module-inputs-42}}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1724}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.3362}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1207}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.3707}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Package
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Module
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Outputs
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule()
\endhead
VESimHouseholds & \protect\hyperlink{vestate-createhouseholds}{CreateHouseholds} & \textbf{HhId} & Household id \\
VESimHouseholds & \protect\hyperlink{vestate-predictworkers}{PredictWorkers} & \textbf{Workers} & Total workers in the household \\
VESimLandUse & \protect\hyperlink{vestate-createsimbzones}{CreateSimBzones} & \textbf{TotEmp} & see \protect\hyperlink{vestate-createsimbzones}{CreateSimBzones} \\
VESimLandUse & \protect\hyperlink{vestate-createsimbzones}{CreateSimBzones} & \textbf{LocType} & see \protect\hyperlink{vestate-createsimbzones}{CreateSimBzones} \\
\bottomrule()
\end{longtable}

\hypertarget{module-outputs-44}{%
\subsubsection{Module Outputs}\label{module-outputs-44}}

\begin{itemize}
\tightlist
\item
  \textbf{WkrId}: Unique worker ID
\item
  \textbf{Bzone}: Bzone ID of worker job location
\item
  \textbf{Azone}: Azone ID of worker job location
\item
  \textbf{Marea}: Marea ID of worker job location
\end{itemize}

For more information see \href{https://github.com/VisionEval/VisionEval/blob/master/sources/modules/VESimLandUse/inst/module_docs/SimulateEmployment.md}{here}

\hypertarget{vestate-4dmeasures}{%
\subsection{Simulate4DMeasures}\label{vestate-4dmeasures}}

This module calculates several 4D measures by SimBzone including density, diversity (i.e.~mixing of land uses), and pedestrian-orientedn transportation network design. These measures are the same as or are similar to measures included in the Environmental Protection Agency's (EPA)

\hypertarget{user-input-files-46}{%
\subsubsection{User Input Files}\label{user-input-files-46}}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  D3bpo4 value or different location types (\protect\hyperlink{vestate-marea_d3bpo4_adj.csv}{marea\_d3bpo4\_adj.csv})
\end{enumerate}

\hypertarget{internal-module-inputs-43}{%
\subsubsection{Internal Module Inputs}\label{internal-module-inputs-43}}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1724}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.3362}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1207}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.3707}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Package
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Module
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Outputs
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule()
\endhead
VESimLandUse & \protect\hyperlink{vestate-createsimbzones}{CreateSimBzones} & \textbf{TotEmp} & see \protect\hyperlink{vestate-createsimbzones}{CreateSimBzones} \\
VESimLandUse & \protect\hyperlink{vestate-createsimbzones}{CreateSimBzones} & \textbf{RetEmp} & see \protect\hyperlink{vestate-createsimbzones}{CreateSimBzones} \\
VESimLandUse & \protect\hyperlink{vestate-createsimbzones}{CreateSimBzones} & \textbf{SvcEmp} & see \protect\hyperlink{vestate-createsimbzones}{CreateSimBzones} \\
VESimLandUse & \protect\hyperlink{vestate-simulatehousing}{SimulateHousing} & \textbf{Pop} & see \protect\hyperlink{vestate-simulatehousing}{SimulateHousing} \\
VESimLandUse & \protect\hyperlink{vestate-createsimbzones}{CreateSimBzones} & \textbf{NumHh} & see \protect\hyperlink{vestate-createsimbzones}{CreateSimBzones} \\
VESimLandUse & \protect\hyperlink{vestate-simulatehousing}{SimulateHousing} & \textbf{NumWkr} & see \protect\hyperlink{vestate-simulatehousing}{SimulateHousing} \\
VESimLandUse & \protect\hyperlink{vestate-createsimbzones}{CreateSimBzones} & \textbf{UrbanArea} & see \protect\hyperlink{vestate-createsimbzones}{CreateSimBzones} \\
VESimLandUse & \protect\hyperlink{vestate-createsimbzones}{CreateSimBzones} & \textbf{TownArea} & see \protect\hyperlink{vestate-createsimbzones}{CreateSimBzones} \\
VESimLandUse & \protect\hyperlink{vestate-createsimbzones}{CreateSimBzones} & \textbf{RuralArea} & see \protect\hyperlink{vestate-createsimbzones}{CreateSimBzones} \\
VESimLandUse & \protect\hyperlink{vestate-createsimbzones}{CreateSimBzones} & \textbf{AreaType} & see \protect\hyperlink{vestate-createsimbzones}{CreateSimBzones} \\
VESimLandUse & \protect\hyperlink{vestate-createsimbzones}{CreateSimBzones} & \textbf{DevType} & see \protect\hyperlink{vestate-createsimbzones}{CreateSimBzones} \\
VESimLandUse & \protect\hyperlink{vestate-createsimbzones}{CreateSimBzones} & \textbf{LocType} & see \protect\hyperlink{vestate-createsimbzones}{CreateSimBzones} \\
\bottomrule()
\end{longtable}

\hypertarget{module-outputs-45}{%
\subsubsection{Module Outputs}\label{module-outputs-45}}

\begin{itemize}
\tightlist
\item
  \textbf{D1B}: Gross population density (people/acre) on unprotected
\item
  \textbf{D1C}: Gross employment density (jobs/acre) on unprotected land
\item
  \textbf{D2A\_JPHH}: Ratio of jobs to households in zone
\item
  \textbf{D2A\_WRKEMP}: Ratio of workers to jobs in zone
\item
  \textbf{D2A\_EPHHM}: Employment and household entropy measure for zone considering numbers of households, retail jobs, service jobs, and other jobs\\
\item
  \textbf{D3bpo4}: Intersection density in terms of pedestrian-oriented intersections having four or more legs per square mile
\end{itemize}

For more information see \href{https://github.com/VisionEval/VisionEval/blob/master/sources/modules/VESimLandUse/inst/module_docs/Simulate4DMeasures.md}{here}

\hypertarget{vestate-simulateurbanmixmeasure}{%
\subsection{SimulateUrbanMixMeasure}\label{vestate-simulateurbanmixmeasure}}

This module simulates an urban mixed-use measure based on the 2001 National Household Travel Survey measure of the tract level urban/rural indicator

\hypertarget{user-input-files-47}{%
\subsubsection{User Input Files}\label{user-input-files-47}}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  Target for proportion of households in mixed-use neighborhoods (\protect\hyperlink{vestate-marea_mix_targets.csv}{marea\_mix\_targets.csv})
\end{enumerate}

\hypertarget{internal-module-inputs-44}{%
\subsubsection{Internal Module Inputs}\label{internal-module-inputs-44}}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1724}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.3362}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1207}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.3707}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Package
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Module
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Outputs
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule()
\endhead
VESimLandUse & \protect\hyperlink{vestate-simulatehousing}{SimulateHousing} & \textbf{Pop} & see \protect\hyperlink{vestate-simulatehousing}{SimulateHousing} \\
VESimLandUse & \protect\hyperlink{vestate-simulatehousing}{SimulateHousing} & \textbf{UrbanPop} & see \protect\hyperlink{vestate-simulatehousing}{SimulateHousing} \\
VESimLandUse & \protect\hyperlink{vestate-simulatehousing}{SimulateHousing} & \textbf{TownPop} & see \protect\hyperlink{vestate-simulatehousing}{SimulateHousing} \\
VESimLandUse & \protect\hyperlink{vestate-simulatehousing}{SimulateHousing} & \textbf{RuralPop} & see \protect\hyperlink{vestate-simulatehousing}{SimulateHousing} \\
VESimLandUse & \protect\hyperlink{vestate-createsimbzones}{CreateSimBzones} & \textbf{NumHh} & see \protect\hyperlink{vestate-createsimbzones}{CreateSimBzones} \\
VESimLandUse & \protect\hyperlink{vestate-createsimbzones}{CreateSimBzones} & \textbf{UrbanArea} & see \protect\hyperlink{vestate-createsimbzones}{CreateSimBzones} \\
VESimLandUse & \protect\hyperlink{vestate-createsimbzones}{CreateSimBzones} & \textbf{TownArea} & see \protect\hyperlink{vestate-createsimbzones}{CreateSimBzones} \\
VESimLandUse & \protect\hyperlink{vestate-createsimbzones}{CreateSimBzones} & \textbf{RuralArea} & see \protect\hyperlink{vestate-createsimbzones}{CreateSimBzones} \\
VESimLandUse & \protect\hyperlink{vestate-createsimbzones}{CreateSimBzones} & \textbf{SFDU} & see \protect\hyperlink{vestate-createsimbzones}{CreateSimBzones} \\
VESimLandUse & \protect\hyperlink{vestate-createsimbzones}{CreateSimBzones} & \textbf{MFDU} & see \protect\hyperlink{vestate-createsimbzones}{CreateSimBzones} \\
\bottomrule()
\end{longtable}

\hypertarget{module-outputs-46}{%
\subsubsection{Module Outputs}\label{module-outputs-46}}

\begin{itemize}
\tightlist
\item
  \textbf{IsUrbanMixNbrhd}: Flag identifying whether household is (1) or is not (0) in urban mixed-use neighborhood
\end{itemize}

For more information see \href{https://github.com/VisionEval/VisionEval/blob/master/sources/modules/VESimLandUse/inst/module_docs/SimulateUrbanMixMeasure.md}{here}

\hypertarget{vestate-assignparkingrestrictions}{%
\subsection{AssignParkingRestrictions}\label{vestate-assignparkingrestrictions}}

This module identifies parking restrictions and prices affecting households at their residences, workplaces, and other places they are likely to visit in the urban area. The module takes user inputs on parking restrictions and prices by Bzone and calculates for each household the number of free parking spaces available at the household's residence, which workers pay for parking and whether their payment is part of a cash-out-buy-back program, the cost of residential parking for household vehicles that can't be parked in a free space, the cost for workplace parking, and the cost of parking for other activities such as shopping. The parking restriction/cost information is used by other modules in calculating the cost of vehicle ownership and the cost of vehicle use.

\hypertarget{user-input-files-48}{%
\subsubsection{User Input Files}\label{user-input-files-48}}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\item
  Parking availability (\protect\hyperlink{vestate-marea_parking-avail_by_area-type.csv}{marea\_parking-avail\_by\_area-type.csv})
\item
  Parking cost (\protect\hyperlink{vestate-marea_parking-avail_by_area-type.csv}{marea\_parking-cost\_by\_area-type.csv})
\end{enumerate}

\hypertarget{internal-module-inputs-45}{%
\subsubsection{Internal Module Inputs}\label{internal-module-inputs-45}}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1724}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.3362}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1207}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.3707}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Package
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Module
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Outputs
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule()
\endhead
VESimLandUse & \protect\hyperlink{vestate-createsimbzones}{CreateSimBzones} & \textbf{RetEmp} & see \protect\hyperlink{vestate-createsimbzones}{CreateSimBzones} \\
VESimLandUse & \protect\hyperlink{vestate-createsimbzones}{CreateSimBzones} & \textbf{SvcEmp} & see \protect\hyperlink{vestate-createsimbzones}{CreateSimBzones} \\
VESimLandUse & \protect\hyperlink{vestate-createsimbzones}{CreateSimBzones} & \textbf{NumHh} & see \protect\hyperlink{vestate-createsimbzones}{CreateSimBzones} \\
VESimLandUse & \protect\hyperlink{vestate-createsimbzones}{CreateSimBzones} & \textbf{UrbanArea} & see \protect\hyperlink{vestate-createsimbzones}{CreateSimBzones} \\
VESimLandUse & \protect\hyperlink{vestate-createsimbzones}{CreateSimBzones} & \textbf{AreaType} & see \protect\hyperlink{vestate-createsimbzones}{CreateSimBzones} \\
VESimLandUse & \protect\hyperlink{vestate-createsimbzones}{CreateSimBzones} & \textbf{LocType} & see \protect\hyperlink{vestate-createsimbzones}{CreateSimBzones} \\
VESimLandUse & \protect\hyperlink{vestate-simulatehousing}{SimulateHousing} & \textbf{HouseType} & see \protect\hyperlink{vestate-simulatehousing}{SimulateHousing} \\
\bottomrule()
\end{longtable}

\hypertarget{module-outputs-47}{%
\subsubsection{Module Outputs}\label{module-outputs-47}}

\begin{itemize}
\tightlist
\item
  \textbf{FreeParkingSpaces}: Number of free parking spaces available to the household
\item
  \textbf{ParkingUnitCost}: Daily cost for long-term parking (e.g.~paid on monthly basis)
\item
  \textbf{OtherParkingCost}: Daily cost for parking at shopping locations or other locations of paid parking not including work (not adjusted for number of vehicle trips)
\item
  \textbf{PaysForParking}: Does worker pay for parking: 1 = yes, 0 = no
\item
  \textbf{IsCashOut}: Is worker paid parking in cash-out-buy-back program: 1 = yes, 0 = no
\item
  \textbf{ParkingCost}: Daily cost for long-term parking (e.g.~paid on monthly basis)
\end{itemize}

For more information see \href{https://github.com/VisionEval/VisionEval/blob/master/sources/modules/VESimLandUse/inst/module_docs/AssignParkingRestrictions.md}{here}

\hypertarget{vestate-assigndemandmanagement}{%
\subsection{AssignDemandManagement}\label{vestate-assigndemandmanagement}}

This module assigns demand management program participation to households and to workers. Households are assigned to individualized marketing program participation. Workers are assigned to employee commute options participation. The module computes the net proportional reduction in household DVMT based on the participation in travel demand management programs.

\hypertarget{user-input-files-49}{%
\subsubsection{User Input Files}\label{user-input-files-49}}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  Travel demand management (\protect\hyperlink{vestate-marea_travel-demand-mgt_by_area-type.csv}{marea\_travel-demand-mgt\_by\_area-type.csv})
\end{enumerate}

\hypertarget{internal-module-inputs-46}{%
\subsubsection{Internal Module Inputs}\label{internal-module-inputs-46}}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1724}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.3362}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1207}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.3707}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Package
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Module
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Outputs
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule()
\endhead
VESimHouseholds & \protect\hyperlink{vestate-createhouseholds}{CreateHouseholds} & \textbf{HhSize} & see \protect\hyperlink{vestate-createhouseholds}{CreateHouseholds} \\
VESimHouseholds & \protect\hyperlink{vestate-predictworkers}{PredictWorkers} & \textbf{workers} & see \protect\hyperlink{vestate-predictworkers}{PredictWorkers} \\
\bottomrule()
\end{longtable}

\hypertarget{module-outputs-48}{%
\subsubsection{Module Outputs}\label{module-outputs-48}}

\begin{itemize}
\tightlist
\item
  \textbf{IsIMP}: dentifies whether household is participant in travel demand management individualized marketing program (IMP): 1 = yes, 0 = n
\item
  \textbf{PropTdmDvmtReduction}: Proportional reduction in household DVMT due to participation in travel demand management programs
\item
  \textbf{IsECO}: Identifies whether worker is a participant in travel demand management employee commute options program: 1 = yes, 0 = no
\end{itemize}

For more information see \href{https://github.com/VisionEval/VisionEval/blob/master/sources/modules/VESimLandUse/inst/module_docs/AssignDemandManagement.md}{here}

\hypertarget{vestate-assigncarsvcavailability}{%
\subsection{AssignCarSvcAvailability}\label{vestate-assigncarsvcavailability}}

This module assigns car service availability levels (Low, High) to Bzones and households. Car services include taxis, car sharing services (e.g.~Car-To-Go, Zipcar), and future automated taxi services

\hypertarget{user-input-files-50}{%
\subsubsection{User Input Files}\label{user-input-files-50}}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  Car service availability (\protect\hyperlink{vestate-marea_carsvc_availability}{marea\_carsvc\_availability})
\end{enumerate}

\hypertarget{internal-module-inputs-47}{%
\subsubsection{Internal Module Inputs}\label{internal-module-inputs-47}}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1724}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.3362}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1207}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.3707}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Package
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Module
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Outputs
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule()
\endhead
VESimLandUse & \protect\hyperlink{vestate-createsimbzones}{CreateSimBzones} & \textbf{NumHh} & see \protect\hyperlink{vestate-createsimbzones}{CreateSimBzones} \\
VESimLandUse & \protect\hyperlink{vestate-createsimbzones}{CreateSimBzones} & \textbf{AreaType} & see \protect\hyperlink{vestate-createsimbzones}{CreateSimBzones} \\
VESimLandUse & \protect\hyperlink{vestate-createsimbzones}{CreateSimBzones} & \textbf{TotEmp} & see \protect\hyperlink{vestate-createsimbzones}{CreateSimBzones} \\
VESimLandUse & \protect\hyperlink{calculate4dmeasures}{Calculate4DMeasures} & \textbf{D1D} & see \protect\hyperlink{calculate4dmeasures}{Calculate4DMeasures} \\
\bottomrule()
\end{longtable}

\hypertarget{module-outputs-49}{%
\subsubsection{Module Outputs}\label{module-outputs-49}}

\begin{itemize}
\tightlist
\item
  \textbf{IsIMP}: dentifies whether household is participant in travel demand management individualized marketing program (IMP): 1 = yes, 0 = n
\item
  \textbf{PropTdmDvmtReduction}: Proportional reduction in household DVMT due to participation in travel demand management programs
\item
  \textbf{IsECO}: Identifies whether worker is a participant in travel demand management employee commute options program: 1 = yes, 0 = no
\end{itemize}

For more information see \href{https://github.com/VisionEval/VisionEval/blob/master/sources/modules/VESimLandUse/inst/module_docs/AssignDemandManagement.md}{here}

\hypertarget{vestate-simulatetransitservice}{%
\subsection{SimulateTransitService}\label{vestate-simulatetransitservice}}

This module assigns transit service level to the urbanized portion of each Marea and to neighborhoods (SimBzones) within the urbanized area. Annual revenue-miles (i.e.~transit miles in revenue service) by transit mode type are read from an input file

\hypertarget{user-input-files-51}{%
\subsubsection{User Input Files}\label{user-input-files-51}}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  Transit service for Marea (\protect\hyperlink{vestate-marea_transit_service.csv}{marea\_transit\_service.csv})
\end{enumerate}

\hypertarget{internal-module-inputs-48}{%
\subsubsection{Internal Module Inputs}\label{internal-module-inputs-48}}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1724}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.3362}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1207}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.3707}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Package
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Module
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Outputs
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule()
\endhead
VESimLandUse & \protect\hyperlink{vestate-createsimbzones}{CreateSimBzones} & \textbf{NumHh} & see \protect\hyperlink{vestate-createsimbzones}{CreateSimBzones} \\
VESimLandUse & \protect\hyperlink{vestate-createsimbzones}{CreateSimBzones} & \textbf{AreaType} & see \protect\hyperlink{vestate-createsimbzones}{CreateSimBzones} \\
VESimLandUse & \protect\hyperlink{vestate-createsimbzones}{CreateSimBzones} & \textbf{TotEmp} & see \protect\hyperlink{vestate-createsimbzones}{CreateSimBzones} \\
VESimLandUse & \protect\hyperlink{vestate-createsimbzones}{CreateSimBzones} & \textbf{UrbanArea} & see \protect\hyperlink{vestate-createsimbzones}{CreateSimBzones} \\
VESimLandUse & \protect\hyperlink{vestate-createsimbzones}{CreateSimBzones} & \textbf{DevType} & see \protect\hyperlink{vestate-createsimbzones}{CreateSimBzones} \\
VESimLandUse & \protect\hyperlink{vestate-simulatehousing}{SimulateHousing} & \textbf{UrbanPop} & see \protect\hyperlink{vestate-simulatehousing}{SimulateHousing} \\
\bottomrule()
\end{longtable}

\hypertarget{module-outputs-50}{%
\subsubsection{Module Outputs}\label{module-outputs-50}}

\begin{itemize}
\tightlist
\item
  \textbf{TranRevMiPC}: Ratio of annual bus-equivalent revenue-miles (i.e.~revenue-miles at the same productivity - passenger miles per revenue mile - as standard bus) to urbanized area population
\item
  \textbf{VanDvmt}: Total daily miles traveled by vans of various sizes to provide demand responsive, vanpool, and similar services.
\item
  \textbf{BusDvmt}: Total daily miles traveled by buses of various sizes to provide bus service of various types.
\item
  \textbf{RailDvmt}: Total daily miles traveled by light rail, heavy rail, commuter rail, and similar types of vehicles.
\item
  \textbf{D4c}: Aggregate frequency of transit service within 0.25 miles of block group boundary per hour during evening peak period (Ref: EPA 2010 Smart Location Database)
\end{itemize}

For more information see \href{https://github.com/VisionEval/VisionEval/blob/master/sources/modules/VESimTransportSupply/inst/module_docs/SimulateTransitService.md}{here}

\hypertarget{vestate-simulateroadmiles}{%
\subsection{SimulateRoadMiles}\label{vestate-simulateroadmiles}}

This module assigns freeway and arterial lane-miles to metropolitan areas (Marea) and calculates freeway lane-miles per capita.

\hypertarget{user-input-files-52}{%
\subsubsection{User Input Files}\label{user-input-files-52}}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  Lane-miles for metropolitan areas (\protect\hyperlink{vestate-marea_lane_miles.csv}{marea\_lane\_miles.csv})
\end{enumerate}

\hypertarget{internal-module-inputs-49}{%
\subsubsection{Internal Module Inputs}\label{internal-module-inputs-49}}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1724}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.3362}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1207}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.3707}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Package
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Module
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Outputs
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule()
\endhead
VESimLandUse & \protect\hyperlink{vestate-simulatehousing}{SimulateHousing} & \textbf{UrbanPop} & see \protect\hyperlink{vestate-simulatehousing}{SimulateHousing} \\
\bottomrule()
\end{longtable}

\hypertarget{module-outputs-51}{%
\subsubsection{Module Outputs}\label{module-outputs-51}}

\begin{itemize}
\tightlist
\item
  \textbf{FwyLaneMiPC}: Ratio of urbanized area freeway and expressway lane-miles to urbanized area population
\end{itemize}

For more information see \href{https://github.com/VisionEval/VisionEval/blob/master/sources/modules/VESimTransportSupply/inst/module_docs/SimulateRoadMiles.md}{here}

\hypertarget{vestate-assigndrivers}{%
\subsection{AssignDrivers}\label{vestate-assigndrivers}}

This module assigns drivers by age group to each household as a function of the numbers of persons and workers by age group, the household income, land use characteristics, and public transit availability.

\hypertarget{user-input-files-53}{%
\subsubsection{User Input Files}\label{user-input-files-53}}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  Adjustment proportion for household drivers by age group for the region
  (\protect\hyperlink{vesate-region_hh_driver_adjust_prop.csv}{region\_hh\_driver\_adjust\_prop.csv})
\end{enumerate}

\hypertarget{internal-module-inputs-50}{%
\subsubsection{Internal Module Inputs}\label{internal-module-inputs-50}}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1724}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.3362}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1207}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.3707}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Package
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Module
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Outputs
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule()
\endhead
VETransportSupply & \protect\hyperlink{assigntransitservice}{AssignTransitService} & \textbf{TranRevMiPC} & Ratio of annual bus-equivalent revenue-miles (i.e.~revenue-miles at the same productivity - passenger miles per revenue mile - as standard bus) to urbanized area population \\
VELandUse & \protect\hyperlink{calculate4dmeasures}{Calculate4DMeasures} & \textbf{D1B} & Gross population density (people/acre) on unprotected (i.e.~developable) land in zone \\
VESimHouseholds & \protect\hyperlink{vestate-createhouseholds}{CreateHouseholds} & \textbf{HhId} & Household id \\
VESimHouseholds & \protect\hyperlink{vestate-createhouseholds}{CreateHouseholds} & \textbf{Age15to19} & Persons in 15 to 19 year old age group \\
VESimHouseholds & \protect\hyperlink{vestate-createhouseholds}{CreateHouseholds} & \textbf{Age20to29} & Persons in 20 to 29 year old age group \\
VESimHouseholds & \protect\hyperlink{vestate-createhouseholds}{CreateHouseholds} & \textbf{Age30to54} & Persons in 30 to 54 year old age group \\
VESimHouseholds & \protect\hyperlink{vestate-createhouseholds}{CreateHouseholds} & \textbf{Age55to64} & Persons in 55 to 64 year old age group \\
VESimHouseholds & \protect\hyperlink{vestate-createhouseholds}{CreateHouseholds} & \textbf{Age65Plus} & Persons in 65 or older age group \\
VESimHouseholds & \protect\hyperlink{predictincome}{PredictIncome} & \textbf{Income} & Total annual income of household \\
VESimHouseholds & \protect\hyperlink{vestate-createhouseholds}{CreateHouseholds} & \textbf{HHSize} & Number of persons in the household \\
VELandUse & \protect\hyperlink{calculateurbanmixmeasure}{CalculateUrbanMixMeasure} & \textbf{IsUrbanMixNbrhd} & Flag identifying whether household is (\texttt{1}) or is not (\texttt{0}) in urban mixed-use neighborhood \\
VELandUse & \protect\hyperlink{assignloctypes}{AssignLocTypes} & \textbf{LocType} & Location type (Urban, Town, Rural) of the place where the household resides \\
\bottomrule()
\end{longtable}

\hypertarget{module-outputs-52}{%
\subsubsection{Module Outputs}\label{module-outputs-52}}

\begin{itemize}
\tightlist
\item
  \textbf{Drv15to19}: Number of drivers 15 to 19 years old
\item
  \textbf{Drv20to29}: Number of drivers 20 to 29 years old
\item
  \textbf{Drv30to54}: Number of drivers 30 to 54 years old
\item
  \textbf{Drv55to64}: Number of drivers 55 to 64 years old
\item
  \textbf{Drv65Plus}: Number of drivers 65 or older
\item
  \textbf{Drivers}: Number of drivers in household
\item
  \textbf{DrvAgePersons}: Number of people 15 year old or older in the household
\end{itemize}

For more information see \href{https://github.com/VisionEval/VisionEval/blob/master/sources/modules/VEHouseholdVehicles/inst/module_docs/AssignDrivers.md}{here}

\hypertarget{vestate-assignvehicleownership}{%
\subsection{AssignVehicleOwnership}\label{vestate-assignvehicleownership}}

This module determines the number of vehicles owned or leased by each household as a function of household characteristics, land use characteristics, and transportation system characteristics.

\hypertarget{user-input-files-54}{%
\subsubsection{User Input Files}\label{user-input-files-54}}

This module has no user input requirements.

\hypertarget{internal-module-inputs-51}{%
\subsubsection{Internal Module Inputs}\label{internal-module-inputs-51}}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1724}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.3362}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1207}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.3707}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Package
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Module
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Outputs
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule()
\endhead
VETransportSupply & \protect\hyperlink{assigntransitservice}{AssignTransitService} & \textbf{TranRevMiPC} & Ratio of annual bus-equivalent revenue-miles to urbanized area population \\
VELandUse & \protect\hyperlink{calculate4dmeasures}{Calculate4DMeasures} & \textbf{D1B} & Gross population density (people/acre) on unprotected (i.e.~developable) land in zone \\
VESimHouseholds & \protect\hyperlink{vestate-predictworkers}{PredictWorkers} & \textbf{Workers} & Total workers in the household \\
VEHouseholdVehicles & \protect\hyperlink{vestate-assigndrivers}{AssignDrivers} & \textbf{Drivers} & Number of drivers in household \\
VESimHouseholds & \protect\hyperlink{vestate-createhouseholds}{CreateHouseholds} & \textbf{Age65Plus} & Persons in 65 or older age group \\
VELandUse & \protect\hyperlink{predicthousing}{PredictHousing} & \textbf{HouseType} & Type of dwelling unit of the household \\
VESimHouseholds & \protect\hyperlink{predictincome}{PredictIncome} & \textbf{Income} & Total annual income of household \\
VESimHouseholds & \protect\hyperlink{vestate-createhouseholds}{CreateHouseholds} & \textbf{HHSize} & Number of persons in the household \\
VELandUse & \protect\hyperlink{calculateurbanmixmeasure}{CalculateUrbanMixMeasure} & \textbf{IsUrbanMixNbrhd} & Flag identifying whether household is (\texttt{1}) or is not (\texttt{0}) in urban mixed-use neighborhood \\
VELandUse & \protect\hyperlink{assignloctypes}{AssignLocTypes} & \textbf{LocType} & Location type (Urban, Town, Rural) of the place where the household resides \\
\bottomrule()
\end{longtable}

\hypertarget{module-outputs-53}{%
\subsubsection{Module Outputs}\label{module-outputs-53}}

\begin{itemize}
\tightlist
\item
  \textbf{Vehicles}: Number of automobiles and light trucks owned or leased by the household including high level car service vehicles available to driving-age persons
\end{itemize}

For more information see \href{https://github.com/visioneval/VisionEval/blob/master/sources/modules/VEHouseholdVehicles/inst/module_docs/AssignVehicleOwnership.md}{here}

\hypertarget{vestate-assignvehicletype}{%
\subsection{AssignVehicleType}\label{vestate-assignvehicletype}}

This module identifies how many household vehicles are light trucks and how many are automobiles. Light trucks include pickup trucks, sport utility vehicles, vans, and any other vehicle not classified as a passenger car. Automobiles are vehicles classified as passenger cars.

\hypertarget{user-input-files-55}{%
\subsubsection{User Input Files}\label{user-input-files-55}}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  Light truck proportion for household vehicles by Azone (\protect\hyperlink{vestate-azone_lttrk_prop.csv}{azone\_lttrk\_prop.csv})
\end{enumerate}

\hypertarget{internal-module-inputs-52}{%
\subsubsection{Internal Module Inputs}\label{internal-module-inputs-52}}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1724}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.3362}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1207}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.3707}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Package
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Module
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Outputs
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule()
\endhead
VELandUse & \protect\hyperlink{calculate4dmeasures}{Calculate4DMeasures} & \textbf{D1B} & Gross population density (people/acre) on unprotected (i.e.~developable) land in zone \\
VESimHouseholds & \protect\hyperlink{vestate-createhouseholds}{CreateHouseholds} & \textbf{HhId} & Household id \\
VESimHouseholds & \protect\hyperlink{vestate-createhouseholds}{CreateHouseholds} & \textbf{Age0to14} & Persons in 0 to 14 year old age group \\
VESimHouseholds & \protect\hyperlink{vestate-createhouseholds}{CreateHouseholds} & \textbf{Age15to19} & Persons in 15 to 19 year old age group \\
VEHouseholdVehicles & \protect\hyperlink{vestate-assigndrivers}{AssignDrivers} & \textbf{Drivers} & Number of drivers in household \\
VEHouseholdVehicles & \protect\hyperlink{vestate-assignvehicleownership}{AssignVehicleOwnership} & \textbf{Vehicles} & Number of automobiles and light trucks owned or leased by the household including high level car service vehicles available to driving-age persons \\
VELandUse & \protect\hyperlink{predicthousing}{PredictHousing} & \textbf{HouseType} & Type of dwelling unit of the household \\
VESimHouseholds & \protect\hyperlink{predictincome}{PredictIncome} & \textbf{Income} & Total annual income of household \\
VESimHouseholds & \protect\hyperlink{vestate-createhouseholds}{CreateHouseholds} & \textbf{HHSize} & Number of persons in the household \\
VELandUse & \protect\hyperlink{calculateurbanmixmeasure}{CalculateUrbanMixMeasure} & \textbf{IsUrbanMixNbrhd} & Flag identifying whether household is (\texttt{1}) or is not (\texttt{0}) in urban mixed-use neighborhood \\
\bottomrule()
\end{longtable}

\hypertarget{module-outputs-54}{%
\subsubsection{Module Outputs}\label{module-outputs-54}}

\begin{itemize}
\tightlist
\item
  \textbf{NumLtTrk}: Number of light trucks (pickup, sport-utility vehicle, and van) owned or leased by household
\item
  \textbf{NumAuto}: Number of automobiles (i.e., four-tire passenger vehicles that are not light trucks) owned or leased by household
\end{itemize}

For more information see \href{https://github.com/visioneval/VisionEval/blob/master/sources/modules/VEHouseholdVehicles/inst/module_docs/AssignVehicleType.md}{here}

\hypertarget{vestate-createvehicletable}{%
\subsection{CreateVehicleTable}\label{vestate-createvehicletable}}

This module creates a vehicle table and populates it with household ID and geography fields.

\hypertarget{user-input-files-56}{%
\subsubsection{User Input Files}\label{user-input-files-56}}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  Car service characteristics by Azone (\protect\hyperlink{vestate-azone_carsvc_characteristics.csv}{azone\_carsvc\_characteristics.csv})
\end{enumerate}

\hypertarget{internal-module-inputs-53}{%
\subsubsection{Internal Module Inputs}\label{internal-module-inputs-53}}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1724}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.3362}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1207}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.3707}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Package
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Module
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Outputs
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule()
\endhead
VEHouseholdVehicles & \protect\hyperlink{vestate-assignvehicleownership}{AssignVehicleOwnership} & \textbf{Vehicles} & Number of automobiles and light trucks owned or leased by the household including high level car service vehicles available to driving-age persons \\
VEHouseholdVehicles & \protect\hyperlink{vestate-assigndrivers}{AssignDrivers} & \textbf{DrvAgePersons} & Number of people 15 year old or older in the household \\
VELandUse & \protect\hyperlink{vestate-assigncarsvcavailability}{AssignCarSvcAvailability} & \textbf{CarSvcLevel} & Level of car service availability for household. High means access is competitive with household owned car. Low is not competitive. \\
\bottomrule()
\end{longtable}

\hypertarget{module-outputs-55}{%
\subsubsection{Module Outputs}\label{module-outputs-55}}

\begin{itemize}
\tightlist
\item
  \textbf{VehId}: Unique vehicle ID
\item
  \textbf{VehicleAccess}: Identifier whether vehicle is owned by household (\texttt{Own}), if vehicle is low level car service (\texttt{LowCarSvc}), or if vehicle is high level car service (\texttt{HighCarSvc})
\end{itemize}

For more information see \href{https://github.com/visioneval/VisionEval/blob/master/sources/modules/VEHouseholdVehicles/inst/module_docs/CreateVehicleTable.md}{here}

\hypertarget{vestate-assignvehicletype}{%
\subsection{AssignVehicleAge}\label{vestate-assignvehicletype}}

This module assigns vehicle ages to each household vehicle. Vehicle age is assigned as a function of the vehicle type (auto or light truck), household income, and assumed mean vehicle age by vehicle type and \texttt{Azone}. Car service vehicles are assigned an age based on input assumptions with no distinction between vehicle type.

\hypertarget{user-input-files-57}{%
\subsubsection{User Input Files}\label{user-input-files-57}}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\item
  Vehicles mean age for household vehicles by Azone (\protect\hyperlink{vestate-azone_hh_veh_mean_age.csv}{azone\_hh\_veh\_mean\_age.csv})
\item
  Car service characteristics by Azone (\protect\hyperlink{vestate-azone_carsvc_characteristics.csv}{azone\_carsvc\_characteristics.csv})
\end{enumerate}

\hypertarget{internal-module-inputs-54}{%
\subsubsection{Internal Module Inputs}\label{internal-module-inputs-54}}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1724}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.3362}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1207}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.3707}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Package
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Module
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Outputs
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule()
\endhead
VESimHouseholds & \protect\hyperlink{vestate-createhouseholds}{CreateHouseholds} & \textbf{HhId} & Household id \\
VEHouseholdVehicles & \protect\hyperlink{vestate-createvehicletable}{CreateVehicleTable} & \textbf{VehId} & Unique vehicle ID \\
VESimHouseholds & \protect\hyperlink{predictincome}{PredictIncome} & \textbf{Income} & Total annual income of household \\
VEHouseholdVehicles & \protect\hyperlink{vestate-assignvehicleownership}{AssignVehicleOwnership} & \textbf{Vehicles} & Number of automobiles and light trucks owned or leased by the household including high level car service vehicles available to driving-age persons \\
VEHouseholdVehicles & \protect\hyperlink{vestate-assignvehicletype}{AssignVehicleType} & \textbf{NumLtTrk} & Number of light trucks (pickup, sport-utility vehicle, and van) owned or leased by household \\
VEHouseholdVehicles & \protect\hyperlink{vestate-assignvehicletype}{AssignVehicleType} & \textbf{NumAuto} & Number of automobiles (i.e.~4-tire passenger vehicles that are not light trucks) owned or leased by household \\
VEHouseholdVehicles & \protect\hyperlink{vestate-createvehicletable}{CreateVehicleTable} & \textbf{VehicleAccess} & Identifier whether vehicle is owned by household (Own), if vehicle is low level car service (LowCarSvc), or if vehicle is high level car service (\texttt{HighCarSvc}) \\
\bottomrule()
\end{longtable}

\hypertarget{module-outputs-56}{%
\subsubsection{Module Outputs}\label{module-outputs-56}}

\begin{itemize}
\tightlist
\item
  \textbf{Type}: Vehicle body type: Auto = automobile, LtTrk = light trucks (i.e.~pickup, SUV, Van)
\item
  \textbf{Age}: Vehicle age in years
\end{itemize}

For more information see \href{https://github.com/visioneval/VisionEval/blob/master/sources/modules/VEHouseholdVehicles/inst/module_docs/AssignVehicleAge.md}{here}

\hypertarget{vestate-calculatevehicleowncost}{%
\subsection{CalculateVehicleOwnCost}\label{vestate-calculatevehicleowncost}}

This module calculates average vehicle ownership cost for each vehicle based on the vehicle type and age using data from the American Automobile Association (AAA). To this are added the cost of parking at the vehicle residence if free parking is not available for all household vehicles. The ownership cost is converted into an average ownership cost per mile by predicting the household DVMT, given the number of owned vehicles and splitting the miles equally among each vehicle.
\#\#\#\# User Input Files

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\item
  Vehicle ownership taxes for households (\protect\hyperlink{vestate-azone_hh_veh_own_taxes.csv}{azone\_hh\_veh\_own\_taxes.csv})
\item
  Proportion of pay-as-you-drive (PAYD) insurance users (\protect\hyperlink{vestate-azone_payd_insurance_prop.csv}{azone\_payd\_insurance\_prop.csv})
\end{enumerate}

\hypertarget{internal-module-inputs-55}{%
\subsubsection{Internal Module Inputs}\label{internal-module-inputs-55}}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1724}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.3362}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1207}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.3707}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Package
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Module
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Outputs
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule()
\endhead
VESimHouseholds & \protect\hyperlink{vestate-createhouseholds}{CreateHouseholds} & \textbf{HhId} & Household id \\
VEHouseholdVehicles & \protect\hyperlink{vestate-createvehicletable}{CreateVehicleTable} & \textbf{VehId} & Unique vehicle ID \\
VEHouseholdVehicles & \protect\hyperlink{vestate-createvehicletable}{CreateVehicleTable} & \textbf{VehicleAccess} & Identifier whether vehicle is owned by household (\texttt{Own}), if vehicle is low level car service (\texttt{LowCarSvc}), or if vehicle is high level car service (\texttt{HighCarSvc}) \\
VEHouseholdVehicles & \protect\hyperlink{vestate-assignvehicleage}{AssignVehicleAge} & \textbf{Type} & Vehicle body type: \texttt{Auto} = automobile, \texttt{LtTrk} = light trucks (i.e.~pickup, SUV, Van) \\
VEHouseholdVehicles & \protect\hyperlink{vestate-assignvehicleage}{AssignVehicleAge} & \textbf{Age} & Vehicle age in years \\
VELandUse & \protect\hyperlink{vestate-assignparkingrestrictions}{AssignParkingRestrictions} & \textbf{FreeParkingSpaces} & Number of free parking spaces available to the household \\
VELandUse & \protect\hyperlink{vestate-assignparkingrestrictions}{AssignParkingRestrictions} & \textbf{ParkingUnitCost} & Daily cost for long-term parking (e.g.~paid on monthly basis) \\
VEHouseholdVehicles & \protect\hyperlink{vestate-assigndrivers}{AssignDrivers} & \textbf{Drivers} & Number of drivers in household \\
VEHouseholdVehicles & \protect\hyperlink{vestate-assigndrivers}{AssignDrivers} & \textbf{Drv15to19} & Number of drivers 15 to 19 years old \\
VEHouseholdVehicles & \protect\hyperlink{vestate-assigndrivers}{AssignDrivers} & \textbf{Drv20to29} & Number of drivers 20 to 29 years old \\
VEHouseholdVehicles & \protect\hyperlink{vestate-assigndrivers}{AssignDrivers} & \textbf{Drv30to54} & Number of drivers 30 to 54 years old \\
VEHouseholdVehicles & \protect\hyperlink{vestate-assigndrivers}{AssignDrivers} & \textbf{Drv55to64} & Number of drivers 55 to 64 years old \\
VEHouseholdVehicles & \protect\hyperlink{vestate-assigndrivers}{AssignDrivers} & \textbf{Drv65Plus} & Number of drivers 65 and older \\
VESimHouseholds & \protect\hyperlink{predictincome}{PredictIncome} & \textbf{Income} & Total annual income of household \\
VELandUse & \protect\hyperlink{assignloctypes}{AssignLocTypes} & \textbf{LocType} & Location type (Urban, Town, Rural) of the place where the household resides \\
VEHouseholdVehicles & \protect\hyperlink{vestate-assignvehicletype}{AssignVehicleType} & \textbf{NumLtTrk} & Number of light trucks (pickup, sport-utility vehicle, and van) owned or leased by household \\
VEHouseholdVehicles & \protect\hyperlink{vestate-assignvehicletype}{AssignVehicleType} & \textbf{NumAuto} & Number of automobiles (i.e.~4-tire passenger vehicles that are not light trucks) owned or leased by household \\
\bottomrule()
\end{longtable}

\hypertarget{module-outputs-57}{%
\subsubsection{Module Outputs}\label{module-outputs-57}}

\begin{itemize}
\tightlist
\item
  \textbf{OwnCost}: Annual cost of vehicle ownership including depreciation, financing, insurance, taxes, and residential parking in dollars
\item
  \textbf{OwnCostPerMile}: Annual cost of vehicle ownership per mile of vehicle travel (dollars per mile)
\item
  \textbf{InsCost}: Annual vehicle insurance cost in dollars
\item
  \textbf{HasPaydIns}: Identifies whether household has pay-as-you-drive insurance for vehicles: 1 = Yes, 0 = no
\end{itemize}

For more information see \href{https://github.com/visioneval/VisionEval/blob/master/sources/modules/VEHouseholdVehicles/inst/module_docs/CalculateVehicleOwnCost.md}{here}

\hypertarget{vestate-adjustvehicleownership}{%
\subsection{AdjustVehicleOwnership}\label{vestate-adjustvehicleownership}}

This module adjusts household vehicle ownership based on a comparison of the cost of owning a vehicle per mile of travel compared to the cost per mile of using a car service in locations where the level of car service quality is high. The determination of whether car services are substituted for ownership also depends on input assumptions regarding the average likelihood that an owner would substitute car services for a household vehicle.

\hypertarget{user-input-files-58}{%
\subsubsection{User Input Files}\label{user-input-files-58}}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  Car service characteristics by Azone (\protect\hyperlink{vestate-azone_carsvc_characteristics.csv}{azone\_carsvc\_characteristics.csv})
\end{enumerate}

\hypertarget{internal-module-inputs-56}{%
\subsubsection{Internal Module Inputs}\label{internal-module-inputs-56}}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1724}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.3362}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1207}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.3707}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Package
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Module
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Outputs
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule()
\endhead
VESimHouseholds & \protect\hyperlink{vestate-createhouseholds}{CreateHouseholds} & \textbf{HhId} & Household id \\
VEHouseholdVehicles & \protect\hyperlink{vestate-createvehicletable}{CreateVehicleTable} & \textbf{VehId} & Unique vehicle ID \\
VEHouseholdVehicles & \protect\hyperlink{vestate-assignvehicleownership}{AssignVehicleOwnership} & \textbf{Vehicles} & Number of automobiles and light trucks owned or leased by the household including high level car service vehicles available to driving-age persons \\
VEHouseholdVehicles & \protect\hyperlink{vestate-createvehicletable}{CreateVehicleTable} & \textbf{VehicleAccess} & Identifier whether vehicle is owned by household (\texttt{Own}), if vehicle is low level car service (\texttt{LowCarSvc}), or if vehicle is high level car service (\texttt{HighCarSvc}) \\
VEHouseholdVehicles & \protect\hyperlink{vestate-assignvehicletype}{AssignVehicleType} & \textbf{NumLtTrk} & Number of light trucks (pickup, sport-utility vehicle, and van) owned or leased by household \\
VEHouseholdVehicles & \protect\hyperlink{vestate-assignvehicletype}{AssignVehicleType} & \textbf{NumAuto} & Number of automobiles (i.e.~4-tire passenger vehicles that are not light trucks) owned or leased by household \\
VELandUse & \protect\hyperlink{vestate-assigncarsvcavailability}{AssignCarSvcAvailability} & \textbf{CarSvcLevel} & Level of car service availability for household. High means access is competitive with household owned car. Low is not competitive. \\
VEHouseholdVehicles & \protect\hyperlink{vestate-assignvehicleage}{AssignVehicleAge} & \textbf{Type} & Vehicle body type: \texttt{Auto} = automobile, \texttt{LtTrk} = light trucks (i.e.~pickup, SUV, Van) \\
VEHouseholdVehicles & \protect\hyperlink{vestate-assignvehicleage}{AssignVehicleAge} & \textbf{Age} & Vehicle age in years \\
ouseholdVehicles & \protect\hyperlink{vestate-calculatevehicleowncost}{CalculateVehicleOwnCost} & \textbf{OwnCost} & Annual cost of vehicle ownership including depreciation, financing, insurance, taxes, and residential parking in dollars \\
VEHouseholdVehicles & \protect\hyperlink{vestate-calculatevehicleowncost}{CalculateVehicleOwnCost} & \textbf{OwnCostPerMile} & Annual cost of vehicle ownership per mile of vehicle travel (dollars per mile) \\
VEHouseholdVehicles & \protect\hyperlink{vestate-calculatevehicleowncost}{CalculateVehicleOwnCost} & \textbf{InsCost} & Annual vehicle insurance cost in dollars \\
\bottomrule()
\end{longtable}

\hypertarget{module-outputs-58}{%
\subsubsection{Module Outputs}\label{module-outputs-58}}

\begin{itemize}
\tightlist
\item
  \textbf{VehicleAccess}: Identifier whether vehicle is owned by household (Own), if vehicle is low level car service (\texttt{LowCarSvc}), or if vehicle is high level car service (\texttt{HighCarSvc})
\item
  \textbf{OwnCost}: Annual cost of vehicle ownership per mile of vehicle travel (dollars per mile)
\item
  \textbf{OwnCostPerMile}:Annual cost of vehicle ownership per mile of vehicle travel (dollars per mile)
\item
  \textbf{InsCost}: Annual vehicle insurance cost in dollars
\item
  \textbf{SwitchToCarSvc}: Identifies whether a vehicle was switched from owned to car service
\item
  \textbf{OwnCostSavings}: Annual vehicle ownership cost (depreciation, finance, insurance, taxes) savings in dollars resulting from substituting the use of car services for a household vehicle
\item
  \textbf{OwnCost}:Annual household vehicle ownership cost (depreciation, finance, insurance, taxes) savings in dollars
\item
  \textbf{Vehicles}:Number of automobiles and light trucks owned or leased by the household including high level car service vehicles available to driving-age persons
\item
  \textbf{NumLtTrk}:Number of light trucks (pickup, sport-utility vehicle, and van) owned or leased by household
\item
  \textbf{NumAuto}:Number of automobiles (i.e.~4-tire passenger vehicles that are not light trucks) owned or leased by household
\item
  \textbf{NumHighCarSvc}:Number of high level service car service vehicles available to the household (difference between number of vehicles owned by the household and number of driving age persons for households having availability of high level car services
\end{itemize}

For more information see \href{https://github.com/visioneval/VisionEval/blob/master/sources/modules/VEHouseholdVehicles/inst/module_docs/AdjustVehicleOwnership.md}{here}

\hypertarget{vestate-calculatehouseholddvmt}{%
\subsection{CalculateHouseholdDvmt}\label{vestate-calculatehouseholddvmt}}

This module models household average daily vehicle miles traveled as a function of household characteristics, vehicle ownership, and attributes of the neighborhood and metropolitan area where the household resides.

\hypertarget{user-input-files-59}{%
\subsubsection{User Input Files}\label{user-input-files-59}}

This module has no user input requirements.

\hypertarget{internal-module-inputs-57}{%
\subsubsection{Internal Module Inputs}\label{internal-module-inputs-57}}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1724}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.3362}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1207}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.3707}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Package
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Module
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Outputs
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule()
\endhead
VETransportSupply & \protect\hyperlink{assigntransitservice}{AssignTransitService} & \textbf{TranRevMiPC} & Ratio of annual bus-equivalent revenue-miles (i.e.~revenue-miles at the same productivity - passenger miles per revenue mile - as standard bus) to urbanized area population \\
VETransportSupply & \protect\hyperlink{assignroadmiles}{AssignRoadMiles} & \textbf{FwyLaneMiPC} & Ratio of urbanized area freeway and expressway lane-miles to urbanized area population \\
VELandUse & \protect\hyperlink{calculate4dmeasures}{Calculate4DMeasures} & \textbf{D1B} & Gross population density (people/acre) on unprotected (i.e., developable) land in zone \\
VESimHouseholds & \protect\hyperlink{vestate-createhouseholds}{CreateHouseholds} & \textbf{Age0to14} & Persons in 0 to 14 year old age group \\
VEHouseholdVehicles & \protect\hyperlink{vestate-assigndrivers}{AssignDrivers} & \textbf{Drivers} & Number of drivers in household \\
VESimHouseholds & \protect\hyperlink{vestate-predictworkers}{PredictWorkers} & \textbf{Workers} & Total workers in the household \\
VESimHouseholds & \protect\hyperlink{vestate-createhouseholds}{CreateHouseholds} & \textbf{HHSize} & Number of persons in the household \\
VELandUse & \protect\hyperlink{assignloctypes}{AssignLocTypes} & \textbf{LocType} & Location type (\texttt{Urban}, \texttt{Town}, \texttt{Rural}) of the place where the household resides \\
VEHouseholdVehicles & \protect\hyperlink{vestate-assignvehicleownership}{AssignVehicleOwnership} & \textbf{Vehicles} & Number of automobiles and light trucks owned or leased by the household including high level car service vehicles available to driving-age persons \\
VESimHouseholds & \protect\hyperlink{predictincome}{PredictIncome} & \textbf{Income} & Total annual income of household \\
VELandUse & \protect\hyperlink{calculateurbanmixmeasure}{CalculateUrbanMixMeasure} & \textbf{IsUrbanMixNbrhd} & Flag identifying whether household is (\texttt{1}) or is not (\texttt{0}) in urban mixed-use neighborhood \\
\bottomrule()
\end{longtable}

\hypertarget{module-outputs-59}{%
\subsubsection{Module Outputs}\label{module-outputs-59}}

\begin{itemize}
\tightlist
\item
  \textbf{Dvmt}: Average daily vehicle miles traveled by the household in autos or light trucks
\item
  \textbf{UrbanHhDvmt}: Average daily vehicle miles traveled in autos or light trucks by households residing in the urbanized portion of the \texttt{Marea}
\item
  \textbf{TownHhDvmt}: Average daily vehicle miles traveled in autos or light trucks by households residing in town (urban but not urbanized) portion of the \texttt{Marea}
\item
  \textbf{RuralHhDvmt}: Average daily vehicle miles traveled in autos or light trucks by households residing in the rural (non-urban) portion of the \texttt{Marea}
\end{itemize}

For more information see \href{https://github.com/visioneval/VisionEval/blob/master/sources/modules/VEHouseholdTravel/inst/module_docs/CalculateHouseholdDvmt.md}{here}

\hypertarget{vestate-calculatealtmodetrips}{%
\subsection{CalculateAltModeTrips}\label{vestate-calculatealtmodetrips}}

This module calculates household transit trips, walk trips, and bike trips. The models are sensitive to household DVMT so they are run after all household DVMT adjustments (e.g.~to account for cost on household DVMT) are made.

\hypertarget{user-input-files-60}{%
\subsubsection{User Input Files}\label{user-input-files-60}}

This module has no user input requirements.

\hypertarget{internal-module-inputs-58}{%
\subsubsection{Internal Module Inputs}\label{internal-module-inputs-58}}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1724}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.3362}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1207}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.3707}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Package
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Module
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Outputs
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule()
\endhead
VETransportSupply & \protect\hyperlink{assigntransitservice}{AssignTransitService} & \textbf{TranRevMiPC} & Ratio of annual bus-equivalent revenue-miles (i.e.~revenue-miles at the same productivity - passenger miles per revenue mile - as standard bus) to urbanized area population \\
VELandUse & \protect\hyperlink{calculate4dmeasures}{Calculate4DMeasures} & \textbf{D1B} & Gross population density (people/acre) on unprotected (i.e.~developable) land in zone \\
VESimHouseholds & \protect\hyperlink{vestate-createhouseholds}{CreateHouseholds} & \textbf{Age15to19} & Persons in 15 to 19 year old age group \\
VESimHouseholds & \protect\hyperlink{vestate-createhouseholds}{CreateHouseholds} & \textbf{Age20to29} & Persons in 20 to 29 year old age group \\
VESimHouseholds & \protect\hyperlink{vestate-createhouseholds}{CreateHouseholds} & \textbf{Age30to54} & Persons in 30 to 54 year old age group \\
VESimHouseholds & \protect\hyperlink{vestate-createhouseholds}{CreateHouseholds} & \textbf{Age55to64} & Persons in 55 to 64 year old age group \\
VESimHouseholds & \protect\hyperlink{vestate-createhouseholds}{CreateHouseholds} & \textbf{Age65Plus} & Persons in 65 or older age group \\
VESimHouseholds & \protect\hyperlink{vestate-createhouseholds}{CreateHouseholds} & \textbf{Age0to14} & Persons in 0 to 14 year old age group \\
VESimHouseholds & \protect\hyperlink{vestate-createhouseholds}{CreateHouseholds} & \textbf{HHSize} & Number of persons in the household \\
VELandUse & \protect\hyperlink{assignloctypes}{AssignLocTypes} & \textbf{LocType} & Location type (\texttt{Urban}, \texttt{Town}, \texttt{Rural}) of the place where the household resides \\
VEHouseholdVehicles & \protect\hyperlink{vestate-assignvehicleownership}{AssignVehicleOwnership} & \textbf{Vehicles} & Number of automobiles and light trucks owned or leased by the household including high level car service vehicles available to driving-age persons \\
VESimHouseholds & \protect\hyperlink{predictincome}{PredictIncome} & \textbf{Income} & Total annual income of household \\
VELandUse & \protect\hyperlink{calculateurbanmixmeasure}{CalculateUrbanMixMeasure} & \textbf{IsUrbanMixNbrhd} & Flag identifying whether household is (\texttt{1}) or is not (\texttt{0}) in urban mixed-use neighborhood \\
VEHouseholdTravel & \protect\hyperlink{vestate-calculatehouseholddvmt}{CalculateHouseholdDvmt} & \textbf{Dvmt} & Average daily vehicle miles traveled by the household in autos or light trucks \\
\bottomrule()
\end{longtable}

\hypertarget{module-outputs-60}{%
\subsubsection{Module Outputs}\label{module-outputs-60}}

\begin{itemize}
\tightlist
\item
  \textbf{WalkTrips}: Average number of walk trips per year by household members
\item
  \textbf{BikeTrips}: Average number of bicycle trips per year by household members
\item
  \textbf{TransitTrips}:Average number of public transit trips per year by household members
\end{itemize}

For more information see \href{https://github.com/visioneval/VisionEval/blob/master/sources/modules/VEHouseholdTravel/inst/module_docs/CalculateAltModeTrips.md}{here}

\hypertarget{vestate-calculatevehicletrips}{%
\subsection{CalculateVehicleTrips}\label{vestate-calculatevehicletrips}}

This module calculates average daily vehicle trips for households consistent with the household DVMT. An average trip length model is applied to estimate average length of household trips reflecting the characteristics of the household and the place where they live. The average trip length is divided into the average household DVMT to get an estimate of average number of daily vehicle trips.

\hypertarget{user-input-files-61}{%
\subsubsection{User Input Files}\label{user-input-files-61}}

This module has no user input requirements.

\hypertarget{internal-module-inputs-59}{%
\subsubsection{Internal Module Inputs}\label{internal-module-inputs-59}}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1724}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.3362}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1207}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.3707}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Package
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Module
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Outputs
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule()
\endhead
VETransportSupply & \protect\hyperlink{assignroadmiles}{AssignRoadMiles} & \textbf{FwyLaneMiPC} & Ratio of urbanized area freeway and expressway lane-miles to urbanized area population \\
VELandUse & \protect\hyperlink{calculate4dmeasures}{Calculate4DMeasures} & \textbf{D1B} & Gross population density (people/acre) on unprotected (i.e.~developable) land in zone \\
VESimHouseholds & \protect\hyperlink{vestate-createhouseholds}{CreateHouseholds} & \textbf{HHSize} & Number of persons in the household \\
VELandUse & \protect\hyperlink{assignloctypes}{AssignLocTypes} & \textbf{LocType} & Location type (Urban, Town, Rural) of the place where the household resides \\
VEHouseholdVehicles & \protect\hyperlink{vestate-assignvehicleownership}{AssignVehicleOwnership} & \textbf{Vehicles} & Number of automobiles and light trucks owned or leased by the household including high level car service vehicles available to driving-age persons \\
VEHouseholdVehicles & \protect\hyperlink{vestate-assigndrivers}{AssignDrivers} & \textbf{Drivers} & Number of drivers in household \\
VESimHouseholds & \protect\hyperlink{predictincome}{PredictIncome} & \textbf{Income} & Total annual income of household \\
VELandUse & \protect\hyperlink{calculateurbanmixmeasure}{CalculateUrbanMixMeasure} & \textbf{IsUrbanMixNbrhd} & Flag identifying whether household is (\texttt{1}) or is not (\texttt{0}) in urban mixed-use neighborhood \\
VEHouseholdTravel & \protect\hyperlink{vestate-calculatehouseholddvmt}{CalculateHouseholdDvmt} & \textbf{Dvmt} & Average daily vehicle miles traveled by the household in autos or light trucks \\
\bottomrule()
\end{longtable}

\hypertarget{module-outputs-61}{%
\subsubsection{Module Outputs}\label{module-outputs-61}}

\begin{itemize}
\tightlist
\item
  \textbf{VehicleTrips}: Average number of vehicle trips per day by household members
\item
  \textbf{AveVehTripLen}: Average household vehicle trip length in miles
\end{itemize}

For more information see \href{https://github.com/visioneval/VisionEval/blob/master/sources/modules/VEHouseholdTravel/inst/module_docs/CalculateVehicleTrips.md}{here}

\hypertarget{vestate-divertsovtravel}{%
\subsection{DivertSovTravel}\label{vestate-divertsovtravel}}

This module reduces household single-occupant vehicle (SOV) travel to achieve goals that are inputs to the model. The purpose of this module is to enable users to do `what if' analysis of the potential of light-weight vehicles (e.g.~bicycles, electric bikes, electric scooters) and infrastructure to support their use to reduce SOV travel.

\hypertarget{user-input-files-62}{%
\subsubsection{User Input Files}\label{user-input-files-62}}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  Proportion of diverted SOV trips (\protect\hyperlink{vestate-azone_prop_sov_dvmt_diverted.csv}{azone\_prop\_sov\_dvmt\_diverted.csv})
\end{enumerate}

\hypertarget{internal-module-inputs-60}{%
\subsubsection{Internal Module Inputs}\label{internal-module-inputs-60}}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1724}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.3362}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1207}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.3707}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Package
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Module
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Outputs
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule()
\endhead
VETransportSupply & \protect\hyperlink{assignroadmiles}{AssignRoadMiles} & \textbf{FwyLaneMiPC} & Ratio of urbanized area freeway and expressway lane-miles to urbanized area population \\
VELandUse & \protect\hyperlink{calculate4dmeasures}{Calculate4DMeasures} & \textbf{D1B} & Gross population density (people/acre) on unprotected (i.e.~developable) land in zone \\
VESimHouseholds & \protect\hyperlink{vestate-createhouseholds}{CreateHouseholds} & \textbf{HHSize} & Number of persons in the household \\
VELandUse & \protect\hyperlink{assignloctypes}{AssignLocTypes} & \textbf{LocType} & Location type (\texttt{Urban}, \texttt{Town}, \texttt{Rural}) of the place where the household resides \\
VEHouseholdVehicles & \protect\hyperlink{vestate-assignvehicleownership}{AssignVehicleOwnership} & \textbf{Vehicles} & Number of automobiles and light trucks owned or leased by the household including high level car service vehicles available to driving-age persons \\
VEHouseholdVehicles & \protect\hyperlink{vestate-assigndrivers}{AssignDrivers} & \textbf{Drivers} & Number of drivers in household \\
VESimHouseholds & \protect\hyperlink{predictincome}{PredictIncome} & \textbf{Income} & Total annual income of household \\
VELandUse & \protect\hyperlink{calculateurbanmixmeasure}{CalculateUrbanMixMeasure} & \textbf{IsUrbanMixNbrhd} & Flag identifying whether household is (\texttt{1}) or is not (\texttt{0}) in urban mixed-use neighborhood \\
VEHouseholdTravel & \protect\hyperlink{vestate-calculatehouseholddvmt}{CalculateHouseholdDvmt} & \textbf{Dvmt} & Average daily vehicle miles traveled by the household in autos or light trucks \\
VESimHouseholds & \protect\hyperlink{vestate-createhouseholds}{CreateHouseholds} & \textbf{Age0to14} & Persons in 0 to 14 year old age group \\
VESimHouseholds & \protect\hyperlink{vestate-createhouseholds}{CreateHouseholds} & \textbf{Age15to19} & Persons in 15 to 19 year old age group \\
VELandUse & \protect\hyperlink{predicthousing}{PredictHousing} & \textbf{HouseType} & Type of dwelling unit of the household \\
\bottomrule()
\end{longtable}

\hypertarget{module-outputs-62}{%
\subsubsection{Module Outputs}\label{module-outputs-62}}

\begin{itemize}
\tightlist
\item
  \textbf{PropDvmtDiverted}: Proportion of household DVMT diverted to bicycling, electric bikes, or other `low-speed' travel modes
\item
  \textbf{AveTrpLenDiverted}: Average length in miles of vehicle trips diverted to bicycling, electric bikes, or other `low-speed' travel modes
\end{itemize}

For more information see \href{https://github.com/visioneval/VisionEval/blob/master/sources/modules/VEHouseholdTravel/inst/module_docs/DivertSovTravel.md}{here}

\hypertarget{vestate-initialize-vepowertrainsandfuels}{%
\subsection{Initialize-vepowertrainsandfuels}\label{vestate-initialize-vepowertrainsandfuels}}

This module processes vehicle and fuel characteristics files that model users may optionally supply. When these files are supplied, modules in the package that compute carbon intensities of vehicle travel will use the user-supplied data instead of the datasets that are part of the package (see the \texttt{LoadDefaultValues.R} script).

\hypertarget{user-input-files-63}{%
\subsubsection{User Input Files}\label{user-input-files-63}}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\item
  Carbon intensity of electricity (\protect\hyperlink{vestate-azone_electricity_carbon_intensity.csv}{azone\_electricity\_carbon\_intensity.csv})
\item
  Average fuel carbon intensity of transit (\protect\hyperlink{vestate-marea_transit_ave_fuel_carbon_intensity.csv}{marea\_transit\_ave\_fuel\_carbon\_intensity.csv})
\item
  Biofuels proportions of transit fuels (\protect\hyperlink{vestate-marea_transit_biofuel_mix.csv}{marea\_transit\_biofuel\_mix.csv})
\item
  Transit fuels proportions by transit vehicle type (\protect\hyperlink{vestate-marea_transit_fuel.csv}{marea\_transit\_fuel.csv})
\item
  Transit powertrain proportions by transit vehicle type (\protect\hyperlink{vestate-marea_transit_powertrain_prop.csv}{marea\_transit\_powertrain\_prop.csv})
\item
  Average carbon intensities of fuels by vehicle category for the model region (\protect\hyperlink{vestate-region_ave_fuel_carbon_intensity.csv}{region\_ave\_fuel\_carbon\_intensity.csv})
\item
  Car service vehicle powertrain proportions by vehicle type for the model region (\protect\hyperlink{vestate-region_carsvc_powertrain_prop.csvux5cux255D}{region\_carsvc\_powertrain\_prop.csv})
\item
  Commercial service vehicle powertrain proportions by vehicle type (\protect\hyperlink{vestate-region_comsvc_powertrain_prop.csv}{region\_comsvc\_powertrain\_prop.csv})
\item
  Heavy duty truck powertrain proportions (\protect\hyperlink{vestate-region_hvytrk_powertrain_prop.csv}{region\_hvytrk\_powertrain\_prop.csv})
\end{enumerate}

\hypertarget{internal-module-inputs-61}{%
\subsubsection{Internal Module Inputs}\label{internal-module-inputs-61}}

This module uses no datasets that are in the datastore.

\hypertarget{module-outputs-63}{%
\subsubsection{Module Outputs}\label{module-outputs-63}}

This module produces no datasets to store in the datastore.

For more information see \href{https://github.com/visioneval/VisionEval/blob/master/sources/modules/VEPowertrainsAndFuels/inst/module_docs/Initialize.md}{here}

\hypertarget{vestate-calculatecarbonintensity}{%
\subsection{CalculateCarbonIntensity}\label{vestate-calculatecarbonintensity}}

This module calculates the average carbon intensity of fuels (grams CO2e per megajoule) by transportation mode and vehicle type. The transportation modes and vehicle types are:

\begin{longtable}[]{@{}ll@{}}
\toprule()
Mode & Vehicle Types \\
\midrule()
\endhead
Household & automobile, light truck \\
Car Service & automobile, light truck \\
Commercial Service & automobile, light truck \\
Heavy Truck & heavy truck \\
Public Transit & van, bus, rail \\
\bottomrule()
\end{longtable}

Average fuel carbon intensities for public transit vehicles are calculated by \texttt{Marea}. The average fuel carbon intensities for the other mode vehicles are calculated for the entire model region. The module also calculates the average carbon intensity of electricity at the \texttt{Azone} level. Note that this module uses the user input files only if the user runs \protect\hyperlink{vestate-initialize}{Initialize} module. Otherwise the module uses default inputs in the \href{https://github.com/visioneval/VisionEval/tree/master/sources/modules/VEPowertrainsAndFuels/inst/extdata}{inst\extdata folder}.

\hypertarget{user-input-files-64}{%
\subsubsection{User Input Files}\label{user-input-files-64}}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\item
  Carbon intensity of electricity (\protect\hyperlink{vestate-azone_electricity_carbon_intensity.csv}{azone\_electricity\_carbon\_intensity.csv})
\item
  Biofuels proportions of transit fuels (\protect\hyperlink{vestate-marea_transit_biofuel_mix.csv}{marea\_transit\_biofuel\_mix.csv})
\item
  Transit fuels proportions by transit vehicle type (\protect\hyperlink{vestate-marea_transit_fuel.csv}{marea\_transit\_fuel.csv})
\item
  Average carbon intensities of fuels by vehicle category for the model region (\protect\hyperlink{vestate-region_ave_fuel_carbon_intensity.csv}{region\_ave\_fuel\_carbon\_intensity.csv})
\end{enumerate}

\hypertarget{internal-module-inputs-62}{%
\subsubsection{Internal Module Inputs}\label{internal-module-inputs-62}}

This module does not have any internal module inputs

\hypertarget{module-outputs-64}{%
\subsubsection{Module Outputs}\label{module-outputs-64}}

\begin{itemize}
\tightlist
\item
  \textbf{ElectricityCI}: Carbon intensity of electricity at point of consumption (grams CO2e per megajoule)
\item
  \textbf{HhAutoFuelCI}: Average carbon intensity of fuels used by household automobiles (grams CO2e per megajoule)
\item
  \textbf{HhLtTrkFuelCI}: Average carbon intensity of fuels used by household light trucks (grams CO2e per megajoule)
\item
  \textbf{CarSvcAutoFuelCI}: Average carbon intensity of fuels used by car service automobiles (grams CO2e per megajoule)
\item
  \textbf{CarSvcLtTrkFuelCI}: Average carbon intensity of fuels used by car service light trucks (grams CO2e per megajoule)
\item
  \textbf{ComSvcAutoFuelCI}: Average carbon intensity of fuels used by commercial service automobiles (grams CO2e per megajoule)
\item
  \textbf{ComSvcLtTrkFuelCI}: Average carbon intensity of fuels used by commercial service light trucks (grams CO2e per megajoule)
\item
  \textbf{HvyTrkFuelCI}: Average carbon intensity of fuels used by heavy trucks (grams CO2e per megajoule)
\item
  \textbf{TransitVanFuelCI}: Average carbon intensity of fuel used by transit vans (grams CO2e per megajoule)
\item
  \textbf{TransitBusFuelCI}: Average carbon intensity of fuel used by transit buses (grams CO2e per megajoule)
\item
  \textbf{TransitRailFuelCI}: Average carbon intensity of fuel used by transit rail vehicles (grams CO2e per megajoule)
\end{itemize}

For more information see \href{https://github.com/visioneval/VisionEval/blob/master/sources/modules/VEPowertrainsAndFuels/inst/module_docs/CalculateCarbonIntensity.md}{here}

\hypertarget{vestate-assignhhvehiclepowertrain}{%
\subsection{AssignHhVehiclePowertrain}\label{vestate-assignhhvehiclepowertrain}}

This module assigns a powertrain type to each household vehicle. The powertrain types are internal combustion engine vehicle (ICEV), hybrid electric vehicle (HEV), plug-in hybrid electric vehicle (PHEV), and battery electric vehicles (BEV). The module also assigns related characteristics to household vehicles including:

\begin{itemize}
\tightlist
\item
  Battery range (for PHEV and BEV)
\item
  Miles per gallon (MPG) and gallons per mile (GPM)
\item
  Miles per kilowatt-hour (MPKWH) and kilowatt-hours per mile (KWHPM)
\item
  Miles per gasoline gallon equivalent (MPGe)
\item
  The proportion of DVMT powered by electricity
\item
  Carbon dioxide equivalent emissions per mile powered by hydrocarbon fuel
\item
  Carbon dioxide equivalent emissions per mile powered by electricity
\end{itemize}

\hypertarget{user-input-files-65}{%
\subsubsection{User Input Files}\label{user-input-files-65}}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\item
  Charging availability (\protect\hyperlink{vestate-azone_charging_availability.csv}{azone\_charging\_availability.csv})
\item
  Car service vehicle powertrain proportions by vehicle type for the model region (\protect\hyperlink{vestate-region_carsvc_powertrain_prop.csvux5cux255D}{region\_carsvc\_powertrain\_prop.csv})
\end{enumerate}

\hypertarget{internal-module-inputs-63}{%
\subsubsection{Internal Module Inputs}\label{internal-module-inputs-63}}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1724}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.3362}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1207}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.3707}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Package
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Module
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Outputs
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule()
\endhead
VEPowertrainsAndFuels & \protect\hyperlink{vestate-calculatecarbonintensity}{CalculateCarbonIntensity} & \textbf{ElectricityCI} & Carbon intensity of electricity at point of consumption (grams CO2e per megajoule) \\
VEPowertrainsAndFuels & \protect\hyperlink{vestate-calculatecarbonintensity}{CalculateCarbonIntensity} & \textbf{HhAutoFuelCI} & Average carbon intensity of fuels used by household automobiles (grams CO2e per megajoule)) \\
VEPowertrainsAndFuels & \protect\hyperlink{vestate-calculatecarbonintensity}{CalculateCarbonIntensity} & \textbf{HhLtTrkFuelCI} & Average carbon intensity of fuels used by household light trucks (grams CO2e per megajoule) \\
VEPowertrainsAndFuels & \protect\hyperlink{vestate-calculatecarbonintensity}{CalculateCarbonIntensity} & \textbf{CarSvcAutoFuelCI} & Average carbon intensity of fuels used by car service automobiles (grams CO2e per megajoule) \\
VEPowertrainsAndFuels & \protect\hyperlink{vestate-calculatecarbonintensity}{CalculateCarbonIntensity} & \textbf{CarSvcLtTrkFuelCI} & Average carbon intensity of fuels used by car service light trucks (grams CO2e per megajoule) \\
ESimHouseholds & \protect\hyperlink{vestate-createhouseholds}{CreateHouseholds} & \textbf{HhId} & Household id \\
VELandUse & \protect\hyperlink{assignloctypes}{AssignLocTypes} & \textbf{LocType} & Location type (Urban, Town, Rural) of the place where the household resides \\
VEHouseholdVehicles & \protect\hyperlink{vestate-assignvehicleownership}{AssignVehicleOwnership} & \textbf{Vehicles} & Number of automobiles and light trucks owned or leased by the household including high level car service vehicles available to driving-age persons \\
VEHouseholdVehicles & \protect\hyperlink{vestate-assignvehicletype}{AssignVehicleType} & \textbf{NumAuto} & Number of automobiles (i.e.~4-tire passenger vehicles that are not light trucks) owned or leased by household \\
VEHouseholdVehicles & \protect\hyperlink{vestate-assignvehicletype}{AssignVehicleType} & \textbf{NumLtTrk} & Number of light trucks (pickup, sport-utility vehicle, and van) owned or leased by household \\
VELandUse & \protect\hyperlink{predicthousing}{PredictHousing} & \textbf{HouseType} & Type of dwelling unit of the household \\
VEHouseholdTravel & \protect\hyperlink{vestate-calculatehouseholddvmt}{CalculateHouseholdDvmt} & \textbf{Dvmt} & Average daily vehicle miles traveled by the household in autos or light trucks \\
VEHouseholdVehicles & \protect\hyperlink{vestate-createvehicletable}{CreateVehicleTable} & \textbf{VehId} & Unique vehicle ID \\
VEHouseholdVehicles & \protect\hyperlink{vestate-assignvehicleage}{AssignVehicleAge} & \textbf{Type} & Vehicle body type: Auto = automobile, LtTrk = light trucks (i.e.~pickup, SUV, Van) \\
VEHouseholdVehicles & \protect\hyperlink{vestate-assignvehicleage}{AssignVehicleAge} & \textbf{Age} & Vehicle age in years \\
VEHouseholdVehicles & \protect\hyperlink{vestate-createvehicletable}{CreateVehicleTable} & \textbf{VehicleAccess} & Identifier whether vehicle is owned by household (Own), if vehicle is low level car service (LowCarSvc), or if vehicle is high level car service (HighCarSvc) \\
\bottomrule()
\end{longtable}

\hypertarget{module-outputs-65}{%
\subsubsection{Module Outputs}\label{module-outputs-65}}

\begin{itemize}
\tightlist
\item
  \textbf{Powertrain}: Vehicle powertrain type: ICEV = internal combustion engine vehicle, HEV = hybrid electric vehicle, PHEV = plug-in hybrid electric vehicle, BEV = battery electric vehicle, NA = not applicable because is a car service vehicle
\item
  \textbf{BatRng}: Miles of travel possible on fully charged battery
\item
  \textbf{MPG}: Average miles of vehicle travel powered by fuel per gasoline equivalent gallon
\item
  \textbf{GPM}: Average gasoline equivalent gallons per mile of vehicle travel powered by fuel
\item
  \textbf{MPKWH}: Average miles of vehicle travel powered by electricity per kilowatt-hour
\item
  \textbf{KWHPM}: Average kilowatt-hours per mile of vehicle travel powered by electricity
\item
  \textbf{MPGe}: Average miles of vehicle travel per gasoline equivalent gallon (fuel and electric powered)
\item
  \textbf{ElecDvmtProp}: Average miles of vehicle travel per gasoline equivalent gallon (fuel and electric powered)
\item
  \textbf{FuelCO2ePM}: Average grams of carbon-dioxide equivalents produced per mile of travel powered by fuel
\item
  \textbf{ElecCO2ePM}: Average grams of carbon-dioxide equivalents produced per mile of travel powered by electricity
\end{itemize}

For more information see \href{https://github.com/visioneval/VisionEval/blob/master/sources/modules/VEPowertrainsAndFuels/inst/module_docs/AssignHhVehiclePowertrain.md}{here}

\hypertarget{vestate-initialize-vetravelperformance}{%
\subsection{Initialize-vetravelperformance}\label{vestate-initialize-vetravelperformance}}

This module reads and processes roadway DVMT and operations inputs.
The following input files are optional. If these data are not provided, the model calculates values based on default data included with the package and processed by the \texttt{LoadDefaultRoadDvmtValues.R} script.

\hypertarget{user-input-files-66}{%
\subsubsection{User Input Files}\label{user-input-files-66}}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\item
  Base year highway truck DVMT for region (\protect\hyperlink{vestate-region_base_year_hvytrk_dvmt.csv}{region\_base\_year\_hvytrk\_dvmt.csv})
\item
  Base year DVMT for Marea (\protect\hyperlink{vestate-marea_base_year_dvmt.csv}{marea\_base\_year\_dvmt.csv})
\item
  \begin{enumerate}
  \def\labelenumii{\arabic{enumii}.}
  \setcounter{enumii}{2}
  \tightlist
  \item
    DVMT split by road class by Marea (\protect\hyperlink{vestate-marea_dvmt_split_by_road_class.csv}{marea\_dvmt\_split\_by\_road\_class.csv})
  \end{enumerate}
\item
  Operations deployment effects on dvmt for Marea (\protect\hyperlink{vestate-marea_operations_deployment.csv}{marea\_operations\_deployment.csv})
\item
  Other operations effects (\protect\hyperlink{vestate-other_ops_effectiveness.csv}{other\_ops\_effectiveness.csv})
\item
  Charges by congestion levels by road class (\protect\hyperlink{vestate-marea_congestion_charges.csv}{marea\_congestion\_charges.csv})
\end{enumerate}

\hypertarget{internal-module-inputs-64}{%
\subsubsection{Internal Module Inputs}\label{internal-module-inputs-64}}

This module uses no datasets that are in the datastore.

\hypertarget{module-outputs-66}{%
\subsubsection{Module Outputs}\label{module-outputs-66}}

This module produces no datasets to store in the datastore.

\hypertarget{vestate-calculatebaseroaddvmt}{%
\subsection{CalculateBaseRoadDvmt}\label{vestate-calculatebaseroaddvmt}}

This module calculates base year roadway DVMT by vehicle type (light-duty, heavy truck, bus) and the distribution of roadway DVMT by vehicle type to roadway classes (freeway, arterial, other)
This module uses optional user inputs if \protect\hyperlink{vestate-initialize-vetravelperformance}{Initialize} module is run. Otherwise, it uses default data in \href{https://github.com/visioneval/VisionEval/tree/develop/sources/modules/VETravelPerformance/inst/extdata}{inst\extdata folder}

\hypertarget{user-input-files-67}{%
\subsubsection{User Input Files}\label{user-input-files-67}}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\item
  Base year highway truck DVMT for region (\protect\hyperlink{vestate-region_base_year_hvytrk_dvmt.csv}{region\_base\_year\_hvytrk\_dvmt.csv})
\item
  Base year DVMT for Marea (\protect\hyperlink{vestate-marea_base_year_dvmt.csv}{marea\_base\_year\_dvmt.csv})
\item
  DVMT split by road class by Marea (\protect\hyperlink{vestate-marea_dvmt_split_by_road_class.csv}{marea\_dvmt\_split\_by\_road\_class.csv})
\end{enumerate}

\hypertarget{internal-module-inputs-65}{%
\subsubsection{Internal Module Inputs}\label{internal-module-inputs-65}}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1724}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.3362}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1207}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.3707}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Package
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Module
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Outputs
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule()
\endhead
VETransportSupply & \protect\hyperlink{assigntransitservice}{AssignTransitService} & \textbf{VanDvmt} & Total daily miles traveled by vans of various sizes to provide demand responsive, vanpool, and similar services \\
VETransportSupply & \protect\hyperlink{assigntransitservice}{AssignTransitService} & \textbf{BusDvmt} & Total daily miles traveled by buses of various sizes to provide bus service of various types \\
VETransportSupply & \protect\hyperlink{assigntransitservice}{AssignTransitService} & \textbf{RailDvmt} & Total daily miles traveled by light rail, heavy rail, commuter rail, and similar types of vehicles \\
VELandUse & \protect\hyperlink{assignloctypes}{AssignLocTypes} & \textbf{UrbanPop} & Urbanized area population \\
VELandUse & \protect\hyperlink{assignloctypes}{AssignLocTypes} & \textbf{RuralPop} & Rural (i.e.~non-urbanized area) population \\
VELandUse & \href{assignloctypes}{AssignLocTypes} & \textbf{RuralIncome} & Total household income of the rural (i.e.~non-urbanized area) population \\
VELandUse & \protect\hyperlink{assignloctypes}{AssignLocTypes} & \textbf{UrbanIncome} & Total household income of the rural (i.e.~non-urbanized area) population \\
VEHouseholdTravel & \protect\hyperlink{vestate-calculatehouseholddvmt}{CalculateHouseholdDvmt} & \textbf{UrbanHhDvmt} & Average daily vehicle miles traveled in autos or light trucks by households residing in the urbanized portion of the Marea \\
VEHouseholdTravel & \protect\hyperlink{vestate-calculatehouseholddvmt}{CalculateHouseholdDvmt} & \textbf{RuralHhDvmt} & Average daily vehicle miles traveled in autos or light trucks by households residing in the rural (non-urban) portion of the Marea \\
\bottomrule()
\end{longtable}

\hypertarget{module-outputs-67}{%
\subsubsection{Module Outputs}\label{module-outputs-67}}

\begin{itemize}
\tightlist
\item
  \textbf{HvyTrkDvmtUrbanProp}: Proportion of Region heavy truck daily vehicle miles of travel occurring on urbanized area roadways
\item
  \textbf{HvyTrkDvmtIncomeFactor}: Ratio of Region base year heavy truck DVMT to household income
\item
  \textbf{HvyTrkDvmtPopulationFactor}: Ratio of Region base year heavy truck DVMT to population
\item
  \textbf{HvyTrkUrbanDvmt}: Base year Region heavy truck daily vehicle miles of travel in urbanized areas
\item
  \textbf{HvyTrkRuralDvmt}: Base year Region heavy truck daily vehicle miles of travel in rural (i.e.~non-urbanized) areas
\item
  \textbf{ComSvcDvmtHhDvmtFactor}: Ratio of Marea base year commercial service DVMT to household DVMT
\item
  \textbf{ComSvcDvmtIncomeFactor}: Ratio of base year commercial service vehicle DVMT to household income
\item
  \textbf{ComSvcDvmtPopulationFactor}: Ratio of base year commercial service vehicle DVMT to population
\item
  \textbf{HvyTrkDvmtPopulationFactor}: Ratio of base year heavy truck DVMT to population
\item
  \textbf{LdvRoadDvmtLdvDemandRatio}: Ratio between light-duty vehicle (LDV) daily vehicle miles of travel (DVMT) on urbanized area roadways in the Marea to the total LDV DVMT of households residing in the urbanized area, the commercial service vehicle travel related to household demand, and LDV public transit DVMT.
\item
  \textbf{ComSvcUrbanDvmt}: Commercial service daily vehicle miles of travel associated with Marea urbanized household activity
\item
  \textbf{ComSvcRuralDvmt}: Commercial service daily vehicle miles of travel associated with Marea rural household activity
\item
  \textbf{LdvFwyArtDvmtProp}: Proportion of light-duty daily vehicle miles of travel in the urbanized portion of the Marea occurring on freeway or arterial roadways
\item
  \textbf{LdvOthDvmtProp}: Proportion of light-duty daily vehicle miles of travel in the urbanized portion of the Marea occurring on other roadways
\item
  \textbf{HvyTrkFwyDvmtProp}: Proportion of heavy truck daily vehicle miles of travel in the urbanized portion of the Marea occurring on freeways
\item
  \textbf{HvyTrkArtDvmtProp}: Proportion of heavy truck daily vehicle miles of travel in the urbanized portion of the Marea occurring on arterial roadways
\item
  \textbf{HvyTrkOthDvmtProp}: Proportion of heavy truck daily vehicle miles of travel in the urbanized portion of the Marea occurring on other roadways
\item
  \textbf{BusFwyDvmtProp}: Proportion of bus daily vehicle miles of travel in the urbanized portion of the Marea occurring on freeways
\item
  \textbf{BusArtDvmtProp}: Proportion of bus daily vehicle miles of travel in the urbanized portion of the Marea occurring on arterial roadways
\item
  \textbf{BusOthDvmtProp}: Proportion of bus daily vehicle miles of travel in the urbanized portion of the Marea occuring on other roadways
\item
  \textbf{LdvFwyArtDvmt}: Light-duty daily vehicle miles of travel in the urbanized portion of the Marea occurring on freeway or arterial roadways
\item
  \textbf{LdvOthDvmt}: Light-duty daily vehicle miles of travel in the urbanized portion of the Marea occurring on other roadways
\item
  \textbf{HvyTrkFwyDvmt}: Heavy truck daily vehicle miles of travel in the urbanized portion of the Marea occurring on freeways
\item
  \textbf{HvyTrkArtDvmt}:Heavy truck daily vehicle miles of travel in the urbanized portion of the Marea occurring on arterial roadways
\item
  \textbf{HvyTrkOthDvmt}: Heavy truck daily vehicle miles of travel in the urbanized portion of the Marea occurring on other roadways
\item
  \textbf{BusFwyDvmt}: Bus daily vehicle miles of travel in the urbanized portion of the Marea occurring on freeways
\item
  \textbf{BusArtDvmt}: Bus daily vehicle miles of travel in the urbanized portion of the Marea occurring on arterial roadways
\item
  \textbf{BusOthDvmt}: Bus daily vehicle miles of travel in the urbanized portion of the Marea occuring on other roadways
\end{itemize}

\hypertarget{vestate-calculatefutureroaddvmt}{%
\subsection{CalculateFutureRoadDvmt}\label{vestate-calculatefutureroaddvmt}}

This module calculates future year roadway DVMT by vehicle type (light-duty, heavy truck, bus) and the distribution of roadway DVMT by vehicle type to roadway classes (freeway, arterial, other)
This module uses optional user inputs if \protect\hyperlink{vestate-initialize-vetravelperformance}{Initialize} module is run. Otherwise, it uses default data in \href{https://github.com/visioneval/VisionEval/tree/develop/sources/modules/VETravelPerformance/inst/extdata}{inst\extdata folder}

\hypertarget{user-input-files-68}{%
\subsubsection{User Input Files}\label{user-input-files-68}}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\item
  Base year highway truck DVMT for region (\protect\hyperlink{vestate-region_base_year_hvytrk_dvmt.csv}{region\_base\_year\_hvytrk\_dvmt.csv})
\item
  Base year DVMT for Marea (\protect\hyperlink{vestate-marea_base_year_dvmt.csv}{marea\_base\_year\_dvmt.csv})
\end{enumerate}

\hypertarget{internal-module-inputs-66}{%
\subsubsection{Internal Module Inputs}\label{internal-module-inputs-66}}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1724}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.3362}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1207}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.3707}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Package
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Module
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Outputs
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule()
\endhead
VETravelPerformance & \protect\hyperlink{vestate-calculatebaseroaddvmt}{CalculateBaseRoadDvmt} & \textbf{HvyTrkDvmtIncomeFactor} & Ratio of Region base year heavy truck DVMT to household income \\
vetravelperformance & \protect\hyperlink{vestate-calculatebaseroaddvmt}{CalculateBaseRoadDvmt} & \textbf{HvyTrkDvmtUrbanProp} & proportion of region heavy truck daily vehicle miles of travel occurring on urbanized area roadways \\
VETravelPerformance & \protect\hyperlink{vestate-calculatebaseroaddvmt}{CalculateBaseRoadDvmt} & \textbf{HvyTrkDvmtPopulationFactor} & Ratio of Region base year heavy truck DVMT to population \\
VETravelPerformance & \protect\hyperlink{vestate-calculatebaseroaddvmt}{CalculateBaseRoadDvmt} & \textbf{LdvFwyArtDvmtProp} & Proportion of light-duty daily vehicle miles of travel in the urbanized portion of the Marea occurring on freeway or arterial roadways \\
VETravelPerformance & \protect\hyperlink{vestate-calculatebaseroaddvmt}{CalculateBaseRoadDvmt} & \textbf{LdvOthDvmtProp} & Proportion of light-duty daily vehicle miles of travel in the urbanized portion of the Marea occurring on other roadways \\
VETravelPerformance & \protect\hyperlink{vestate-calculatebaseroaddvmt}{CalculateBaseRoadDvmt} & \textbf{HvyTrkFwyDvmtProp} & Proportion of heavy truck daily vehicle miles of travel in the urbanized portion of the Marea occurring on freeways \\
VETravelPerformance & \protect\hyperlink{vestate-calculatebaseroaddvmt}{CalculateBaseRoadDvmt} & \textbf{LdvOthDvmtProp} & Proportion of heavy truck daily vehicle miles of travel in the urbanized portion of the Marea occurring on freeways \\
VETravelPerformance & \protect\hyperlink{vestate-calculatebaseroaddvmt}{CalculateBaseRoadDvmt} & \textbf{HvyTrkFwyDvmtProp} & Proportion of heavy truck daily vehicle miles of travel in the urbanized portion of the Marea occurring on arterial roadways \\
VETravelPerformance & \protect\hyperlink{vestate-calculatebaseroaddvmt}{CalculateBaseRoadDvmt} & \textbf{HvyTrkArtDvmtProp} & Proportion of heavy truck daily vehicle miles of travel in the urbanized portion of the Marea occurring on arterial roadways \\
VETravelPerformance & \protect\hyperlink{vestate-calculatebaseroaddvmt}{CalculateBaseRoadDvmt} & \textbf{HvyTrkOthDvmtProp} & Proportion of heavy truck daily vehicle miles of travel in the urbanized portion of the Marea occurring on other roadways \\
VETravelPerformance & \protect\hyperlink{vestate-calculatebaseroaddvmt}{CalculateBaseRoadDvmt} & \textbf{BusFwyDvmtProp} & Proportion of bus daily vehicle miles of travel in the urbanized portion of the Marea occurring on freeways \\
VETravelPerformance & \protect\hyperlink{vestate-calculatebaseroaddvmt}{CalculateBaseRoadDvmt} & \textbf{BusArtDvmtProp} & Proportion of bus daily vehicle miles of travel in the urbanized portion of the Marea occurring on arterial roadways \\
VETravelPerformance & \protect\hyperlink{vestate-calculatebaseroaddvmt}{CalculateBaseRoadDvmt} & \textbf{BusOthDvmtProp} & Proportion of bus daily vehicle miles of travel in the urbanized portion of the Marea occuring on other roadways \\
VETravelPerformance & \protect\hyperlink{vestate-calculatebaseroaddvmt}{CalculateBaseRoadDvmt} & \textbf{ComSvcDvmtHhDvmtFactor} & Ratio of Marea base year commercial service DVMT to household DVMT \\
VETravelPerformance & \protect\hyperlink{vestate-calculatebaseroaddvmt}{CalculateBaseRoadDvmt} & \textbf{ComSvcDvmtIncomeFactor} & Ratio of base year commercial service vehicle DVMT to household income \\
VELandUse & \protect\hyperlink{vestate-calculatebaseroaddvmt}{CalculateBaseRoadDvmt} & \textbf{ComSvcDvmtPopulationFactor} & Ratio of base year commercial service vehicle DVMT to population \\
VELandUse & \protect\hyperlink{vestate-calculatebaseroaddvmt}{CalculateBaseRoadDvmt} & \textbf{HvyTrkDvmtPopulationFactor} & Ratio of base year heavy truck DVMT to population \\
VELandUse & \href{calculatebaseroaddvmt}{CalculateBaseRoadDvmt} & \textbf{LdvRoadDvmtLdvDemandRatio} & Ratio between light-duty vehicle (LDV) daily vehicle miles of travel (DVMT) on urbanized area roadways in the Marea to the total LDV DVMT of households residing in the urbanized area, the commercial service vehicle travel related to household demand, and LDV public transit DVMT \\
VETransportSupply & \protect\hyperlink{assigntransitservice}{AssignTransitService} & \textbf{VanDvmt} & Total daily miles traveled by vans of various sizes to provide demand responsive, vanpool, and similar services \\
VETransportSupply & \protect\hyperlink{assigntransitservice}{AssignTransitService} & \textbf{BusDvmt} & Total daily miles traveled by buses of various sizes to provide bus service of various types \\
VELandUse & \protect\hyperlink{assignloctypes}{AssignLocTypes} & \textbf{UrbanPop} & Urbanized area population \\
VELandUse & \protect\hyperlink{assignloctypes}{AssignLocTypes} & \textbf{RuralPop} & Rural (i.e.~non-urbanized area) population \\
VELandUse & \href{assignloctypes}{AssignLocTypes} & \textbf{RuralIncome} & Total household income of the rural (i.e.~non-urbanized area) population \\
VELandUse & \protect\hyperlink{assignloctypes}{AssignLocTypes} & \textbf{UrbanIncome} & Total household income of the rural (i.e.~non-urbanized area) population \\
VEHouseholdTravel & \protect\hyperlink{vestate-calculatehouseholddvmt}{CalculateHouseholdDvmt} & \textbf{UrbanHhDvmt} & Average daily vehicle miles traveled in autos or light trucks by households residing in the urbanized portion of the Marea \\
VEHouseholdTravel & \protect\hyperlink{vestate-calculatehouseholddvmt}{CalculateHouseholdDvmt} & \textbf{RuralHhDvmt} & Average daily vehicle miles traveled in autos or light trucks by households residing in the rural (non-urban) portion of the Marea \\
\bottomrule()
\end{longtable}

\hypertarget{module-outputs-68}{%
\subsubsection{Module Outputs}\label{module-outputs-68}}

\begin{itemize}
\tightlist
\item
  \textbf{HvyTrkUrbanDvmt}: Base year Region heavy truck daily vehicle miles of travel in urbanized areas
\item
  \textbf{HvyTrkRuralDvmt}: Base year Region heavy truck daily vehicle miles of travel in rural (i.e.~non-urbanized) areas
\item
  \textbf{ComSvcUrbanDvmt}: Commercial service daily vehicle miles of travel associated with Marea urbanized household activity
\item
  \textbf{ComSvcRuralDvmt}: Commercial service daily vehicle miles of travel associated with Marea rural household activity
\item
  \textbf{LdvFwyArtDvmt}: Light-duty daily vehicle miles of travel in the urbanized portion of the Marea occurring on freeway or arterial roadways
\item
  \textbf{LdvOthDvmt}: Light-duty daily vehicle miles of travel in the urbanized portion of the Marea occurring on other roadways
\item
  \textbf{HvyTrkFwyDvmt}: Heavy truck daily vehicle miles of travel in the urbanized portion of the Marea occurring on freeways
\item
  \textbf{HvyTrkArtDvmt}:Heavy truck daily vehicle miles of travel in the urbanized portion of the Marea occurring on arterial roadways
\item
  \textbf{HvyTrkOthDvmt}: Heavy truck daily vehicle miles of travel in the urbanized portion of the Marea occurring on other roadways
\item
  \textbf{BusFwyDvmt}: Bus daily vehicle miles of travel in the urbanized portion of the Marea occurring on freeways
\item
  \textbf{BusArtDvmt}: Bus daily vehicle miles of travel in the urbanized portion of the Marea occurring on arterial roadways
\item
  \textbf{BusOthDvmt}: Bus daily vehicle miles of travel in the urbanized portion of the Marea occuring on other roadways
\end{itemize}

\hypertarget{vestate-calculateroadperformance}{%
\subsection{CalculateRoadPerformance}\label{vestate-calculateroadperformance}}

This module splits light-duty vehicle (LDV) daily vehicle miles of travel DVHT between freeways and arterials as a function of relative speeds and congestion prices. Speeds and prices are combined to calculate an average `effective' speed for freeways and for arterials. The ratio of freeway and arterial `effective' speeds and a split factor calculated for the metropolitan area are used to split the LDV DVMT. Iteration is used to find an equilibrium split value. In addition to the LDV freeway DVMT and arterial DVMT, the following performance measures are saved to the datastore:

\begin{itemize}
\tightlist
\item
  Average freeway speed by congestion level;
\item
  Average arterial speed by congestion level;
\item
  Average freeway delay by congestion level;
\item
  Average arterial delay by congestion level;
\item
  Freeway DVMT proportions by congestion level;
\item
  Arterial DVMT proportions by congestion level;
\item
  Average amount paid per mile in congestion pricing fees; and,
\item
  Vehicle hours of delay by vehicle type.
\end{itemize}

\hypertarget{user-input-files-69}{%
\subsubsection{User Input Files}\label{user-input-files-69}}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\item
  Operations deployment effects on dvmt for Marea (\protect\hyperlink{vestate-marea_operations_deployment.csv}{marea\_operations\_deployment.csv})
\item
  Other operations effects (\protect\hyperlink{vestate-other_ops_effectiveness.csv}{other\_ops\_effectiveness.csv})
\item
  Charges by congestion levels by road class (\protect\hyperlink{vestate-marea_congestion_charges.csv}{marea\_congestion\_charges.csv})
\end{enumerate}

\hypertarget{user-input-parameters-2}{%
\subsubsection{User Input Parameters}\label{user-input-parameters-2}}

\textbf{Value of time (valueoftime)} : This parameter set the value of time (base cost year dollars per hour). It should be defined in \protect\hyperlink{model_parameters.json-1}{model\_parameters.json}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{\{}\DataTypeTok{"NAME"}\FunctionTok{:} \StringTok{"ValueOfTime"}\FunctionTok{,} 
\DataTypeTok{"VALUE"}\FunctionTok{:} \StringTok{"16"}\FunctionTok{,} 
\DataTypeTok{"TYPE"}\FunctionTok{:} \StringTok{"double"}\FunctionTok{,} 
\DataTypeTok{"UNITS"}\FunctionTok{:} \StringTok{"base cost year dollars per hour"}
\FunctionTok{\}}
\end{Highlighting}
\end{Shaded}

\hypertarget{internal-module-inputs-67}{%
\subsubsection{Internal Module Inputs}\label{internal-module-inputs-67}}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1724}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.3362}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1207}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.3707}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Package
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Module
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Outputs
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule()
\endhead
VELandUse & \protect\hyperlink{assignloctypes}{AssignLocTypes} & \textbf{UrbanPop} & Urbanized area population \\
VETransportSupply & \protect\hyperlink{assignroadmiles}{AssignRoadMiles} & \textbf{FwyLaneMi} & Lane-miles of roadways functionally classified as freeways or expressways in the urbanized portion of the metropolitan area \\
VETravelPerformance & \protect\hyperlink{vestate-calculatebaseroaddvmt}{CalculateBaseRoadDvmt} & \textbf{LdvFwyArtDvmt} & Light-duty daily vehicle miles of travel in the urbanized portion of the Marea occurring on freeway or arterial roadways \\
VETravelPerformance & \protect\hyperlink{vestate-calculatebaseroaddvmt}{CalculateBaseRoadDvmt} & \textbf{LdvOthDvmt} & Light-duty daily vehicle miles of travel in the urbanized portion of the Marea occurring on freeway or arterial roadways \\
VETravelPerformance & \protect\hyperlink{vestate-calculatebaseroaddvmt}{CalculateBaseRoadDvmt} & \textbf{HvyTrkFwyDvmt} & Heavy truck daily vehicle miles of travel in the urbanized portion of the Marea occurring on freeways \\
VETravelPerformance & \protect\hyperlink{vestate-calculatebaseroaddvmt}{CalculateBaseRoadDvmt} & \textbf{HvyTrkArtDvmt} & Heavy truck daily vehicle miles of travel in the urbanized portion of the Marea occurring on arterial roadways \\
VETravelPerformance & \protect\hyperlink{vestate-calculatebaseroaddvmt}{CalculateBaseRoadDvmt} & \textbf{HvyTrkOthDvmt} & Light-duty daily vehicle miles of travel in the urbanized portion of the Marea occurring on other roadways \\
VETravelPerformance & \protect\hyperlink{vestate-calculatebaseroaddvmt}{CalculateBaseRoadDvmt} & \textbf{BusFwyDvmt} & Bus daily vehicle miles of travel in the urbanized portion of the Marea occurring on freeways \\
VETravelPerformance & \protect\hyperlink{vestate-calculatebaseroaddvmt}{CalculateBaseRoadDvmt} & \textbf{BusArtDvmt} & Bus daily vehicle miles of travel in the urbanized portion of the Marea occurring on arterial roadways \\
VETravelPerformance & \protect\hyperlink{vestate-calculatebaseroaddvmt}{CalculateBaseRoadDvmt} & \textbf{BusOthDvmt} & Bus daily vehicle miles of travel in the urbanized portion of the Marea occuring on other roadways \\
VELandUse & \protect\hyperlink{calculate4dmeasures}{Calculate4DMeasures} & \textbf{UrbanArea} & Area that is Urban and unprotected (i.e.~developable) within the zone \\
\bottomrule()
\end{longtable}

\hypertarget{module-outputs-69}{%
\subsubsection{Module Outputs}\label{module-outputs-69}}

\begin{itemize}
\tightlist
\item
  \textbf{LdvFwyDvmt}: Light-duty daily vehicle miles of travel in the urbanized portion of the Marea occurring on freeways
\item
  \textbf{LdvArtDvmt}: Light-duty daily vehicle miles of travel in the urbanized portion of the Marea occurring on arterial roadways
\item
  \textbf{FwyNoneCongSpeed}: Average freeway speed (miles per hour) when there is no congestion
\item
  \textbf{FwyModCongSpeed}: Average freeway speed (miles per hour) when congestion is moderate
\item
  \textbf{FwyHvyCongSpeed}: Average freeway speed (miles per hour) when congestion is heavy
\item
  \textbf{FwySevCongSpeed}: Average freeway speed (miles per hour) when congestion is severe
\item
  \textbf{FwyExtCongSpeed}: Average freeway speed (miles per hour) when congestion is extreme
\item
  \textbf{ArtNoneCongSpeed}: Average arterial speed (miles per hour) when there is no congestion
\item
  \textbf{ArtModCongSpeed}: Average arterial speed (miles per hour) when congestion is moderate
\item
  \textbf{ArtHvyCongSpeed}: Average arterial speed (miles per hour) when congestion is heavy
\item
  \textbf{ArtSevCongSpeed}: Average arterial speed (miles per hour) when congestion is severe
\item
  \textbf{ArtExtCongSpeed}: Average arterial speed (miles per hour) when congestion is extreme
\item
  \textbf{OthSpd}: Average speed (miles per hour) on other roadways
\item
  \textbf{LdvAveSpeed}: Average light-duty vehicle speed (miles per hour) on all roadways weighted by the proportions of light-duty vehicle travel
\item
  \textbf{FwyNoneCongDelay}: Average freeway delay (hours per mile) occurring when there is no congestion
\item
  \textbf{FwyModCongDelay}: Average freeway delay (hours per mile) occurring when congestion is moderate
\item
  \textbf{FwyHvyCongDelay}: Average freeway delay (hours per mile) occurring when congestion is heavy
\item
  \textbf{FwySevCongDelay}: Average freeway delay (hours per mile) occurring when congestion is severe
\item
  \textbf{FwyExtCongDelay}: Average freeway delay (hours per mile) occurring when congestion is extreme
\item
  \textbf{ArtNoneCongDelay}: Average arterial delay (hours per mile) occurring when there is no congestion
\item
  \textbf{ArtModCongDelay}: Average arterial delay (hours per mile) occurring when congestion is moderate
\item
  \textbf{ArtHvyCongDelay}: Average arterial delay (hours per mile) occurring when congestion is heavy
\item
  \textbf{ArtSevCongDelay}: Average arterial delay (hours per mile) occurring when congestion is severe
\item
  \textbf{ArtExtCongDelay}: Average arterial delay (hours per mile) occurring when congestion is extreme
\item
  \textbf{FwyDvmtPropNoneCong}: Proportion of freeway DVMT occurring when there is no congestion
\item
  \textbf{FwyDvmtPropModCong}: Proportion of freeway DVMT occurring when congestion is moderate
\item
  \textbf{FwyDvmtPropHvyCong}: Proportion of freeway DVMT occurring when congestion is heavy
\item
  \textbf{FwyDvmtPropSevCong}: Proportion of freeway DVMT occurring when congestion is severe
\item
  \textbf{FwyDvmtPropExtCong}: Proportion of freeway DVMT occurring when congestion is extreme
\item
  \textbf{ArtDvmtPropNoneCong}: Proportion of arterial DVMT occurring when there is no congestion
\item
  \textbf{ArtDvmtPropModCong}: Proportion of arterial DVMT occurring when congestion is moderate
\item
  \textbf{ArtDvmtPropHvyCong}: Proportion of arterial DVMT occurring when congestion is heavy
\item
  \textbf{ArtDvmtPropSevCong}: Proportion of arterial DVMT occurring when congestion is severe
\item
  \textbf{ArtDvmtPropExtCong}: Proportion of arterial DVMT occurring when congestion is extreme
\item
  \textbf{AveCongPrice}: Average price paid (dollars per mile) in congestion fees
\end{itemize}

For more information see \href{https://github.com/visioneval/VisionEval/blob/master/sources/modules/VETravelPerformance/inst/module_docs/CalculateRoadPerformance.md}{here}

\hypertarget{vestate-calculatempgmpkwhadjustments}{%
\subsection{CalculateMpgMpkwhAdjustments}\label{vestate-calculatempgmpkwhadjustments}}

This module calculates adjustments to fuel economy and electric energy economy for plug-in vehicles) resulting from traffic congestion, speed smoothing(i.e.~active traffic management which reduces speed variation), and ecodriving practices.

\hypertarget{user-input-files-70}{%
\subsubsection{User Input Files}\label{user-input-files-70}}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  Speed smoothing and eco-driving (\protect\hyperlink{vestate-marea_speed_smooth_ecodrive.csv}{marea\_speed\_smooth\_ecodrive.csv})
\end{enumerate}

\hypertarget{internal-module-inputs-68}{%
\subsubsection{Internal Module Inputs}\label{internal-module-inputs-68}}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1724}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.3362}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1207}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.3707}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Package
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Module
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Outputs
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule()
\endhead
VETravelPerformance & \protect\hyperlink{vestate-calculateroadperformance}{CalculateRoadPerformance} & \textbf{LdvFwyDvmt} & Light-duty daily vehicle miles of travel in the urbanized portion of the Marea occurring on freeways \\
VETravelPerformance & \protect\hyperlink{vestate-calculateroadperformance}{CalculateRoadPerformance} & \textbf{LdvArtDvmt} & Light-duty daily vehicle miles of travel in the urbanized portion of the Marea occurring on arterial roadways \\
VETravelPerformance & \protect\hyperlink{vestate-calculatebaseroaddvmt}{CalculateBaseRoadDvmt} & \textbf{LdvOthDvmt} & Light-duty daily vehicle miles of travel in the urbanized portion of the Marea occurring on freeway or arterial roadways \\
VETravelPerformance & \protect\hyperlink{vestate-calculatebaseroaddvmt}{CalculateBaseRoadDvmt} & \textbf{HvyTrkFwyDvmt} & Heavy truck daily vehicle miles of travel in the urbanized portion of the Marea occurring on freeways \\
VETravelPerformance & \protect\hyperlink{vestate-calculatebaseroaddvmt}{CalculateBaseRoadDvmt} & \textbf{HvyTrkArtDvmt} & Heavy truck daily vehicle miles of travel in the urbanized portion of the Marea occurring on arterial roadways \\
VETravelPerformance & \protect\hyperlink{vestate-calculatebaseroaddvmt}{CalculateBaseRoadDvmt} & \textbf{HvyTrkOthDvmt} & Light-duty daily vehicle miles of travel in the urbanized portion of the Marea occurring on other roadways \\
VETravelPerformance & \protect\hyperlink{vestate-calculatebaseroaddvmt}{CalculateBaseRoadDvmt} & \textbf{BusFwyDvmt} & Bus daily vehicle miles of travel in the urbanized portion of the Marea occurring on freeways \\
VETravelPerformance & \protect\hyperlink{vestate-calculatebaseroaddvmt}{CalculateBaseRoadDvmt} & \textbf{BusArtDvmt} & Bus daily vehicle miles of travel in the urbanized portion of the Marea occurring on arterial roadways \\
VETravelPerformance & \protect\hyperlink{vestate-calculatebaseroaddvmt}{CalculateBaseRoadDvmt} & \textbf{BusOthDvmt} & Bus daily vehicle miles of travel in the urbanized portion of the Marea occuring on other roadways \\
VETravelPerformance & \protect\hyperlink{vestate-calculateroadperformance}{CalculateRoadPerformance} & \textbf{FwyNoneCongSpeed} & Average freeway speed (miles per hour) when there is no congestion \\
VETravelPerformance & \protect\hyperlink{vestate-calculateroadperformance}{CalculateRoadPerformance} & \textbf{FwyModCongSpeed} & Light-duty daily vehicle miles of travel in the urbanized portion of the Marea occurring on arterial roadways \\
VETravelPerformance & \protect\hyperlink{vestate-calculateroadperformance}{CalculateRoadPerformance} & \textbf{FwyHvyCongSpeed} & Average freeway speed (miles per hour) when congestion is heavy \\
VETravelPerformance & \protect\hyperlink{vestate-calculateroadperformance}{CalculateRoadPerformance} & \textbf{FwySevCongSpeed} & Average freeway speed (miles per hour) when congestion is severe \\
VETravelPerformance & \protect\hyperlink{vestate-calculateroadperformance}{CalculateRoadPerformance} & \textbf{FwyExtCongSpeed} & Light-duty daily vehicle miles of travel in the urbanized portion of the Marea occurring on other roadways \\
VETravelPerformance & \protect\hyperlink{vestate-calculateroadperformance}{CalculateRoadPerformance} & \textbf{BusFwyDvmt} & Bus daily vehicle miles of travel in the urbanized portion of the Marea occurring on freeways \\
VETravelPerformance & \protect\hyperlink{vestate-calculateroadperformance}{CalculateRoadPerformance} & \textbf{BusArtDvmt} & Bus daily vehicle miles of travel in the urbanized portion of the Marea occurring on arterial roadways \\
VETravelPerformance & \protect\hyperlink{vestate-calculateroadperformance}{CalculateRoadPerformance} & \textbf{BusOthDvmt} & Bus daily vehicle miles of travel in the urbanized portion of the Marea occuring on other roadways \\
VETravelPerformance & \protect\hyperlink{vestate-calculateroadperformance}{CalculateRoadPerformance} & \textbf{FwyDvmtPropNoneCong} & Proportion of freeway DVMT occurring when there is no congestion \\
VETravelPerformance & \protect\hyperlink{vestate-calculateroadperformance}{CalculateRoadPerformance} & \textbf{FwyDvmtPropModCong} & Proportion of freeway DVMT occurring when congestion is moderate \\
VETravelPerformance & \protect\hyperlink{vestate-calculateroadperformance}{CalculateRoadPerformance} & \textbf{FwyDvmtPropHvyCong} & Proportion of freeway DVMT occurring when congestion is heavy \\
VETravelPerformance & \protect\hyperlink{vestate-calculateroadperformance}{CalculateRoadPerformance} & \textbf{FwyDvmtPropSevCong} & Proportion of freeway DVMT occurring when congestion is severe \\
VETravelPerformance & \protect\hyperlink{vestate-calculateroadperformance}{CalculateRoadPerformance} & \textbf{FwyDvmtPropExtCong} & Proportion of freeway DVMT occurring when congestion is extreme \\
VETravelPerformance & \protect\hyperlink{vestate-calculateroadperformance}{CalculateRoadPerformance} & \textbf{ArtDvmtPropNoneCong} & Proportion of arterial DVMT occurring when there is no congestion \\
VETravelPerformance & \protect\hyperlink{vestate-calculateroadperformance}{CalculateRoadPerformance} & \textbf{ArtDvmtPropModCong} & Proportion of arterial DVMT occurring when congestion is moderate \\
VETravelPerformance & \protect\hyperlink{vestate-calculateroadperformance}{CalculateRoadPerformance} & \textbf{ArtDvmtPropHvyCong} & Proportion of arterial DVMT occurring when congestion is heavy \\
VETravelPerformance & \protect\hyperlink{vestate-calculateroadperformance}{CalculateRoadPerformance} & \textbf{ArtDvmtPropSevCong} & Proportion of arterial DVMT occurring when congestion is severe \\
VETravelPerformance & \protect\hyperlink{vestate-calculateroadperformance}{CalculateRoadPerformance} & \textbf{ArtDvmtPropExtCong} & Proportion of arterial DVMT occurring when congestion is extereme \\
\bottomrule()
\end{longtable}

\hypertarget{module-outputs-70}{%
\subsubsection{Module Outputs}\label{module-outputs-70}}

\begin{itemize}
\tightlist
\item
  \textbf{LdvSpdSmoothFactor}: Proportional adjustment of light-duty internal combustion engine (ICE) vehicle MPG due to speed smoothing
\item
  \textbf{HvyTrkSpdSmoothFactor}: Proportional adjustment of heavy truck internal combustion engine (ICE) vehicle MPG due to speed smoothing
\item
  \textbf{BusSpdSmoothFactor}: Proportional adjustment of bus internal combustion engine (ICE) vehicle MPG due to speed smoothing
\item
  \textbf{LdvEcoDriveFactor}: Proportional adjustment of light-duty internal combustion engine (ICE) vehicle MPG due to eco-driving
\item
  \textbf{HvyTrkEcoDriveFactor}: Proportional adjustment of heavy truck internal combustion engine (ICE) vehicle MPG due to eco-driving
\item
  \textbf{BusEcoDriveFactor}: Proportional adjustment of bus internal combustion engine (ICE) vehicle MPG due to eco-driving
\item
  \textbf{LdIceFactor}: Proportional adjustment of light-duty internal combustion engine (ICE) vehicle MPG due to congestion
\item
  \textbf{LdHevFactor}: Proportional adjustment of light-duty hybrid-electric vehicle (HEV) MPG due to congestion
\item
  \textbf{LdEvFactor}: Proportional adjustment of light-duty battery electric vehicle (EV) MPkWh due to congestion
\item
  \textbf{LdFcvFactor}: Proportional adjustment of light-duty fuel cell vehicle (FCV) MPkWh due to congestion
\item
  \textbf{HdIceFactor}: Proportional adjustment of heavy-duty internal combustion engine (ICE) vehicle MPG due to congestion
\end{itemize}

\hypertarget{vestate-adjusthhvehiclempgmpkwh}{%
\subsection{AdjustHhVehicleMpgMpkwh}\label{vestate-adjusthhvehiclempgmpkwh}}

This module adjusts the fuel economy and power efficiency of household vehicles to reflect roadway congestion.

\hypertarget{user-input-files-71}{%
\subsubsection{User Input Files}\label{user-input-files-71}}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  Car service vehicle powertrain proportions by vehicle type for the model region (\protect\hyperlink{vestate-region_carsvc_powertrain_prop.csvux5cux255D}{region\_carsvc\_powertrain\_prop.csv})
\end{enumerate}

\hypertarget{internal-module-inputs-69}{%
\subsubsection{Internal Module Inputs}\label{internal-module-inputs-69}}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1724}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.3362}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1207}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.3707}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Package
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Module
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Outputs
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule()
\endhead
VETravelPerformance & \protect\hyperlink{vestate-calculatempgmpkwhadjustments}{CalculateMpgMpkwhAdjustments} & \textbf{LdvEcoDrive} & Eco-driving penetration for light-duty vehicles; the fraction of vehicles from 0 to 1 \\
VETravelPerformance & \protect\hyperlink{vestate-calculatempgmpkwhadjustments}{CalculateMpgMpkwhAdjustments} & \textbf{LdvSpdSmoothFactor} & Proportional adjustment of light-duty internal combustion engine (ICE) vehicle MPG due to speed smoothing \\
VETravelPerformance & \protect\hyperlink{vestate-calculatempgmpkwhadjustments}{CalculateMpgMpkwhAdjustments} & \textbf{LdvEcoDriveFactor} & Proportional adjustment of light-duty internal combustion engine (ICE) vehicle MPG due to eco-driving \\
VETravelPerformance & \protect\hyperlink{vestate-calculatempgmpkwhadjustments}{CalculateMpgMpkwhAdjustments} & \textbf{LdIceFactor} & Proportional adjustment of light-duty internal combustion engine (ICE) vehicle MPG due to congestion \\
VETravelPerformance & \protect\hyperlink{vestate-calculatempgmpkwhadjustments}{CalculateMpgMpkwhAdjustments} & \textbf{LdHevFactor} & Proportional adjustment of light-duty hybrid-electric vehicle (HEV) MPG due to congestion \\
VETravelPerformance & \protect\hyperlink{vestate-calculatempgmpkwhadjustments}{CalculateMpgMpkwhAdjustments} & \textbf{LdFcvFactor} & Proportional adjustment of light-duty fuel cell vehicle (FCV) MPkWh due to congestion \\
VESimHouseholds & \protect\hyperlink{vestate-createhouseholds}{CreateHouseholds} & \textbf{HhId} & Household id \\
VELandUse & \protect\hyperlink{assignloctypes}{AssignLocTypes} & \textbf{LocType} & Location type (Urban, Town, Rural) of the place where the household resides \\
VEHouseholdVehicles & \protect\hyperlink{vestate-assignvehicleownership}{AssignVehicleOwnership} & \textbf{Vehicles} & Number of automobiles and light trucks owned or leased by the household including high level car service vehicles available to driving-age persons \\
VEHouseholdVehicles & \protect\hyperlink{vestate-assignvehicletype}{AssignVehicleType} & \textbf{NumLtTrk} & Number of light trucks (pickup, sport-utility vehicle, and van) owned or leased by household \\
VEHouseholdVehicles & \protect\hyperlink{vestate-assignvehicletype}{AssignVehicleType} & \textbf{NumAuto} & Number of automobiles (i.e.~4-tire passenger vehicles that are not light trucks) owned or leased by household \\
VEHouseholdTravel & \protect\hyperlink{vestate-calculatehouseholddvmt}{CalculateHouseholdDvmt} & \textbf{Dvmt} & Average daily vehicle miles traveled by the household in autos or light trucks \\
VEHouseholdVehicles & \protect\hyperlink{vestate-assignvehicleage}{AssignVehicleAge} & \textbf{Type} & Vehicle body type: Auto = automobile, LtTrk = light trucks (i.e.~pickup, SUV, Van) \\
VEPowertrainsAndFuels & \protect\hyperlink{vestate-assignhhvehiclepowertrain}{AssignHhVehiclePowertrain} & \textbf{Powertrain} & Vehicle powertrain type: ICEV = internal combustion engine vehicle, HEV = hybrid electric vehicle, PHEV = plug-in hybrid electric vehicle, BEV = battery electric vehicle, NA = not applicable because is a car service vehicle \\
VEHouseholdVehicles & \protect\hyperlink{vestate-createvehicletable}{CreateVehicleTable} & \textbf{VehicleAccess} & Identifier whether vehicle is owned by household (Own), if vehicle is low level car service (LowCarSvc), or if vehicle is high level car service (HighCarSvc) \\
VEPowertrainsAndFuels & \protect\hyperlink{vestate-assignhhvehiclepowertrain}{AssignHhVehiclePowertrain} & \textbf{MPG} & Average miles of vehicle travel powered by fuel per gasoline equivalent gallon \\
VEPowertrainsAndFuels & \protect\hyperlink{vestate-assignhhvehiclepowertrain}{AssignHhVehiclePowertrain} & \textbf{GPM} & Average gasoline equivalent gallons per mile of vehicle travel powered by fuel \\
VEPowertrainsAndFuels & \protect\hyperlink{vestate-assignhhvehiclepowertrain}{AssignHhVehiclePowertrain} & \textbf{MPKWH} & Average miles of vehicle travel powered by electricity per kilowatt-hour \\
VEPowertrainsAndFuels & \protect\hyperlink{vestate-assignhhvehiclepowertrain}{AssignHhVehiclePowertrain} & \textbf{KWHPM} & Average kilowatt-hours per mile of vehicle travel powered by electricity \\
VEPowertrainsAndFuels & \protect\hyperlink{vestate-assignhhvehiclepowertrain}{AssignHhVehiclePowertrain} & \textbf{MPGe} & Average miles of vehicle travel per gasoline equivalent gallon (fuel and electric powered) \\
VEPowertrainsAndFuels & \protect\hyperlink{vestate-assignhhvehiclepowertrain}{AssignHhVehiclePowertrain} & \textbf{ElecDvmtProp} & Average miles of vehicle travel per gasoline equivalent gallon (fuel and electric powered) \\
VEPowertrainsAndFuels & \protect\hyperlink{vestate-assignhhvehiclepowertrain}{AssignHhVehiclePowertrain} & \textbf{FuelCO2ePM} & Average grams of carbon-dioxide equivalents produced per mile of travel powered by fuel \\
VEPowertrainsAndFuels & \protect\hyperlink{vestate-assignhhvehiclepowertrain}{AssignHhVehiclePowertrain} & \textbf{ElecCO2ePM} & Average grams of carbon-dioxide equivalents produced per mile of travel powered by electricity \\
\bottomrule()
\end{longtable}

\hypertarget{module-outputs-71}{%
\subsubsection{Module Outputs}\label{module-outputs-71}}

\begin{itemize}
\tightlist
\item
  \textbf{MPG}: Average miles of vehicle travel powered by fuel per gasoline equivalent gallon
\item
  \textbf{GPM}: Average gasoline equivalent gallons per mile of vehicle travel powered by fuel
\item
  \textbf{MPKWH}: Average miles of vehicle travel powered by electricity per kilowatt-hour
\item
  \textbf{KWHPM}: Average kilowatt-hours per mile of vehicle travel powered by electricity
\item
  \textbf{MPGe}: Average miles of vehicle travel per gasoline equivalent gallon (fuel and electric powered)
\item
  \textbf{ElecDvmtProp}: Average miles of vehicle travel per gasoline equivalent gallon (fuel and electric powered)
\item
  \textbf{FuelCO2ePM}: Average grams of carbon-dioxide equivalents produced per mile of travel powered by fuel
\item
  \textbf{IsEcoDrive}: Flag identifying whether drivers in household are eco-drivers
\end{itemize}

\hypertarget{vestate-calculatevehicleoperatingcost}{%
\subsection{CalculateVehicleOperatingCost}\label{vestate-calculatevehicleoperatingcost}}

This module calculates vehicle operating costs per mile of travel and uses those costs to determine the proportional split of DVMT among household vehicles. The module also calculates the average out-of-pocket costs per mile of vehicle by household, as well as the cost of social and environmental impacts, and road use taxes per mile of vehicle travel.

\hypertarget{user-input-files-72}{%
\subsubsection{User Input Files}\label{user-input-files-72}}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\item
  Vehicle access times (\protect\hyperlink{vestate-azone_vehicle_access_times.csv}{azone\_vehicle\_access\_times.csv})
\item
  Fuel and electricity costs for household vehicles (\protect\hyperlink{vestate-azone_fuel_power_cost.csv}{azone\_fuel\_power\_cost.csv}
\item
  Vehicle operating taxes for households (\protect\hyperlink{vestate-azone_veh_use_taxes.csv}{azone\_veh\_use\_taxes.csv}
\item
  Proportional external costs for the region (\protect\hyperlink{vestate-region_prop_externalities_paid.csv}{region\_prop\_externalities\_paid.csv}
\end{enumerate}

\hypertarget{user-input-parameters-3}{%
\subsubsection{User Input Parameters}\label{user-input-parameters-3}}

\textbf{Value of time (valueoftime)} : This parameter set the value of time (base cost year dollars per hour). It should be defined in \protect\hyperlink{model_parameters.json-1}{model\_parameters.json}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{\{}\DataTypeTok{"NAME"}\FunctionTok{:} \StringTok{"ValueOfTime"}\FunctionTok{,} 
\DataTypeTok{"VALUE"}\FunctionTok{:} \StringTok{"16"}\FunctionTok{,} 
\DataTypeTok{"TYPE"}\FunctionTok{:} \StringTok{"double"}\FunctionTok{,} 
\DataTypeTok{"UNITS"}\FunctionTok{:} \StringTok{"base cost year dollars per hour"}
\FunctionTok{\}}
\end{Highlighting}
\end{Shaded}

\hypertarget{internal-module-inputs-70}{%
\subsubsection{Internal Module Inputs}\label{internal-module-inputs-70}}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1724}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.3362}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1207}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.3707}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Package
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Module
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Outputs
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule()
\endhead
VETravelPerformance & \protect\hyperlink{vestate-calculateroadperformance}{CalculateRoadPerformance} & \textbf{LdvAveSpeed} & Average light-duty vehicle speed (miles per hour) on all roadways weighted by the proportions of light-duty vehicle travel \\
VETravelPerformance & \protect\hyperlink{vestate-calculateroadperformance}{CalculateRoadPerformance} & \textbf{AveCongPrice} & Average price paid (dollars per mile) in congestion fees \\
VEHouseholdVehicles & \protect\hyperlink{vestate-createvehicletable}{CreateVehicleTable} & \textbf{HighCarSvcCost} & Average cost in dollars per mile for travel by high service level car service \\
VEHouseholdVehicles & \protect\hyperlink{vestate-createvehicletable}{CreateVehicleTable} & \textbf{LowCarSvcCost} & Average cost in dollars per mile for travel by low service level car service \\
VESimHouseholds & \protect\hyperlink{vestate-createhouseholds}{CreateHouseholds} & \textbf{HhId} & Household id \\
VEHouseholdVehicles & \protect\hyperlink{vestate-createvehicletable}{CreateVehicleTable} & \textbf{VehId} & Unique vehicle ID \\
VESimHouseholds & \protect\hyperlink{predictincome}{PredictIncome} & \textbf{Income} & Total annual income of household \\
VEHouseholdTravel & \protect\hyperlink{vestate-calculatehouseholddvmt}{CalculateHouseholdDvmt} & \textbf{Dvmt} & Average daily vehicle miles traveled by the household in autos or light trucks \\
VEHouseholdVehicles & \protect\hyperlink{vestate-calculatevehicleowncost}{CalculateVehicleOwnCost} & \textbf{HasPaydIns} & Identifies whether household has pay-as-you-drive insurance for vehicles: 1 = Yes, 0 = no \\
VEHouseholdTravel & \protect\hyperlink{vestate-calculatevehicletrips}{CalculateVehicleTrips} & \textbf{VehicleTrips} & Average number of vehicle trips per day by household members \\
VELandUse & \protect\hyperlink{vestate-assignparkingrestrictions}{AssignParkingRestrictions} & \textbf{OtherParkingCost} & Daily cost for parking at shopping locations or other locations of paid parking not including work \\
VEHouseholdVehicles & \protect\hyperlink{vestate-assignvehicleage}{AssignVehicleAge} & \textbf{Type} & Vehicle body type: Auto = automobile, LtTrk = light trucks (i.e.~pickup, SUV, Van) \\
VEHouseholdVehicles & \protect\hyperlink{vestate-assignvehicleage}{AssignVehicleAge} & \textbf{Age} & Vehicle age in years \\
VEHouseholdVehicles & \protect\hyperlink{vestate-createvehicletable}{CreateVehicleTable} & \textbf{VehicleAccess} & Identifier whether vehicle is owned by household (Own), if vehicle is low level car service (LowCarSvc), or if vehicle is high level car service (HighCarSvc) \\
VEPowertrainsAndFuels & \protect\hyperlink{vestate-assignhhvehiclepowertrain}{AssignHhVehiclePowertrain} & \textbf{Powertrain} & Vehicle powertrain type: ICEV = internal combustion engine vehicle, HEV = hybrid electric vehicle, PHEV = plug-in hybrid electric vehicle, BEV = battery electric vehicle, NA = not applicable because is a car service vehicle \\
VEPowertrainsAndFuels & \protect\hyperlink{vestate-assignhhvehiclepowertrain}{AssignHhVehiclePowertrain} & \textbf{GPM} & Average gasoline equivalent gallons per mile of vehicle travel powered by fuel \\
VEPowertrainsAndFuels & \protect\hyperlink{vestate-assignhhvehiclepowertrain}{AssignHhVehiclePowertrain} & \textbf{KWHPM} & Average kilowatt-hours per mile of vehicle travel powered by electricity \\
VEPowertrainsAndFuels & \protect\hyperlink{vestate-assignhhvehiclepowertrain}{AssignHhVehiclePowertrain} & \textbf{ElecDvmtProp} & Average miles of vehicle travel per gasoline equivalent gallon (fuel and electric powered) \\
VEPowertrainsAndFuels & \protect\hyperlink{vestate-assignhhvehiclepowertrain}{AssignHhVehiclePowertrain} & \textbf{FuelCO2ePM} & Average grams of carbon-dioxide equivalents produced per mile of travel powered by fuel \\
VEPowertrainsAndFuels & \protect\hyperlink{vestate-assignhhvehiclepowertrain}{AssignHhVehiclePowertrain} & \textbf{ElecCO2ePM} & Average grams of carbon-dioxide equivalents produced per mile of travel powered by electricity \\
VEHouseholdVehicles & \protect\hyperlink{vestate-calculatevehicleowncost}{CalculateVehicleOwnCost} & \textbf{InsCost} & Annual vehicle insurance cost in dollars \\
VELandUse & \protect\hyperlink{vestate-assignparkingrestrictions}{AssignParkingRestrictions} & \textbf{ParkingCost} & Daily cost for long-term parking (e.g.~paid on monthly basis) \\
VELandUse & \protect\hyperlink{vestate-assignparkingrestrictions}{AssignParkingRestrictions} & \textbf{IsCashOut} & Is worker paid parking in cash-out-buy-back program: 1 = yes, 0 = no \\
VELandUse & \protect\hyperlink{vestate-assignparkingrestrictions}{AssignParkingRestrictions} & \textbf{PaysForParking} & Does worker pay for parking: 1 = yes, 0 = no \\
\bottomrule()
\end{longtable}

\hypertarget{module-outputs-72}{%
\subsubsection{Module Outputs}\label{module-outputs-72}}

\begin{itemize}
\tightlist
\item
  \textbf{AveVehCostPM}: Average out-of-pocket cost in dollars per mile of vehicle travel
\item
  \textbf{AveSocEnvCostPM}: Average cost in dollars of the social and environmental impacts per mile of vehicle travel
\item
  \textbf{AveRoadUseTaxPM}: Average road use taxes in dollars collected per mile of vehicle travel
\item
  \textbf{DvmtProp}: Proportion of household DVMT allocated to vehicle
\item
  \textbf{AveGPM}: Average gasoline equivalent gallons per mile of household vehicle travel
\item
  \textbf{AveKWHPM}: Average kilowatt-hours per mile of household vehicle travel
\item
  \textbf{AveCO2ePM}: Average grams of carbon-dioxide equivalents produced per mile of household vehicle travel
\end{itemize}

\hypertarget{vestate-budgethouseholddvmt}{%
\subsection{BudgetHouseholdDvmt}\label{vestate-budgethouseholddvmt}}

This module adjusts average household DVMT to keep the quantity within household operating cost limits. The limit for each household is calculated in several steps. First, the proportion of the household's income that may be spent on vehicle operating costs is calculated using a model that is explained below. This is called the budget proportion. Then an adjusted household income
for budget calculation purposes is calculated by adding the annual cost of insurance for households subscribing to payd-as-you-drive (PAYD) insurance, cash-out parking payments for workers who work at an employer that has cash-out-buy-back parking, and any vehicle ownership cost savings for households that substitute high level car service for one or more household
vehicles. The adjusted household income is muliplied by the budget proportion and divided by the average vehicle operating cost per mile for the household to determine the maximum household DVMT that fits within the household budget. The household DVMT is then set at the lesser of this budget maximum or the modeled household DVMT.
The budget proportion model is estimated using data from the Bureau of Labor's consumer expenditure survey for the years from 2003 to 2015. The data used are the nominal dollar expenditures by household income category and year by transportation category. The values for the operating cost categories (gas and oil, and maintenance and repair) are summed and then divided by the
midpoint value for each income category to calculate the budget proportion for each income group and each year. From this the mean value is computed for each income group. The budget proportions for each income group and year are divided by the mean values by income group to normalize values. The standard deviation for the combined normalized values is computed and value of 3
deviations above the mean is set as the maximum normalized value. The mean values by income group are multiplied by this normalized maximum to derive a budget proportion maximum by income group. A smoothed splines model of the budget proportion as a function of income is then estimated from the calculated budget proportion maximums. This model is used to calculate the budget proportion for a household based on the household income. The minimum and
maximum values of the calculated budget proportion maximums are used as constraints to avoid unreasonable results for very low incomes and very high incomes.

\hypertarget{user-input-files-73}{%
\subsubsection{User Input Files}\label{user-input-files-73}}

This module does not have user-supplied input files

\hypertarget{internal-module-inputs-71}{%
\subsubsection{Internal Module Inputs}\label{internal-module-inputs-71}}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1724}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.3362}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1207}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.3707}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Package
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Module
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Outputs
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule()
\endhead
VESimHouseholds & \protect\hyperlink{vestate-createhouseholds}{CreateHouseholds} & \textbf{HhId} & Household id \\
VESimHouseholds & \protect\hyperlink{vestate-createhouseholds}{CreateHouseholds} & \textbf{HHSize} & Number of persons in the household \\
VESimHouseholds & \protect\hyperlink{predictincome}{PredictIncome} & \textbf{Income} & Total annual income of household \\
VELandUse & \protect\hyperlink{assignloctypes}{AssignLocTypes} & \textbf{LocType} & Location type (Urban, Town, Rural) of the place where the household resides \\
VETravelPerformance & \protect\hyperlink{vestate-calculatevehicleoperatingcost}{CalculateVehicleOperatingCost} & \textbf{AveVehCostPM} & Average out-of-pocket cost in dollars per mile of vehicle travel \\
VEHouseholdVehicles & \protect\hyperlink{vestate-adjustvehicleownership}{AdjustVehicleOwnership} & \textbf{OwnCostSavings} & Annual vehicle ownership cost (depreciation, finance, insurance, taxes) savings in dollars resulting from substituting the use of car services for a household vehicle \\
VEHouseholdVehicles & \protect\hyperlink{vestate-calculatevehicleowncost}{CalculateVehicleOwnCost} & \textbf{HasPaydIns} & Identifies whether household has pay-as-you-drive insurance for vehicles: 1 = Yes, 0 = no \\
VETravelPerformance & \protect\hyperlink{vestate-calculatevehicleoperatingcost}{CalculateVehicleOperatingCost} & \textbf{AveGPM} & Average gasoline equivalent gallons per mile of household vehicle travel \\
VETravelPerformance & \protect\hyperlink{vestate-calculatevehicleoperatingcost}{CalculateVehicleOperatingCost} & \textbf{AveKWHPM} & Average kilowatt-hours per mile of household vehicle travel \\
VETravelPerformance & \protect\hyperlink{vestate-calculatevehicleoperatingcost}{CalculateVehicleOperatingCost} & \textbf{AveCO2ePM} & Average grams of carbon-dioxide equivalents produced per mile of household vehicle travel \\
VELandUse & \protect\hyperlink{vestate-assignparkingrestrictions}{AssignParkingRestrictions} & \textbf{ParkingCost} & Daily cost for long-term parking (e.g.~paid on monthly basis) \\
VELandUse & \protect\hyperlink{vestate-assignparkingrestrictions}{AssignParkingRestrictions} & \textbf{IsCashOut} & Is worker paid parking in cash-out-buy-back program: 1 = yes, 0 = no \\
VELandUse & \protect\hyperlink{vestate-assignparkingrestrictions}{AssignParkingRestrictions} & \textbf{PaysForParking} & Does worker pay for parking: 1 = yes, 0 = no \\
VEHouseholdVehicles & \protect\hyperlink{vestate-calculatevehicleowncost}{CalculateVehicleOwnCost} & \textbf{InsCost} & Annual vehicle insurance cost in dollars \\
\bottomrule()
\end{longtable}

\hypertarget{module-outputs-73}{%
\subsubsection{Module Outputs}\label{module-outputs-73}}

\begin{itemize}
\tightlist
\item
  \textbf{Dvmt}: Average daily vehicle miles traveled by the household in autos or light trucks
\item
  \textbf{UrbanHhDvmt}: Average daily vehicle miles traveled in autos or light trucks by households residing in the urbanized portion of the Marea
\item
  \textbf{RuralHhDvmt}: Average daily vehicle miles traveled in autos or light trucks by households residing in the non-urbanized portion of the Marea
\item
  \textbf{DailyGGE}: Gasoline equivalent gallons consumed per day by household vehicle travel
\item
  \textbf{DailyKWH}: Kilowatt-hours consumed per day by household vehicle travel
\item
  \textbf{DailyCO2e}: Grams of carbon-dioxide equivalents produced per day by household vehicle travel
\item
  \textbf{WalkTrips}: Average number of walk trips per year by household members
\item
  \textbf{BikeTrips}: Average number of bicycle trips per year by household members
\item
  \textbf{TransitTrips}: Average number of public transit trips per year by household members
\item
  \textbf{VehicleTrips}: Average number of vehicle trips per day by household members
\end{itemize}

\hypertarget{vestate-balanceroadcostsandrevenues}{%
\subsection{BalanceRoadCostsAndRevenues}\label{vestate-balanceroadcostsandrevenues}}

This module calculates an extra mileage tax (\$ per vehicle mile traveled) for household vehicles needed to make up any difference in the cost of constructing, maintaining, and operating roadways and the revenues from fuel, VMT, and congestion taxes.

\hypertarget{user-input-files-74}{%
\subsubsection{User Input Files}\label{user-input-files-74}}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  Road cost for the region (\protect\hyperlink{vestate-region_road_cost.csv}{region\_road\_cost.csv})
\end{enumerate}

\hypertarget{internal-module-inputs-72}{%
\subsubsection{Internal Module Inputs}\label{internal-module-inputs-72}}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1724}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.3362}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1207}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.3707}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Package
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Module
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Outputs
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule()
\endhead
VETravelPerformance & \protect\hyperlink{vestate-calculatebaseroaddvmt}{CalculateBaseRoadDvmt} & \textbf{HvyTrkUrbanDvmt} & Base year Region heavy truck daily vehicle miles of travel in urbanized areas \\
VETravelPerformance & \protect\hyperlink{vestate-calculatebaseroaddvmt}{CalculateBaseRoadDvmt} & \textbf{ComSvcUrbanDvmt} & Commercial service daily vehicle miles of travel associated with Marea urbanized household activity \\
VETravelPerformance & \protect\hyperlink{vestate-calculatebaseroaddvmt}{CalculateBaseRoadDvmt} & \textbf{ComSvcRuralDvmt} & Commercial service daily vehicle miles of travel associated with Marea rural household activity \\
VETravelPerformance & \protect\hyperlink{vestate-calculatebaseroaddvmt}{CalculateBaseRoadDvmt} & \textbf{ComSvcTownDvmt} & Commercial service daily vehicle miles of travel associated with Marea town household activity \\
VETransportSupply & \protect\hyperlink{assignroadmiles}{AssignRoadMiles} & \textbf{FwyLaneMi} & Lane-miles of roadways functionally classified as freeways or expressways in the urbanized portion of the metropolitan area \\
VETransportSupply & \protect\hyperlink{assignroadmiles}{AssignRoadMiles} & \textbf{ArtLaneMi} & Lane-miles of roadways functionally classified as arterials (but not freeways or expressways) in the urbanized portion of the metropolitan area \\
VETravelPerformance & \protect\hyperlink{vestate-calculatevehicleoperatingcost}{CalculateVehicleOperatingCost} & \textbf{AveRoadUseTaxPM} & Average road use taxes in dollars collected per mile of vehicle travel \\
VETravelPerformance & \protect\hyperlink{vestate-budgethouseholddvmt}{BudgetHouseholdDvmt} & \textbf{Dvmt} & Average daily vehicle miles traveled by the household in autos or light trucks \\
\bottomrule()
\end{longtable}

\hypertarget{module-outputs-74}{%
\subsubsection{Module Outputs}\label{module-outputs-74}}

\begin{itemize}
\tightlist
\item
  \textbf{ExtraVmtTax}: Added vehicle mile tax for household vehicle use to pay for any deficit between road costs and road revenues (dollars per vehicle mile)
\end{itemize}

\hypertarget{vestate-calculatecomenergyandemissions}{%
\subsection{CalculateComEnergyAndEmissions}\label{vestate-calculatecomenergyandemissions}}

This module calculates the energy consumption and carbon emissions of heavy trucks and light-duty commercial service vehicles. It does not calculate the values for car service vehicles which are calculated as part of the household emissions. It also does not calculate public transit emissions which are calculated in the CalculateTransitEnergyAndEmissions module.

\hypertarget{user-input-files-75}{%
\subsubsection{User Input Files}\label{user-input-files-75}}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\item
  Light trucks proportion for commercial service vehicles (\protect\hyperlink{vestate-region_comsvc_lttrk_prop.csv}{region\_comsvc\_lttrk\_prop.csv})
\item
  Commercial service vehicle powertrain proportions by vehicle type (\protect\hyperlink{vestate-region_comsvc_powertrain_prop.csv}{region\_comsvc\_powertrain\_prop.csv})
\item
  Heavy duty truck powertrain proportions (\protect\hyperlink{vestate-region_hvytrk_powertrain_prop.csv}{region\_hvytrk\_powertrain\_prop.csv})
\item
  Mean age for commercial service vehicles by vehicle type (\protect\hyperlink{vestate-region_comsvc_veh_mean_age.csv}{region\_comsvc\_veh\_mean\_age.csv})
\end{enumerate}

\hypertarget{internal-module-inputs-73}{%
\subsubsection{Internal Module Inputs}\label{internal-module-inputs-73}}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1724}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.3362}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1207}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.3707}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Package
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Module
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Outputs
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule()
\endhead
VEPowertrainsAndFuels & \protect\hyperlink{vestate-calculatecarbonintensity}{CalculateCarbonIntensity} & \textbf{ElectricityCI} & Carbon intensity of electricity at point of consumption (grams CO2e per megajoule) \\
VEPowertrainsAndFuels & \protect\hyperlink{vestate-calculatecarbonintensity}{CalculateCarbonIntensity} & \textbf{HhAutoFuelCI} & Average carbon intensity of fuels used by household automobiles (grams CO2e per megajoule)) \\
VEPowertrainsAndFuels & \protect\hyperlink{vestate-calculatecarbonintensity}{CalculateCarbonIntensity} & \textbf{HhLtTrkFuelCI} & Average carbon intensity of fuels used by household light trucks (grams CO2e per megajoule) \\
VEPowertrainsAndFuels & \protect\hyperlink{vestate-calculatecarbonintensity}{CalculateCarbonIntensity} & \textbf{HvyTrkFuelCI} & Average carbon intensity of fuels used by heavy trucks (grams CO2e per megajoule) \\
VETravelPerformance & \protect\hyperlink{vestate-calculatempgmpkwhadjustments}{CalculateMpgMpkwhAdjustments} & \textbf{LdvEcoDrive} & Eco-driving penetration for light-duty vehicles; the fraction of vehicles from 0 to 1 \\
VETravelPerformance & \protect\hyperlink{vestate-calculatempgmpkwhadjustments}{CalculateMpgMpkwhAdjustments} & \textbf{HvyTrkEcoDrive} & Eco-driving penetration for heavy-duty vehicles; the fraction of vehicles from 0 to 1 \\
VETravelPerformance & \protect\hyperlink{vestate-calculatempgmpkwhadjustments}{CalculateMpgMpkwhAdjustments} & \textbf{LdvSpdSmoothFactor} & Proportional adjustment of light-duty internal combustion engine (ICE) vehicle MPG due to speed smoothing \\
VETravelPerformance & \protect\hyperlink{vestate-calculatempgmpkwhadjustments}{CalculateMpgMpkwhAdjustments} & \textbf{LdvEcoDriveFactor} & Proportional adjustment of light-duty internal combustion engine (ICE) vehicle MPG due to eco-driving \\
VETravelPerformance & \protect\hyperlink{vestate-calculatempgmpkwhadjustments}{CalculateMpgMpkwhAdjustments} & \textbf{HvyTrkSpdSmoothFactor} & Proportional adjustment of heavy truck internal combustion engine (ICE) vehicle MPG due to speed smoothing \\
VETravelPerformance & \protect\hyperlink{vestate-calculatempgmpkwhadjustments}{CalculateMpgMpkwhAdjustments} & \textbf{LdIceFactor} & Proportional adjustment of light-duty internal combustion engine (ICE) vehicle MPG due to congestion \\
VETravelPerformance & \protect\hyperlink{vestate-calculatempgmpkwhadjustments}{CalculateMpgMpkwhAdjustments} & \textbf{LdHevFactor} & Proportional adjustment of light-duty hybrid-electric vehicle (HEV) MPG due to congestion \\
VETravelPerformance & \protect\hyperlink{vestate-calculatempgmpkwhadjustments}{CalculateMpgMpkwhAdjustments} & \textbf{HvyTrkEcoDriveFactor} & Proportional adjustment of heavy truck internal combustion engine (ICE) vehicle MPG due to eco-driving \\
VETravelPerformance & \protect\hyperlink{vestate-calculatempgmpkwhadjustments}{CalculateMpgMpkwhAdjustments} & \textbf{LdEvFactor} & Proportional adjustment of light-duty battery electric vehicle (EV) MPkWh due to congestion \\
VETravelPerformance & \protect\hyperlink{vestate-calculatempgmpkwhadjustments}{CalculateMpgMpkwhAdjustments} & \textbf{HdIceFactor} & Proportional adjustment of heavy-duty internal combustion engine (ICE) vehicle MPG due to congestion \\
VETravelPerformance & \protect\hyperlink{vestate-calculatebaseroaddvmt}{CalculateBaseRoadDvmt} & \textbf{HvyTrkUrbanDvmt} & Base year Region heavy truck daily vehicle miles of travel in urbanized areas \\
VETravelPerformance & \protect\hyperlink{vestate-calculatebaseroaddvmt}{CalculateBaseRoadDvmt} & \textbf{HvyTrkRuralDvmt} & Base year Region heavy truck daily vehicle miles of travel in rural (i.e.~non-urbanized) areas \\
VETravelPerformance & \protect\hyperlink{vestate-calculatebaseroaddvmt}{CalculateBaseRoadDvmt} & \textbf{ComSvcUrbanDvmt} & Commercial service daily vehicle miles of travel associated with Marea urbanized household activity \\
VETravelPerformance & \protect\hyperlink{vestate-calculatebaseroaddvmt}{CalculateBaseRoadDvmt} & \textbf{ComSvcRuralDvmt} & Commercial service daily vehicle miles of travel associated with Marea rural household activity \\
\bottomrule()
\end{longtable}

\hypertarget{module-outputs-75}{%
\subsubsection{Module Outputs}\label{module-outputs-75}}

\begin{itemize}
\item
  \textbf{ComSvcUrbanGGE}: Average daily amount of hydrocarbon fuels consumed by commercial service vehicles associated with urban household activity in gas gallon equivalents
\item
  \textbf{ComSvcRuralGGE}: Average daily amount of hydrocarbon fuels consumed by commercial service vehicles associated with rural household activity in gas gallon equivalents
\item
  \textbf{HvyTrkUrbanGGE}: Average daily amount of hydrocarbon fuels consumed by heavy trucks on urbanized area roadways in the Marea in gas gallon equivalents
\item
  \textbf{ComSvcUrbanKWH}: Average daily amount of electricity consumed by commercial service vehicles associated with urban household activity in kilowatt-hours
\item
  \textbf{ComSvcRuralKWH}: Average daily amount of electricity consumed by commercial service vehicles associated with rural household activity in kilowatt-hours
\item
  \textbf{ComSvcUrbanCO2e}: Average daily amount of carbon-dioxide equivalents produced by commercial service vehicles associated with urban household activity in grams
\item
  \textbf{ComSvcRuralCO2e}: Average daily amount of carbon-dioxide equivalents produced by commercial service vehicles associated with rural household activity in grams
\item
  \textbf{HvyTrkUrbanCO2e}: Average daily amount of carbon-dioxide equivalents produced by heavy trucks on urbanized area roadways in the Marea in grams
\item
  \textbf{ComSvcAveUrbanAutoCO2eRate}: Average amount of carbon-dioxide equivalents produced by commercial service automobiles per mile of travel on urbanized area roadways in grams per mile
\item
  \textbf{ComSvcAveUrbanLtTrkCO2eRate}: Average amount of carbon-dioxide equivalents produced by commercial service light trucks per mile of travel on urbanized area roadways in grams per mile
\item
  \textbf{HvyTrkAveUrbanCO2eRate}: Average amount of carbon-dioxide equivalents produced by heavy trucks per mile of travel on urbanized area roadways in grams per mile
\item
  \textbf{HvyTrkRuralGGE}: Average daily amount of hydrocarbon fuels consumed by heavy trucks on rural roadways in the Region in gas gallon equivalents
\item
  \textbf{HvyTrkUrbanGGE}: Average daily amount of hydrocarbon fuels consumed by heavy trucks on urbanized area roadways in the Region in gas gallon equivalents
\item
  \textbf{HvyTrkRuralKWH}: Average daily amount of electricity consumed by heavy trucks on rural roadways in the Region in kilowatt-hours
\item
  \textbf{HvyTrkUrbanKWH}: Average daily amount of electricity consumed by heavy trucks on urbanized area roadways in the Region in kilowatt-hours
\item
  \textbf{HvyTrkRuralCO2e}: Average daily amount of carbon-dioxide equivalents produced by heavy trucks on rural roadways in the Region in grams
\item
  \textbf{HvyTrkUrbanCO2e}: Average daily amount of carbon-dioxide equivalents produced by heavy trucks on urbanized area roadways in the Region in grams
\end{itemize}

\hypertarget{vestate-calculateptranenergyandemissions}{%
\subsection{CalculatePtranEnergyAndEmissions}\label{vestate-calculateptranenergyandemissions}}

This module calculates the energy consumption and carbon emissions of public transit vehicle emissions in urbanized areas.

\hypertarget{user-input-files-76}{%
\subsubsection{User Input Files}\label{user-input-files-76}}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  Transit powertrain proportions by transit vehicle type (\protect\hyperlink{vestate-marea_transit_powertrain_prop.csv}{marea\_transit\_powertrain\_prop.csv})
\end{enumerate}

\hypertarget{internal-module-inputs-74}{%
\subsubsection{Internal Module Inputs}\label{internal-module-inputs-74}}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1724}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.3362}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1207}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.3707}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Package
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Module
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Outputs
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule()
\endhead
VEPowertrainsAndFuels & \protect\hyperlink{vestate-calculatecarbonintensity}{CalculateCarbonIntensity} & \textbf{ElectricityCI} & Carbon intensity of electricity at point of consumption (grams CO2e per megajoule) \\
VEPowertrainsAndFuels & \protect\hyperlink{vestate-calculatecarbonintensity}{CalculateCarbonIntensity} & \textbf{TransitVanFuelCI} & Average carbon intensity of fuel used by transit vans (grams CO2e per megajoule) \\
VEPowertrainsAndFuels & \protect\hyperlink{vestate-calculatecarbonintensity}{CalculateCarbonIntensity} & \textbf{TransitBusFuelCI} & Average carbon intensity of fuel used by transit buses (grams CO2e per megajoule) \\
VEPowertrainsAndFuels & \protect\hyperlink{vestate-calculatecarbonintensity}{CalculateCarbonIntensity} & \textbf{TransitRailFuelCI} & Average carbon intensity of fuel used by transit rail vehicles (grams CO2e per megajoule) \\
VETransportSupply & \protect\hyperlink{assigntransitservice}{AssignTransitService} & \textbf{VanDvmt} & Total daily miles traveled by vans of various sizes to provide demand responsive, vanpool, and similar services \\
VETransportSupply & \protect\hyperlink{assigntransitservice}{AssignTransitService} & \textbf{BusDvmt} & Total daily miles traveled by buses of various sizes to provide bus service of various types \\
VETransportSupply & \protect\hyperlink{assigntransitservice}{AssignTransitService} & \textbf{RailDvmt} & Total daily miles traveled by light rail, heavy rail, commuter rail, and similar types of vehicles \\
\bottomrule()
\end{longtable}

\hypertarget{module-outputs-76}{%
\subsubsection{Module Outputs}\label{module-outputs-76}}

\begin{itemize}
\tightlist
\item
  \textbf{BusGGE}: Average daily amount of hydrocarbon fuels consumed by bus transit vehicles in urbanized area in gas gallon equivalents
\item
  \textbf{RailGGE}: Average daily amount of hydrocarbon fuels consumed by rail transit vehicles in urbanized area in gas gallon equivalents
\item
  \textbf{VanGGE}: Average daily amount of hydrocarbon fuels consumed by van transit vehicles in urbanized area in gas gallon equivalents
\item
  \textbf{BusKWH}: Average daily amount of electricity consumed by bus transit vehicles in urbanized area in kilowatt-hours
\item
  \textbf{RailKWH}: Average daily amount of electricity consumed by rail transit vehicles in urbanized area in kilowatt-hours
\item
  \textbf{VanKWH}:Average daily amount of electricity consumed by van transit vehicles in urbanized area in kilowatt-hours
\item
  \textbf{BusCO2e}: Average daily amount of carbon-dioxide equivalents produced by bus transit vehicles in urbanized area in grams
\item
  \textbf{RailCO2e}: Average daily amount of carbon-dioxide equivalents produced by rail transit vehicles in urbanized area in grams
\item
  \textbf{VanCO2e}: Average daily amount of carbon-dioxide equivalents produced by van transit vehicles in urbanized area in grams
\item
  \textbf{BusCO2eRate}: Average amount of carbon-dioxide equivalents produced by bus transit vehicles per mile of travel in urbanized area in grams per mile
\item
  \textbf{RailCO2eRate}: Average amount of carbon-dioxide equivalents produced by rail transit vehicles per mile of travel in urbanized area in grams per mile
\item
  \textbf{VanCO2eRate}: Average amount of carbon-dioxide equivalents produced by van transit vehicles per mile of travel in urbanized area in grams per mile
\end{itemize}

\hypertarget{development-and-installation}{%
\section{Development and Installation}\label{development-and-installation}}

This section describes the installation and use of VE-State.

\hypertarget{installation-of-visioneval-and-ve-state}{%
\section{Installation of VisionEval and VE-State}\label{installation-of-visioneval-and-ve-state}}

VE-State and VisionEval framework are implemented in R, a statistical programming language and environment. Both R and VisionEval are open source and freely available. For running VE-State you need to follow these steps:

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  \href{https://cran.r-project.org/}{Install R} (users are encouraged to also install \href{https://www.rstudio.com/products/rstudio/download/}{RStudio}, a free and open-source integrated development environment for R)
\item
  \href{https://visioneval.org/category/download.html}{Install VisionEval}
\item
  Run VE-State
\end{enumerate}

The VisionEval installer is available \href{https://visioneval.org/category/download.html}{here}. Follow the instructions on this page carefully to install the VisionEval on your system.

\hypertarget{in-brief-running-ve-state-base-scenario}{%
\section{In Brief: Running VE-State Base Scenario}\label{in-brief-running-ve-state-base-scenario}}

See the VisionEval \href{https://github.com/VisionEval/VisionEval/wiki/Getting-Started-v2}{Getting Started documentation} for an overview of the framework methods for running models and querying results.

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  Double-click \texttt{VisionEval.Rproj} in the location where you installed VisionEval. This will launch RStudio.
\item
  Enter \texttt{statemod\ \textless{}-\ openModel(\textquotesingle{}VE-State\textquotesingle{})}
\item
  Enter \texttt{statemod\$run()}
\end{enumerate}

\hypertarget{in-detail-running-ve-state-base-scenario}{%
\section{In Detail: Running VE-State Base Scenario}\label{in-detail-running-ve-state-base-scenario}}

\hypertarget{preparing-inputs}{%
\subsection{Preparing inputs}\label{preparing-inputs}}

Once VisionEval and VE-State have been installed, a directory with sample data will be available at \texttt{../models/VE-State/}. (Note \texttt{..} refers to the parent directory of the unzipped installer file).

The \texttt{VE-State} directory serves the dual purposes of providing sample data and serving as a template for local modification to other locations.

The \texttt{../models/VE-State/} directory contains sample input files for Oregon. These inputs can be modified or replaced to investigate the impacts of policy changes or to model a different state. The folder contains multiple files and subfolders:

\texttt{run\_model.R} is the core script for running the model. It consists of calls to the modules that make up the model. The user may modify the script to call the desired modules.

The \texttt{defs} directory contains five model definition files which is introduced in \href{Inputs_and_Parameters.md}{Model Definition Files}

The \texttt{inputs} directory contains a number of \texttt{CSV} and \texttt{JSON} files that provide inputs for the modules. Each module specifies what input files it needs. If you would like to know
the description of each input file and how you can change those files for your desired testing see \href{Inputs_and_Parameters.md/\#input-files}{Inputs\_and\_Parameters}

The \texttt{../models/VE-State} directory contains sample input files for state of Oregon. These can be modified or replaced to investigate the impacts of policy changes or to model a different state.

\hypertarget{running-the-model}{%
\subsection{Running the Model}\label{running-the-model}}

There are multiple ways to run VisionEval models. VisionEval models can be run via the command line directly or using \texttt{openModel}, and can be run for one scenario or multiple scenarios in parallel. Results can be viewed in tabular form or with the interactive \texttt{VEScenarioViewer}.

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  Start R (or RStudio) and make sure your directory is set to the installer folder. The easiest way to do this is to double-click \texttt{VisionEval.Rproj}, which will be associated with RStudio if that is installed correctly.
\item
  You should see `Welcome to VisionEval!' on the RStudio console. Then run the following commands:
\end{enumerate}

\begin{verbatim}
statemod <- openModel('VE-State')
statemod$run()
\end{verbatim}

By default this will run the model in \texttt{../models/VE-State/} directory. The default model is for Oregon, for 2010 and 2040.

After running the script you will see how the modules will be running in order.

The model run will take approximately 45 minutes. Once complete, the output are exported to \texttt{../models/VE-State/outputs} in 3 different zone levels.

\hypertarget{querying-results}{%
\section{Querying results}\label{querying-results}}

To extract all results to .csv files, run:

\begin{verbatim}
statemod$extract()
\end{verbatim}

On the R console, you will see messages about what tables are being extracted and where the files are being saved, e.g.:

\begin{verbatim}
Extracting data for Table Azone in Group 2010
Extracting data for Table Bzone in Group 2010
Extracting data for Table Household in Group 2010
[...]
Write output file: /models/VE-State/output/Azone_2010_1_2021-03-02_153010.csv
Write output file: /models/VE-State/output/Bzone_2010_1_2021-03-02_153010.csv
[...]
\end{verbatim}

For a state-wide model, the \texttt{Household} and \texttt{Vehicle} tables in particular can be quite large, and this full result extraction might take several minutes.

To extract just one field, for example DVMT at the household level for 2010 and 2040, first select just the Household table using the \texttt{tablesSelected} method:

\begin{verbatim}
statemod$tablesSelected <- 'Household'
\end{verbatim}

Then select the \texttt{Dvmt} field:

\begin{verbatim}
statemod$fieldsSelected <- 'Dvmt'
\end{verbatim}

Extract the result to a list of data frames for plotting, rather than to a .csv file. Some manipulation of the list can be done to put the fields in one data frame for plotting, for example:

\begin{verbatim}
hh_dvmt <- statemod$extract(saveTo = F)
hh_dvmt <- unlist(hh_dvmt)
year <- names(hh_dvmt)
year <- ifelse(grepl('2010', year), '2010', '2040')
hh_dvmt <- data.frame(year, Dvmt = hh_dvmt)
\end{verbatim}

Plot using the \texttt{ggplot2} library, for example:

\begin{verbatim}
ggplot(hh_dvmt, aes(x = Dvmt, fill = year)) + 
  geom_histogram() + 
  ylab('Number of Households') +
  ggtitle('Distribution of DVMT by VE-State for Oregon')
\end{verbatim}

Other query methods are described in the \href{https://github.com/VisionEval/VisionEval/wiki/Getting-Started-v2\#\#\%20extracting-model-results}{Getting Started documentation}.

\hypertarget{scenarios}{%
\subsection{Scenarios}\label{scenarios}}

To modify a scenario, the appropriate input files are edited. For example, to change the flat rate tax of vehicles for future \href{https://github.com/visioneval/VisionEval/blob/master/sources/modules/VEHouseholdVehicles/inst/module_docs/CalculateVehicleOwnCost.md\#\#\%20azone_hh_veh_own_taxescsv}{\texttt{azone\_hh\_veh\_own\_taxes.csv}} would be modified in Excel, LibreOffice, OpenOffice, or a text editor to change the \texttt{VehOwnFlatRateFee} of year 2038.

Create scenarios using the same steps as for \href{'../verspm/Running_VERSPM.md'}{VE-RSPM}

Return to \href{Main.md}{Tutorial}.

\hypertarget{development-and-installation-1}{%
\section{Development and Installation}\label{development-and-installation-1}}

This section describes the installation and use of VE-State.

\hypertarget{installation-of-visioneval-and-ve-state-1}{%
\section{Installation of VisionEval and VE-State}\label{installation-of-visioneval-and-ve-state-1}}

VE-State and VisionEval framework are implemented in R, a statistical programming language and environment. Both R and VisionEval are open source and freely available. For running VE-State you need to follow these steps:

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  \href{https://cran.r-project.org/}{Install R} (users are encouraged to also install \href{https://www.rstudio.com/products/rstudio/download/}{RStudio}, a free and open-source integrated development environment for R)
\item
  \href{https://visioneval.org/category/download.html}{Install VisionEval}
\item
  Run VE-State
\end{enumerate}

The VisionEval installer is available \href{https://visioneval.org/category/download.html}{here}. Follow the instructions on this page carefully to install the VisionEval on your system.

\hypertarget{in-brief-running-ve-state-base-scenario-1}{%
\section{In Brief: Running VE-State Base Scenario}\label{in-brief-running-ve-state-base-scenario-1}}

See the VisionEval \href{https://github.com/VisionEval/VisionEval/wiki/Getting-Started-v2}{Getting Started documentation} for an overview of the framework methods for running models and querying results.

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  Double-click \texttt{VisionEval.Rproj} in the location where you installed VisionEval. This will launch RStudio.
\item
  Enter \texttt{statemod\ \textless{}-\ openModel(\textquotesingle{}VE-State\textquotesingle{})}
\item
  Enter \texttt{statemod\$run()}
\end{enumerate}

\hypertarget{in-detail-running-ve-state-base-scenario-1}{%
\section{In Detail: Running VE-State Base Scenario}\label{in-detail-running-ve-state-base-scenario-1}}

\hypertarget{preparing-inputs-1}{%
\subsection{Preparing inputs}\label{preparing-inputs-1}}

Once VisionEval and VE-State have been installed, a directory with sample data will be available at \texttt{../models/VE-State/}. (Note \texttt{..} refers to the parent directory of the unzipped installer file).

The \texttt{VE-State} directory serves the dual purposes of providing sample data and serving as a template for local modification to other locations.

The \texttt{../models/VE-State/} directory contains sample input files for Oregon. These inputs can be modified or replaced to investigate the impacts of policy changes or to model a different state. The folder contains multiple files and subfolders:

\texttt{run\_model.R} is the core script for running the model. It consists of calls to the modules that make up the model. The user may modify the script to call the desired modules.

The \texttt{defs} directory contains five model definition files which is introduced in \href{Inputs_and_Parameters.md}{Model Definition Files}

The \texttt{inputs} directory contains a number of \texttt{CSV} and \texttt{JSON} files that provide inputs for the modules. Each module specifies what input files it needs. If you would like to know
the description of each input file and how you can change those files for your desired testing see \href{Inputs_and_Parameters.md/\#input-files}{Inputs\_and\_Parameters}

The \texttt{../models/VE-State} directory contains sample input files for state of Oregon. These can be modified or replaced to investigate the impacts of policy changes or to model a different state.

\hypertarget{running-the-model-1}{%
\subsection{Running the Model}\label{running-the-model-1}}

There are multiple ways to run VisionEval models. VisionEval models can be run via the command line directly or using \texttt{openModel}, and can be run for one scenario or multiple scenarios in parallel. Results can be viewed in tabular form or with the interactive \texttt{VEScenarioViewer}.

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  Start R (or RStudio) and make sure your directory is set to the installer folder. The easiest way to do this is to double-click \texttt{VisionEval.Rproj}, which will be associated with RStudio if that is installed correctly.
\item
  You should see `Welcome to VisionEval!' on the RStudio console. Then run the following commands:
\end{enumerate}

\begin{verbatim}
statemod <- openModel('VE-State')
statemod$run()
\end{verbatim}

By default this will run the model in \texttt{../models/VE-State/} directory. The default model is for Oregon, for 2010 and 2040.

After running the script you will see how the modules will be running in order.

The model run will take approximately 45 minutes. Once complete, the output are exported to \texttt{../models/VE-State/outputs} in 3 different zone levels.

\hypertarget{querying-results-1}{%
\section{Querying results}\label{querying-results-1}}

To extract all results to .csv files, run:

\begin{verbatim}
statemod$extract()
\end{verbatim}

On the R console, you will see messages about what tables are being extracted and where the files are being saved, e.g.:

\begin{verbatim}
Extracting data for Table Azone in Group 2010
Extracting data for Table Bzone in Group 2010
Extracting data for Table Household in Group 2010
[...]
Write output file: /models/VE-State/output/Azone_2010_1_2021-03-02_153010.csv
Write output file: /models/VE-State/output/Bzone_2010_1_2021-03-02_153010.csv
[...]
\end{verbatim}

For a state-wide model, the \texttt{Household} and \texttt{Vehicle} tables in particular can be quite large, and this full result extraction might take several minutes.

To extract just one field, for example DVMT at the household level for 2010 and 2040, first select just the Household table using the \texttt{tablesSelected} method:

\begin{verbatim}
statemod$tablesSelected <- 'Household'
\end{verbatim}

Then select the \texttt{Dvmt} field:

\begin{verbatim}
statemod$fieldsSelected <- 'Dvmt'
\end{verbatim}

Extract the result to a list of data frames for plotting, rather than to a .csv file. Some manipulation of the list can be done to put the fields in one data frame for plotting, for example:

\begin{verbatim}
hh_dvmt <- statemod$extract(saveTo = F)
hh_dvmt <- unlist(hh_dvmt)
year <- names(hh_dvmt)
year <- ifelse(grepl('2010', year), '2010', '2040')
hh_dvmt <- data.frame(year, Dvmt = hh_dvmt)
\end{verbatim}

Plot using the \texttt{ggplot2} library, for example:

\begin{verbatim}
ggplot(hh_dvmt, aes(x = Dvmt, fill = year)) + 
  geom_histogram() + 
  ylab('Number of Households') +
  ggtitle('Distribution of DVMT by VE-State for Oregon')
\end{verbatim}

Other query methods are described in the \href{https://github.com/VisionEval/VisionEval/wiki/Getting-Started-v2\#\#\%20extracting-model-results}{Getting Started documentation}.

\hypertarget{scenarios-1}{%
\subsection{Scenarios}\label{scenarios-1}}

To modify a scenario, the appropriate input files are edited. For example, to change the flat rate tax of vehicles for future \href{https://github.com/visioneval/VisionEval/blob/master/sources/modules/VEHouseholdVehicles/inst/module_docs/CalculateVehicleOwnCost.md\#\#\%20azone_hh_veh_own_taxescsv}{\texttt{azone\_hh\_veh\_own\_taxes.csv}} would be modified in Excel, LibreOffice, OpenOffice, or a text editor to change the \texttt{VehOwnFlatRateFee} of year 2038.

Create scenarios using the same steps as for \href{'../verspm/Running_VERSPM.md'}{VE-RSPM}

Return to \href{Main.md}{Tutorial}.

\hypertarget{verpat}{%
\chapter{VERPAT Model Details}\label{verpat}}

\hypertarget{overview-2}{%
\section{Overview}\label{overview-2}}

VERPAT is a tool for evaluating the impact of various smart growth policies. VERPAT is designed to be a high-level evaluation at a regional scale that can bridge the distance between evaluating smart growth policies during a regional visioning process and evaluating smart growth policies at a project or alternative level in a regional transportation plan. VERPAT evaluates policy scenarios to identify the most promising policies that could be further tested using a more detailed project-level tool. Currently, VERPAT can provide information on the following changes in the regional system:

\begin{itemize}
\tightlist
\item
  Built Environment - changes to the urban form (proportion of population and employment living in mixed-use areas, transit-oriented developments, or rural/greenfield areas)
\item
  Travel Demand - changes in population demographics (age structure), changes in personal income, changes in firms by size or industry, relative amounts of development occurring in urban core, close-in communities, suburban or rural areas, urban core, auto and light truck proportions by year, and induced demand
\item
  Transportation Supply - amounts of regional transit service, amounts of freeway and arterial capacity
\item
  Policies - pricing (vehicle miles traveled charges or parking pricing programs), intelligent transportation system (ITS) strategies for freeways and arterials, demand management (vanpool, telecommuting, ridesharing, and transit pass programs)
\end{itemize}

VERPAT is designed to evaluate regions, which can be a multi-county metropolitan region. It distinguishes between population and employment living/working in the urban core, close-in communities, suburban and rural/greenfield areas based on densities, diversity in land uses, street design or intersection densities, job accessibility by auto, distances to transit stops, and connectivity of the street system.

The intended audience for VERPAT is regional decision-makers and land use and transportation planners involved in the development and evaluation of transportation and land use policies, and who need to conduct scenario planning to evaluate smart growth policies and determine their impact on travel demand. VERPAT was designed to address as many of the limitations identified in the research as possible and to provide a tool that filled a gap in the set of available tools. The relationships in the VERPAT tool were based upon the background research conducted for the SHRP 2 C16 project. VERPAT is designed to allow the evaluation of a wide range of policies and combination of policies in a consistent framework quickly and easily so that promising smart growth strategies can be identified and pursued in the land use and transportation planning processes. VERPAT is intended to precede and supplement more sophisticated modeling efforts, which can be used to evaluate specific smart growth projects. It is designed to be accessible to land use and transportation planners with no modeling experience.

\hypertarget{verpat-model-structure}{%
\subsection{VERPAT Model Structure}\label{verpat-model-structure}}

VERPAT is a disaggregate policy model that predicts travel demand impacts at an individual household level.

The diagram below illustrates the modeling system with model components and feedback loops. Links are provided to the source code that implements each section.

Household Models: Households Package

Firms Models: Firms Package

Urban Form Models: Land Use Package

Accessibility Models: Transport Supply Package

Vehicle Models: Household Vehicles Package

Travel Demand Models: Household Travel Package

Congestion Models: Transport Supply Use Package

Travel Performance Package

Reporting Package

For more, see {[}{[}VERPAT Modules and Outputs \textbar{} VERPAT-Modules-and-Outputs{]}{]}.

\hypertarget{verpat-modules}{%
\subsection{VERPAT Modules}\label{verpat-modules}}

VERPAT does not provide specific spatial results beyond the built environment categories at the regional level, but does capture individual household and firm characteristics and the interactions between policies. The disaggregate nature of the model captures impacts that may be occurring for small portions of the population (say 0-vehicle households) where aggregate models have a more difficult time capturing these impacts.

The following is an explanation of major steps in the model execution

{[}{]} = indicates VE modules

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  \textbf{Household Model} - \emph{Households Package}
\end{enumerate}

Create synthetic households for the region, including persons {[}\href{https://github.com/visioneval/VisionEval/wiki/VERPAT-Modules-and-Outputs\#createhouseholds}{Create Households}{]} and workers {[}\href{https://github.com/visioneval/VisionEval/wiki/VERPAT-Modules-and-Outputs\#predictworkers}{Predict Workers}{]} by age group. A total household income is assigned to each household, given the ages of persons in the household and the average per capita income of the region where the household resides {[}\href{https://github.com/visioneval/VisionEval/wiki/VERPAT-Modules-and-Outputs\#predictincome}{PredictIncome}{]}.

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\setcounter{enumi}{1}
\item
  \textbf{Firm Model} - \emph{Synthetic Firms Package}\\
  A set of firms is created for each forecast year that represents the likely firm composition for the region, given the County Business Pattern data of firms by size and industry. Each firm is described in terms of the number of employees and its industry {[}\href{https://github.com/visioneval/VisionEval/wiki/VERPAT-Modules-and-Outputs\#createbasesyntheticfirms}{CreateBaseSyntheticFirms}{]} and {[}\href{https://github.com/visioneval/VisionEval/tree/master/sources/modules/VESyntheticFirms}{CreateFutureSyntheticFirms}{]}.
\item
  \textbf{Urban Form Model} - \emph{Land Use Package}\\
  Calculate Place Types for Households and Firms - Population and employment location characteristics are important variables in the vehicle ownership, travel demand, and accessibility models. There are four place types (urban core, Close-in Community, suburban, and rural and five location categories (residential, commercial, mixed-use, transit-oriented development, and Greenfield){]}. Models for households were developed to estimate location characteristics using National Household Travel Survey data. Firms are currently allocated randomly to fit the employment allocation inputs since there are no national datasets from which to draw these relationships {[}\href{https://github.com/visioneval/VisionEval/wiki/VERPAT-Modules-and-Outputs\#calculatebaseplacetypes}{CalculateBasePlaceTypes}{]} and {[}\href{https://github.com/visioneval/VisionEval/wiki/VERPAT-Modules-and-Outputs\#calculatefutureplacetypes}{CalculateFuturePlaceTypes}{]}.
\item
  \textbf{Accessibility Model} - \emph{Transport Supply Package}\\
  Calculate Freeway, Arterial, and Public Transit Supply Levels - The number of lane miles of freeways and arterials is computed for each region based on the change in inventories for a particular scenario. For public transit, the inputs specify the change in transit revenue miles relative to the base. Inputs for each area also specify the revenue mile split between electrified rail and buses {[}\href{https://github.com/visioneval/VisionEval/wiki/VERPAT-Modules-and-Outputs\#createbaseaccessibility}{CreateBaseAccessibility}{]} and {[}\href{https://github.com/visioneval/VisionEval/wiki/VERPAT-Modules-and-Outputs\#createfutureaccessibility}{CreateFutureAccessibility}{]}.
\item
  \textbf{Vehicle Model} - \emph{Household Vehicle Package}\\
  Calculate Vehicle Ownership - Each household is assigned the number of vehicles it is likely to own based on the number of persons of driving age in the household, whether only elderly persons live in the household, the income of the household, the population density where the household lives, the freeway supply, the transit supply, and whether the household is located in an urban mixed-use area. {[}\href{https://github.com/visioneval/VisionEval/wiki/VERPAT-Modules-and-Outputs\#assignvehiclefeatures}{AssignVehicleFeatures}{]} and {[}\href{https://github.com/visioneval/VisionEval/wiki/VERPAT-Modules-and-Outputs\#assignvehiclefeaturesfuture}{AssignVehicleFeaturesFuture}{]}.
\item
  \textbf{Travel Demand Model} - \emph{Household Travel Package}\\
  Calculate Travel Demand - The average daily vehicle miles traveled, classification of vehicles as electric vehicles, auto and transit trips for each household is modeled based on household information determined in previous steps for the base conditions. The model is sensitive to household income, population density of the neighborhood where the household resides, number of household vehicles, whether the household owns no vehicles, the levels of public transportation and freeway supplies in the region, the driving age population in the household, the presence of persons over age 65, and whether the neighborhood is characterized by mixed-use development. {[}\href{https://github.com/visioneval/VisionEval/wiki/VERPAT-Modules-and-Outputs\#calculatetraveldemand}{CalculateTravelDemand}{]} and {[}\href{https://github.com/visioneval/VisionEval/wiki/VERPAT-Modules-and-Outputs\#calculatetraveldemandfuture}{CalculateTravelDemandFuture}{]}.
\end{enumerate}

\begin{verbatim}
Calculate Truck and Bus Vehicle Miles Traveled (VMT) - Regional truck VMT is calculated based on changes in the regional household income. As a default, a one-to-one relationship between regional income growth and truck VMT growth is assumed. In other words, a doubling of total regional income would result in a doubling of truck VMT. Bus VMT is calculated from bus revenue miles that are factored up to total vehicle miles to account for miles driven in non-revenue service. [[CalculateTravelDemand](https://github.com/visioneval/VisionEval/wiki/VERPAT-Modules-and-Outputs#calculatetraveldemand)] and [[CalculateTravelDemandFuture](https://github.com/visioneval/VisionEval/wiki/VERPAT-Modules-and-Outputs#calculatetraveldemandfuture)].   
\end{verbatim}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\setcounter{enumi}{6}
\tightlist
\item
  \textbf{Congestion Model} - \emph{Transport Supply Use Package}\\
  Calculate the amount of congestion -- Auto, and light truck VMT, truck VMT and bus VMT are allocated to freeways, arterials, and other roadways. Truck and bus VMT are allocated based on mode-specific data, and auto and light truck VMT are allocated based on a combination of factors and a model that is sensitive to the relative supplies of freeway and arterial lane miles. System-wide ratios of VMT to lane miles for freeways and arterials are used to allocate VMT to congestion levels using congestion levels defined by the Texas Transportation Institute for the Urban Mobility Report. Each freeway and arterial congestion level is associated with an average trip speed for conditions that do and do not include ITS treatment for incident management on the roadway. Overall average speeds by congestion level are calculated based on input assumptions about the degree of incident management. Speed vs.~fuel efficiency relationships for light vehicles, trucks, and buses are used to adjust the fleet fuel efficiency averages computed for the region. {[}\href{https://github.com/visioneval/VisionEval/wiki/VERPAT-Modules-and-Outputs\#calculatecongestionbase}{CalculateCongestionBase}{]}, {[}\href{https://github.com/visioneval/VisionEval/wiki/VERPAT-Modules-and-Outputs\#calculatecongestionfuture}{CalculateCongestionFuture}{]}, and {[}\href{https://github.com/visioneval/VisionEval/wiki/VERPAT-Modules-and-Outputs\#calculatecongestionpolicy}{CalculateCongestionPolicy}{]}.
\end{enumerate}

\hypertarget{feedback-loops}{%
\subsection{Feedback loops}\label{feedback-loops}}

Following initial calculations for baseline conditions, the model has feedback loops, which allow for changes in travel demand and other impacts based on induced travel demand and for changes in policies for a given scenario. Congestion is recalculated following these adjustments to demand.

\begin{itemize}
\item
  \textbf{Induced Demand Model} - \emph{Household Travel Package}

  Calculate Induced Travel Demand - Induced demand is calculated for changes in roadway supply in the near term as a function of speed, based on potential mode and route shifts to produce changes in VMT and in the longer term to include changes in vehicle ownership, still as a function of speed. This model does not include induced demand as a result of changes in growth that may occur as part of a smart growth scenario because the evidence is limited empirical evidence. {[}\href{https://github.com/visioneval/VisionEval/wiki/VERPAT-Modules-and-Outputs\#calculateinduceddemand}{CalculateInducedDemand}{]}.
\item
  \textbf{Policy Adjusted Travel Demand} - \emph{Household Travel Package}\\
  Calculate Scenario Travel Demand - The average daily VMT for each household can be adjusted based on changes in growth patterns by place type, changes in auto operating cost, changes in road lane miles or transit revenue miles for any scenario. There are also a series of policy assumptions that can contribute to changes in VMT: pricing such as VMT charges or parking pricing, ITS strategies for freeways and arterials, and vanpool, telecommuting, ridesharing, and transit pass programs. All of these will contribute to shifts in travel demand for a given scenario. {[}\href{https://github.com/visioneval/VisionEval/wiki/VERPAT-Modules-and-Outputs\#calculatepolicyvmt}{CalculatePolicyVmt}{]}.
\end{itemize}

Performance metrics are calculated in the \href{https://github.com/visioneval/VisionEval/tree/master/sources/modules/VEReports}{VEReports package}. The other impacts that are produced for a given scenario include environment and energy impacts greenhouse gas (GHG) emissions and fuel consumption), financial and economic impacts (highway and transit infrastructure costs, transit operating costs, and traveler costs), regional accessibility, and community impacts (livability and public health indicators).

\hypertarget{for-more-information}{%
\subsection{For more information}\label{for-more-information}}

\begin{itemize}
\tightlist
\item
  \href{https://github.com/visioneval/VisionEval/wiki/VERPAT-Modules-and-Outputs\#reportrpatmetrics}{VERPAT Modules and Outputs}
\item
  \href{https://github.com/visioneval/VisionEval/blob/master/api/model_system_design.md}{VisionEval Model System Design and Users Guide}
\item
  \href{https://planningtools.transportation.org/551/rapid-policy-analysis-tool.html}{TravelWorks Rapid Policy Assessment Tool}
\item
  \href{https://planningtools.transportation.org/files/63.pdf}{RPAT User manual}
\end{itemize}

{[}{[}Overview \textbar{} VERPAT-Tutorial-Overview{]}{]}

\hypertarget{inputs-and-parameters-1}{%
\section{Inputs and Parameters}\label{inputs-and-parameters-1}}

VERPAT contains 5 definition files and 32 input files, some of which the user must change and others which typically remain unchanged. This page walks the end user through these files and specifies which files must be updated to implement VERPAT in a new region.

The following five files need to be configured in the ``defs'' directory:

\begin{itemize}
\tightlist
\item
  \protect\hyperlink{run_parametersjson}{run\_parameters.json}
\item
  \protect\hyperlink{model_parametersjson}{model\_parameters.json}
\item
  \protect\hyperlink{deflatorscsv}{deflators.csv}
\item
  \protect\hyperlink{geocsv}{geo.csv}
\item
  \protect\hyperlink{unitscsv}{units.csv}
\end{itemize}

\hypertarget{run_parameters.json-1}{%
\subsubsection{run\_parameters.json}\label{run_parameters.json-1}}

The ``run\_parameters.json'' file contains parameters that define key attributes of the model run and relationships to other model runs. A more detailed description of the file can be found \href{https://github.com/visioneval/VisionEval/blob/master/api/model_system_design.md\#61-model-directory-structure}{here}. The results of model run are stored in a directory with the name specified by \texttt{"DatastoreName"}. This name should be changed when running different scenarios. For e.g.~when running base scenario the output directory name can be set to \emph{BaseScenario} by using \texttt{"DatastoreName":\ {[}"BaseScenario"{]}} in the file. The format of the VERPAT \emph{run\_parameters.json} file is as follows:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{\{}
    \DataTypeTok{"Model"}\FunctionTok{:} \OtherTok{[}\StringTok{"RPAT"}\OtherTok{]}\FunctionTok{,}
    \DataTypeTok{"Scenario"}\FunctionTok{:} \OtherTok{[}\StringTok{"RPAT Pilot"}\OtherTok{]}\FunctionTok{,}
    \DataTypeTok{"Description"}\FunctionTok{:} \OtherTok{[}\StringTok{"Pilot RPAT module in VisionEval"}\OtherTok{]}\FunctionTok{,}
    \DataTypeTok{"Region"}\FunctionTok{:} \OtherTok{[}\StringTok{"Multnomah County Oregon"}\OtherTok{]}\FunctionTok{,}
    \DataTypeTok{"BaseYear"}\FunctionTok{:} \OtherTok{[}\StringTok{"2005"}\OtherTok{]}\FunctionTok{,}
    \DataTypeTok{"Years"}\FunctionTok{:} \OtherTok{[}\StringTok{"2005"}\OtherTok{,} \StringTok{"2035"}\OtherTok{]}\FunctionTok{,}
    \DataTypeTok{"DatastoreName"}\FunctionTok{:} \OtherTok{[}\StringTok{"Datastore"}\OtherTok{]}\FunctionTok{,}
    \DataTypeTok{"DatastoreType"}\FunctionTok{:} \OtherTok{[}\StringTok{"RD"}\OtherTok{]}\FunctionTok{,}
    \DataTypeTok{"Seed"}\FunctionTok{:} \OtherTok{[}\DecValTok{1}\OtherTok{]}\FunctionTok{,}
    \DataTypeTok{"RunTypes"}\FunctionTok{:} \OtherTok{[}\StringTok{"E"}\OtherTok{,} \StringTok{"ELESNP"}\OtherTok{]}
\FunctionTok{\}}
\end{Highlighting}
\end{Shaded}

\protect\hyperlink{inputs}{Inputs} \protect\hyperlink{model-parameters}{Model Parameters} \protect\hyperlink{model-definition-files}{Definitions}

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\hypertarget{model_parameters.json-1}{%
\subsubsection{model\_parameters.json}\label{model_parameters.json-1}}

The ``model\_parameters.json'' can contain global parameters for a particular model configuration that may be used by multiple modules. A more detailed description of the file and its structure can be found \href{https://github.com/visioneval/VisionEval/blob/master/api/model_system_design.md\#61-model-directory-structure}{here}. The description about the variables, required for \textbf{VERPAT}, listed in the file are documented by the modules that uses them in the \href{VERPAT-Modules-and-Outputs}{inputs and outputs} section. Some of these values may be modified to run scenarios. The variables that can be modified are described further \protect\hyperlink{input-files}{Input Files}. The format of the VERPAT \emph{model\_parameters.json} file is as follows:

\begin{Shaded}
\begin{Highlighting}[]
\OtherTok{[}
  \FunctionTok{\{}\DataTypeTok{"NAME"}\FunctionTok{:} \StringTok{"EmploymentGrowth"}\FunctionTok{,}
   \DataTypeTok{"VALUE"}\FunctionTok{:} \StringTok{"1.5"}\FunctionTok{,}
   \DataTypeTok{"TYPE"}\FunctionTok{:} \StringTok{"double"}\FunctionTok{,}
   \DataTypeTok{"UNITS"}\FunctionTok{:} \StringTok{"multiplier"}\FunctionTok{,}
   \DataTypeTok{"PROHIBIT"}\FunctionTok{:} \StringTok{""}\FunctionTok{,}
   \DataTypeTok{"ISELEMENTOF"}\FunctionTok{:} \StringTok{""}\FunctionTok{\}}\OtherTok{,}
  \FunctionTok{\{}
    \DataTypeTok{"NAME"}\FunctionTok{:} \StringTok{"FwyLaneMiGrowth"}\FunctionTok{,}
    \DataTypeTok{"VALUE"}\FunctionTok{:} \StringTok{"1"}\FunctionTok{,}
    \DataTypeTok{"TYPE"} \FunctionTok{:} \StringTok{"double"}\FunctionTok{,}
    \DataTypeTok{"UNITS"} \FunctionTok{:} \StringTok{"multiplier"}\FunctionTok{,}
    \DataTypeTok{"PROHIBIT"} \FunctionTok{:} \StringTok{"c(\textquotesingle{}NA\textquotesingle{}, \textquotesingle{}\textless{} 0\textquotesingle{})"}\FunctionTok{,}
    \DataTypeTok{"ISELEMENTOF"} \FunctionTok{:} \StringTok{""}
  \FunctionTok{\}}\OtherTok{,}
  \FunctionTok{\{}
    \DataTypeTok{"NAME"} \FunctionTok{:} \StringTok{"ArtLaneMiGrowth"}\FunctionTok{,}
    \DataTypeTok{"VALUE"}\FunctionTok{:} \StringTok{"1"}\FunctionTok{,}
    \DataTypeTok{"TYPE"} \FunctionTok{:} \StringTok{"double"}\FunctionTok{,}
    \DataTypeTok{"UNITS"} \FunctionTok{:} \StringTok{"multiplier"}\FunctionTok{,}
    \DataTypeTok{"PROHIBIT"} \FunctionTok{:} \StringTok{"c(\textquotesingle{}NA\textquotesingle{}, \textquotesingle{}\textless{} 0\textquotesingle{})"}\FunctionTok{,}
    \DataTypeTok{"ISELEMENTOF"} \FunctionTok{:} \StringTok{""}
  \FunctionTok{\}}\OtherTok{,}
  \ErrorTok{.}
  \ErrorTok{.}
  \ErrorTok{.}
  \FunctionTok{\{}
    \DataTypeTok{"NAME"} \FunctionTok{:} \StringTok{"AutoCostGrowth"}\FunctionTok{,}
    \DataTypeTok{"VALUE"}\FunctionTok{:} \StringTok{"1.5"}\FunctionTok{,}
    \DataTypeTok{"TYPE"} \FunctionTok{:} \StringTok{"double"}\FunctionTok{,}
    \DataTypeTok{"UNITS"} \FunctionTok{:} \StringTok{"multiplier"}\FunctionTok{,}
    \DataTypeTok{"PROHIBIT"} \FunctionTok{:} \StringTok{"c(\textquotesingle{}NA\textquotesingle{}, \textquotesingle{}\textless{} 0\textquotesingle{})"}\FunctionTok{,}
    \DataTypeTok{"ISELEMENTOF"} \FunctionTok{:} \StringTok{""}
  \FunctionTok{\}}
\OtherTok{]}
\end{Highlighting}
\end{Shaded}

\protect\hyperlink{inputs}{Inputs} \protect\hyperlink{model-parameters}{Model Parameters} \protect\hyperlink{model-definition-files}{Definitions}

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\hypertarget{deflators.csv-1}{%
\subsubsection{deflators.csv}\label{deflators.csv-1}}

The \textbf{deflators.csv} file defines the annual deflator values, such as the consumer price index, that are used to convert currency values between different years for currency denomination. This file does not need to be modified unless the years for which the dollar values used in the input dataset is not contained in this file. The format of the file is as follows:

\begin{longtable}[]{@{}cc@{}}
\toprule()
Year & Value \\
\midrule()
\endhead
1999 & 172.6 \\
2000 & 178 \\
2001 & 182.4 \\
\includegraphics{./VERPAT_images/vdots.gif} & \includegraphics{./VERPAT_images/vdots.gif} \\
\bottomrule()
\end{longtable}

\protect\hyperlink{inputs}{Inputs} \protect\hyperlink{model-parameters}{Model Parameters} \protect\hyperlink{model-definition-files}{Definitions}

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\hypertarget{geo.csv-1}{%
\subsubsection{geo.csv}\label{geo.csv-1}}

The ``geography.csv'' file describes all of the geographic relationships for the model and the names of geographic entities in a \href{https://en.wikipedia.org/wiki/Comma-separated_values}{CSV-formatted} text file. \textbf{Azone}, \textbf{Bzone}, and \textbf{Marea} should remain consistent with the input data. The format of the file is as follows:

\begin{longtable}[]{@{}
  >{\centering\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.2500}}
  >{\centering\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.2500}}
  >{\centering\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.2500}}
  >{\centering\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.2500}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\centering
\href{https://github.com/visioneval/VisionEval/blob/master/api/model_system_design.md\#62-model-geography}{Azone}
\end{minipage} & \begin{minipage}[b]{\linewidth}\centering
\href{https://github.com/visioneval/VisionEval/blob/master/api/model_system_design.md\#62-model-geography}{Bzone}
\end{minipage} & \begin{minipage}[b]{\linewidth}\centering
\href{https://github.com/visioneval/VisionEval/blob/master/api/model_system_design.md\#62-model-geography}{Czone}
\end{minipage} & \begin{minipage}[b]{\linewidth}\centering
\href{https://github.com/visioneval/VisionEval/blob/master/api/model_system_design.md\#62-model-geography}{Marea}
\end{minipage} \\
\midrule()
\endhead
Multnomah & Rur & NA & Multnomah \\
Multnomah & Sub\_R & NA & Multnomah \\
Multnomah & Sub\_E & NA & Multnomah \\
Multnomah & Sub\_M & NA & Multnomah \\
Multnomah & Sub\_T & NA & Multnomah \\
Multnomah & CIC\_R & NA & Multnomah \\
Multnomah & CIC\_E & NA & Multnomah \\
Multnomah & CIC\_M & NA & Multnomah \\
Multnomah & CIC\_T & NA & Multnomah \\
Multnomah & UC\_R & NA & Multnomah \\
Multnomah & UC\_E & NA & Multnomah \\
Multnomah & UC\_M & NA & Multnomah \\
Multnomah & UC\_T & NA & Multnomah \\
\bottomrule()
\end{longtable}

The geography is described by 13 place types as shown below. One emerging school of thought in land use planning is to consider land uses in terms of place types instead of simply residential or commercial or high density compared to low density. A place type refers to all of the characteristics of a developed area including the types of uses included, the mix of uses, the density and intensity of uses.

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 8\tabcolsep) * \real{0.1905}}
  >{\centering\arraybackslash}p{(\columnwidth - 8\tabcolsep) * \real{0.2024}}
  >{\centering\arraybackslash}p{(\columnwidth - 8\tabcolsep) * \real{0.2024}}
  >{\centering\arraybackslash}p{(\columnwidth - 8\tabcolsep) * \real{0.2024}}
  >{\centering\arraybackslash}p{(\columnwidth - 8\tabcolsep) * \real{0.2024}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
\end{minipage} & \begin{minipage}[b]{\linewidth}\centering
URBAN CORE
\end{minipage} & \begin{minipage}[b]{\linewidth}\centering
CLOSE-IN COMMUNITY
\end{minipage} & \begin{minipage}[b]{\linewidth}\centering
SUBURBAN
\end{minipage} & \begin{minipage}[b]{\linewidth}\centering
RURAL
\end{minipage} \\
\midrule()
\endhead
\textbf{Residential} & \includegraphics{./VERPAT_images/checkmark.gif} & \includegraphics{./VERPAT_images/checkmark.gif} & \includegraphics{./VERPAT_images/checkmark.gif} & \\
\textbf{Commercial} & \includegraphics{./VERPAT_images/checkmark.gif} & \includegraphics{./VERPAT_images/checkmark.gif} & \includegraphics{./VERPAT_images/checkmark.gif} & \\
\textbf{Mixed-Use} & \includegraphics{./VERPAT_images/checkmark.gif} & \includegraphics{./VERPAT_images/checkmark.gif} & \includegraphics{./VERPAT_images/checkmark.gif} & \\
\textbf{Transit-Oriented Development} & \includegraphics{./VERPAT_images/checkmark.gif} & \includegraphics{./VERPAT_images/checkmark.gif} & \includegraphics{./VERPAT_images/checkmark.gif} & \\
\textbf{Rural/Greenfield} & & & & \includegraphics{./VERPAT_images/checkmark.gif} \\
\bottomrule()
\end{longtable}

An initial typology or system to organize place types can be traced to the Smart Growth Transect, which contained six zones in its original configuration including:

\begin{itemize}
\tightlist
\item
  Rural Preserve
\item
  Rural Reserve
\item
  Edge
\item
  General
\item
  Center
\item
  Core
\end{itemize}

This approach to classifying place types was further refined in the Caltrans Smart Mobility which defined the following seven place types including:

\begin{itemize}
\tightlist
\item
  Urban Centers
\item
  Close-In Compact Communities
\item
  Compact Communities
\item
  Suburban Communities
\item
  Rural and Agricultural Lands
\item
  Protected Lands
\item
  Special Use Areas
\end{itemize}

Several of these place type categories provided additional options such as the Close-In Compact Communities which had three sub-definitions including Close-In-Centers, Close-In Corridors, and Close-In Neighborhoods.

An alternative view of place types was provided by Reconnecting America, which developed a performance based place type approach for describing areas proximate to transit stations. Station areas would vary in terms of their relative focus between residential units, employees or a mix of the two. Station areas are also characterized on their relative intensity as well as shown below.

\begin{figure}
\centering
\includegraphics{./VERPAT_images/performancebasedtypology.png}
\caption{PERFORMANCE BASED TYPOLOGY FOR TRANSIT STATION AREAS}
\end{figure}

The approach employed for the place types in RPAT is therefore an amalgam of these approaches, in that the terminology is borrowed from the Smart Growth Transect and Caltrans Smart Mobility Study, while the relative performance of each place type is taken from the Reconnecting America approach but applied to a region instead of transit station sites.

Four general area types are defined in RPAT including:

\begin{itemize}
\tightlist
\item
  The \textbf{Urban Core} is the high-density mixed-use places with high jobs-housing ratios, well connected streets and high levels of pedestrian activities. It is anticipated that for many regions, the Urban Core will be the traditional downtown area of which there likely would be only one.
\item
  The \textbf{Close-in Community} would be those areas located near to the Urban Cores and would consist primarily of housing with scattered mixed-use centers and arterial corridors. Housing would be varied in terms of density and type. Transit would be available with a primary focus on commute trips. These areas may be classified by their residents as suburban would be considered to be close-in communities given their adjacency to the Downtown and therefore the higher levels of regional accessibility.
\item
  The \textbf{Suburban} place type is anticipated to represent the majority of development within regions. These communities are characterized by low level of integration of housing with jobs, retail, and services, poorly connected street networks, low levels of transit service, large amounts of surface parking, and limited walk ability.
\item
  The \textbf{Rural} place type is defined as settlements of widely spaced towns separated by firms, vineyards, orchards, or grazing lands. These areas would be characterized by widely dispersed residential uses, little or no transit service, and very limited pedestrian facilities.
\end{itemize}

Further definition of the place types is allowed through the use of development types within the Urban Core, Close-in Community, and Suburban area types including:

\begin{itemize}
\tightlist
\item
  \textbf{Residential} includes all place types that are predominantly residential in character with limited employment and retail opportunities. Examples of this development type might include typical Suburban Residential or areas of the Downtown which are primarily residential as well. It is anticipated that this development type may be found in all of the area types except for rural.
\item
  \textbf{Employment} includes those areas which are focused on employment with limited retail and residential. An example of this might include a Suburban Office Complex or a large cluster of office buildings within a Close-in Community or Urban Core. As with the residential development type, it is anticipated that this type of use would be found in all place types except for rural.
\item
  \textbf{Mixed-Use} are those areas within a region which have a mix of residential, employment, and retail uses. While this development type can be found in the Suburban place type, it is most commonly found in the close-in community and urban core place type. Downtown areas that have retained their residential population to complement the employment are examples of this development type.
\item
  \textbf{Transit-Oriented Development (TOD)} which is similar to the other development types in that it is applied to all area types except for Rural areas since it is thought to be highly unlikely that a rural TOD would be developed. The TOD development type is characterized by greater access to transit in all area types. Examples of this development type might include a Suburban TOD focused on a commuter rail station.
\end{itemize}

The process of allocating existing land use to the 13 place types is somewhat dependent on the types of data available in a region that describe existing land use, and the process can be either very detailed or somewhat simplified. The following description relays the process developed by Atlanta Regional Commission (ARC) as part of the pilot testing of RPAT and provides an example of how, mechanically, an agency can approach this allocation. It should be noted that this is merely one approach and not a specific recommendation for a method that should be followed.

In general, ARC followed a somewhat detailed process to derive input data from land use data as presented in their ``Unified Growth Policy Map'', and from their regional travel demand model. They developed heuristics to align their land use with the 13 place types that RPAT uses.

The conversion of land use data to the place type scheme used in RPAT involved taking ARC's Unified Growth Policy Map (UGPM) Areas and converting them to the 13 RPAT place types.

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  The first step was to allocate the UGPM areas to the four area types used in RPAT. The Urban Core area type includes Region Core, Region Employment Centers and Aerotropolis UGPM areas; Close-in Community includes Maturing Neighborhoods; Suburban includes Developing Suburbs and Established Suburbs; and Rural includes Rural Areas and Developing Rural.
\item
  The ARC traffic analysis zone (TAZ) system was overlaid with the area types and the centroid of the TAZ was used to determine its area type.
\item
  The RPAT development type, the other dimension of the place type matrix, which included residential, mixed-use, employment, and TOD development types was determined for each TAZ not in the rural area type using the base year percentage of the TAZ's employment in relation to the total of the population and employment in the TAZ. The mix between the employment and employment was used to determine the TAZs development type using the following cut points:

  \begin{itemize}
  \tightlist
  \item
    Residential: \textless{} 33.33\%
  \item
    Mixed Use: 33.33\% to 66.67\%
  \item
    Employment: \textgreater{} 66.67\%
  \end{itemize}
\item
  Identify any TAZs that are TOD based on transit service and specific development types: only one TAZ was determined to be TOD as a development type, Lindbergh Center, in the Urban Core area type.
\item
  The combination of the area type and the development type was then used to allocate all TAZs to one of the 13 place types.
\end{enumerate}

The following is an enumeration of each place type abbreviation as it appears in the input file as well as a brief description of that value:

\begin{longtable}[]{@{}ll@{}}
\toprule()
Abbreviation & Description \\
\midrule()
\endhead
Rur & Rural \\
Sub\_R & Suburban Residential \\
Sub\_E & Suburban Employment (i.e.~Commercial) \\
Sub\_M & Suburban Mixed Use \\
Sub\_T & Suburban Transit Oriented Development \\
CIC\_R & Close-in Community Residential \\
CIC\_E & Close-in Community Employment (i.e.~Commercial) \\
CIC\_M & Close-in Community Mixed Use \\
CIC\_T & Close-in Community Transit Oriented Development \\
UC\_R & Urban Core Residential \\
UC\_E & Urban Core Employment (i.e.~Commercial) \\
UC\_M & Urban Core Mixed Use \\
UC\_T & Urban Core Transit Oriented Development \\
\bottomrule()
\end{longtable}

\protect\hyperlink{inputs}{Inputs} \protect\hyperlink{model-parameters}{Model Parameters} \protect\hyperlink{model-definition-files}{Definitions}

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\hypertarget{units.csv-1}{%
\subsection{units.csv}\label{units.csv-1}}

The ``units.csv'' file describes the default units to be used for storing complex data types in the model. This file should not be modified by the user. The format of the file is as follows:

\begin{longtable}[]{@{}ll@{}}
\toprule()
Type & Units \\
\midrule()
\endhead
currency & USD \\
distance & MI \\
area & SQMI \\
\includegraphics{./VERPAT_images/vdots.gif} & \includegraphics{./VERPAT_images/vdots.gif} \\
\bottomrule()
\end{longtable}

The VisionEval model system keeps track of the types and units of measure of all data that is processed. More details about the file and structure can be found \href{https://github.com/visioneval/VisionEval/blob/master/api/model_system_design.md\#63-data-types-units-and-currency-deflators}{here}.

\protect\hyperlink{inputs}{Inputs} \protect\hyperlink{model-parameters}{Model Parameters} \protect\hyperlink{model-definition-files}{Definitions}

\hypertarget{input-files}{%
\subsection{Input Files}\label{input-files}}

\hypertarget{inputs-1}{%
\subsubsection{Inputs}\label{inputs-1}}

The scenario inputs are split into four (4) categories: \emph{Built Environment}, \emph{Demand}, \emph{Policy}, and \emph{Supply}. There are two ways to specify these inputs. \textbf{CSV Inputs} are specified in a \texttt{*.csv} file and \textbf{JSON Inputs} are specified in \texttt{model\_parameters.json} file. The users are encouraged to change these inputs to build different scenarios. The \href{RPAT-To-VERPAT}{RPAT to VERPAT} the connection between RPAT inputs to VERPAT inputs.

\protect\hyperlink{built-environment}{\textbf{Built Environment}}
- CSV Inputs
- \protect\hyperlink{bzone_pop_emp_propcsv}{bzone\_pop\_emp\_prop.csv}

\protect\hyperlink{demand}{\textbf{Demand}}
- CSV Inputs
- \protect\hyperlink{region_trips_per_capcsv}{region\_trips\_per\_cap.csv}
- \protect\hyperlink{azone_employment_by_naicscsv}{azone\_employment\_by\_naics.csv}
- \protect\hyperlink{azone_hh_pop_by_agecsv}{azone\_hh\_pop\_by\_age.csv}
- \protect\hyperlink{azone_gq_pop_by_agecsv}{azone\_gq\_pop\_by\_age.csv}
- \protect\hyperlink{azone_hhsize_targetscsv}{azone\_hhsize\_targets.csv}
- \protect\hyperlink{azone_per_cap_inccsv}{azone\_per\_cap\_inc.csv}
- \protect\hyperlink{azone_relative_employmentcsv}{azone\_relative\_employment.csv}
- \protect\hyperlink{region_truck_bus_vmtcsv}{region\_truck\_bus\_vmt.csv}
- JSON Inputs
- \protect\hyperlink{baseltvehdvmt}{BaseLtVehDvmt}
- \protect\hyperlink{basefwyartprop}{BaseFwyArtProp}
- \protect\hyperlink{employmentgrowth}{EmploymentGrowth}

\protect\hyperlink{Transport-Supply}{\textbf{Transport Supply}}

\begin{itemize}
\tightlist
\item
  CSV Inputs

  \begin{itemize}
  \tightlist
  \item
    \protect\hyperlink{marea_lane_milescsv}{marea\_lane\_miles.csv}
  \item
    \protect\hyperlink{marea_rev_miles_pccsv}{marea\_rev\_miles\_pc.csv}
  \end{itemize}
\end{itemize}

\protect\hyperlink{policy}{\textbf{Policy}}
- CSV Inputs
- \protect\hyperlink{region_commute_optionscsv}{region\_commute\_options.csv}
- \protect\hyperlink{azone_its_propcsv}{azone\_its\_prop.csv}
- \protect\hyperlink{region_light_vehiclescsv}{region\_light\_vehicles.csv}
- \protect\hyperlink{marea_parking_growthcsv}{marea\_parking\_growth.csv}
- JSON Inputs
- \protect\hyperlink{autocostgrowth}{AutoCostGrowth}
- \protect\hyperlink{fwylanemigrowth}{FwyLaneMiGrowth}
- \protect\hyperlink{artlanemigrowth}{ArtLaneMiGrowth}
- \protect\hyperlink{busrevmipcgrowth}{BusRevMiPCGrowth}
- \protect\hyperlink{railrevmipcgrowth}{RailRevMiPCGrowth}
- \protect\hyperlink{vmtcharge}{VmtCharge}

\hypertarget{model-parameters-2}{%
\subsubsection{Model Parameters}\label{model-parameters-2}}

There are two ways to specify model parameters. \textbf{CSV Parameters} are specified in a \texttt{*.csv} file and \textbf{JSON Parameters} in a \texttt{model\_parameters.json} file. While you are provided access to the model parameters, you are encouraged to use the default parameter values unless directed to use alternatives. Editing modeling parameters should be based only on research pertaining to local data sources and may result in unpredictable results.

\protect\hyperlink{model-parameters-1}{\textbf{Model Parameters}}

\begin{itemize}
\tightlist
\item
  CSV Parameters

  \begin{itemize}
  \tightlist
  \item
    \protect\hyperlink{model_accident_ratescsv}{model\_accident\_rates.csv}
  \item
    \protect\hyperlink{model_fuel_prop_by_vehcsv}{model\_fuel\_prop\_by\_veh.csv}
  \item
    \protect\hyperlink{model_fuel_composition_propcsv}{model\_fuel\_composition\_prop.csv}
  \item
    \protect\hyperlink{model_fuel_co2csv}{model\_fuel\_co2.csv}
  \item
    \protect\hyperlink{model_place_type_elasticitiescsv}{model\_place\_type\_elasticities.csv}
  \item
    \protect\hyperlink{model_place_type_relative_valuescsv}{model\_place\_type\_relative\_values.csv}
  \item
    \protect\hyperlink{model_tdm_ridesharingcsv}{model\_tdm\_ridesharing.csv}
  \item
    \protect\hyperlink{model_tdm_transitcsv}{model\_tdm\_transit.csv}
  \item
    \protect\hyperlink{model_tdm_transitlevelscsv}{model\_tdm\_transitlevels.csv}
  \item
    \protect\hyperlink{model_tdm_vanpoolingcsv}{model\_tdm\_vanpooling.csv}
  \item
    \protect\hyperlink{model_tdm_workschedulecsv}{model\_tdm\_workschedule.csv}
  \item
    \protect\hyperlink{model_tdm_workschedulelevelscsv}{model\_tdm\_workschedulelevels.csv}
  \item
    \protect\hyperlink{model_transportation_costscsv}{model\_transportation\_costs.csv}
  \item
    \protect\hyperlink{model_veh_mpg_by_yearcsv}{model\_veh\_mpg\_by\_year.csv}
  \item
    \protect\hyperlink{model_phev_range_prop_mpg_mpkwhcsv}{model\_phev\_range\_prop\_mpg\_mpkwh.csv}
  \item
    \protect\hyperlink{model_hev_prop_mpgcsv}{model\_hev\_prop\_mpg.csv}
  \item
    \protect\hyperlink{model_ev_range_prop_mpkwhcsv}{model\_ev\_range\_prop\_mpkwh.csv}
  \end{itemize}
\item
  JSON Parameters

  \begin{itemize}
  \tightlist
  \item
    \protect\hyperlink{annvmtinflator}{AnnVmtInflator}
  \item
    \protect\hyperlink{basecostpermile}{BaseCostPerMile}
  \item
    \protect\hyperlink{DvmtBudgetProp}{DvmtBudgetProp}
  \item
    \protect\hyperlink{FuelCost}{FuelCost}
  \item
    \protect\hyperlink{kwhcost}{KwhCost}
  \item
    \protect\hyperlink{GasTax}{GasTax}
  \item
    \protect\hyperlink{LtTruckProp}{LtTruckProp}
  \item
    \protect\hyperlink{TranRevMiAdjFactor}{TranRevMiAdjFactor}
  \item
    \protect\hyperlink{TruckVmtGrowthMultiplier}{TruckVmtGrowthMultiplier}
  \item
    \protect\hyperlink{WorkVmtProp}{WorkVmtProp}
  \end{itemize}
\end{itemize}

\hypertarget{input-files-to-change-1}{%
\subsection{Input Files to Change}\label{input-files-to-change-1}}

The user should change the input files described here.

\hypertarget{built-environment-1}{%
\subsection{Built Environment}\label{built-environment-1}}

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\hypertarget{csv-inputs-5}{%
\subsubsection{CSV Inputs}\label{csv-inputs-5}}

\hypertarget{bzone_pop_emp_prop.csv-1}{%
\subsubsection{bzone\_pop\_emp\_prop.csv}\label{bzone_pop_emp_prop.csv-1}}

\textbf{Population and Jobs by Place Type}: This file contains the distribution of population and employment among the 13 place types for base and future year. See \href{https://github.com/visioneval/VisionEval/wiki/VERPAT-Inputs-and-Outputs\#geocsv}{this} explanation for more infomation regarding place types. Each column, for each year, must sum to one (1). It is acceptable to have no land use (i.e.~a value of 0) in certain categories.

The yearly TAZ employment and population totals were summed by the 13 place type and then scaled to total one for both employment and population. The allocation of growth between the base and the future years in population and employment to each of the 13 place types is captured by the rows containing future years. The discussion of the population and jobs by place type input above describes how to allocate existing land use to the 13 place types. A similar approach can be used to allocate expected growth from spatial planning resources such as TAZ or Census Block Group level forecasts to the place types.
Here is a snapshot of the file:

\begin{longtable}[]{@{}llll@{}}
\toprule()
Geo & Year & Pop & Emp \\
\midrule()
\endhead
Rur & 2005 & 0.05 & 0.1 \\
Sub\_R & 2005 & 0.3 & 0 \\
Sub\_E & 2005 & 0 & 0.2 \\
Sub\_M & 2005 & 0.1 & 0.1 \\
Sub\_T & 2005 & 0 & 0 \\
CIC\_R & 2005 & 0.15 & 0 \\
CIC\_E & 2005 & 0 & 0.2 \\
CIC\_M & 2005 & 0.1 & 0.1 \\
CIC\_T & 2005 & 0 & 0 \\
UC\_R & 2005 & 0.1 & 0 \\
UC\_E & 2005 & 0 & 0.1 \\
UC\_M & 2005 & 0.1 & 0.1 \\
UC\_T & 2005 & 0.1 & 0.1 \\
Rur & 2035 & 0.05 & 0.1 \\
Sub\_R & 2035 & 0.3 & 0 \\
Sub\_E & 2035 & 0 & 0.2 \\
Sub\_M & 2035 & 0.1 & 0.1 \\
Sub\_T & 2035 & 0 & 0 \\
CIC\_R & 2035 & 0.15 & 0 \\
CIC\_E & 2035 & 0 & 0.2 \\
CIC\_M & 2035 & 0.1 & 0.1 \\
CIC\_T & 2035 & 0 & 0 \\
UC\_R & 2035 & 0.1 & 0 \\
UC\_E & 2035 & 0 & 0.1 \\
UC\_M & 2035 & 0.1 & 0.1 \\
UC\_T & 2035 & 0.1 & 0.1 \\
\bottomrule()
\end{longtable}

\protect\hyperlink{inputs}{Inputs} \protect\hyperlink{model-parameters}{Model Parameters} \protect\hyperlink{model-definition-files}{Definitions}

\hypertarget{demand-1}{%
\subsection{Demand}\label{demand-1}}

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\hypertarget{csv-inputs-6}{%
\subsubsection{CSV Inputs}\label{csv-inputs-6}}

\hypertarget{region_trips_per_cap.csv-1}{%
\subsubsection{region\_trips\_per\_cap.csv}\label{region_trips_per_cap.csv-1}}

\textbf{Auto and transit trips per capita}: This file contains regional averages for auto and transit trips per capita per day for the base year.

\begin{itemize}
\tightlist
\item
  \textbf{Auto} is the regional average of auto trips per capita, including drive alone and shared ride travel. This data can be derived from the \href{https://nhts.ornl.gov/}{National Household Travel Survey} by region or from a local household travel survey or regional travel demand forecasting model.
\item
  \textbf{Transit} is the regional average of transit trips per capita, including walk and drive access to transit. This data can be derived from the \href{https://www.transit.dot.gov/ntd/ntd-data}{National Transit Database} where the annual database contains a ``service'' table that has annual transit trip data for each transit operator or from a local household travel survey or regional travel demand forecasting model.
\end{itemize}

Here is a snapshot of the files:

\begin{longtable}[]{@{}ll@{}}
\toprule()
Mode & Trips \\
\midrule()
\endhead
Auto & 3.2 \\
Transit & 0.4 \\
\bottomrule()
\end{longtable}

\protect\hyperlink{inputs}{Inputs} \protect\hyperlink{model-parameters}{Model Parameters} \protect\hyperlink{model-definition-files}{Definitions}

\hypertarget{azone_employment_by_naics.csv-1}{%
\subsubsection{azone\_employment\_by\_naics.csv}\label{azone_employment_by_naics.csv-1}}

\textbf{Employment}: This file contains employment data for each of the counties that make up the region. The file is derived from County Business Pattern (\href{http://www.census.gov/econ/cbp/}{CBP}) data by county. Industries are categorized by the North American Industrial Classification System (NAICS) 6 digit codes. Firm size categories are:

\begin{itemize}
\tightlist
\item
  \textbf{n1\_4}: 1- 4 employees
\item
  \textbf{n5\_9}: 5-9 employees
\item
  \textbf{n10\_19}: 10-19 employees
\item
  \textbf{n20\_99}: 20-99 employees
\item
  \textbf{n100\_249}: 100-249 employees
\item
  \textbf{n250\_499}: 250-499 employees
\item
  \textbf{n500\_999}: 500-999 employees
\item
  \textbf{n1000}: 1,000 or More Employee Size Class
\item
  \textbf{n1000\_1}: 1,000-1,499 employees
\item
  \textbf{n1000\_2}: 1,500-2,499 employees
\item
  \textbf{n1000\_3}: 2,500 to 4, 999 Employees
\item
  \textbf{n1000\_4}: Over 5,000 employees
\end{itemize}

While the county field is required to be present, the business synthesis process does not require a meaningful value and therefore users may simply enter `region'. The consistency in the naming of the ``region'' should be maintained across all the files that contains the label \emph{``county''} or \emph{``Geo''}. It is also not necessary to use such detailed NAICS categories if those are not available; the current business synthesis model and subsequent models do not use this level of detail (although future versions of the model may) -- at minimum, the number of establishments for all employment types can be provided by size category. Regions with significant employment in industries such as government and public administration that are not covered by the CBP may need to add records to the file that cover this type of employment to more accurately match employment totals in their region. The two additional fields contained in the file are:

\begin{itemize}
\tightlist
\item
  \textbf{emp}: Total number of employees
\item
  \textbf{est}: Total number of establishments
\end{itemize}

Here is the snapshot of the file:

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 34\tabcolsep) * \real{0.0818}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 34\tabcolsep) * \real{0.0364}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 34\tabcolsep) * \real{0.0545}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 34\tabcolsep) * \real{0.0364}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 34\tabcolsep) * \real{0.0364}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 34\tabcolsep) * \real{0.0364}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 34\tabcolsep) * \real{0.0364}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 34\tabcolsep) * \real{0.0545}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 34\tabcolsep) * \real{0.0545}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 34\tabcolsep) * \real{0.0545}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 34\tabcolsep) * \real{0.0727}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 34\tabcolsep) * \real{0.0727}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 34\tabcolsep) * \real{0.0727}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 34\tabcolsep) * \real{0.0455}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 34\tabcolsep) * \real{0.0636}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 34\tabcolsep) * \real{0.0636}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 34\tabcolsep) * \real{0.0636}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 34\tabcolsep) * \real{0.0636}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
county
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
year
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
naics
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
emp
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
est
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
n1\_4
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
n5\_9
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
n10\_19
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
n20\_49
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
n50\_99
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
n100\_249
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
n250\_499
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
n500\_999
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
n1000
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
n1000\_1
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
n1000\_2
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
n1000\_3
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
n1000\_4
\end{minipage} \\
\midrule()
\endhead
Multnomah & 2005 & 113110 & 0 & 5 & 2 & 1 & 0 & 2 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 \\
Multnomah & 2005 & 113310 & 0 & 3 & 2 & 0 & 0 & 1 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 \\
Multnomah & 2005 & 114111 & 0 & 1 & 0 & 1 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 \\
Multnomah & 2005 & 114112 & 0 & 1 & 1 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 \\
Multnomah & 2005 & 115114 & 0 & 1 & 0 & 0 & 0 & 0 & 0 & 0 & 1 & 0 & 0 & 0 & 0 & 0 & 0 \\
Multnomah & 2005 & 115210 & 0 & 4 & 3 & 1 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 \\
Multnomah & 2005 & 115310 & 0 & 5 & 2 & 0 & 1 & 1 & 1 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 \\
Multnomah & 2005 & 212319 & 0 & 1 & 1 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 \\
Multnomah & 2005 & 212321 & 0 & 4 & 1 & 1 & 1 & 1 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 \\
\bottomrule()
\end{longtable}

\protect\hyperlink{inputs}{Inputs} \protect\hyperlink{model-parameters}{Model Parameters} \protect\hyperlink{model-definition-files}{Definitions}

\hypertarget{azone_hh_pop_by_age.csv-1}{%
\subsubsection{azone\_hh\_pop\_by\_age.csv}\label{azone_hh_pop_by_age.csv-1}}

\textbf{Household population}: This file contains population estimates/forecasts by county and age cohort for each of the base and future years. The file format includes six age categories used by the population synthesis model:

\begin{itemize}
\tightlist
\item
  \textbf{0-14}
\item
  \textbf{15-19}
\item
  \textbf{20-29}
\item
  \textbf{30-54}
\item
  \textbf{55-64}
\item
  \textbf{65 Plus}
\end{itemize}

Future year data must be developed by the user; in many regions population forecasts are available from regional or state agencies and/or local academic sources. As with the employment data inputs the future data need not be county specific. Rather, regional totals by age group can be entered into the file with a value such as ``region'' entered in the county field.

Here is a snapshot of the file:

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 14\tabcolsep) * \real{0.1364}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 14\tabcolsep) * \real{0.0606}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 14\tabcolsep) * \real{0.1212}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 14\tabcolsep) * \real{0.1364}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 14\tabcolsep) * \real{0.1364}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 14\tabcolsep) * \real{0.1364}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 14\tabcolsep) * \real{0.1364}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 14\tabcolsep) * \real{0.1364}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Geo
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Year
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Age0to14
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Age15to19
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Age20to29
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Age30to54
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Age55to64
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Age65Plus
\end{minipage} \\
\midrule()
\endhead
Multnomah & 2005 & 129869 & 41133 & 99664 & 277854 & 71658 & 72648 \\
Multnomah & 2035 & 169200 & 48800 & 144050 & 327750 & 116100 & 162800 \\
\bottomrule()
\end{longtable}

\protect\hyperlink{inputs}{Inputs} \protect\hyperlink{model-parameters}{Model Parameters} \protect\hyperlink{model-definition-files}{Definitions}

\hypertarget{azone_gq_pop_by_age.csv-construction-1}{%
\subsubsection{azone\_gq\_pop\_by\_age.csv :construction:}\label{azone_gq_pop_by_age.csv-construction-1}}

\textbf{Group quarter population}: This file contains group quarters population estimates/forecasts by county and age cohort for each of the base and future years. The file format includes six age categories used by the population synthesis model:

\begin{itemize}
\tightlist
\item
  \textbf{0-14}
\item
  \textbf{15-19}
\item
  \textbf{20-29}
\item
  \textbf{30-54}
\item
  \textbf{55-64}
\item
  \textbf{65 Plus}
\end{itemize}

Here is a snapshot of the file:

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 14\tabcolsep) * \real{0.1071}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 14\tabcolsep) * \real{0.0476}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 14\tabcolsep) * \real{0.1310}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 14\tabcolsep) * \real{0.1429}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 14\tabcolsep) * \real{0.1429}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 14\tabcolsep) * \real{0.1429}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 14\tabcolsep) * \real{0.1429}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 14\tabcolsep) * \real{0.1429}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Geo
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Year
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
GrpAge0to14
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
GrpAge15to19
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
GrpAge20to29
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
GrpAge30to54
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
GrpAge55to64
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
GrpAge65Plus
\end{minipage} \\
\midrule()
\endhead
Multnomah & 2005 & 0 & 0 & 0 & 1 & 0 & 0 \\
Multnomah & 2035 & 0 & 0 & 0 & 1 & 0 & 0 \\
\bottomrule()
\end{longtable}

\protect\hyperlink{inputs}{Inputs} \protect\hyperlink{model-parameters}{Model Parameters} \protect\hyperlink{model-definition-files}{Definitions}

\hypertarget{azone_hhsize_targets.csv-construction-1}{%
\subsubsection{azone\_hhsize\_targets.csv :construction:}\label{azone_hhsize_targets.csv-construction-1}}

\textbf{Household size (\emph{azone\_hhsize\_targets.csv})}: This file contains the household specific targets. This contain two household specific attributes:

\begin{itemize}
\tightlist
\item
  \textbf{AveHhSize}: Average household size of households (non-group quarters)
\item
  \textbf{Prop1PerHh}: Proportion of households (non-group quarters) having only one person
\end{itemize}

Here is a snapshot of the file:

\begin{longtable}[]{@{}llll@{}}
\toprule()
Geo & Year & AveHhSize & Prop1PerHh \\
\midrule()
\endhead
Multnomah & 2005 & NA & NA \\
Multnomah & 2035 & NA & NA \\
\bottomrule()
\end{longtable}

\protect\hyperlink{inputs}{Inputs} \protect\hyperlink{model-parameters}{Model Parameters} \protect\hyperlink{model-definition-files}{Definitions}

\hypertarget{azone_per_cap_inc.csv-1}{%
\subsubsection{azone\_per\_cap\_inc.csv}\label{azone_per_cap_inc.csv-1}}

\textbf{Regional income}: This file contains information on regional average per capita household (\textbf{HHIncomePC}) and group quarters (\textbf{GQIncomePC}) income by forecast year in year 2000 dollars. The data can be obtained from the U.S. Department of \href{http://www.bea.gov/regional/index.htm}{Commerce Bureau of Economic Analysis} for the current year or from regional or state sources for forecast years. In order to use current year dollars just replace \textbf{\emph{2000}} in column labels with current year. For example, if the data is obtained in year 2005 dollars then the column labels in the file shown below will become \textbf{HHIncomePC.2005} and \textbf{GQIncomePC.2005}.
Here is a snapshot of the file:

\begin{longtable}[]{@{}llll@{}}
\toprule()
Geo & Year & HHIncomePC.2000 & GQIncomePC.2000 \\
\midrule()
\endhead
Multnomah & 2005 & 32515 & 0 \\
Multnomah & 2035 & 40000 & 0 \\
\bottomrule()
\end{longtable}

\protect\hyperlink{inputs}{Inputs} \protect\hyperlink{model-parameters}{Model Parameters} \protect\hyperlink{model-definition-files}{Definitions}

\hypertarget{azone_relative_employment.csv-1}{%
\subsubsection{azone\_relative\_employment.csv}\label{azone_relative_employment.csv-1}}

\textbf{Relative employment}: This file contains ratio of workers to persons by age cohort in model year vs.~estimation data year. The relative employment value for each age group, which is the employment rate for the age group relative to the employment rate for the model estimation year data is used to adjust the relative employment to reflect changes in relative employment for other years. This file contains five age cohorts:

\begin{itemize}
\tightlist
\item
  \textbf{RelEmp15to19}: Ratio of workers to persons age 15 to 19 in model year vs.~in estimation data year
\item
  \textbf{RelEmp20to29}: Ratio of workers to persons age 20 to 29 in model year vs.~in estimation data year
\item
  \textbf{RelEmp30to54}: Ratio of workers to persons age 30 to 54 in model year vs.~in estimation data year
\item
  \textbf{RelEmp55to64}: Ratio of workers to persons age 55 to 64 in model year vs.~in estimation data year
\item
  \textbf{RelEmp65Plus}: Ratio of workers to persons age 65 or older in model year vs.~in estimation data year
\end{itemize}

Here is a snapshot of the file:

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 12\tabcolsep) * \real{0.1233}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 12\tabcolsep) * \real{0.0548}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 12\tabcolsep) * \real{0.1644}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 12\tabcolsep) * \real{0.1644}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 12\tabcolsep) * \real{0.1644}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 12\tabcolsep) * \real{0.1644}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 12\tabcolsep) * \real{0.1644}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Geo
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Year
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
RelEmp15to19
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
RelEmp20to29
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
RelEmp30to54
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
RelEmp55to64
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
RelEmp65Plus
\end{minipage} \\
\midrule()
\endhead
Multnomah & 2005 & 1 & 1 & 1 & 1 & 1 \\
Multnomah & 2035 & 1 & 1 & 1 & 1 & 1 \\
\bottomrule()
\end{longtable}

\protect\hyperlink{inputs}{Inputs} \protect\hyperlink{model-parameters}{Model Parameters} \protect\hyperlink{model-definition-files}{Definitions}

\hypertarget{region_truck_bus_vmt.csv-1}{%
\subsubsection{region\_truck\_bus\_vmt.csv}\label{region_truck_bus_vmt.csv-1}}

\textbf{Truck and bus vmt}: This file contains the region's proportion of VMT by truck and bus as well as the distribution of that VMT across functional classes (\emph{freeway}, \emph{arterial}, \emph{other}). The file includes one row for bus VMT data and one row for Truck VMT data. It should be noted that it is not necessary to enter values in the \textbf{PropVmt} column for \textbf{BusVmt} as this is calculated using the values in the \textbf{\emph{transportation\_supply.csv}} \#EDIT (marea\_rev\_miles\_pc.csv?) user input file. The truck VMT proportion (PropVMT column, TruckVMT row) can be obtained from \href{http://www.fhwa.dot.gov/policyinformation/hpms.cfm}{Highway Performance Monitoring System} data and local sources or the regional travel demand model if one exists.
The proportions of VMT by functional class can be derived from the Federal Highway Cost Allocation Study and data from transit operators. The Federal Highway Cost Allocation Study (Table II-6, 1997 Federal Highway Cost Allocation Study Final Report, \href{http://www.fhwa.dot.gov/policy/hcas/final/two.cfm}{Chapter II} is used to calculate the average proportion of truck VMT by functional class. Data from transit authorities are used to calculate the proportions of bus VMT by urban area functional class.
Here is a snapshot of the file:

\begin{longtable}[]{@{}lllll@{}}
\toprule()
Type & PropVmt & Fwy & Art & Other \\
\midrule()
\endhead
BusVmt & 0 & 0.15 & 0.591854 & 0.258146 \\
TruckVmt & 0.08 & 0.452028 & 0.398645 & 0.149327 \\
\bottomrule()
\end{longtable}

\protect\hyperlink{inputs}{Inputs} \protect\hyperlink{model-parameters}{Model Parameters} \protect\hyperlink{model-definition-files}{Definitions}

\hypertarget{json-inputs-3}{%
\subsubsection{JSON Inputs}\label{json-inputs-3}}

\hypertarget{baseltvehdvmt-1}{%
\subsubsection{BaseLtVehDvmt}\label{baseltvehdvmt-1}}

\textbf{Light vehicle dvmt (\emph{BaseLtVehDvmt})}: Total light vehicle daily VMT for the base year in thousands of miles. This data can be derived from a combination of \href{http://www.fhwa.dot.gov/policyinformation/hpms.cfm}{Highway Performance Monitoring System} data, Federal Highway Cost Allocation Study data, and regional data. Light vehicle daily VMT can be estimated by subtracting truck and bus VMT from total VMT provided in the Highway Performance Monitoring System (HPMS). Regional travel demand model outputs can also be used to derive these data. It should be defined in \protect\hyperlink{model_parametersjson}{model\_parameters.json} as follows:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{\{}
    \DataTypeTok{"NAME"} \FunctionTok{:} \StringTok{"BaseLtVehDvmt"}\FunctionTok{,}
    \DataTypeTok{"VALUE"}\FunctionTok{:} \StringTok{"27244"}\FunctionTok{,}
    \DataTypeTok{"TYPE"} \FunctionTok{:} \StringTok{"compound"}\FunctionTok{,}
    \DataTypeTok{"UNITS"} \FunctionTok{:} \StringTok{"MI/DAY"}\FunctionTok{,}
    \DataTypeTok{"PROHIBIT"} \FunctionTok{:} \StringTok{"c(\textquotesingle{}NA\textquotesingle{}, \textquotesingle{}\textless{} 0\textquotesingle{})"}\FunctionTok{,}
    \DataTypeTok{"ISELEMENTOF"} \FunctionTok{:} \StringTok{""}
\FunctionTok{\}}
\end{Highlighting}
\end{Shaded}

\protect\hyperlink{inputs}{Inputs} \protect\hyperlink{model-parameters}{Model Parameters} \protect\hyperlink{model-definition-files}{Definitions}

\hypertarget{basefwyartprop-1}{%
\subsubsection{BaseFwyArtProp}\label{basefwyartprop-1}}

\textbf{Dvmt proportion by functional class (\emph{BaseFwyArtProp})}: The proportions of daily VMT for light vehicles that takes place on freeways and arterials (i.e., the remainder of VMT takes place on lower functional class roads for the base year. This data can be derived from a combination of \href{http://www.fhwa.dot.gov/policyinformation/hpms.cfm}{Highway Performance Monitoring System} data, Federal Highway Cost Allocation Study data, and regional data. The proportions of light vehicle daily VMT on freeways and arterials can be derived from the HPMS data. Regional travel demand model outputs can also be used to derive these data. It should be defined in \protect\hyperlink{model_parametersjson}{model\_parameters.json} as follows:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{\{}
    \DataTypeTok{"NAME"} \FunctionTok{:} \StringTok{"BaseFwyArtProp"}\FunctionTok{,}
    \DataTypeTok{"VALUE"}\FunctionTok{:} \StringTok{"0.77"}\FunctionTok{,}
    \DataTypeTok{"TYPE"} \FunctionTok{:} \StringTok{"double"}\FunctionTok{,}
    \DataTypeTok{"UNITS"} \FunctionTok{:} \StringTok{"proportion"}\FunctionTok{,}
    \DataTypeTok{"PROHIBIT"} \FunctionTok{:} \StringTok{"c(\textquotesingle{}NA\textquotesingle{}, \textquotesingle{}\textless{} 0\textquotesingle{}, \textquotesingle{}\textgreater{} 1\textquotesingle{})"}\FunctionTok{,}
    \DataTypeTok{"ISELEMENTOF"} \FunctionTok{:} \StringTok{""}
\FunctionTok{\}}
\end{Highlighting}
\end{Shaded}

\protect\hyperlink{inputs}{Inputs} \protect\hyperlink{model-parameters}{Model Parameters} \protect\hyperlink{model-definition-files}{Definitions}

\hypertarget{employmentgrowth-1}{%
\subsubsection{EmploymentGrowth}\label{employmentgrowth-1}}

\textbf{Employment Growth (\emph{EmploymentGrowth})}: This variable represents a growth rate for employment in the region between the base year and the future year. A rate of 1 indicates no changes in overall employment, a value of more than 1 indicates some growth (e.g., 1.5 = 50\% growth) and a value of less than 1 indicates decline in employment. It should be defined in \protect\hyperlink{model_parametersjson}{model\_parameters.json} as follows:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{\{}
    \DataTypeTok{"NAME"}\FunctionTok{:} \StringTok{"EmploymentGrowth"}\FunctionTok{,}
    \DataTypeTok{"VALUE"}\FunctionTok{:} \StringTok{"1.5"}\FunctionTok{,}
    \DataTypeTok{"TYPE"}\FunctionTok{:} \StringTok{"double"}\FunctionTok{,}
    \DataTypeTok{"UNITS"}\FunctionTok{:} \StringTok{"multiplier"}\FunctionTok{,}
    \DataTypeTok{"PROHIBIT"}\FunctionTok{:} \StringTok{""}\FunctionTok{,}
    \DataTypeTok{"ISELEMENTOF"}\FunctionTok{:} \StringTok{""}
\FunctionTok{\}}
\end{Highlighting}
\end{Shaded}

\protect\hyperlink{inputs}{Inputs} \protect\hyperlink{model-parameters}{Model Parameters} \protect\hyperlink{model-definition-files}{Definitions}

\hypertarget{transport-supply-2}{%
\subsection{Transport Supply}\label{transport-supply-2}}

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\hypertarget{csv-inputs-7}{%
\subsubsection{CSV Inputs}\label{csv-inputs-7}}

\hypertarget{marea_lane_miles.csv-1}{%
\subsubsection{marea\_lane\_miles.csv}\label{marea_lane_miles.csv-1}}

\textbf{Road lane miles}: This file contains the amount of transportation supply by base year in terms of lane miles of freeways and arterial roadways in the region. The base year data is duplicated for future year.
\textbf{Freeway} and \textbf{Arterial} are total lane miles for those functional classes in the region. These data can be derived from the Federal Highway Administration's (FHWA) Highway \href{http://www.fhwa.dot.gov/policy/ohim/hs05/roadway_extent.cfm}{Statistics data}.
Here is a snapshot of the file:

\begin{longtable}[]{@{}llll@{}}
\toprule()
Geo & Year & FwyLaneMi & ArtLaneMi \\
\midrule()
\endhead
Multnomah & 2005 & 250 & 900 \\
Multnomah & 2035 & 250 & 900 \\
\bottomrule()
\end{longtable}

\protect\hyperlink{inputs}{Inputs} \protect\hyperlink{model-parameters}{Model Parameters} \protect\hyperlink{model-definition-files}{Definitions}

\hypertarget{marea_rev_miles_pc.csv-1}{%
\subsubsection{marea\_rev\_miles\_pc.csv}\label{marea_rev_miles_pc.csv-1}}

\textbf{Transit revenue miles}: This file contains the amount of transportation supply by base year in terms of the revenue miles operating by the transit system in the region. The base year data is duplicated for future year.
\textbf{Bus} and \textbf{Rail} are annual bus and rail revenue miles per capita for the region. These data can be derived from the \href{https://www.transit.dot.gov/ntd/ntd-data}{National Transit Database}, where the annual database contains a ``service'' table that has annual revenue mile data by mode for each transit operator.
Here is a snapshot of the file:

\begin{longtable}[]{@{}llll@{}}
\toprule()
Geo & Year & BusRevMiPC & RailRevMiPC \\
\midrule()
\endhead
Multnomah & 2005 & 19 & 4 \\
Multnomah & 2035 & 19 & 4 \\
\bottomrule()
\end{longtable}

\protect\hyperlink{inputs}{Inputs} \protect\hyperlink{model-parameters}{Model Parameters} \protect\hyperlink{model-definition-files}{Definitions}

\hypertarget{policy-1}{%
\subsection{Policy}\label{policy-1}}

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\hypertarget{csv-inputs-8}{%
\subsubsection{CSV Inputs}\label{csv-inputs-8}}

\hypertarget{region_commute_options.csv-1}{%
\subsubsection{region\_commute\_options.csv}\label{region_commute_options.csv-1}}

\textbf{Percentage of employees offered commute options}: This file contains assumptions about the availability and participation in work based travel demand management programs. The policies are ridesharing programs, transit pass programs, telecommuting or alternative work schedule programs, and vanpool programs. For each, the user enters the proportion of workers who participate (the data items with the ``Participation'' suffix). For one program, the transit subsidy, the user must also enter the subsidy level in dollars for the TransitSubsidyLevel data item.
Here is a snapshot of the file:

\begin{longtable}[]{@{}lll@{}}
\toprule()
TDMProgram & DataItem & DataValue \\
\midrule()
\endhead
Ridesharing & RidesharingParticipation & 0.05 \\
TransitSubsidy & TransitSubsidyParticipation & 0.1 \\
TransitSubsidy & TransitSubsidyLevel & 1.25 \\
WorkSchedule & Schedule980Participation & 0.01 \\
WorkSchedule & Schedule440Participation & 0.01 \\
WorkSchedule & Telecommute1.5DaysParticipation & 0.01 \\
Vanpooling & LowLevelParticipation & 0.04 \\
Vanpooling & MediumLevelParticipation & 0.01 \\
Vanpooling & HighLevelParticipation & 0.01 \\
\bottomrule()
\end{longtable}

\protect\hyperlink{inputs}{Inputs} \protect\hyperlink{model-parameters}{Model Parameters} \protect\hyperlink{model-definition-files}{Definitions}

\hypertarget{azone_its_prop.csv-1}{%
\subsubsection{azone\_its\_prop.csv}\label{azone_its_prop.csv-1}}

\textbf{Percent road miles with ITS treatment}: This file is an estimate of the proportion of road miles that have improvements which reduce incidents through ITS treatments in both the base and future years. Values entered should be between 0 and 1, with 1 indicating that 100\% of road miles are treated.
The ITS policy measures the effects of incident management supported by ITS. The ITS table is used to inform the congestion model and the travel demand model. The model uses the mean speeds with and without incidents to compute an overall average speed by road type and congestion level providing a simple level of sensitivity to the potential effects of incident management programs on delay and emissions.
The ITS treatments are evaluated only on freeways and arterials. The ITS treatments that can be evaluated are those that the analyst considers will reduce non-recurring congestion due to incidents. This policy does not deal with other operational improvements such as signal coordination, or temporary capacity increases such as allowing shoulder use in the peak.
Here is a snapshot of the file:

\begin{longtable}[]{@{}lll@{}}
\toprule()
Geo & Year & ITS \\
\midrule()
\endhead
Multnomah & 2005 & 0 \\
Multnomah & 2035 & 0 \\
\bottomrule()
\end{longtable}

\protect\hyperlink{inputs}{Inputs} \protect\hyperlink{model-parameters}{Model Parameters} \protect\hyperlink{model-definition-files}{Definitions}

\hypertarget{region_light_vehicles.csv-1}{%
\subsubsection{region\_light\_vehicles.csv}\label{region_light_vehicles.csv-1}}

\textbf{Bicycling/light vehicles targets}: This file contains input data for the non-motorized vehicle model. In VERPAT, non-motorized vehicles are bicycles, and also electric bicycles, segways, and similar vehicles that are small, light-weight and can travel at bicycle speeds or slightly higher. The parameters are as follows:

\begin{itemize}
\tightlist
\item
  \textbf{TargetProp}: non-motorized vehicle ownership rate (average ratio of non-motorized vehicles to driver age population)
\item
  \textbf{Threshold}: single-occupant vehicle (SOV) tour mileage threshold used in the SOV travel proportion model. This is the upper limit for tour lengths that are suitable for reallocation to non-motorized modes.
\item
  \textbf{PropSuitable}: proportion of SOV travel suitable for non-motorized vehicle travel. This variable describes the proportion of SOV tours within the mileage threshold for which non-motorized vehicles might be substituted. This variable takes into account such factors as weather and trip purpose.
\end{itemize}

The non-motorized vehicle model predicts the ownership and use of non-motorized vehicles (where non-motorized vehicles are bicycles, and also electric bicycles, segways and similar vehicles that are small, light-weight and can travel at bicycle speeds or slightly higher than bicycle speeds). The core concept of the model is that non-motorized vehicle usage will primarily be a substitute for short-distance SOV travel. Therefore, the model estimates the proportion of the household vehicle travel that occurs in short-distance SOV tours. The model determines the maximum potential for household VMT to be diverted to non-motorized vehicles, which is also dependent on the availability of non-motorized vehicles.
Note that bike share programs (BSP) serve to increase the availability of non-motorized vehicles and can be taken into account by increasing the \textbf{TargetProp} variable. Use national estimates of non-motorized ownership if regional estimates of non-motorized ownership are not available (unless the region has notably atypical levels of bicycle usage). See \href{http://www.academia.edu/1839374/Bicycle_Ownership_in_the_United_States_Empirical_Analysis_of_Regional_Differences}{Bicycle Ownership in the United States} for an analysis of regional differences.
Here is a snapshot of the file:

\begin{longtable}[]{@{}ll@{}}
\toprule()
DataItem & DataValue \\
\midrule()
\endhead
TargetProp & 0.2 \\
Threshold & 2 \\
PropSuitable & 0.1 \\
\bottomrule()
\end{longtable}

\protect\hyperlink{inputs}{Inputs} \protect\hyperlink{model-parameters}{Model Parameters} \protect\hyperlink{model-definition-files}{Definitions}

\hypertarget{marea_parking_growth.csv-1}{%
\subsubsection{marea\_parking\_growth.csv}\label{marea_parking_growth.csv-1}}

\textbf{Increase in parking cost and supply}: This file contains information that allows the effects of policies such as workplace parking charges and ``\emph{cash-out buy-back}'' programs to be tested. The input parameters are as follows and should be entered for both the base and future year:

\begin{itemize}
\tightlist
\item
  \textbf{PropWorkParking}: proportion of employees that park at work
\item
  \textbf{PropWorkCharged}: proportion of employers that charge for parking
\item
  \textbf{PropCashOut}: proportion of employment parking that is converted from being free to pay under a ``\emph{cash-out buy-back}'' type of program
\item
  \textbf{PropOtherCharged}: proportion of other parking that is not free
\item
  \textbf{ParkingCost.2000}: average daily parking cost in 2000 year USD. In order to use base year dollars just replace \textbf{\emph{2000}} in column labels with base year. This variable is the average daily parking cost for those who incur a fee to park. If the paid parking varies across the region, then the ``\emph{PkgCost}'' value should reflect the average of those parking fees, but weighted by the supply -- so if most parking is in the Center City, then the average will be heavily weighted toward the price in the Center City.
\end{itemize}

Here is a snapshot of the file:

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 12\tabcolsep) * \real{0.1047}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 12\tabcolsep) * \real{0.0465}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 12\tabcolsep) * \real{0.1744}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 12\tabcolsep) * \real{0.1744}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 12\tabcolsep) * \real{0.1279}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 12\tabcolsep) * \real{0.1860}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 12\tabcolsep) * \real{0.1860}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Geo
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Year
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
PropWorkParking
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
PropWorkCharged
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
PropCashOut
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
PropOtherCharged
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
ParkingCost.2000
\end{minipage} \\
\midrule()
\endhead
Multnomah & 2005 & 1 & 0.1 & 0 & 0.05 & 5 \\
Multnomah & 2035 & 1 & 0.1 & 0 & 0.05 & 5 \\
\bottomrule()
\end{longtable}

\protect\hyperlink{inputs}{Inputs} \protect\hyperlink{model-parameters}{Model Parameters} \protect\hyperlink{model-definition-files}{Definitions}

\hypertarget{json-inputs-4}{%
\subsubsection{JSON Inputs}\label{json-inputs-4}}

\hypertarget{autocostgrowth-1}{%
\subsubsection{AutoCostGrowth}\label{autocostgrowth-1}}

\textbf{\% Increase in Auto Operating Cost (\emph{AutoCostGrowth}):} This parameter reflects the proportional increase in auto operating cost. This can be used to test different assumptions for future gas prices or the effects of increased gas taxes. A value of 1.5 multiplies base year operating costs by 1.5 and thus reflects a 50\% increase. It should be defined in \protect\hyperlink{model_parametersjson}{model\_parameters.json} as follows:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{\{}
    \DataTypeTok{"NAME"} \FunctionTok{:} \StringTok{"AutoCostGrowth"}\FunctionTok{,}
    \DataTypeTok{"VALUE"}\FunctionTok{:} \StringTok{"1.5"}\FunctionTok{,}
    \DataTypeTok{"TYPE"} \FunctionTok{:} \StringTok{"double"}\FunctionTok{,}
    \DataTypeTok{"UNITS"} \FunctionTok{:} \StringTok{"multiplier"}\FunctionTok{,}
    \DataTypeTok{"PROHIBIT"} \FunctionTok{:} \StringTok{"c(\textquotesingle{}NA\textquotesingle{}, \textquotesingle{}\textless{} 0\textquotesingle{})"}\FunctionTok{,}
    \DataTypeTok{"ISELEMENTOF"} \FunctionTok{:} \StringTok{""}
\FunctionTok{\}}
\end{Highlighting}
\end{Shaded}

\protect\hyperlink{inputs}{Inputs} \protect\hyperlink{model-parameters}{Model Parameters} \protect\hyperlink{model-definition-files}{Definitions}

\hypertarget{fwylanemigrowth-1}{%
\subsubsection{FwyLaneMiGrowth}\label{fwylanemigrowth-1}}

\textbf{FwyLaneMiGrowth}: The variable indicates the percent increase in supply of freeways lane miles in the future year compared to base year. By default, the transportation supply is assumed to grow in line with population increase; therefore a value of 1 indicates growth in proportion with population growth. A value less than 1 indicates that there will be less freeway lane mile supply, per person, in the future. A value of 1 indicates faster freeway expansion than population growth. It should be defined in \protect\hyperlink{model_parametersjson}{model\_parameters.json} as follows:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{\{}
    \DataTypeTok{"NAME"}\FunctionTok{:} \StringTok{"FwyLaneMiGrowth"}\FunctionTok{,}
    \DataTypeTok{"VALUE"}\FunctionTok{:} \StringTok{"1"}\FunctionTok{,}
    \DataTypeTok{"TYPE"} \FunctionTok{:} \StringTok{"double"}\FunctionTok{,}
    \DataTypeTok{"UNITS"} \FunctionTok{:} \StringTok{"multiplier"}\FunctionTok{,}
    \DataTypeTok{"PROHIBIT"} \FunctionTok{:} \StringTok{"c(\textquotesingle{}NA\textquotesingle{}, \textquotesingle{}\textless{} 0\textquotesingle{})"}\FunctionTok{,}
    \DataTypeTok{"ISELEMENTOF"} \FunctionTok{:} \StringTok{""}
\FunctionTok{\}}
\end{Highlighting}
\end{Shaded}

\protect\hyperlink{inputs}{Inputs} \protect\hyperlink{model-parameters}{Model Parameters} \protect\hyperlink{model-definition-files}{Definitions}

\hypertarget{artlanemigrowth-1}{%
\subsubsection{ArtLaneMiGrowth}\label{artlanemigrowth-1}}

\textbf{ArtLaneMiGrowth}: The variable indicates the percent increase in supply of arterial lane miles in the future year compared to base year. It is a similar value to freeway except that it measures arterial lane mile growth. It is also proportional to population growth. It should be defined in \protect\hyperlink{model_parametersjson}{model\_parameters.json} as follows:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{\{}
    \DataTypeTok{"NAME"} \FunctionTok{:} \StringTok{"ArtLaneMiGrowth"}\FunctionTok{,}
    \DataTypeTok{"VALUE"}\FunctionTok{:} \StringTok{"1"}\FunctionTok{,}
    \DataTypeTok{"TYPE"} \FunctionTok{:} \StringTok{"double"}\FunctionTok{,}
    \DataTypeTok{"UNITS"} \FunctionTok{:} \StringTok{"multiplier"}\FunctionTok{,}
    \DataTypeTok{"PROHIBIT"} \FunctionTok{:} \StringTok{"c(\textquotesingle{}NA\textquotesingle{}, \textquotesingle{}\textless{} 0\textquotesingle{})"}\FunctionTok{,}
    \DataTypeTok{"ISELEMENTOF"} \FunctionTok{:} \StringTok{""}
\FunctionTok{\}}
\end{Highlighting}
\end{Shaded}

\protect\hyperlink{inputs}{Inputs} \protect\hyperlink{model-parameters}{Model Parameters} \protect\hyperlink{model-definition-files}{Definitions}

\hypertarget{busrevmipcgrowth-1}{%
\subsubsection{BusRevMiPCGrowth}\label{busrevmipcgrowth-1}}

\textbf{BusRevMiPCGrowth}: It is the percent increase in transit revenue miles per capita for bus. It behaves in a similar way to the freeway and rail values in that a value of 1 indicates per capita revenue miles stays constant. It should be defined in \protect\hyperlink{model_parametersjson}{model\_parameters.json} as follows:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{\{}
    \DataTypeTok{"NAME"} \FunctionTok{:} \StringTok{"BusRevMiPCGrowth"}\FunctionTok{,}
    \DataTypeTok{"VALUE"}\FunctionTok{:} \StringTok{"1"}\FunctionTok{,}
    \DataTypeTok{"TYPE"} \FunctionTok{:} \StringTok{"double"}\FunctionTok{,}
    \DataTypeTok{"UNITS"} \FunctionTok{:} \StringTok{"multiplier"}\FunctionTok{,}
    \DataTypeTok{"PROHIBIT"} \FunctionTok{:} \StringTok{"c(\textquotesingle{}NA\textquotesingle{}, \textquotesingle{}\textless{} 0\textquotesingle{})"}\FunctionTok{,}
    \DataTypeTok{"ISELEMENTOF"} \FunctionTok{:} \StringTok{""}
\FunctionTok{\}}
\end{Highlighting}
\end{Shaded}

\protect\hyperlink{inputs}{Inputs} \protect\hyperlink{model-parameters}{Model Parameters} \protect\hyperlink{model-definition-files}{Definitions}

\hypertarget{railrevmipcgrowth-1}{%
\subsubsection{RailRevMiPCGrowth}\label{railrevmipcgrowth-1}}

\textbf{RailRevMiPCGrowth}: It is the percent increase in transit revenue miles per capita for rail. This encompasses all rail modes, from light rail through to commuter rail. It should be defined in \protect\hyperlink{model_parametersjson}{model\_parameters.json} as follows:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{\{}
    \DataTypeTok{"NAME"} \FunctionTok{:} \StringTok{"RailRevMiPCGrowth"}\FunctionTok{,}
    \DataTypeTok{"VALUE"}\FunctionTok{:} \StringTok{"1"}\FunctionTok{,}
    \DataTypeTok{"TYPE"} \FunctionTok{:} \StringTok{"double"}\FunctionTok{,}
    \DataTypeTok{"UNITS"} \FunctionTok{:} \StringTok{"multiplier"}\FunctionTok{,}
    \DataTypeTok{"PROHIBIT"} \FunctionTok{:} \StringTok{"c(\textquotesingle{}NA\textquotesingle{}, \textquotesingle{}\textless{} 0\textquotesingle{})"}\FunctionTok{,}
    \DataTypeTok{"ISELEMENTOF"} \FunctionTok{:} \StringTok{""}
\FunctionTok{\}}
\end{Highlighting}
\end{Shaded}

\protect\hyperlink{inputs}{Inputs} \protect\hyperlink{model-parameters}{Model Parameters} \protect\hyperlink{model-definition-files}{Definitions}

\hypertarget{vmtcharge-1}{%
\subsubsection{VmtCharge}\label{vmtcharge-1}}

\textbf{Auto Operating Surcharge Per VMT (\emph{VmtCharge})}: It is a cost in cents per mile that would be levied on auto users through the form of a VMT charge. It should be defined in \protect\hyperlink{model_parametersjson}{model\_parameters.json} as follows:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{\{}
    \DataTypeTok{"NAME"} \FunctionTok{:} \StringTok{"VmtCharge"}\FunctionTok{,}
    \DataTypeTok{"VALUE"}\FunctionTok{:} \StringTok{"0.05"}\FunctionTok{,}
    \DataTypeTok{"TYPE"} \FunctionTok{:} \StringTok{"compound"}\FunctionTok{,}
    \DataTypeTok{"UNITS"} \FunctionTok{:} \StringTok{"USD/MI"}\FunctionTok{,}
    \DataTypeTok{"PROHIBIT"} \FunctionTok{:} \StringTok{"c(\textquotesingle{}NA\textquotesingle{}, \textquotesingle{}\textless{} 0\textquotesingle{})"}\FunctionTok{,}
    \DataTypeTok{"ISELEMENTOF"} \FunctionTok{:} \StringTok{""}
\FunctionTok{\}}
\end{Highlighting}
\end{Shaded}

\protect\hyperlink{inputs}{Inputs} \protect\hyperlink{model-parameters}{Model Parameters} \protect\hyperlink{model-definition-files}{Definitions}

\hypertarget{model-parameters-3}{%
\subsection{Model Parameters}\label{model-parameters-3}}

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

Users can modify these parameters to test alternative scenarios. For e.g.~users can use \protect\hyperlink{model_veh_mpg_by_yearcsv}{model\_veh\_mpg\_by\_year.csv} to test alternative vehicle development scenarios, such as improved technology and/or fuel economy standards that lead to higher fuel economies.

\hypertarget{csv-inputs-9}{%
\subsubsection{CSV Inputs}\label{csv-inputs-9}}

\hypertarget{model_accident_rates.csv-1}{%
\subsubsection{model\_accident\_rates.csv}\label{model_accident_rates.csv-1}}

\textbf{Accident Rates}: Road safety impacts are calculated by factoring the amount of VMT. The following national average rates, from the Fatality Analysis Reporting System General Estimates System (2009) by US Department of Transportation, are applied to calculate the number of fatal and injury accidents and the value of property damage:

\begin{itemize}
\tightlist
\item
  Fatal: 1.14 per 100 Million Miles Traveled
\item
  Injury: 51.35 per 100 Million Miles Traveled
\item
  Property damage: 133.95 per 100 Million Miles Traveled
\end{itemize}

Here is a snapshot of the file:

\begin{longtable}[]{@{}ll@{}}
\toprule()
Accident & Rate \\
\midrule()
\endhead
Fatal & 1.14 \\
Injury & 51.35 \\
Property & 133.95 \\
\bottomrule()
\end{longtable}

\protect\hyperlink{inputs}{Inputs} \protect\hyperlink{model-parameters}{Model Parameters} \protect\hyperlink{model-definition-files}{Definitions}

\hypertarget{model_fuel_prop_by_veh.csv-1}{%
\subsubsection{model\_fuel\_prop\_by\_veh.csv}\label{model_fuel_prop_by_veh.csv-1}}

\textbf{Vehicle VMT proportion by fuel (\emph{model\_fuel\_prop\_by\_veh.csv})}: The file contains allocation of VMT for each of the four road vehicle types that VERPAT represents (\emph{auto}, \emph{light truck}, \emph{bus}, and \emph{heavy truck}) to different fuel types (\emph{Diesel}, \emph{CNG}, \emph{Gasoline}). This file is used in the calculations of fuel consumption. This file can be used to test alternative fuel scenarios by varying the shares of non-gasoline fuels.

\begin{itemize}
\tightlist
\item
  \textbf{PropDiesel}: The proportion of the fleet that uses diesel
\item
  \textbf{PropCng}: The proportion of the fleet that uses CNG
\item
  \textbf{PropGas}: The proportion of the fleet that uses gasoline
\end{itemize}

Here is a snapshot of the file:

\begin{longtable}[]{@{}llll@{}}
\toprule()
VehType & PropDiesel & PropCng & PropGas \\
\midrule()
\endhead
Auto & 0.007 & 0 & 0.993 \\
LtTruck & 0.04 & 0 & 0.96 \\
Bus & 0.995 & 0.005 & 0 \\
Truck & 0.945 & 0.005 & 0.05 \\
\bottomrule()
\end{longtable}

\protect\hyperlink{inputs}{Inputs} \protect\hyperlink{model-parameters}{Model Parameters} \protect\hyperlink{model-definition-files}{Definitions}

\hypertarget{model_fuel_composition_prop.csv-1}{%
\subsubsection{model\_fuel\_composition\_prop.csv}\label{model_fuel_composition_prop.csv-1}}

\textbf{Fuel composition}: This file contains the composition of fuel used for each of the four road vehicle types that VERPAT represents (\emph{auto}, \emph{light truck}, \emph{bus}, and \emph{heavy truck}). This file is also used in the calculations of fuel consumption along with the aforementioned file. The column labels in the file are:

\begin{itemize}
\tightlist
\item
  \textbf{GasPropEth}: The average ethanol proportion in gasoline sold
\item
  \textbf{DieselPropBio}: The average biodiesel proportion in diesel sold
\end{itemize}

Here is a snapshot of the file:

\begin{longtable}[]{@{}lll@{}}
\toprule()
VehType & GasPropEth & DieselPropBio \\
\midrule()
\endhead
Auto & 0.1 & 0.05 \\
LtTruck & 0.1 & 0.05 \\
Bus & 0.1 & 0.05 \\
Truck & 0.1 & 0.01 \\
\bottomrule()
\end{longtable}

\protect\hyperlink{inputs}{Inputs} \protect\hyperlink{model-parameters}{Model Parameters} \protect\hyperlink{model-definition-files}{Definitions}

\hypertarget{model_fuel_co2.csv-1}{%
\subsubsection{model\_fuel\_co2.csv}\label{model_fuel_co2.csv-1}}

\textbf{Emission Rate}: The emissions rate file contains information on ``pump-to-wheels'' CO2 equivalent emissions by fuel type in grams per mega Joule of fuel energy content. There is one row for each fuel type: ULSD, biodiesel, RFG (reformulated gasoline), CARBOB (gasoline formulated to be blended with ethanol), ethanol, and CNG. This file is used to convert fuel use to CO2 equivalent emissions.
Here is a snapshot of the file:

\begin{longtable}[]{@{}ll@{}}
\toprule()
Fuel & Intensity \\
\midrule()
\endhead
ULSD & 77.19 \\
Biodiesel & 76.81 \\
RFG & 75.65 \\
CARBOB & 75.65 \\
Ethanol & 74.88 \\
Cng & 62.14 \\
\bottomrule()
\end{longtable}

\protect\hyperlink{inputs}{Inputs} \protect\hyperlink{model-parameters}{Model Parameters} \protect\hyperlink{model-definition-files}{Definitions}

\hypertarget{model_place_type_elasticities.csv-1}{%
\subsubsection{model\_place\_type\_elasticities.csv}\label{model_place_type_elasticities.csv-1}}

This file contains elasticities for four performance metrics:

\begin{itemize}
\tightlist
\item
  \textbf{VMT} -- Following the estimate of travel demand that incorporates induced demand, an adjustment is made to travel demand that accounts for changes in growth by the place types that are used in the model to describe urban form. These changes are interpreted as changes in design (intersection street density), accessibility (job accessibility by auto), distance to transit (nearest transit stop), density (population density) and diversity (land use mix). The effect on travel demand is determined as changes in VMT by these urban form categories, as shown in the table below. The elasticities that are shown in the table are multiplied by the D values for each place type. The D values are proportion values for each place type that are relative to the regional average, which is set to 1.0.
\item
  \textbf{VehicleTrips} -- The change in the number of vehicle trips is calculated using a set of elasticities from Index 4D Values (2001) that pivots from the current number of vehicle trips per capita based on the scenario's allocation of growth by place type. The elasticities shown in the table are applied to D values, which are proportional values for each place type that are relative to a regional average for that D value that is set to 1.0. The model reports the additional number of trips caused by the growth assumed in the scenario and not the regional total.
\item
  \textbf{TransitTrips} -- The change in the number of transit trips is calculated using a set of elasticities from Index 4D Values (2001) that pivots from the current number of transit trips per capita based on the scenario's allocation of growth by place type. The elasticities shown in the table are applied to D values, which are proportional values for each place type that are relative to a regional average for that D value that is set to 1.0. The model reports the additional number of trips caused by the growth assumed in the scenario and not the regional total.
\item
  \textbf{Walking} -- The elasticities shown in the table are applied to D values, which are proportional values for each place type that are relative to a regional average for that D value that is set to 1.0. The product of the elasticity and D value is applied to the place type growth quantities for the scenario to calculated the percentage increase or decrease in walking for new residents in the region relative to a the current place type distribution.
\end{itemize}

Here is a snapshot of the file:

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 8\tabcolsep) * \real{0.3793}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 8\tabcolsep) * \real{0.0862}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 8\tabcolsep) * \real{0.2069}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 8\tabcolsep) * \real{0.2069}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 8\tabcolsep) * \real{0.1207}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Parameters
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
VMT
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
VehicleTrips
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
TransitTrips
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Walking
\end{minipage} \\
\midrule()
\endhead
Density & -0.04 & -0.043 & 0.07 & 0.07 \\
Diversity & -0.09 & -0.051 & 0.12 & 0.15 \\
Design & -0.12 & -0.031 & 0.23 & 0.39 \\
Regional\_Accessibility & -0.2 & -0.036 & 0 & 0 \\
Distance\_to\_Transit & -0.05 & 0 & 0.29 & 0.15 \\
\bottomrule()
\end{longtable}

\protect\hyperlink{inputs}{Inputs} \protect\hyperlink{model-parameters}{Model Parameters} \protect\hyperlink{model-definition-files}{Definitions}

\hypertarget{model_place_type_relative_values.csv-1}{%
\subsubsection{model\_place\_type\_relative\_values.csv}\label{model_place_type_relative_values.csv-1}}

This file contains the \emph{D} values, which are proportional values for each of the 13 place types (\emph{Bzones}) that are relative to a regional average, for each of the five Ds used in VERPAT - design (intersection street density), accessibility (job accessibility by auto), distance to transit (nearest transit stop), density (population density) and diversity (land use mix).
Here is a snapshot of the file:

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.0735}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.1029}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.1324}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.0882}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.3235}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.2794}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Geo
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Density
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Diversity
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Design
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Regional\_Accessibility
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Distance\_to\_Transit
\end{minipage} \\
\midrule()
\endhead
Rur & 0.5 & 0.5 & 0.5 & 0.5 & 0.5 \\
Sub\_R & 0.75 & 0.75 & 0.75 & 0.75 & 0.75 \\
Sub\_E & 0.75 & 0.75 & 0.75 & 0.75 & 0.75 \\
Sub\_M & 1 & 1 & 1 & 0.75 & 0.75 \\
Sub\_T & 1 & 1 & 1 & 1 & 1 \\
CIC\_R & 1.2 & 1.2 & 1.2 & 1.2 & 1 \\
CIC\_E & 1.2 & 1.2 & 1.2 & 1.2 & 1 \\
CIC\_M & 1.2 & 1.2 & 1.2 & 1.2 & 1 \\
CIC\_T & 1.2 & 1.2 & 1.2 & 1.2 & 1.2 \\
UC\_R & 1.5 & 1.2 & 1.5 & 1.5 & 1.2 \\
UC\_E & 1.5 & 1.2 & 1.5 & 1.5 & 1.2 \\
UC\_M & 1.5 & 1.5 & 1.5 & 1.5 & 1.2 \\
UC\_T & 1.5 & 1.5 & 1.5 & 1.5 & 1.5 \\
\bottomrule()
\end{longtable}

\protect\hyperlink{inputs}{Inputs} \protect\hyperlink{model-parameters}{Model Parameters} \protect\hyperlink{model-definition-files}{Definitions}

\hypertarget{model_tdm_ridesharing.csv-1}{%
\subsubsection{model\_tdm\_ridesharing.csv}\label{model_tdm_ridesharing.csv-1}}

\textbf{Travel Demand Management: Ridesharing}: The ridesharing Travel Demand Management file contains parameters describing the effectiveness of ridesharing programs by place type. The proportion of employees participating in the ridesharing program is a policy input. This is converted into a proportion of working-age persons by using an assumed labor force participation rate (0.65) to sample working-age persons in households. The ridesharing sub-model then computes the anticipated level of VMT reduction resulting from the implementation of ridesharing, based on the place type the household lives in, using the effectiveness values shown in this parameter file. Previous studies have determined that the level of ridesharing participation will be less in the rural and suburban areas, as compared to the more-urban areas. Typically, more people will carpool in the more urbanized areas due to the presence of parking charges, potential difficulties in finding parking, and other disincentives that are typically present in more urbanized areas.
Here is a snapshot of the file:

\begin{longtable}[]{@{}ll@{}}
\toprule()
ModelGeo & Effectiveness \\
\midrule()
\endhead
Rur & 0 \\
Sub & 0.05 \\
CIC & 0.1 \\
UC & 0.15 \\
\bottomrule()
\end{longtable}

\protect\hyperlink{inputs}{Inputs} \protect\hyperlink{model-parameters}{Model Parameters} \protect\hyperlink{model-definition-files}{Definitions}

\hypertarget{model_tdm_transit.csv-1}{%
\subsubsection{model\_tdm\_transit.csv}\label{model_tdm_transit.csv-1}}

\textbf{Travel Demand Management: Transit Fares}: The transit fare Travel Demand Management files are parameters for the effectiveness (level of VMT reduction) and fare subsidy values for employer. The subsidized/discounted transit model begins by evaluating the level of participation within the region. Monte Carlo processes are used to identify which households participate in transit pass programs. The proportion of employees participating in this program is a policy input. This is converted into a proportion of working-age persons by using an assumed labor force participation rate (0.65) to sample working-age persons in households. The model then allows the selection of one of four potential subsidy levels (also a policy inputs), which influence the level of VMT reduction based on the level of subsidy applied to the place type. The anticipated level of VMT reduction is then further reduced to account for the proportion of work travel in overall daily travel.
Here is a snapshot of the file:

\begin{longtable}[]{@{}llllll@{}}
\toprule()
ModelGeo & Subsidy0 & Subsidy1 & Subsidy2 & Subsidy3 & Subsidy4 \\
\midrule()
\endhead
Rur & 0 & 0 & 0 & 0 & 0 \\
Sub & 0 & 0.02 & 0.033 & 0.079 & 0.2 \\
CIC & 0 & 0.034 & 0.073 & 0.164 & 0.2 \\
UC & 0 & 0.062 & 0.129 & 0.2 & 0.2 \\
\bottomrule()
\end{longtable}

\protect\hyperlink{inputs}{Inputs} \protect\hyperlink{model-parameters}{Model Parameters} \protect\hyperlink{model-definition-files}{Definitions}

\hypertarget{model_tdm_transitlevels.csv-1}{%
\subsubsection{model\_tdm\_transitlevels.csv}\label{model_tdm_transitlevels.csv-1}}

\textbf{Travel Demand Management: Transit Subsidy Levels}: This file contains the dollar value match to the subsidy levels used in \protect\hyperlink{model_tdm_transitcsv}{model\_tdm\_transit.csv} file.
Here is a snapshot of the file:

\begin{longtable}[]{@{}ll@{}}
\toprule()
SubsidyLevel & SubsidyValue.2000 \\
\midrule()
\endhead
Subsidy0 & 0 \\
Subsidy1 & 0.75 \\
Subsidy2 & 1.49 \\
Subsidy3 & 2.98 \\
Subsidy4 & 5.96 \\
\bottomrule()
\end{longtable}

\protect\hyperlink{inputs}{Inputs} \protect\hyperlink{model-parameters}{Model Parameters} \protect\hyperlink{model-definition-files}{Definitions}

\hypertarget{model_tdm_vanpooling.csv-1}{%
\subsubsection{model\_tdm\_vanpooling.csv}\label{model_tdm_vanpooling.csv-1}}

\textbf{Travel Demand Management: Vanpooling}: This file contains parameters describing the effectiveness in terms of VMT reductions for vanpooling programs across three levels of employee involvement.
The vanpool program sub-model operates by evaluating the likely level of participation. Monte Carlo processes are used to identify which households participate in vanpool programs. The proportion of employees participating in this program is a policy input. This is converted into a proportion of working-age persons by using an assumed labor force participation rate (0.65) to sample working-age persons in households. Those employers that would participate in the program are then categorized into three levels of involvement from low to medium to high. The level of involvement reflects the extent to which an employer would actively facilitate and promote vanpooling. For example, a low level of involvement might represent an employer who organizes only a minimal number of vanpools. The high level of involvement could represent an employer who has an extensive vanpooling program to cover a large number of employees. Based on the level of involvement, the reduction in VMT is estimated on the basis of the values in this file.
Here is a snapshot of the file:

\begin{longtable}[]{@{}ll@{}}
\toprule()
VanpoolingParticipation & VMTReduction \\
\midrule()
\endhead
Low & 0.003 \\
Medium & 0.0685 \\
High & 0.134 \\
\bottomrule()
\end{longtable}

\protect\hyperlink{inputs}{Inputs} \protect\hyperlink{model-parameters}{Model Parameters} \protect\hyperlink{model-definition-files}{Definitions}

\hypertarget{model_tdm_workschedule.csv-1}{%
\subsubsection{model\_tdm\_workschedule.csv}\label{model_tdm_workschedule.csv-1}}

\textbf{Travel Demand Management: Work Schedule}: This file contains parameters that describe the effectiveness for different participation levels for three different telecommuting or alternative work schedules.
The telecommuting or alternative work schedule model first evaluates the likely level of participation throughout the region in terms of telecommuting or alternatively-works schedules. Monte Carlo processes are used to identify which households participate in telecommuting programs. The proportion of employees participating in this program is a policy input. This is converted into a proportion of working-age persons by using an assumed labor force participation rate (0.65) to sample working-age persons in households. The model then determines the type of programs that might be implemented. Three potential alternatives are offered including:

\begin{itemize}
\tightlist
\item
  \textbf{4/40 Schedule}: 4 days per week with 40 hours per week
\item
  \textbf{9/80 Schedule}: working 4 days every other week with an average of 80 hours over 2 weeks
\item
  \textbf{Telecommuting}: Workers may work 1 to 2 days a week remotely
\end{itemize}

Once the option has been identified and the level of participation, the estimated VMT is determined on the basis of the parameters in this file.
Here is a snapshot of the file:

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 12\tabcolsep) * \real{0.2294}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 12\tabcolsep) * \real{0.1284}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 12\tabcolsep) * \real{0.1284}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 12\tabcolsep) * \real{0.1284}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 12\tabcolsep) * \real{0.1284}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 12\tabcolsep) * \real{0.1284}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 12\tabcolsep) * \real{0.1284}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
WorkSchedulePolicy
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Participation0
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Participation1
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Participation2
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Participation3
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Participation4
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Participation5
\end{minipage} \\
\midrule()
\endhead
Schedule980 & 0 & 0.0007 & 0.0021 & 0.0035 & 0.007 & 0.0175 \\
Schedule440 & 0 & 0.0015 & 0.0045 & 0.007 & 0.015 & 0.0375 \\
TelecommuteoneandhalfDays & 0 & 0.0022 & 0.0066 & 0.011 & 0.022 & 0.055 \\
\bottomrule()
\end{longtable}

\protect\hyperlink{inputs}{Inputs} \protect\hyperlink{model-parameters}{Model Parameters} \protect\hyperlink{model-definition-files}{Definitions}

\hypertarget{model_tdm_workschedulelevels.csv-1}{%
\subsubsection{model\_tdm\_workschedulelevels.csv}\label{model_tdm_workschedulelevels.csv-1}}

\textbf{Travel Demand Management: Work Schedule Participation Levels}: This file describes the proportion of employees participating in the program corresponding to the participation levels used in \emph{model\_tdm\_workschedule.csv} file.
Here is a snapshot of the file:

\begin{longtable}[]{@{}ll@{}}
\toprule()
ParticipationLevel & ParticipationValue \\
\midrule()
\endhead
Participation0 & 0 \\
Participation1 & 0.01 \\
Participation2 & 0.03 \\
Participation3 & 0.05 \\
Participation4 & 0.1 \\
Participation5 & 0.25 \\
\bottomrule()
\end{longtable}

\protect\hyperlink{inputs}{Inputs} \protect\hyperlink{model-parameters}{Model Parameters} \protect\hyperlink{model-definition-files}{Definitions}

\hypertarget{model_transportation_costs.csv-1}{%
\subsubsection{model\_transportation\_costs.csv}\label{model_transportation_costs.csv-1}}

\textbf{Transportation Costs}: This file contains unit cost rates for transportation infrastructure investments and operating costs and transit fare revenue. The parameters are used in the calculations of the transportation costs performance metrics.
The source for transit capital, operating costs, and fare revenue is the \href{https://www.transit.dot.gov/ntd}{NTD}, and in particular the National Transit Profile which is available on the NTDB website. Costs are available in a variety of index formats, e.g.~cost per revenue mile or hour; cost per passenger trip is used in VERPAT.
The source for highway infrastructure costs is FHWA's Highway Economic Requirements System model, or HERS. Information was obtained from Chapter 6 of the 2005 Technical Report for all US states (FHWA, 2005). Table 8-1 in HERS provides unit costs (per lane mile) for both Rural and Urban highway systems, and distinguishes among three functional classes: interstates, freeways and expressways; other principal arterials; and minor arterials and collectors. Costs estimates are provided for the following improvements:

\begin{itemize}
\tightlist
\item
  Reconstruction and widening
\item
  Reconstruct pavement
\item
  Resurface and widen lanes
\item
  Resurface pavement
\item
  Improve shoulders
\end{itemize}

Additional choices are offered to distinguish between adding a lane at ``normal'' vs.~``high cost'', and also for pavement realignment, also under normal vs.~high cost conditions. For practical reasons, it was decided to use only ``new construction'' (which also includes adding lanes) costs as the basis for the cost estimates, and to ignore the categories of reconstruction, resurfacing, and realignment. These construction costs include right of way, construction, and a ``small'' allowance for bridges and support facilities.
The infrastructure costs focus only on the ``urban'' system, not rural, which also makes it possible to differentiate by three size classes: Small Urban, Small Urbanized, and Large Urbanized. The numbers from HERS are in 2002 dollars; FHWA advises escalation to current dollars using its NHCCI, which is available online at \url{http://www.fhwa.dot.gov/policyinformation/nhcci.cfm}); the report in VERPAT escalates uses this Index to escalate to 2010 values.
The parameter values in this file are average values per lane mile, simplifying the calculations of highway costs to just differentiate investments in freeway vs.~arterial functional class roads.
Here is a snapshot of the file:

\begin{longtable}[]{@{}llll@{}}
\toprule()
SupplyClass & CapCosts.2000 & OpCosts.2000 & Fare.2000 \\
\midrule()
\endhead
Freeway & 17 & 0 & 0 \\
Arterial & 7 & 0 & 0 \\
Bus & 0.71 & 3.4 & 0.91 \\
Rail & 5.11 & 4.87 & 2.19 \\
\bottomrule()
\end{longtable}

\protect\hyperlink{inputs}{Inputs} \protect\hyperlink{model-parameters}{Model Parameters} \protect\hyperlink{model-definition-files}{Definitions}

\hypertarget{model_veh_mpg_by_year.csv-1}{%
\subsubsection{model\_veh\_mpg\_by\_year.csv}\label{model_veh_mpg_by_year.csv-1}}

\textbf{Vehicle fuel economy (\emph{model\_veh\_mpg\_by\_year.csv})}: This file contains the estimates and forecasts of average fuel economy and power economy in miles per gallon for autos, light trucks, heavy trucks (trucks) and miles per kilowatt for trains by vehicle model year. Note that this is not the fleet average for that year. It is the average for new vehicles sold in that year. The fuel economy is the same for all fuel types and is measured in gasoline equivalent gallons (i.e.~energy content of a gallon of gasoline). This file is used in the calculations of fuel consumption.
Here is a snapshot of the file:

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.1667}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.1667}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.1667}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.1667}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.1667}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.1667}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
ModelYear
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
AutoMpg
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
LtTruckMpg
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
TruckMpg
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
BusMpg
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
TrainMpg
\end{minipage} \\
\midrule()
\endhead
1975 & 15.1 & 12.7 & 5.1 & 4.2 & 0.098266 \\
1976 & 16.6 & 13.2 & 5.1 & 4.1 & 0.098266 \\
1977 & 17.4 & 14.1 & 5.1 & 4.1 & 0.098266 \\
1978 & 19.2 & 13.7 & 5.1 & 4 & 0.098266 \\
\includegraphics{./VERPAT_images/vdots.gif} & \includegraphics{./VERPAT_images/vdots.gif} & \includegraphics{./VERPAT_images/vdots.gif} & \includegraphics{./VERPAT_images/vdots.gif} & \includegraphics{./VERPAT_images/vdots.gif} & \includegraphics{./VERPAT_images/vdots.gif} \\
2046 & 63.7 & 41.1 & 5.6 & 4.8 & 0.121191 \\
2047 & 63.7 & 41.1 & 5.6 & 4.8 & 0.121191 \\
2048 & 63.7 & 41.1 & 5.6 & 4.8 & 0.121191 \\
2049 & 63.7 & 41.1 & 5.6 & 4.8 & 0.121191 \\
2050 & 63.7 & 41.1 & 5.6 & 4.8 & 0.121191 \\
\bottomrule()
\end{longtable}

\protect\hyperlink{inputs}{Inputs} \protect\hyperlink{model-parameters}{Model Parameters} \protect\hyperlink{model-definition-files}{Definitions}

\hypertarget{model_phev_range_prop_mpg_mpkwh.csv-1}{%
\subsubsection{model\_phev\_range\_prop\_mpg\_mpkwh.csv}\label{model_phev_range_prop_mpg_mpkwh.csv-1}}

\textbf{Plugin hybrid electric vehicles characteristics (\emph{model\_phev\_range\_prop\_mpg\_mpkwh.csv})}: This file contains the estimates and forecasts of range, fuel efficiency (mpg), power efficiency (mpkwh), and proportions of automobiles and light trucks that are plugin hybrid electric vehicles by vehicle model year. Note that this is not the fleet average for that year. It is the average of new vehicles sold in that year. This file is used in identification of plugin hybrid electric and electric vehicles. Here is a snapshot of the file:

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 16\tabcolsep) * \real{0.0874}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 16\tabcolsep) * \real{0.1262}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 16\tabcolsep) * \real{0.1165}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 16\tabcolsep) * \real{0.0874}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 16\tabcolsep) * \real{0.0680}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 16\tabcolsep) * \real{0.1553}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 16\tabcolsep) * \real{0.1456}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 16\tabcolsep) * \real{0.1165}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 16\tabcolsep) * \real{0.0971}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
ModelYear
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
AutoPhevRange
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
AutoPropPhev
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
AutoMpkwh
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
AutoMpg
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
LtTruckPhevRange
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
LtTruckPropPhev
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
LtTruckMpkwh
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
LtTruckMpg
\end{minipage} \\
\midrule()
\endhead
1975 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 \\
1976 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 \\
1977 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 \\
1978 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 \\
1979 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 \\
\includegraphics{./VERPAT_images/vdots.gif} & \includegraphics{./VERPAT_images/vdots.gif} & \includegraphics{./VERPAT_images/vdots.gif} & \includegraphics{./VERPAT_images/vdots.gif} & \includegraphics{./VERPAT_images/vdots.gif} & \includegraphics{./VERPAT_images/vdots.gif} & & & \\
2045 & 40 & 0.66 & 4.375 & 74.5 & 40 & 0.586666667 & 2.875 & 58.2 \\
2046 & 40 & 0.708 & 4.4 & 74.9 & 40 & 0.629333333 & 2.9 & 58.5 \\
2047 & 40 & 0.756 & 4.425 & 75.3 & 40 & 0.672 & 2.925 & 58.8 \\
2048 & 40 & 0.816 & 4.45 & 75.6 & 40 & 0.725333333 & 2.95 & 59.1 \\
2049 & 40 & 0.864 & 4.475 & 76 & 40 & 0.768 & 2.975 & 59.3 \\
2050 & 40 & 0.9 & 4.5 & 76.4 & 40 & 0.8 & 3 & 59.6 \\
\bottomrule()
\end{longtable}

\protect\hyperlink{inputs}{Inputs} \protect\hyperlink{model-parameters}{Model Parameters} \protect\hyperlink{model-definition-files}{Definitions}

\hypertarget{model_hev_prop_mpg.csv-1}{%
\subsubsection{model\_hev\_prop\_mpg.csv}\label{model_hev_prop_mpg.csv-1}}

\textbf{Hybrid electric vehicles characteristics (\emph{model\_hev\_prop\_mpg.csv})}: This file contains the estimates and forecasts of fuel efficiency (mpg), and proportions of automobiles and light trucks that are hybrid electric vehicles (that are neither plugin hybrid nor electric vehicle) by vehicle model year. Note that this is not the fleet average for that year. It is the average of new vehicles sold in that year. This file is used in identification of hybrid electric that are not plugin hybrid or electric vehicles. Here is a snapshot of the file:

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 8\tabcolsep) * \real{0.1579}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 8\tabcolsep) * \real{0.1930}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 8\tabcolsep) * \real{0.1754}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 8\tabcolsep) * \real{0.2456}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 8\tabcolsep) * \real{0.2281}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
ModelYear
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
AutoPropHev
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
AutoHevMpg
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
LtTruckPropHev
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
LtTruckHevMpg
\end{minipage} \\
\midrule()
\endhead
1975 & 0 & 0 & 0 & 0 \\
1976 & 0 & 0 & 0 & 0 \\
1977 & 0 & 0 & 0 & 0 \\
1978 & 0 & 0 & 0 & 0 \\
1979 & 0 & 0 & 0 & 0 \\
1980 & 0 & 0 & 0 & 0 \\
\includegraphics{./VERPAT_images/vdots.gif} & \includegraphics{./VERPAT_images/vdots.gif} & \includegraphics{./VERPAT_images/vdots.gif} & \includegraphics{./VERPAT_images/vdots.gif} & \includegraphics{./VERPAT_images/vdots.gif} \\
2046 & 0.981481481 & 74.2 & 0.736111111 & 55.4 \\
2047 & 0.981481481 & 74.5 & 0.736111111 & 55.6 \\
2048 & 1 & 74.9 & 0.75 & 55.9 \\
2049 & 1 & 75.2 & 0.75 & 56.1 \\
2050 & 1 & 75.5 & 0.75 & 56.3 \\
\bottomrule()
\end{longtable}

\protect\hyperlink{inputs}{Inputs} \protect\hyperlink{model-parameters}{Model Parameters} \protect\hyperlink{model-definition-files}{Definitions}

\hypertarget{model_ev_range_prop_mpkwh.csv-1}{%
\subsubsection{model\_ev\_range\_prop\_mpkwh.csv}\label{model_ev_range_prop_mpkwh.csv-1}}

\textbf{Electric vehicles characteristics (\emph{model\_ev\_range\_prop\_mpkwh.csv})}: This file contains the estimates and forecasts of range, power efficiency (mpkwh), and proportions of automobiles and light trucks that are electric vehicles by vehicle model year. Note that this is not the fleet average for that year. It is the average of new vehicles sold in that year. This file is used in identification of electric vehicles. Here is a snapshot of the file:

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 12\tabcolsep) * \real{0.1216}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 12\tabcolsep) * \real{0.1216}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 12\tabcolsep) * \real{0.1351}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 12\tabcolsep) * \real{0.1216}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 12\tabcolsep) * \real{0.1622}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 12\tabcolsep) * \real{0.1757}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 12\tabcolsep) * \real{0.1622}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
ModelYear
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
AutoRange
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
AutoPropEv
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
AutoMpkwh
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
LtTruckRange
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
LtTruckPropEv
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
LtTruckMpkwh
\end{minipage} \\
\midrule()
\endhead
1975 & 0 & 0 & 0 & 0 & 0 & 0 \\
1976 & 0 & 0 & 0 & 0 & 0 & 0 \\
1977 & 0 & 0 & 0 & 0 & 0 & 0 \\
1978 & 0 & 0 & 0 & 0 & 0 & 0 \\
1979 & 0 & 0 & 0 & 0 & 0 & 0 \\
\includegraphics{./VERPAT_images/vdots.gif} & \includegraphics{./VERPAT_images/vdots.gif} & \includegraphics{./VERPAT_images/vdots.gif} & \includegraphics{./VERPAT_images/vdots.gif} & \includegraphics{./VERPAT_images/vdots.gif} & \includegraphics{./VERPAT_images/vdots.gif} & \\
2046 & 277.5 & 0.72 & 4.4 & 185 & 0.56 & 2.9 \\
2047 & 283.125 & 0.75 & 4.425 & 188.75 & 0.583333333 & 2.925 \\
2048 & 288.75 & 0.795 & 4.45 & 192.5 & 0.618333333 & 2.95 \\
2049 & 294.375 & 0.855 & 4.475 & 196.25 & 0.665 & 2.975 \\
2050 & 300 & 0.9 & 4.5 & 200 & 0.7 & 3 \\
\bottomrule()
\end{longtable}

\protect\hyperlink{inputs}{Inputs} \protect\hyperlink{model-parameters}{Model Parameters} \protect\hyperlink{model-definition-files}{Definitions}

\hypertarget{json-inputs-5}{%
\subsubsection{JSON Inputs}\label{json-inputs-5}}

\hypertarget{annvmtinflator-1}{%
\subsubsection{AnnVmtInflator}\label{annvmtinflator-1}}

\textbf{Annual VMT inflator (\emph{AnnVmtInflator})}: Factor to convert VMT between annual and average daily amounts. It should be defined in \protect\hyperlink{model_parametersjson}{model\_parameters.json} as follows:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{\{}
    \DataTypeTok{"NAME"} \FunctionTok{:} \StringTok{"AnnVmtInflator"}\FunctionTok{,}
    \DataTypeTok{"VALUE"}\FunctionTok{:} \StringTok{"365"}\FunctionTok{,}
    \DataTypeTok{"TYPE"} \FunctionTok{:} \StringTok{"integer"}\FunctionTok{,}
    \DataTypeTok{"UNITS"} \FunctionTok{:} \StringTok{"DAYS"}\FunctionTok{,}
    \DataTypeTok{"PROHIBIT"} \FunctionTok{:} \StringTok{"c(\textquotesingle{}NA\textquotesingle{}, \textquotesingle{}\textless{} 0\textquotesingle{})"}\FunctionTok{,}
    \DataTypeTok{"ISELEMENTOF"} \FunctionTok{:} \StringTok{""}
\FunctionTok{\}}
\end{Highlighting}
\end{Shaded}

\protect\hyperlink{inputs}{Inputs} \protect\hyperlink{model-parameters}{Model Parameters} \protect\hyperlink{model-definition-files}{Definitions}

\hypertarget{basecostpermile-1}{%
\subsubsection{BaseCostPerMile}\label{basecostpermile-1}}

\textbf{Base cost per mile (\emph{BaseCostPerMile})}: Base cost per mile in dollars for transportation costs used in the travel demand model to initially represent travel as close to unconstrained by transportation costs. The transportation costs are then fully constrained later in the model as travel reductions caused by budget constraints are estimated. It should be defined in \protect\hyperlink{model_parametersjson}{model\_parameters.json} as follows:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{\{}
    \DataTypeTok{"NAME"} \FunctionTok{:} \StringTok{"BaseCostPerMile"}\FunctionTok{,}
    \DataTypeTok{"VALUE"}\FunctionTok{:} \StringTok{"0.04"}\FunctionTok{,}
    \DataTypeTok{"TYPE"} \FunctionTok{:} \StringTok{"compound"}\FunctionTok{,}
    \DataTypeTok{"UNITS"} \FunctionTok{:} \StringTok{"USD/MI"}\FunctionTok{,}
    \DataTypeTok{"PROHIBIT"} \FunctionTok{:} \StringTok{"c(\textquotesingle{}NA\textquotesingle{}, \textquotesingle{}\textless{} 0\textquotesingle{})"}\FunctionTok{,}
    \DataTypeTok{"ISELEMENTOF"} \FunctionTok{:} \StringTok{""}
\FunctionTok{\}}
\end{Highlighting}
\end{Shaded}

\protect\hyperlink{inputs}{Inputs} \protect\hyperlink{model-parameters}{Model Parameters} \protect\hyperlink{model-definition-files}{Definitions}

\hypertarget{dvmtbudgetprop-1}{%
\subsubsection{DvmtBudgetProp}\label{dvmtbudgetprop-1}}

\textbf{Dvmt budget proportion (\emph{DvmtBudgetProp})}: The proportion of household budget that can be allocated to transportation spending. The travel demand models includes a constraint that reduces household travel if too high a proportion of household spending is spent on transportation. It should be defined in \protect\hyperlink{model_parametersjson}{model\_parameters.json} as follows:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{\{}
    \DataTypeTok{"NAME"} \FunctionTok{:} \StringTok{"DvmtBudgetProp"}\FunctionTok{,}
    \DataTypeTok{"VALUE"}\FunctionTok{:} \StringTok{"0.1"}\FunctionTok{,}
    \DataTypeTok{"TYPE"} \FunctionTok{:} \StringTok{"double"}\FunctionTok{,}
    \DataTypeTok{"UNITS"} \FunctionTok{:} \StringTok{"multiplier"}\FunctionTok{,}
    \DataTypeTok{"PROHIBIT"} \FunctionTok{:} \StringTok{"c(\textquotesingle{}NA\textquotesingle{}, \textquotesingle{}\textless{} 0\textquotesingle{}, \textquotesingle{}\textgreater{} 1\textquotesingle{})"}\FunctionTok{,}
    \DataTypeTok{"ISELEMENTOF"} \FunctionTok{:} \StringTok{""}
\FunctionTok{\}}
\end{Highlighting}
\end{Shaded}

\protect\hyperlink{inputs}{Inputs} \protect\hyperlink{model-parameters}{Model Parameters} \protect\hyperlink{model-definition-files}{Definitions}

\hypertarget{fuelcost-1}{%
\subsubsection{FuelCost}\label{fuelcost-1}}

\textbf{Fuel cost (\emph{FuelCost})}: Average cost per gallon of fuel (before taxes are added). It should be defined in \protect\hyperlink{model_parametersjson}{model\_parameters.json} as follows:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{\{}
    \DataTypeTok{"NAME"} \FunctionTok{:} \StringTok{"FuelCost"}\FunctionTok{,}
    \DataTypeTok{"VALUE"}\FunctionTok{:} \StringTok{"1.82"}\FunctionTok{,}
    \DataTypeTok{"TYPE"} \FunctionTok{:} \StringTok{"compound"}\FunctionTok{,}
    \DataTypeTok{"UNITS"} \FunctionTok{:} \StringTok{"USD/GAL"}\FunctionTok{,}
    \DataTypeTok{"PROHIBIT"} \FunctionTok{:} \StringTok{"c(\textquotesingle{}NA\textquotesingle{}, \textquotesingle{}\textless{} 0\textquotesingle{})"}\FunctionTok{,}
    \DataTypeTok{"ISELEMENTOF"} \FunctionTok{:} \StringTok{""}
\FunctionTok{\}}
\end{Highlighting}
\end{Shaded}

\protect\hyperlink{inputs}{Inputs} \protect\hyperlink{model-parameters}{Model Parameters} \protect\hyperlink{model-definition-files}{Definitions}

\hypertarget{kwhcost-1}{%
\subsubsection{KwhCost}\label{kwhcost-1}}

\textbf{Power cost (\emph{KwhCost})}: Average cost per kwh of power consumption (before taxes are added). It should be defined in \protect\hyperlink{model_parametersjson}{model\_parameters.json} as follows:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{\{}
    \DataTypeTok{"NAME"} \FunctionTok{:} \StringTok{"KwhCost"}\FunctionTok{,}
    \DataTypeTok{"VALUE"}\FunctionTok{:} \StringTok{"0.257"}\FunctionTok{,}
    \DataTypeTok{"TYPE"} \FunctionTok{:} \StringTok{"compound"}\FunctionTok{,}
    \DataTypeTok{"UNITS"} \FunctionTok{:} \StringTok{"USD/KWH"}\FunctionTok{,}
    \DataTypeTok{"PROHIBIT"} \FunctionTok{:} \StringTok{"c(\textquotesingle{}NA\textquotesingle{}, \textquotesingle{}\textless{} 0\textquotesingle{})"}\FunctionTok{,}
    \DataTypeTok{"ISELEMENTOF"} \FunctionTok{:} \StringTok{""}
\FunctionTok{\}}
\end{Highlighting}
\end{Shaded}

\protect\hyperlink{inputs}{Inputs} \protect\hyperlink{model-parameters}{Model Parameters} \protect\hyperlink{model-definition-files}{Definitions}

\hypertarget{gastax-1}{%
\subsubsection{GasTax}\label{gastax-1}}

\textbf{Gas tax (\emph{GasTax})}: Average cost per gallon of fuel of gas taxes. It should be defined in \protect\hyperlink{model_parametersjson}{model\_parameters.json} as follows:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{\{}
    \DataTypeTok{"NAME"} \FunctionTok{:} \StringTok{"GasTax"}\FunctionTok{,}
    \DataTypeTok{"VALUE"}\FunctionTok{:} \StringTok{"0.424"}\FunctionTok{,}
    \DataTypeTok{"TYPE"} \FunctionTok{:} \StringTok{"compound"}\FunctionTok{,}
    \DataTypeTok{"UNITS"} \FunctionTok{:} \StringTok{"USD/GAL"}\FunctionTok{,}
    \DataTypeTok{"PROHIBIT"} \FunctionTok{:} \StringTok{"c(\textquotesingle{}NA\textquotesingle{}, \textquotesingle{}\textless{} 0\textquotesingle{})"}\FunctionTok{,}
    \DataTypeTok{"ISELEMENTOF"} \FunctionTok{:} \StringTok{""}
\FunctionTok{\}}
\end{Highlighting}
\end{Shaded}

\protect\hyperlink{inputs}{Inputs} \protect\hyperlink{model-parameters}{Model Parameters} \protect\hyperlink{model-definition-files}{Definitions}

\hypertarget{lttruckprop-1}{%
\subsubsection{LtTruckProp}\label{lttruckprop-1}}

\textbf{Light Truck Proportions (\emph{LtTruckProp})}: The proportion of household vehicles that are light trucks (SUVs, pickup trucks) as opposed to autos. It should be defined in \protect\hyperlink{model_parametersjson}{model\_parameters.json} as follows:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{\{}
    \DataTypeTok{"NAME"} \FunctionTok{:} \StringTok{"LtTruckProp"}\FunctionTok{,}
    \DataTypeTok{"VALUE"}\FunctionTok{:} \StringTok{"0.45"}\FunctionTok{,}
    \DataTypeTok{"TYPE"} \FunctionTok{:} \StringTok{"double"}\FunctionTok{,}
    \DataTypeTok{"UNITS"} \FunctionTok{:} \StringTok{"multiplier"}\FunctionTok{,}
    \DataTypeTok{"PROHIBIT"} \FunctionTok{:} \StringTok{"c(\textquotesingle{}NA\textquotesingle{}, \textquotesingle{}\textless{} 0\textquotesingle{})"}\FunctionTok{,}
    \DataTypeTok{"ISELEMENTOF"} \FunctionTok{:} \StringTok{""}
\FunctionTok{\}}
\end{Highlighting}
\end{Shaded}

\protect\hyperlink{inputs}{Inputs} \protect\hyperlink{model-parameters}{Model Parameters} \protect\hyperlink{model-definition-files}{Definitions}

\hypertarget{tranrevmiadjfactor-1}{%
\subsubsection{TranRevMiAdjFactor}\label{tranrevmiadjfactor-1}}

\textbf{Transit revenue adjustment factor (\emph{TranRevMiAdjFactor})}: Factor to convert transit revenue miles (i.e.~miles run in service on routes) to total transit vehicle miles operated to account for vehicle miles run while deadheading from depots to route endpoints. It should be defined in \protect\hyperlink{model_parametersjson}{model\_parameters.json} as follows:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{\{}
    \DataTypeTok{"NAME"} \FunctionTok{:} \StringTok{"TranRevMiAdjFactor"}\FunctionTok{,}
    \DataTypeTok{"VALUE"}\FunctionTok{:} \StringTok{"1.12"}\FunctionTok{,}
    \DataTypeTok{"TYPE"} \FunctionTok{:} \StringTok{"double"}\FunctionTok{,}
    \DataTypeTok{"UNITS"} \FunctionTok{:} \StringTok{"multiplier"}\FunctionTok{,}
    \DataTypeTok{"PROHIBIT"} \FunctionTok{:} \StringTok{"c(\textquotesingle{}NA\textquotesingle{}, \textquotesingle{}\textless{} 0\textquotesingle{})"}\FunctionTok{,}
    \DataTypeTok{"ISELEMENTOF"} \FunctionTok{:} \StringTok{""}
\FunctionTok{\}}
\end{Highlighting}
\end{Shaded}

\protect\hyperlink{inputs}{Inputs} \protect\hyperlink{model-parameters}{Model Parameters} \protect\hyperlink{model-definition-files}{Definitions}

\hypertarget{truckvmtgrowthmultiplier-1}{%
\subsubsection{TruckVmtGrowthMultiplier}\label{truckvmtgrowthmultiplier-1}}

\textbf{Truck vmt growth multiplier (\emph{TruckVmtGrowthMultiplier})}: Rate at which heavy truck VMT growth in relation to total regional household income growth in the region. A value of 1 indicates that heavy truck VMT grows at the same rate as total regional household income. A value less than 1 means slower growth in truck VMT, and greater than 1 means faster growth in truck VMT than total regional household income. It should be defined in \protect\hyperlink{model_parametersjson}{model\_parameters.json} as follows:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{\{}
    \DataTypeTok{"NAME"} \FunctionTok{:} \StringTok{"TruckVmtGrowthMultiplier"}\FunctionTok{,}
    \DataTypeTok{"VALUE"}\FunctionTok{:} \StringTok{"1"}\FunctionTok{,}
    \DataTypeTok{"TYPE"} \FunctionTok{:} \StringTok{"double"}\FunctionTok{,}
    \DataTypeTok{"UNITS"} \FunctionTok{:} \StringTok{"multiplier"}\FunctionTok{,}
    \DataTypeTok{"PROHIBIT"} \FunctionTok{:} \StringTok{"c(\textquotesingle{}NA\textquotesingle{}, \textquotesingle{}\textless{} 0\textquotesingle{})"}\FunctionTok{,}
    \DataTypeTok{"ISELEMENTOF"} \FunctionTok{:} \StringTok{""}
\FunctionTok{\}}
\end{Highlighting}
\end{Shaded}

\protect\hyperlink{inputs}{Inputs} \protect\hyperlink{model-parameters}{Model Parameters} \protect\hyperlink{model-definition-files}{Definitions}

\hypertarget{workvmtprop-1}{%
\subsubsection{WorkVmtProp}\label{workvmtprop-1}}

\textbf{Work VMT Proportion (\emph{WorkVmtProp})}: The proportion of household VMT that takes place for commute to work purposes; used to differentiate between travel purposes for use in estimating overall VMT reductions that are targeted at the commute to work. It should be defined in \protect\hyperlink{model_parametersjson}{model\_parameters.json} as follows:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{\{}
    \DataTypeTok{"NAME"} \FunctionTok{:} \StringTok{"WorkVmtProp"}\FunctionTok{,}
    \DataTypeTok{"VALUE"}\FunctionTok{:} \StringTok{"0.25"}\FunctionTok{,}
    \DataTypeTok{"TYPE"} \FunctionTok{:} \StringTok{"double"}\FunctionTok{,}
    \DataTypeTok{"UNITS"} \FunctionTok{:} \StringTok{"proportion"}\FunctionTok{,}
    \DataTypeTok{"PROHIBIT"} \FunctionTok{:} \StringTok{"c(\textquotesingle{}NA\textquotesingle{}, \textquotesingle{}\textless{} 0\textquotesingle{})"}\FunctionTok{,}
    \DataTypeTok{"ISELEMENTOF"} \FunctionTok{:} \StringTok{""}
\FunctionTok{\}}
\end{Highlighting}
\end{Shaded}

\hypertarget{modules-and-outputs-2}{%
\section{Modules and Outputs}\label{modules-and-outputs-2}}

The VERPAT model is a compilation of several packages, listed below, the inputs of which are described respectively. The inputs are classified into five categories:

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  \textbf{User input files}: These are input files (model or scenario specific) that a user is recommended to change.
\item
  \textbf{User input model parameters}: These are input parameters (model or scenario specific), defined in \protect\hyperlink{model_parametersjson}{model\_parameters.json}, that a user is recommended to change.
\item
  \textbf{Fixed input files}: These are input parameters specific to the model that are fixed.
\item
  \textbf{Fixed input model parameters}: These are input parameters specific to the model, defined in \protect\hyperlink{model_parametersjson}{model\_parameters.json}, that are fixed.
\item
  \textbf{Internal module inputs}: These are inputs produced as output by other modules.
\end{enumerate}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 4\tabcolsep) * \real{0.4370}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 4\tabcolsep) * \real{0.4444}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 4\tabcolsep) * \real{0.1185}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
MODULE
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
PACKAGE
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
RPAT
\end{minipage} \\
\midrule()
\endhead
\protect\hyperlink{createhouseholds}{CreateHouseholds} & \href{https://github.com/visioneval/VisionEval/tree/master/sources/modules/VESimHouseholds}{VESimHouseholds} & household \\
\protect\hyperlink{predictworkers}{PredictWorkers} & \href{https://github.com/visioneval/VisionEval/tree/master/sources/modules/VESimHouseholds}{VESimHouseholds} & household \\
\protect\hyperlink{predictincome}{PredictIncome} & \href{https://github.com/visioneval/VisionEval/tree/master/sources/modules/VESimHouseholds}{VESimHouseholds} & household \\
\protect\hyperlink{createbasesyntheticfirms}{CreateBaseSyntheticFirms} & \href{https://github.com/visioneval/VisionEval/tree/master/sources/modules/VESyntheticFirms}{VESyntheticFirms} & household \\
\protect\hyperlink{createfuturesyntheticfirms}{CreateFutureSyntheticFirms} & \href{https://github.com/visioneval/VisionEval/tree/master/sources/modules/VESyntheticFirms}{VESyntheticFirms} & household \\
\protect\hyperlink{calculatebaseplacetypes}{CalculateBasePlaceTypes} & \href{https://github.com/visioneval/VisionEval/tree/master/sources/modules/VELandUse}{VELandUse} & urban \\
\protect\hyperlink{calculatefutureplacetypes}{CalculateFuturePlaceTypes} & \href{https://github.com/visioneval/VisionEval/tree/master/sources/modules/VELandUse}{VELandUse} & urban \\
\protect\hyperlink{createbaseaccessibility}{CreateBaseAccessibility} & \href{https://github.com/visioneval/VisionEval/tree/master/sources/modules/VETransportSupply}{VETransportSupply} & accessibility \\
\protect\hyperlink{createfutureaccessibility}{CreateFutureAccessibility} & \href{https://github.com/visioneval/VisionEval/tree/master/sources/modules/VETransportSupply}{VETransportSupply} & accessibility \\
\protect\hyperlink{assignvehiclefeatures}{AssignVehicleFeatures} & \href{https://github.com/visioneval/VisionEval/tree/master/sources/modules/VEHouseholdVehicles}{VEHouseholdVehicles} & vehicle \\
\protect\hyperlink{assignvehiclefeaturesfuture}{AssignVehicleFeaturesFuture} & \href{https://github.com/visioneval/VisionEval/tree/master/sources/modules/VEHouseholdVehicles}{VEHouseholdVehicles} & vehicle \\
\protect\hyperlink{calculatetraveldemand}{CalculateTravelDemand} & \href{https://github.com/visioneval/VisionEval/tree/master/sources/modules/VEHouseholdTravel}{VEHouseholdTravel} & demand \\
\protect\hyperlink{calculatetraveldemandfuture}{CalculateTravelDemandFuture} & \href{https://github.com/visioneval/VisionEval/tree/master/sources/modules/VEHouseholdTravel}{VEHouseholdTravel} & demand \\
\protect\hyperlink{calculatecongestionbase}{CalculateCongestionBase} & \href{https://github.com/visioneval/VisionEval/tree/master/sources/modules/VETransportSupplyUse}{VETransportSupplyUse} & congestion \\
\protect\hyperlink{calculatecongestionfuture}{CalculateCongestionFuture} & \href{https://github.com/visioneval/VisionEval/tree/master/sources/modules/VETransportSupplyUse}{VETransportSupplyUse} & congestion \\
\protect\hyperlink{calculateinduceddemand}{CalculateInducedDemand} & \href{https://github.com/visioneval/VisionEval/tree/master/sources/modules/VEHouseholdTravel}{VEHouseholdTravel} & induced \\
\protect\hyperlink{calculatepolicyvmt}{CalculatePolicyVmt} & \href{https://github.com/visioneval/VisionEval/tree/master/sources/modules/VEHouseholdTravel}{VEHouseholdTravel} & policyvmt \\
\protect\hyperlink{calculatecongestionpolicy}{CalculateCongestionPolicy} & \href{https://github.com/visioneval/VisionEval/tree/master/sources/modules/VETransportSupplyUse}{VETransportSupplyUse} & policycongestion \\
\protect\hyperlink{reportrpatmetrics}{ReportRPATMetrics} & \href{https://github.com/visioneval/VisionEval/tree/master/sources/modules/VEReports}{VEReports} & metrics \\
\bottomrule()
\end{longtable}

\protect\hyperlink{contents}{Top} \protect\hyperlink{definitions}{Definitions} \protect\hyperlink{inputs-and-outputs}{Inputs/Outputs}

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\hypertarget{createhouseholds-1}{%
\subsection{CreateHouseholds}\label{createhouseholds-1}}

This module creates simulated households for a model using inputs of population by age group for each Azone and year.

\hypertarget{user-input-files-77}{%
\subsubsection{User Input Files}\label{user-input-files-77}}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\item
  \textbf{Household population (\emph{azone\_hh\_pop\_by\_age.csv})}: This file contains population estimates/forecasts by county and age cohort for each of the base and future years. The file format includes six age categories used by the population synthesis model:

  \begin{itemize}
  \tightlist
  \item
    \textbf{0-14}
  \item
    \textbf{15-19}
  \item
    \textbf{20-29}
  \item
    \textbf{30-54}
  \item
    \textbf{55-64}
  \item
    \textbf{65 Plus}
  \end{itemize}

  Future year data must be developed by the user; in many regions population forecasts are available from regional or state agencies and/or local academic sources. As with the employment data inputs the future data need not be county specific. Rather, regional totals by age group can be entered into the file with a value such as ``region'' entered in the county field.

  Here is a snapshot of the file:

  \begin{longtable}[]{@{}
    >{\raggedright\arraybackslash}p{(\columnwidth - 14\tabcolsep) * \real{0.1364}}
    >{\raggedright\arraybackslash}p{(\columnwidth - 14\tabcolsep) * \real{0.0606}}
    >{\raggedright\arraybackslash}p{(\columnwidth - 14\tabcolsep) * \real{0.1212}}
    >{\raggedright\arraybackslash}p{(\columnwidth - 14\tabcolsep) * \real{0.1364}}
    >{\raggedright\arraybackslash}p{(\columnwidth - 14\tabcolsep) * \real{0.1364}}
    >{\raggedright\arraybackslash}p{(\columnwidth - 14\tabcolsep) * \real{0.1364}}
    >{\raggedright\arraybackslash}p{(\columnwidth - 14\tabcolsep) * \real{0.1364}}
    >{\raggedright\arraybackslash}p{(\columnwidth - 14\tabcolsep) * \real{0.1364}}@{}}
  \toprule()
  \begin{minipage}[b]{\linewidth}\raggedright
  Geo
  \end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
  Year
  \end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
  Age0to14
  \end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
  Age15to19
  \end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
  Age20to29
  \end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
  Age30to54
  \end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
  Age55to64
  \end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
  Age65Plus
  \end{minipage} \\
  \midrule()
  \endhead
  Multnomah & 2005 & 129869 & 41133 & 99664 & 277854 & 71658 & 72648 \\
  Multnomah & 2035 & 169200 & 48800 & 144050 & 327750 & 116100 & 162800 \\
  \bottomrule()
  \end{longtable}
\item
  \textbf{Household size (\emph{azone\_hhsize\_targets.csv})}: This file contains the household specific targets. This contain two household specific attributes:

  \begin{itemize}
  \tightlist
  \item
    \textbf{AveHhSize}: Average household size of households (non-group quarters)
  \item
    \textbf{Prop1PerHh}: Proportion of households (non-group quarters) having only one person
  \end{itemize}

  Here is a snapshot of the file:

  \begin{longtable}[]{@{}llll@{}}
  \toprule()
  Geo & Year & AveHhSize & Prop1PerHh \\
  \midrule()
  \endhead
  Multnomah & 2005 & NA & NA \\
  Multnomah & 2035 & NA & NA \\
  \bottomrule()
  \end{longtable}
\item
  \textbf{Group quarter population (\emph{azone\_gq\_pop\_by\_age.csv})}: This file contains group quarters population estimates/forecasts by county and age cohort for each of the base and future years. The file format includes six age categories used by the population synthesis model:

  \begin{itemize}
  \tightlist
  \item
    \textbf{0-14}
  \item
    \textbf{15-19}
  \item
    \textbf{20-29}
  \item
    \textbf{30-54}
  \item
    \textbf{55-64}
  \item
    \textbf{65 Plus}
  \end{itemize}

  Here is a snapshot of the file:

  \begin{longtable}[]{@{}
    >{\raggedright\arraybackslash}p{(\columnwidth - 14\tabcolsep) * \real{0.1071}}
    >{\raggedright\arraybackslash}p{(\columnwidth - 14\tabcolsep) * \real{0.0476}}
    >{\raggedright\arraybackslash}p{(\columnwidth - 14\tabcolsep) * \real{0.1310}}
    >{\raggedright\arraybackslash}p{(\columnwidth - 14\tabcolsep) * \real{0.1429}}
    >{\raggedright\arraybackslash}p{(\columnwidth - 14\tabcolsep) * \real{0.1429}}
    >{\raggedright\arraybackslash}p{(\columnwidth - 14\tabcolsep) * \real{0.1429}}
    >{\raggedright\arraybackslash}p{(\columnwidth - 14\tabcolsep) * \real{0.1429}}
    >{\raggedright\arraybackslash}p{(\columnwidth - 14\tabcolsep) * \real{0.1429}}@{}}
  \toprule()
  \begin{minipage}[b]{\linewidth}\raggedright
  Geo
  \end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
  Year
  \end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
  GrpAge0to14
  \end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
  GrpAge15to19
  \end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
  GrpAge20to29
  \end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
  GrpAge30to54
  \end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
  GrpAge55to64
  \end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
  GrpAge65Plus
  \end{minipage} \\
  \midrule()
  \endhead
  Multnomah & 2005 & 0 & 0 & 0 & 1 & 0 & 0 \\
  Multnomah & 2035 & 0 & 0 & 0 & 1 & 0 & 0 \\
  \bottomrule()
  \end{longtable}
\end{enumerate}

\hypertarget{module-outputs-77}{%
\subsubsection{Module Outputs}\label{module-outputs-77}}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\item
  \textbf{NumHh}: Number of households (non-group quarters)
\item
  \textbf{HhId}: Unique household ID
\item
  \textbf{HhSize}: Number of persons
\item
  \textbf{Age0to14}: Persons in 0 to 14 year old age group
\item
  \textbf{Age15to19}: Persons in 15 to 19 year old age group
\item
  \textbf{Age20to29}: Persons in 20 to 29 year old age group
\item
  \textbf{Age30to54}: Persons in 30 to 54 year old age group
\item
  \textbf{Age55to64}: Persons in 55 to 64 year old age group
\item
  \textbf{Age65Plus}: Persons in 65 or older age group
\item
  \textbf{HhType}: Coded household age composition (e.g.~2-1-0-2-0-0) or Grp for group quarters

  \protect\hyperlink{contents}{Top} \protect\hyperlink{definitions}{Definitions} \protect\hyperlink{inputs-and-outputs}{Inputs/Outputs}
\end{enumerate}

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\hypertarget{predictworkers-1}{%
\subsection{PredictWorkers}\label{predictworkers-1}}

This module assigns workers by age to households and to non-institutional group quarters population. It is a simple model which predicts workers as a function of the household type and age composition. There is no responsiveness to jobs or how changes in the job market and demographics might change the worker age composition, but the user can exogenously adjust the relative employment by age group, Azone, and year. The values are the proportions of persons in the age group who are workers relative to the proportions in the estimation year.

\hypertarget{user-input-files-78}{%
\subsubsection{User Input Files}\label{user-input-files-78}}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\item
  \textbf{Relative employment (\emph{azone\_relative\_employment.csv})}: This file contains ratio of workers to persons by age cohort in model year vs.~estimation data year. This file contains five age cohorts:

  \begin{itemize}
  \tightlist
  \item
    \textbf{RelEmp15to19}: Ratio of workers to persons age 15 to 19 in model year vs.~in estimation data year
  \item
    \textbf{RelEmp20to29}: Ratio of workers to persons age 20 to 29 in model year vs.~in estimation data year
  \item
    \textbf{RelEmp30to54}: Ratio of workers to persons age 30 to 54 in model year vs.~in estimation data year
  \item
    \textbf{RelEmp55to64}: Ratio of workers to persons age 55 to 64 in model year vs.~in estimation data year
  \item
    \textbf{RelEmp65Plus}: Ratio of workers to persons age 65 or older in model year vs.~in estimation data year
  \end{itemize}

  Here is a snapshot of the file:

  \begin{longtable}[]{@{}
    >{\raggedright\arraybackslash}p{(\columnwidth - 12\tabcolsep) * \real{0.1233}}
    >{\raggedright\arraybackslash}p{(\columnwidth - 12\tabcolsep) * \real{0.0548}}
    >{\raggedright\arraybackslash}p{(\columnwidth - 12\tabcolsep) * \real{0.1644}}
    >{\raggedright\arraybackslash}p{(\columnwidth - 12\tabcolsep) * \real{0.1644}}
    >{\raggedright\arraybackslash}p{(\columnwidth - 12\tabcolsep) * \real{0.1644}}
    >{\raggedright\arraybackslash}p{(\columnwidth - 12\tabcolsep) * \real{0.1644}}
    >{\raggedright\arraybackslash}p{(\columnwidth - 12\tabcolsep) * \real{0.1644}}@{}}
  \toprule()
  \begin{minipage}[b]{\linewidth}\raggedright
  Geo
  \end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
  Year
  \end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
  RelEmp15to19
  \end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
  RelEmp20to29
  \end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
  RelEmp30to54
  \end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
  RelEmp55to64
  \end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
  RelEmp65Plus
  \end{minipage} \\
  \midrule()
  \endhead
  Multnomah & 2005 & 1 & 1 & 1 & 1 & 1 \\
  Multnomah & 2035 & 1 & 1 & 1 & 1 & 1 \\
  \bottomrule()
  \end{longtable}
\end{enumerate}

\hypertarget{internal-module-inputs-75}{%
\subsubsection{Internal Module Inputs}\label{internal-module-inputs-75}}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1200}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.2960}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1040}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.4800}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Package
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Module
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Outputs
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule()
\endhead
VESimHouseholds & \protect\hyperlink{createhouseholds}{CreateHouseholds} & \textbf{Age0to14} & Persons in 0 to 14 year old age group \\
VESimHouseholds & \protect\hyperlink{createhouseholds}{CreateHouseholds} & \textbf{Age15to19} & Persons in 15 to 19 year old age group \\
VESimHouseholds & \protect\hyperlink{createhouseholds}{CreateHouseholds} & \textbf{Age20to29} & Persons in 20 to 29 year old age group \\
VESimHouseholds & \protect\hyperlink{createhouseholds}{CreateHouseholds} & \textbf{Age30to54} & Persons in 30 to 54 year old age group \\
VESimHouseholds & \protect\hyperlink{createhouseholds}{CreateHouseholds} & \textbf{Age55to64} & Persons in 55 to 64 year old age group \\
VESimHouseholds & \protect\hyperlink{createhouseholds}{CreateHouseholds} & \textbf{Age65Plus} & Persons in 65 or older age group \\
VESimHouseholds & \protect\hyperlink{createhouseholds}{CreateHouseholds} & \textbf{HhType} & Coded household age composition (e.g.~2-1-0-2-0-0) or Grp for group quarters \\
\bottomrule()
\end{longtable}

\hypertarget{module-outputs-78}{%
\subsubsection{Module Outputs}\label{module-outputs-78}}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\item
  \textbf{Wkr15to19}: Workers in 15 to 19 year old age group
\item
  \textbf{Wkr20to29}: Workers in 20 to 29 year old age group
\item
  \textbf{Wkr30to54}: Workers in 30 to 54 year old age group
\item
  \textbf{Wkr55to64}: Workers in 55 to 64 year old age group
\item
  \textbf{Wkr65Plus}: Workers in 65 or older age group
\item
  \textbf{Workers}: Total number of workers
\item
  \textbf{NumWkr}: Number of workers residing in the zone

  \protect\hyperlink{contents}{Top} \protect\hyperlink{definitions}{Definitions} \protect\hyperlink{inputs-and-outputs}{Inputs/Outputs}
\end{enumerate}

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\hypertarget{predictincome-2}{%
\subsection{PredictIncome}\label{predictincome-2}}

This module predicts the income for each simulated household given the number of workers in each age group and the average per capita income for the Azone where the household resides.

\hypertarget{user-input-files-79}{%
\subsubsection{User Input Files}\label{user-input-files-79}}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\item
  \textbf{Regional income (\emph{azone\_per\_cap\_inc.csv})}: This file contains information on regional average per capita household (\textbf{HHIncomePC}) and group quarters (\textbf{GQIncomePC}) income by forecast year in year 2000 dollars. The data can be obtained from the U.S. Department of \href{http://www.bea.gov/regional/index.htm}{Commerce Bureau of Economic Analysis} for the current year or from regional or state sources for forecast years. In order to use current year dollars just replace \textbf{\emph{2000}} in column labels with current year. For example, if the data is obtained in year 2005 dollars then the column labels in the file shown below will become \textbf{HHIncomePC.2005} and \textbf{GQIncomePC.2005}.
  Here is a snapshot of the file:

  \begin{longtable}[]{@{}llll@{}}
  \toprule()
  Geo & Year & HHIncomePC.2000 & GQIncomePC.2000 \\
  \midrule()
  \endhead
  Multnomah & 2005 & 32515 & 0 \\
  Multnomah & 2035 & 40000 & 0 \\
  \bottomrule()
  \end{longtable}
\end{enumerate}

\hypertarget{internal-module-inputs-76}{%
\subsubsection{Internal Module Inputs}\label{internal-module-inputs-76}}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1200}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.2960}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1040}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.4800}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Package
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Module
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Outputs
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule()
\endhead
VESimHouseholds & \protect\hyperlink{createhouseholds}{CreateHouseholds} & \textbf{HhSize} & Number of persons \\
VESimHouseholds & \protect\hyperlink{createhouseholds}{CreateHouseholds} & \textbf{HhType} & Coded household age composition (e.g.~2-1-0-2-0-0) or Grp for group quarters \\
VESimHouseholds & \protect\hyperlink{predictworkers}{PredictWorkers} & \textbf{Wkr15to19} & Workers in 15 to 19 year old age group \\
VESimHouseholds & \protect\hyperlink{predictworkers}{PredictWorkers} & \textbf{Wkr20to29} & Workers in 20 to 29 year old age group \\
VESimHouseholds & \protect\hyperlink{predictworkers}{PredictWorkers} & \textbf{Wkr30to54} & Workers in 30 to 54 year old age group \\
VESimHouseholds & \protect\hyperlink{predictworkers}{PredictWorkers} & \textbf{Wkr55to64} & Workers in 55 to 64 year old age group \\
VESimHouseholds & \protect\hyperlink{predictworkers}{PredictWorkers} & \textbf{Wkr65Plus} & Workers in 65 or older age group \\
\bottomrule()
\end{longtable}

\hypertarget{module-outputs-79}{%
\subsubsection{Module Outputs}\label{module-outputs-79}}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\item
  \textbf{Income}: Total annual household (non-group \& group quarters) income in year 1999 dollars

  \protect\hyperlink{contents}{Top} \protect\hyperlink{definitions}{Definitions} \protect\hyperlink{inputs-and-outputs}{Inputs/Outputs}
\end{enumerate}

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\hypertarget{createbasesyntheticfirms-1}{%
\subsection{CreateBaseSyntheticFirms}\label{createbasesyntheticfirms-1}}

This module creates a set of firms for base year that represents the likely firm composition for the region, given the County Business Pattern data of firms by size and industry. Each firm is described in terms of the number of employees and its industry.

\hypertarget{user-input-files-80}{%
\subsubsection{User Input Files}\label{user-input-files-80}}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\item
  \textbf{Employment (\emph{azone\_employment\_by\_naics.csv})}: This file contains employment data for each of the counties that make up the region. The file is derived from County Business Pattern (\href{http://www.census.gov/econ/cbp/}{CBP}) data by county. Industries are categorized by the North American Industrial Classification System (NAICS) 6 digit codes. Firm size categories are:

  \begin{itemize}
  \tightlist
  \item
    \textbf{n1\_4}: 1- 4 employees
  \item
    \textbf{n5\_9}: 5-9 employees
  \item
    \textbf{n10\_19}: 10-19 employees
  \item
    \textbf{n20\_99}: 20-99 employees
  \item
    \textbf{n100\_249}: 100-249 employees
  \item
    \textbf{n250\_499}: 250-499 employees
  \item
    \textbf{n500\_999}: 500-999 employees
  \item
    \textbf{n1000}: 1,000 or More Employee Size Class
  \item
    \textbf{n1000\_1}: 1,000-1,499 employees
  \item
    \textbf{n1000\_2}: 1,500-2,499 employees
  \item
    \textbf{n1000\_3}: 2,500 to 4, 999 Employees
  \item
    \textbf{n1000\_4}: Over 5,000 employees
  \end{itemize}

  While the county field is required to be present, the business synthesis process does not require a meaningful value and therefore users may simply enter `region'. The consistency in the naming of the ``region'' should be maintained across all the files that contains the label \emph{``county''} or \emph{``Geo''}. It is also not necessary to use such detailed NAICS categories if those are not available; the current business synthesis model and subsequent models do not use this level of detail (although future versions of the model may) - at minimum, the number of establishments for all employment types can be provided by size category. Regions with significant employment in industries such as government and public administration that are not covered by the CBP may need to add records to the file that cover this type of employment to more accurately match employment totals in their region. The two additional fields contained in the file are:

  \begin{itemize}
  \tightlist
  \item
    \textbf{emp}: Total number of employees
  \item
    \textbf{est}: Total number of establishments
  \end{itemize}

  Here is the snapshot of the file:

  \begin{longtable}[]{@{}
    >{\raggedright\arraybackslash}p{(\columnwidth - 34\tabcolsep) * \real{0.0818}}
    >{\raggedright\arraybackslash}p{(\columnwidth - 34\tabcolsep) * \real{0.0364}}
    >{\raggedright\arraybackslash}p{(\columnwidth - 34\tabcolsep) * \real{0.0545}}
    >{\raggedright\arraybackslash}p{(\columnwidth - 34\tabcolsep) * \real{0.0364}}
    >{\raggedright\arraybackslash}p{(\columnwidth - 34\tabcolsep) * \real{0.0364}}
    >{\raggedright\arraybackslash}p{(\columnwidth - 34\tabcolsep) * \real{0.0364}}
    >{\raggedright\arraybackslash}p{(\columnwidth - 34\tabcolsep) * \real{0.0364}}
    >{\raggedright\arraybackslash}p{(\columnwidth - 34\tabcolsep) * \real{0.0545}}
    >{\raggedright\arraybackslash}p{(\columnwidth - 34\tabcolsep) * \real{0.0545}}
    >{\raggedright\arraybackslash}p{(\columnwidth - 34\tabcolsep) * \real{0.0545}}
    >{\raggedright\arraybackslash}p{(\columnwidth - 34\tabcolsep) * \real{0.0727}}
    >{\raggedright\arraybackslash}p{(\columnwidth - 34\tabcolsep) * \real{0.0727}}
    >{\raggedright\arraybackslash}p{(\columnwidth - 34\tabcolsep) * \real{0.0727}}
    >{\raggedright\arraybackslash}p{(\columnwidth - 34\tabcolsep) * \real{0.0455}}
    >{\raggedright\arraybackslash}p{(\columnwidth - 34\tabcolsep) * \real{0.0636}}
    >{\raggedright\arraybackslash}p{(\columnwidth - 34\tabcolsep) * \real{0.0636}}
    >{\raggedright\arraybackslash}p{(\columnwidth - 34\tabcolsep) * \real{0.0636}}
    >{\raggedright\arraybackslash}p{(\columnwidth - 34\tabcolsep) * \real{0.0636}}@{}}
  \toprule()
  \begin{minipage}[b]{\linewidth}\raggedright
  county
  \end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
  year
  \end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
  naics
  \end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
  emp
  \end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
  est
  \end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
  n1\_4
  \end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
  n5\_9
  \end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
  n10\_19
  \end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
  n20\_49
  \end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
  n50\_99
  \end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
  n100\_249
  \end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
  n250\_499
  \end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
  n500\_999
  \end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
  n1000
  \end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
  n1000\_1
  \end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
  n1000\_2
  \end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
  n1000\_3
  \end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
  n1000\_4
  \end{minipage} \\
  \midrule()
  \endhead
  Multnomah & 2005 & 113110 & 0 & 5 & 2 & 1 & 0 & 2 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 \\
  Multnomah & 2005 & 113310 & 0 & 3 & 2 & 0 & 0 & 1 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 \\
  Multnomah & 2005 & 114111 & 0 & 1 & 0 & 1 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 \\
  Multnomah & 2005 & 114112 & 0 & 1 & 1 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 \\
  Multnomah & 2005 & 115114 & 0 & 1 & 0 & 0 & 0 & 0 & 0 & 0 & 1 & 0 & 0 & 0 & 0 & 0 & 0 \\
  Multnomah & 2005 & 115210 & 0 & 4 & 3 & 1 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 \\
  Multnomah & 2005 & 115310 & 0 & 5 & 2 & 0 & 1 & 1 & 1 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 \\
  Multnomah & 2005 & 212319 & 0 & 1 & 1 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 \\
  Multnomah & 2005 & 212321 & 0 & 4 & 1 & 1 & 1 & 1 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 \\
  \bottomrule()
  \end{longtable}
\end{enumerate}

\hypertarget{module-outputs-80}{%
\subsubsection{Module Outputs}\label{module-outputs-80}}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\item
  \textbf{naics}: The six digit naics code
\item
  \textbf{esizecat}: The employment size category
\item
  \textbf{numbus}: The number of businesses
\item
  \textbf{emp}: The number of employees in a business

  \protect\hyperlink{contents}{Top} \protect\hyperlink{definitions}{Definitions} \protect\hyperlink{inputs-and-outputs}{Inputs/Outputs}
\end{enumerate}

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\hypertarget{createfuturesyntheticfirms-1}{%
\subsection{CreateFutureSyntheticFirms}\label{createfuturesyntheticfirms-1}}

This module creates a set of firms for future year that represents the likely firm composition for the region, given the County Business Pattern data of firms by size and industry. Each firm is described in terms of the number of employees and its industry.

\hypertarget{user-input-parameters-4}{%
\subsubsection{User Input Parameters}\label{user-input-parameters-4}}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\item
  \textbf{Employment Growth (\emph{EmploymentGrowth})}: This variable represents a growth rate for employment in the region between the base year and the future year. A rate of 1 indicates no changes in overall employment, a value of more than 1 indicates some growth (e.g., 1.5 = 50\% growth) and a value of less than 1 indicates decline in employment. It should be defined in \protect\hyperlink{model_parametersjson}{model\_parameters.json} as follows:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{\{}
    \DataTypeTok{"NAME"}\FunctionTok{:} \StringTok{"EmploymentGrowth"}\FunctionTok{,}
    \DataTypeTok{"VALUE"}\FunctionTok{:} \StringTok{"1.5"}\FunctionTok{,}
    \DataTypeTok{"TYPE"}\FunctionTok{:} \StringTok{"double"}\FunctionTok{,}
    \DataTypeTok{"UNITS"}\FunctionTok{:} \StringTok{"multiplier"}\FunctionTok{,}
    \DataTypeTok{"PROHIBIT"}\FunctionTok{:} \StringTok{""}\FunctionTok{,}
    \DataTypeTok{"ISELEMENTOF"}\FunctionTok{:} \StringTok{""}
\FunctionTok{\}}
\end{Highlighting}
\end{Shaded}
\end{enumerate}

\hypertarget{internal-module-inputs-77}{%
\subsubsection{Internal Module Inputs}\label{internal-module-inputs-77}}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1356}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.4492}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1017}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.3136}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Package
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Module
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Outputs
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule()
\endhead
VESyntheticFirms & \protect\hyperlink{createbasesyntheticfirms}{CreateBaseSyntheticFirms} & \textbf{naics} & The six digit naics code \\
VESyntheticFirms & \protect\hyperlink{createbasesyntheticfirms}{CreateBaseSyntheticFirms} & \textbf{esizecat} & The employment size category \\
VESyntheticFirms & \protect\hyperlink{createbasesyntheticfirms}{CreateBaseSyntheticFirms} & \textbf{numbus} & The number of businesses \\
VESyntheticFirms & \protect\hyperlink{createbasesyntheticfirms}{CreateBaseSyntheticFirms} & \textbf{emp} & The number of employees in a business \\
\bottomrule()
\end{longtable}

\hypertarget{module-outputs-81}{%
\subsubsection{Module Outputs}\label{module-outputs-81}}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  \textbf{naics}: The six digit naics code
\item
  \textbf{esizecat}: The employment size category
\item
  \textbf{numbus}: The number of businesses
\item
  \textbf{emp}: The number of employees in a business
\end{enumerate}

\protect\hyperlink{contents}{Top} \protect\hyperlink{definitions}{Definitions} \protect\hyperlink{inputs-and-outputs}{Inputs/Outputs}

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\hypertarget{calculatebaseplacetypes-1}{%
\subsection{CalculateBasePlaceTypes}\label{calculatebaseplacetypes-1}}

Population and employment location characteristics are important variables in the vehicle ownership, travel demand, and accessibility models. There are four place types (urban core, Close-in Community, suburban, and rural and five location categories (residential, commercial, mixed-use, transit-oriented development, and Greenfield). This module utilizes models for households that were developed to estimate location characteristics using National Household Travel Survey data for the base year. Firms are currently allocated randomly to fit the employment allocation inputs since there are no national datasets from which to draw these relationships.

\hypertarget{user-input-files-81}{%
\subsubsection{User Input Files}\label{user-input-files-81}}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\item
  \textbf{Population and Jobs by Place Type (\emph{bzone\_pop\_emp\_prop.csv})}: This file contains the distribution of population and employment among the 13 place types for base and future year. Each column, for each year, must sum to one (1). It is acceptable to have no land use (i.e.~a value of 0) in certain categories.
  The yearly TAZ employment and population totals were summed by the 13 place type and then scaled to total one for both employment and population.
  Here is a snapshot of the file:

  \begin{longtable}[]{@{}llll@{}}
  \toprule()
  Geo & Year & Pop & Emp \\
  \midrule()
  \endhead
  Rur & 2005 & 0.05 & 0.1 \\
  Sub\_R & 2005 & 0.3 & 0 \\
  Sub\_E & 2005 & 0 & 0.2 \\
  Sub\_M & 2005 & 0.1 & 0.1 \\
  Sub\_T & 2005 & 0 & 0 \\
  CIC\_R & 2005 & 0.15 & 0 \\
  CIC\_E & 2005 & 0 & 0.2 \\
  CIC\_M & 2005 & 0.1 & 0.1 \\
  CIC\_T & 2005 & 0 & 0 \\
  UC\_R & 2005 & 0.1 & 0 \\
  UC\_E & 2005 & 0 & 0.1 \\
  UC\_M & 2005 & 0.1 & 0.1 \\
  UC\_T & 2005 & 0.1 & 0.1 \\
  Rur & 2035 & 0.05 & 0.1 \\
  Sub\_R & 2035 & 0.3 & 0 \\
  Sub\_E & 2035 & 0 & 0.2 \\
  Sub\_M & 2035 & 0.1 & 0.1 \\
  Sub\_T & 2035 & 0 & 0 \\
  CIC\_R & 2035 & 0.15 & 0 \\
  CIC\_E & 2035 & 0 & 0.2 \\
  CIC\_M & 2035 & 0.1 & 0.1 \\
  CIC\_T & 2035 & 0 & 0 \\
  UC\_R & 2035 & 0.1 & 0 \\
  UC\_E & 2035 & 0 & 0.1 \\
  UC\_M & 2035 & 0.1 & 0.1 \\
  UC\_T & 2035 & 0.1 & 0.1 \\
  \bottomrule()
  \end{longtable}
\end{enumerate}

\hypertarget{internal-module-inputs-78}{%
\subsubsection{Internal Module Inputs}\label{internal-module-inputs-78}}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1127}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.3732}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.0915}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.4225}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Package
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Module
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Outputs
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule()
\endhead
VESimHouseholds & \protect\hyperlink{createhouseholds}{CreateHouseholds} & \textbf{HhId} & Unique household ID \\
VESimHouseholds & \protect\hyperlink{createhouseholds}{CreateHouseholds} & \textbf{Age0to14} & Persons in 0 to 14 year old age group \\
VESimHouseholds & \protect\hyperlink{createhouseholds}{CreateHouseholds} & \textbf{Age15to19} & Persons in 15 to 19 year old age group \\
VESimHouseholds & \protect\hyperlink{createhouseholds}{CreateHouseholds} & \textbf{Age20to29} & Persons in 20 to 29 year old age group \\
VESimHouseholds & \protect\hyperlink{createhouseholds}{CreateHouseholds} & \textbf{Age30to54} & Persons in 30 to 54 year old age group \\
VESimHouseholds & \protect\hyperlink{createhouseholds}{CreateHouseholds} & \textbf{Age55to64} & Persons in 55 to 64 year old age group \\
VESimHouseholds & \protect\hyperlink{createhouseholds}{CreateHouseholds} & \textbf{Age65Plus} & Persons in 65 or older age group \\
VESimHouseholds & \protect\hyperlink{createhouseholds}{CreateHouseholds} & \textbf{HhSize} & Number of persons \\
VESimHouseholds & \protect\hyperlink{predictincome}{PredictIncome} & \textbf{Income} & Total annual household (non-qroup \& group quarters) income in year 1999 dollars \\
VESyntheticFirms & \protect\hyperlink{createbasesyntheticfirms}{CreateBaseSyntheticFirms} & \textbf{naics} & The six digit naics code \\
VESyntheticFirms & \protect\hyperlink{createbasesyntheticfirms}{CreateBaseSyntheticFirms} & \textbf{esizecat} & The employment size category \\
VESyntheticFirms & \protect\hyperlink{createbasesyntheticfirms}{CreateBaseSyntheticFirms} & \textbf{numbus} & The number of businesses \\
VESyntheticFirms & \protect\hyperlink{createbasesyntheticfirms}{CreateBaseSyntheticFirms} & \textbf{emp} & The number of employees in a business \\
\bottomrule()
\end{longtable}

\hypertarget{module-outputs-82}{%
\subsubsection{Module Outputs}\label{module-outputs-82}}

The outputs produced by this module is for base year.

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  \textbf{DrvLevels}: The number of people in a household who can drive classified in three categories (``Drv1'', ``Drv2'', ``Drv3Plus'')
\item
  \textbf{HhPlaceTypes}: A place type as assigned to the households
\item
  \textbf{EmpPlaceTypes}: A place types as assigned to the businesses
\item
  \textbf{UrbanPop}: Total population by place types
\item
  \textbf{UrbanEmp}: Total employees by place types
\item
  \textbf{UrbanIncome}: Total income by place types
\end{enumerate}

\protect\hyperlink{contents}{Top} \protect\hyperlink{definitions}{Definitions} \protect\hyperlink{inputs-and-outputs}{Inputs/Outputs}

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\hypertarget{calculatefutureplacetypes-1}{%
\subsection{CalculateFuturePlaceTypes}\label{calculatefutureplacetypes-1}}

This module is similar to \emph{CalculateBasePlaceTypes} module but utilizes the future year data to assign population and employment location characteristics.

\hypertarget{user-input-files-82}{%
\subsubsection{User Input Files}\label{user-input-files-82}}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  \textbf{Population and Jobs by Place Type (\emph{bzone\_pop\_emp\_prop.csv})}: This is the same file used as input in \protect\hyperlink{calculatebaseplacetypes}{CalculateBasePlaceTypes} module.
\end{enumerate}

\hypertarget{internal-module-inputs-79}{%
\subsubsection{Internal Module Inputs:}\label{internal-module-inputs-79}}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1096}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.3904}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.0890}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.4110}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Package
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Module
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Outputs
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule()
\endhead
VESimHouseholds & \protect\hyperlink{createhouseholds}{CreateHouseholds} & \textbf{HhId} & Unique household ID \\
VESimHouseholds & \protect\hyperlink{createhouseholds}{CreateHouseholds} & \textbf{Age0to14} & Persons in 0 to 14 year old age group \\
VESimHouseholds & \protect\hyperlink{createhouseholds}{CreateHouseholds} & \textbf{Age15to19} & Persons in 15 to 19 year old age group \\
VESimHouseholds & \protect\hyperlink{createhouseholds}{CreateHouseholds} & \textbf{Age20to29} & Persons in 20 to 29 year old age group \\
VESimHouseholds & \protect\hyperlink{createhouseholds}{CreateHouseholds} & \textbf{Age30to54} & Persons in 30 to 54 year old age group \\
VESimHouseholds & \protect\hyperlink{createhouseholds}{CreateHouseholds} & \textbf{Age55to64} & Persons in 55 to 64 year old age group \\
VESimHouseholds & \protect\hyperlink{createhouseholds}{CreateHouseholds} & \textbf{Age65Plus} & Persons in 65 or older age group \\
VESimHouseholds & \protect\hyperlink{createhouseholds}{CreateHouseholds} & \textbf{HhSize} & Number of persons \\
VESimHouseholds & \protect\hyperlink{predictincome}{PredictIncome} & \textbf{Income} & Total annual household (non-qroup \& group quarters) income in year 1999 dollars \\
VESyntheticFirms & \protect\hyperlink{createfuturesyntheticfirms}{CreateFutureSyntheticFirms} & \textbf{naics} & The six digit naics code \\
VESyntheticFirms & \protect\hyperlink{createfuturesyntheticfirms}{CreateFutureSyntheticFirms} & \textbf{esizecat} & The employment size category \\
VESyntheticFirms & \protect\hyperlink{createfuturesyntheticfirms}{CreateFutureSyntheticFirms} & \textbf{numbus} & The number of businesses \\
VESyntheticFirms & \protect\hyperlink{createfuturesyntheticfirms}{CreateFutureSyntheticFirms} & \textbf{emp} & The number of employees in a business \\
VELandUse & \protect\hyperlink{calculatebaseplacetypes}{CalculateBasePlaceTypes} & \textbf{UrbanPop} & Total population by place types \\
VELandUse & \protect\hyperlink{calculatebaseplacetypes}{CalculateBasePlaceTypes} & \textbf{UrbanEmp} & Total employees by place types \\
\bottomrule()
\end{longtable}

\hypertarget{module-outputs-83}{%
\subsubsection{Module Outputs}\label{module-outputs-83}}

The outputs produced by this module is for future year.

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  \textbf{DrvLevels}: The number of people in a household who can drive classified in three categories (``Drv1'', ``Drv2'', ``Drv3Plus'')
\item
  \textbf{HhPlaceTypes}: A place type as assigned to the households
\item
  \textbf{EmpPlaceTypes}: A place types as assigned to the businesses
\item
  \textbf{UrbanPop}: Total population by place types
\item
  \textbf{UrbanEmp}: Total employees by place types
\item
  \textbf{UrbanIncome}: Total income by place types
\end{enumerate}

\protect\hyperlink{contents}{Top} \protect\hyperlink{definitions}{Definitions} \protect\hyperlink{inputs-and-outputs}{Inputs/Outputs}

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\hypertarget{createbaseaccessibility}{%
\subsection{CreateBaseAccessibility}\label{createbaseaccessibility}}

This module calculates freeway, arterial, and public transit supply levels for all years using existing (base) data. The number of lane miles of freeways and arterials is computed for each region based on the change in inventories for a particular scenario. For public transit, the inputs specify the change in transit revenue miles relative to the base. Inputs for each area also specify the revenue mile split between electrified rail and buses.

\hypertarget{user-input-files-83}{%
\subsubsection{User Input Files}\label{user-input-files-83}}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\item
  \textbf{Road lane miles (\emph{marea\_lane\_miles.csv})}: This file contains the amount of transportation supply by base year in terms of lane miles of freeways and arterial roadways in the region. The base year data is duplicated for future year.
  \textbf{Freeway} and \textbf{Arterial} are total lane miles for those functional classes in the region. These data can be derived from the Federal Highway Administration's (FHWA) Highway \href{http://www.fhwa.dot.gov/policy/ohim/hs05/roadway_extent.cfm}{Statistics data}.
  Here is a snapshot of the file:

  \begin{longtable}[]{@{}llll@{}}
  \toprule()
  Geo & Year & FwyLaneMi & ArtLaneMi \\
  \midrule()
  \endhead
  Multnomah & 2005 & 250 & 900 \\
  Multnomah & 2035 & 250 & 900 \\
  \bottomrule()
  \end{longtable}
\item
  \textbf{Transit revenue miles (\emph{marea\_rev\_miles\_pc.csv})}: This file contains the amount of transportation supply by base year in terms of the revenue miles operating by the transit system in the region. The base year data is duplicated for future year.
  \textbf{Bus} and \textbf{Rail} are annual bus and rail revenue miles per capita for the region. These data can be derived from the \href{https://www.transit.dot.gov/ntd/ntd-data}{National Transit Database}, where the annual database contains a ``service'' table that has annual revenue mile data by mode for each transit operator.
  Here is a snapshot of the file:

  \begin{longtable}[]{@{}llll@{}}
  \toprule()
  Geo & Year & BusRevMiPC & RailRevMiPC \\
  \midrule()
  \endhead
  Multnomah & 2005 & 19 & 4 \\
  Multnomah & 2035 & 19 & 4 \\
  \bottomrule()
  \end{longtable}
\end{enumerate}

\hypertarget{internal-module-inputs-80}{%
\subsubsection{Internal Module Inputs}\label{internal-module-inputs-80}}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.0841}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.5140}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1121}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.2897}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Package
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Module
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Outputs
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule()
\endhead
VELandUse & \protect\hyperlink{calculatebaseplacetypes}{CalculateBasePlaceTypes} & \textbf{UrbanPop} & Total population by place types \\
VELandUse & \protect\hyperlink{calculatefutureplacetypes}{CalculateFuturePlaceTypes} & \textbf{UrbanPop} & Total population by place types \\
\bottomrule()
\end{longtable}

\hypertarget{module-outputs-84}{%
\subsubsection{Module Outputs}\label{module-outputs-84}}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  \textbf{FwyLaneMiPC}: Ratio of urbanized area freeway and expressway lane-miles to urbanized area population
\item
  \textbf{ArtLaneMiPC}: Ratio of urbanized area arterial lane-miles to urbanized area population
\item
  \textbf{TranRevMiPC}: Transit revenue miles per capita for the region
\item
  \textbf{BusRevMi}: Bus revenue miles for the region
\item
  \textbf{RailRevMi}: Rail revenue miles for the region
\end{enumerate}

\protect\hyperlink{contents}{Top} \protect\hyperlink{definitions}{Definitions} \protect\hyperlink{inputs-and-outputs}{Inputs/Outputs}

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\hypertarget{createfutureaccessibility}{%
\subsection{CreateFutureAccessibility}\label{createfutureaccessibility}}

This module calculates freeway, arterial, and public transit supply levels for all years using model estimation of future data.

\hypertarget{user-input-files-84}{%
\subsubsection{User Input Files}\label{user-input-files-84}}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\item
  \textbf{Road lane miles (\emph{marea\_lane\_miles.csv})}: This file contains the amount of transportation supply by base year in terms of lane miles of freeways and arterial roadways in the region. The base year data is duplicated for future year.
  \textbf{Freeway} and \textbf{Arterial} are total lane miles for those functional classes in the region. These data can be derived from the Federal Highway Administration's (FHWA) Highway \href{http://www.fhwa.dot.gov/policy/ohim/hs05/roadway_extent.cfm}{Statistics data}.
  Here is a snapshot of the file:

  \begin{longtable}[]{@{}llll@{}}
  \toprule()
  Geo & Year & FwyLaneMi & ArtLaneMi \\
  \midrule()
  \endhead
  Multnomah & 2005 & 250 & 900 \\
  Multnomah & 2035 & 250 & 900 \\
  \bottomrule()
  \end{longtable}
\item
  \textbf{Transit revenue miles (\emph{marea\_rev\_miles\_pc.csv})}: This file contains the amount of transportation supply by base year in terms of the revenue miles operating by the transit system in the region. The base year data is duplicated for future year.
  \textbf{Bus} and \textbf{Rail} are annual bus and rail revenue miles per capita for the region. These data can be derived from the \href{https://www.transit.dot.gov/ntd/ntd-data}{National Transit Database}, where the annual database contains a ``service'' table that has annual revenue mile data by mode for each transit operator.
  Here is a snapshot of the file:

  \begin{longtable}[]{@{}llll@{}}
  \toprule()
  Geo & Year & BusRevMiPC & RailRevMiPC \\
  \midrule()
  \endhead
  Multnomah & 2005 & 19 & 4 \\
  Multnomah & 2035 & 19 & 4 \\
  \bottomrule()
  \end{longtable}
\end{enumerate}

\hypertarget{user-input-parameters-5}{%
\subsubsection{User Input Parameters}\label{user-input-parameters-5}}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\item
  \textbf{FwyLaneMiGrowth}: The variable indicates the percent increase in supply of freeways lane miles in the future year compared to base year. By default, the transportation supply is assumed to grow in line with population increase; therefore a value of 1 indicates growth in proportion with population growth. A value less than 1 indicates that there will be less freeway lane mile supply, per person, in the future. A value of 1 indicates faster freeway expansion than population growth. It should be defined in \protect\hyperlink{model_parametersjson}{model\_parameters.json} as follows:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{\{}
    \DataTypeTok{"NAME"}\FunctionTok{:} \StringTok{"FwyLaneMiGrowth"}\FunctionTok{,}
    \DataTypeTok{"VALUE"}\FunctionTok{:} \StringTok{"1"}\FunctionTok{,}
    \DataTypeTok{"TYPE"} \FunctionTok{:} \StringTok{"double"}\FunctionTok{,}
    \DataTypeTok{"UNITS"} \FunctionTok{:} \StringTok{"multiplier"}\FunctionTok{,}
    \DataTypeTok{"PROHIBIT"} \FunctionTok{:} \StringTok{"c(\textquotesingle{}NA\textquotesingle{}, \textquotesingle{}\textless{} 0\textquotesingle{})"}\FunctionTok{,}
    \DataTypeTok{"ISELEMENTOF"} \FunctionTok{:} \StringTok{""}
\FunctionTok{\}}
\end{Highlighting}
\end{Shaded}
\item
  \textbf{ArtLaneMiGrowth}: The variable indicates the percent increase in supply of arterial lane miles in the future year compared to base year. It is a similar value to freeway except that it measures arterial lane mile growth. It is also proportional to population growth. It should be defined in \protect\hyperlink{model_parametersjson}{model\_parameters.json} as follows:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{\{}
    \DataTypeTok{"NAME"} \FunctionTok{:} \StringTok{"ArtLaneMiGrowth"}\FunctionTok{,}
    \DataTypeTok{"VALUE"}\FunctionTok{:} \StringTok{"1"}\FunctionTok{,}
    \DataTypeTok{"TYPE"} \FunctionTok{:} \StringTok{"double"}\FunctionTok{,}
    \DataTypeTok{"UNITS"} \FunctionTok{:} \StringTok{"multiplier"}\FunctionTok{,}
    \DataTypeTok{"PROHIBIT"} \FunctionTok{:} \StringTok{"c(\textquotesingle{}NA\textquotesingle{}, \textquotesingle{}\textless{} 0\textquotesingle{})"}\FunctionTok{,}
    \DataTypeTok{"ISELEMENTOF"} \FunctionTok{:} \StringTok{""}
\FunctionTok{\}}
\end{Highlighting}
\end{Shaded}
\item
  \textbf{BusRevMiPCGrowth}: It is the percent increase in transit revenue miles per capita for bus. It behaves in a similar way to the freeway and rail values in that a value of 1 indicates per capita revenue miles stays constant. It should be defined in \protect\hyperlink{model_parametersjson}{model\_parameters.json} as follows:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{\{}
    \DataTypeTok{"NAME"} \FunctionTok{:} \StringTok{"BusRevMiPCGrowth"}\FunctionTok{,}
    \DataTypeTok{"VALUE"}\FunctionTok{:} \StringTok{"1"}\FunctionTok{,}
    \DataTypeTok{"TYPE"} \FunctionTok{:} \StringTok{"double"}\FunctionTok{,}
    \DataTypeTok{"UNITS"} \FunctionTok{:} \StringTok{"multiplier"}\FunctionTok{,}
    \DataTypeTok{"PROHIBIT"} \FunctionTok{:} \StringTok{"c(\textquotesingle{}NA\textquotesingle{}, \textquotesingle{}\textless{} 0\textquotesingle{})"}\FunctionTok{,}
    \DataTypeTok{"ISELEMENTOF"} \FunctionTok{:} \StringTok{""}
\FunctionTok{\}}
\end{Highlighting}
\end{Shaded}
\item
  \textbf{RailRevMiPCGrowth}: It is the percent increase in transit revenue miles per capita for rail. This encompasses all rail modes, from light rail through to commuter rail. It should be defined in \protect\hyperlink{model_parametersjson}{model\_parameters.json} as follows:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{\{}
    \DataTypeTok{"NAME"} \FunctionTok{:} \StringTok{"RailRevMiPCGrowth"}\FunctionTok{,}
    \DataTypeTok{"VALUE"}\FunctionTok{:} \StringTok{"1"}\FunctionTok{,}
    \DataTypeTok{"TYPE"} \FunctionTok{:} \StringTok{"double"}\FunctionTok{,}
    \DataTypeTok{"UNITS"} \FunctionTok{:} \StringTok{"multiplier"}\FunctionTok{,}
    \DataTypeTok{"PROHIBIT"} \FunctionTok{:} \StringTok{"c(\textquotesingle{}NA\textquotesingle{}, \textquotesingle{}\textless{} 0\textquotesingle{})"}\FunctionTok{,}
    \DataTypeTok{"ISELEMENTOF"} \FunctionTok{:} \StringTok{""}
\FunctionTok{\}}
\end{Highlighting}
\end{Shaded}
\end{enumerate}

\hypertarget{internal-module-inputs-81}{%
\subsubsection{Internal Module Inputs}\label{internal-module-inputs-81}}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.0841}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.5140}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1121}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.2897}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Package
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Module
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Outputs
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule()
\endhead
VELandUse & \protect\hyperlink{calculatebaseplacetypes}{CalculateBasePlaceTypes} & \textbf{UrbanPop} & Total population by place types \\
VELandUse & \protect\hyperlink{calculatefutureplacetypes}{CalculateFuturePlaceTypes} & \textbf{UrbanPop} & Total population by place types \\
\bottomrule()
\end{longtable}

\hypertarget{module-outputs-85}{%
\subsubsection{Module Outputs}\label{module-outputs-85}}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  \textbf{FwyLaneMiPCFuture}: Ratio of urbanized area freeway and expressway lane-miles to urbanized area population calculated using model estimation of future data
\item
  \textbf{ArtLaneMiPCFuture}: Ratio of urbanized area arterial lane-miles to urbanized area population calculated using model estimation of future data
\item
  \textbf{TranRevMiPCFuture}: Transit revenue miles per capita for the region calculated using model estimation of future data
\item
  \textbf{BusRevMiFuture}: Bus revenue miles for the region calculated using model estimation of future data
\item
  \textbf{RailRevMiFuture}: Rail revenue miles for the region calculated using model estimation of future data
\end{enumerate}

\protect\hyperlink{contents}{Top} \protect\hyperlink{definitions}{Definitions} \protect\hyperlink{inputs-and-outputs}{Inputs/Outputs}

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\hypertarget{assignvehiclefeatures}{%
\subsection{AssignVehicleFeatures}\label{assignvehiclefeatures}}

This module assigns each household a number of vehicles it is likely to own based on the number of persons of driving age in the household, whether only elderly persons live in the household, the income of the household, the population density where the household lives, the freeway supply, the transit supply, and whether the household is located in an urban mixed-use area.

\hypertarget{user-input-files-85}{%
\subsubsection{User Input Files}\label{user-input-files-85}}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\item
  \textbf{Vehicle fuel economy (\emph{model\_veh\_mpg\_by\_year.csv})}: This file contains the estimates and forecasts of average fuel economy and power economy in miles per gallon for autos, light trucks, heavy trucks (trucks) and miles per kilowatt for trains by vehicle model year. Note that this is not the fleet average for that year. It is the average for new vehicles sold in that year. The fuel economy is the same for all fuel types and is measured in gasoline equivalent gallons (i.e., energy content of a gallon of gasoline). This file is used in the calculations of fuel consumption. This file can be used to test alternative vehicle development scenarios, such as improved technology and/or fuel economy standards that lead to higher vehicle fuel economies.
  Here is a snapshot of the file:

  \begin{longtable}[]{@{}
    >{\raggedright\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.1667}}
    >{\raggedright\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.1667}}
    >{\raggedright\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.1667}}
    >{\raggedright\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.1667}}
    >{\raggedright\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.1667}}
    >{\raggedright\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.1667}}@{}}
  \toprule()
  \begin{minipage}[b]{\linewidth}\raggedright
  ModelYear
  \end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
  AutoMpg
  \end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
  LtTruckMpg
  \end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
  TruckMpg
  \end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
  BusMpg
  \end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
  TrainMpg
  \end{minipage} \\
  \midrule()
  \endhead
  1975 & 15.1 & 12.7 & 5.1 & 4.2 & 0.098266 \\
  1976 & 16.6 & 13.2 & 5.1 & 4.1 & 0.098266 \\
  1977 & 17.4 & 14.1 & 5.1 & 4.1 & 0.098266 \\
  1978 & 19.2 & 13.7 & 5.1 & 4 & 0.098266 \\
  \includegraphics{./VERPAT_images/vdots.gif} & \includegraphics{./VERPAT_images/vdots.gif} & \includegraphics{./VERPAT_images/vdots.gif} & \includegraphics{./VERPAT_images/vdots.gif} & \includegraphics{./VERPAT_images/vdots.gif} & \includegraphics{./VERPAT_images/vdots.gif} \\
  2046 & 63.7 & 41.1 & 5.6 & 4.8 & 0.121191 \\
  2047 & 63.7 & 41.1 & 5.6 & 4.8 & 0.121191 \\
  2048 & 63.7 & 41.1 & 5.6 & 4.8 & 0.121191 \\
  2049 & 63.7 & 41.1 & 5.6 & 4.8 & 0.121191 \\
  2050 & 63.7 & 41.1 & 5.6 & 4.8 & 0.121191 \\
  \bottomrule()
  \end{longtable}
\end{enumerate}

\hypertarget{user-input-parameters-6}{%
\subsubsection{User Input Parameters}\label{user-input-parameters-6}}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\item
  \textbf{Light Truck Proportions (\emph{LtTruckProp})}: The proportion of household vehicles that are light trucks (SUVs, pickup trucks) as opposed to autos. It should be defined in \protect\hyperlink{model_parametersjson}{model\_parameters.json} as follows:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{\{}
    \DataTypeTok{"NAME"} \FunctionTok{:} \StringTok{"LtTruckProp"}\FunctionTok{,}
    \DataTypeTok{"VALUE"}\FunctionTok{:} \StringTok{"0.45"}\FunctionTok{,}
    \DataTypeTok{"TYPE"} \FunctionTok{:} \StringTok{"double"}\FunctionTok{,}
    \DataTypeTok{"UNITS"} \FunctionTok{:} \StringTok{"multiplier"}\FunctionTok{,}
    \DataTypeTok{"PROHIBIT"} \FunctionTok{:} \StringTok{"c(\textquotesingle{}NA\textquotesingle{}, \textquotesingle{}\textless{} 0\textquotesingle{})"}\FunctionTok{,}
    \DataTypeTok{"ISELEMENTOF"} \FunctionTok{:} \StringTok{""}
\FunctionTok{\}}
\end{Highlighting}
\end{Shaded}
\end{enumerate}

\hypertarget{internal-module-inputs-82}{%
\subsubsection{Internal Module Inputs}\label{internal-module-inputs-82}}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1149}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.3716}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1081}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.4054}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Package
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Module
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Outputs
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule()
\endhead
VESimHouseholds & \protect\hyperlink{createhouseholds}{CreateHouseholds} & \textbf{HhId} & Unique household ID \\
VESimHouseholds & \protect\hyperlink{createhouseholds}{CreateHouseholds} & \textbf{Age0to14} & Persons in 0 to 14 year old age group \\
VESimHouseholds & \protect\hyperlink{createhouseholds}{CreateHouseholds} & \textbf{Age65Plus} & Persons in 65 or older age group \\
VESimHouseholds & \protect\hyperlink{createhouseholds}{CreateHouseholds} & \textbf{HhSize} & Number of persons \\
VESimHouseholds & \protect\hyperlink{createhouseholds}{CreateHouseholds} & \textbf{HhType} & Coded household age composition (e.g.~2-1-0-2-0-0) or Grp for group quarters \\
VESimHouseholds & \protect\hyperlink{predictincome}{PredictIncome} & \textbf{Income} & Total annual household (non-qroup \& group quarters) income in year 1999 dollars \\
VELandUse & \protect\hyperlink{calculatefutureplacetypes}{CalculateFuturePlaceTypes} & \textbf{DrvLevels} & The number of people in a household who can drive classified in three categories (``Drv1'', ``Drv2'', ``Drv3Plus'') \\
VELandUse & \protect\hyperlink{calculatefutureplacetypes}{CalculateFuturePlaceTypes} & \textbf{HhPlaceTypes} & A place type as assigned to the households \\
VETransportSupply & \protect\hyperlink{createbaseaccessibility}{CreateBaseAccessibility} & \textbf{FwyLaneMiPC} & Ratio of urbanized area freeway and expressway lane-miles to urbanized area population \\
VETransportSupply & \protect\hyperlink{createbaseaccessibility}{CreateBaseAccessibility} & \textbf{TranRevMiPC} & Transit revenue miles per capita for the region \\
\bottomrule()
\end{longtable}

\hypertarget{module-outputs-86}{%
\subsubsection{Module Outputs}\label{module-outputs-86}}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  \textbf{VehId}: Unique vehicle ID
\item
  \textbf{Type}: Vehicle body type: Auto = automobile, LtTrk = light trucks (i.e.~pickup, SUV, Van)
\item
  \textbf{Age}: Vehicle age in years
\item
  \textbf{Mileage}: Mileage of vehicles (automobiles and light truck)
\item
  \textbf{DvmtProp}: Proportion of average vehicle DVMT
\item
  \textbf{Vehicles}: Number of automobiles and light trucks owned or leased by the household
\item
  \textbf{NumLtTrk}: Number of light trucks (pickup, sport-utility vehicle, and van) owned or leased by household
\item
  \textbf{NumAuto}: Number of automobiles (i.e.~4-tire passenger vehicles that are not light trucks) owned or leased by household
\end{enumerate}

\protect\hyperlink{contents}{Top} \protect\hyperlink{definitions}{Definitions} \protect\hyperlink{inputs-and-outputs}{Inputs/Outputs}

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\hypertarget{assignvehiclefeaturesfuture}{%
\subsection{AssignVehicleFeaturesFuture}\label{assignvehiclefeaturesfuture}}

This module is similar to \protect\hyperlink{assignvehiclefeatures}{AssignVehicleFeatures}, but uses model estimation of future year data on population and transportation supply as a basis of the calculations.

\hypertarget{internal-module-inputs-83}{%
\subsubsection{Internal Module Inputs}\label{internal-module-inputs-83}}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1111}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.3595}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1373}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.3922}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Package
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Module
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Outputs
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule()
\endhead
VESimHouseholds & \protect\hyperlink{createhouseholds}{CreateHouseholds} & \textbf{HhId} & Unique household ID \\
VESimHouseholds & \protect\hyperlink{createhouseholds}{CreateHouseholds} & \textbf{Age0to14} & Persons in 0 to 14 year old age group \\
VESimHouseholds & \protect\hyperlink{createhouseholds}{CreateHouseholds} & \textbf{Age65Plus} & Persons in 65 or older age group \\
VESimHouseholds & \protect\hyperlink{createhouseholds}{CreateHouseholds} & \textbf{HhSize} & Number of persons \\
VESimHouseholds & \protect\hyperlink{createhouseholds}{CreateHouseholds} & \textbf{HhType} & Coded household age composition (e.g.~2-1-0-2-0-0) or Grp for group quarters \\
VESimHouseholds & \protect\hyperlink{predictincome}{PredictIncome} & \textbf{Income} & Total annual household (non-qroup \& group quarters) income in year 1999 dollars \\
VELandUse & \protect\hyperlink{calculatefutureplacetypes}{CalculateFuturePlaceTypes} & \textbf{DrvLevels} & The number of people in a household who can drive classified in three categories (``Drv1'', ``Drv2'', ``Drv3Plus'') \\
VELandUse & \protect\hyperlink{calculatefutureplacetypes}{CalculateFuturePlaceTypes} & \textbf{HhPlaceTypes} & A place type as assigned to the households \\
VETransportSupply & \protect\hyperlink{createfutureaccessibility}{CreateFutureAccessibility} & \textbf{FwyLaneMiPCFuture} & Ratio of urbanized area freeway and expressway lane-miles to urbanized area population calculated using future (estimated) data \\
VETransportSupply & \protect\hyperlink{createfutureaccessibility}{CreateFutureAccessibility} & \textbf{TranRevMiPCFuture} & Transit revenue miles per capita for the region calculated using future (estimated) data \\
\bottomrule()
\end{longtable}

\hypertarget{module-outputs-87}{%
\subsubsection{Module Outputs}\label{module-outputs-87}}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\item
  \textbf{VehIdFuture}: Unique vehicle ID
\item
  \textbf{TypeFuture}: Vehicle body type: Auto = automobile, LtTrk = light trucks (i.e.~pickup, SUV, Van)
\item
  \textbf{AgeFuture}: Vehicle age in years
\item
  \textbf{MileageFuture}: Mileage of vehicles (automobiles and light truck)
\item
  \textbf{DvmtPropFuture}: Proportion of average vehicle DVMT
\item
  \textbf{VehiclesFuture}: Number of automobiles and light trucks owned or leased by the household
\item
  \textbf{NumLtTrkFuture}: Number of light trucks (pickup, sport-utility vehicle, and van) owned or leased by household
\item
  \textbf{NumAutoFuture}: Number of automobiles (i.e.~4-tire passenger vehicles that are not light trucks) owned or leased by household

  Top{]}(\#contents) \protect\hyperlink{definitions}{Definitions} \protect\hyperlink{inputs-and-outputs}{Inputs/Outputs}
\end{enumerate}

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\hypertarget{calculatetraveldemand-1}{%
\subsection{CalculateTravelDemand}\label{calculatetraveldemand-1}}

This module calculates the average daily vehicle miles traveled, auto and transit trips for each household is modeled based on household information determined by previous modules for the base conditions. The model is sensitive to household income, population density of the neighborhood where the household resides, number of household vehicles, whether the household owns no vehicles, the levels of public transportation and freeway supplies in the region, the driving age population in the household, the presence of persons over age 65, and whether the neighborhood is characterized by mixed-use development.
It also calculates truck and bus Vehicle Miles Traveled (VMT). Regional truck VMT is calculated based on changes in the regional household income. As a default, a one-to-one relationship between regional income growth and truck VMT growth is assumed. In other words, a doubling of total regional income would result in a doubling of truck VMT. Bus VMT is calculated from bus revenue miles that are factored up to total vehicle miles to account for miles driven in non-revenue service.

\hypertarget{user-input-files-86}{%
\subsubsection{User Input Files}\label{user-input-files-86}}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\item
  \textbf{Emission Rate (\emph{model\_fuel\_co2.csv})}: The emissions rate file contains information on ``pump-to-wheels'' CO2 equivalent emissions by fuel type in grams per mega Joule of fuel energy content. There is one row for each fuel type: ULSD, biodiesel, RFG (reformulated gasoline), CARBOB (gasoline formulated to be blended with ethanol), ethanol, and CNG. Electricity is an optional fuel type not displayed in the table. If the intensity for power generation is known then that can be entered at the end of the row with the Fuel column containing the word \emph{Electricity} and the respective value next to it. This file is used to convert fuel use to CO2 equivalent emissions.
  Here is a snapshot of the file:

  \begin{longtable}[]{@{}ll@{}}
  \toprule()
  Fuel & Intensity \\
  \midrule()
  \endhead
  ULSD & 77.19 \\
  Biodiesel & 76.81 \\
  RFG & 75.65 \\
  CARBOB & 75.65 \\
  Ethanol & 74.88 \\
  Cng & 62.14 \\
  \bottomrule()
  \end{longtable}
\item
  \textbf{Vehicle VMT proportion by fuel (\emph{model\_fuel\_prop\_by\_veh.csv})}: The file contains allocation of VMT for each of the four road vehicle types that VERPAT represents (\emph{auto}, \emph{light truck}, \emph{bus}, and \emph{heavy truck}) to different fuel types (\emph{Diesel}, \emph{CNG}, \emph{Gasoline}). This file is used in the calculations of fuel consumption. This file can be used to test alternative fuel scenarios by varying the shares of non-gasoline fuels.

  \begin{itemize}
  \tightlist
  \item
    \textbf{PropDiesel}: The proportion of the fleet that uses diesel
  \item
    \textbf{PropCng}: The proportion of the fleet that uses CNG
  \item
    \textbf{PropGas}: The proportion of the fleet that uses gasoline
  \end{itemize}

  Here is a snapshot of the file:

  \begin{longtable}[]{@{}llll@{}}
  \toprule()
  VehType & PropDiesel & PropCng & PropGas \\
  \midrule()
  \endhead
  Auto & 0.007 & 0 & 0.993 \\
  LtTruck & 0.04 & 0 & 0.96 \\
  Bus & 0.995 & 0.005 & 0 \\
  Truck & 0.945 & 0.005 & 0.05 \\
  \bottomrule()
  \end{longtable}
\item
  \textbf{Fuel composition (\emph{model\_fuel\_composition\_prop.csv})}: This file contains the composition of fuel used for each of the four road vehicle types that VERPAT represents (\emph{auto}, \emph{light truck}, \emph{bus}, and \emph{heavy truck}). This file is also used in the calculations of fuel consumption along with the aforementioned file. The column labels in the file are:

  \begin{itemize}
  \tightlist
  \item
    \textbf{GasPropEth}: The average ethanol proportion in gasoline sold
  \item
    \textbf{DieselPropBio}: The average biodiesel proportion in diesel sold
  \end{itemize}

  Here is a snapshot of the file:

  \begin{longtable}[]{@{}lll@{}}
  \toprule()
  VehType & GasPropEth & DieselPropBio \\
  \midrule()
  \endhead
  Auto & 0.1 & 0.05 \\
  LtTruck & 0.1 & 0.05 \\
  Bus & 0.1 & 0.05 \\
  Truck & 0.1 & 0.01 \\
  \bottomrule()
  \end{longtable}
\item
  \textbf{Truck and bus vmt (\emph{region\_truck\_bus\_vmt.csv})}: This file contains the region's proportion of VMT by truck and bus as well as the distribution of that VMT across functional classes (\emph{freeway}, \emph{arterial}, \emph{other}). The file includes one row for bus VMT data and one row for Truck VMT data. It should be noted that it is not necessary to enter values in the \textbf{PropVmt} column for \textbf{BusVmt} as this is calculated using the values in the \textbf{\emph{transportation\_supply.csv}} user input file. The truck VMT proportion (PropVMT column, TruckVMT row) can be obtained from \href{http://www.fhwa.dot.gov/policyinformation/hpms.cfm}{Highway Performance Monitoring System} data and local sources or the regional travel demand model if one exists.
  The proportions of VMT by functional class can be derived from the Federal Highway Cost Allocation Study and data from transit operators. The Federal Highway Cost Allocation Study (Table II-6, 1997 Federal Highway Cost Allocation Study Final Report, \href{http://www.fhwa.dot.gov/policy/hcas/final/two.cfm}{Chapter II} is used to calculate the average proportion of truck VMT by functional class. Data from transit authorities are used to calculate the proportions of bus VMT by urban area functional class.
  Here is a snapshot of the file:

  \begin{longtable}[]{@{}lllll@{}}
  \toprule()
  Type & PropVmt & Fwy & Art & Other \\
  \midrule()
  \endhead
  BusVmt & 0 & 0.15 & 0.591854 & 0.258146 \\
  TruckVmt & 0.08 & 0.452028 & 0.398645 & 0.149327 \\
  \bottomrule()
  \end{longtable}
\item
  \textbf{Plugin hybrid electric vehicles characteristics (\emph{model\_phev\_range\_prop\_mpg\_mpkwh.csv})}: This file contains the estimates and forecasts of range, fuel efficiency (mpg), power efficiency (mpkwh), and proportions of automobiles and light trucks that are plugin hybrid electric vehicles by vehicle model year. Note that this is not the fleet average for that year. It is the average of new vehicles sold in that year. This file is used in identification of plugin hybrid electric and electric vehicles. Here is a snapshot of the file:

  \begin{longtable}[]{@{}
    >{\raggedright\arraybackslash}p{(\columnwidth - 16\tabcolsep) * \real{0.1382}}
    >{\raggedright\arraybackslash}p{(\columnwidth - 16\tabcolsep) * \real{0.1382}}
    >{\raggedright\arraybackslash}p{(\columnwidth - 16\tabcolsep) * \real{0.1382}}
    >{\raggedright\arraybackslash}p{(\columnwidth - 16\tabcolsep) * \real{0.1382}}
    >{\raggedright\arraybackslash}p{(\columnwidth - 16\tabcolsep) * \real{0.1382}}
    >{\raggedright\arraybackslash}p{(\columnwidth - 16\tabcolsep) * \real{0.1382}}
    >{\raggedright\arraybackslash}p{(\columnwidth - 16\tabcolsep) * \real{0.0691}}
    >{\raggedright\arraybackslash}p{(\columnwidth - 16\tabcolsep) * \real{0.0553}}
    >{\raggedright\arraybackslash}p{(\columnwidth - 16\tabcolsep) * \real{0.0461}}@{}}
  \toprule()
  \begin{minipage}[b]{\linewidth}\raggedright
  ModelYear
  \end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
  AutoPhevRange
  \end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
  AutoPropPhev
  \end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
  AutoMpkwh
  \end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
  AutoMpg
  \end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
  LtTruckPhevRange
  \end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
  LtTruckPropPhev
  \end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
  LtTruckMpkwh
  \end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
  LtTruckMpg
  \end{minipage} \\
  \midrule()
  \endhead
  1975 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 \\
  1976 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 \\
  1977 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 \\
  1978 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 \\
  1979 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 \\
  \includegraphics{./VERPAT_images/vdots.gif} & \includegraphics{./VERPAT_images/vdots.gif} & \includegraphics{./VERPAT_images/vdots.gif} & \includegraphics{./VERPAT_images/vdots.gif} & \includegraphics{./VERPAT_images/vdots.gif} & \includegraphics{./VERPAT_images/vdots.gif} & & & \\
  2045 & 40 & 0.66 & 4.375 & 74.5 & 40 & 0.586666667 & 2.875 & 58.2 \\
  2046 & 40 & 0.708 & 4.4 & 74.9 & 40 & 0.629333333 & 2.9 & 58.5 \\
  2047 & 40 & 0.756 & 4.425 & 75.3 & 40 & 0.672 & 2.925 & 58.8 \\
  2048 & 40 & 0.816 & 4.45 & 75.6 & 40 & 0.725333333 & 2.95 & 59.1 \\
  2049 & 40 & 0.864 & 4.475 & 76 & 40 & 0.768 & 2.975 & 59.3 \\
  2050 & 40 & 0.9 & 4.5 & 76.4 & 40 & & & \\
  \bottomrule()
  \end{longtable}
\item
  \textbf{Hybrid electric vehicles characteristics (\emph{model\_hev\_prop\_mpg.csv})}: This file contains the estimates and forecasts of fuel efficiency (mpg), and proportions of automobiles and light trucks that are hybrid electric vehicles (that are neither plugin hybrid nor electric vehicle) by vehicle model year. Note that this is not the fleet average for that year. It is the average of new vehicles sold in that year. This file is used in identification of hybrid electric that are not plugin hybrid or electric vehicles. Here is a snapshot of the file:

  \begin{longtable}[]{@{}
    >{\raggedright\arraybackslash}p{(\columnwidth - 8\tabcolsep) * \real{0.2000}}
    >{\raggedright\arraybackslash}p{(\columnwidth - 8\tabcolsep) * \real{0.2000}}
    >{\raggedright\arraybackslash}p{(\columnwidth - 8\tabcolsep) * \real{0.2000}}
    >{\raggedright\arraybackslash}p{(\columnwidth - 8\tabcolsep) * \real{0.2000}}
    >{\raggedright\arraybackslash}p{(\columnwidth - 8\tabcolsep) * \real{0.2000}}@{}}
  \toprule()
  \begin{minipage}[b]{\linewidth}\raggedright
  ModelYear
  \end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
  AutoPropHev
  \end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
  AutoHevMpg
  \end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
  LtTruckPropHev
  \end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
  LtTruckHevMpg
  \end{minipage} \\
  \midrule()
  \endhead
  1975 & 0 & 0 & 0 & 0 \\
  1976 & 0 & 0 & 0 & 0 \\
  1977 & 0 & 0 & 0 & 0 \\
  1978 & 0 & 0 & 0 & 0 \\
  1979 & 0 & 0 & 0 & 0 \\
  1980 & 0 & 0 & 0 & 0 \\
  \includegraphics{./VERPAT_images/vdots.gif} & \includegraphics{./VERPAT_images/vdots.gif} & \includegraphics{./VERPAT_images/vdots.gif} & \includegraphics{./VERPAT_images/vdots.gif} & \includegraphics{./VERPAT_images/vdots.gif} \\
  2046 & 0.981481481 & 74.2 & 0.736111111 & 55.4 \\
  2047 & 0.981481481 & 74.5 & 0.736111111 & 55.6 \\
  2048 & 1 & 74.9 & 0.75 & 55.9 \\
  2049 & 1 & 75.2 & 0.75 & 56.1 \\
  2050 & 1 & 75.5 & 0.75 & 56.3 \\
  \bottomrule()
  \end{longtable}
\item
  \textbf{Electric vehicles characteristics (\emph{model\_ev\_range\_prop\_mpkwh.csv})}: This file contains the estimates and forecasts of range, power efficiency (mpkwh), and proportions of automobiles and light trucks that are electric vehicles by vehicle model year. Note that this is not the fleet average for that year. It is the average of new vehicles sold in that year. This file is used in identification of electric vehicles. Here is a snapshot of the file:

  \begin{longtable}[]{@{}
    >{\raggedright\arraybackslash}p{(\columnwidth - 12\tabcolsep) * \real{0.1562}}
    >{\raggedright\arraybackslash}p{(\columnwidth - 12\tabcolsep) * \real{0.1562}}
    >{\raggedright\arraybackslash}p{(\columnwidth - 12\tabcolsep) * \real{0.1562}}
    >{\raggedright\arraybackslash}p{(\columnwidth - 12\tabcolsep) * \real{0.1562}}
    >{\raggedright\arraybackslash}p{(\columnwidth - 12\tabcolsep) * \real{0.1562}}
    >{\raggedright\arraybackslash}p{(\columnwidth - 12\tabcolsep) * \real{0.1562}}
    >{\raggedright\arraybackslash}p{(\columnwidth - 12\tabcolsep) * \real{0.0625}}@{}}
  \toprule()
  \begin{minipage}[b]{\linewidth}\raggedright
  ModelYear
  \end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
  AutoRange
  \end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
  AutoPropEv
  \end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
  AutoMpkwh
  \end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
  LtTruckRange
  \end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
  LtTruckPropEv
  \end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
  LtTruckMpkwh
  \end{minipage} \\
  \midrule()
  \endhead
  1975 & 0 & 0 & 0 & 0 & 0 & 0 \\
  1976 & 0 & 0 & 0 & 0 & 0 & 0 \\
  1977 & 0 & 0 & 0 & 0 & 0 & 0 \\
  1978 & 0 & 0 & 0 & 0 & 0 & 0 \\
  1979 & 0 & 0 & 0 & 0 & 0 & 0 \\
  \includegraphics{./VERPAT_images/vdots.gif} & \includegraphics{./VERPAT_images/vdots.gif} & \includegraphics{./VERPAT_images/vdots.gif} & \includegraphics{./VERPAT_images/vdots.gif} & \includegraphics{./VERPAT_images/vdots.gif} & \includegraphics{./VERPAT_images/vdots.gif} & \\
  2046 & 277.5 & 0.72 & 4.4 & 185 & 0.56 & 2.9 \\
  2047 & 283.125 & 0.75 & 4.425 & 188.75 & 0.583333333 & 2.925 \\
  2048 & 288.75 & 0.795 & 4.45 & 192.5 & 0.618333333 & 2.95 \\
  2049 & 294.375 & 0.855 & 4.475 & 196.25 & 0.665 & 2.975 \\
  2050 & 300 & 0.9 & 4.5 & 200 & 0.7 & 3 \\
  \bottomrule()
  \end{longtable}
\end{enumerate}

\hypertarget{user-input-parameters-7}{%
\subsubsection{User Input Parameters}\label{user-input-parameters-7}}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\item
  \textbf{Base cost per mile (\emph{BaseCostPerMile})}: Base cost per mile in dollars for transportation costs used in the travel demand model to initially represent travel as close to unconstrained by transportation costs. The transportation costs are then fully constrained later in the model as travel reductions caused by budget constraints are estimated. It should be defined in \protect\hyperlink{model_parametersjson}{model\_parameters.json} as follows:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{\{}
    \DataTypeTok{"NAME"} \FunctionTok{:} \StringTok{"BaseCostPerMile"}\FunctionTok{,}
    \DataTypeTok{"VALUE"}\FunctionTok{:} \StringTok{"0.04"}\FunctionTok{,}
    \DataTypeTok{"TYPE"} \FunctionTok{:} \StringTok{"compound"}\FunctionTok{,}
    \DataTypeTok{"UNITS"} \FunctionTok{:} \StringTok{"USD/MI"}\FunctionTok{,}
    \DataTypeTok{"PROHIBIT"} \FunctionTok{:} \StringTok{"c(\textquotesingle{}NA\textquotesingle{}, \textquotesingle{}\textless{} 0\textquotesingle{})"}\FunctionTok{,}
    \DataTypeTok{"ISELEMENTOF"} \FunctionTok{:} \StringTok{""}
\FunctionTok{\}}
\end{Highlighting}
\end{Shaded}
\item
  \textbf{Dvmt budget proportion (\emph{DvmtBudgetProp})}: The proportion of household budget that can be allocated to transportation spending. The travel demand models includes a constraint that reduces household travel if too high a proportion of household spending is spent on transportation. It should be defined in \protect\hyperlink{model_parametersjson}{model\_parameters.json} as follows:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{\{}
    \DataTypeTok{"NAME"} \FunctionTok{:} \StringTok{"DvmtBudgetProp"}\FunctionTok{,}
    \DataTypeTok{"VALUE"}\FunctionTok{:} \StringTok{"0.1"}\FunctionTok{,}
    \DataTypeTok{"TYPE"} \FunctionTok{:} \StringTok{"double"}\FunctionTok{,}
    \DataTypeTok{"UNITS"} \FunctionTok{:} \StringTok{"multiplier"}\FunctionTok{,}
    \DataTypeTok{"PROHIBIT"} \FunctionTok{:} \StringTok{"c(\textquotesingle{}NA\textquotesingle{}, \textquotesingle{}\textless{} 0\textquotesingle{}, \textquotesingle{}\textgreater{} 1\textquotesingle{})"}\FunctionTok{,}
    \DataTypeTok{"ISELEMENTOF"} \FunctionTok{:} \StringTok{""}
\FunctionTok{\}}
\end{Highlighting}
\end{Shaded}
\item
  \textbf{Annual vmt inflator (\emph{AnnVmtInflator})}: Factor to convert VMT between annual and average daily amounts. It should be defined in \protect\hyperlink{model_parametersjson}{model\_parameters.json} as follows:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{\{}
    \DataTypeTok{"NAME"} \FunctionTok{:} \StringTok{"AnnVmtInflator"}\FunctionTok{,}
    \DataTypeTok{"VALUE"}\FunctionTok{:} \StringTok{"365"}\FunctionTok{,}
    \DataTypeTok{"TYPE"} \FunctionTok{:} \StringTok{"integer"}\FunctionTok{,}
    \DataTypeTok{"UNITS"} \FunctionTok{:} \StringTok{"DAYS"}\FunctionTok{,}
    \DataTypeTok{"PROHIBIT"} \FunctionTok{:} \StringTok{"c(\textquotesingle{}NA\textquotesingle{}, \textquotesingle{}\textless{} 0\textquotesingle{})"}\FunctionTok{,}
    \DataTypeTok{"ISELEMENTOF"} \FunctionTok{:} \StringTok{""}
\FunctionTok{\}}
\end{Highlighting}
\end{Shaded}
\item
  \textbf{Fuel cost (\emph{FuelCost})}: Average cost per gallon of fuel (before taxes are added). It should be defined in \protect\hyperlink{model_parametersjson}{model\_parameters.json} as follows:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{\{}
    \DataTypeTok{"NAME"} \FunctionTok{:} \StringTok{"FuelCost"}\FunctionTok{,}
    \DataTypeTok{"VALUE"}\FunctionTok{:} \StringTok{"1.82"}\FunctionTok{,}
    \DataTypeTok{"TYPE"} \FunctionTok{:} \StringTok{"compound"}\FunctionTok{,}
    \DataTypeTok{"UNITS"} \FunctionTok{:} \StringTok{"USD/GAL"}\FunctionTok{,}
    \DataTypeTok{"PROHIBIT"} \FunctionTok{:} \StringTok{"c(\textquotesingle{}NA\textquotesingle{}, \textquotesingle{}\textless{} 0\textquotesingle{})"}\FunctionTok{,}
    \DataTypeTok{"ISELEMENTOF"} \FunctionTok{:} \StringTok{""}
\FunctionTok{\}}
\end{Highlighting}
\end{Shaded}
\item
  \textbf{Power cost (\emph{KwhCost})}: Average cost per kwh of power consumption (before taxes are added). It should be defined in \protect\hyperlink{model_parametersjson}{model\_parameters.json} as follows:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{\{}
    \DataTypeTok{"NAME"} \FunctionTok{:} \StringTok{"KwhCost"}\FunctionTok{,}
    \DataTypeTok{"VALUE"}\FunctionTok{:} \StringTok{"0.257"}\FunctionTok{,}
    \DataTypeTok{"TYPE"} \FunctionTok{:} \StringTok{"compound"}\FunctionTok{,}
    \DataTypeTok{"UNITS"} \FunctionTok{:} \StringTok{"USD/KWH"}\FunctionTok{,}
    \DataTypeTok{"PROHIBIT"} \FunctionTok{:} \StringTok{"c(\textquotesingle{}NA\textquotesingle{}, \textquotesingle{}\textless{} 0\textquotesingle{})"}\FunctionTok{,}
    \DataTypeTok{"ISELEMENTOF"} \FunctionTok{:} \StringTok{""}
\FunctionTok{\}}
\end{Highlighting}
\end{Shaded}
\item
  \textbf{Gas tax (\emph{GasTax})}: Average cost per gallon of fuel of gas taxes. It should be defined in \protect\hyperlink{model_parametersjson}{model\_parameters.json} as follows:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{\{}
    \DataTypeTok{"NAME"} \FunctionTok{:} \StringTok{"GasTax"}\FunctionTok{,}
    \DataTypeTok{"VALUE"}\FunctionTok{:} \StringTok{"0.424"}\FunctionTok{,}
    \DataTypeTok{"TYPE"} \FunctionTok{:} \StringTok{"compound"}\FunctionTok{,}
    \DataTypeTok{"UNITS"} \FunctionTok{:} \StringTok{"USD/GAL"}\FunctionTok{,}
    \DataTypeTok{"PROHIBIT"} \FunctionTok{:} \StringTok{"c(\textquotesingle{}NA\textquotesingle{}, \textquotesingle{}\textless{} 0\textquotesingle{})"}\FunctionTok{,}
    \DataTypeTok{"ISELEMENTOF"} \FunctionTok{:} \StringTok{""}
\FunctionTok{\}}
\end{Highlighting}
\end{Shaded}
\item
  \textbf{Light vehicle dvmt (\emph{BaseLtVehDvmt})}: Total light vehicle daily VMT for the base year in thousands of miles. This data can be derived from a combination of \href{http://www.fhwa.dot.gov/policyinformation/hpms.cfm}{Highway Performance Monitoring System} data, Federal Highway Cost Allocation Study data, and regional data. Light vehicle daily VMT can be estimated by subtracting truck and bus VMT from total VMT provided in the Highway Performance Monitoring System (HPMS). Regional travel demand model outputs can also be used to derive these data. It should be defined in \protect\hyperlink{model_parametersjson}{model\_parameters.json} as follows:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{\{}
    \DataTypeTok{"NAME"} \FunctionTok{:} \StringTok{"BaseLtVehDvmt"}\FunctionTok{,}
    \DataTypeTok{"VALUE"}\FunctionTok{:} \StringTok{"27244"}\FunctionTok{,}
    \DataTypeTok{"TYPE"} \FunctionTok{:} \StringTok{"compound"}\FunctionTok{,}
    \DataTypeTok{"UNITS"} \FunctionTok{:} \StringTok{"MI/DAY"}\FunctionTok{,}
    \DataTypeTok{"PROHIBIT"} \FunctionTok{:} \StringTok{"c(\textquotesingle{}NA\textquotesingle{}, \textquotesingle{}\textless{} 0\textquotesingle{})"}\FunctionTok{,}
    \DataTypeTok{"ISELEMENTOF"} \FunctionTok{:} \StringTok{""}
\FunctionTok{\}}
\end{Highlighting}
\end{Shaded}
\item
  \textbf{Dvmt proportion by functional class (\emph{BaseFwyArtProp})}: The proportions of daily VMT for light vehicles that takes place on freeways and arterials (i.e., the remainder of VMT takes place on lower functional class roads for the base year. This data can be derived from a combination of \href{http://www.fhwa.dot.gov/policyinformation/hpms.cfm}{Highway Performance Monitoring System} data, Federal Highway Cost Allocation Study data, and regional data. The proportions of light vehicle daily VMT on freeways and arterials can be derived from the HPMS data. Regional travel demand model outputs can also be used to derive these data. It should be defined in \protect\hyperlink{model_parametersjson}{model\_parameters.json} as follows:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{\{}
    \DataTypeTok{"NAME"} \FunctionTok{:} \StringTok{"BaseFwyArtProp"}\FunctionTok{,}
    \DataTypeTok{"VALUE"}\FunctionTok{:} \StringTok{"0.77"}\FunctionTok{,}
    \DataTypeTok{"TYPE"} \FunctionTok{:} \StringTok{"double"}\FunctionTok{,}
    \DataTypeTok{"UNITS"} \FunctionTok{:} \StringTok{"proportion"}\FunctionTok{,}
    \DataTypeTok{"PROHIBIT"} \FunctionTok{:} \StringTok{"c(\textquotesingle{}NA\textquotesingle{}, \textquotesingle{}\textless{} 0\textquotesingle{}, \textquotesingle{}\textgreater{} 1\textquotesingle{})"}\FunctionTok{,}
    \DataTypeTok{"ISELEMENTOF"} \FunctionTok{:} \StringTok{""}
\FunctionTok{\}}
\end{Highlighting}
\end{Shaded}
\item
  \textbf{Truck vmt growth multiplier (\emph{TruckVmtGrowthMultiplier})}: Rate at which heavy truck VMT growth in relation to total regional household income growth in the region. A value of 1 indicates that heavy truck VMT grows at the same rate as total regional household income. A value less than 1 means slower growth in truck VMT, and greater than 1 means faster growth in truck VMT than total regional household income. It should be defined in \protect\hyperlink{model_parametersjson}{model\_parameters.json} as follows:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{\{}
    \DataTypeTok{"NAME"} \FunctionTok{:} \StringTok{"TruckVmtGrowthMultiplier"}\FunctionTok{,}
    \DataTypeTok{"VALUE"}\FunctionTok{:} \StringTok{"1"}\FunctionTok{,}
    \DataTypeTok{"TYPE"} \FunctionTok{:} \StringTok{"double"}\FunctionTok{,}
    \DataTypeTok{"UNITS"} \FunctionTok{:} \StringTok{"multiplier"}\FunctionTok{,}
    \DataTypeTok{"PROHIBIT"} \FunctionTok{:} \StringTok{"c(\textquotesingle{}NA\textquotesingle{}, \textquotesingle{}\textless{} 0\textquotesingle{})"}\FunctionTok{,}
    \DataTypeTok{"ISELEMENTOF"} \FunctionTok{:} \StringTok{""}
\FunctionTok{\}}
\end{Highlighting}
\end{Shaded}
\end{enumerate}

\hypertarget{fixed-input-parameters}{%
\subsubsection{Fixed Input Parameters}\label{fixed-input-parameters}}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\item
  \textbf{Carbon cost (\emph{CarbonCost})}: Average cost of green house gas emissions. It should be defined in \protect\hyperlink{model_parametersjson}{model\_parameters.json} as follows:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{\{}
    \DataTypeTok{"NAME"} \FunctionTok{:} \StringTok{"CarbonCost"}\FunctionTok{,}
    \DataTypeTok{"VALUE"}\FunctionTok{:} \StringTok{"0"}\FunctionTok{,}
    \DataTypeTok{"TYPE"} \FunctionTok{:} \StringTok{"compound"}\FunctionTok{,}
    \DataTypeTok{"UNITS"} \FunctionTok{:} \StringTok{"USD/GAL"}\FunctionTok{,}
    \DataTypeTok{"PROHIBIT"} \FunctionTok{:} \StringTok{"c(\textquotesingle{}NA\textquotesingle{}, \textquotesingle{}\textless{} 0\textquotesingle{})"}\FunctionTok{,}
    \DataTypeTok{"ISELEMENTOF"} \FunctionTok{:} \StringTok{""}
\FunctionTok{\}}
\end{Highlighting}
\end{Shaded}
\item
  \textbf{Vmt cost (\emph{VmtCost})}: Average cost of vehicle miles traveled. It should be defined in \protect\hyperlink{model_parametersjson}{model\_parameters.json} as follows:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{\{}
    \DataTypeTok{"NAME"} \FunctionTok{:} \StringTok{"VmtCost"}\FunctionTok{,}
    \DataTypeTok{"VALUE"}\FunctionTok{:} \StringTok{"0"}\FunctionTok{,}
    \DataTypeTok{"TYPE"} \FunctionTok{:} \StringTok{"compound"}\FunctionTok{,}
    \DataTypeTok{"UNITS"} \FunctionTok{:} \StringTok{"USD/GAL"}\FunctionTok{,}
    \DataTypeTok{"PROHIBIT"} \FunctionTok{:} \StringTok{"c(\textquotesingle{}NA\textquotesingle{}, \textquotesingle{}\textless{} 0\textquotesingle{})"}\FunctionTok{,}
    \DataTypeTok{"ISELEMENTOF"} \FunctionTok{:} \StringTok{""}
\FunctionTok{\}}
\end{Highlighting}
\end{Shaded}
\end{enumerate}

\hypertarget{internal-module-inputs-84}{%
\subsubsection{Internal Module Inputs}\label{internal-module-inputs-84}}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1267}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.3667}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1067}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.4000}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Package
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Module
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Outputs
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule()
\endhead
VESimHouseholds & \protect\hyperlink{createhouseholds}{CreateHouseholds} & \textbf{HhId} & Unique household ID \\
VESimHouseholds & \protect\hyperlink{createhouseholds}{CreateHouseholds} & \textbf{HhSize} & Number of persons \\
VESimHouseholds & \protect\hyperlink{createhouseholds}{CreateHouseholds} & \textbf{Age0to14} & Persons in 0 to 14 year old age group \\
VESimHouseholds & \protect\hyperlink{createhouseholds}{CreateHouseholds} & \textbf{Age15to19} & Persons in 15 to 19 year old age group \\
VESimHouseholds & \protect\hyperlink{createhouseholds}{CreateHouseholds} & \textbf{Age20to29} & Persons in 20 to 29 year old age group \\
VESimHouseholds & \protect\hyperlink{createhouseholds}{CreateHouseholds} & \textbf{Age30to54} & Persons in 30 to 54 year old age group \\
VESimHouseholds & \protect\hyperlink{createhouseholds}{CreateHouseholds} & \textbf{Age55to64} & Persons in 55 to 64 year old age group \\
VESimHouseholds & \protect\hyperlink{createhouseholds}{CreateHouseholds} & \textbf{Age65Plus} & Persons in 65 or older age group \\
VESimHouseholds & \protect\hyperlink{predictincome}{PredictIncome} & \textbf{Income} & Total annual household (non-qroup \& group quarters) income in year 1999 dollars \\
VELandUse & \protect\hyperlink{calculatebaseplacetypes}{CalculateBasePlaceTypes} & \textbf{UrbanIncome} & Total income by place types \\
VELandUse & \protect\hyperlink{calculatefutureplacetypes}{CalculateFuturePlaceTypes} & \textbf{HhPlaceTypes} & A place type as assigned to the households \\
VELandUse & \protect\hyperlink{calculatefutureplacetypes}{CalculateFuturePlaceTypes} & \textbf{UrbanIncome} & Total income by place types \\
VETransportSupply & \protect\hyperlink{createbaseaccessibility}{CreateBaseAccessibility} & \textbf{FwyLaneMiPC} & Ratio of urbanized area freeway and expressway lane-miles to urbanized area population \\
VETransportSupply & \protect\hyperlink{createbaseaccessibility}{CreateBaseAccessibility} & \textbf{TranRevMiPC} & Transit revenue miles per capita for the region \\
VEHouseholdVehicles & \protect\hyperlink{assignvehiclefeatures}{AssignVehicleFeatures} & \textbf{VehId} & Unique vehicle ID \\
VEHouseholdVehicles & \protect\hyperlink{assignvehiclefeatures}{AssignVehicleFeatures} & \textbf{Type} & Vehicle body type: Auto = automobile, LtTrk = light trucks (i.e.~pickup, SUV, Van) \\
VEHouseholdVehicles & \protect\hyperlink{assignvehiclefeatures}{AssignVehicleFeatures} & \textbf{Mileage} & Mileage of vehicles (automobiles and light truck) \\
VEHouseholdVehicles & \protect\hyperlink{assignvehiclefeatures}{AssignVehicleFeatures} & \textbf{DvmtProp} & Proportion of average vehicle DVMT \\
VEHouseholdVehicles & \protect\hyperlink{assignvehiclefeatures}{AssignVehicleFeatures} & \textbf{Vehicles} & Number of automobiles and light trucks owned or leased by the household \\
VEHouseholdVehicles & \protect\hyperlink{assignvehiclefeatures}{AssignVehicleFeatures} & \textbf{Age} & Age of the vehicles \\
\bottomrule()
\end{longtable}

\hypertarget{module-outputs-88}{%
\subsubsection{Module Outputs}\label{module-outputs-88}}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  \textbf{TruckDvmt}: Average daily vehicle miles traveled by trucks
\item
  \textbf{Dvmt (bzones)}: Average daily vehicle miles traveled by place types
\item
  \textbf{Dvmt (households)}: Average daily vehicle miles traveled by household
\item
  \textbf{Dvmt (vehicles)}: Average daily vehicle miles traveled by each vehicle
\item
  \textbf{EvDvmt (bzones)}: Average daily electric vehicle miles traveled by place types
\item
  \textbf{EvDvmt (vehicles)}: Average daily electric vehicle miles traveled by each vehicle
\item
  \textbf{HcDvmt (bzones)}: Average daily vehicle (ICE) miles traveled by place types
\item
  \textbf{HcDvmt (vehicles)}: Average daily vehicle (ICE) miles traveled by each vehicle
\item
  \textbf{FuelGallons}: Average daily fuel consumption in gallons by each household
\item
  \textbf{FuelCo2e}: Average daily Co2 equivalent greenhouse gas emissions by each household due to traditional fuel consumption
\item
  \textbf{ElecKwh}: Average daily power consumption in kilowatt-hours by each household
\item
  \textbf{ElecCo2e}: Average daily Co2 equivalent greenhouse gas emissions by each household due to power consumption
\item
  \textbf{MpKwh}: Power efficiency of electric vehicles by each vehicle
\item
  \textbf{Powertrain}: Powertrain of each vehicle.
\item
  \textbf{DailyParkingCost}: Average daily parking cost by each household
\item
  \textbf{FutureCostPerMile}: Total cost per mile for future year for each household
\end{enumerate}

\protect\hyperlink{contents}{Top} \protect\hyperlink{definitions}{Definitions} \protect\hyperlink{inputs-and-outputs}{Inputs/Outputs}

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\hypertarget{calculatetraveldemandfuture-1}{%
\subsection{CalculateTravelDemandFuture}\label{calculatetraveldemandfuture-1}}

This module is similar to \protect\hyperlink{calculatetraveldemand}{CalculateTravelDemand} module but uses future year (estimated) data for transportation supply and for vehicles like number of vehicles, mileage, type, etc.

\hypertarget{user-input-files-87}{%
\subsubsection{User Input Files}\label{user-input-files-87}}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\item
  \textbf{Emission Rate (\emph{model\_fuel\_co2.csv})}: The emissions rate file contains information on ``pump-to-wheels'' CO2 equivalent emissions by fuel type in grams per mega Joule of fuel energy content. There is one row for each fuel type: ULSD, biodiesel, RFG (reformulated gasoline), CARBOB (gasoline formulated to be blended with ethanol), ethanol, and CNG. This file is used to convert fuel use to CO2 equivalent emissions.
  Here is a snapshot of the file:

  \begin{longtable}[]{@{}ll@{}}
  \toprule()
  Fuel & Intensity \\
  \midrule()
  \endhead
  ULSD & 77.19 \\
  Biodiesel & 76.81 \\
  RFG & 75.65 \\
  CARBOB & 75.65 \\
  Ethanol & 74.88 \\
  Cng & 62.14 \\
  \bottomrule()
  \end{longtable}
\item
  \textbf{Vehicle VMT proportion by fuel (\emph{model\_fuel\_prop\_by\_veh.csv})}: The file contains allocation of VMT for each of the four road vehicle types that VERPAT represents (\emph{auto}, \emph{light truck}, \emph{bus}, and \emph{heavy truck}) to different fuel types (\emph{Diesel}, \emph{CNG}, \emph{Gasoline}). This file is used in the calculations of fuel consumption. This file can be used to test alternative fuel scenarios by varying the shares of non-gasoline fuels.

  \begin{itemize}
  \tightlist
  \item
    \textbf{PropDiesel}: The proportion of the fleet that uses diesel
  \item
    \textbf{PropCng}: The proportion of the fleet that uses CNG
  \item
    \textbf{PropGas}: The proportion of the fleet that uses gasoline
  \end{itemize}

  Here is a snapshot of the file:

  \begin{longtable}[]{@{}llll@{}}
  \toprule()
  VehType & PropDiesel & PropCng & PropGas \\
  \midrule()
  \endhead
  Auto & 0.007 & 0 & 0.993 \\
  LtTruck & 0.04 & 0 & 0.96 \\
  Bus & 0.995 & 0.005 & 0 \\
  Truck & 0.945 & 0.005 & 0.05 \\
  \bottomrule()
  \end{longtable}
\item
  \textbf{Fuel composition (\emph{model\_fuel\_composition\_prop.csv})}: This file contains the composition of fuel used for each of the four road vehicle types that VERPAT represents (\emph{auto}, \emph{light truck}, \emph{bus}, and \emph{heavy truck}). This file is also used in the calculations of fuel consumption along with the aforementioned file. The column labels in the file are:

  \begin{itemize}
  \tightlist
  \item
    \textbf{GasPropEth}: The average ethanol proportion in gasoline sold
  \item
    \textbf{DieselPropBio}: The average biodiesel proportion in diesel sold
  \end{itemize}

  Here is a snapshot of the file:

  \begin{longtable}[]{@{}lll@{}}
  \toprule()
  VehType & GasPropEth & DieselPropBio \\
  \midrule()
  \endhead
  Auto & 0.1 & 0.05 \\
  LtTruck & 0.1 & 0.05 \\
  Bus & 0.1 & 0.05 \\
  Truck & 0.1 & 0.01 \\
  \bottomrule()
  \end{longtable}
\item
  \textbf{Truck and bus vmt (\emph{region\_truck\_bus\_vmt.csv})}: This file contains the region's proportion of VMT by truck and bus as well as the distribution of that VMT across functional classes (\emph{freeway}, \emph{arterial}, \emph{other}). The file includes one row for bus VMT data and one row for Truck VMT data. It should be noted that it is not necessary to enter values in the \textbf{PropVmt} column for \textbf{BusVmt} as this is calculated using the values in the \textbf{\emph{transportation\_supply.csv}} user input file. The truck VMT proportion (PropVMT column, TruckVMT row) can be obtained from \href{http://www.fhwa.dot.gov/policyinformation/hpms.cfm}{Highway Performance Monitoring System} data and local sources or the regional travel demand model if one exists.
  The proportions of VMT by functional class can be derived from the Federal Highway Cost Allocation Study and data from transit operators. The Federal Highway Cost Allocation Study (Table II-6, 1997 Federal Highway Cost Allocation Study Final Report, \href{http://www.fhwa.dot.gov/policy/hcas/final/two.cfm}{Chapter II} is used to calculate the average proportion of truck VMT by functional class. Data from transit authorities are used to calculate the proportions of bus VMT by urban area functional class.
  Here is a snapshot of the file:

  \begin{longtable}[]{@{}lllll@{}}
  \toprule()
  Type & PropVmt & Fwy & Art & Other \\
  \midrule()
  \endhead
  BusVmt & 0 & 0.15 & 0.591854 & 0.258146 \\
  TruckVmt & 0.08 & 0.452028 & 0.398645 & 0.149327 \\
  \bottomrule()
  \end{longtable}
\item
  \textbf{Plugin hybrid electric vehicles characteristics (\emph{model\_phev\_range\_prop\_mpg\_mpkwh.csv})}: This file contains the estimates and forecasts of range, fuel efficiency (mpg), power efficiency (mpkwh), and proportions of automobiles and light trucks that are plugin hybrid electric vehicles by vehicle model year. Note that this is not the fleet average for that year. It is the average of new vehicles sold in that year. This file is used in identification of plugin hybrid electric and electric vehicles. Here is a snapshot of the file:

  \begin{longtable}[]{@{}
    >{\raggedright\arraybackslash}p{(\columnwidth - 16\tabcolsep) * \real{0.1382}}
    >{\raggedright\arraybackslash}p{(\columnwidth - 16\tabcolsep) * \real{0.1382}}
    >{\raggedright\arraybackslash}p{(\columnwidth - 16\tabcolsep) * \real{0.1382}}
    >{\raggedright\arraybackslash}p{(\columnwidth - 16\tabcolsep) * \real{0.1382}}
    >{\raggedright\arraybackslash}p{(\columnwidth - 16\tabcolsep) * \real{0.1382}}
    >{\raggedright\arraybackslash}p{(\columnwidth - 16\tabcolsep) * \real{0.1382}}
    >{\raggedright\arraybackslash}p{(\columnwidth - 16\tabcolsep) * \real{0.0691}}
    >{\raggedright\arraybackslash}p{(\columnwidth - 16\tabcolsep) * \real{0.0553}}
    >{\raggedright\arraybackslash}p{(\columnwidth - 16\tabcolsep) * \real{0.0461}}@{}}
  \toprule()
  \begin{minipage}[b]{\linewidth}\raggedright
  ModelYear
  \end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
  AutoPhevRange
  \end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
  AutoPropPhev
  \end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
  AutoMpkwh
  \end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
  AutoMpg
  \end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
  LtTruckPhevRange
  \end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
  LtTruckPropPhev
  \end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
  LtTruckMpkwh
  \end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
  LtTruckMpg
  \end{minipage} \\
  \midrule()
  \endhead
  1975 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 \\
  1976 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 \\
  1977 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 \\
  1978 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 \\
  1979 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 \\
  \includegraphics{./VERPAT_images/vdots.gif} & \includegraphics{./VERPAT_images/vdots.gif} & \includegraphics{./VERPAT_images/vdots.gif} & \includegraphics{./VERPAT_images/vdots.gif} & \includegraphics{./VERPAT_images/vdots.gif} & \includegraphics{./VERPAT_images/vdots.gif} & & & \\
  2045 & 40 & 0.66 & 4.375 & 74.5 & 40 & 0.586666667 & 2.875 & 58.2 \\
  2046 & 40 & 0.708 & 4.4 & 74.9 & 40 & 0.629333333 & 2.9 & 58.5 \\
  2047 & 40 & 0.756 & 4.425 & 75.3 & 40 & 0.672 & 2.925 & 58.8 \\
  2048 & 40 & 0.816 & 4.45 & 75.6 & 40 & 0.725333333 & 2.95 & 59.1 \\
  2049 & 40 & 0.864 & 4.475 & 76 & 40 & 0.768 & 2.975 & 59.3 \\
  2050 & 40 & 0.9 & 4.5 & 76.4 & 40 & & & \\
  \bottomrule()
  \end{longtable}
\item
  \textbf{Hybrid electric vehicles characteristics (\emph{model\_hev\_prop\_mpg.csv})}: This file contains the estimates and forecasts of fuel efficiency (mpg), and proportions of automobiles and light trucks that are hybrid electric vehicles (that are neither plugin hybrid nor electric vehicle) by vehicle model year. Note that this is not the fleet average for that year. It is the average of new vehicles sold in that year. This file is used in identification of hybrid electric that are not plugin hybrid or electric vehicles. Here is a snapshot of the file:

  \begin{longtable}[]{@{}
    >{\raggedright\arraybackslash}p{(\columnwidth - 8\tabcolsep) * \real{0.2000}}
    >{\raggedright\arraybackslash}p{(\columnwidth - 8\tabcolsep) * \real{0.2000}}
    >{\raggedright\arraybackslash}p{(\columnwidth - 8\tabcolsep) * \real{0.2000}}
    >{\raggedright\arraybackslash}p{(\columnwidth - 8\tabcolsep) * \real{0.2000}}
    >{\raggedright\arraybackslash}p{(\columnwidth - 8\tabcolsep) * \real{0.2000}}@{}}
  \toprule()
  \begin{minipage}[b]{\linewidth}\raggedright
  ModelYear
  \end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
  AutoPropHev
  \end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
  AutoHevMpg
  \end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
  LtTruckPropHev
  \end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
  LtTruckHevMpg
  \end{minipage} \\
  \midrule()
  \endhead
  1975 & 0 & 0 & 0 & 0 \\
  1976 & 0 & 0 & 0 & 0 \\
  1977 & 0 & 0 & 0 & 0 \\
  1978 & 0 & 0 & 0 & 0 \\
  1979 & 0 & 0 & 0 & 0 \\
  1980 & 0 & 0 & 0 & 0 \\
  \includegraphics{./VERPAT_images/vdots.gif} & \includegraphics{./VERPAT_images/vdots.gif} & \includegraphics{./VERPAT_images/vdots.gif} & \includegraphics{./VERPAT_images/vdots.gif} & \includegraphics{./VERPAT_images/vdots.gif} \\
  2046 & 0.981481481 & 74.2 & 0.736111111 & 55.4 \\
  2047 & 0.981481481 & 74.5 & 0.736111111 & 55.6 \\
  2048 & 1 & 74.9 & 0.75 & 55.9 \\
  2049 & 1 & 75.2 & 0.75 & 56.1 \\
  2050 & 1 & 75.5 & 0.75 & 56.3 \\
  \bottomrule()
  \end{longtable}
\item
  \textbf{Electric vehicles characteristics (\emph{model\_ev\_range\_prop\_mpkwh.csv})}: This file contains the estimates and forecasts of range, power efficiency (mpkwh), and proportions of automobiles and light trucks that are electric vehicles by vehicle model year. Note that this is not the fleet average for that year. It is the average of new vehicles sold in that year. This file is used in identification of electric vehicles. Here is a snapshot of the file:

  \begin{longtable}[]{@{}
    >{\raggedright\arraybackslash}p{(\columnwidth - 12\tabcolsep) * \real{0.1562}}
    >{\raggedright\arraybackslash}p{(\columnwidth - 12\tabcolsep) * \real{0.1562}}
    >{\raggedright\arraybackslash}p{(\columnwidth - 12\tabcolsep) * \real{0.1562}}
    >{\raggedright\arraybackslash}p{(\columnwidth - 12\tabcolsep) * \real{0.1562}}
    >{\raggedright\arraybackslash}p{(\columnwidth - 12\tabcolsep) * \real{0.1562}}
    >{\raggedright\arraybackslash}p{(\columnwidth - 12\tabcolsep) * \real{0.1562}}
    >{\raggedright\arraybackslash}p{(\columnwidth - 12\tabcolsep) * \real{0.0625}}@{}}
  \toprule()
  \begin{minipage}[b]{\linewidth}\raggedright
  ModelYear
  \end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
  AutoRange
  \end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
  AutoPropEv
  \end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
  AutoMpkwh
  \end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
  LtTruckRange
  \end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
  LtTruckPropEv
  \end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
  LtTruckMpkwh
  \end{minipage} \\
  \midrule()
  \endhead
  1975 & 0 & 0 & 0 & 0 & 0 & 0 \\
  1976 & 0 & 0 & 0 & 0 & 0 & 0 \\
  1977 & 0 & 0 & 0 & 0 & 0 & 0 \\
  1978 & 0 & 0 & 0 & 0 & 0 & 0 \\
  1979 & 0 & 0 & 0 & 0 & 0 & 0 \\
  \includegraphics{./VERPAT_images/vdots.gif} & \includegraphics{./VERPAT_images/vdots.gif} & \includegraphics{./VERPAT_images/vdots.gif} & \includegraphics{./VERPAT_images/vdots.gif} & \includegraphics{./VERPAT_images/vdots.gif} & \includegraphics{./VERPAT_images/vdots.gif} & \\
  2046 & 277.5 & 0.72 & 4.4 & 185 & 0.56 & 2.9 \\
  2047 & 283.125 & 0.75 & 4.425 & 188.75 & 0.583333333 & 2.925 \\
  2048 & 288.75 & 0.795 & 4.45 & 192.5 & 0.618333333 & 2.95 \\
  2049 & 294.375 & 0.855 & 4.475 & 196.25 & 0.665 & 2.975 \\
  2050 & 300 & 0.9 & 4.5 & 200 & 0.7 & 3 \\
  \bottomrule()
  \end{longtable}
\end{enumerate}

\hypertarget{user-input-parameters-8}{%
\subsubsection{User Input Parameters}\label{user-input-parameters-8}}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\item
  \textbf{Base cost per mile (\emph{BaseCostPerMile})}: Base cost per mile in dollars for transportation costs used in the travel demand model to initially represent travel as close to unconstrained by transportation costs. The transportation costs are then fully constrained later in the model as travel reductions caused by budget constraints are estimated. It should be defined in \protect\hyperlink{model_parametersjson}{model\_parameters.json} as follows:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{\{}
    \DataTypeTok{"NAME"} \FunctionTok{:} \StringTok{"BaseCostPerMile"}\FunctionTok{,}
    \DataTypeTok{"VALUE"}\FunctionTok{:} \StringTok{"0.04"}\FunctionTok{,}
    \DataTypeTok{"TYPE"} \FunctionTok{:} \StringTok{"compound"}\FunctionTok{,}
    \DataTypeTok{"UNITS"} \FunctionTok{:} \StringTok{"USD/MI"}\FunctionTok{,}
    \DataTypeTok{"PROHIBIT"} \FunctionTok{:} \StringTok{"c(\textquotesingle{}NA\textquotesingle{}, \textquotesingle{}\textless{} 0\textquotesingle{})"}\FunctionTok{,}
    \DataTypeTok{"ISELEMENTOF"} \FunctionTok{:} \StringTok{""}
\FunctionTok{\}}
\end{Highlighting}
\end{Shaded}
\item
  \textbf{Dvmt budget proportion (\emph{DvmtBudgetProp})}: The proportion of household budget that can be allocated to transportation spending. The travel demand models includes a constraint that reduces household travel if too high a proportion of household spending is spent on transportation. It should be defined in \protect\hyperlink{model_parametersjson}{model\_parameters.json} as follows:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{\{}
    \DataTypeTok{"NAME"} \FunctionTok{:} \StringTok{"DvmtBudgetProp"}\FunctionTok{,}
    \DataTypeTok{"VALUE"}\FunctionTok{:} \StringTok{"0.1"}\FunctionTok{,}
    \DataTypeTok{"TYPE"} \FunctionTok{:} \StringTok{"double"}\FunctionTok{,}
    \DataTypeTok{"UNITS"} \FunctionTok{:} \StringTok{"multiplier"}\FunctionTok{,}
    \DataTypeTok{"PROHIBIT"} \FunctionTok{:} \StringTok{"c(\textquotesingle{}NA\textquotesingle{}, \textquotesingle{}\textless{} 0\textquotesingle{}, \textquotesingle{}\textgreater{} 1\textquotesingle{})"}\FunctionTok{,}
    \DataTypeTok{"ISELEMENTOF"} \FunctionTok{:} \StringTok{""}
\FunctionTok{\}}
\end{Highlighting}
\end{Shaded}
\item
  \textbf{Annual vmt inflator (\emph{AnnVmtInflator})}: Factor to convert VMT between annual and average daily amounts. It should be defined in \protect\hyperlink{model_parametersjson}{model\_parameters.json} as follows:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{\{}
    \DataTypeTok{"NAME"} \FunctionTok{:} \StringTok{"AnnVmtInflator"}\FunctionTok{,}
    \DataTypeTok{"VALUE"}\FunctionTok{:} \StringTok{"365"}\FunctionTok{,}
    \DataTypeTok{"TYPE"} \FunctionTok{:} \StringTok{"integer"}\FunctionTok{,}
    \DataTypeTok{"UNITS"} \FunctionTok{:} \StringTok{"DAYS"}\FunctionTok{,}
    \DataTypeTok{"PROHIBIT"} \FunctionTok{:} \StringTok{"c(\textquotesingle{}NA\textquotesingle{}, \textquotesingle{}\textless{} 0\textquotesingle{})"}\FunctionTok{,}
    \DataTypeTok{"ISELEMENTOF"} \FunctionTok{:} \StringTok{""}
\FunctionTok{\}}
\end{Highlighting}
\end{Shaded}
\item
  \textbf{Fuel cost (\emph{FuelCost})}: Average cost per gallon of fuel (before taxes are added). It should be defined in \protect\hyperlink{model_parametersjson}{model\_parameters.json} as follows:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{\{}
    \DataTypeTok{"NAME"} \FunctionTok{:} \StringTok{"FuelCost"}\FunctionTok{,}
    \DataTypeTok{"VALUE"}\FunctionTok{:} \StringTok{"1.82"}\FunctionTok{,}
    \DataTypeTok{"TYPE"} \FunctionTok{:} \StringTok{"compound"}\FunctionTok{,}
    \DataTypeTok{"UNITS"} \FunctionTok{:} \StringTok{"USD/GAL"}\FunctionTok{,}
    \DataTypeTok{"PROHIBIT"} \FunctionTok{:} \StringTok{"c(\textquotesingle{}NA\textquotesingle{}, \textquotesingle{}\textless{} 0\textquotesingle{})"}\FunctionTok{,}
    \DataTypeTok{"ISELEMENTOF"} \FunctionTok{:} \StringTok{""}
\FunctionTok{\}}
\end{Highlighting}
\end{Shaded}
\item
  \textbf{Power cost (\emph{KwhCost})}: Average cost per kwh of power consumption (before taxes are added). It should be defined in \protect\hyperlink{model_parametersjson}{model\_parameters.json} as follows:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{\{}
    \DataTypeTok{"NAME"} \FunctionTok{:} \StringTok{"KwhCost"}\FunctionTok{,}
    \DataTypeTok{"VALUE"}\FunctionTok{:} \StringTok{"0.257"}\FunctionTok{,}
    \DataTypeTok{"TYPE"} \FunctionTok{:} \StringTok{"compound"}\FunctionTok{,}
    \DataTypeTok{"UNITS"} \FunctionTok{:} \StringTok{"USD/KWH"}\FunctionTok{,}
    \DataTypeTok{"PROHIBIT"} \FunctionTok{:} \StringTok{"c(\textquotesingle{}NA\textquotesingle{}, \textquotesingle{}\textless{} 0\textquotesingle{})"}\FunctionTok{,}
    \DataTypeTok{"ISELEMENTOF"} \FunctionTok{:} \StringTok{""}
\FunctionTok{\}}
\end{Highlighting}
\end{Shaded}
\item
  \textbf{Gas tax (\emph{GasTax})}: Average cost per gallon of fuel of gas taxes. It should be defined in \protect\hyperlink{model_parametersjson}{model\_parameters.json} as follows:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{\{}
    \DataTypeTok{"NAME"} \FunctionTok{:} \StringTok{"GasTax"}\FunctionTok{,}
    \DataTypeTok{"VALUE"}\FunctionTok{:} \StringTok{"0.424"}\FunctionTok{,}
    \DataTypeTok{"TYPE"} \FunctionTok{:} \StringTok{"compound"}\FunctionTok{,}
    \DataTypeTok{"UNITS"} \FunctionTok{:} \StringTok{"USD/GAL"}\FunctionTok{,}
    \DataTypeTok{"PROHIBIT"} \FunctionTok{:} \StringTok{"c(\textquotesingle{}NA\textquotesingle{}, \textquotesingle{}\textless{} 0\textquotesingle{})"}\FunctionTok{,}
    \DataTypeTok{"ISELEMENTOF"} \FunctionTok{:} \StringTok{""}
\FunctionTok{\}}
\end{Highlighting}
\end{Shaded}
\item
  \textbf{Light vehicle dvmt (\emph{BaseLtVehDvmt})}: Total light vehicle daily VMT for the base year in thousands of miles. This data can be derived from a combination of \href{http://www.fhwa.dot.gov/policyinformation/hpms.cfm}{Highway Performance Monitoring System} data, Federal Highway Cost Allocation Study data, and regional data. Light vehicle daily VMT can be estimated by subtracting truck and bus VMT from total VMT provided in the Highway Performance Monitoring System (HPMS). Regional travel demand model outputs can also be used to derive these data. It should be defined in \protect\hyperlink{model_parametersjson}{model\_parameters.json} as follows:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{\{}
    \DataTypeTok{"NAME"} \FunctionTok{:} \StringTok{"BaseLtVehDvmt"}\FunctionTok{,}
    \DataTypeTok{"VALUE"}\FunctionTok{:} \StringTok{"27244"}\FunctionTok{,}
    \DataTypeTok{"TYPE"} \FunctionTok{:} \StringTok{"compound"}\FunctionTok{,}
    \DataTypeTok{"UNITS"} \FunctionTok{:} \StringTok{"MI/DAY"}\FunctionTok{,}
    \DataTypeTok{"PROHIBIT"} \FunctionTok{:} \StringTok{"c(\textquotesingle{}NA\textquotesingle{}, \textquotesingle{}\textless{} 0\textquotesingle{})"}\FunctionTok{,}
    \DataTypeTok{"ISELEMENTOF"} \FunctionTok{:} \StringTok{""}
\FunctionTok{\}}
\end{Highlighting}
\end{Shaded}
\item
  \textbf{Dvmt proportion by functional class (\emph{BaseFwyArtProp})}: The proportions of daily VMT for light vehicles that takes place on freeways and arterials (i.e., the remainder of VMT takes place on lower functional class roads for the base year. This data can be derived from a combination of \href{http://www.fhwa.dot.gov/policyinformation/hpms.cfm}{Highway Performance Monitoring System} data, Federal Highway Cost Allocation Study data, and regional data. The proportions of light vehicle daily VMT on freeways and arterials can be derived from the HPMS data. Regional travel demand model outputs can also be used to derive these data. It should be defined in \protect\hyperlink{model_parametersjson}{model\_parameters.json} as follows:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{\{}
    \DataTypeTok{"NAME"} \FunctionTok{:} \StringTok{"BaseFwyArtProp"}\FunctionTok{,}
    \DataTypeTok{"VALUE"}\FunctionTok{:} \StringTok{"0.77"}\FunctionTok{,}
    \DataTypeTok{"TYPE"} \FunctionTok{:} \StringTok{"double"}\FunctionTok{,}
    \DataTypeTok{"UNITS"} \FunctionTok{:} \StringTok{"proportion"}\FunctionTok{,}
    \DataTypeTok{"PROHIBIT"} \FunctionTok{:} \StringTok{"c(\textquotesingle{}NA\textquotesingle{}, \textquotesingle{}\textless{} 0\textquotesingle{}, \textquotesingle{}\textgreater{} 1\textquotesingle{})"}\FunctionTok{,}
    \DataTypeTok{"ISELEMENTOF"} \FunctionTok{:} \StringTok{""}
\FunctionTok{\}}
\end{Highlighting}
\end{Shaded}
\item
  \textbf{Truck vmt growth multiplier (\emph{TruckVmtGrowthMultiplier})}: Rate at which heavy truck VMT growth in relation to total regional household income growth in the region. A value of 1 indicates that heavy truck VMT grows at the same rate as total regional household income. A value less than 1 means slower growth in truck VMT, and greater than 1 means faster growth in truck VMT than total regional household income. It should be defined in \protect\hyperlink{model_parametersjson}{model\_parameters.json} as follows:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{\{}
    \DataTypeTok{"NAME"} \FunctionTok{:} \StringTok{"TruckVmtGrowthMultiplier"}\FunctionTok{,}
    \DataTypeTok{"VALUE"}\FunctionTok{:} \StringTok{"1"}\FunctionTok{,}
    \DataTypeTok{"TYPE"} \FunctionTok{:} \StringTok{"double"}\FunctionTok{,}
    \DataTypeTok{"UNITS"} \FunctionTok{:} \StringTok{"multiplier"}\FunctionTok{,}
    \DataTypeTok{"PROHIBIT"} \FunctionTok{:} \StringTok{"c(\textquotesingle{}NA\textquotesingle{}, \textquotesingle{}\textless{} 0\textquotesingle{})"}\FunctionTok{,}
    \DataTypeTok{"ISELEMENTOF"} \FunctionTok{:} \StringTok{""}
\FunctionTok{\}}
\end{Highlighting}
\end{Shaded}
\end{enumerate}

\hypertarget{fixed-input-parameters-1}{%
\subsubsection{Fixed Input Parameters}\label{fixed-input-parameters-1}}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\item
  \textbf{Carbon cost (\emph{CarbonCost})}: Average cost of green house gas emissions. It should be defined in \protect\hyperlink{model_parametersjson}{model\_parameters.json} as follows:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{\{}
    \DataTypeTok{"NAME"} \FunctionTok{:} \StringTok{"CarbonCost"}\FunctionTok{,}
    \DataTypeTok{"VALUE"}\FunctionTok{:} \StringTok{"0"}\FunctionTok{,}
    \DataTypeTok{"TYPE"} \FunctionTok{:} \StringTok{"compound"}\FunctionTok{,}
    \DataTypeTok{"UNITS"} \FunctionTok{:} \StringTok{"USD/GAL"}\FunctionTok{,}
    \DataTypeTok{"PROHIBIT"} \FunctionTok{:} \StringTok{"c(\textquotesingle{}NA\textquotesingle{}, \textquotesingle{}\textless{} 0\textquotesingle{})"}\FunctionTok{,}
    \DataTypeTok{"ISELEMENTOF"} \FunctionTok{:} \StringTok{""}
\FunctionTok{\}}
\end{Highlighting}
\end{Shaded}
\item
  \textbf{Vmt cost (\emph{VmtCost})}: Average cost of vehicle miles traveled. It should be defined in \protect\hyperlink{model_parametersjson}{model\_parameters.json} as follows:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{\{}
    \DataTypeTok{"NAME"} \FunctionTok{:} \StringTok{"VmtCost"}\FunctionTok{,}
    \DataTypeTok{"VALUE"}\FunctionTok{:} \StringTok{"0"}\FunctionTok{,}
    \DataTypeTok{"TYPE"} \FunctionTok{:} \StringTok{"compound"}\FunctionTok{,}
    \DataTypeTok{"UNITS"} \FunctionTok{:} \StringTok{"USD/GAL"}\FunctionTok{,}
    \DataTypeTok{"PROHIBIT"} \FunctionTok{:} \StringTok{"c(\textquotesingle{}NA\textquotesingle{}, \textquotesingle{}\textless{} 0\textquotesingle{})"}\FunctionTok{,}
    \DataTypeTok{"ISELEMENTOF"} \FunctionTok{:} \StringTok{""}
\FunctionTok{\}}
\end{Highlighting}
\end{Shaded}
\end{enumerate}

\hypertarget{internal-module-inputs-85}{%
\subsubsection{Internal Module Inputs}\label{internal-module-inputs-85}}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1195}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.3711}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1321}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.3774}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Package
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Module
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Outputs
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule()
\endhead
VESimHouseholds & \protect\hyperlink{createhouseholds}{CreateHouseholds} & \textbf{HhId} & Unique household ID \\
VESimHouseholds & \protect\hyperlink{createhouseholds}{CreateHouseholds} & \textbf{HhSize} & Number of persons \\
VESimHouseholds & \protect\hyperlink{createhouseholds}{CreateHouseholds} & \textbf{Age0to14} & Persons in 0 to 14 year old age group \\
VESimHouseholds & \protect\hyperlink{createhouseholds}{CreateHouseholds} & \textbf{Age15to19} & Persons in 15 to 19 year old age group \\
VESimHouseholds & \protect\hyperlink{createhouseholds}{CreateHouseholds} & \textbf{Age20to29} & Persons in 20 to 29 year old age group \\
VESimHouseholds & \protect\hyperlink{createhouseholds}{CreateHouseholds} & \textbf{Age30to54} & Persons in 30 to 54 year old age group \\
VESimHouseholds & \protect\hyperlink{createhouseholds}{CreateHouseholds} & \textbf{Age55to64} & Persons in 55 to 64 year old age group \\
VESimHouseholds & \protect\hyperlink{createhouseholds}{CreateHouseholds} & \textbf{Age65Plus} & Persons in 65 or older age group \\
VESimHouseholds & \protect\hyperlink{predictincome}{PredictIncome} & \textbf{Income} & Total annual household (non-qroup \& group quarters) income in year 1999 dollars \\
VELandUse & \protect\hyperlink{calculatebaseplacetypes}{CalculateBasePlaceTypes} & \textbf{UrbanIncome} & Total income by place types \\
VELandUse & \protect\hyperlink{calculatefutureplacetypes}{CalculateFuturePlaceTypes} & \textbf{HhPlaceTypes} & A place type as assigned to the households \\
VELandUse & \protect\hyperlink{calculatefutureplacetypes}{CalculateFuturePlaceTypes} & \textbf{UrbanIncome} & Total income by place types \\
VETransportSupply & \protect\hyperlink{createfutureaccessibility}{CreateFutureAccessibility} & \textbf{FwyLaneMiPCFuture} & Ratio of urbanized area freeway and expressway lane-miles to urbanized area population \\
VETransportSupply & \protect\hyperlink{createfutureaccessibility}{CreateFutureAccessibility} & \textbf{TranRevMiPCFuture} & Transit revenue miles per capita for the region \\
VEHouseholdVehicles & \protect\hyperlink{assignvehiclefeaturesfuture}{AssignVehicleFeaturesFuture} & \textbf{VehIdFuture} & Unique vehicle ID \\
VEHouseholdVehicles & \protect\hyperlink{assignvehiclefeaturesfuture}{AssignVehicleFeaturesFuture} & \textbf{TypeFuture} & Vehicle body type: Auto = automobile, LtTrk = light trucks (i.e.~pickup, SUV, Van) \\
VEHouseholdVehicles & \protect\hyperlink{assignvehiclefeaturesfuture}{AssignVehicleFeaturesFuture} & \textbf{MileageFuture} & Mileage of vehicles (automobiles and light truck) \\
VEHouseholdVehicles & \protect\hyperlink{assignvehiclefeaturesfuture}{AssignVehicleFeaturesFuture} & \textbf{DvmtPropFuture} & Proportion of average vehicle DVMT \\
VEHouseholdVehicles & \protect\hyperlink{assignvehiclefeaturesfuture}{AssignVehicleFeaturesFuture} & \textbf{VehiclesFuture} & Number of automobiles and light trucks owned or leased by the household \\
VEHouseholdVehicles & \protect\hyperlink{assignvehiclefeaturesfuture}{AssignVehicleFeaturesFuture} & \textbf{AgeFuture} & Age of the vehicles \\
\bottomrule()
\end{longtable}

\hypertarget{module-outputs-89}{%
\subsubsection{Module Outputs}\label{module-outputs-89}}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\item
  \textbf{TruckDvmtFuture}: Average daily vehicle miles traveled by trucks estimated using model estimations of future year data
\item
  \textbf{DvmtFuture (bzones)}: Average daily vehicle miles traveled by place types estimated using model estimations of future year data
\item
  \textbf{DvmtFuture (households)}: Average daily vehicle miles traveled by household estimated using model estimations of future year data
\item
  \textbf{DvmtFuture (vehicles)}: Average daily vehicle miles traveled by each vehicle estimated using model estimations of future year data
\item
  \textbf{EvDvmtFuture (bzones)}: Average daily electric vehicle miles traveled by place types estimated using model estimations of future year data
\item
  \textbf{EvDvmtFuture (vehicles)}: Average daily electric vehicle miles traveled by each vehicle estimated using model estimations of future year data
\item
  \textbf{HcDvmtFuture (bzones)}: Average daily vehicle (ICE) miles traveled by place types estimated using model estimations of future year data
\item
  \textbf{HcDvmtFuture (vehicles)}: Average daily vehicle (ICE) miles traveled by each vehicle estimated using model estimations of future year data
\item
  \textbf{FuelGallonsFuture}: Average daily fuel consumption in gallons by each household estimated using model estimations of future year data
\item
  \textbf{FuelCo2eFuture}: Average daily Co2 equivalent greenhouse gas emissions by each household due to traditional fuel consumption estimated using model estimations of future year data
\item
  \textbf{ElecKwhFuture}: Average daily power consumption in kilowatt-hours by each household estimated using model estimations of future year data
\item
  \textbf{ElecCo2eFuture}: Average daily Co2 equivalent greenhouse gas emissions by each household due to power consumption estimated using model estimations of future year data
\item
  \textbf{MpKwhFuture}: Power efficiency of electric vehicles by each vehicle estimated using model estimations of future year data
\item
  \textbf{PowertrainFuture}: Powertrain of each vehicle estimated using model estimations of future year data
\item
  \textbf{DailyParkingCostFuture}: Average daily parking cost by each household estimated using model estimations of future year data
\item
  \textbf{FutureCostPerMileFuture}: Total cost per mile for future year for each household estimated using model estimations of future year data

  Top{]}(\#contents) \protect\hyperlink{definitions}{Definitions} \protect\hyperlink{inputs-and-outputs}{Inputs/Outputs}
\end{enumerate}

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\hypertarget{calculatecongestionbase-1}{%
\subsection{CalculateCongestionBase}\label{calculatecongestionbase-1}}

This module calculates the amount of congestion using estimated data. Auto, and light truck VMT, truck VMT and bus VMT are allocated to freeways, arterials, and other roadways. Truck and bus VMT are allocated based on mode-specific data, and auto and light truck VMT are allocated based on a combination of factors and a model that is sensitive to the relative supplies of freeway and arterial lane miles. System-wide ratios of VMT to lane miles for freeways and arterials are used to allocate VMT to congestion levels using congestion levels defined by the Texas Transportation Institute for the Urban Mobility Report. Each freeway and arterial congestion level is associated with an average trip speed for conditions that do and do not include ITS treatment for incident management on the roadway. Overall average speeds by congestion level are calculated based on input assumptions about the degree of incident management. Speed vs.~fuel efficiency relationships for light vehicles, trucks, and buses are used to adjust the fleet fuel efficiency averages computed for the region.

\hypertarget{user-input-files-88}{%
\subsubsection{User Input Files}\label{user-input-files-88}}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\item
  \textbf{Percent road miles with ITS treatment (\emph{azone\_its\_prop.csv})}: This file is an estimate of the proportion of road miles that have improvements which reduce incidents through ITS treatments in both the base and future years. Values entered should be between 0 and 1, with 1 indicating that 100\% of road miles are treated.
  The ITS policy measures the effects of incident management supported by ITS. The ITS table is used to inform the congestion model and the travel demand model. The model uses the mean speeds with and without incidents to compute an overall average speed by road type and congestion level providing a simple level of sensitivity to the potential effects of incident management programs on delay and emissions.
  The ITS treatments are evaluated only on freeways and arterials. The ITS treatments that can be evaluated are those that the analyst considers will reduce non-recurring congestion due to incidents. This policy does not deal with other operational improvements such as signal coordination, or temporary capacity increases such as allowing shoulder use in the peak.
  Here is a snapshot of the file:

  \begin{longtable}[]{@{}lll@{}}
  \toprule()
  Geo & Year & ITS \\
  \midrule()
  \endhead
  Multnomah & 2005 & 0 \\
  Multnomah & 2035 & 0 \\
  \bottomrule()
  \end{longtable}
\item
  \textbf{Truck and bus vmt (\emph{region\_truck\_bus\_vmt.csv})}: This file contains the region's proportion of VMT by truck and bus as well as the distribution of that VMT across functional classes (\emph{freeway}, \emph{arterial}, \emph{other}). The file includes one row for bus VMT data and one row for Truck VMT data. It should be noted that it is not necessary to enter values in the \textbf{PropVmt} column for \textbf{BusVmt} as this is calculated using the values in the \textbf{\emph{transportation\_supply.csv}} user input file. The truck VMT proportion (PropVMT column, TruckVMT row) can be obtained from \href{http://www.fhwa.dot.gov/policyinformation/hpms.cfm}{Highway Performance Monitoring System} data and local sources or the regional travel demand model if one exists.
  The proportions of VMT by functional class can be derived from the Federal Highway Cost Allocation Study and data from transit operators. The Federal Highway Cost Allocation Study (Table II-6, 1997 Federal Highway Cost Allocation Study Final Report, \href{http://www.fhwa.dot.gov/policy/hcas/final/two.cfm}{Chapter II} is used to calculate the average proportion of truck VMT by functional class. Data from transit authorities are used to calculate the proportions of bus VMT by urban area functional class.
  Here is a snapshot of the file:

  \begin{longtable}[]{@{}lllll@{}}
  \toprule()
  Type & PropVmt & Fwy & Art & Other \\
  \midrule()
  \endhead
  BusVmt & 0 & 0.15 & 0.591854 & 0.258146 \\
  TruckVmt & 0.08 & 0.452028 & 0.398645 & 0.149327 \\
  \bottomrule()
  \end{longtable}
\end{enumerate}

\hypertarget{user-input-parameters-9}{%
\subsubsection{User Input Parameters}\label{user-input-parameters-9}}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\item
  \textbf{Light vehicle dvmt (\emph{BaseLtVehDvmt})}: Total light vehicle daily VMT for the base year in thousands of miles. This data can be derived from a combination of \href{http://www.fhwa.dot.gov/policyinformation/hpms.cfm}{Highway Performance Monitoring System} data, Federal Highway Cost Allocation Study data, and regional data. Light vehicle daily VMT can be estimated by subtracting truck and bus VMT from total VMT provided in the Highway Performance Monitoring System (HPMS). Regional travel demand model outputs can also be used to derive these data. It should be defined in \protect\hyperlink{model_parametersjson}{model\_parameters.json} as follows:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{\{}
    \DataTypeTok{"NAME"} \FunctionTok{:} \StringTok{"BaseLtVehDvmt"}\FunctionTok{,}
    \DataTypeTok{"VALUE"}\FunctionTok{:} \StringTok{"27244"}\FunctionTok{,}
    \DataTypeTok{"TYPE"} \FunctionTok{:} \StringTok{"compound"}\FunctionTok{,}
    \DataTypeTok{"UNITS"} \FunctionTok{:} \StringTok{"MI/DAY"}\FunctionTok{,}
    \DataTypeTok{"PROHIBIT"} \FunctionTok{:} \StringTok{"c(\textquotesingle{}NA\textquotesingle{}, \textquotesingle{}\textless{} 0\textquotesingle{})"}\FunctionTok{,}
    \DataTypeTok{"ISELEMENTOF"} \FunctionTok{:} \StringTok{""}
\FunctionTok{\}}
\end{Highlighting}
\end{Shaded}
\item
  \textbf{Dvmt proportion by functional class (\emph{BaseFwyArtProp})}: The proportions of daily VMT for light vehicles that takes place on freeways and arterials (i.e., the remainder of VMT takes place on lower functional class roads for the base year. This data can be derived from a combination of \href{http://www.fhwa.dot.gov/policyinformation/hpms.cfm}{Highway Performance Monitoring System} data, Federal Highway Cost Allocation Study data, and regional data. The proportions of light vehicle daily VMT on freeways and arterials can be derived from the HPMS data. Regional travel demand model outputs can also be used to derive these data. It should be defined in \protect\hyperlink{model_parametersjson}{model\_parameters.json} as follows:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{\{}
    \DataTypeTok{"NAME"} \FunctionTok{:} \StringTok{"BaseFwyArtProp"}\FunctionTok{,}
    \DataTypeTok{"VALUE"}\FunctionTok{:} \StringTok{"0.77"}\FunctionTok{,}
    \DataTypeTok{"TYPE"} \FunctionTok{:} \StringTok{"double"}\FunctionTok{,}
    \DataTypeTok{"UNITS"} \FunctionTok{:} \StringTok{"proportion"}\FunctionTok{,}
    \DataTypeTok{"PROHIBIT"} \FunctionTok{:} \StringTok{"c(\textquotesingle{}NA\textquotesingle{}, \textquotesingle{}\textless{} 0\textquotesingle{}, \textquotesingle{}\textgreater{} 1\textquotesingle{})"}\FunctionTok{,}
    \DataTypeTok{"ISELEMENTOF"} \FunctionTok{:} \StringTok{""}
\FunctionTok{\}}
\end{Highlighting}
\end{Shaded}
\item
  \textbf{Transit revenue adjustment factor (\emph{TranRevMiAdjFactor})}: Factor to convert transit revenue miles (i.e.~miles run in service on routes) to total transit vehicle miles operated to account for vehicle miles run while deadheading from depots to route endpoints. It should be defined in \protect\hyperlink{model_parametersjson}{model\_parameters.json} as follows:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{\{}
    \DataTypeTok{"NAME"} \FunctionTok{:} \StringTok{"TranRevMiAdjFactor"}\FunctionTok{,}
    \DataTypeTok{"VALUE"}\FunctionTok{:} \StringTok{"1.12"}\FunctionTok{,}
    \DataTypeTok{"TYPE"} \FunctionTok{:} \StringTok{"double"}\FunctionTok{,}
    \DataTypeTok{"UNITS"} \FunctionTok{:} \StringTok{"multiplier"}\FunctionTok{,}
    \DataTypeTok{"PROHIBIT"} \FunctionTok{:} \StringTok{"c(\textquotesingle{}NA\textquotesingle{}, \textquotesingle{}\textless{} 0\textquotesingle{})"}\FunctionTok{,}
    \DataTypeTok{"ISELEMENTOF"} \FunctionTok{:} \StringTok{""}
\FunctionTok{\}}
\end{Highlighting}
\end{Shaded}
\end{enumerate}

\hypertarget{internal-module-inputs-86}{%
\subsubsection{Internal Module Inputs}\label{internal-module-inputs-86}}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1141}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.3691}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1141}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.4027}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Package
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Module
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Outputs
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule()
\endhead
VELandUse & \protect\hyperlink{calculatebaseplacetypes}{CalculateBasePlaceTypes} & \textbf{UrbanPop} & Total population by place types \\
VELandUse & \protect\hyperlink{calculatefutureplacetypes}{CalculateFuturePlaceTypes} & \textbf{UrbanPop} & Total population by place types \\
VETransportSupply & \protect\hyperlink{createbaseaccessibility}{CreateBaseAccessibility} & \textbf{FwyLaneMiPC} & Ratio of urbanized area freeway and expressway lane-miles to urbanized area population \\
VETransportSupply & \protect\hyperlink{createbaseaccessibility}{CreateBaseAccessibility} & \textbf{ArtLaneMiPC} & Ratio of urbanized area arterial lane-miles to urbanized area population \\
VETransportSupply & \protect\hyperlink{createbaseaccessibility}{CreateBaseAccessibility} & \textbf{TranRevMiPC} & Transit revenue miles per capita for the region \\
VETransportSupply & \protect\hyperlink{createbaseaccessibility}{CreateBaseAccessibility} & \textbf{BusRevMi} & Bus revenue miles for the region \\
VETransportSupply & \protect\hyperlink{createbaseaccessibility}{CreateBaseAccessibility} & \textbf{RailRevMi} & Rail revenue miles for the region \\
VEHouseholdTravel & \protect\hyperlink{calculatetraveldemand}{CalculateTravelDemand} & \textbf{TruckDvmt} & Average daily vehicle miles traveled by trucks \\
VEHouseholdTravel & \protect\hyperlink{calculatetraveldemand}{CalculateTravelDemand} & \textbf{Dvmt (bzones)} & Average daily vehicle miles traveled by place types \\
\bottomrule()
\end{longtable}

\hypertarget{module-outputs-90}{%
\subsubsection{Module Outputs}\label{module-outputs-90}}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\item
  \textbf{LtVehDvmt}: Daily vehicle miles travelled by light vehicles in the region
\item
  \textbf{BusDvmt}: Daily vehicle miles travelled by bus in the region
\item
  \textbf{MpgAdjLtVeh}: Average fuel efficiency adjustment for light vehicles in the region
\item
  \textbf{MpgAdjBus}: Average fuel efficiency adjustment for buses in the region
\item
  \textbf{MpgAdjTruck}: Average fuel efficiency adjustment for heavy trucks in the region
\item
  \textbf{MpKwhAdjLtVehEv}: Average power efficiency adjustment for electric light vehicles in the region
\item
  \textbf{MpKwhAdjLtVehHev}: Average power efficiency adjustment for hybrid electric light vehicles in the region
\item
  \textbf{MpKwhAdjBus}: Average power efficiency adjustment for buses in the region
\item
  \textbf{MpKwhAdjTruck}: Average power efficiency adjustment for heavy trucks in the region
\item
  \textbf{VehHrLtVeh}: Total vehicle travel time for light vehicles in the region
\item
  \textbf{VehHrBus}: Total vehicle travel time for buses in the region
\item
  \textbf{VehHrTruck}: Total vehicle travel time for heavy trucks in the region
\item
  \textbf{AveSpeedLtVeh}: Average speed for light vehicles in the region
\item
  \textbf{AveSpeedBus}: Average speed for buses in the region
\item
  \textbf{AveSpeedTruck}: Average speed for heavy trucks in the region
\item
  \textbf{FfVehHrLtVeh}: Average free-flow travel time for light vehicles in the region
\item
  \textbf{FfVehHrBus}: Average free-flow travel time for buses in the region
\item
  \textbf{FfVehHrTruck}: Average free-flow travel time for heavy trucks in the region
\item
  \textbf{DelayVehHrLtVeh}: Total vehicle delay time for light vehicles in the region
\item
  \textbf{DelayVehHrBus}: Total vehicle delay time for buses in the region
\item
  \textbf{DelayVehHrTruck}: Total vehicle delay time for heavy trucks in the region
\item
  \textbf{MpgAdjHh}: Average fuel efficiency adjustment for households in the region
\item
  \textbf{MpKwhAdjEvHh}: Average power efficiency adjustment for electric vehicles for households in the region
\item
  \textbf{MpKwhAdjHevHh}: Average power efficiency adjustment for hybrid electric vehicles for households in the region
\item
  \textbf{LtVehDvmtFactor}: Light vehicle Dvmt factor adjustment factor

  Top{]}(\#contents) \protect\hyperlink{definitions}{Definitions} \protect\hyperlink{inputs-and-outputs}{Inputs/Outputs}
\end{enumerate}

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\hypertarget{calculatecongestionfuture-1}{%
\subsection{CalculateCongestionFuture}\label{calculatecongestionfuture-1}}

This module is similar to \protect\hyperlink{calculatecongestionbase}{CalculateCongestionBase} module but uses model estimation of future transportation supply as the basis of calculations.

\hypertarget{user-input-files-89}{%
\subsubsection{User Input Files}\label{user-input-files-89}}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\item
  \textbf{Percent road miles with ITS treatment (\emph{azone\_its\_prop.csv})}: This file is an estimate of the proportion of road miles that have improvements which reduce incidents through ITS treatments in both the base and future years. Values entered should be between 0 and 1, with 1 indicating that 100\% of road miles are treated.
  The ITS policy measures the effects of incident management supported by ITS. The ITS table is used to inform the congestion model and the travel demand model. The model uses the mean speeds with and without incidents to compute an overall average speed by road type and congestion level providing a simple level of sensitivity to the potential effects of incident management programs on delay and emissions.
  The ITS treatments are evaluated only on freeways and arterials. The ITS treatments that can be evaluated are those that the analyst considers will reduce non-recurring congestion due to incidents. This policy does not deal with other operational improvements such as signal coordination, or temporary capacity increases such as allowing shoulder use in the peak.
  Here is a snapshot of the file:

  \begin{longtable}[]{@{}lll@{}}
  \toprule()
  Geo & Year & ITS \\
  \midrule()
  \endhead
  Multnomah & 2005 & 0 \\
  Multnomah & 2035 & 0 \\
  \bottomrule()
  \end{longtable}
\item
  \textbf{Truck and bus vmt (\emph{region\_truck\_bus\_vmt.csv})}: This file contains the region's proportion of VMT by truck and bus as well as the distribution of that VMT across functional classes (\emph{freeway}, \emph{arterial}, \emph{other}). The file includes one row for bus VMT data and one row for Truck VMT data. It should be noted that it is not necessary to enter values in the \textbf{PropVmt} column for \textbf{BusVmt} as this is calculated using the values in the \textbf{\emph{transportation\_supply.csv}} user input file. The truck VMT proportion (PropVMT column, TruckVMT row) can be obtained from \href{http://www.fhwa.dot.gov/policyinformation/hpms.cfm}{Highway Performance Monitoring System} data and local sources or the regional travel demand model if one exists.
  The proportions of VMT by functional class can be derived from the Federal Highway Cost Allocation Study and data from transit operators. The Federal Highway Cost Allocation Study (Table II-6, 1997 Federal Highway Cost Allocation Study Final Report, \href{http://www.fhwa.dot.gov/policy/hcas/final/two.cfm}{Chapter II} is used to calculate the average proportion of truck VMT by functional class. Data from transit authorities are used to calculate the proportions of bus VMT by urban area functional class.
  Here is a snapshot of the file:

  \begin{longtable}[]{@{}lllll@{}}
  \toprule()
  Type & PropVmt & Fwy & Art & Other \\
  \midrule()
  \endhead
  BusVmt & 0 & 0.15 & 0.591854 & 0.258146 \\
  TruckVmt & 0.08 & 0.452028 & 0.398645 & 0.149327 \\
  \bottomrule()
  \end{longtable}
\end{enumerate}

\hypertarget{user-input-parameters-10}{%
\subsubsection{User Input Parameters}\label{user-input-parameters-10}}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\item
  \textbf{Light vehicle dvmt (\emph{BaseLtVehDvmt})}: Total light vehicle daily VMT for the base year in thousands of miles. This data can be derived from a combination of \href{http://www.fhwa.dot.gov/policyinformation/hpms.cfm}{Highway Performance Monitoring System} data, Federal Highway Cost Allocation Study data, and regional data. Light vehicle daily VMT can be estimated by subtracting truck and bus VMT from total VMT provided in the Highway Performance Monitoring System (HPMS). Regional travel demand model outputs can also be used to derive these data. It should be defined in \protect\hyperlink{model_parametersjson}{model\_parameters.json} as follows:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{\{}
    \DataTypeTok{"NAME"} \FunctionTok{:} \StringTok{"BaseLtVehDvmt"}\FunctionTok{,}
    \DataTypeTok{"VALUE"}\FunctionTok{:} \StringTok{"27244"}\FunctionTok{,}
    \DataTypeTok{"TYPE"} \FunctionTok{:} \StringTok{"compound"}\FunctionTok{,}
    \DataTypeTok{"UNITS"} \FunctionTok{:} \StringTok{"MI/DAY"}\FunctionTok{,}
    \DataTypeTok{"PROHIBIT"} \FunctionTok{:} \StringTok{"c(\textquotesingle{}NA\textquotesingle{}, \textquotesingle{}\textless{} 0\textquotesingle{})"}\FunctionTok{,}
    \DataTypeTok{"ISELEMENTOF"} \FunctionTok{:} \StringTok{""}
\FunctionTok{\}}
\end{Highlighting}
\end{Shaded}
\item
  \textbf{Dvmt proportion by functional class (\emph{BaseFwyArtProp})}: The proportions of daily VMT for light vehicles that takes place on freeways and arterials (i.e., the remainder of VMT takes place on lower functional class roads for the base year. This data can be derived from a combination of \href{http://www.fhwa.dot.gov/policyinformation/hpms.cfm}{Highway Performance Monitoring System} data, Federal Highway Cost Allocation Study data, and regional data. The proportions of light vehicle daily VMT on freeways and arterials can be derived from the HPMS data. Regional travel demand model outputs can also be used to derive these data. It should be defined in \protect\hyperlink{model_parametersjson}{model\_parameters.json} as follows:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{\{}
    \DataTypeTok{"NAME"} \FunctionTok{:} \StringTok{"BaseFwyArtProp"}\FunctionTok{,}
    \DataTypeTok{"VALUE"}\FunctionTok{:} \StringTok{"0.77"}\FunctionTok{,}
    \DataTypeTok{"TYPE"} \FunctionTok{:} \StringTok{"double"}\FunctionTok{,}
    \DataTypeTok{"UNITS"} \FunctionTok{:} \StringTok{"proportion"}\FunctionTok{,}
    \DataTypeTok{"PROHIBIT"} \FunctionTok{:} \StringTok{"c(\textquotesingle{}NA\textquotesingle{}, \textquotesingle{}\textless{} 0\textquotesingle{}, \textquotesingle{}\textgreater{} 1\textquotesingle{})"}\FunctionTok{,}
    \DataTypeTok{"ISELEMENTOF"} \FunctionTok{:} \StringTok{""}
\FunctionTok{\}}
\end{Highlighting}
\end{Shaded}
\item
  \textbf{Transit revenue adjustment factor (\emph{TranRevMiAdjFactor})}: Factor to convert transit revenue miles (i.e.~miles run in service on routes) to total transit vehicle miles operated to account for vehicle miles run while deadheading from depots to route endpoints. It should be defined in \protect\hyperlink{model_parametersjson}{model\_parameters.json} as follows:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{\{}
    \DataTypeTok{"NAME"} \FunctionTok{:} \StringTok{"TranRevMiAdjFactor"}\FunctionTok{,}
    \DataTypeTok{"VALUE"}\FunctionTok{:} \StringTok{"1.12"}\FunctionTok{,}
    \DataTypeTok{"TYPE"} \FunctionTok{:} \StringTok{"double"}\FunctionTok{,}
    \DataTypeTok{"UNITS"} \FunctionTok{:} \StringTok{"multiplier"}\FunctionTok{,}
    \DataTypeTok{"PROHIBIT"} \FunctionTok{:} \StringTok{"c(\textquotesingle{}NA\textquotesingle{}, \textquotesingle{}\textless{} 0\textquotesingle{})"}\FunctionTok{,}
    \DataTypeTok{"ISELEMENTOF"} \FunctionTok{:} \StringTok{""}
\FunctionTok{\}}
\end{Highlighting}
\end{Shaded}
\end{enumerate}

\hypertarget{internal-module-inputs-87}{%
\subsubsection{Internal Module Inputs}\label{internal-module-inputs-87}}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1235}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.3642}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1420}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.3704}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Package
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Module
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Outputs
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule()
\endhead
VELandUse & \protect\hyperlink{calculatebaseplacetypes}{CalculateBasePlaceTypes} & \textbf{UrbanPop} & Total population by place types \\
VELandUse & \protect\hyperlink{calculatefutureplacetypes}{CalculateFuturePlaceTypes} & \textbf{UrbanPop} & Total population by place types \\
VETransportSupply & \protect\hyperlink{createfutureaccessibility}{CreateFutureAccessibility} & \textbf{FwyLaneMiPCFuture} & Ratio of urbanized area freeway and expressway lane-miles to urbanized area population calculated using future (estimated) data \\
VETransportSupply & \protect\hyperlink{createfutureaccessibility}{CreateFutureAccessibility} & \textbf{ArtLaneMiPCFuture} & Ratio of urbanized area arterial lane-miles to urbanized area population calculated using future (estimated) data \\
VETransportSupply & \protect\hyperlink{createfutureaccessibility}{CreateFutureAccessibility} & \textbf{TranRevMiPCFuture} & Transit revenue miles per capita for the region calculated using future (estimated) data \\
VETransportSupply & \protect\hyperlink{createfutureaccessibility}{CreateFutureAccessibility} & \textbf{BusRevMiFuture} & Bus revenue miles for the region calculated using future (estimated) data \\
VETransportSupply & \protect\hyperlink{createfutureaccessibility}{CreateFutureAccessibility} & \textbf{RailRevMiFuture} & Rail revenue miles for the region calculated using future (estimated) data \\
VEHouseholdTravel & \protect\hyperlink{calculatetraveldemandfuture}{CalculateTravelDemandFuture} & \textbf{TruckDvmtFuture} & Average daily vehicle miles traveled by trucks estimated using model estimations of future year data \\
VEHouseholdTravel & \protect\hyperlink{calculatetraveldemandfuture}{CalculateTravelDemandFuture} & \textbf{DvmtFuture (bzones)} & Average daily vehicle miles traveled by place types estimated using model estimations of future year data \\
VETransportSupplyUse & \protect\hyperlink{calculatecongestionbase}{CalculateCongestionBase} & \textbf{LtVehDvmtFactor} & Light vehicle Dvmt factor adjustment factor \\
\bottomrule()
\end{longtable}

\hypertarget{module-outputs-91}{%
\subsubsection{Module Outputs}\label{module-outputs-91}}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  \textbf{LtVehDvmtFuture}: Daily vehicle miles travelled by light vehicles in the region calculated using model estimation of future data
\item
  \textbf{BusDvmtFuture}: Daily vehicle miles travelled by bus in the region calculated using model estimation of future data
\item
  \textbf{MpgAdjLtVehFuture}: Average fuel efficiency adjustment for light vehicles in the region calculated using model estimation of future data
\item
  \textbf{MpgAdjBusFuture}: Average fuel efficiency adjustment for buses in the region calculated using model estimation of future data
\item
  \textbf{MpgAdjTruckFuture}: Average fuel efficiency adjustment for heavy trucks in the region calculated using model estimation of future data
\item
  \textbf{VehHrLtVehFuture}: Total vehicle travel time for light vehicles in the region calculated using model estimation of future data
\item
  \textbf{VehHrBusFuture}: Total vehicle travel time for buses in the region calculated using model estimation of future data
\item
  \textbf{VehHrTruckFuture}: Total vehicle travel time for heavy trucks in the region calculated using model estimation of future data
\item
  \textbf{AveSpeedLtVehFuture}: Average speed for light vehicles in the region calculated using model estimation of future data
\item
  \textbf{AveSpeedBusFuture}: Average speed for buses in the region calculated using model estimation of future data
\item
  \textbf{AveSpeedTruckFuture}: Average speed for heavy trucks in the region calculated using model estimation of future data
\item
  \textbf{FfVehHrLtVehFuture}: Average free-flow travel time for light vehicles in the region calculated using model estimation of future data
\item
  \textbf{FfVehHrBusFuture}: Average free-flow travel time for buses in the region calculated using model estimation of future data
\item
  \textbf{FfVehHrTruckFuture}: Average free-flow travel time for heavy trucks in the region calculated using model estimation of future data
\item
  \textbf{DelayVehHrLtVehFuture}: Total vehicle delay time for light vehicles in the region calculated using model estimation of future data
\item
  \textbf{DelayVehHrBusFuture}: Total vehicle delay time for buses in the region calculated using model estimation of future data
\item
  \textbf{DelayVehHrTruckFuture}: Total vehicle delay time for heavy trucks in the region calculated using model estimation of future data
\item
  \textbf{MpgAdjHhFuture}: Average fuel efficiency adjustment for households in the region calculated using model estimation of future data
\item
  \textbf{LtVehDvmtFactorFuture}: Light vehicle Dvmt factor adjustment factor calculated using model estimation of future data
\end{enumerate}

\protect\hyperlink{contents}{Top} \protect\hyperlink{definitions}{Definitions} \protect\hyperlink{inputs-and-outputs}{Inputs/Outputs}

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\hypertarget{calculateinduceddemand-1}{%
\subsection{CalculateInducedDemand}\label{calculateinduceddemand-1}}

Induced demand is calculated for changes in roadway supply in the near term as a function of speed, based on potential mode and route shifts to produce changes in VMT and in the longer term to include changes in vehicle ownership, still as a function of speed. This model does not include induced demand as a result of changes in growth that may occur as part of a smart growth scenario because the evidence is limited empirical evidence.

\hypertarget{user-input-files-90}{%
\subsubsection{User Input Files}\label{user-input-files-90}}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\item
  \textbf{Auto and transit trips per capita (\emph{region\_trips\_per\_cap.csv})}: This file contains regional averages for auto and transit trips per day for the base year.

  \begin{itemize}
  \tightlist
  \item
    \textbf{Auto} is the regional average of auto trips per capita, including drive alone and shared ride travel. This data can be derived from the \href{https://nhts.ornl.gov/}{National Household Travel Survey} by region or from a local household travel survey or regional travel demand forecasting model.
  \item
    \textbf{Transit} is the regional average of transit trips per capita, including walk and drive access to transit. This data can be derived from the \href{https://www.transit.dot.gov/ntd/ntd-data}{National Transit Database} where the annual database contains a ``service'' table that has annual transit trip data for each transit operator or from a local household travel survey or regional travel demand forecasting model.
  \end{itemize}

  Here is a snapshot of the files:

  \begin{longtable}[]{@{}ll@{}}
  \toprule()
  Mode & Trips \\
  \midrule()
  \endhead
  Auto & 3.2 \\
  Transit & 0.4 \\
  \bottomrule()
  \end{longtable}
\item
  \textbf{Place type adjustments to travel demand (\emph{model\_place\_type\_elasticities.csv})}: This file contains elasticities for four performance metrics:

  \begin{itemize}
  \tightlist
  \item
    \textbf{VMT} -- Following the estimate of travel demand that incorporates induced demand, an adjustment is made to travel demand that accounts for changes in growth by the place types that are used in the model to describe urban form. These changes are interpreted as changes in design (intersection street density), accessibility (job accessibility by auto), distance to transit (nearest transit stop), density (population density) and diversity (land use mix). The effect on travel demand is determined as changes in VMT by these urban form categories, as shown in the table below. The elasticities that are shown in the table are multiplied by the D values for each place type. The D values are proportion values for each place type that are relative to the regional average, which is set to 1.0.
  \item
    \textbf{VehicleTrips} -- The change in the number of vehicle trips is calculated using a set of elasticities from Index 4D Values (2001) that pivots from the current number of vehicle trips per capita based on the scenario's allocation of growth by place type. The elasticities shown in the table are applied to D values, which are proportional values for each place type that are relative to a regional average for that D value that is set to 1.0. The model reports the additional number of trips caused by the growth assumed in the scenario and not the regional total.
  \item
    \textbf{TransitTrips} -- The change in the number of transit trips is calculated using a set of elasticities from Index 4D Values (2001) that pivots from the current number of transit trips per capita based on the scenario's allocation of growth by place type. The elasticities shown in the table are applied to D values, which are proportional values for each place type that are relative to a regional average for that D value that is set to 1.0. The model reports the additional number of trips caused by the growth assumed in the scenario and not the regional total.
  \item
    \textbf{Walking} -- The elasticities shown in the table are applied to D values, which are proportional values for each place type that are relative to a regional average for that D value that is set to 1.0. The product of the elasticity and D value is applied to the place type growth quantities for the scenario to calculated the percentage increase or decrease in walking for new residents in the region relative to a the current place type distribution.
  \end{itemize}

  Here is a snapshot of the file:

  \begin{longtable}[]{@{}
    >{\raggedright\arraybackslash}p{(\columnwidth - 8\tabcolsep) * \real{0.3793}}
    >{\raggedright\arraybackslash}p{(\columnwidth - 8\tabcolsep) * \real{0.0862}}
    >{\raggedright\arraybackslash}p{(\columnwidth - 8\tabcolsep) * \real{0.2069}}
    >{\raggedright\arraybackslash}p{(\columnwidth - 8\tabcolsep) * \real{0.2069}}
    >{\raggedright\arraybackslash}p{(\columnwidth - 8\tabcolsep) * \real{0.1207}}@{}}
  \toprule()
  \begin{minipage}[b]{\linewidth}\raggedright
  Parameters
  \end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
  VMT
  \end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
  VehicleTrips
  \end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
  TransitTrips
  \end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
  Walking
  \end{minipage} \\
  \midrule()
  \endhead
  Density & -0.04 & -0.043 & 0.07 & 0.07 \\
  Diversity & -0.09 & -0.051 & 0.12 & 0.15 \\
  Design & -0.12 & -0.031 & 0.23 & 0.39 \\
  Regional\_Accessibility & -0.2 & -0.036 & 0 & 0 \\
  Distance\_to\_Transit & -0.05 & 0 & 0.29 & 0.15 \\
  \bottomrule()
  \end{longtable}
\item
  \textbf{Place type adjustments to travel demand (\emph{model\_place\_type\_relative\_values.csv})}: This file contains the \emph{D} values, which are proportional values for each of the 13 place types (\emph{Bzones}) that are relative to a regional average, for each of the five Ds used in VERPAT - design (intersection street density), accessibility (job accessibility by auto), distance to transit (nearest transit stop), density (population density) and diversity (land use mix).
  Here is a snapshot of the file:

  \begin{longtable}[]{@{}
    >{\raggedright\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.0735}}
    >{\raggedright\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.1029}}
    >{\raggedright\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.1324}}
    >{\raggedright\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.0882}}
    >{\raggedright\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.3235}}
    >{\raggedright\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.2794}}@{}}
  \toprule()
  \begin{minipage}[b]{\linewidth}\raggedright
  Geo
  \end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
  Density
  \end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
  Diversity
  \end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
  Design
  \end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
  Regional\_Accessibility
  \end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
  Distance\_to\_Transit
  \end{minipage} \\
  \midrule()
  \endhead
  Rur & 0.5 & 0.5 & 0.5 & 0.5 & 0.5 \\
  Sub\_R & 0.75 & 0.75 & 0.75 & 0.75 & 0.75 \\
  Sub\_E & 0.75 & 0.75 & 0.75 & 0.75 & 0.75 \\
  Sub\_M & 1 & 1 & 1 & 0.75 & 0.75 \\
  Sub\_T & 1 & 1 & 1 & 1 & 1 \\
  CIC\_R & 1.2 & 1.2 & 1.2 & 1.2 & 1 \\
  CIC\_E & 1.2 & 1.2 & 1.2 & 1.2 & 1 \\
  CIC\_M & 1.2 & 1.2 & 1.2 & 1.2 & 1 \\
  CIC\_T & 1.2 & 1.2 & 1.2 & 1.2 & 1.2 \\
  UC\_R & 1.5 & 1.2 & 1.5 & 1.5 & 1.2 \\
  UC\_E & 1.5 & 1.2 & 1.5 & 1.5 & 1.2 \\
  UC\_M & 1.5 & 1.5 & 1.5 & 1.5 & 1.2 \\
  UC\_T & 1.5 & 1.5 & 1.5 & 1.5 & 1.5 \\
  \bottomrule()
  \end{longtable}
\end{enumerate}

\hypertarget{internal-module-inputs-88}{%
\subsubsection{Internal Module Inputs}\label{internal-module-inputs-88}}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1043}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.3620}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1656}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.3681}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Package
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Module
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Outputs
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule()
\endhead
VESimHouseholds & \protect\hyperlink{predictincome}{PredictIncome} & \textbf{Income} & Total annual household (non-qroup \& group quarters) income in year 1999 dollars \\
VELandUse & \protect\hyperlink{calculatebaseplacetypes}{CalculateBasePlaceTypes} & \textbf{HhPlaceTypes} & A place type as assigned to the households \\
VELandUse & \protect\hyperlink{calculatebaseplacetypes}{CalculateBasePlaceTypes} & \textbf{UrbanPop} & Total population by place types \\
VELandUse & \protect\hyperlink{calculatebaseplacetypes}{CalculateBasePlaceTypes} & \textbf{UrbanEmp} & Total employees by place types \\
VELandUse & \protect\hyperlink{calculatefutureplacetypes}{CalculateFuturePlaceTypes} & \textbf{HhPlaceTypes} & A place type as assigned to the households \\
VELandUse & \protect\hyperlink{calculatefutureplacetypes}{CalculateFuturePlaceTypes} & \textbf{UrbanPop} & Total population by place types \\
VELandUse & \protect\hyperlink{calculatefutureplacetypes}{CalculateFuturePlaceTypes} & \textbf{UrbanEmp} & Total employees by place types \\
VEHouseholdTravel & \protect\hyperlink{calculatetraveldemandfuture}{CalculateTravelDemandFuture} & \textbf{DvmtFuture (households)} & Average daily vehicle miles traveled by household estimated using model estimations of future year data \\
\bottomrule()
\end{longtable}

\hypertarget{module-outputs-92}{%
\subsubsection{Module Outputs}\label{module-outputs-92}}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  \textbf{DvmtFuture (households)}: Average daily vehicle miles traveled by household estimated using model estimations of future year data
\item
  \textbf{DvmtFuture (bzones)}: Average daily vehicle miles traveled by place types estimated using model estimations of future year data
\item
  \textbf{DvmtPtAdj}: Dvmt adjustment by place types
\item
  \textbf{Access}: Growth in job access
\item
  \textbf{Equity}: Growth in equity by income group
\item
  \textbf{VehicleTrips}: Policy adjusted vehicle trips
\item
  \textbf{TransitTrips}: Policy adjusted transit trips
\item
  \textbf{Walking}: Growth in walking
\end{enumerate}

\protect\hyperlink{contents}{Top} \protect\hyperlink{definitions}{Definitions} \protect\hyperlink{inputs-and-outputs}{Inputs/Outputs}

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\hypertarget{calculatepolicyvmt-1}{%
\subsection{CalculatePolicyVmt}\label{calculatepolicyvmt-1}}

This module calculates scenario travel demand. The average daily VMT for each household can be adjusted based on changes in growth patterns by place type, changes in auto operating cost, changes in road lane miles or transit revenue miles for any scenario. There are also a series of policy assumptions that can contribute to changes in VMT: pricing such as VMT charges or parking pricing, ITS strategies for freeways and arterials, and vanpool, telecommuting, ridesharing, and transit pass programs. All of these will contribute to shifts in travel demand for a given scenario.

\hypertarget{user-input-files-91}{%
\subsubsection{User Input Files}\label{user-input-files-91}}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\item
  \textbf{Percentage of employees offered commute options (\emph{region\_commute\_options.csv})}: This file contains assumptions about the availability and participation in work based travel demand management programs. The policies are ridesharing programs, transit pass programs, telecommuting or alternative work schedule programs, and vanpool programs. For each, the user enters the proportion of workers who participate (the data items with the ``Participation'' suffix). For one program, the transit subsidy, the user must also enter the subsidy level in dollars for the TransitSubsidyLevel data item.
  Here is a snapshot of the file:

  \begin{longtable}[]{@{}lll@{}}
  \toprule()
  TDMProgram & DataItem & DataValue \\
  \midrule()
  \endhead
  Ridesharing & RidesharingParticipation & 0.05 \\
  TransitSubsidy & TransitSubsidyParticipation & 0.1 \\
  TransitSubsidy & TransitSubsidyLevel & 1.25 \\
  WorkSchedule & Schedule980Participation & 0.01 \\
  WorkSchedule & Schedule440Participation & 0.01 \\
  WorkSchedule & Telecommute1.5DaysParticipation & 0.01 \\
  Vanpooling & LowLevelParticipation & 0.04 \\
  Vanpooling & MediumLevelParticipation & 0.01 \\
  Vanpooling & HighLevelParticipation & 0.01 \\
  \bottomrule()
  \end{longtable}
\item
  \textbf{Bicycling/light vehicles targets (\emph{region\_light\_vehicles.csv})}: This file contains input data for the non-motorized vehicle model. In VERPAT, non-motorized vehicles are bicycles, and also electric bicycles, segways, and similar vehicles that are small, light-weight and can travel at bicycle speeds or slightly higher. The parameters are as follows:

  \begin{itemize}
  \tightlist
  \item
    \textbf{TargetProp}: non-motorized vehicle ownership rate (average ratio of non-motorized vehicles to driver age population)
  \item
    \textbf{Threshold}: single-occupant vehicle (SOV) tour mileage threshold used in the SOV travel proportion model. This is the upper limit for tour lengths that are suitable for reallocation to non-motorized modes.
  \item
    \textbf{PropSuitable}: proportion of SOV travel suitable for non-motorized vehicle travel. This variable describes the proportion of SOV tours within the mileage threshold for which non-motorized vehicles might be substituted. This variable takes into account such factors as weather and trip purpose.
  \end{itemize}

  The non-motorized vehicle model predicts the ownership and use of non-motorized vehicles (where non-motorized vehicles are bicycles, and also electric bicycles, segways and similar vehicles that are small, light-weight and can travel at bicycle speeds or slightly higher than bicycle speeds). The core concept of the model is that non-motorized vehicle usage will primarily be a substitute for short-distance SOV travel. Therefore, the model estimates the proportion of the household vehicle travel that occurs in short-distance SOV tours. The model determines the maximum potential for household VMT to be diverted to non-motorized vehicles, which is also dependent on the availability of non-motorized vehicles.
  Note that bike share programs (BSP) serve to increase the availability of non-motorized vehicles and can be taken into account by increasing the \textbf{TargetProp} variable. Use national estimates of non-motorized ownership if regional estimates of non-motorized ownership are not available (unless the region has notably atypical levels of bicycle usage). See \href{http://www.academia.edu/1839374/Bicycle_Ownership_in_the_United_States_Empirical_Analysis_of_Regional_Differences}{Bicycle Ownership in the United States} for an analysis of regional differences.
  Here is a snapshot of the file:

  \begin{longtable}[]{@{}ll@{}}
  \toprule()
  DataItem & DataValue \\
  \midrule()
  \endhead
  TargetProp & 0.2 \\
  Threshold & 2 \\
  PropSuitable & 0.1 \\
  \bottomrule()
  \end{longtable}
\item
  \textbf{Increase in parking cost and supply (\emph{marea\_parking\_growth.csv})}: This file contains information that allows the effects of policies such as workplace parking charges and ``\emph{cash-out buy-back}'' programs to be tested. The input parameters are as follows and should be entered for both the base and future year:

  \begin{itemize}
  \tightlist
  \item
    \textbf{PropWrkPkg}: proportion of employees that park at work
  \item
    \textbf{PropWrkChrgd}: proportion of employers that charge for parking
  \item
    \textbf{PropCashOut}: proportion of employment parking that is converted from being free to pay under a ``\emph{cash-out buy-back}'' type of program
  \item
    \textbf{PrkOthChrgd}: proportion of other parking that is not free
  \item
    \textbf{PkgCost}: average daily parking cost. This variable is the average daily parking cost for those who incur a fee to park. If the paid parking varies across the region, then the ``\emph{PkgCost}'' value should reflect the average of those parking fees, but weighted by the supply -- so if most in the Center City, then the average will be heavily weighted toward the price in the Center City.
  \end{itemize}

  Here is a snapshot of the file:

  \begin{longtable}[]{@{}
    >{\raggedright\arraybackslash}p{(\columnwidth - 12\tabcolsep) * \real{0.1047}}
    >{\raggedright\arraybackslash}p{(\columnwidth - 12\tabcolsep) * \real{0.0465}}
    >{\raggedright\arraybackslash}p{(\columnwidth - 12\tabcolsep) * \real{0.1744}}
    >{\raggedright\arraybackslash}p{(\columnwidth - 12\tabcolsep) * \real{0.1744}}
    >{\raggedright\arraybackslash}p{(\columnwidth - 12\tabcolsep) * \real{0.1279}}
    >{\raggedright\arraybackslash}p{(\columnwidth - 12\tabcolsep) * \real{0.1860}}
    >{\raggedright\arraybackslash}p{(\columnwidth - 12\tabcolsep) * \real{0.1860}}@{}}
  \toprule()
  \begin{minipage}[b]{\linewidth}\raggedright
  Geo
  \end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
  Year
  \end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
  PropWorkParking
  \end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
  PropWorkCharged
  \end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
  PropCashOut
  \end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
  PropOtherCharged
  \end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
  ParkingCost.2000
  \end{minipage} \\
  \midrule()
  \endhead
  Multnomah & 2005 & 1 & 0.1 & 0 & 0.05 & 5 \\
  Multnomah & 2035 & 1 & 0.1 & 0 & 0.05 & 5 \\
  \bottomrule()
  \end{longtable}
\item
  \textbf{Travel Demand Management: Ridesharing (\emph{model\_tdm\_ridesharing.csv})}: The ridesharing Travel Demand Management file contains parameters describing the effectiveness of ridersharing programs by place type. The proportion of employees participating in the ridesharing program is a policy input. This is converted into a proportion of working-age persons by using an assumed labor force participation rate (0.65) to sample working-age persons in households. The ridesharing submodel then computes the anticipated level of VMT reduction resulting from the implementation of ridesharing, based on the place type the household lives in, using the effectiveness values shown in this parameter file. Previous studies have determined that the level of ridesharing participation will be less in the rural and suburban areas, as compared to the more-urban areas. Typically, more people will carpool in the more urbanized areas due to the presence of parking charges, potential difficulties in finding parking, and other disincentives that are typically present in more urbanized areas.
  Here is a snapshot of the file:

  \begin{longtable}[]{@{}ll@{}}
  \toprule()
  ModelGeo & Effectiveness \\
  \midrule()
  \endhead
  Rur & 0 \\
  Sub & 0.05 \\
  CIC & 0.1 \\
  UC & 0.15 \\
  \bottomrule()
  \end{longtable}
\item
  \textbf{Travel Demand Management: Transit Fares (\emph{model\_tdm\_transit.csv})}: The transit fare Travel Demand Management files are parameters for the effectiveness (level of VMT reduction) and fare subsidy values for employer. The subsidized/discounted transit model begins by evaluating the level of participation within the region. Monte Carlo processes are used to identify which households participate in transit pass programs. The proportion of employees participating in this program is a policy input. This is converted into a proportion of working-age persons by using an assumed labor force participation rate (0.65) to sample working-age persons in households. The model then allows the selection of one of four potential subsidy levels (also a policy inputs), which influence the level of VMT reduction based on the level of subsidy applied to the place type. The anticipated level of VMT reduction is then further reduced to account for the proportion of work travel in overall daily travel.
  Here is a snapshot of the file:

  \begin{longtable}[]{@{}llllll@{}}
  \toprule()
  ModelGeo & Subsidy0 & Subsidy1 & Subsidy2 & Subsidy3 & Subsidy4 \\
  \midrule()
  \endhead
  Rur & 0 & 0 & 0 & 0 & 0 \\
  Sub & 0 & 0.02 & 0.033 & 0.079 & 0.2 \\
  CIC & 0 & 0.034 & 0.073 & 0.164 & 0.2 \\
  UC & 0 & 0.062 & 0.129 & 0.2 & 0.2 \\
  \bottomrule()
  \end{longtable}
\item
  \textbf{Travel Demand Management: Transit Subsidy Levels (\emph{model\_tdm\_transitlevels.csv})}: This file contains the dollar value match to the subsidy levels used in \emph{model\_tdm\_transit.csv} file.
  Here is a snapshot of the file:

  \begin{longtable}[]{@{}ll@{}}
  \toprule()
  SubsidyLevel & SubsidyValue.2000 \\
  \midrule()
  \endhead
  Subsidy0 & 0 \\
  Subsidy1 & 0.75 \\
  Subsidy2 & 1.49 \\
  Subsidy3 & 2.98 \\
  Subsidy4 & 5.96 \\
  \bottomrule()
  \end{longtable}
\item
  \textbf{Travel Demand Management: Vanpooling (\emph{model\_tdm\_vanpooling.csv})}: This file contains parameters describing the effectiveness in terms of VMT reductions for vanpooling programs across three levels of employee involvement.
  The vanpool program submodel operates by evaluating the likely level of participation. Monte Carlo processes are used to identify which households participate in vanpool programs. The proportion of employees participating in this program is a policy input. This is converted into a proportion of working-age persons by using an assumed labor force participation rate (0.65) to sample working-age persons in households. Those employers that would participate in the program are then categorized into three levels of involvement from low to medium to high. The level of involvement reflects the extent to which an employer would actively facilitate and promote vanpooling. For example, a low level of involvement might represent an employer who organizes only a minimal number of vanpools. The high level of involvement could represent an employer who has an extensive vanpooling program to cover a large number of employees. Based on the level of involvement, the reduction in VMT is estimated on the basis of the values in this file.
  Here is a snapshot of the file:

  \begin{longtable}[]{@{}ll@{}}
  \toprule()
  VanpoolingParticipation & VMTReduction \\
  \midrule()
  \endhead
  Low & 0.003 \\
  Medium & 0.0685 \\
  High & 0.134 \\
  \bottomrule()
  \end{longtable}
\item
  \textbf{Travel Demand Management: Work Schedule (\emph{model\_tdm\_workschedule.csv})}: This file contains parameters that describe the effectiveness for different participation levels for three different telecommuting or alternative work schedules.
  The telecommuting or alternative work schedule model first evaluates the likely level of participation throughout the region in terms of telecommuting or alternatively-works schedules. Monte Carlo processes are used to identify which households participate in telecommuting programs. The proportion of employees participating in this program is a policy input. This is converted into a proportion of working-age persons by using an assumed labor force participation rate (0.65) to sample working-age persons in households. The model then determines the type of programs that might be implemented. Three potential alternatives are offered including:

  \begin{itemize}
  \tightlist
  \item
    \textbf{4/40 Schedule}: 4 days per week with 40 hours per week
  \item
    \textbf{9/80 Schedule}: working 4 days every other week with an average of 80 hours over 2 weeks
  \item
    \textbf{Telecommuting}: Workers may work 1 to 2 days a week remotely
  \end{itemize}

  Once the option has been identified and the level of participation, the estimated VMT is determined on the basis of the parameters in this file.
  Here is a snapshot of the file:

  \begin{longtable}[]{@{}
    >{\raggedright\arraybackslash}p{(\columnwidth - 12\tabcolsep) * \real{0.2294}}
    >{\raggedright\arraybackslash}p{(\columnwidth - 12\tabcolsep) * \real{0.1284}}
    >{\raggedright\arraybackslash}p{(\columnwidth - 12\tabcolsep) * \real{0.1284}}
    >{\raggedright\arraybackslash}p{(\columnwidth - 12\tabcolsep) * \real{0.1284}}
    >{\raggedright\arraybackslash}p{(\columnwidth - 12\tabcolsep) * \real{0.1284}}
    >{\raggedright\arraybackslash}p{(\columnwidth - 12\tabcolsep) * \real{0.1284}}
    >{\raggedright\arraybackslash}p{(\columnwidth - 12\tabcolsep) * \real{0.1284}}@{}}
  \toprule()
  \begin{minipage}[b]{\linewidth}\raggedright
  WorkSchedulePolicy
  \end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
  Participation0
  \end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
  Participation1
  \end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
  Participation2
  \end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
  Participation3
  \end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
  Participation4
  \end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
  Participation5
  \end{minipage} \\
  \midrule()
  \endhead
  Schedule980 & 0 & 0.0007 & 0.0021 & 0.0035 & 0.007 & 0.0175 \\
  Schedule440 & 0 & 0.0015 & 0.0045 & 0.007 & 0.015 & 0.0375 \\
  TelecommuteoneandhalfDays & 0 & 0.0022 & 0.0066 & 0.011 & 0.022 & 0.055 \\
  \bottomrule()
  \end{longtable}
\item
  \textbf{Travel Demand Management: Work Schedule Participation Levels (\emph{model\_tdm\_workschedulelevels.csv})}: This file describes the proportion of employees participating in the program corresponding to the participation levels used in \emph{model\_tdm\_workschedule.csv} file.
  Here is a snapshot of the file:

  \begin{longtable}[]{@{}ll@{}}
  \toprule()
  ParticipationLevel & ParticipationValue \\
  \midrule()
  \endhead
  Participation0 & 0 \\
  Participation1 & 0.01 \\
  Participation2 & 0.03 \\
  Participation3 & 0.05 \\
  Participation4 & 0.1 \\
  Participation5 & 0.25 \\
  \bottomrule()
  \end{longtable}
\end{enumerate}

\hypertarget{user-input-parameters-11}{%
\subsubsection{User Input Parameters:}\label{user-input-parameters-11}}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\item
  \textbf{\% Increase in Auto Operating Cost (\emph{AutoCostGrowth}):} This parameter reflects the proportional increase in auto operating cost. This can be used to test different assumptions for future gas prices or the effects of increased gas taxes. A value of 1.5 multiplies base year operating costs by 1.5 and thus reflects a 50\% increase. It should be defined in \protect\hyperlink{model_parametersjson}{model\_parameters.json} as follows:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{\{}
    \DataTypeTok{"NAME"} \FunctionTok{:} \StringTok{"AutoCostGrowth"}\FunctionTok{,}
    \DataTypeTok{"VALUE"}\FunctionTok{:} \StringTok{"1.5"}\FunctionTok{,}
    \DataTypeTok{"TYPE"} \FunctionTok{:} \StringTok{"double"}\FunctionTok{,}
    \DataTypeTok{"UNITS"} \FunctionTok{:} \StringTok{"multiplier"}\FunctionTok{,}
    \DataTypeTok{"PROHIBIT"} \FunctionTok{:} \StringTok{"c(\textquotesingle{}NA\textquotesingle{}, \textquotesingle{}\textless{} 0\textquotesingle{})"}\FunctionTok{,}
    \DataTypeTok{"ISELEMENTOF"} \FunctionTok{:} \StringTok{""}
\FunctionTok{\}}
\end{Highlighting}
\end{Shaded}
\item
  \textbf{Auto Operating Surcharge Per VMT (\emph{VmtCharge})}: It is a cost in cents per mile that would be levied on auto users through the form of a VMT charge. It should be defined in \protect\hyperlink{model_parametersjson}{model\_parameters.json} as follows:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{\{}
    \DataTypeTok{"NAME"} \FunctionTok{:} \StringTok{"VmtCharge"}\FunctionTok{,}
    \DataTypeTok{"VALUE"}\FunctionTok{:} \StringTok{"0.05"}\FunctionTok{,}
    \DataTypeTok{"TYPE"} \FunctionTok{:} \StringTok{"compound"}\FunctionTok{,}
    \DataTypeTok{"UNITS"} \FunctionTok{:} \StringTok{"USD/MI"}\FunctionTok{,}
    \DataTypeTok{"PROHIBIT"} \FunctionTok{:} \StringTok{"c(\textquotesingle{}NA\textquotesingle{}, \textquotesingle{}\textless{} 0\textquotesingle{})"}\FunctionTok{,}
    \DataTypeTok{"ISELEMENTOF"} \FunctionTok{:} \StringTok{""}
\FunctionTok{\}}
\end{Highlighting}
\end{Shaded}
\item
  \textbf{Work VMT Proportion (\emph{WorkVmtProp})}: The proportion of household VMT that takes place for commute to work purposes; used to differentiate between travel purposes for use in estimating overall VMT reductions that are targeted at the commute to work. It should be defined in \protect\hyperlink{model_parametersjson}{model\_parameters.json} as follows:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{\{}
    \DataTypeTok{"NAME"} \FunctionTok{:} \StringTok{"WorkVmtProp"}\FunctionTok{,}
    \DataTypeTok{"VALUE"}\FunctionTok{:} \StringTok{"0.25"}\FunctionTok{,}
    \DataTypeTok{"TYPE"} \FunctionTok{:} \StringTok{"double"}\FunctionTok{,}
    \DataTypeTok{"UNITS"} \FunctionTok{:} \StringTok{"proportion"}\FunctionTok{,}
    \DataTypeTok{"PROHIBIT"} \FunctionTok{:} \StringTok{"c(\textquotesingle{}NA\textquotesingle{}, \textquotesingle{}\textless{} 0\textquotesingle{})"}\FunctionTok{,}
    \DataTypeTok{"ISELEMENTOF"} \FunctionTok{:} \StringTok{""}
\FunctionTok{\}}
\end{Highlighting}
\end{Shaded}
\end{enumerate}

\hypertarget{internal-module-inputs-89}{%
\subsubsection{Internal Module Inputs}\label{internal-module-inputs-89}}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1205}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.3554}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1627}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.3614}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Package
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Module
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Outputs
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule()
\endhead
VESimHouseholds & \protect\hyperlink{createhouseholds}{CreateHouseholds} & \textbf{HhId} & Unique household ID \\
VESimHouseholds & \protect\hyperlink{createhouseholds}{CreateHouseholds} & \textbf{HhSize} & Number of persons \\
VESimHouseholds & \protect\hyperlink{createhouseholds}{CreateHouseholds} & \textbf{Age0to14} & Persons in 0 to 14 year old age group \\
VESimHouseholds & \protect\hyperlink{createhouseholds}{CreateHouseholds} & \textbf{Age15to19} & Persons in 15 to 19 year old age group \\
VESimHouseholds & \protect\hyperlink{createhouseholds}{CreateHouseholds} & \textbf{Age20to29} & Persons in 20 to 29 year old age group \\
VESimHouseholds & \protect\hyperlink{createhouseholds}{CreateHouseholds} & \textbf{Age30to54} & Persons in 30 to 54 year old age group \\
VESimHouseholds & \protect\hyperlink{createhouseholds}{CreateHouseholds} & \textbf{Age55to64} & Persons in 55 to 64 year old age group \\
VESimHouseholds & \protect\hyperlink{createhouseholds}{CreateHouseholds} & \textbf{Age65Plus} & Persons in 65 or older age group \\
VESimHouseholds & \protect\hyperlink{predictincome}{PredictIncome} & \textbf{Income} & Total annual household (non-qroup \& group quarters) income in year 1999 dollars \\
VELandUse & \protect\hyperlink{calculatefutureplacetypes}{CalculateFuturePlaceTypes} & \textbf{HhPlaceTypes} & A place type as assigned to the households \\
VELandUse & \protect\hyperlink{calculatefutureplacetypes}{CalculateFuturePlaceTypes} & \textbf{UrbanPop} & Total population by place types \\
VELandUse & \protect\hyperlink{calculatefutureplacetypes}{CalculateFuturePlaceTypes} & \textbf{UrbanEmp} & Total employees by place types \\
VELandUse & \protect\hyperlink{calculatefutureplacetypes}{CalculateFuturePlaceTypes} & \textbf{UrbanIncome} & Total income by place types \\
VETransportSupply & \protect\hyperlink{createfutureaccessibility}{CreateFutureAccessibility} & \textbf{FwyLaneMiPCFuture} & Ratio of urbanized area freeway and expressway lane-miles to urbanized area population calculated using future (estimated) data \\
VETransportSupply & \protect\hyperlink{createfutureaccessibility}{CreateFutureAccessibility} & \textbf{ArtLaneMiPCFuture} & Ratio of urbanized area arterial lane-miles to urbanized area population calculated using future (estimated) data \\
VETransportSupply & \protect\hyperlink{createfutureaccessibility}{CreateFutureAccessibility} & \textbf{TranRevMiPCFuture} & Transit revenue miles per capita for the region calculated using future (estimated) data \\
VETransportSupply & \protect\hyperlink{createfutureaccessibility}{CreateFutureAccessibility} & \textbf{BusRevMiFuture} & Bus revenue miles for the region calculated using future (estimated) data \\
VETransportSupply & \protect\hyperlink{createfutureaccessibility}{CreateFutureAccessibility} & \textbf{RailRevMiFuture} & Rail revenue miles for the region calculated using future (estimated) data \\
VEHouseholdVehicles & \protect\hyperlink{assignvehiclefeaturesfuture}{AssignVehicleFeaturesFuture} & \textbf{VehIdFuture} & Unique vehicle ID \\
VEHouseholdVehicles & \protect\hyperlink{assignvehiclefeaturesfuture}{AssignVehicleFeaturesFuture} & \textbf{VehiclesFuture} & Number of automobiles and light trucks owned or leased by the household \\
VEHouseholdVehicles & \protect\hyperlink{assignvehiclefeaturesfuture}{AssignVehicleFeaturesFuture} & \textbf{NumLtTrkFuture} & Number of light trucks (pickup, sport-utility vehicle, and van) owned or leased by household \\
VEHouseholdVehicles & \protect\hyperlink{assignvehiclefeaturesfuture}{AssignVehicleFeaturesFuture} & \textbf{NumAutoFuture} & Number of automobiles (i.e.~4-tire passenger vehicles that are not light trucks) owned or leased by household \\
VEHouseholdTravel & \protect\hyperlink{calculatetraveldemandfuture}{CalculateTravelDemandFuture} & \textbf{DvmtFuture (vehicles)} & Average daily vehicle miles traveled by each vehicle estimated using model estimations of future year data \\
VEHouseholdTravel & \protect\hyperlink{calculatetraveldemandfuture}{CalculateTravelDemandFuture} & \textbf{FuelGallonsFuture} & Average daily fuel consumption in gallons by each household estimated using model estimations of future year data \\
VEHouseholdTravel & \protect\hyperlink{calculatetraveldemandfuture}{CalculateTravelDemandFuture} & \textbf{FuelCo2eFuture} & Average daily Co2 equivalent greenhouse gas emissions by each household estimated using model estimations of future year data \\
VEHouseholdTravel & \protect\hyperlink{calculatetraveldemandfuture}{CalculateTravelDemandFuture} & \textbf{FutureCostPerMileFuture} & Total cost per mile for future year for each household estimated using model estimations of future year data \\
VETransportSupplyUse & \protect\hyperlink{calculatecongestionfuture}{CalculateCongestionFuture} & \textbf{MpgAdjLtVehFuture} & Average fuel efficiency adjustment for light vehicles in the region calculated using model estimation of future data \\
VETransportSupplyUse & \protect\hyperlink{calculatecongestionfuture}{CalculateCongestionFuture} & \textbf{MpgAdjBusFuture} & Average fuel efficiency adjustment for buses in the region calculated using model estimation of future data \\
VETransportSupplyUse & \protect\hyperlink{calculatecongestionfuture}{CalculateCongestionFuture} & \textbf{MpgAdjTruckFuture} & Average fuel efficiency adjustment for heavy trucks in the region calculated using model estimation of future data \\
VETransportSupplyUse & \protect\hyperlink{calculatecongestionfuture}{CalculateCongestionFuture} & \textbf{VehHrLtVehFuture} & Total vehicle travel time for light vehicles in the region calculated using model estimation of future data \\
VETransportSupplyUse & \protect\hyperlink{calculatecongestionfuture}{CalculateCongestionFuture} & \textbf{VehHrBusFuture} & Total vehicle travel time for buses in the region calculated using model estimation of future data \\
VETransportSupplyUse & \protect\hyperlink{calculatecongestionfuture}{CalculateCongestionFuture} & \textbf{VehHrTruckFuture} & Total vehicle travel time for heavy trucks in the region calculated using model estimation of future data \\
VETransportSupplyUse & \protect\hyperlink{calculatecongestionfuture}{CalculateCongestionFuture} & \textbf{AveSpeedLtVehFuture} & Average speed for light vehicles in the region calculated using model estimation of future data \\
VETransportSupplyUse & \protect\hyperlink{calculatecongestionfuture}{CalculateCongestionFuture} & \textbf{AveSpeedBusFuture} & Average speed for buses in the region calculated using model estimation of future data \\
VETransportSupplyUse & \protect\hyperlink{calculatecongestionfuture}{CalculateCongestionFuture} & \textbf{AveSpeedTruckFuture} & Average speed for heavy trucks in the region calculated using model estimation of future data \\
VETransportSupplyUse & \protect\hyperlink{calculatecongestionfuture}{CalculateCongestionFuture} & \textbf{FfVehHrLtVehFuture} & Average free-flow travel time for light vehicles in the region calculated using model estimation of future data \\
VETransportSupplyUse & \protect\hyperlink{calculatecongestionfuture}{CalculateCongestionFuture} & \textbf{FfVehHrBusFuture} & Average free-flow travel time for buses in the region calculated using model estimation of future data \\
VETransportSupplyUse & \protect\hyperlink{calculatecongestionfuture}{CalculateCongestionFuture} & \textbf{FfVehHrTruckFuture} & Average free-flow travel time for heavy trucks in the region calculated using model estimation of future data \\
VETransportSupplyUse & \protect\hyperlink{calculatecongestionfuture}{CalculateCongestionFuture} & \textbf{DelayVehHrLtVehFuture} & Total vehicle delay time for light vehicles in the region calculated using model estimation of future data \\
VETransportSupplyUse & \protect\hyperlink{calculatecongestionfuture}{CalculateCongestionFuture} & \textbf{DelayVehHrBusFuture} & Total vehicle delay time for buses in the region calculated using model estimation of future data \\
VETransportSupplyUse & \protect\hyperlink{calculatecongestionfuture}{CalculateCongestionFuture} & \textbf{DelayVehHrTruckFuture} & Total vehicle delay time for heavy trucks in the region calculated using model estimation of future data \\
VETransportSupplyUse & \protect\hyperlink{calculatecongestionfuture}{CalculateCongestionFuture} & \textbf{MpgAdjHhFuture} & Average fuel efficiency adjustment for households in the region calculated using model estimation of future data \\
VEHouseholdTravel & \protect\hyperlink{calculateinduceddemand}{CalculateInducedDemand} & \textbf{DvmtFuture (households)} & Average daily vehicle miles traveled by household estimated using model estimations of future year data \\
VEHouseholdTravel & \protect\hyperlink{calculateinduceddemand}{CalculateInducedDemand} & \textbf{DvmtFuture (bzones)} & Average daily vehicle miles traveled by place types estimated using model estimations of future year data \\
VEHouseholdTravel & \protect\hyperlink{calculateinduceddemand}{CalculateInducedDemand} & \textbf{Access} & Growth in job access \\
VEHouseholdTravel & \protect\hyperlink{calculateinduceddemand}{CalculateInducedDemand} & \textbf{VehicleTrips} & Policy adjusted vehicle trips \\
VEHouseholdTravel & \protect\hyperlink{calculateinduceddemand}{CalculateInducedDemand} & \textbf{TransitTrips} & Policy adjusted transit trips \\
VEHouseholdTravel & \protect\hyperlink{calculateinduceddemand}{CalculateInducedDemand} & \textbf{Walking} & Growth in walking \\
\bottomrule()
\end{longtable}

\hypertarget{module-outputs-93}{%
\subsubsection{Module Outputs}\label{module-outputs-93}}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  \textbf{DvmtPolicy (bzones)}: Average daily vehicle miles traveled by place types after policy adjustments
\item
  \textbf{DvmtPolicy (households)}: Average daily vehicle miles traveled by households after policy adjustments
\item
  \textbf{DvmtPolicy (vehicles)}: Average daily vehicle miles traveled by vehicles after policy adjustments
\item
  \textbf{LtVehiclesPolicy}: Number of light vehicles by households after policy adjustments
\item
  \textbf{LtVehAdjFactorPolicy}: Light vehicles adjustment factor for households
\item
  \textbf{TdmLtVehAdjFactorPolicy}: TDM Light vehicles adjustment factor for households
\item
  \textbf{TdmAdjFactorPolicy}: TDM adjustment factor for households
\item
  \textbf{LtVehDvmtPolicy}: Average daily vehicle miles traveled by light vehicles by households after policy adjustments
\item
  \textbf{FutureCostPerMilePolicy}: Total cost per mile for future year for each household estimated after making policy adjustments
\item
  \textbf{DailyParkingCostPolicy}: Daily parking cost calculated after making policy adjustments
\item
  \textbf{CashOutIncAdjPolicy}: Adjustment to income after cash out
\item
  \textbf{IncomePolicy}: Income of the households after applying policy
\item
  \textbf{CostsPolicy}: Various policy related energy costs
\end{enumerate}

\protect\hyperlink{contents}{Top} \protect\hyperlink{definitions}{Definitions} \protect\hyperlink{inputs-and-outputs}{Inputs/Outputs}

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\hypertarget{calculatecongestionpolicy-1}{%
\subsection{CalculateCongestionPolicy}\label{calculatecongestionpolicy-1}}

This module is similar to \protect\hyperlink{calculatecongestionbase}{CalculateCongestionBase} module but uses model estimation of future transportation supply adjusted to policies as the basis of calculations.

\hypertarget{user-input-files-92}{%
\subsubsection{User Input Files}\label{user-input-files-92}}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\item
  \textbf{Percent road miles with ITS treatment (\emph{azone\_its\_prop.csv})}: This file is an estimate of the proportion of road miles that have improvements which reduce incidents through ITS treatments in both the base and future years. Values entered should be between 0 and 1, with 1 indicating that 100\% of road miles are treated.
  The ITS policy measures the effects of incident management supported by ITS. The ITS table is used to inform the congestion model and the travel demand model. The model uses the mean speeds with and without incidents to compute an overall average speed by road type and congestion level providing a simple level of sensitivity to the potential effects of incident management programs on delay and emissions.
  The ITS treatments are evaluated only on freeways and arterials. The ITS treatments that can be evaluated are those that the analyst considers will reduce non-recurring congestion due to incidents. This policy does not deal with other operational improvements such as signal coordination, or temporary capacity increases such as allowing shoulder use in the peak.
  Here is a snapshot of the file:

  \begin{longtable}[]{@{}lll@{}}
  \toprule()
  Geo & Year & ITS \\
  \midrule()
  \endhead
  Multnomah & 2005 & 0 \\
  Multnomah & 2035 & 0 \\
  \bottomrule()
  \end{longtable}
\item
  \textbf{Truck and bus vmt (\emph{region\_truck\_bus\_vmt.csv})}: This file contains the region's proportion of VMT by truck and bus as well as the distribution of that VMT across functional classes (\emph{freeway}, \emph{arterial}, \emph{other}). The file includes one row for bus VMT data and one row for Truck VMT data. It should be noted that it is not necessary to enter values in the \textbf{PropVmt} column for \textbf{BusVmt} as this is calculated using the values in the \textbf{\emph{transportation\_supply.csv}} user input file. The truck VMT proportion (PropVMT column, TruckVMT row) can be obtained from \href{http://www.fhwa.dot.gov/policyinformation/hpms.cfm}{Highway Performance Monitoring System} data and local sources or the regional travel demand model if one exists.
  The proportions of VMT by functional class can be derived from the Federal Highway Cost Allocation Study and data from transit operators. The Federal Highway Cost Allocation Study (Table II-6, 1997 Federal Highway Cost Allocation Study Final Report, \href{http://www.fhwa.dot.gov/policy/hcas/final/two.cfm}{Chapter II} is used to calculate the average proportion of truck VMT by functional class. Data from transit authorities are used to calculate the proportions of bus VMT by urban area functional class.
  Here is a snapshot of the file:

  \begin{longtable}[]{@{}lllll@{}}
  \toprule()
  Type & PropVmt & Fwy & Art & Other \\
  \midrule()
  \endhead
  BusVmt & 0 & 0.15 & 0.591854 & 0.258146 \\
  TruckVmt & 0.08 & 0.452028 & 0.398645 & 0.149327 \\
  \bottomrule()
  \end{longtable}
\end{enumerate}

\hypertarget{user-input-parameters-12}{%
\subsubsection{User Input Parameters}\label{user-input-parameters-12}}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\item
  \textbf{Light vehicle dvmt (\emph{BaseLtVehDvmt})}: Total light vehicle daily VMT for the base year in thousands of miles. This data can be derived from a combination of \href{http://www.fhwa.dot.gov/policyinformation/hpms.cfm}{Highway Performance Monitoring System} data, Federal Highway Cost Allocation Study data, and regional data. Light vehicle daily VMT can be estimated by subtracting truck and bus VMT from total VMT provided in the Highway Performance Monitoring System (HPMS). Regional travel demand model outputs can also be used to derive these data. It should be defined in \protect\hyperlink{model_parametersjson}{model\_parameters.json} as follows:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{\{}
    \DataTypeTok{"NAME"} \FunctionTok{:} \StringTok{"BaseLtVehDvmt"}\FunctionTok{,}
    \DataTypeTok{"VALUE"}\FunctionTok{:} \StringTok{"27244"}\FunctionTok{,}
    \DataTypeTok{"TYPE"} \FunctionTok{:} \StringTok{"compound"}\FunctionTok{,}
    \DataTypeTok{"UNITS"} \FunctionTok{:} \StringTok{"MI/DAY"}\FunctionTok{,}
    \DataTypeTok{"PROHIBIT"} \FunctionTok{:} \StringTok{"c(\textquotesingle{}NA\textquotesingle{}, \textquotesingle{}\textless{} 0\textquotesingle{})"}\FunctionTok{,}
    \DataTypeTok{"ISELEMENTOF"} \FunctionTok{:} \StringTok{""}
\FunctionTok{\}}
\end{Highlighting}
\end{Shaded}
\item
  \textbf{Dvmt proportion by functional class (\emph{BaseFwyArtProp})}: The proportions of daily VMT for light vehicles that takes place on freeways and arterials (i.e., the remainder of VMT takes place on lower functional class roads for the base year. This data can be derived from a combination of \href{http://www.fhwa.dot.gov/policyinformation/hpms.cfm}{Highway Performance Monitoring System} data, Federal Highway Cost Allocation Study data, and regional data. The proportions of light vehicle daily VMT on freeways and arterials can be derived from the HPMS data. Regional travel demand model outputs can also be used to derive these data. It should be defined in \protect\hyperlink{model_parametersjson}{model\_parameters.json} as follows:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{\{}
    \DataTypeTok{"NAME"} \FunctionTok{:} \StringTok{"BaseFwyArtProp"}\FunctionTok{,}
    \DataTypeTok{"VALUE"}\FunctionTok{:} \StringTok{"0.77"}\FunctionTok{,}
    \DataTypeTok{"TYPE"} \FunctionTok{:} \StringTok{"double"}\FunctionTok{,}
    \DataTypeTok{"UNITS"} \FunctionTok{:} \StringTok{"proportion"}\FunctionTok{,}
    \DataTypeTok{"PROHIBIT"} \FunctionTok{:} \StringTok{"c(\textquotesingle{}NA\textquotesingle{}, \textquotesingle{}\textless{} 0\textquotesingle{}, \textquotesingle{}\textgreater{} 1\textquotesingle{})"}\FunctionTok{,}
    \DataTypeTok{"ISELEMENTOF"} \FunctionTok{:} \StringTok{""}
\FunctionTok{\}}
\end{Highlighting}
\end{Shaded}
\item
  \textbf{Transit revenue adjustment factor (\emph{TranRevMiAdjFactor})}: Factor to convert transit revenue miles (i.e.~miles run in service on routes) to total transit vehicle miles operated to account for vehicle miles run while deadheading from depots to route endpoints. It should be defined in \protect\hyperlink{model_parametersjson}{model\_parameters.json} as follows:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{\{}
    \DataTypeTok{"NAME"} \FunctionTok{:} \StringTok{"TranRevMiAdjFactor"}\FunctionTok{,}
    \DataTypeTok{"VALUE"}\FunctionTok{:} \StringTok{"1.12"}\FunctionTok{,}
    \DataTypeTok{"TYPE"} \FunctionTok{:} \StringTok{"double"}\FunctionTok{,}
    \DataTypeTok{"UNITS"} \FunctionTok{:} \StringTok{"multiplier"}\FunctionTok{,}
    \DataTypeTok{"PROHIBIT"} \FunctionTok{:} \StringTok{"c(\textquotesingle{}NA\textquotesingle{}, \textquotesingle{}\textless{} 0\textquotesingle{})"}\FunctionTok{,}
    \DataTypeTok{"ISELEMENTOF"} \FunctionTok{:} \StringTok{""}
\FunctionTok{\}}
\end{Highlighting}
\end{Shaded}
\end{enumerate}

\hypertarget{internal-module-inputs-90}{%
\subsubsection{Internal Module Inputs}\label{internal-module-inputs-90}}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1220}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.3598}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1524}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.3659}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Package
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Module
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Outputs
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule()
\endhead
VELandUse & \protect\hyperlink{calculatebaseplacetypes}{CalculateBasePlaceTypes} & \textbf{UrbanPop} & Total population by place types \\
VELandUse & \protect\hyperlink{calculatefutureplacetypes}{CalculateFuturePlaceTypes} & \textbf{UrbanPop} & Total population by place types \\
VETransportSupply & \protect\hyperlink{createfutureaccessibility}{CreateFutureAccessibility} & \textbf{FwyLaneMiPCFuture} & Ratio of urbanized area freeway and expressway lane-miles to urbanized area population calculated using future (estimated) data \\
VETransportSupply & \protect\hyperlink{createfutureaccessibility}{CreateFutureAccessibility} & \textbf{ArtLaneMiPCFuture} & Ratio of urbanized area arterial lane-miles to urbanized area population calculated using future (estimated) data \\
VETransportSupply & \protect\hyperlink{createfutureaccessibility}{CreateFutureAccessibility} & \textbf{TranRevMiPCFuture} & Transit revenue miles per capita for the region calculated using future (estimated) data \\
VETransportSupply & \protect\hyperlink{createfutureaccessibility}{CreateFutureAccessibility} & \textbf{BusRevMiFuture} & Bus revenue miles for the region calculated using future (estimated) data \\
VETransportSupply & \protect\hyperlink{createfutureaccessibility}{CreateFutureAccessibility} & \textbf{RailRevMiFuture} & Rail revenue miles for the region calculated using future (estimated) data \\
VEHouseholdTravel & \protect\hyperlink{calculatetraveldemandfuture}{CalculateTravelDemandFuture} & \textbf{TruckDvmtFuture} & Average daily vehicle miles traveled by trucks estimated using model estimations of future year data \\
VEHouseholdTravel & \protect\hyperlink{calculatepolicyvmt}{CalculatePolicyVmt} & \textbf{DvmtPolicy (bzones)} & Average daily vehicle miles traveled by place types estimated using model estimations of future year data \\
VETransportSupplyUse & \protect\hyperlink{calculatecongestionbase}{CalculateCongestionFuture} & \textbf{LtVehDvmtFactorFuture} & Light vehicle Dvmt factor adjustment factor \\
\bottomrule()
\end{longtable}

\hypertarget{module-outputs-94}{%
\subsubsection{Module Outputs}\label{module-outputs-94}}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  \textbf{LtVehDvmtPolicy}: Daily vehicle miles travelled by light vehicles in the region calculated using model estimation of future data after adjusting for policies
\item
  \textbf{BusDvmtPolicy}: Daily vehicle miles travelled by bus in the region calculated using model estimation of future data after adjusting for policies
\item
  \textbf{MpgAdjLtVehPolicy}: Average fuel efficiency adjustment for light vehicles in the region calculated using model estimation of future data after adjusting for policies
\item
  \textbf{MpgAdjBusPolicy}: Average fuel efficiency adjustment for buses in the region calculated using model estimation of future data after adjusting for policies
\item
  \textbf{MpgAdjTruckPolicy}: Average fuel efficiency adjustment for heavy trucks in the region calculated using model estimation of future data after adjusting for policies
\item
  \textbf{VehHrLtVehPolicy}: Total vehicle travel time for light vehicles in the region calculated using model estimation of future data after adjusting for policies
\item
  \textbf{VehHrBusPolicy}: Total vehicle travel time for buses in the region calculated using model estimation of future data after adjusting for policies
\item
  \textbf{VehHrTruckPolicy}: Total vehicle travel time for heavy trucks in the region calculated using model estimation of future data after adjusting for policies
\item
  \textbf{AveSpeedLtVehPolicy}: Average speed for light vehicles in the region calculated using model estimation of future data after adjusting for policies
\item
  \textbf{AveSpeedBusPolicy}: Average speed for buses in the region calculated using model estimation of future data after adjusting for policies
\item
  \textbf{AveSpeedTruckPolicy}: Average speed for heavy trucks in the region calculated using model estimation of future data after adjusting for policies
\item
  \textbf{FfVehHrLtVehPolicy}: Average free-flow travel time for light vehicles in the region calculated using model estimation of future data after adjusting for policies
\item
  \textbf{FfVehHrBusPolicy}: Average free-flow travel time for buses in the region calculated using model estimation of future data after adjusting for policies
\item
  \textbf{FfVehHrTruckPolicy}: Average free-flow travel time for heavy trucks in the region calculated using model estimation of future data after adjusting for policies
\item
  \textbf{DelayVehHrLtVehPolicy}: Total vehicle delay time for light vehicles in the region calculated using model estimation of future data after adjusting for policies
\item
  \textbf{DelayVehHrBusPolicy}: Total vehicle delay time for buses in the region calculated using model estimation of future data after adjusting for policies
\item
  \textbf{DelayVehHrTruckPolicy}: Total vehicle delay time for heavy trucks in the region calculated using model estimation of future data after adjusting for policies
\item
  \textbf{MpgAdjHhPolicy}: Average fuel efficiency adjustment for households in the region calculated using model estimation of future data after adjusting for policies
\item
  \textbf{LtVehDvmtFactorPolicy}: Light vehicle Dvmt factor adjustment factor calculated using model estimation of future data after adjusting for policies
\end{enumerate}

\protect\hyperlink{contents}{Top} \protect\hyperlink{definitions}{Definitions} \protect\hyperlink{inputs-and-outputs}{Inputs/Outputs}

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\hypertarget{reportrpatmetrics-1}{%
\subsection{ReportRPATMetrics}\label{reportrpatmetrics-1}}

This module calculates performance metrics that are designed to address a variety of impacts that are helpful for decision-making. Following table summarizes various performance measures produced by this modules, details of which is discussed in \href{https://github.com/visioneval/VisionEval/tree/master/sources/modules/VEReports}{VEReports}.

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.2727}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.3364}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.2182}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1727}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Performance Group
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Performance Metric
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Units
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Temporal Resolution
\end{minipage} \\
\midrule()
\endhead
Direct Travel Impacts & Daily Vehicle Miles Traveled & Miles & Day \\
Direct Travel Impacts & Daily Vehicle Trips & Trips & Day \\
Direct Travel Impacts & Daily Transit Trips & Trips & Day \\
Direct Travel Impacts & Average Travel Speeds by Vehicle Type & MPH & Day \\
Direct Travel Impacts & Vehicle Hours of Travel Delay & Hours & Day \\
Environment and Energy Impacts & Fuel Consumption & Gallons & Day \\
Environment and Energy Impacts & Greenhouse Gas Emissions & Metric Tons & Day \\
Financial and Economic Impacts & Regional Highway Infrastructure Costs & Dollars & Year \\
Financial and Economic Impacts & Regional Transit Infrastructure Costs & Dollars & Year \\
Financial and Economic Impacts & Regional Transit Operating Costs & Dollars & Year \\
Financial and Economic Impacts & Annual Traveler Cost (Fuel + Charges) & Dollars & Year \\
Location Impacts & Regional Accessibility & Percent Change From Base & - \\
Community Impacts & Accident Rates & Count & Year \\
Community Impacts & Walking Percentage Increase & Percent Change From Base & - \\
Community Impacts & Job Accessibility by Income Group & Percent Change From Base & - \\
\bottomrule()
\end{longtable}

\hypertarget{user-input-files-93}{%
\subsubsection{User Input Files}\label{user-input-files-93}}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\item
  \textbf{Transportation Costs (\emph{model\_transportation\_costs.csv})}: This file contains unit cost rates for transportation infrastructure investments and operating costs and transit fare revenue. The parameters are used in the calculations of the transportation costs performance metrics.
  The source for transit capital, operating costs, and fare revenue is the \href{https://www.transit.dot.gov/ntd}{NTD}, and in particular the National Transit Profile which is available on the NTDB website. Costs are available in a variety of index formats, e.g.~cost per revenue mile or hour; cost per passenger trip is used in VERPAT.
  The source for highway infrastructure costs is FHWA's Highway Economic Requirements System model, or HERS. Information was obtained from Chapter 6 of the 2005 Technical Report for all US states (FHWA, 2005). Table 8-1 in HERS provides unit costs (per lane mile) for both Rural and Urban highway systems, and distinguishes among three functional classes: interstates, freeways and expressways; other principal arterials; and minor arterials and collectors. Costs estimates are provided for the following improvements:

  \begin{itemize}
  \tightlist
  \item
    Reconstruction and widening
  \item
    Reconstruct pavement
  \item
    Resurface and widen lanes
  \item
    Resurface pavement
  \item
    Improve shoulders
  \end{itemize}

  Additional choices are offered to distinguish between adding a lane at ``normal'' vs.~``high cost'', and also for pavement realignment, also under normal vs.~high cost conditions. For practical reasons, it was decided to use only ``new construction'' (which also includes adding lanes) costs as the basis for the cost estimates, and to ignore the categories of reconstruction, resurfacing, and realignment. These construction costs include right of way, construction, and a ``small'' allowance for bridges and support facilities.
  The infrastructure costs focus only on the ``urban'' system, not rural, which also makes it possible to differentiate by three size classes: Small Urban, Small Urbanized, and Large Urbanized. The numbers from HERS are in 2002 dollars; FHWA advises escalation to current dollars using its NHCCI, which is available online at \url{http://www.fhwa.dot.gov/policyinformation/nhcci.cfm}); the report in VERPAT escalates uses this Index to escalate to 2010 values.
  The parameter values in this file are average values per lane mile, simplifying the calculations of highway costs to just differentiate investments in freeway vs.~arterial functional class roads.
  Here is a snapshot of the file:

  \begin{longtable}[]{@{}llll@{}}
  \toprule()
  SupplyClass & CapCosts.2000 & OpCosts.2000 & Fare.2000 \\
  \midrule()
  \endhead
  Freeway & 17 & 0 & 0 \\
  Arterial & 7 & 0 & 0 \\
  Bus & 0.71 & 3.4 & 0.91 \\
  Rail & 5.11 & 4.87 & 2.19 \\
  \bottomrule()
  \end{longtable}
\item
  \textbf{Accident Rates (\emph{model\_accident\_rates.csv})}: Road safety impacts are calculated by factoring the amount of VMT. The following national average rates, from the Fatality Analysis Reporting System General Estimates System (2009) by US Department of Transportation, are applied to calculate the number of fatal and injury accidents and the value of property damage:

  \begin{itemize}
  \tightlist
  \item
    Fatal: 1.14 per 100 Million Miles Traveled
  \item
    Injury: 51.35 per 100 Million Miles Traveled
  \item
    Property damage: 133.95 per 100 Million Miles Traveled
  \end{itemize}

  Here is a snapshot of the file:

  \begin{longtable}[]{@{}ll@{}}
  \toprule()
  Accident & Rate \\
  \midrule()
  \endhead
  Fatal & 1.14 \\
  Injury & 51.35 \\
  Property & 133.95 \\
  \bottomrule()
  \end{longtable}
\end{enumerate}

\hypertarget{internal-module-inputs-91}{%
\subsubsection{Internal Module Inputs}\label{internal-module-inputs-91}}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1205}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.3554}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1627}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.3614}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Package
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Module
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Outputs
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule()
\endhead
VESimHouseholds & \protect\hyperlink{createhouseholds}{CreateHouseholds} & \textbf{HhId} & Unique household ID \\
VELandUse & \protect\hyperlink{calculatefutureplacetypes}{CalculateFuturePlaceTypes} & \textbf{HhPlaceTypes} & A place type as assigned to the households \\
VELandUse & \protect\hyperlink{calculatefutureplacetypes}{CalculateFuturePlaceTypes} & \textbf{UrbanPop} & Total population by place types \\
VETransportSupply & \protect\hyperlink{createfutureaccessibility}{CreateFutureAccessibility} & \textbf{FwyLaneMiPCFuture} & Ratio of urbanized area freeway and expressway lane-miles to urbanized area population calculated using future (estimated) data \\
VETransportSupply & \protect\hyperlink{createfutureaccessibility}{CreateFutureAccessibility} & \textbf{ArtLaneMiPCFuture} & Ratio of urbanized area arterial lane-miles to urbanized area population calculated using future (estimated) data \\
VETransportSupply & \protect\hyperlink{createfutureaccessibility}{CreateFutureAccessibility} & \textbf{TranRevMiPCFuture} & Transit revenue miles per capita for the region calculated using future (estimated) data \\
VETransportSupply & \protect\hyperlink{createfutureaccessibility}{CreateFutureAccessibility} & \textbf{BusRevMiFuture} & Bus revenue miles for the region calculated using future (estimated) data \\
VETransportSupply & \protect\hyperlink{createfutureaccessibility}{CreateFutureAccessibility} & \textbf{RailRevMiFuture} & Rail revenue miles for the region calculated using future (estimated) data \\
VEHouseholdVehicles & \protect\hyperlink{assignvehiclefeaturesfuture}{AssignVehicleFeaturesFuture} & \textbf{VehIdFuture} & Unique vehicle ID \\
VEHouseholdVehicles & \protect\hyperlink{assignvehiclefeaturesfuture}{AssignVehicleFeaturesFuture} & \textbf{TypeFuture} & Vehicle body type: Auto = automobile, LtTrk = light trucks (i.e.~pickup, SUV, Van) \\
VEHouseholdVehicles & \protect\hyperlink{assignvehiclefeaturesfuture}{AssignVehicleFeaturesFuture} & \textbf{MileageFuture} & Mileage of vehicles (automobiles and light truck) \\
VEHouseholdVehicles & \protect\hyperlink{assignvehiclefeaturesfuture}{AssignVehicleFeaturesFuture} & \textbf{VehiclesFuture} & Number of automobiles and light trucks owned or leased by the household \\
VEHouseholdTravel & \protect\hyperlink{calculatetraveldemandfuture}{CalculateTravelDemandFuture} & \textbf{TruckDvmtFuture} & Average daily vehicle miles traveled by trucks estimated using model estimations of future year data \\
VEHouseholdTravel & \protect\hyperlink{calculatetraveldemandfuture}{CalculateTravelDemandFuture} & \textbf{FuelGallonsFuture} & Average daily fuel consumption in gallons by each household estimated using model estimations of future year data \\
VEHouseholdTravel & \protect\hyperlink{calculatetraveldemandfuture}{CalculateTravelDemandFuture} & \textbf{FuelCo2eFuture} & Average daily Co2 equivalent greenhouse gas emissions by each household estimated using model estimations of future year data \\
VEHouseholdTravel & \protect\hyperlink{calculateinduceddemand}{CalculateInducedDemand} & \textbf{TransitTrips} & Policy adjusted transit trips \\
VEHouseholdTravel & \protect\hyperlink{calculatepolicyvmt}{CalculatePolicyVmt} & \textbf{DvmtPolicy (bzones)} & Average daily vehicle miles traveled by place types after policy adjustments \\
VEHouseholdTravel & \protect\hyperlink{calculatepolicyvmt}{CalculatePolicyVmt} & \textbf{DvmtPolicy (households)} & Average daily vehicle miles traveled by households after policy adjustments \\
VEHouseholdTravel & \protect\hyperlink{calculatepolicyvmt}{CalculatePolicyVmt} & \textbf{DvmtPolicy (vehicles)} & Average daily vehicle miles traveled by vehicles after policy adjustments \\
VEHouseholdTravel & \protect\hyperlink{calculatepolicyvmt}{CalculatePolicyVmt} & \textbf{LtVehDvmtPolicy} & Average daily vehicle miles traveled by light vehicles by households after policy adjustments \\
VEHouseholdTravel & \protect\hyperlink{calculatepolicyvmt}{CalculatePolicyVmt} & \textbf{DailyParkingCostPolicy} & Daily parking cost calculated after making policy adjustments \\
VETransportSupplyUse & \protect\hyperlink{calculatecongestionpolicy}{CalculateCongestionPolicy} & \textbf{LtVehDvmtPolicy} & Daily vehicle miles travelled by light vehicles in the region calculated using model estimation of future data after adjusting for policies \\
VETransportSupplyUse & \protect\hyperlink{calculatecongestionpolicy}{CalculateCongestionPolicy} & \textbf{BusDvmtPolicy} & Daily vehicle miles travelled by bus in the region calculated using model estimation of future data after adjusting for policies \\
VETransportSupplyUse & \protect\hyperlink{calculatecongestionpolicy}{CalculateCongestionPolicy} & \textbf{MpgAdjLtVehPolicy} & Average fuel efficiency adjustment for light vehicles in the region calculated using model estimation of future data after adjusting for policies \\
VETransportSupplyUse & \protect\hyperlink{calculatecongestionpolicy}{CalculateCongestionPolicy} & \textbf{MpgAdjBusPolicy} & Average fuel efficiency adjustment for buses in the region calculated using model estimation of future data after adjusting for policies \\
VETransportSupplyUse & \protect\hyperlink{calculatecongestionpolicy}{CalculateCongestionPolicy} & \textbf{MpgAdjTruckPolicy} & Average fuel efficiency adjustment for heavy trucks in the region calculated using model estimation of future data after adjusting for policies \\
VETransportSupplyUse & \protect\hyperlink{calculatecongestionpolicy}{CalculateCongestionPolicy} & \textbf{MpgAdjHhPolicy} & Average fuel efficiency adjustment for households in the region calculated using model estimation of future data after adjusting for policies \\
\bottomrule()
\end{longtable}

\hypertarget{module-outputs-95}{%
\subsubsection{Module Outputs}\label{module-outputs-95}}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  \textbf{EmissionsMetric}: The amount of greenhouse gas emissions per day by place-types
\item
  \textbf{FuelMetric}: The amount of fuel consumed per day by place-types
\item
  \textbf{CostsMetric}: The annual traveler cost (fuel + charges)
\item
  \textbf{FuelGallonsMetric}: Average daily fuel consumption in gallons after policy
\item
  \textbf{FuelCo2eMetric}: Average daily Co2 equivalent greenhouse gas emissions after policy
\item
  \textbf{FutureCostPerMileMetric}: Total fuel cost per mile after policy
\item
  \textbf{TotalCostMetric}: Total fuel cost after policy
\item
  \textbf{RailPowerMetric}: Annual power consumption by rail
\item
  \textbf{TruckFuelMetric}: Annual truck fuel consumption
\item
  \textbf{BusFuelMetric}: Annual bus fuel consumption
\item
  \textbf{TruckCo2eMetric}: Annual greenhouse gas emissions by truck
\item
  \textbf{BusCo2eMetric}: Annual greenhouse gas emissions by bus
\item
  \textbf{RailCo2eMetric}: Annual greenhouse gas emissions by rail
\item
  \textbf{HighwayCostMetric}: Regional highway infrastructure costs
\item
  \textbf{TransitCapCostMetric}: Regional transit infrastructure costs
\item
  \textbf{TransitOpCostMetric}: Regional transit operating costs
\item
  \textbf{TransitRevenueMetric}: Annual fare revenue
\item
  \textbf{FatalIncidentMetric}: Number of fatal incidents
\item
  \textbf{InjuryIncidentMetric}: Number of incidents with injuries
\item
  \textbf{PropertyDamageMetric}: Amount of incidents with property damage
\item
  \textbf{TruckConsumptionMetric}: Annual truck fuel consumption by fuel type
\item
  \textbf{BusConsumptionMetric}: Annual bus fuel consumption by fuel type
\end{enumerate}

\protect\hyperlink{contents}{Top} \protect\hyperlink{definitions}{Definitions} \protect\hyperlink{inputs-and-outputs}{Inputs/Outputs}\\
\#\# Development and Installation

This section describes the installation and usage of VERPAT.

\hypertarget{installation-of-visioneval-and-verpat}{%
\subsection{Installation of VisionEval and VERPAT}\label{installation-of-visioneval-and-verpat}}

VERPAT and the VisionEval framework are implemented in R, a statistical programming language and environment. Both R and VERPAT are open source and freely available. The installation of VERPAT is a two-step process.

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  Install R
\item
  Install VisionEval and VERPAT
\end{enumerate}

These are described in {[}{[}Getting Started: Installation and Setup \textbar{} Getting-Started\#installation-and-setup{]}{]}.

\hypertarget{running-the-verpat-model}{%
\subsection{Running the VERPAT model}\label{running-the-verpat-model}}

Once VisionEval and VERPAT have been installed, a directory with sample data for Multnomah County, Oregon will be present at \texttt{../VisionEval/sources/models/VERPAT}. (Note \texttt{..} refers to the parent directory of the installation directory).

The \texttt{VERPAT} directory serves the dual purposes of providing sample data and serving as a template for local modification to other locations.

It contains two subdirectories and several files:

The \texttt{defs} directory contains five {[}{[}model definition files \textbar{} VERPAT-Inputs-and-Parameters\#model-definition-files{]}{]}, also described in the \href{https://github.com/visioneval/VisionEval/blob/master/api/model_system_design.md\#61-model-directory-structure}{Model System Design document}. These contain settings that define the model run.

The \texttt{inputs} directory contains a number of CSV and JSON files that provide inputs for the modules. Each module specifies what input files it needs. These are described in {[}{[}Input Files \textbar{} VERPAT-Inputs-and-Parameters\#input-files{]}{]} and in the \href{https://github.com/visioneval/VisionEval/blob/master/api/model_system_design.md\#64-model-inputs}{Model System Design document}.

To change the conditions in the model, these input files are modified (see \protect\hyperlink{modifying-the-scenario}{Modifying the scenario}).

The \texttt{run\_model.R} file is described in the \href{https://github.com/visioneval/VisionEval/blob/master/api/model_system_design.md\#5-model-system-layers}{Model System Design document} and consists of calls to the modules that make up the model.

\href{VERPAT-Tutorial-images/verpat_run_model.png}{\includegraphics{VERPAT-Tutorial-images/verpat_run_model.png}}

To run this file in R, see instructions at {[}{[}Getting Started: Running VE Models \textbar{} Getting-Started\#running-ve-models{]}{]}. That page describes running VERPAT via both the \href{https://github.com/visioneval/VisionEval/wiki/Getting-Started\#running-verpat-or-verspm-from-within-r}{R console} and using \href{https://github.com/visioneval/VisionEval/wiki/Getting-Started\#running-vegui-from-github-to-run-verpat-or-verspm}{VEGUI}.

The remaining files in the directory are \texttt{README.md}, a brief text file with a link to {[}\protect\hyperlink{getting-started}{Getting Started}{]}, and \texttt{VERPAT.Rproj}, a file for use with RStudio (a text editor and integrated development environment for R).

\hypertarget{modifying-the-scenario}{%
\subsubsection{Modifying the scenario}\label{modifying-the-scenario}}

As described above, the \texttt{VisionEval/sources/models/VERPAT} directory contains sample input files for Multnomah County, Oregon. These can be modified or replaced to investigate the impacts of policy changes or to model a different region.

To modify a scenario, the appropriate input files are edited. For example, to increase bicycle usage, the file \href{https://github.com/visioneval/VisionEval/wiki/VERPAT-Inputs-and-Parameters\#region_light_vehiclescsv}{\texttt{inputs/region\_light\_vehicles.csv}} would be modified in Excel, LibreOffice, or a text editor to change the \texttt{DataValue} of \texttt{TargetProp} from 0.2 to 0.4:

The required input files are described in detail in the \href{https://github.com/visioneval/VisionEval/blob/master/api/model_system_design.md\#6-model-layer-description}{Model System Design document}.

\hypertarget{model-output}{%
\subsubsection{Model output}\label{model-output}}

The output data are contained in a \emph{datastore}, which can be either an HDF5 file or a directory of RData files. The datastore is described in detail in the \href{https://github.com/visioneval/VisionEval/blob/master/api/model_system_design.md\#65-the-datastore}{Model System Design document}.

In this case (below), the datastore is a directory of RData files. It has a hierarchical structure, with directories for each year that the model is run, plus a \texttt{Global} folder for output that is not year specific.

The year directories contain subdirectories for each geographic level, each containing RData files.

The \texttt{Global} directory contains data that do not vary by model run year such as model parameters or geographic tables.

Each of the Rda files contains a single R vector called \texttt{Dataset} with attributes describing the data.

\hypertarget{exporting-data-to-csv}{%
\subsubsection{Exporting Data to CSV}\label{exporting-data-to-csv}}

At the end of the model run, a subset of the data are automatically exported from the Datastore to a set of CSV files. These files will be placed in the model directory in a subfolder called \texttt{outputs}. To export data manually, the script located in \texttt{../sources/models/export\_output\_to\_csv.R} can be modified to suit.

\hypertarget{developer}{%
\chapter{Developer Documentation}\label{developer}}

\hypertarget{developer-orientation}{%
\section{Developer Orientation}\label{developer-orientation}}

\hypertarget{assumptions-prerequisites}{%
\subsection{Assumptions + prerequisites}\label{assumptions-prerequisites}}

\begin{itemize}
\tightlist
\item
  Understand {[}{[}R\textbar{}\url{https://cran.r-project.org}{]}{]}
\item
  Understand basic statistics, data analysis, and modeling principles
\item
  Understand how to build {[}{[}R packages\textbar{}\url{https://support.rstudio.com/hc/en-us/articles/200486488-Developing-Packages-with-RStudio}{]}{]}
\item
  Understand how to use GitHub and {[}{[}TravisCI\textbar{}\url{https://travis-ci.org/}{]}{]}
\item
  Understand {[}{[}RShiny\textbar{}\url{https://shiny.rstudio.com}{]}{]} and {[}{[}shinytest\textbar{}\url{https://github.com/rstudio/shinytest}{]}{]} if contributing to the User Interface
\end{itemize}

\hypertarget{get-visioneval-running}{%
\subsection{Get VisionEval running}\label{get-visioneval-running}}

\begin{itemize}
\tightlist
\item
  Use the {[}{[}Quick Start\textbar Getting-Started{]}{]} guide to download and run an example
\end{itemize}

\hypertarget{understand-the-development-principles-and-organization-of-visioneval-framework}{%
\subsection{Understand the development principles and organization of VisionEval framework}\label{understand-the-development-principles-and-organization-of-visioneval-framework}}

\begin{itemize}
\tightlist
\item
  Review {[}{[}System Design Documentation\textbar{}\url{https://github.com/visioneval/VisionEval/blob/master/api/model_system_design.md}{]}{]}
\item
  Review {[}{[}Contribution Criteria\textbar Contribution-Review-Criteria{]}{]}
\end{itemize}

\hypertarget{skim-useful-references-to-know-about}{%
\subsection{Skim useful references to know about}\label{skim-useful-references-to-know-about}}

\begin{itemize}
\tightlist
\item
  VE {[}{[}style guide \textbar{}\url{https://github.com/visioneval/VisionEval/blob/master/api/Coding_Guidelines.md}{]}{]}
\item
  GitHub repo {[}{[}processes / branching and versioning plan \textbar{} Working-Together{]}{]}
\item
  {[}{[}Testing requirements, test data, and running tests\textbar Automated-Testing{]}{]}
\item
  Developer {[}{[}roadmap\textbar Development-Roadmap{]}{]}
\item
  Organization and naming of packages and modules, see {[}{[}VE Name Registry\textbar{}\url{https://github.com/visioneval/VisionEval/blob/master/sources/modules/VENameRegistry.json}{]}{]} {[} Status: to be developed {]}
\item
  Original GREENSTEP {[}{[}documentation \textbar{} \url{https://github.com/gregorbj/RSPM/blob/master/Version_3.5/Documentation/GreenSTEP-RSPM_Documentation_20151220.docx}{]}{]}
\item
  Organization of data store and test data, see {[}{[}VE Name Registry\textbar{}\url{https://github.com/visioneval/VisionEval/blob/master/sources/modules/VENameRegistry.json}{]}{]} {[} Status: to be developed {]}
\item
  List of useful functions in the API for developers {[} Status: to be developed; see {[}{[}API\textbar{}\url{https://github.com/visioneval/VisionEval/tree/master/api}{]}{]} for now {]}
\end{itemize}

\hypertarget{go-thru-relevant-package-development-tutorials}{%
\subsection{Go thru relevant Package Development Tutorials}\label{go-thru-relevant-package-development-tutorials}}

\begin{itemize}
\tightlist
\item
  Vignette for adding a module to existing package {[} Status: needs to be developed {]}
\item
  Vignette for making changes to existing module {[} Status: needs to be developed {]}
\end{itemize}

\hypertarget{understand-licensing}{%
\subsection{Understand licensing}\label{understand-licensing}}

\begin{itemize}
\tightlist
\item
  VisionEval uses this \href{https://github.com/visioneval/VisionEval/blob/master/LICENSE}{LICENSE}
\item
  Each package has a DESCRIPTION file and a LICENSE file
\item
  The source files do not contain license and/or copyright information
\end{itemize}

\hypertarget{contribution-guidelines}{%
\section{Contribution Guidelines}\label{contribution-guidelines}}

When contributing to VisionEval, the set of \protect\hyperlink{review-criteria}{questions} below will be asked of the contribution. These review criteria help ensure contributions to VisionEval satisfy the \href{https://github.com/visioneval/VisionEval/wiki/Goals-and-Objectives-of-VisionEval-Model-System}{Goals and Objectives} of the system. Make sure to review the {[}{[}Developer Orientation\textbar Developer-Orientation{]}{]} before making a submittal. Questions are categorized by review type. The automated test system also provides some helpful information where identified.

\hypertarget{review-process}{%
\subsection{Review Process}\label{review-process}}

To submit a contribution for review, issue a pull request with a comment introducing your contribution. The comment should include a brief overview, responses to the \protect\hyperlink{review-criteria}{questions}, and pointers to related information. The entire submittal should ideally be self contained so the documentation of the methods should be in the R package as well. The Repository Manager and {[}{[}Review Team\textbar Review-Team-Charter{]}{]} Chair will handle the review request, comment on each question, complete the \protect\hyperlink{feedback}{feedback} form, and reply to the pull request. Its a good idea to setup a pre-submittal meeting to discuss questions and better understand expectations. See the \href{Example-Review}{example submittal and review} for more information.

\hypertarget{review-criteria}{%
\subsection{Review Criteria}\label{review-criteria}}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 8\tabcolsep) * \real{0.5000}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 8\tabcolsep) * \real{0.1250}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 8\tabcolsep) * \real{0.1250}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 8\tabcolsep) * \real{0.1250}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 8\tabcolsep) * \real{0.1250}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Review Question
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Test System Help
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Review Team - Software
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Review Team - Documentation
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Review Team - Methods
\end{minipage} \\
\midrule()
\endhead
1. \textbf{Consistent with Design Specs}. Does it contain all the elements that are required by the VisionEval \href{https://github.com/visioneval/VisionEval/blob/master/api/model_system_design.md}{system specifications}? To help ease maintenance of VE, it is recommended to minimize the use of new R libraries, and to reuse R libraries used by existing VE modules when possible. & & x & x & x \\
2. \textbf{Valid Theory and Methods}. Why is it better, and/or different than \href{https://github.com/visioneval/VisionEval/tree/master/sources/modules}{existing modules}? Does it do good science and provide documentation justifying this claim? Is it consistent with good practice in strategic modeling? How might it overlap with \href{https://github.com/visioneval/VisionEval/wiki/Modules-and-Packages}{existing modules}? How does it fit within the VE ecosystem of modules? If multiple functions, documentation summarizing the functions and their variables is recommended (\href{Example-Review}{example submittal and review}) & & & x & x \\
3. \textbf{Documentation}. Is the module documentation complete? Does it include documentation of model estimation, algorithms, and instructions for using? & & & x & x \\
4. \textbf{Regional Estimation Ready} (if applicable). If the module allows the estimation of regional parameters, does it provide default data, does it have clear documentation of what the estimation data needs to be and how it is to be formatted, and does it include proper data specifications to ensure that the user's input data are correct? & & x & x & x \\
5. \textbf{Geography}. Is it based on geographic definitions that are consistent with the model system definitions? & & & x & x \\
6. \textbf{Runtime}. Does the module compute quickly enough and provide documentation justifying this claim? & & x & x & \\
7. \textbf{Complete Code and Data}. Does it includes all source files and data? If a contributed module does not include all source data, it should include a minimal example data file for testing and so it is clear what data structure is needed to run the module. It should also include clear instructions on how to fetch the data and/or a clear explanation of why non-included data is confidential and contact information for data owners. & x & x & x & \\
8. \textbf{Non-R code} (if applicable). Does the module only call R code and packages that work on all operating systems? If the code includes any non-R code (e.g.~FORTRAN, C++) will that code compile on all operating systems? & x & x & & \\
9. \textbf{License}. Is it licensed with the VisionEval \href{https//github.com/visioneval/VisionEval/blob/master/LICENSE}{license} that allows the code to be freely distributed and modified and includes attribution so that the `provenance' of the code can be tracked? Does it include an official release of ownership from the funding agency? & x & & & \\
10. \textbf{Framework}. Does it only interact with the computing environment by returning a properly structured list to the framework (i.e.~it does not modify the global environment, does not read or write files, and only calls framework functions that are allowed)? Does it pose any security risk to the user (i.e.~if applicable, it uses unsecured methods for authentication?) & x & x & & \\
11. \textbf{Pass Automated Tests}. Does it include regression tests to enable checking that consistent results will be returned when updates are made to the framework and/or R programming environment? & x & x & & \\
12. \textbf{Sufficient Automated Test}s. Does it include \href{Automated-Testing}{sufficient test coverage} and test data? Does it pass the \href{https://github.com/visioneval/VisionEval/blob/master/api/functions_summary.md\#testmodule}{\texttt{testModule}} test which validates that it will run correctly in the model system? If possible, does it test against the existing RVMPO example? & x & x & & \\
13. \textbf{Other}. Any other comments? Such as implementation issues (e.g., impact on other modules or the VisionEval framework, changes to automated testing, confidential or oversized data issues), or suggestions for changes to improve developer experience with VisionEval. & & x & x & x \\
\bottomrule()
\end{longtable}

\hypertarget{feedback-1}{%
\subsection{Feedback}\label{feedback-1}}

The Review Team will provide feedback for each review criteria above and tag each submittal category as follows:

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.4571}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1429}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.2714}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1286}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Status
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Software
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Documentation
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Methods
\end{minipage} \\
\midrule()
\endhead
Accept & & & \\
Accept but recommend revisions & & & \\
Do not accept & & & \\
Abstain & & & \\
\bottomrule()
\end{longtable}

\hypertarget{changelog-for-new-versions}{%
\section{Changelog for New Versions}\label{changelog-for-new-versions}}

When releasing a new version of VisionEval, we will:

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  Include the significant changes in the release notes template below
\item
  Record the significant changes in the changelog here
\end{enumerate}

\hypertarget{release-notes-template}{%
\subsection{Release Notes Template}\label{release-notes-template}}

For \href{https://github.com/VisionEval/VisionEval/releases}{releases}
Make updates where marked with \texttt{**}

If there are changes to inputs that users need to know, make a note of that.
Make a note of which models a given new or updated module has been tested with.

\begin{verbatim}
Packaged versions of the VisionEval framework are provided as .zip files. Each has an installation .bat file for Windows to automatically prepare the R environment.

These installers are packaged for R versions from **3.5.1 to 3.6.1**.

This release includes the following changes:
**
- Change 1
- Change 2
- Change 3
**

Instructions for Installing
Install one of the supported R versions using its default options (R **3.5.1 to 3.6.1**). Make sure to leave the box checked that offers to add R to the Windows registry.
Download the corresponding installer .zip file
Unzip the downloaded installer into an empty folder of your choice
Double-click “VisionEval.bat” (this is the standard entry point – use it every time to start VisionEval)
a. If VisionEval has not run before, the batch file and associated script will set up a few pointers and the convenience functions (see below)
b. Otherwise, it will move straight to step 5.a below
A command window will briefly appear followed by one of these:
a. RGUI with the “Welcome to VisionEval!” message (you’re good to go)
b. Your default browser pointing at the R download page (if you forgot to do step 1 or if you picked the wrong version) – just redo step 1 or steps 2/3 to get them consistent
The previous instructions for launching VEGUI, VERPAT, etc. remain the same.
a. vegui() starts VEGUI
b. verpat() runs VERPAT in RGUI
c. verspm() runs VERSPM in RGUI
d. Note that there’s no helper function to run VESTATE from the command line yet – that will be added to the installation in a future release. You can just setwd() to the VE-State folder under “models” and then source(‘Run_Model.R’).
\end{verbatim}

\hypertarget{changelog}{%
\subsection{Changelog}\label{changelog}}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 2\tabcolsep) * \real{0.3200}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 2\tabcolsep) * \real{0.6800}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Version
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Changes
\end{minipage} \\
\midrule()
\endhead
0.1 & Initial release \\
0.1.1 & Numerous updates to VELandUse and other modules \\
1.0 & Added \texttt{ve.export} Fixed bugs in unit conversions Fixed issue with Azone file order dependence  \\
1.0.1 & \\
& \\
\bottomrule()
\end{longtable}

\hypertarget{testing-strategies}{%
\section{Testing Strategies}\label{testing-strategies}}

The VisionEval model system and design of the framework software incorporates a number of features that facilitate automated testing to assure that modules will work within the system. Perhaps the most significant feature is the `data typing' system that requires modules to completely specify all data that the module handles in some fashion: as model inputs, as data fetched from the common datastore, and as data that is output to be saved in the common datastore. These data specifications establish `contracts' that assure data consistency and the framework software includes a number of functions that use the specifications to check consistency. These functions help to ensure that modules will work properly together.

Following are some of the checks that are done:
- Input data are checked against input data specifications;
- Input data geography is checked against specified model geography;
- Module specifications are checked for correctness;
- Module specifications for data to be fetched from the datastore are checked against the specifications for the data stored in the datastore; and,
- Module outputs are checked for consistency with the module specifications for those outputs.

Because of these checks and related checks, it is possible to automate a number of tests that allow a module developer to test that their module (when supplied with suitable test inputs) will work in the VisionEval model system. These checks are carried out by the `testModule' function. In addition, this test can be run automatically when the package is built, enabling the developer to check at built time that the module works and the correctness to be checked as when the package is added to the VisionEval repository.

The data specification system also enables a model to be thoroughly checked before it is run. This will greatly reduce, if not eliminate, model runtime crashes. This is done by the `initializeModel' function. The function checks:

\begin{itemize}
\tightlist
\item
  Whether all module packages are installed, those packages contain the identified modules, and all module specifications are correct (have required attributes);
\item
  Specified model geography and consistency of model inputs with the geography;
\item
  Whether model inputs are consistent with specifications; and,
\item
  Whether every module when it is called will have the data it needs to run (either in specified input files or the datastore) and whether the attributes of those data are consistent with the specifications for the module.
\end{itemize}

These checks that are built into the framework software make it possible to implement automated checking of VisionEval module packages and VisionEval model whenever a module package and/or model is added to or modified in the VisionEval repository.

\hypertarget{ui-testing}{%
\subsection{UI Testing}\label{ui-testing}}

VEGUI is an application that allows a user to run various VisionEval models. VEGUI is tested using shinytest to ensure its functionality and its usability. Multiple test scripts are written to test different functionalities. Following is a list of tests currently implemented:

\begin{itemize}
\tightlist
\item
  \href{https://github.com/VisionEval/VisionEval/blob/develop/sources/VEGUI/tests/opentest.R}{open\_test}: Checks if VEGUI opens and closes without any glitch,
\item
  \href{https://github.com/VisionEval/VisionEval/blob/develop/sources/VEGUI/tests/run_verpat_model_test.R}{run\_verpat\_model\_test}: Checks if VEGUI opens, runs a VERPAT model, collects all the results, and closes properly.
\end{itemize}

A test requires a set of expected results (images or json) to make comparisons and draw conclusions. A test is successful if it finishes. A failed test will prompt the user with the differences compared to the expected results.
The main test script \href{https://github.com/visioneval/VisionEval/blob/develop/sources/VEGUI/run_vegui_test.R}{run\_vegui\_test} serves has a host and makes call to all the aforementioned tests.

The following steps describe a process to create a new test and/or the expected results:
- Use \href{https://github.com/visioneval/VisionEval/blob/develop/sources/VEGUI/tests/test_template.R}{test\_template} as a template to write your own script;
- Set the parameter \texttt{createExpectedResults} in the main test script \href{https://github.com/visioneval/VisionEval/blob/develop/sources/VEGUI/run_vegui_test.R}{run\_vegui\_test} to TRUE (this will allow a user to create a new set of expected results);
- Source the new test script in \href{https://github.com/visioneval/VisionEval/blob/develop/sources/VEGUI/run_vegui_test.R}{run\_vegui\_test};
- Run \href{https://github.com/visioneval/VisionEval/blob/develop/sources/VEGUI/run_vegui_test.R}{run\_vegui\_test} to save the expected results;
- Set the parameter \texttt{createExpectedResults} in the main test script \href{https://github.com/visioneval/VisionEval/blob/develop/sources/VEGUI/run_vegui_test.R}{run\_vegui\_test} to FALSE;
- Run \href{https://github.com/visioneval/VisionEval/blob/develop/sources/VEGUI/run_vegui_test.R}{run\_vegui\_test} to ensure that the test finishes successfully.

\hypertarget{test-system}{%
\subsection{Test System}\label{test-system}}

\href{https://travis-ci.org/}{TravisCI} services are used to automatically test all modules and models to assure that they work properly. Here are a few details on the test system:
- Tests automatically run with every commit and the pass/fail status is at the bottom of the README as \href{https://github.com/visioneval/VisionEval/tree/develop}{rendered by GitHub}
- The current Travis build and test script is \href{https://github.com/visioneval/VisionEval/blob/develop/.travis.yml}{here}, which includes all the steps to install, build, and run all the VE resources. To add a new module or model, add an additional line to the \texttt{env} property for the module or model. This will result in an additional parallel build process using Travis' \href{https://docs.travis-ci.com/user/customizing-the-build/\#Build-Matrix}{build matrix}. Example environment variables are:

\begin{verbatim}
- FOLDER=sources/modules/VELandUse (folder location relative to the root; note framework, modules, and models are fixed)
- SCRIPT=tests/scripts/test.R (test script to run, which is required by the VisionEval specification)
- TYPE=module (either module or model)
- DEPENDS=VE2001NHTS,VESimHouseholds (list of packages required to run this module or model)
\end{verbatim}

\begin{itemize}
\tightlist
\item
  The build logs, which are helpful when errors happen, are \href{https://travis-ci.org/VisionEval/VisionEval/builds/}{here}
\item
  Mysterious failures sometimes happen. If the log reports a substantive error (e.g.~missing documentation, missing package), the problem probably lies in a damaged cache. See the next item, and the following that describes how to delete the cache.
\item
  VE testing with Travis makes use of \href{https://docs.travis-ci.com/user/caching/}{caching} due to Travis' \href{https://docs.travis-ci.com/user/customizing-the-build\#Build-Timeouts}{job time limit}. In order for all the jobs to complete within the time limit, installation of the package dependencies need to be done from the cache (rather than from source). The caches are built in the first stage of the tests, and then modules are built and tested using the cached contents.
\item
  To delete a Travis cache (if you suspect it might be causing problems), go to the failed build entry via your Dashboard or list of recent build attempts and open the failed build. Look for the ``More Options'' menu in the upper right, choose ``Caches'' and find the cache associated with the branch whose build failed. Hit the ``garbage can'' icon on the right to delete it. Then you can return to the build and push the ``Restart Build'' button.
\end{itemize}

\hypertarget{add-or-modify-a-package}{%
\section{Add or Modify a Package}\label{add-or-modify-a-package}}

\hypertarget{api-documentation}{%
\chapter{API Documentation}\label{api-documentation}}

This chapter is a placeholder for module docs built from the latest source code.

\hypertarget{software-framework}{%
\chapter{Software Framework}\label{software-framework}}

\hypertarget{definitions}{%
\section{Definitions}\label{definitions}}

Following are definitions of terms used in this chapter:

\begin{itemize}
\item
  \textbf{Model System}\\
  A definition for a set of related models and a software framework for implementing that definition. Models built in the modeling system are related by the domains being modeled (e.g.~travel, energy consumption, hydrology, etc.), the `agents' being modeled (e.g.~households, cities, watersheds, etc.), how physical space is represented (e.g.~zones, grids, cubes, etc.), how time is represented (e.g.~continuouse vs.~discrete, independent vs.~dependent on past states), and other modeling goals and tradeoffs (e.g.~representational detail, degree of coupling, run times, etc.). The model system definition includes specifications for model modules that can be used in the model system, file structure specifications for organizing model parameters and input data necessary for running a model. The software framework for the model system is a library of code that manages the execution of model modules that are designed to work in the model system.
\item
  \textbf{Model}\\
  A model as used in this document refers to a model such as GreenSTEP that calculates a number of different attributes (e.g.~household size, household income, number of autos owned, vehicle-miles traveled, etc.) that are composed of a number of components (submodels) that each calculate one or a few attributes.
\item
  \textbf{Submodel}\\
  A submodel is the component of a model that calculates one or a few closely related attributes.
\item
  \textbf{Module}\\
  A module, at its heart, is a collection of data and functions that meet the specifications described in this document and that implement a submodel. Modules also include documentation of the submodel. Modules as made available to users in R packages. Typically a set of related modules is included in a package.
\item
  \textbf{Software Framework}\\
  A software framework is a library of code containing functions that manage the execution of modules. These functions manage all interactions between modules, model system variables, and a datastore.
\item
  \textbf{Datastore}\\
  A datastore is a file or set of files for storing all of the inputs used by modules and outputs produced by modules.
\end{itemize}

\hypertarget{model-system-objectives}{%
\section{Model System Objectives}\label{model-system-objectives}}

The GreenSTEP model and related models are disaggregate strategic planning models. They are disaggregate because, like many modern transportation models, they simulate behavior at the individual household level rather than at a more aggregate `zonal' level. This enables the assessment of how prospective policies or other changes could have different impacts on different types of households (e.g.~low income vs.~high income). The models are strategic planning models because they are built to support long-range strategic planning decisions such as community visioning, policy development, and scenario planning. Strategic planning processes most often need to consider a number of possibilities about how the future may unfold and a range of potential actions that might be taken. As a consequence, models built to support strategic planning need to be responsive to a large number of variables and be capable of running quickly so that a large number of runs can be done to explore the decision space. The VisionEval model system supports the development of these types of models. The design objectives for this model system are:

\begin{itemize}
\item
  \textbf{Modularity}\\
  The model system will allow new capabilities to be added in a plug-and-play fashion so models can be improved and extended and so improvements developed for one model can be easily shared with other models. Models are composed of modules that contain all of the data and functionality needed to calculate what they are intended to calculate.
\item
  \textbf{Loose Coupling}
  This objective is closely related to the \emph{modularity} objective. Loose coupling is necessary if modules are to be added to or removed from models in a plug-and-play fashion. Loose coupling means that the parameter estimation for a submodel is independent of the parameter estimation of any other submodel. It also means that dependencies be modules are well defined and minimized. Most communication between modules is carried out through the transfer of data that is mediated by the software framework.
\item
  \textbf{Openness}\\
  The VisionEval software framework and all modules developed to operate in the framework will be completely open. Being open means more than sharing ones work. It means completely revealing ones work so that others can assess how the module works. All module code, parameters, data, and specifications will be open to inspection and licensed using an open source license (e.g.~Apache 2) that allows users to use, modify, and redistribute as they see fit. In addition, modules will provide access to data and code to estimate the model that the module implements. Finally, a module will contain complete documentation that users may use to document the model that the module is a part of.
\item
  \textbf{Geographic Scalability}\\
  The model system will enable models to be applied at a variety of geographic scales including metropolitan areas of various sizes, states of various sizes, and multi-state regions. Although models are applied at different scales, they share common geographic definitions to enable modules to be more readily shared between models built for the modeling system.
\item
  \textbf{Data Accessibility}\\
  Model results will be saved in a datastore that is easy to query. Results can be filtered, aggregated, and post-processed to produce desired performance measures.
\item
  \textbf{Regional Calibration Capability}\\
  Modules will have built in capbilities for estimating and calibrating submodel parameters from regional data when necessary.
\item
  \textbf{Speed and Simplicity}\\
  Since the intent of the model system is to support the development of strategic planning models, it is important that the models be able to address a large number factors and be able to model a large number of scenarios. For this to occur, the framework needs to run efficiently and modules need to be simple and need to run quickly.
\item
  \textbf{Operating System Independence}
  The model system will run on any of the 3 major operating systems; Windows, Apple, or Linux. As is the case with GreenSTEP and related models, the VisionEval model system is written in the R programming language. Well-supported and easily installed R implementations exist for these operating systems. Modules will be distributed as standard R packages that can be compiled on all operating systems. Code that is written in another language may be included in a module package as long as it can be compiled in an R package that is usable on all 3 operating systems.\\
  To help ease maintenance of VE, it is recommended to minimize the use of new R libraries, and to reuse R libraries used by existing VE modules when possible.
\item
  \textbf{Preemptive Error Checking}\\
  The model system will incorporate extensive data checking to identify errors in the model setup and inputs at the very beginning of the model run. Error messages will clearing identify the causes of the errors. The objective of early error checking is to avoid model runtime errors that waste model execution time and are difficult to debug.
\end{itemize}

\hypertarget{model-system-software-design-approach}{%
\subsection{Model System Software Design Approach}\label{model-system-software-design-approach}}

The VisionEval software framework uses many of the ideas from the functional programming paradigm to create a modeling system that is modular and robust. The framework is implemented in the R programming language which is largely a functional programming language having a well developed system for managing packages of modules. This section describes how the VisionEval model system incorporates functional programming design ideas and the reason for using the R programming language for implementing those ideas.

\hypertarget{functional-programming-inspirations-for-system-design}{%
\subsubsection{Functional Programming Inspirations for System Design}\label{functional-programming-inspirations-for-system-design}}

There are a number of programming paradigms for organizing software and implementing modular system designs. The VisionEval system design is most inspired by the functional programming paradigm. This section describes key characteristics of the functional design paradigm that influence the VisionEval model system design to achieve the design objectives.

The functional programming paradigm views computing as sequences of data transformations where a functions successively process a data stream with the outputs of one function becoming the inputs of the next. Functions are data processing machines with defined inputs and outputs. Given the same set of inputs, functions always produce the same set of outputs. Although functions have requirements for the data they process, they are not bound to the data in the same way as functions (methods) in the object-oriented programming paradigm. This characteristic of the functional paradigm fits well with the `loose coupling' objective for the model system where model modules only interact with one another through the transfer of data mediated by the framework software. The design is for each module to act like a function with the framework software calling it, providing the data the module needs, and saving the data that the module produces.

Another key characteristic of the functional programming paradigm is that functions should have no side effects. A function should only change the state of variables within it's scope and should have no effects on the system outside of its scope. The only way that a function interacts with the rest of the program is by returning the result of its calculations to whatever function called it. Such functions are called pure functions. This characteristic makes software more testable, reliable, and maintainable. It is key aspect of the VisionEval model system design. The system is designed so that modules act like pure functions. The only thing that they do is return the results of their calculations to the software framework. They do not make any changes to program variables outside their scope and they do not read from or write to files. This approach makes the framework very robust and modular because code within a module can be changed without affecting any other module.

The framework software itself is also designed to minimize side effects in order to make it more robust and maintainable. Global state variables for a model run are kept to a minimum. Almost all model run state information is kept in the `ModelState.Rda' file (Section 6.6). A common datastore holds all of the results of model computations. The only side effects in the framework code are reading model definition and input files, reading and writing to the common datastore, and writing to a log file.

A third key characteristic of some functional programming languages is the extensive use of data typing. While compiled languages in general use data typing to check the properness of functions and expressions when a program is compiled, some functional programming languages like Haskell and Elm make extensive use of defining and checking different data types for function inputs and outputs. They also include a type notation system for documenting functions. This makes it easier to check and understand the code. An analogous approach is used in the VisionEval system design. Each module includes specifications for all data that it consumes and all data that it produces. This enables the framework software to check that modules will work properly together and enables a model to be checked thoroughly before it is run so to eliminate run time errors. It also clearly documents to others what data the module uses and what it produces.

\hypertarget{use-of-the-r-software-environment-to-implement-the-model-system}{%
\subsubsection{Use of the R Software Environment to Implement the Model System}\label{use-of-the-r-software-environment-to-implement-the-model-system}}

The VisionEval model system is built in the R programming language for statistical computing and graphics. R is an open-source variant of the S programming language developed at Bell Labs but is more functional in nature than S. Although R was primarily developed to be an interactive programming environment for data analysis, the language has a full set of features that enables it to be used for all steps in the modeling process from data preparation and cleaning through model implementation and output visualization. The language is augmented by thousands of packages supporting data analysis, programming, and visualization. The interactive nature of the language, range of capabilities, and large number of supporting packages enabled the the GreenSTEP model to be developed in an agile manner in a relatively short period of time. At the time, no other programming language had this range of capabilities and the large number of supporting packages. The VisionEval model system uses the R language for the following reasons:\\
1) The existing code base for the GreenSTEP model and related models is written in R. Writing the VisionEval software framework in R enables this code base to be moved to the new framework with much less effort than would be required if it had to be rewritten in another programming language.\\
2) R is open-source software that is available on all major operating systems so the model system will be operating system independent.
3) R has a very good and well tested package system for packaging modules that is well supported with documentation and build tools. The package system and development tools also include easy-to-use capabilities for documentation, including literate programming. This simplifies the development of the software framework and simplifies the process for module developers to produce complete and well documented modules.\\
4) R has the most extensive set of statistical and other data analysis packages available. Because of this, almost any type of model can be estimated using R and therefore, modules can contain not only full documentation of model estimation, but also scripts that allow model estimation to be replicated and rerun using regional data.\\
5) R is an interpreted language with capable (and free) integrated development environments. Because the state of objects can be easily queried, the process of building and testing models is simplified. This makes it easier for modelers who don't come from a computer science background to develop models to be deployed in the model system.\\
6) Although as an interpreted language, R is slower than compiled languages, most of the core functions are ``vectorized'' functions that are written in C. This means that R programs can carry out many operations very quickly. In addition, it is relatively easy to call functions written in compiled languages such as C++, C, and Fortran to R so that if a pure R model is not fast enough, portions can be written as functions in a compiled language and linked to the R code.\\
7) R has a large user base and so it is relatively easy for users to get answers to programming questions.

\hypertarget{model-system-layers}{%
\section{Model System Layers}\label{model-system-layers}}

The VisionEval model system is composed of 3 layers:\\
1) \textbf{Model}: The model layer defines the structure of the model and organizes all of the modules into a coherent model. The model layer includes a module run script, model definition files, model input files, and common datastore.\\
2) \textbf{Modules}: The module layer is the core of a model. Modules contain all of the code and parameters to implement submodels which are the building blocks of models.\\
3) \textbf{Software Framework}: The software framework layer provides the functionality for controlling a model run, running modules, and interacting with the common datastore.\\
These layers are illustrated in Figure 1. Following sections describe the design and specifications for each layer.

\textbf{Figure 1. Overview of VisionEval Model System}\\
\includegraphics{img/framework_overview.png}

A VisionEval model is built from a set of compatible modules, a set of specifications for the model and geography, a set of scenario input files, and a simple R script that initializes and runs the model. Following is a simple example of a model script:

\begin{verbatim}
#Initialize and check the model
initializeModel(
  ParamDir = "defs",
  RunParamFile = "run_parameters.json",
  GeoFile = "geo.csv",
  ModelParamFile = "model_parameters.json",
  LoadDatastore = FALSE,
  DatastoreName = NULL,
  SaveDatastore = TRUE
)

#Run modules for all forecast years
for(Year in getYears()) {
  runModule(
    ModuleName = "CreateHouseholds", 
    PackageName = "SimHouseholds",
    RunFor = "AllYears",
    RunYear = Year)
  runModule(
    ModuleName = "PredictWorkers",
    PackageName = "SimHouseholds",
    RunFor = "AllYears",
    RunYear = Year)
  runModule(
    ModuleName = "PredictLifeCycle",
    PackageName = "SimHouseholds",
    RunFor = "AllYears",
    RunYear = Year)
  runModule(
    ModuleName = "PredictIncome",
    PackageName = "SimHouseholds",
    RunFor = "AllYears",
    RunYear = Year)
  ...
}

\end{verbatim}

A full model run script is shown in Appendix A.

The script calls two functions that are defined by the software framework; \emph{initializeModel} and \emph{runModule}. The \emph{initializeModel} function initializes the model environment and model datastore, checks that all necessary modules are installed, and checks whether all module data dependencies can be satisfied. The arguments of the \emph{initializeModel} function identify where key model definition data are found. The \emph{initializeModel} function allows users to load an existing datastore. This functionality is useful for scenario management, retaining and building upon the results of previous model runs. For example, a set scenarios could be managed in the following manner using the capability for loading datastores:\\
- A base year model is calibrated and validated
- Future land use scenarios are developed and run (e.g.~3 different scenarios having different growth and development assumptions). Each land use scenario loads the datastore for the base year model.
- Future transportation policy scenarios are developed and run for each land use scenario (e.g.~3 different scenarios having different policy assumptions). Each transportion policy scenario loads the datastore for a land use scenario model run.

The \emph{runModule} function, as the name suggests, runs a module. The arguments of the \emph{runModule} function identify the name of the module to be run, the package the module is in, and whether the module should be run for all years, only the base year, or for all years except for the base year. This approach makes it easy for users to combine modules in a `plug-and-play' fashion. One simply identifies the modules that will be run and the sequence that they will be run in. This is possible in large part for the following reasons:\\
1) The modules are loosely coupled. Modules only communicate to one another by passing information to and from the datastore or by calling the services of another module. Module calling is described in detail in section 8.1.2.2.
2) The framework establishes standards for key shared aspects of modules including how data attributes are specified and how geography is represented.\\
3) Every module includes detailed specifications for the data that are inputs to the module and for the data that are outputs from the module. These data specifications serve as contracts that the framework software enforces.

The runModule function and how it is implemented by the software framework allows developers and advanced users to create different module variants and save them in a package having a different name. Users can then identify the alternative package in the runModule function call to use the variant version. For example, the VEPowertrainsAndFuels package includes data and modules that model key vehicle powertrain characteristics such as powertrain type proportions (ICEV, HEV, PHEV, BEV) by vehicle type and vehicle model year. A developer or advanced used could create package version that reflects Energy Information Agency (EIA) projections and name it VEPowertrainsAndFuelsxEIA, and another version which reflects California zero emissions vehicle standards and name it VEPowertrainsAndFuelsxCAZEV. The user could then specify which package version they want to run in the runModule function call. This functionality also allows developers and advanced users to test out module changes without altering an `official' package.

These features and how they are designed are described in detail in following sections.

\hypertarget{model-layer-description}{%
\section{Model Layer Description}\label{model-layer-description}}

The model layer is composed of:\\
- The directory (i.e.~folder) and file structure for organizing scenario inputs and model parameters;\\
- Model parameter files describing the model geography (consistent with standard definitions) and global parameters;\\
- The model run script that lists the model execution steps; and,\\
- The datastore which stores all of the data produced during the execution of the model.\\
Each of these components is described in the following subsections.

\hypertarget{model-directory-structure}{%
\subsection{Model Directory Structure}\label{model-directory-structure}}

A model application has a very simple directory structure as shown in the following representation of a directory tree.

\begin{verbatim}
my_model
|   run_model.R  
|   <ModelState.Rda>  
|   <logXXXX.txt>  
|   <datastore>  
|     
|  
|____defs
|    |   run_parameters.json
|    |   model_parameters.json
|    |   geo.csv  
|    |   units.csv  
|    |   deflators.csv  
|  
|  
|____inputs  
     |   filename.csv  
     |   filename.csv  
     |   ...  
         
\end{verbatim}

The overall project directory, named \emph{my\_model} in this example, may have any name that is allowed by the operating system the model is being run on. One file is placed in this top level directory by the user, ``run\_model.R''. Three additional files, denoted in the diagram by angled brackets, are created in the course of checking and running the model.

The ``run\_model.R'' file, introduced in the previous section, initializes the model environment and datastore, checks that all necessary packages are installed, checks whether data dependencies can be satisfied, and then runs modules in a specified sequence. Data checks are performed before any modules are run to catch any errors. This saves time and the aggravation that occurs when a model run fails in midstream due to incorrect data inputs or other errors due to incorrect model setup. Data checking in advance is possible because every module includes detailed specifications for its input and output data. All scenario input files are checked against specifications to determine whether the required data exist and are correct. In addition, the state of the datastore is `simulated' in the order that each module will be run to determine whether the data each module needs will be available in the datastore. After the model has been initialized and all all data checks are satisfactory, the modules are executed in the sequence prescribed in the script.

The ``ModelState.Rda'' file is a R binary file that contains a list that holds key variables used in managing the model run. The file is created when the model run is initialized and is updated whenever the state of the datastore changes. Framework functions read this file when necessary to validate data and to determine that datastore read and write operations can be completed successfully. This file is described in more detail in section 6.6.

The ``logXXXX.txt'' file is a text file that is created when the model is initialized. This log file is used to record model run progress and any error or warning messages. The `XXXX' part of the name is the date and time when the log file is created.

The ``datastore'' is a file or directory that contains the central datastore for the model. The VisionEval framework supports multiple types of datastore. Currently, two types are supported. The preferred type (designated RD) stores datasets in the form of native R data files. Files are stored in a hierarchical directory structure with the top-level directory named ``Datastore''. Another type (designated H5) stores all data in a single binary \href{}{HDF5} file. The logical structure of these two datastore types are very similar and are described in detail below. Users specify the datastore name in the ``parameters.json'' file (see below).

The ``defs'' directory contains all of the definition files needed to support the model run. Five files are required to be present in this directory: ``run\_parameters.json'', ``model\_parameters.json'', ``geography.csv'', ``deflators.csv'', and ``units.csv''.

The ``run\_parameters.json'' file contains parameters that define key attributes of the model run and relationships to other model runs. The file is a \href{http://www.json.org/}{JSON-formatted} text file. The JSON format is used for several reasons. First, it provides much flexibility in how parameters may be structured. For example a parameter could be a single value or an array of values. Second, the JSON format is well documented and is very easy to learn how to use. It uses standard punctuation for formatting and, unlike XML, doesn't require learning a \href{https://en.wikipedia.org/wiki/Markup_language}{markup language}. Third, files are ordinary text files that can be easily read and edited by a number of different text editors available on all major operating systems. There are also a number of commercial and open source tools that simplify the process of editing and checking JSON-formatted files.

The ``run\_parameters.json'' file specifies the following parameters:

\begin{itemize}
\item
  \textbf{Model} The name of the model. Example: ``Oregon-GreenSTEP''.
\item
  \textbf{Scenario} The name of the scenario. Example: ``High-Gas-Price''.
\item
  \textbf{Description} A short description of the scenario. Example: ``Assume tripling of gas prices''.
\item
  \textbf{Region} The name of the region being modeled. Example: ``Oregon''.
\item
  \textbf{BaseYear} The base year for the model. Example: ``2015''.
\item
  \textbf{Years} An array of all the `forecast' years that the model will be run for. Example: {[}``2025'', ``2050''{]}.
\item
  \textbf{DatastoreName} The name of the datastore. It can be any name that is valid for the operating system. It is recommended that this be named ``datastore.h5'' for HDF5 datastores and ``Datastore'' for R data file datastores.
\item
  \textbf{DatastoreType} A 2-letter abbreviation identifying the datastore type: ``RD'' for R data file datastore, ``H5'' for HDF5 datastore. The framework uses the DatastoreType abbreviation to choose the functions used to initialize the datastore and interact with it.
\item
  \textbf{Seed} This is a number that modules use as a random seed to make model runs reproducible.
\item
  \textbf{RequiredVEPackages} Lists all of the VisionEval packages that contain modules that are called by the model. Note that the required packages that are listed must be consistent with the packages that are identified in the \emph{run\_model.R} script.
\end{itemize}

The ``model\_parameters.json'' can contain global parameters for a particular model configuration that may be used by multiple modules. For example, a model configuration to be a GreenSTEP model may require some parameters that are not required by a model configuration for an RSPM model. Parameters in this file should not include parameters that are specific to a module or data that would more properly be model inputs. While this file is available to establish global model parameters such as the value of time, it should be used sparingly in order enhance transferrability of modules between different models.

The ``geography.csv'' file describes all of the geographic relationships for the model and the names of geographic entities in a \href{https://en.wikipedia.org/wiki/Comma-separated_values}{CSV-formatted} text file. The CSV format, like the JSON format is a plain text file. It is used rather than the JSON format because the geographic relationships are best described in table form and the CSV format is made for tabular data. In addition, a number of different open source and commercial spreadsheet and GIS programs can export tabular data in a CSV-formatted files. The structure of the model system geography is described in detail in Section 6.2 below.

The ``units.csv'' file describes the default units to be used for storing complex data types in the model. The VisionEval model system keeps track of the types and units of measure of all data that are processed. The model system recognizes 4 primitive data types, a number of complex data types (e.g.~currency, distance), and a compound data type. The primitive data types are data types recognized by the R language: `double', `integer', `character', and `logical'. The complex data types such as `distance' and `time' define types of data that have defined measurement units and factors for converting between units. The compound data type combines two or more complex data types whose units are defined in an expression (e.g.~MI/HR where MI is the complex unit for miles and HR is the complex unit for hours). The \emph{units.csv} describes the default units used to store complex data types in the datastore. The file structure and an example are described in more detail in Section 6.3 below.

The ``deflators.csv'' file defines the annual deflator values, such as the consumer price index, that are used to convert currency values between different years for currency demonination. The file structure and an example are described in more detail in Section 6.4 below.

The ``inputs'' directory contains all of the input files for a scenario. All input files are CSV-formatted text files. Each module specifies what input files it needs and names and types of data to be included in the needed files. There are several requirements for the structure of input files. These requirements are described in section 6.5 below.

\hypertarget{model-geography}{%
\subsubsection{Model Geography}\label{model-geography}}

The design of the model system includes the specification of a flexible standard for model geography in order to fulfill the objectives of \emph{modularity} and \emph{geographic scalability}. As a standard, it specifies levels of geographical units, their names, their relative sizes, and the hierarchical relationships between them. It is flexible in that it allows geographical boundaries to be determined by the user and it allows the units in some geographical levels to be simulated rather than being tied to actual physical locations. Allowing simulation of one or more geographic levels enables modules to be shared between models that operate at different scales. For example a statewide model and a metropolitan area model could use the same module for assigning households to land development types even though the statewide model lacks the fine scale of geography of the metropolitan model.

Following is the definition of the geographic structure of the VisionEval model system:

\begin{itemize}
\item
  \textbf{Region}\\
  The region is the entire model area. Large-scale characteristics that don't vary across the region are specified at the region level. Examples include fuel prices and the carbon intensities of fuels.
\item
  \textbf{Azones}\\
  Azones are large subdivisions of the region containing populations that are similar in size to those of counties or Census Public Use Microdata Areas (PUMA). The counties used in the GreenSTEP and EERPAT models and metropolitan divisions used in the RSPM are examples of Azones. Azones are used to represent population and economic characteristics that vary across the region such as demographic forecasts of persons by age group and average per capita income. The Azone level of geography must represent actual geographic areas and may not be simulated.
\item
  \textbf{Bzones}\\
  Bzones are subdivisions of Azones that are similar in size to Census Block Groups. The districts used in RSPM models are examples of Bzones. Bzones are used to represent neighborhood characteristics and policies that may be applied differently by neighborhood, for example in the RSPM:

  \begin{itemize}
  \tightlist
  \item
    District population density is a variable used in several submodels;\\
  \item
    An inventory of housing units by type by district is a land use input; and,\\
  \item
    Carsharing inputs are specified by district.
  \end{itemize}

  In rural areas, Bzones can be used to distinguish small cities from unincorporated areas.

  Bzones may correspond to actual geographic areas or may be simulated. Bzone simulation greatly reduces model input data requirements while still enabling the modeling of land-use-related policies and the effects of land use on various aspects of travel behavior. In VE-RPAT models, Bzones are simulated as \emph{place types} which characterize the intensity and nature of development. In VE-State models, Bzones are synthesized to represent characteristics likely to be found in an actual set of Bzones within each Azone.
\item
  \textbf{Mareas}\\
  Mareas are collections of Azones associated with an urbanized area either because a portion of the urbanized area is located in the Azone or because a substantial proportion of the workers residing in the Azone work at jobs located in the urbanized area. Metropolitan models typically only have one assigned Marea whereas state models may have several. The model system requires that each Azone may be associated with only one Marea. It is also required that all Azones be associated with an Marea. A special Marea named `\textbf{None}' is used to apply to Azones that are not associated with any urbanized area. Mareas are used to specify and model urbanized area transportation characteristics such as overall transportation supply (transit, highways) and congestion. They are also used to specify large scale land-use-related characteristics and policies in models that use Bzone synthesis.
\end{itemize}

Geographical relationships for a model are described in the ``geography.csv'' file contained in the ``defs'' directory. This file tabulates the names of each geographic unit (except for Region) and the relationships between them. Each row shows a unique relationship. Where a unit of geography is not explictly defined (i.e.~it will be simulated), ``NA'' values are placed in the table. Appendix B shows examples of the ``geography.csv'' file where only Azones are specified and where Azones and Bzones are specified. It should be noted that there are no naming conventions for individual zones. The user is free to choose what conventions they will use.

\hypertarget{data-types-units-and-currency-deflators}{%
\subsubsection{6.3. Data Types, Units, and Currency Deflators}\label{data-types-units-and-currency-deflators}}

A key feature of the VisionEval model system that enables modules to be bound together into models is a data specifications system. All datasets that a module requires as inputs and datasets that that a module produces must be specified according to requirements. Section 8 describes these specifications in more detail. This section provides an introduction to the TYPE and UNITS specification requirements to provide context for understanding the ``units.csv'' file in the ``defs'' directory.

The TYPE attribute for a dataset identifies the data type. The UNITS specification identifies the units of measure. The TYPE and UNITS specifications are related. The TYPE attribute affects the values that may be specified for UNITS attribute and how the framework processes the units values. The model system recognizes 3 categories of data types: `primitive', `complex', `compound'. The `primitive' category includes the 4 data types recognized by the R language: double, integer, character, and logical. A dataset that is specified as one of these types has no limitations on how the units of measure are specified. The `complex' category currently includes 13 data types such as currency, distance, and area as shown in the table below. A dataset that is one of these types is limited to specified unit values. For example, the allowed units for the `distance' type are MI, FT, KM, and M (for mile, foot, kilometer, and meter). The `compound' category is composed of the compound data type. For compound data, units are represented as an expression involving the units of complex data types. For example, a dataset of vehicle speeds can be specified as having a TYPE that is `compound' and UNITS that are `MI/HR'. The type is compound because it is made up of two complex types; distance and time. The units are an expression containing distance and time units and the `/' operator. The '*' (multiplication) operator may also be used in the units expression for a compound data type. Appendix C documents all the types and units in more detail.

Although the complex and compound data types limit what values the units attributes may have, specifying these types enables the framework software to take care of unit conversions between modules and the datastore. For example, say that a model datastore contains a dataset for Bzone population density having units of persons per square mile. In this case the TYPE attribute for the data would be `compound' and the UNITS would be `PRSN/SQMI'. If a module which calculates household vehicle travel needs population density measured in persons per acre, the module would specify the UNITS as `PRSN/ACRE' and the framework would take care of converting the density values from the units used in the datastore to the units requested by the module. This simplifies matters for module developers and reduces the likelihood of errors due to data conversions.

Although the units specified by a module for a complex data type may be any of the recognized units (e.g.~for distance - MI, FT, KM and M), this flexibility does not apply to the datastore. Complex data is stored in the datastore in predefined ways to limit potential confusion and simplify unit conversions. The default units file (units.csv) in the ``defs'' directory declares the default units to use for storing complex data types in the datastore. This file has two fields named `Type' and `Units'. A row is required for each complex data type recognized by the VisionEval system. The listing to date of complex types and the default units in the demonstration models are as follows:

\begin{longtable}[]{@{}lll@{}}
\toprule()
Type & Units & Description \\
\midrule()
\endhead
currency & USD & U.S. dollars \\
distance & MI & miles \\
area & SQMI & square miles \\
mass & LB & pounds \\
volume & GAL & gallons \\
time & DAY & days \\
energy & MJ & megajoules \\
people & PRSN & persons \\
vehicles & VEH & vehicles \\
trips & TRIP & trips \\
households & HH & households \\
employment & JOB & jobs \\
activity & HHJOB & households \& jobs \\
\bottomrule()
\end{longtable}

For `currency' data it's not sufficient to convert values to different units, it's also necessary to convert currency values between years to account for the effects of inflation. Because the model parameters estimated in different modules may come from datasets collected in different years, and because model users will most likely want to report currency values in current year terms, it is necessary to convert currency values between years. Currency denominated datasets are stored in the datastore as base year values. When a module needs to use a currency denominated dataset, the framework converts base year values to the year values that the module needs. If a module calculates a currency denominated dataset that is to be saved in the datastore, the framework converts those values from the currency year that the module uses to base year values to save in the datastore. The software framework takes care of the process of converting currency values between years automatically and in a consistent manner. This eliminates the need for model developers to convert currency values. It also allows more flexibility for model users and module developers, and for the evolution of the VisionEval model system with new and improved modules, because it eliminates the need to establish a reference year that is to be used for all modules and models.

Modules specify the year of a currency dataset using a modifier to the the UNITS specification. This is done by adding a period and 4-digit year to the specification. For example, the UNITS specification for year 2000 dollars would be `USD.2000'. Note, however, that this convention does not apply to specifications for currency data that is read in from an input file because the model user is free to establish any currency year they choose for currency inputs. In those cases, the year is specified in the input file. This is explained in Section 6.4.

Currency values are converted between years using a deflator series is defined for the model in the ``deflators.csv'' file in the ``defs'' directory. This file has 2 columns, `Year' and `Value'. Values are needed for all years specified by modules used in a model in addition to the base year and any other years that currency values in input files will be denominated in. For example, if the modules to be used in a model use dollar denominated values for the years 2000 and 2009, the model base year is 2010, and some input data are denominated in 2015 dollars, then at a minimum the ``deflators.csv'' file must include deflators for those years. A more flexible approach would be to have an annual series of deflators running from the earliest year through the latest year. \textbf{Note}: it is not necessary to specify deflators for any future model years (e.g.~2030, 2050). All modules in the model system make calculations in constant (uninflated) dollar terms. Deflators are only used to convert user input values to a constant base and to convert values to the year that is consistent with a module's estimation data.

The UNITS value may also specify a multiplier option for complex and compound data types. This capability exists because modules may use data that are represented in thousands or millions when numbers are very large. For example, freeway and arterial construction costs may be represented in thousands of dollars per mile. A multiplier option is added to a units name by adding a period and then the multiplier expressed in scientific notion where the leading digit must be a 1 (e.g.~1e3 for thousands). For currency units, the multiplier option must follow the year notation. For example, 2010 dollars expressed in thousands would be expressed as `USD.2010.1e3'. Miles traveled expressed in millions would be `MI.1e6'.

\hypertarget{model-inputs-1}{%
\subsubsection{6.4. Model Inputs}\label{model-inputs-1}}

The \emph{inputs} directory contains all of the model inputs for a scenario. A model input file is a table that relates one or more input fields to geographic units and years. Because of the tabular nature of the data, all input files are CSV-formatted text files. The first row of the file contains the headers identifying the data in each column. The columns include each of the data items specified in the input specifications for the module the input file is used for. In addition, the file may be required to have columns labeled \textbf{Geo} and \textbf{Year} depending on which of the following 4 types the input file is:

\begin{itemize}
\item
  \textbf{Inputs apply to the entire region and to all years}: In this case, the input file consists of one data row and each column corresponds to a data item.
\item
  \textbf{Inputs apply to parts of the region and to all model years}: In this case, the input file consists of one data row for each geographic area and the file must include a column labeled \textbf{Geo} that is used for identifying the geographic areas. For example, if the input file applies to Azones and the model has 10 Azones, the file must have 10 rows in addition to the header. The \textbf{Geo} column identifies each of the Azones. Note that only the geographic areas specified in the \emph{geo.csv} may be included in this file. If unlisted geographic areas are included, the model run will stop during initialization and the log will contain messages identifying the error(s).
\item
  \textbf{Inputs apply to the entire region but vary by model year}: In this case, the input file consists of one data row for each model year and the file much include a column labeled \textbf{Year} that is used for identifying the model years. For example, if the model run parameters specify that the model is to be run for the years 2010 and 2040, the input file must contain 2 rows in addition to the header. The \textbf{Year} column identifies each of the model run years. Note that only the specified model run years may be included in this file. Note that the file may include data for other years in addition to the data for the module run years. When the inputs are processed, the non-model-run year data will be ignored.
\item
  \textbf{Inputs apply to parts of the region and vary by model year}: In this case the input file consists of one data row for each combination of geographic area and model year. The file must include a \textbf{Geo} column and a \textbf{Year} column. There must be as many rows as there are combinations of geography and years. For example if an input file applies to Azones and the model specifies 10 Azones and 2 model run years, the file must have 20 rows to accommodate all the combinations in addition to a header row. As with the case described above, inputs may be included for non-model-run years as well as model-run years.
\end{itemize}

By convention, input file names which include inputs that vary by level of geography, include the level of geography in the input file name. File names should be descriptive. Following are some examples:\\
- azone\_hh\_pop\_by\_age.csv\\
- azone\_hhsize\_targets.csv\\
- bzone\_dwelling\_units.csv

The name of an input file and the names of all the columns except for the ``Geo'' and ``Year'' columns are specified by the module that requires the input data. In addition to specifying the file and column names, the module specifies:\\
- The level of geography the inputs are specified for (e.g.~Region, Azone, Bzone, Czone, Marea);\\
- The data types in each column (e.g.~integer, double, currency, compound);\\
- The units of the data in each column (e.g.~MI, USD); and,\\
- Acceptable values for the data in each column.

The module section describes these specifications in more detail below. Appendix D shows examples of the two types of input files.

The field names of the input file (other than the ``Geo'' and ``Year'' fields) can encode year and unit multiplier information in addition to the name of the data item. This is done by breaking the name into elements with periods (.) separating the elements as follows:

For `currency' data type: \textbf{Name.Year.Multiplier}. For example, \texttt{TotalIncome.2010.1e3} would be the field name for total income in thousands of 2010 dollars.
For all other data types: \textbf{Name.Multiplier}. For example, \texttt{TotalDvmt.1e6} would be the field name for total daily vehicle miles traveled in millions.

Where:
\textbf{Name} is the dataset name. This must be the same as specified in the module that calls for the input data.\\
\textbf{Year} is the four-digit representation of the year that the currency values are denominated for. For example if a currency dataset is in 2010 dollars, the `Year' value would be `2010'. The field name for a currency field must include a `Year' element.
\textbf{Multiplier} is an optional element which identifies the units multiplier. It must be expressed in scientific notation (e.g.~1e3) where the leading digit must be 1. This capability exists to make it easier for users to provide data inputs that may be more conveniently represented with a smaller number of digits and an exponent. For example, annual VMT data for a metropolitan area or state is often represented in thousands or millions.

The the VisionEval framework uses the year and multiplier information to convert the data to be stored in the datastore. All currency values are stored in base year currency units and all values are stored without exponents.

\hypertarget{the-datastore}{%
\subsubsection{6.5. The Datastore}\label{the-datastore}}

VisionEval changes the approach to storing model data from that of the GreenSTEP and RSPM models and related models. Those models stored data primarily in R data frames as binary files (rda files). The largest of these files are the simulated household files which store all of the information for all simulated households in an Azone (e.g.~counties in GreenSTEP). All the data for households in the Azone are stored in a single data frame where each row corresponds to a record of an individual household and the columns are household attributes. Vehicle data for households are stored as lists in the data frame. This approach had some benefits:\\
- Storage and retrieval are part of the R language: one line of code to store a data frame, and one line of code to retrieve;\\
- It is easy to apply models to data frames; and\\
- Vehicle data can be stored as lists within a household data frame, eliminating the need to join tables.

The simplicity of this approach helped with getting GreenSTEP from a concept into an operational model quickly. However, several limitations have emerged as GreenSTEP and related models have been used in various applications including:\\
- Large amounts of computer memory are required when modeling Azones that have large populations. This necessitates either expanding computer memory or limiting the size of Azones;\\
- It is not easy to produce summary statistics from the simulated household files for a region; and\\
- The number of non-household data files has proliferated in order to store various aggregations for use in the model and for later summarization.

Finally, because the GreenSTEP/RSPM approach did not define a consistent data model, it does not sufficiently support the goal of modularity, and it does not support the use of alternative datastores. To overcome these limitations the VisionEval model system specifies a consistent datastore design. This design has been implemented in two types of datastores. One uses R binary files within a hierarchical directory structure. The other uses the HDF5 file format for storing model data. The HDF5 file format was developed by the National Center for Supercomputing Applications (NCSA) at the University of Illinois and other contributors to handle extremely large and complex data collections. For example, it is used to store data from particle simulations and climate models. It also is the basis for the new open matrix standard for transportation modeling, \href{https://github.com/osPlanning/omx}{OMX}.

VisionEval datastores are organized in a `column-oriented' and hierarchical structure illustrated below. The lowest level of the hierarchy are datasets which are vectors of data values. This matches well the data objects (lists and data frames) commonly used in R programs and calculation methods which are commonly vectorized. Datasets in R datastores are R binary files. In HDF5 datastores, they are a portion of the HDF5 file and are called datasets in the HDF5 nomenclature. Datasets are organized in tables which are groups of datasets that all have the length. For example in the diagram below, Azone is a dataset containing the names of each of the Azones, and Age0to14 is a dataset containing the number of people of age 0 to 14 in each each Azone. These datasets and all those listed directly below them are contained in the Azone table. In R datastores, tables are represented by directories. In HDF5 nomenclature they are called groups. Tables that represent values for a particular model run year are grouped together. The year groups are named with the model run years (e.g.~2010, 2050) and they contain tables for every geographic level as well as `Household', `Worker', and `Vehicle' tables. Tables that contain datasets whose values don't vary by model run year are contained in the `Global' group (directory). These include tables of model parameters, geographic tables, and any other table of datasets that apply to all model run years.

\begin{verbatim}
|____Global
|    |____Model
|    |        ...
|    |
|    |____Azone
|    |        ...
|    :
|
|____2010  
|    |____Region
|    |        ...
|    |
|    |____Azone
|    |        Azone
|    |        Marea
|    |        Age0to14
|    |        Age15to19
|    |        Age20to29
|    |        Age30to54
|    |        Age55to64
|    |        Age65Plus
|    |        ...
|    |
|    |____Bzone
|    |        ...
|    |
|    |____Marea
|    |        ...
|    |
|    |____Household
|    |        ...
|    |
|    |____Worker
|    |        ...
|    |
|    |____Vehicle
|    |        ...
|    :
|
|
|____2050  
|    |____ ...
|    |        ...
:    :
\end{verbatim}

This structure is adequate to store all of the data that are used by the GreenSTEP/RSPM models and their offshoots. It can also be easily expanded to serve new modeling capabilites. For example if a module is added to model building stock, a `Buildings' table could be added to each `forecast year' group. In addition, this structure can accommodate matrix data as well as vector data, if a future module makes use of a distance matrix, that matrix could be added to either the `Global' group or the `forecast years' groups.

Note that the Azone table in the diagram includes an Marea dataset. This datasets identifies the Marea associated with each Azone. Every table includes datasets that enable data to be joined between tables. Some are geographic as in the example. Others use other identifiers. For example the Worker table includes a household identifier. Although the tables include the identifiers which enable data to be joined between tables, the VisionEval framework does not include special features for joining datasets that come from different tables. That is done by the module code.

\hypertarget{the-model-state-file}{%
\subsubsection{6.6 The Model State File}\label{the-model-state-file}}

The model state file, ``ModelState.Rda'', maintains a record of all of the model run parameters and an inventory of the contents of the datastore. The software framework functions use this information to control the model run and to perform checks on module and data validity. The model state file contains a list which has the following components:\\
- Model: The name of the model\\
- Scenario: The name of the scenario\\
- Description: A description of the scenario\\
- Region: The name of the region being modeled\\
- BaseYear: The model base year\\
- Years: A list of years the model is being run for\\
- DatastoreName: The file name for the datastore\\
- DatastoreType: The datastore storage type. Currently implemented types are ``RD'' (R data) or ``H5'' (HDF5).
- Seed: The value to be used for the random seed\\
- RequiredVEPackages: The names of VisionEval module packages that are used in the model run
- LastChanged: The date and time of the last change to the model state\\
- Deflators: A data frame of deflator values by year\\
- Units: A data frame of default units for complex data types\\
- RequireVEPackages: A list of all the VisionEval packages that must be installed in order for the model to run
- LogFile: The file name of the log file\\
- Geo\_df: A data frame containing the geographic definitions for the model\\
- BzoneSpecified: A logical value identifying whether Bzones are specified for the model\\
- CzoneSpecified: A logical value identifying whether Czones are specified for the model\\
- Datastore: A data frame containing an inventory of the contents of the datastore\\
- ModuleCalls\_df: A data frame identifying the sequence of `runModule' function calls and arguments
- ModulesByPackage\_df: A data frame identifying the modules located in each of the VisionEval packages required to run the model
- DatasetsByPackage\_df: A data frame identifying the datasets located in each of the VisionEval packages required to run the model

The Datastore component is updated every time the data is written to the datastore. This enables framework functions to `know' the contents of the datastore without having to access the datastore. The Datastore component keeps track of all groups and datasets in the datastore and their attributes such as the length of tables and the specifications of datasets.

\hypertarget{overview-of-module-and-software-framework-layer-interactions}{%
\subsection{7. Overview of Module and Software Framework Layer Interactions}\label{overview-of-module-and-software-framework-layer-interactions}}

Modules are the heart of the VisionEval model system. Modules contain all of the code and parameters to implement submodels that are the building blocks of models. Modules are distributed in standard R packages. A VisionEval module package contains one or modules that implement related functions. For example, the VESimHouseholds package contains a set of modules related to creating a set of synthetic households and giving those households attributes including persons by age, workers by age, life cycle, and income. A module contains the following components:\\
- Documentation of the module and of submodel parameter estimation/calibration.\\
- Data and code for estimating the submodel(s) implemented by the module;\\
- Functions for estimating/calibrating parameters using regional data supplied by the user (if necessary);\\
- Data specifications for data that is to be loaded from input files, data that is to be loaded from the datastore, and data that is to be saved to the datastore; and,\\
- One or more functions for implementing the module.

The software framework provides all of the functionality for managing a model run. This includes:
- Checking module specifications for consistency with standards;
- Checking input files for compliance with module specifications;
- Processing input files to load the input data into the datastore;
- Simulating the data transactions in a model run to check whether the datastore will contains the data each module needs when the module needs it;
- Loading module packages;\\
- `Running' modules in accordance with the `run\_model.R' script;\\
- Fetching from the datastore, data that is required by a module;\\
- Saving to the datastore, data that a module produces and specifies is to be saved; and,\\
- Converting measurement units and currency years when necessary.

When the software framework ``runs'' a module it does several things. First, it reads in the module data specifications and the main module function which performs the submodel calculations. Then it reads in all the datasets from the datastore that the module specifies. It also reads in the contents of the model state file. It puts these datasets into an input list and then it calls the main module function with this input list as the argument to the function call. This list, which by convention is called `L', contains 4 components: Global, Year, BaseYear, and G. The Global, Year, and BaseYear components contain lists which are composed of table components which are in turn composed of dataset components. The Global component relates to the `global' group in the datastore. The Year component relates to the the group in the datastore for the model run year. For example, if the model run year is 2040, the Year component will contain data that is read from the `2040' group in the datastore. The BaseYear component relates to the group in the datastore which represents the base year for the model. For example if the model base year is 2010, the BaseYear component will contain data that is read from the `2010' group in the datastore. The list contains a BaseYear component as well as a Year component because modules may need to compute changes in a dataset between the base year and the model run year. Each of these components will contain a component for each table the the module requests data from. The table component is also a list which then contains components for all the requested datasets. For example, if a module needs the household income (`Income') and household size (`HhSize') datasets from the `Household' table in the model run year (e.g.~2040), the Year component of `L' will contain a `Household' component which will contain an `Income' component and a `HhSize' component. The `G' component of `L' contains the model state list which contains all the information described in Section 6.6.

If a module calls another module, the list also contains a component named with the alias the module assigns to the called module. This component includes Global, Year, and BaseYear components containing datasets identified in the specifications for the called module. Module calling is explained in detail in section 8.1.2.

When the module executes, it returns a list containing all of the information that the module specifies is to be written to the datastore. By convention, this list is called `R'. This list also has Global, Year, and BaseYear components which are structured in the same way that `L' is structured. The table and dataset components of the list also include some attributes (metadata) which are described in Section 8.

\hypertarget{modules-1}{%
\section{Modules}\label{modules-1}}

All modules are made available in the form of standard R packages that meet framework specifications. Packages may be in source form or installed form. The following presentation refers to the source form of VisionEval packages. When a package is installed (built) the R system runs the scripts in the R directory and saves functions that are defined within and datasets that are saved by the script. The structure of this installed package is not covered by this document with the exception of the \emph{module\_docs} directory in the installed package. If the module developer follows the guidelines for module documentation, a \emph{module\_docs} directory will be included in the installed package. This will include module documentation in the form of markdown documents.

A package may contain more than one module. The package organization follows the standard organization of R packages. The structure is shown in the following diagram. The components are described below in the order that they are presented in the diagram. The file names are examples.

\begin{verbatim}
VESimHouseholds
|   DESCRIPTION
|   NAMESPACE
|   LICENSE
|     
|
|____R
|    |   CreateHouseholds.R  
|    |   PredictWorkers.R
|    |   CreateEstimationDatasets.R
|    |   ...
|
|
|____inst  
|    |    NOTICE
|    |____extdata  
|         |   pums_households.csv
|         |   pums_households.txt
|         |   pums_persons.csv
|         |   pums_persons.txt
|         |   ...
|         
|
|____data-raw
|    |    some_processed_model_dataset.rda
|    |    ...
|    
|
|____tests
     |____scripts
     |    |   test.R
     |    |   test_functions.R
     |    |   verspm_test.R 
     |    |   vestate_test.R    
     |
     |____verspm
     |    |   logs
     |    |   |   Log_CreateHouseholds.txt
     |    |   |   ...
     |    |
     |    |   ModelState.Rda
     |    
     |____vestate
     |    |   ...
     |
     |    ...
\end{verbatim}

The \emph{DESCRIPTION} and \emph{NAMESPACE} files are standard files required by the R package system. There are good sources available for describing the required contents of these files (\href{http://r-pkgs.had.co.nz/}{R Packages}), so that will not be done here. Most of the entries in these files can be produced automatically from annotations in the R scripts that will be described next, using freely available tools such as \href{https://github.com/hadley/devtools}{devtools} and \href{https://www.rstudio.com/}{RStudio}. The \emph{LICENSE} file contains the text for the Apache 2 license which is the open source license that should be used for VisionEval packages. The accompanying Apache 2 \emph{NOTICE} file is in the \emph{inst} directory.

\hypertarget{the-r-directory-1}{%
\subsubsection{8.1. The R Directory}\label{the-r-directory-1}}

The \emph{R} directory is where all the R scripts are placed which define the modules that are included in the package. Each module is defined by a single R script which has the name of the module (and the .R file extension). A module script does 4 things:\\
1) It specifies the model and estimates model parameters. Model estimation datasets may be processed by the script or may be loaded from other sources (see below).\\
2) It defines all the specifications for data that the module depends on.\\
3) It defines all of the functions that implement the submodel.
4) It includes test code used during module development

When a binary (installed) package is built from the source package, each R script is run; estimation datasets are processed, model parameters are saved, module specifications are saved, functions are parsed into a more efficient form. Following section describe the structure of a module R script in more detail. An example of the \emph{AssignTransitService} module script from the \emph{VETransportSupply} package is included in Appendix E.

By convention, the module script is organized into 4 sections reflecting the list above. Following sections 8.1.1 to 8.1.4 explain each module script section in detail. Section 8.1.1 explains how model specification and estimation is handled. Subsection 8.1.1.1 focuses in on the handling of model estimation data which, in some cases, may use specialized scripts. Section 8.1.2 explains how to write module specifications which tell the framework how the module is to be run, what input data are to be processed, what data are to be retrieved from the datastore, and what data are to be saved to the datastore. Subsection 8.1.2.1 focuses in on the \emph{OPTIONAL} specification that module developers can use to enable optional model inputs. Subsection 8.1.2.2 focues in the the \emph{CALL} specification that enables modules to call other modules to perform calculation services. Section 8.1.3 describes how to write a main function and supporting functions to implement a module. Section 8.1.4 explains test code that is commonly included in a module to assist the module developer in the module development process. Finally, Section 8.1.5 explains a special module named \emph{Initialize} that may be included in a package. The purpose of this module is to enable module developers to include specialized input data checks and preparation.

\hypertarget{model-specification-and-estimation-1}{%
\paragraph{8.1.1 Model Specification and Estimation}\label{model-specification-and-estimation-1}}

As the name suggests, this section of the script handles tasks related to processing model estimation data, model specification, and model parameter estimation. This should be done in a manner which enables others to understand the structure of the model, the data it is based on, and how parameters are estimated. It should enable others to replicate the process and to test modifications. Typically, model specification and estimation code does 4 things: loading the data to be used, defining functions that carry out key specification and estimation procedures, applying the functions to produce objects that define the model(s), and saving the model objects.

Models vary in their complexity. In some modules the model may simply be an algorithm with decision rules or asserted parameters. In this case, there is no need to fill out this section of the script. For example, the \emph{AssignLifeCycle} module in the \emph{VESimHouseholds} package assigns lifecycle codes to households using rules regarding the numbers of adults, children, and workers in the household. In cases like this, the model estimation and specification section will be empty. In other cases, models will be quite complex and this section of the script will be extensive. For example, the ``CalculateHouseholdDvmt'' module does the following in the process of building models and comprises hundreds of lines of code:\\
- Estimate a binomial logit model of the probability that a household has any DVMT
- Estimate a linear model of the amount of household DVMT given that a household has any DVMT
- Estimate a dispersion factor for the linear model so that the variance of modeled DVMT matches the observed variance
- Simulate household DVMT 1000 times by stochastically applying the binomial and linear models
- Calculate quantiles of simulated DVMT
- Estimate a linear model of average DVMT using the simulation data
- Estimate models of the DVMT quantiles as a function of the average DVMT

Model estimation data preparation may also be extensive. Whether it is or not, documenting the data used in building a model and making those data available are key to making the models reproducible and extensible. Moreover, for some modules it is important that model users be able to have model parameters reflect the conditions for their region. For example, the \emph{CreateHouseholds}, \emph{PredictWorkers}, and \emph{PredictIncome} modules use Census public use microdata sample data for the region to estimate parameters. There are several ways that model estimation data can be handled in the VisionEval model system. These are described in detail in Section 8.1.1.1.

The model estimation code should also save objects to use in documenting the modules such as:
1. Model summary statistics such as is produced when a model object (such as a linear model estimated using the \emph{lm} function) is processed by the \emph{summary} function;
2. Data frames, tables, and matrices; and,
3. Graphs or other static data visualizations.

The first two should be saved as objects just like any other object saved to implement a model. It is suggested that these documentation objects be stored in a list along with the model that they document. For example, follow is a portion of the \emph{PredictIncome.R} script which saves (and documents) a list which contains the household income model including documentation of the summary statistics for the model.

\begin{verbatim}
#Save the household income model
#-------------------------------
#' Household income model
#'
#' A list containing the income model equation and other information needed to
#' implement the household income model.
#'
#' @format A list having the following components:
#' \describe{
#'   \item{Type}{a string identifying the type of model ("linear")}
#'   \item{Formula}{makeModelFormulaString(IncModel_LM)}
#'   \item{PrepFun}{a function that prepares inputs to be applied in the linear model}
#'   \item{OutFun}{a function that transforms the result of applying the linear model}
#'   \item{Summary}{the summary of the linear model estimation results}
#'   \item{SearchRange}{a two-element vector specifying the range of search values}
#' }
#' @source PredictIncome.R script.
"HHIncModel_ls"
usethis::use_data(HHIncModel_ls, overwrite = TRUE)
\end{verbatim}

The \emph{Summary} component of this list shows the summary statistics for the model. As explained in the module documentation section below, this can be automatically inserted into the module documentation. It is recommended that the \emph{capture.output} function be used rather than the \emph{print} function to capture model summary statistics because the \emph{print} function will insert line numbers. This method can be used to save other text that can then be inserted into module documentation. This example also shows how objects are documented and saved.

It can also be useful to save data frames, tables, matrices to use in the model documentation. These can be saved like any other data object and then inserted as described in the module documentation section.

Graphs or other visualizations are saved in a different manner. If these are saved as an image file in ``png'' format, they can be inserted into the module documentation. They must be saved to the ``data'' directory to do so. Following is an example:

\begin{verbatim}
#Plot comparison of observed and estimated income distributions
png(
  filename = "data/reg-hh-inc_obs-vs-est_distributions.png",
  width = 480,
  height = 480
)
plot(
  density(IncObs_),
  xlim = c(0, 200000),
  xlab = "Annual Dollars ($2000)",
  main = "Distributions of Observed and Predicted Household Income \nRegular Households"
  )
lines(density(IncEst_), lty = 2)
legend("topright", legend = c("Observed", "Predicted"), lty = c(1,2))
dev.off()
\end{verbatim}

There are many ways that a module developer can code the model specification and parameter estimation procedures. However this is done, the code should be well organized and commented so that it is understandable to reviewers. All code should follow the VisionEval coding guidelines. In addition, it is highly recommended that code be grouped into functions to aid understandability and reduce unnecessary code repetition which can lead to errors. Complex functions should be well documented. Function documentation is done using \href{http://r-pkgs.had.co.nz/man.html}{Roxygen syntax}. Following is an example of the code which estimates a housing choice model (single-family vs.~multifamily) in the \emph{PredictHousing} module of the \emph{VELandUse} package.

\begin{verbatim}
#Define a function to estimate housing choice model
#--------------------------------------------------
#' Estimate housing choice model
#'
#' \code{estimateHousingModel} estimates a binomial logit model for choosing
#' between single family and multifamily housing
#'
#' This function estimates a binomial logit model for predicting housing choice
#' (single family or multifamily) as a function of the supply of housing of
#' these types and the demographic and income characteristics of the household.
#'
#' @param Data_df A data frame containing estimation data.
#' @param StartTerms_ A character vector of the terms of the model to be
#' tested in the model.
#' @return A list which has the following components:
#' Type: a string identifying the type of model ("binomial"),
#' Formula: a string representation of the model equation,
#' PrepFun: a function that prepares inputs to be applied in the binomial model,
#' OutFun: a function that transforms the result of applying the binomial model.
#' Summary: the summary of the binomial model estimation results.
#' @import visioneval stats
#Define function to estimate the income model
estimateHousingModel <- function(Data_df, StartTerms_) {
  #Define function to prepare inputs for estimating model
  prepIndepVar <-
    function(In_df) {
      Ah <-
        c("Age15to19",
          "Age20to29",
          "Age30to54",
          "Age55to64",
          "Age65Plus")
      Out_df <-
        data.frame(t(apply(In_df[, Ah], 1, function(x) {
          AgeLvl_ <- 1:5 #Age levels
          HhAgeLvl_ <- rep(AgeLvl_, x)
          HeadOfHh_ <- numeric(5)
          if (max(HhAgeLvl_) < 5) {
            HeadOfHh_[max(HhAgeLvl_)] <- 1
          } else {
            if (all(HhAgeLvl_ == 5)) {
              HeadOfHh_[5] <- 1
            } else {
              NumMidAge <- sum(HhAgeLvl_ %in% c(3, 4))
              NumElderly <- sum(HhAgeLvl_ == 5)
              if (NumMidAge > NumElderly) {
                HeadOfHh_[max(HhAgeLvl_[HhAgeLvl_ < 5])] <- 1
              } else {
                HeadOfHh_[5] <- 1
              }
            }
          }
          HeadOfHh_
        })))
      names(Out_df) <- paste0("Head", Ah)
      Out_df$HhSize <- In_df$HhSize
      Out_df$Income <- In_df$Income
      Out_df$RelLogIncome <- log1p(In_df$Income) / mean(log1p(In_df$Income))
      Out_df$Intercept <- 1
      Out_df
    }
  EstData_df <- prepIndepVar(Data_df)
  EstData_df$SingleFamily <- as.numeric(Data_df$HouseType == "SF")
  #Define function to make the model formula
  makeFormula <-
    function(StartTerms_) {
      FormulaString <-
        paste("SingleFamily ~ ", paste(StartTerms_, collapse = "+"))
      as.formula(FormulaString)
    }
  #Estimate model
  HouseTypeModel <-
    glm(makeFormula(StartTerms_), family = binomial, data = EstData_df)
  #Return model
  list(
    Type = "binomial",
    Formula = makeModelFormulaString(HouseTypeModel),
    Choices = c("SF", "MF"),
    PrepFun = prepIndepVar,
    Summary = summary(HouseTypeModel)
  )
}

#Estimate the binomial logit model
#---------------------------------
#Load the household estimation data
Hh_df <- VESimHouseholds::Hh_df
#Select regular households
Hh_df <- Hh_df[Hh_df$HhType == "Reg",]
Hh_df$Income[Hh_df$Income == 0] <- 1
#Estimate the housing model
HouseTypeModelTerms_ <-
  c(
    "HeadAge20to29",
    "HeadAge30to54",
    "HeadAge55to64",
    "HeadAge65Plus",
    "RelLogIncome",
    "HhSize",
    "RelLogIncome:HhSize"
  )
HouseTypeModel_ls <- estimateHousingModel(Hh_df, HouseTypeModelTerms_)
rm(HouseTypeModelTerms_)
\end{verbatim}

As can be seen in this example, most of the code defines and documents a function which estimates a binomial choice model given a estimation dataset and a list of model variable names. This function does a number of things including transforming estimation data, creating a model formulation from the list of independent variables, estimating the variables, and returning a list of model components. After the function is defined, it is applied using the model estimation data and a specified list of independent variables. This approach to model specification and estimation makes it easy for a module developer to try out different model specifications, measuring their relative performance, and documenting the results.

The approach used in this example takes advantage of some helper functions in the framework software. The \emph{makeModelFormulaString} function takes an R model formula object and converts it into a string representation. When the model is applied in the module, the string is parsed and evaluated with a data frame of independent variables. This provides a compact way to store a model and a fast way to apply it. Several other framework functions assist with applying models in this form. The \emph{applyBinomialModel} applies a binomial logit model. The \emph{applyLinearModel} applies a linear regression model. Both of these functions enable the models to self calibrate to match an input target. For example, the \emph{PredictHousing} module adjusts the constant of the model so that the proportions of households in single-family vs.~multifamily dwelling units matches the housing supply in the area. The \emph{applyBinomialModel} does this efficiently by calling the \emph{binarySearch} function which implements a binary search algorithm.

Module developers are not limited to using the previous approach to specifying and implementing a model. Most if not all R functions that estimate models also have companion prediction functions to apply the estimated model to a new set of data. This is often the simplest and best way to apply a model. One drawback of this approach, however, is that the object that is returned by the model estimation function and that is used in making a prediction is often very large because it includes a copy of all of the estimation data and datasets used to calculate model statistics. If the model estimation datasets are very large, this will pose a problem for keeping the module package in a central repository. In that case, the module code needs to remove parts of the model object that are not necessary for prediction. For example, the \emph{AssignVehicleOwnership} module in the \emph{VEHouseholdVehicles} package uses an ordered logit model to predict household auto ownership for households owning one or more vehicles. The model is estimated using data from the 2001 NHTS so the model object returned by the estimation function (\emph{clm} in the \emph{ordinal} package) is large. Portions of the model object not needed by the corresponding prediction function are removed. It is often a matter of trial and error to find out how much can be removed from the model object without adversely affecting the prediction function.

\begin{verbatim}
#Model number of vehicles of non-zero vehicle households
EstData_df <- EstData_df[EstData_df$ZeroVeh == 0,]
EstData_df$VehOrd <- EstData_df$NumVeh
EstData_df$VehOrd[EstData_df$VehOrd > 6] <- 6
EstData_df$VehOrd <- ordered(EstData_df$VehOrd)
AutoOwnModels_ls$Metro$Count <-
  clm(
    VehOrd ~ Workers + LogIncome + DrvAgePop + HhSize + OnlyElderly + IsSF +
      IsUrbanMixNbrhd + LogDensity + TranRevMiPC,
    data = EstData_df,
    threshold = "equidistant"
  )
#Trim down model
AutoOwnModels_ls$Metro$Count[c("fitted.values", "model", "y")] <- NULL
\end{verbatim}

After a model has been estimated, the model objects which embody the model need to be saved as part of the package. There is a standard way of doing this which is illustrated in the following example of saving the model in the \emph{PredictHousing} module. The housing prediction model object is a list called `HouseTypeModel\_ls'. This list is saved in the `data' directory of the package. By saving the model object in the `data' directory, it can be addressed directly in the module function that applies the model. Note how documentation is handled.

\begin{verbatim}
#Save the housing choice model
#-----------------------------
#' Housing choice model
#'
#' A list containing the housing choice model equation and other information
#' needed to implement the housing choice model.
#'
#' @format A list having the following components:
#' \describe{
#'   \item{Type}{a string identifying the type of model ("binomial")}
#'   \item{Formula}{makeModelFormulaString(HouseTypeModel)}
#'   \item{PrepFun}{a function that prepares inputs to be applied in the model}
#'   \item{Summary}{the summary of the binomial logit model estimation results}
#'   \item{SearchRange}{a two-element vector specifying the range of search values}
#' }
#' @source PredictHousing.R script.
"HouseTypeModel_ls"
usethis::use_data(HouseTypeModel_ls, overwrite = TRUE)
\end{verbatim}

The \emph{use\_data} function in the \emph{usethis} package saves the data and documention correctly in the package and simplifies the procedure for doing so.

Although model estimation code is usually included in the module script, in some instances it may be more understandable to estimate the models for several modules in one script. This is what is done in the \emph{CreateSimBzoneModels.R} script in the \emph{VESimLandUse} package. This script estimates all the models for modules in the package. Model estimation is handled this way because the same model estimation dataset is used for all the models and the models build upon each other. Including all the model estimations in one file makes it easier to code and easier to review.

\hypertarget{model-estimation-datasets-1}{%
\subparagraph{8.1.1.1 Model Estimation Datasets}\label{model-estimation-datasets-1}}

Model estimation datasets may be read in from several sources. If model estimation data are large and are used by multiple modules located in different packages, then they may be housed in their own package. This is the case with the 2001 NHTS data which are in the \emph{VE2001NHTS} package. The estimation data in the package can be directly addressed in the model estimation code using the standard `PackageName::DatasetName' notation as shown in the following example:

\begin{verbatim}
Hh_df <- VE2001NHTS::Hh_df
\end{verbatim}

If estimation data are retrieved from another package as in this case, the DESCRIPTION file for the package must list the package from which the data are retrieved in the \emph{Imports} section. For example, the Imports section of the VEHouseholdTravel package reads as follows. The VE2001NHTS package is listed as are other packages that this package relies on.

\begin{verbatim}
Imports:
    visioneval,
    devtools,
    VE2001NHTS,
    data.table
\end{verbatim}

If estimation data is to be shared among several modules that are all within the same package, then all the data preparation can be done in one script which is run first when the package is built. This approach is used in the \emph{VESimHouseholds} package. The \emph{CreateEstimationDatasets.R} script loads and processes a Census public use microdata sample dataset that is used in estimating models in 3 modules that are in the package (\emph{CreateHouseholds}, \emph{PredictWorkers}, \emph{PredictIncome}). When, as in this case, a separate script is used to prepare the estimation data for several modules in the package, the data are saved in the data directory of the package and the other scripts load the dataset from that directory. The following extracts shows how a processed PUMS household dataset (a data frame named Hh\_df) is saved in the CreateEstimationDatasets.R script. The lines starting with \texttt{\#\textquotesingle{}} are data documentation in \href{https://cran.r-project.org/web/packages/roxygen2/vignettes/roxygen2.html}{roxygen2} form. Although data documentation can be tedious, especially for large datasets, it is should always be done and is an important aspect of the VisionEval model system.

\begin{verbatim}
#' Household data from Census PUMS
#'
#' A household dataset containing the data used for estimating the
#' CreateHouseholds, PredictWorkers, PredictLifeCycle, PredictIncome, and
#' PredictHouseType modules derived from from year 2000 PUMS data for Oregon.
#'
#' @format A data frame with 65988 rows and 17 variables (there may be a
#' different number of rows if PUMS datasets are used for different areas):
#' \describe{
#'   \item{Age0to14}{number of persons in 0 to 14 age group}
#'   \item{Age15to19}{number of persons in 15 to 19 age group}
#'   \item{Age20to29}{number of persons in 20 to 29 age group}
#'   \item{Age30to54}{number of persons in 30 to 54 age group}
#'   \item{Age55to64}{number of persons in 55 to 64 age group}
#'   \item{Age65Plus}{number of persons 65 years or older}
#'   \item{Wkr15to19}{number of workers in 15 to 19 age group}
#'   \item{Wkr20to29}{number of workers in 20 to 29 age group}
#'   \item{Wkr30to54}{number of workers in 30 to 54 age group}
#'   \item{Wkr55to64}{number of workers in 55 to 64 age group}
#'   \item{Wkr65Plus}{number of workers 65 years or older}
#'   \item{AvePerCapInc}{average per capita income of PUMA, nominal $}
#'   \item{HouseType}{housing type (SF = single family, MF = multifamily)}
#'   \item{Income}{annual household income, nominal 1999$}
#'   \item{HhSize}{number of persons in household}
#'   \item{HhType}{household type (Reg = regular household, Grp = group quarters)}
#'   \item{HhWeight}{household sample weight}
#' }
#' @source CreateEstimationDatasets.R script.
"Hh_df"
devtools::use_data(Hh_df, overwrite = TRUE)
rm(Hh_df)
\end{verbatim}

If as in this case, one script processes the estimation data for use by several modules, it is important that the data processing script be run prior to the other scripts when the package is built. Otherwise the processed estimation data will not be available to the module packages that need it. Managing the order of package script processing is handled by the \emph{Collate} section of the package \emph{DESCRIPTION} file. Following is an example from the \emph{VESimHouseholds} package:

\begin{verbatim}
Collate: 
    'CreateEstimationDatasets.R'
    'CreateHouseholds.R'
    'PredictWorkers.R'
    'PredictIncome.R'
    'AssignLifeCycle.R'
\end{verbatim}

The best way to establish the proper collation (i.e.~ordering) of script execution is to carry out model estimation through the definition and invocation of a function, and to have an \emph{\citet{include}} statement which lists the estimation data processing script in the function documentation using \href{http://r-pkgs.had.co.nz/man.html}{Roxygen syntax}. When the package documentation is compiled, the \emph{Collate} section of the package \emph{DESCRIPTION} file will be filled out properly. Following is an example of function documentation containing a \emph{\citet{include}} statement from the \emph{CreateHouseholds.R} module script in the \emph{VESimHouseholds} package:

\begin{verbatim}
#Define a function to estimate household size proportion parameters
#------------------------------------------------------------------
#' Calculate proportions of households by household size
#'
#' \code{calcHhAgeTypes} creates a matrix of household types and age
#' probabilities.
#'
#' This function produces a matrix of probabilities that a person in one of six
#' age groups is in one of many household types where each household type is
#' determined by the number of persons in each age category.
#'
#' @param HhData_df A dataframe of household estimation data as produced by the
#' CreateEstimationDatasets.R script.
#' @param Threshold A number between 0 and 1 identifying the percentile
#' cutoff for determining the most prevalent households.
#' @return A matrix where the rows are the household types and the columns are
#' the age categories and the values are the number of persons.
#' @include CreateEstimationDatasets.R
#' @export
\end{verbatim}

If model estimation data are only used by a single module, then the processing code should be included in the module script.

There are several places where model estimation datasets may be located depending on the size of the datasets, whether the datasets were preprocessed using other tools or scripts, and whether the intention of the module developer is to enable model users to customize model estimation to reflect data for the region where the model is to be applied.

For some modules, it is desirable that model parameters be estimated to reflect data for the region where the model is to be applied. This is the case for the \emph{CreateHouseholds}, \emph{PredictWorkers}, and \emph{PredictIncome} modules in the \emph{VESimHouseholds} package because household and worker age compositions and income distributions are likely to vary by region. For modules like these, the estimation data should be included in the `inst/extdata' directory of the package in the form of CSV-formatted text files. The data files should be accompanied by text files having the same names but with a `.txt' extension rather than a `.csv' extension. The purpose of the text files is to document the corresponding data files so that model users will know how to obtain and prepare datasets for their region that can be used in model estimation. For example, the `inst/extdata' directory of the \emph{VESimHouseholds} package contains the following files: `pums\_households.csv', `pums\_households.txt', `pums\_persons.csv', and `pums\_persons.txt'.

If a module's estimation datasets are to be loaded from `csv' files in the `inst/extdata' directory, then the module code should include procedures to check those data for correctness to assure that the model parameters will be estimated correctly. The framework includes as function, \emph{processEstimationInputs}, to assist with this task. The \emph{processEstimationInputs} function has 3 arguments: \emph{Inp\_ls}, \emph{FileName}, and \emph{ModuleName}. \emph{ModuleName} is the name of the module that is doing the processing. The sole purpose of this argument is to identify the module in any error messages that are written to the log. \emph{FileName} is the name of the file in the `inst/extdata' directory to be processed. \emph{Inp\_ls} is a list of data specifications that are used in checking the correctness of the data. This is explained in more detail below. The \emph{processEstimationInputs} function returns a data frame which contains the data in the specified file, if those data have no errors. Following is an example of how the \emph{processEstimationInputs} function is used:

\begin{verbatim}
Hh_df <- processEstimationInputs(
    Inp_ls = PumsHhInp_ls,
    FileName = "pums_households.csv",
    ModuleName = "CreateEstimationDatasets")
\end{verbatim}

Before the estimation data may be checked, the script must describe specifications for the data. The structure of the specifications is best described using an example. The following code snippet is from the \emph{CreateEstimationDatasets.R} script:

\begin{verbatim}
PumsHhInp_ls <- items(
  item(
    NAME =
      items("SERIALNO",
            "PUMA5",
            "HWEIGHT",
            "UNITTYPE",
            "PERSONS"),
    TYPE = "integer",
    PROHIBIT = c("NA", "< 0"),
    ISELEMENTOF = "",
    UNLIKELY = "",
    TOTAL = ""
  ),
  item(
    NAME = "BLDGSZ",
    TYPE = "integer",
    PROHIBIT = c("< 0"),
    ISELEMENTOF = "",
    UNLIKELY = "",
    TOTAL = ""
  ),
  item(
    NAME = "HINC",
    TYPE = "double",
    PROHIBIT = c("NA"),
    ISELEMENTOF = "",
    UNLIKELY = "",
    TOTAL = ""
  )
)
\end{verbatim}

The meanings of these specifications are as follows:\\
- \textbf{NAME} This is the name(s) of the data column in the file. The name must be a character string (i.e.~surrounded by quotation marks). If multiple columns of the file have the same specifications except for their names, they can listed as in the first item in the example. This method avoids a lot of redundant specifications. Note that the order of specifications does not need to be the same as the order of the columns in the file. Also note that it is OK if the file contains columns that are not specified, as long as it contains all of the columns that are specified. Columns that are not listed are ignored.\\
- \textbf{TYPE} This the data type of the data contained in the column. Allowable types are the 4 primitive types recognized by the R language (integer, double, character, and logical), the complex types listed in section 6.4, or `compound'. The type must be a character string.\\
- \textbf{PROHIBIT} This is a character vector which identifies all prohibited data conditions. For example, the specification for the ``PERSONS'' data column in the example above is c(``NA'', ``\textless{} 0''). This means that there cannot be any values that are undefined (NA) or less than 0. The symbols that may be used in a PROHIBIT specification are: NA, ==, !=, \textless, \textless=, \textgreater, \textgreater= (i.e.~undefined, equal to, not equal to, less than, less than or equal to, greater than, greater than or equal to). Note that prohibited conditions must be represented as character strings. If there is more than one prohibited condition, as in the example, the conditions must be entered as an R vector using the `c()' function, as shown in the example. The absence of prohibited conditions is represented by an empty character string (i.e.~````).\\
- \textbf{ISELEMENTOF} This is a vector which specifies the set of allowed values. It is used when the input values must be elements of a set of discrete values. The vector describing the set must be of the same type as is specified for the input data. Vectors of elements are entered using the `c()' function. For example, if the entries in a column of data could only have the values `urban' or `rural', then the specification owould be written as c(''urban'', ``rural''). The absence of a specification for this is represented by an empty character string.\\
- \textbf{UNLIKELY} This is a vector of conditions that while not prohibited, are not likely to occur. While conditions identified in the PROHIBIT and ISELEMENTOF specifications will produce an error if they are not met (thereby stopping the calculation of parameters), the conditions identified in the UNLIKELY specification will only produce a warning message. Vectors of conditions are entered using the `c()' function.
- \textbf{TOTAL} This specifies a required total value for the column of data. This is useful if the data represents proportions or percentages and must add up to 1 or 100. The absence of a specification for this is represented by an empty character string.

In some instances it is impractical to include the model estimation data as files in the `inst/extdata' directory, and not necessary for model users to provide regional model estimation data. If, for example, the source data has confidential elements, it may be necessary to preprocess the data to anonymize it before including in the package; or the source data may be too large to include as a text file in the package. In these cases, source data may be processed outside of the package and then the processed datasets included in the package as datasets in R binary files. If that is done, the binary data files should be placed in a directory named `data-raw' in the package.

For large datasets, it is also possible to have them stored remotely and to have the module code retrieve them from remote storage. This is what is done in the \emph{Make2001NHTSDataset.r} script in the \emph{VE2001NHTS} package. Zip archives of the public use datasets for the 2001 National Household Travel Survey are stored in a GitHub repository (\url{https://github.com/VisionEval/NHTS2001}). There are 4 zip archive files stored in the `data' directory of the repository: DAYPUB.zip, HHPUB.zip, PERPUB.zip, and VEHPUB.zip. Each zip archive contains a compressed `csv' formatted text file containing the data of interest. Because the process of downloading and unzipping some of the files takes an appreciable amount of time, the script checks whether that has already been done (by the presence of a file in the `data-raw' directory). If it has not been done, the script calls a function which handles the downloading, unzipping, and reading of the file. It also cleans up temporary files created when the zip archive was downloaded and unzipped.

If a module is to download datafiles from remote storage, the module developer will need to write R code to handle the requisite tasks. The framework does not build in any functionality to do this. The coding is not complicated as the following example of commented snippets of code from the \emph{Make2001NHTSDataset.r} script illustrate. The first section of code identifies the address of the data repository. The second section defines a function which handles downloading, unzipping, and reading a dataset stored in the repository, and cleaning up temporary files created in the process. The third section applies the handler function to download NHTS public use household data (HHPUB), selects relevant data fields, and saves those data as an R binary file to the `data-raw' directory. If the R binary file already exists, the data are not downloaded from the repository but are loaded from the saved file instead.

\begin{verbatim}
#Identify the code repository. Note that in order to access data
#files from a GitHub repository, the beginning of the address must 
#be 'raw.githubusercontent.com' not 'github.com'
Nhts2001Repo <-
  "https://github.com/VisionEval/NHTS2001/blob/master/data"
  
#Define a function to handle retrieving a zipped dataset from the
#repository, unzipping it, reading the unzipped file, and cleaning
#up temporary files
getZipDatasetFromRepo <- function(Repo, DatasetName) {
  ZipArchiveFileName <- paste0(DatasetName, ".zip")
  CsvFileName <- paste0(DatasetName, ".csv")
  download.file(paste0(file.path(Repo, ZipArchiveFileName),"?raw=true"), ZipArchiveFileName)
  Data_df <- read.csv(unzip(ZipArchiveFileName), as.is = TRUE)
  file.remove(ZipArchiveFileName, CsvFileName)
  Data_df
}

#Download NHTS 2001 public use household data from repository and 
#process if it has not already been done
if (!file.exists("data-raw/Hh_df.rda")) {
  Hh_df <- getZipDatasetFromRepo(Nhts2001Repo, "HHPUB")
  Keep_ <- c("HOUSEID", "AGE_P1", "AGE_P2", "AGE_P3", "AGE_P4", "AGE_P5", "AGE_P6",
             "AGE_P7", "AGE_P8", "AGE_P9", "AGE_P10", "AGE_P11", "AGE_P12", "AGE_P13",
             "AGE_P14", "CENSUS_D", "CENSUS_R", "DRVRCNT", "EXPFLHHN", "EXPFLLHH",
             "FLGFINCM", "HBHRESDN", "HBHUR", "HBPPOPDN", "HHC_MSA", "HHFAMINC",
             "HHINCTTL", "HHNUMBIK", "HHR_AGE", "HHR_DRVR", "HHR_RACE", "HHR_SEX",
             "HHSIZE", "HHVEHCNT", "HOMETYPE", "HTEEMPDN", "HTHRESDN", "HTHUR",
             "HTPPOPDN", "LIF_CYC", "MSACAT", "MSASIZE", "RAIL", "RATIO16V",
             "URBAN", "URBRUR", "WRKCOUNT", "CNTTDHH")
  Hh_df <- Hh_df[, Keep_]
  save(Hh_df, file = "data-raw/Hh_df.rda", compress = TRUE)
} else {
  load("data-raw/Hh_df.rda")
}
\end{verbatim}

\hypertarget{module-specifications-1}{%
\paragraph{8.1.2 Module Specifications}\label{module-specifications-1}}

The module specifications section of the module script provides specifications that are used by the framework in a number of ways. The specifications:\\
- Identify the level of geography that the model is to be run at;
- Describe all the data to be loaded from input files and enable unit conversions;
- Describe all the data that the module needs from the datastore in order to run;
- Describe all the data that the module produces that needs to be saved to the datastore;
- Identify other modules the module needs to call in order to do its calculations;
- Allow the framework to check and load all input files before any modules are run;
- Allow the framework to check that modules are compatible with one another in terms of the data that they produce and consume;
- Allow the sequence of model steps (module calls) to be simulated to check whether each module will have the data it needs when it is run; and,
- Provide detailed documentation about all data that is produced by a model run.

These specifications are declared in a list that is similar to the list for specifying model estimation data described in Section 8.1.1.1. A full example is shown in Appendix E. Following is a skeleton of a module specifications list for a module whose name is \emph{MyModule}. The name of the specifications list must be the concatenation of the module name and \emph{Specifications}, so in this example the name is \emph{MyModuleSpecifications}. Note that the functions \emph{items} and \emph{item} are aliases for the R \emph{list} function. Their purpose is to make the specifications easier to read.

\begin{verbatim}
MyModuleSpecifications <- list(
  RunBy = ...,
  NewInpTable = items(
    item(
      ...
    ),
    item(
      ...
    )
  ),
  NewSetTable = items(
    item(
      ...
    ),
    item(
      ...
    )
  ),
  Inp = items(
    item(
      ...
    ),
    item(
      ...
    )
  ),
  Get = items(
     item(
      ...
    ),
    item(
      ...
    )
  ),
  Set = items(
    item(
      ...
    ),
    item(
      ...
    )
  ),
  Call = items(
     item(
      ...
    ),
    item(
      ...
    )
  )
)
\end{verbatim}

Following are detailed descriptions and examples of each component of the specifications list.

The \textbf{RunBy} component specifies the level of geography that the model is to be run at. For example, the congestion submodel in the GreenSTEP and RSPM models runs at the Marea level. This specification is used by the software framework to determine how to index data that is read from the datastore and data that is written to the datastore. Acceptable values are ``Region'', ``Azone'', ``Bzone'', and ``Marea''. The \emph{RunBy} specification looks like the following example:

\begin{verbatim}
RunBy = "Marea",
\end{verbatim}

The \textbf{NewInpTable} and \textbf{NewSetTable} components specify any new tables that need to be created in the datastore to accommodate input data or data produced by a module respectively. The following specifications are required for each new table that is to be created.\\
- TABLE: the name of the table that is to be created; and,
- GROUP: the type of group the table is to be put into. There are 3 group types: \emph{Global}, \emph{BaseYear}, and \emph{Year}. If \emph{Global}, the table is created in the global group of the datastore. If \emph{BaseYear} the table is created in the year group for the base year and only in that year group. For example, if the model base year is 2010, the table will be created in the \emph{2010} group. If \emph{Year}, the table will be created in the group for every model run year. For example, if the run years are 2010 and 2040, the table will be created in both the \emph{2010} group and the \emph{2040} group.\\
Following is an example of a \emph{NewSetTable} specification for creating a Vehicle table in each model run year group.

\begin{verbatim}
NewSetTable = items(
  item(
    TABLE = "Vehicle",
    GROUP = "Year"
  )
),
\end{verbatim}

The \textbf{Inp} component specifies all model inputs that the module requires. Each item in the list describes one or more data fields in an input file. Each item must have the following attributes (except for the OPTIONAL attribute):\\
- NAME: the names of one or more data fields in the input file, and the names used for the datasets when they are loaded into the datastore. The names must match corresponding column names with the exception that column names in input files may contain \emph{year} and \emph{multiplier} modifiers as described in Section 6.4.;\\
- FILE: the name of the file that contains the data fields;\\
- TABLE: the name of the datastore table the datasets will be put into;\\
- GROUP: the type of group where the table is located in the datastore (i.e.~Global, Year, BaseYear);
- TYPE: the data type (e.g.~double, distance, compound);\\
- UNITS: the measurement units for the data;\\
- NAVALUE: the value used to represent NA (i.e.~missing value) in the datastore;\\
- SIZE: the maximum number of characters for character data (or 0 for numeric data);\\
- PROHIBIT: data values that are prohibited or ``\,'' if not applicable (see Section 8.1.1.1 for explanation);\\
- ISELEMENTOF: allowed categorical data values or ``\,'' if not applicable (see Section 8.1.1.1 for explanation);\\
- UNLIKELY: data conditions that are unlikely or ``\,'' if not applicable (see Section 8.1.1.1 for explanation);\\
- TOTAL: the total for all values (e.g.~1) or ``\,'' if not applicable;\\
- DESCRIPTION: descriptions of the data corresponding to the names in the NAME attribute; and,\\
- OPTIONAL: optional specification which identifies whether dataset is optional (see section 8.1.2.1)\\
Following is an example of the \emph{Inp} component for the \emph{PredictHousingSpecifications} in the \emph{VELandUse} package. The \emph{Inp} specifications include two items. Each item lists one or more field names (i.e.~column names in the input file) in the NAME attribute. Multiple field names can be listed in an item if all the other attributes except for DESCRIPTION are the same for all the fields. The descriptions in the DESCRIPTION attribute must correspond in order to the dataset names in the NAME attribute in order for them to be stored correctly in the datastore. The values that may be entered for the TYPE and UNITS attributes are described in Section 6.3. It should be noted that the UNITS attribute must not include `year' (for `currency' type) or `multiplier' information. That information is part of the input file field names instead (where relevant). This is explained in more detail in Section 6.4. The framework uses the information in the \emph{Inp} to read the input files, check whether the data are correct, and save the data to the correct location in the datastore.

\begin{verbatim}
Inp = items(
  item(
    NAME =
      items(
        "SFDU",
        "MFDU",
        "GQDU"),
    FILE = "bzone_dwelling_units.csv",
    TABLE = "Bzone",
    GROUP = "Year",
    TYPE = "integer",
    UNITS = "DU",
    NAVALUE = -1,
    SIZE = 0,
    PROHIBIT = c("NA", "< 0"),
    ISELEMENTOF = "",
    UNLIKELY = "",
    TOTAL = "",
    DESCRIPTION =
      items(
        "Number of single family dwelling units (PUMS codes 01 - 03) in zone",
        "Number of multi-family dwelling units (PUMS codes 04 - 09) in zone",
        "Number of qroup quarters population accommodations in zone"
      )
  ),
  item(
    NAME = items(
      "HhPropIncQ1",
      "HhPropIncQ2",
      "HhPropIncQ3",
      "HhPropIncQ4"),
    FILE = "bzone_hh_inc_qrtl_prop.csv",
    TABLE = "Bzone",
    GROUP = "Year",
    TYPE = "double",
    UNITS = "NA",
    NAVALUE = -1,
    SIZE = 0,
    PROHIBIT = c("NA", "< 0"),
    ISELEMENTOF = "",
    UNLIKELY = "",
    TOTAL = "",
    DESCRIPTION =
      items(
        "Proportion of Bzone households (non-group quarters) in 1st quartile of Azone household income",
        "Proportion of Bzone households (non-group quarters) in 2nd quartile of Azone household income",
        "Proportion of Bzone households (non-group quarters) in 3rd quartile of Azone household income",
        "Proportion of Bzone households (non-group quarters) in 4th quartile of Azone household income"
      )
  )
),
\end{verbatim}

The \textbf{Get} component contains one or more items that identify data that the module need to have retrieved from the datastore. Note that the \emph{Get} component must identify all datasets the module requires (other than those that are included in the package), including those specified in the \emph{Inp} component. The datasets identified in the \emph{Inp} component are not automatically made available to the module. Each item in the \emph{Get} component specifies attributes for one or more related datasets as follows:\\
- NAME: the names of one or more datasets to be loaded;\\
- TABLE: the name of the table that the datasets are located in;\\
- GROUP: the type of group where the table is located in the datastore (i.e.~Global, Year, BaseYear);\\
- TYPE: the data type (e.g.~double, distance, compound);\\
- UNITS: the measurement units for the data;\\
- PROHIBIT: data values that are prohibited or ``\,'' if not applicable (see Section 8.1.1.1 for explanation);\\
- ISELEMENTOF: allowed categorical data values or ``\,'' if not applicable (see Section 8.1.1.1 for explanation); and,
- OPTIONAL: optional specification which identifies whether dataset is optional (see section 8.1.2.1)\\
Unlike the `Inp' specifications, the `Get' specifications for UNITS must include `year' information for `currency' types. This is necessary in order for the framework to convert the currency data being requested from the datastore to the year denomination that the module needs. The UNITS attribute may also include a multiplier specification if the module needs the values to be modified in that way. For example, if the module needs VMT in thousands of miles, the UNITS specification would be `MI.1e3'. Section 6.3 provides more information on how `year' and `multiplier' options are added to a UNITS specification. Following is an example of the \emph{Get} component of the \emph{AssignRoadMilesSpecifications} in the \emph{VETransportSupply} package.

\begin{verbatim}
Get = items(
  item(
    NAME = "Marea",
    TABLE = "Marea",
    GROUP = "Year",
    TYPE = "character",
    UNITS = "ID",
    PROHIBIT = "",
    ISELEMENTOF = ""
  ),
  item(
    NAME =
      items(
        "FwyLaneMi",
        "ArtLaneMi"),
    TABLE = "Marea",
    GROUP = "Year",
    TYPE = "distance",
    UNITS = "MI",
    PROHIBIT = c("NA", "< 0"),
    ISELEMENTOF = ""
  ),
  item(
    NAME = "Marea",
    TABLE = "Bzone",
    GROUP = "Year",
    TYPE = "character",
    UNITS = "ID",
    PROHIBIT = "",
    ISELEMENTOF = ""
  ),
  item(
    NAME = "UrbanPop",
    TABLE = "Bzone",
    GROUP = "Year",
    TYPE = "people",
    UNITS = "PRSN",
    PROHIBIT = c("NA", "<= 0"),
    ISELEMENTOF = ""
  )
),
\end{verbatim}

The \textbf{Set} component contains one or more items describing datasets to be saved in the datastore. Each item in the \emph{Set} component specifies attributes for one or more related datasets as follows:\\
- NAME: the names of one or more datasets to be saved;\\
- TABLE: the name of the table that the datasets are to be saved in;\\
- GROUP: the type of group where the table is located in the datastore (i.e.~Global, Year, BaseYear);\\
- TYPE: the data type (e.g.~double, distance, compound);\\
- UNITS: the measurement units for the data;\\
- NAVALUE: the value used to represent NA in the datastore;\\
- PROHIBIT: data values that are prohibited or ``\,'' if not applicable (see Section 8.1.1.1 for explanation);\\
- ISELEMENTOF: allowed categorical data values or ``\,'' if not applicable (see Section 8.1.1.1 for explanation);\\
- SIZE: the maximum number of characters for character data (or 0 for numeric data); and,
- DESCRIPTION: descriptions of the data corresponding to the names in the NAME attribute\\
The requirements for the UNITS attribute are the same as described above for \emph{Get} component items. Following is an example of the \emph{Set} component of the \emph{AssignRoadMilesSpecifications} in the \emph{VETransportSupply} package.

\begin{verbatim}
Set = items(
  item(
    NAME = "FwyLaneMiPC",
    TABLE = "Marea",
    GROUP = "Year",
    TYPE = "compound",
    UNITS = "MI/PRSN",
    NAVALUE = -1,
    PROHIBIT = c("NA", "< 0"),
    ISELEMENTOF = "",
    SIZE = 0,
    DESCRIPTION = "Ratio of urbanized area freeway and expressway lane-miles to urbanized area population"
  )
)
\end{verbatim}

It should be noted that it may not be possible to prespecify the SIZE attribute for a dataset. For example, if a unique household ID is assigned, the SIZE attribute will depend on the number of households and so must be calculated when the module is run. In such a circumstance, the SIZE attribute is omitted from the item and the module function must calculate it and include the calculated value as an attribute of the output dataset. The following code snippet from the \emph{CreateHouseholds} module code in the \emph{VESimHouseholds} package shows how this is done. In this example, the list of data that the module function returns is named \emph{Out\_ls}. The household ID (\emph{HhId}) dataset is in the \emph{Household} table of the \emph{Year} group. The R \emph{attributes} function is called to set the SIZE attribute of the \emph{HhId} dataset equal to the maximum of the number of characters in each of the entries in the dataset.

\begin{verbatim}
attributes(Out_ls$Year$Household$HhId)$SIZE <- max(nchar(Out_ls$Year$Household$HhId))  
\end{verbatim}

The last component in the the module specifications list is the \textbf{Call} component. This is an optional component of the module specifications and is included if the module calls any other modules or if the module may be called by other modules. Following are \emph{Call} component examples. The first is an example for a module that may be called. The second is an example for a module which calls another module. Section 8.1.2.2 explains module calling in detail.

\begin{verbatim}
#Call component for a module that may be called
Call = TRUE

#Call component for a module that calls another module
Call = items(
  CalcDvmt = "VEHouseholdTravel::CalculateHouseholdDvmt"
)
\end{verbatim}

\hypertarget{optional-attribute-1}{%
\subparagraph{8.1.2.1 OPTIONAL Attribute}\label{optional-attribute-1}}

Module developers can use the OPTIONAL attribute to identify optional inputs or data to be retrieved from the datastore. This enables modules to be written to respond to optional inputs. For example, in the GreenSTEP and RSPM models, users may provide inputs on the average carbon intensity of fuels (grams CO2e per megajoule) by model run year. This allows users to model a scenario where state regulations require the average carbon intensity of fuels to be reduced over time. If the user supplies those data, the models calculate carbon emissions using those inputs. If not, the model calculates emissions using data on the carbon intensities of different fuel types and the mix of those fuel types.

If the OPTIONAL attribute for an item is missing, then the item is not optional. If the OPTIONAL attribute is not missing but is set equal to \emph{FALSE} then the item is not optional as well. Only when the OPTIONAL attribute is present and set equal to \emph{TRUE} does the framework regard the item as optional (\texttt{OPTIONAL\ =\ TRUE}).

If an input (\emph{Inp}) item is identified as optional, the framework checks whether the identified input file is present. If the file is present, then the framework will process the data and load it into the datastore. Otherwise the item is ignored. Note that optional inputs can't be combined with non-optional inputs in the same file. This will cause an error. Also not that since the framework does not automatically supply inputs to the module, there must be optional \emph{Get} items corresponding to the optional \emph{Inp} items. When the framework sees an optional \emph{Get} item, it checks the datastore to see whether the optional dataset(s) are present. If so, it retrieves them.

\hypertarget{call-specification-1}{%
\subparagraph{8.1.2.2 CALL Specification}\label{call-specification-1}}

If same calculation code needs to be executed a number of times, it is best to define a function to encapsulate the code and then call the function whenever the calculation needs to be carried out. This reduces errors and code maintenance hassles. Likewise, module code duplication is reduced in the VisionEval model system by allowing modules to call other modules for their calculation services. For example, the \emph{BudgetHouseholdDvmt} module in the \emph{VETravelPerformance} package calls the \emph{CalculateAltModeTrips} module in the \emph{VEHouseholdTravel} package to recalculate trips by alternate modes (walk, bike, transit) to reflect budget-adjusted household DVMT. Calling a module is more involved than just calling the function that carries out the module's calculations because the module function will not work unless it is supplied with the datasets identified in its \emph{Get} specifications. Of course the calling module could include those specifications in its own specifications, but that would create a significant potential for coding errors and maintenance problems (e.g.~if the called module is module is modified at a later time). For this reason the software design includes functionality for calling modules in a simple manner which leaves the data management details to the framework behind the scenes.

A module's call status is specified in the \emph{Call} component of the module specifications. There are 3 possibilities for a module's call status. First, a module may be called by other modules. In this case the specification is \texttt{Call\ =\ TRUE}. Second, the module may call other modules. In this case the call specification is a list that identifies each of the modules that are called, assigning a reference to the module to an alias (i.e.~\emph{alias = module}) as shown in the following example:

\begin{verbatim}
Call = items(
  CalcDvmt = "CalculateHouseholdDvmt",
  ReduceDvmt = "ApplyDvmtReductions",
  CalcVehTrips = "CalculateVehicleTrips",
  CalcAltTrips = "CalculateAltModeTrips"
)
\end{verbatim}

The \emph{alias} is the name that the called module will be referred to by the calling module code. The \emph{module} is the name of the called module. The VisionEval framework software identifies which package the module resides in from the \emph{ModulesByPackage\_df} table in the \emph{ModelState\_ls} list. It is also possible to hard code the package name in the call definition. For example the \emph{CalcDvmt} alias could be assign to \texttt{VEHouseholdTravel::CalculateHouseholdDvmt}. This is discouraged, however, because doing so limits the ability to maintain different versions of packages that have module modifications.

\begin{verbatim}
Call = items(
  CalcDvmt = "VEHouseholdTravel::CalculateHouseholdDvmt"
)
\end{verbatim}

The third possibility is that a module may not be called and calls no other modules. In that case a \emph{Call} component is not included in the module specifications.

There are some important restrictions to module calling. First, a module that may be called cannot call another module. If this restriction did not exist, there could be deeply nested module calls which could make debugging and understanding how a model works very difficult. Second, a module that may be called cannot have any inputs (i.e.~\emph{Inp} component). The reason for this restriction is that the function of called modules is to provide calculation services and those are hidden from model users. Unless a called module was also called directly in the model run script, there would be no way model user would know to supply input files without diving into the details about the module doing the calling.

The framework does the following when a module is run which calls one or more other modules. For each of the modules that are called, the framework:\\
1) Reads the `Get' specifications for the called module, gets the datasets from the datastore, puts them in the standard list structure, and adds to the list that will be returned to the calling module as a component whose name is the assigned alias. In the example above, the retrieved datasets would be in a component named ``CalcDvmt''.\\
2) Creates a list which holds the values of the called module functions. Each called module function is a component of the list whose name is the assigned alias. In the example above, this function list would have one component named ``CalcDvmt'' which contains the value of the CalculateHouseholdDVMT function.\\
3) The framework passes these two lists to the calling module when it is run. Thus the calling module function must be written to accept two arguments rather than one.

The calling module code invokes the called module by calling it from the function list that the framework passes it and passing to it the data it needs from the data list. Following from the example above, if the data list is called `L' and the function list is called `M', then the \emph{CalculateHouseholdDVMT} module function would be called in the \emph{AssignHhVehiclePowertrain} module as follows:

\begin{verbatim}
M$CalcDvmt(L$CalcDvmt)
\end{verbatim}

\hypertarget{module-function-1}{%
\paragraph{8.1.3 Module Function}\label{module-function-1}}

The \textbf{function definitions} section of the module script is used to define all functions that will be used to implement the module. One of these functions is the main function that is called by the software framework to run the module. This function must have the same name as the module name. For example, the main function of the \emph{CreateHouseholds} module is named \emph{CreateHouseholds} as well. This function must be written to accept one argument, a list, which by convention is named L if the module calls no other modules, and two arguments (as explained in the previous section) if the module calls other modules. This list contains all of the datasets identified in the \emph{Get} component of the module data specifications. The structure of this list is described in Section 7. The main function returns a list which contains all of the datasets identified in the \emph{Set} component of the module data specifications and structured as described in Section 7. The software framework includes a function, \emph{initDataList}, to initialize an outputs list having the proper structure with \emph{Global}, \emph{Year}, and \emph{BaseYear} components. The module code will fill in each component with components for each of the specified tables and datasets within those tables. Following is a simple example from the \emph{AssignTransitService} module in the \emph{VETransportSupply} package. First, here are the module's \emph{Set} items to provide context for the module code:

\begin{verbatim}
Set = items(
  item(
    NAME = "TranRevMiPC",
    TABLE = "Marea",
    GROUP = "Year",
    TYPE = "compound",
    UNITS = "MI/PRSN",
    NAVALUE = -1,
    PROHIBIT = c("NA", "< 0"),
    ISELEMENTOF = "",
    SIZE = 0,
    DESCRIPTION = "Ratio of bus-equivalent revenue-miles (i.e. revenue-miles at the same productivity - passenger miles per revenue mile - as standard bus) to urbanized area population"
  )
)
\end{verbatim}

The \emph{AssignTransitService} function returns one dataset called \emph{TranRevMiPc}. This dataset will be placed in the \emph{Marea} table in the \emph{Year} group (i.e.~in the group for each model run year). Following is the function definition:

\begin{verbatim}
AssignTransitService <- function(L) {
  #Set up
  #------
  #Fix seed as synthesis involves sampling
  set.seed(L$G$Seed)
  #Define vector of modes
  Md <- as.character(BusEquivalents_df$Mode)
  #Define vector of Mareas
  Ma <- L$Year$Marea$Marea

  #Calculate bus equivalent revenue miles
  #--------------------------------------
  #Make table of revenue miles by Marea
  RevMi_df <- data.frame(L$Year$Marea[paste0(Md, "RevMi")])
  colnames(RevMi_df) <- Md
  rownames(RevMi_df) <- Ma
  RevMi_MaMd <- as.matrix(RevMi_df)
  #Calculate the bus equivalent revenue miles
  BusEq_Md <- BusEquivalents_df$BusEquivalents
  names(BusEq_Md) <- Md
  BusEqRevMi_Ma <-
    rowSums(sweep(RevMi_MaMd, 2, BusEq_Md, "*"))[Ma]

  #Calculate the bus equivalent revenue miles per capita
  #-----------------------------------------------------
  #Calculate population in the urbanized area
  UrbanPop_Ma <-
    tapply(L$Year$Bzone$UrbanPop, L$Year$Bzone$Marea, sum)[Ma]
  #Calculate Marea bus equivalent revenue miles per capita
  TranRevMiPC_Ma <- BusEqRevMi_Ma / UrbanPop_Ma

  #Return the results
  #------------------
  #Initialize output list
  Out_ls <- initDataList()
  Out_ls$Year$Marea <-
    list(TranRevMiPC = TranRevMiPC_Ma)
  #Return the outputs list
  Out_ls
}
\end{verbatim}

A module should include procedures as necessary to check for errors in output datasets. In most cases this won't be necessary if the module passes tests during development because the framework checks that all datasets passed to the module meet the module's specifications. However there may be conditions where some combinations of acceptable inputs produce unacceptable outputs. In such cases, the module code should check for unacceptable outputs and if found, report those to the framework for reporting to the model user and stopping the model run. The module should not stop the model run. Instead it composes a descriptive error message and adds it to an \emph{Errors} component of the module outputs list. If there is more than one error, the \emph{Errors} component will be a vector of error messages. The framework writes the error message(s) to the model run log and stops model execution.

Warnings are handled in a similar way. If the module code is checks for warning conditions (i.e.~model execution should not be stopped but users should be about the condition) and finds any, it composes a warning message that is added to a \emph{Warnings} component of the module outputs list. The framework writes warnings messages to the model run log.

The functionality for processing module errors and warnings is used primarily by \emph{Initialize} modules as explained in Section 8.1.5.

\hypertarget{module-documentation-1}{%
\paragraph{8.1.4 Module Documentation}\label{module-documentation-1}}

It is recommended that module documentation be included at the top of the module script file if possible to make it easier to review and analyze the module. A standardized approach has been developed to do this that produces documentation in \href{https://en.wikipedia.org/wiki/Markdown}{markdown} format that can be viewed as a web page or converted to other formats for printing. At the end of the module script the \emph{documentModule} function like this \texttt{documentModule("PredictIncome")}. The \emph{documentModule} parses the module script, extracts the documentation block at the head of the file and inserts any text, tables, or figures that are saved by the script and inserted into the documentation using special \emph{tags} as explained below. In addition, the \emph{documentModule} function reads the module specifications and creates formatted tables showing module inputs, datasets used, and datasets produced. The documentation file(s) are then saved to a \emph{model\_docs} directory in the \emph{inst/extdata} directory which is in turn a directory in the installed package. The \emph{documentModule} function is called at the end of the script because the rest of the script must be executed to produce the datasets that are inserted into the documentation file. Following is an example of what a documentation block looks like.

\begin{verbatim}
#<doc>
## PredictIncome Module
#### September 6, 2018
#
#This module predicts the income for each simulated household given the number of workers in each age group and the average per capita income for the Azone where the household resides.
#
### Model Parameter Estimation
#Household income models are estimated for *regular* households and for *group quarters* households.
#
#The household income models are estimated using Census public use microsample (PUMS) data that are compiled into a R dataset (HhData_df) by the 'CreateEstimationDatasets.R' script when the VESimHouseholds package is built. The data that are supplied with the VESimHouseholds package downloaded from the VisionEval repository may be used, but it is preferrable to use data for the region being modeled. How this is done is explained in the documentation for the *CreateEstimationDatasets.R* script.
#
#The household income models are linear regression models in which the dependent variable is a power transformation of income. Power transformation is needed in order to normalize the income data distribution which has a long right-hand tail. The power transform is found which minimizes the skewness of the income distribution. The power transform for *regular* households is:
#
#<txt:HHIncModel_ls$Pow>
#
#The power transform for *group quarters* households is:
#
#<txt:GQIncModel_ls$Pow>
#
#The independent variables for the linear models are power transformed per capita income for the area, the number of workers in each of 4 worker age groups (15-19, 20-29, 30-54, 55-64), and the number of persons in the 65+ age group. In addition, power-transformed per capita income is interacted with each of the 4 worker groups and 65+ age group variable. The summary statistics for the *regular* household model are as follows:
#
#<txt:HHIncModel_ls$Summary>
#
#The summary statistics for the *group quarters* household model are as follows:
#
#<txt:GQIncModel_ls$Summary>
#
#An additional step must be carried out in order to predict household income. Because the linear model does not account for all of the observed variance, and because income is power distribution, the average of the predicted per capita income is less than the average per capita income of the population. To compensate, random variation needs to be added to each household prediction of power-transformed income by randomly selecting from a normal distribution that is centered on the value predicted by the linear model and has a standard deviation that is calculated so as the resulting average per capita income of households match the input value. A binary search process is used to find the suitable standard deviation. Following is the comparison of mean values for the observed *regular* household income for the estimation dataset and the corresponding predicted values for the estimation dataset.
#
#<tab:HHIncModel_ls$MeanCompare>
#
#The following figure compares the distributions of the observed and predicted incomes of *regular* households.
#
#<fig:reg-hh-inc_obs-vs-est_distributions.png>
#
#Following is the comparison of mean values for the observed *group quarters* household income for the estimation dataset and the corresponding predicted values for the estimation dataset.
#
#<tab:GQIncModel_ls$MeanCompare>
#
#The following figure compares the distributions of the observed and predicted incomes of *groups quarters* households.
#
#<fig:gq-hh-inc_obs-vs-est_distributions.png>
#
### How the Module Works
#This module runs at the Azone level. Azone household average per capita income and group quarters average per capita income are user inputs to the model. The other model inputs are in the datastore, having been created by the CreateHouseholds and PredictWorkers modules. Household income is predicted separately for *regular* and *group quarters* households. Per capita income is transformed using the estimated power transform, the model dependent variables are calculated, and the linear model is applied. Random variation is applied so that the per capita mean income for the predicted household income matches the input value.
#

#</doc>
\end{verbatim}

There are several things to note about this example. The first is that all text in the block is commented out (preceded by \#). Since R doesn't support block comments, each line must be commented. It may not look this way in the example because of word wrapping, but every line is commented. Second, the start and end of the documentation block are denoted by matching \texttt{\textless{}doc\textgreater{}} and \texttt{\textless{}/doc\textgreater{}} tags. The parser uses these to extract the documentation from the script. After the document has been extracted, the leading comments are stripped off, resulting in markdown-formatted text. The other comment (\#) symbols in the text are actually markdown formatting to identify headings of different levels. Documentation can include any standard markdown formatting such as emphasis, links, and tables. In addition, the documentation can include special tags as shown in the example. Three types of tags are available:

\begin{itemize}
\item
  \texttt{\textless{}txt:xxxx\textgreater{}} inserts a block of text that is contained in the referenced object. For example the \texttt{\textless{}txt:GQIncModel\_ls\$Summary\textgreater{}} tag in the example will insert summary statistics for the group quarters income model.
\item
  \texttt{\textless{}tab:xxxx\textgreater{}} inserts data that can be presented in table for such as a data frame. For example the \texttt{\textless{}tab:HHIncModel\_ls\$MeanCompare\textgreater{}} tag in the example will insert a table which compares observed and estimated mean values.
\item
  \texttt{\textless{}fig:xxxx\textgreater{}} creates a markdown reference to an image file so that it will be show in the proper place when the markdown is displayed in a browser or converted to another document form. For example the \texttt{\textless{}fig:reg-hh-inc\_obs-vs-est\_distributions.png\textgreater{}} tag in the example will insert a figure which compares observed and estimated income distributions when the markdown is displayed.
\end{itemize}

It is helpful to include test code in the module script to aid with module development. The framework includes a \emph{testModule} function to assist with module testing. This function is described in detail in Section 9.2.1. Testing requires having sample input files containing datasets specified by the modules \emph{Inp} specifications. These are stored in the `inputs' directory of the `tests' directory. The `tests' directory also must contain a `defs' directory which contains all the required model definitions files (see Section 6.1). Finally, the `tests' directory must contain a datastore of the type specified in the `run\_parameters.json' file, which contains all of the datasets specified in the modules \emph{Get} specifications. In the first stage of module testing, the module specifications are checked, all input files are checked, the presence of all required data is checked, and an input list (L) is returned for use in module development. For this test, the \emph{DoRun} argument of the \emph{testModule} function needs to be set to \emph{FALSE}. After the module code has been written, the module is tested again to check whether the module code is working correctly and that it returns results that are consistent with the \emph{Set} specifications for the module. For this test, the \emph{DoRun} argument of the \emph{testModule} function must be \emph{TRUE}. After the module has been tested, it is important to comment out all the testing code in the script because it must not be run when the package is built. Following is an example of testing code in a module that has been commented out.

\hypertarget{initialize-module-1}{%
\paragraph{8.1.5 Initialize Module}\label{initialize-module-1}}

Although the framework performs several checks on module input data based on the module specifications, there will be times when additional checks of inputs will be necessary and possibly transformations as well. For example, several datasets could have proportions data that must add up to 1 across the datasets. For example, 4 input datasets for the \emph{PredictHousing} module of the *VELandUse** package give the proportions of households in each Bzone that are in each of 4 income quartiles for the Azone that the Bzones are located in. These inputs should be checked to assure that the sum of all quartile proportions for each Bzone adds up to one. If any sums are not close to 1, then the model user needs to be alerted to the fact so that they can correct the input file. If all the sums are close to 1 but some are not exactly 1 (due to rounding errors in preparing inputs), the inputs should be automatically adjusted to equal 1 before they are saved in the datastore. If a module developer needs to establish more complex checks and transformations like this, they do so in a special module that they name \emph{Initialize}.

In the \emph{Initialize} module, the module specifications identify all of the input datasets that need to be checked. This is done in same manner as described in Section 8.1.2. The module specifications will not have \emph{Get} or \emph{Set} components since the only purpose of the \emph{Initialize} module is to process inputs. There can only be one \emph{Initialize} module in a package and so all inputs that need additional checking, regardless of which module in the package will use them, need to be processed in the \emph{Initialize} module. Datasets that are listed in the \emph{Inp} specifications of the \emph{Initialize} module must not be included in the \emph{Inp} specifications of any other module in the package.

When a model is intialized by the \emph{initializeModel} function in the \emph{run\_model.R} script (Section 5 and Appendix A), each of the module packages that will be run by the script is checked for the presence of an \emph{Initialize} module. Any that are found are added to a list of modules that require input processing. When the \emph{initializeModel} function processes the inputs for an \emph{Initialize} module it does so in two steps. In the first step, it performs the standard input processing that is done for all modules (input files are read and datasets are checked for completeness and correctness). The output of this checking process is a standard outputs list with \emph{Global}, \emph{BaseYear}, and \emph{Year} components. In the second step, the framework calls the \emph{Initialize} module function and passes it the outputs list from the first step. The \emph{Initialize} module does whatever enhanced data checking and transformation is necessary and returns an outputs list having the same structure as the inputs list with the addition of \emph{Errors} and \emph{Warnings} components (see Section 8.1.3). Several of the VisionEval packages include \emph{Initialize} modules and can be used as examples.

\hypertarget{the-instextdata-directory-1}{%
\subsubsection{8.2. The inst/extdata Directory}\label{the-instextdata-directory-1}}

By convention, the `inst/extdata' directory is the standard place to put external (raw) data files as opposed to R datasets which are placed in the `data' directory. This is where most model estimation data is kept. Section 8.1.1.1 provides a detailed explanation. The directory should include a subdirectory named `sources' to hold reports or other external documentation if needed.

\hypertarget{the-data-raw-directory-1}{%
\subsubsection{8.3. The data-raw Directory}\label{the-data-raw-directory-1}}

In some instances it is impractical to include the model estimation data as files in the `inst/extdata' directory, and not necessary for model users to provide regional model estimation data. If, for example, the source data has confidential elements, it may be necessary to preprocess the data to anonymize it before including in the package; or the source data may be too large to include as a text file in the package. In these cases, source data may be processed outside of the package and then the processed datasets included in the package as datasets in R binary files. If that is done, the binary data files should be placed in a directory named `data-raw' in the package.

\hypertarget{the-tests-directory-1}{%
\subsubsection{8.4. The tests Directory}\label{the-tests-directory-1}}

The `tests' directory contains R scripts and the results of module tests. The \emph{scripts} directory contains all the scripts used to carry out module tests. The directory also contains subdirectories for each of the model types the module is to be tested with (e.g VE-RSPM, VE-State, VE-RPAT). Two approaches are available for handing module data that includes input files the module uses, all the \emph{defs} files, and a datastore which contains all the datasets used by the module aside from those in the input files. These data can be included in the package or they may be kept in a central repository. If they are included in the package, they must be placed in the directory for the corresponding model. This is necessary to avoid conflicts in the test data for different models. The scripts directory includes a testing script which runs the tests on all modules in a package for a particular module. For example, the script for testing modules in a VE-State application is named \emph{vestate\_test.R}. The scripts directory also includes a \emph{test.R} script which calls the individual model test scripts for automated package testing. If the centralized data testing approach is used, a \emph{test\_functions.R} script needs to be included. This includes functions needed to support the centralized test data approach. The test process is still not finalized. In the future this functionality will be included in the framework software. Following is an example of a test script using the central data approach:

\begin{verbatim}
#vestate_test.R
#--------------

#Load packages and test functions
library(visioneval)
library(filesstrings)
source("tests/scripts/test_functions.R")

#Define test setup parameters
TestSetup_ls <- list(
  TestDataRepo = "../Test_Data/VE-State",
  DatastoreName = "Datastore.tar",
  LoadDatastore = FALSE,
  TestDocsDir = "vestate",
  ClearLogs = TRUE,
  # SaveDatastore = TRUE
  SaveDatastore = FALSE
)

#Define the module tests
Tests_ls <- list(
  list(ModuleName = "CreateHouseholds", LoadDatastore = FALSE, SaveDatastore = TRUE, DoRun = TRUE),
  list(ModuleName = "PredictWorkers", LoadDatastore = TRUE, SaveDatastore = TRUE, DoRun = TRUE),
  list(ModuleName = "AssignLifeCycle", LoadDatastore = TRUE, SaveDatastore = TRUE, DoRun = TRUE),
  list(ModuleName = "PredictIncome", LoadDatastore = TRUE, SaveDatastore = TRUE, DoRun = TRUE)
)

#Set up, run tests, and save test results
setUpTests(TestSetup_ls)
doTests(Tests_ls, TestSetup_ls)
saveTestResults(TestSetup_ls)
\end{verbatim}

Section 9.2.1 provides more information on using the \emph{testModule} function.

\hypertarget{software-framework-1}{%
\section{Software Framework}\label{software-framework-1}}

The software framework for the VisionEval model system is implemented by a set of functions contained in the \textbf{visioneval} package. These functions are classified in four groups: user, developer, control, and datastore. Model \emph{user} functions are those used to write scripts to run VisionEval models. Section 9.1 describes how these are used. Appendix G contains full documentation of model user functions. The package contains contains standard documentation for all of the functions. Module \emph{developer} functions are those that module developers may call in their module code or that otherwise aid in module developing and testing. Section 9.2 describes the most important module development functions and Appendix H includes full documentation of all the functions. Most of the functions in the VisionEval framework are functions that \emph{control} the initialization of a VisionEval model run and the execution of VisionEval modules. These functions are internal to the VisionEval software framework and are not to be used by model users or module developers. Section 9.3 provides an overview of these functions and Appendix I includes full function documentation. The remaining functions are functions which directly interact with the model datastore. Section 9.4 provides an overview of these functions and Appendix J provides full documentation.

Additional documentation which shows the calling relationships between functions is {[}no longer, 9/17/2019{]} available in a \href{https://gregorbj.github.io/VisionEval/website/visioneval_functions.html}{interactive visualization}. This visualization shows the names of the functions as nodes in a network graph with arrows connecting the nodes showing the functions that are called by each function (arrows point from the calling function to the called function). The nodes are colored-coded to indicate the function groups: blue indicates model \emph{user} functions, green indicates module \emph{developer} functions, yellow indicates framework \emph{control} functions, and red indicates \emph{datastore} interaction functions. Clicking on a function in the visualization highlights the function and all the arrows connected to it. It also provides summary information about the function including a description of what it does, descriptions of all the function arguments, and a description of the function's return value.

\hypertarget{api-for-model-users}{%
\subsubsection{9.1. API for Model Users}\label{api-for-model-users}}

Three functions are part of the API for model users: `initializeModel', `runModule', and `getYears'. These are explained below in turn.

The `initializeModel' function prepares the model for running modules. This includes:\\
1) Creating the ``ModelState.Rda'' file that contains global parameters for the model run and variables used to keep track of the state of the datastore and other aspects of the model run (Section 6.6);\\
2) Creating a log file that is used to record model status messages such as warning and error messages;\\
3) Creating and initializing the model datastore including loading a specified datastore;\\
4) Processing the model geography definition file and setting up the appropriate geographic tables in the datastore;\\
5) Checking whether all the specified module packages are installed and that all module specifications are correct;\\
6) Parsing the ``run\_model.R'' script and simulating the model run to confirm that the datastore will contain the data that each module needs when it is called and that the data specifications are consistent with the module `Get' specifications;\\
7) Checking whether all the scenario input files identified by the specified modules are present, and that the data are consistent with specifications; and,\\
8) Loading all the data in the input files into the datastore.

If any errors are found during the model initialization process, an error message will be displayed in the console and the initialization process will terminate. Detailed error messages in the log will identify the specific causes of errors. If the initialization proceeds without errors, the user can be assured that the model will run without errors. Following is a typical `initializeModel' function call in a model run script.

\begin{verbatim}
initializeModel(
  ParamDir = "defs",
  RunParamFile = "run_parameters.json",
  GeoFile = "geo.csv",
  ModelParamFile = "model_parameters.json",
  LoadDatastore = FALSE,
  DatastoreName = NULL,
  SaveDatastore = TRUE
  )
\end{verbatim}

The function arguments and their meanings are as follows:\\
- \textbf{ParamDir} A string identifying the relative or absolute path to the directory where the parameter and geography definition files are located. The default value is ``defs''.\\
- \textbf{RunParamFile} A string identifying the name of a JSON-formatted text file that contains parameters needed to identify and manage the model run. The default value is ``run\_parameters.json''.\\
- \textbf{GeoFile} A string identifying the name of a text file in comma-separated values format that contains the geographic specifications for the model. The default value is ``geo.csv''.\\
- \textbf{ModelParamFile} A string identifying the name of a JSON-formatted text file that contains global model parameters that are important to a model and may be shared by several modules.\\
- \textbf{LoadDatastore} A logical identifying whether an existing datastore should be loaded.\\
- \textbf{DatastoreName} A string identifying the full path name of a datastore to load or NULL if an existing datastore in the working directory is to be loaded.\\
- \textbf{SaveDatastore} A string identifying whether if an existing datastore in the working directory should be saved rather than removed.

Some consistency checks are done if a datastore is specified to be loaded including:
- The base year for the loaded datastore must be the same as defined for the model run.
- The defined geography for the loaded datastore must be the same as defined for the model run.

As the name suggests, the `runModule' function runs a module. Following is an example of how it is invoked:

\begin{verbatim}
runModule(ModuleName = "CreateHouseholds", 
          PackageName = "VESimHouseholds",
          RunFor = "AllYears",
          RunYear = Year)
\end{verbatim}

The function arguments and their meanings are as follows:\\
- \textbf{ModuleName} A string identifying the name of a module object.\\
- \textbf{PackageName} A string identifying the name of the package the module is a part of.\\
- \textbf{RunFor} A string identifying whether to run the module for all years (AllYears), only the base year (BaseYear), or for all years except the base year (NotBaseYear).
- \textbf{RunYear} A string identifying the run year.

The \emph{runModule} function runs the named module within the \emph{runModule} function environment. This is a significant improvement over how functions that implement the submodels in the current GreenSTEP (RSPM, EERPAT, RPAT) are run. In these models, functions are run in the the global environment. As a consequence, the global environment collects objects that increase the potential for name conflicts if care is not taken to keep it clean. By running modules within the \emph{runModule} function environment, no changes are made to the global environment and all objects that are created in the process vanish when the \emph{runModule} function completes the work of running the module.

Modules can be run for multiple years by running them in a loop which iterates through all of the years identified in the
`Years' parameter specified in the ``run\_parameters.json'' file (Section 6.1). Section 5 shows an example of using such a loop. Rather than hard code the model run years in the loop, the user can use the `getYears' function to query and return the vector of years.

\hypertarget{api-for-module-developers}{%
\subsubsection{9.2. API for Module Developers}\label{api-for-module-developers}}

The VisionEval API for module developers currently includes 10 functions. These are presented below in 3 groups:\\
- Key module script functions;\\
- Functions to help developers write specifications that are consistent with other modules; and,\\
- Functions that developers may use to simplify model implementation.

\hypertarget{key-module-script-functions}{%
\paragraph{9.2.1. Key Module Script Functions}\label{key-module-script-functions}}

Four functions are almost always used in module scripts.

Module specifications are written as nested R lists that are structured in a particular way (Section 8). Rather than use the `list' function to define the list structure, two alias functions - `item' and `items' - are used to define the structure. An example of how these functions are used is shown in Appendix E. Although modules will run if the `list' function is used instead, it is highly recommended that `item' and `items' be used to maintain a consistent style for all modules.

The `processEstimationInputs' function must be used if a module includes procedures for estimating model parameter(s) from regional data (Section 8). This function is used to check that the data supplied to calculate the regional parameter(s) are consistent with specifications. The function arguments are as follows:\\
- \textbf{Inp\_ls} A list that describes the specifications for the estimation file. This list must meet the framework standards for specification description.\\
- \textbf{FileName} A string identifying the file name. This is the file name without any path information. The file must located in the ``inst/extdata'' directory of the package.\\
- \textbf{ModuleName} A string identifying the name of the module the estimation data is being used in.

The function returns a data frame containing the estimation inputs if all the supplied specifications are met. If any of the specifications are not met, an error is thrown and details regarding the specification error(s) are written to the console.

The `testModule' function is an essential tool for testing that the module will work correctly in the VisionEval model system. The test module function tests a module with a test setup that mimics a model run. A test datastore needs to be present unless no data from other modules is needed (i.e.~all data used by the module is supplied by input data). All inputs required by the module must be present, and all the standard model definitions files included in the ``defs'' directory (Section 6.1) must be present as well. When this function is invoked, the following tests are done on a module:\\
- Checks whether module specifications are proper;\\
- Checks whether test module inputs are consistent with the module `Inp' specifications and that they can be loaded into a test datastore;\\
- Checks whether the test datastore with the loaded inputs contains all the data needed for the module to run;
- Checks whether the module will run without error; and,\\
- Checks whether the outputs of the module are consistent with the module `Set' specifications.

The function arguments are as follows:
- \textbf{ModuleName} A string identifying the module name.\\
- \textbf{ParamDir} A string identifying the location of the directory where the run parameters, model parameters, and geography definition files are located. The default value is defs. This directory should be located in the tests directory.
- \textbf{RunParamFile} A string identifying the name of the run parameters file. The default value is run\_parameters.json.
- \textbf{GeoFile} A string identifying the name of the file which contains geography definitions.
- \textbf{ModelParamFile} A string identifying the name of the file which contains model parameters. The default value is model\_parameters.json.
- \textbf{LoadDatastore} A logical value identifying whether to load an existing datastore. If TRUE, it loads the datastore whose name is identified in the run\_parameters.json file. If FALSE it initializes a new datastore.
- \textbf{SaveDatastore} A logical value identifying whether the module outputs will be written to the datastore. If TRUE the module outputs are written to the datastore. If FALSE the outputs are not written to the datastore.
- \textbf{DoRun} A logical value identifying whether the module should be run. If FALSE, the function will initialize a datastore, check specifications, and load inputs but will not run the module. It will return the list of module inputs. This is described in more detail below. If TRUE, the module will be run and results will be checked for consistency with the module's `Set' specifications.
- \textbf{RunFor} A string identifying whether to run the module for all years (AllYears), only the base year (BaseYear), or for all years except the base year (NotBaseYear)
- \textbf{StopOnErr} A logical value indicating whether model execution should be stopped if the module transmits one or more error messages or whether execution should continue with the next module. The default value is TRUE. This is how error handling will ordinarily proceed during a model run. A value of FALSE is used when `Initialize' modules in packages are run during model initialization. These `Initialize' modules are used to check and preprocess inputs. For this purpose, the module will identify any errors in the input data, the `initializeModel' function will collate all the data errors and print them to the log.
- \textbf{RequiredPackages} A string vector identifying any other VisionEval packages that the module calls modules from or access datasets from.
- \textbf{TestGeoName} A string identifying the name of a geographic area to return the data for. If the DoRun argument is FALSE, the function returns a list containing all the data the module requests. It will only return the data for one geographic area in the set identified in the RunBy specification. For example if the RunBy specification is Marea, the function will return the list of data for only one Marea. This argument can be used to specify which geographic area the data is to be returned for. Otherwise the data for the first area identified in the datastore is returned.

If the DoRun argument is TRUE, the module will be run and there will be no return value. The module will run for all geographic areas and the outputs will be checked for consistency with the module's \emph{Set} specifications. If that argument is FALSE, the return value of the function is a list containing the data identified in the module's \emph{Get} specifications. That setting is useful for module development in order to create the all the data needed to assist with module programming. It is used in conjunction with the `getFromDatastore' function to create the dataset that will be provided by the framework. The example module script in Appendix E shows how this aspect of the `testModule' function can be used by module developers to make the development of their code easier. The function also writes out messages to the console and to the log as the testing proceeds. These messages include the time when each test starts and when it ends. When a key test fails, requiring a fix before other tests can be run, execution stops and an error message is written to the console. Detailed error messages are also written to the log.

\hypertarget{functions-to-assist-specification-writing}{%
\paragraph{9.2.2. Functions to Assist Specification Writing}\label{functions-to-assist-specification-writing}}

As was explained above in Sections 4.1 and 8.1, the VisionEval model system uses data specifications to help assure that modules can work properly with one another. The data specifications are saved as attributes for each dataset that are saved to the datastore by a module. The specifications are checked for consistency for each dataset a module requests to be retrieved from the datastore. A couple of functions assist a module developer with identifying datasets that registered modules produce and for retrieving `Get' specifications for the datasets the developer's module will use.

The `item' and `items' functions are used to organize specifications in the module script. They are aliases of the R language `list' function.

The `readVENameRegistry' function returns a list containing the specifications for all datasets that registered modules save to the datastore. This list contains two components. The components are data frames containing the specifications for all datasets identified in the `Inp' and `Set' of registered modules. Each data frame row lists the specifications for a dataset as well as the module which produces the dataset and the package the module is in. This function is useful to developers for:\\
- Avoiding dataset naming conflicts with other modules; and,\\
- Identifying datasets produced by other modules that can be used in module calculations.

At the present time, the `readVENameRegistry' function has fairly rudimentary functionality. The only argument, `NameRegistryDir', allows the user to specify the local directory where the name registry is located. In the future, the function will read the registry from the remote repository where VisionEval modules are stored. Also, the function will also be modified to enable the module developer to search for datasets based on keywords, module names, package names, and keywords.

The `getRegisteredGetSpecs' function helps the module developer to write `Get' specifications that are consistent with the specifications of registered datasets. This function returns a data frame containing the `Get' specifications for specified datasets. The function arguments are as follows:\\
- \textbf{Names\_} A character vector of the dataset names to get specifications for.\\
- \textbf{Tables\_} A character vector of the tables that the datasets are a part of.\\
- \textbf{Groups\_} A character vector of the groups that the tables are a part of.\\
- \textbf{NameRegistryDir} A string identifying the path to the directory where the name registry file is located.

At the present time, the function returns a data frame which contains the `Get' specifications for each requested dataset. It is up to the module developer to put the information into the proper form in the module script. In the future, the function will be modified to return the `Get' specifications in list form that may be copied into a module script.

\hypertarget{processing-runtime-errors-and-warnings}{%
\paragraph{9.2.3. Processing Runtime Errors and Warnings}\label{processing-runtime-errors-and-warnings}}

Section 8.1.5 described how the \emph{Initialize} module can be used to perform input data checks more than the basic data checking performed by the framework. Although the use of framework data checks and an \emph{Initialize} module can and should ideally catch all data errors/warnings during model initialization, there are sometimes instances where errors/warnings can only be caught during runtime. Runtime errors/warnings should ideally be caught gracefully and the user should be presented with an understandable message that will direct them to a solution rather than cause the program to crash with a cryptic R language message. The framework provides functions to assist the module developer to identify errors and warnings to the framework during runtime and to include helpful messages. The \emph{addErrorMsg} function is used to pass an error message to the framework. If the module code catches a specified error, it should handle the error so that the code doesn't crash and use the \emph{addErrorMsg} function to record the error for processing by the framework. By default, if an error message is returned by a module, the \emph{runModule} function will stop model execution, will print a message to the console that an error occurred in running the module, and will print details of the error that the module developer included in the message. The \emph{addErrorMsg} function takes two arguments: \emph{ResultsListName}, a string identifying the name of the results list returned by the module (e.g.~`Out\_ls'); \emph{ErrMsg} a string that is the error message that will be written to the log for the user to see. Likewise, the \emph{addWarningMsg} function likewise is used to pass a warning message to the framework. In the case of warnings, the model run is not stopped but a warning is printed in the console and details are written to the log. Following is an example of the use of \emph{addWarningMsg} message in checking for unlikely population density:

\begin{verbatim}
  #Calculate density measures
  #--------------------------
  #Population density
  D1B_ <- with(D_df, Pop / Area)
  #Check for high population density values and add warning
  IsHighDensity_ <- D1B_ > 100
  HighDensityBzones_ <- Bz[IsHighDensity_]
  if (any(IsHighDensity_)) {
    Msg <- paste0(
      "The following Bzones in the year ", L$G$Year, " ",
      "have population densities greater than ",
      "100 persons per acre: ", paste(HighDensityBzones_, collapse = ", "), ". ",
      "This density is a relatively high level. ",
      "Check your Bzone area and housing inputs for these Bzones and make ",
      "sure that they are correct."
    )
    addWarningMsg("Out_ls", Msg)
    rm(Msg)
  }
  rm(IsHighDensity_, HighDensityBzones_)
  #Employment density
  D1C_ <- with(D_df, TotEmp / Area)
  #Activity density
  D1D_ <- with(D_df, (TotEmp + NumHh) / Area)
\end{verbatim}

\hypertarget{utility-functions-for-implementing-modules}{%
\paragraph{9.2.4. Utility Functions for Implementing Modules}\label{utility-functions-for-implementing-modules}}

Many submodels of the GreenSTEP and RSPM models are linear or binomial logit models. Several of the binary logit model implementations adjust the constant to match specified input proportions. For example, the light truck model enables model users to specify a future light truck proportion and the model will adjust the constant to match that proportion. Likewise, several linear models adjust a dispersion parameter to match a specified population mean. This is done for example in the household income model to match future per capita income projections. The adjustments are made with the use of a binary search algorithm. The following three functions simplify the implementation of those models in the VisionEval model system.

The `applyLinearModel' function applies a linear model and optionally adjusts the model to match a target mean value. It has the following arguments:\\
- \textbf{Model\_ls} A list which contains the following components: 1) Type - which has a value of `linear'; 2) Formula - a string representation of the model equation; 3) PrepFun - a function which prepares the input data frame for the model application. If no preparation, this element of the list should not be present or should be set equal to NULL; 4) SearchRange - a two-element numeric vector which specifies the acceptable search range to use when determining the dispersion factor. 5) OutFun a function that is applied to transform the results of applying the linear model. For example to untransform a power-transformed variable. If no transformation is necessary, this element of the list should not be present or should be set equal to NULL.\\
- \textbf{Data\_df} A data frame containing the data required for applying the model.\\
- \textbf{TargetMean} A number identifying a target mean value to be achieved or NULL if there is no target.\\
- \textbf{CheckTargetSearchRange} A logical identifying whether the function is to only check whether the specified `SearchRange' for the model will produce acceptable values (i.e.~no NA or NaN values). If FALSE (the default), the function will run the model and will not check the target search range.

It is important to note that the `Model\_ls' argument is a list that must contain the components listed above. Also, the `CheckTargetSearchRange' argument must NOT be set equal TRUE in the call in the module function. Setting it equal to TRUE is only useful during model estimation to help set the target search range values.

The function returns a vector of numeric values for each record of the input data frame if the model is being run, or if the function is run to only check the target search range, a summary of predicted values when the model is run with dispersion set at the high value of the search range.

The `applyBinomialModel' function applies a binomial model and optionally adjusts the model to match a target proportion. It has the following arguments which are similar to those of the `applyLinearModel' function:\\
- \textbf{Model\_ls} A list which contains the following components: 1) Type - which has a value of `binomial'; 2) Formula - a string representation of the model equation; 3) Choices - a two-element vector listing the choice set. The first element is the choice that the binary logit model equation predicts the odds of; 4) PrepFun - a function which prepares the input data frame for the model application. If no preparation, this element of the list should not be present or should be set equal to NULL; 5) SearchRange - a two-element numeric vector which specifies the acceptable search range to use when determining the factor for adjusting the model constant.\\
- \textbf{Data\_df} A data frame containing the data required for applying the model.\\
- \textbf{TargetProp} A number identifying a target proportion for the default choice to be achieved for the input data or NULL if there is no target proportion to be achieved.\\
- \textbf{CheckTargetSearchRange} A logical identifying whether the function is to only check whether the specified `SearchRange' for the model will produce acceptable values (i.e.~no NA or NaN values). If FALSE (the default), the function will run the model and will not check the target search range.

\begin{itemize}
\item
  \textbf{ApplyRandom} A logical value which determines how the binomial choice is made. The binomial choice model returns a probability that modeled selection is chosen. For example a housing type model could predict the probability that a household lives in a single-family home. If the \emph{ApplyRandom} argument is TRUE, the function takes a sample from a uniform distribution from 0 to 1 and if the value is less than the probability the modeled choice is selected. Otherwise the alternate choice is selected. If the \emph{ApplyRandom} argument is FALSE the modeled choice is selected if the modeled probability is greater than 0.5.
\item
  \textbf{ReturnProbs} A logical value which if TRUE returns the modeled choice probabilities instead of the modeled choices.
\end{itemize}

The function returns a vector of choice values for each record of the input data frame if the neither the \emph{CheckTargetSearchRange} or \emph{ReturnProbs} arguments are TRUE. If the \emph{ReturnProbs} argument is TRUE the choice probabilities are returned. If the \emph{CheckTargetSearchRange} argument is TRUE the function is run to only check the target search range, a two-element vector identifying if the search range produces NA or NaN values.

The third function, `binarySearch', is called by the `applyLinearModel' function if the value of the `TargetMean' argument is not NULL, and called by the `applyBinomialModel' function if the value of the `TargetProp' argument is not NULL. Module developers may find this function to be useful in their own module implementation code. The arguments of the function are:\\
- \textbf{Function} A function which returns a value which is compared to the Target argument. The function must take as its first argument a value which from the SearchRange\_. It must return a value that may be compared to the Target value.\\
- \textbf{SearchRange\_} A two element numeric vector which has the lowest and highest values of the parameter range within which the search will be carried out.
- \textbf{\ldots{}} One or more optional arguments for the Function.\\
- \textbf{Target} A numeric value that is compared with the return value of the `Function'.\\
- \textbf{MaxIter} An integer specifying the maximum number of iterations for the search to attempt in order to match the `Target' within the specified `Tolerance'.\\
- \textbf{Tolerance} A numeric value specifying the proportional difference between the `Target' and the return value of the Function to determine when the search is complete.

The function returns a value within the `SearchRange\_' for the function parameter which matches the target value.

Developers can refer to the source code for the `applyLinearModel' and `applyBinomialModel' functions to help understand how to use this function.

\hypertarget{module-documentation-function}{%
\paragraph{9.2.5. Module Documentation Function}\label{module-documentation-function}}

Section 8.1.4 describes how module documentation is to be included in the module script. The `documentModule' prepares formatted documentation from the script documentation. Refer to that section for more details.

\hypertarget{debugging-runtime-errors}{%
\paragraph{9.2.6. Debugging Runtime Errors}\label{debugging-runtime-errors}}

Although the large majority of runtime errors are avoided by the framework's data specification system, \emph{Initialize} modules, and internal module error checks, inevitably some errors are only caught during runtime. This can pose challenges for debugging because the R language error messages can be cryptic. Often the easiest way to find the error is to recreate the state of the model at the start of module execution and then step through the module code to find the error. This is made simpler by using the \emph{fetchModuleData} function. This function retrieves from the datastore the data that was passed to the module so that the code can be checked. The function takes the following arguments:
- \emph{ModuleName}: a string identifying the name of the module.
- \emph{PackageName}: a string identifying the name of the package that the module is in.
- \emph{Year}: a string identifying the model run year to retrieve the data for.
- \emph{Geo}: a string identifying the geography to retrieve the data for if the module's `RunBy' specification is not `Region'. This argument is omitted if the `RunBy' specification is `Region'.

Here is an example of the steps that were used in debugging the CalculateUrbanMixMeasure module which errored when running a model in the R console:\\
1. The model run stopped and a cryptic R error message was printed to the console.\\
2. The following code was entered at the console to get the dataset used by the module: \texttt{L\ \textless{}-\ fetchModuleData("CalculateUrbanMixMeasure",\ "VELandUse",\ "2040")}. Note that \emph{L} is the standard name used by modules to refer to the data list provided by the framework to the module.\\
3. The module function code was retrieved with \texttt{edit(VELandUse::CalculateUrbanMixMeasure)} and pasted into a temporary file.\\
4. The module code in the temporary file was stepped through line by line until an error occurred. Then the values of data used in the computation could be checked to determine the cause. In this case, error was caused by very high population densities that were outside the range of values used to estimate the binomial logit model which determines the odds that a Bzone is urban-mixed-use. Calculating the odds involves exponentiation which in the case of very high densities produced infinite values which in turn caused probability values of NA. That in turn caused an error when used in the \emph{sample} function.\\
5. Code to fix the module was developed and tested in the temporary file. Then fixed code was used to modify the CalculateUrbanMixMeasure code in the VELandUse package.

\hypertarget{appendix-a-example-model-run-script}{%
\subsection{Appendix A: Example Model Run Script}\label{appendix-a-example-model-run-script}}

\begin{verbatim}
#===========
#run_model.R
#===========

#This script demonstrates the VisionEval framework for the RSPM model.

#Load libraries
#--------------
library(visioneval)

#Initialize model
#----------------
initializeModel(
  ParamDir = "defs",
  RunParamFile = "run_parameters.json",
  GeoFile = "geo.csv",
  ModelParamFile = "model_parameters.json",
  LoadDatastore = FALSE,
  DatastoreName = NULL,
  SaveDatastore = TRUE
  )  

#Run all demo module for all years
#---------------------------------
for(Year in getYears()) {
  runModule(ModuleName = "CreateHouseholds", 
            PackageName = "VESimHouseholds",
            RunFor = "AllYears",
            RunYear = Year)
  runModule(ModuleName = "PredictWorkers", 
            PackageName = "VESimHouseholds",
            RunFor = "AllYears",
            RunYear = Year)
  runModule(ModuleName = "AssignLifeCycle", 
            PackageName = "VESimHouseholds",
            RunFor = "AllYears",
            RunYear = Year)
  runModule(ModuleName = "PredictIncome", 
            PackageName = "VESimHouseholds",
            RunFor = "AllYears",
            RunYear = Year)
  runModule(ModuleName = "PredictHousing", 
            PackageName = "VESimHouseholds",
            RunFor = "AllYears",
            RunYear = Year)
  runModule(ModuleName = "LocateHouseholds",
            PackageName = "VELandUse",
            RunFor = "AllYears",
            RunYear = Year)
  runModule(ModuleName = "LocateEmployment",
            PackageName = "VELandUse",
            RunFor = "AllYears",
            RunYear = Year)
  runModule(ModuleName = "AssignDevTypes",
            PackageName = "VELandUse",
            RunFor = "AllYears",
            RunYear = Year)
  runModule(ModuleName = "Calculate4DMeasures",
            PackageName = "VELandUse",
            RunFor = "AllYears",
            RunYear = Year)
  runModule(ModuleName = "CalculateUrbanMixMeasure",
            PackageName = "VELandUse",
            RunFor = "AllYears",
            RunYear = Year)
  runModule(ModuleName = "AssignTransitService",
            PackageName = "VETransportSupply",
            RunFor = "AllYears",
            RunYear = Year)
  runModule(ModuleName = "AssignRoadMiles",
            PackageName = "VETransportSupply",
            RunFor = "AllYears",
            RunYear = Year)
  runModule(ModuleName = "AssignVehicleOwnership",
            PackageName = "VEVehicleOwnership",
            RunFor = "AllYears",
            RunYear = Year)
  runModule(ModuleName = "CalculateHouseholdDVMT",
            PackageName = "VETravelDemand",
            RunFor = "AllYears",
            RunYear = Year)
  runModule(ModuleName = "CalculateAltModeTrips",
            PackageName = "VETravelDemand",
            RunFor = "AllYears",
            RunYear = Year)
}
\end{verbatim}

\hypertarget{appendix-b-geography-specification-file-geography.csv-examples}{%
\subsection{Appendix B: Geography Specification File (geography.csv) Examples}\label{appendix-b-geography-specification-file-geography.csv-examples}}

\textbf{Figure A1. Example of a geography.csv file that only specifies Azones}\\
\includegraphics{img/azone_geo_file.png}

\textbf{Figure A2. Example of geography.csv file that specifies Azones and Bzones}\\
\includegraphics{img/azone_bzone_geo_file.png}

\hypertarget{appendix-c-recognized-data-types-and-units}{%
\subsection{Appendix C: Recognized Data Types and Units}\label{appendix-c-recognized-data-types-and-units}}

Recognized Data Types and Units are defined in the `Types' function. The definition also includes the factors for converting between units. This function definition is listed below:

\begin{verbatim}
$double
$double$units
[1] NA

$double$mode
[1] "double"


$integer
$integer$units
[1] NA

$integer$mode
[1] "integer"


$character
$character$units
[1] NA

$character$mode
[1] "character"


$logical
$logical$units
[1] NA

$logical$mode
[1] "logical"


$compound
$compound$units
[1] NA

$compound$mode
[1] "double"


$currency
$currency$units
$currency$units$USD
USD 
  1 


$currency$mode
[1] "double"


$distance
$distance$units
$distance$units$MI
        MI         FT         KM          M 
   1.00000 5280.00000    1.60934 1609.34000 

$distance$units$FT
         MI          FT          KM           M 
0.000189394 1.000000000 0.000304800 0.304800000 

$distance$units$KM
         MI          FT          KM           M 
   0.621371 3280.840000    1.000000 1000.000000 

$distance$units$M
         MI          FT          KM           M 
0.000621371 3.280840000 0.001000000 1.000000000 


$distance$mode
[1] "double"


$area
$area$units
$area$units$SQMI
       SQMI        ACRE        SQFT         SQM          HA        SQKM 
1.00000e+00 6.40000e+02 2.78800e+07 2.59000e+06 2.58999e+02 2.58999e+00 

$area$units$ACRE
       SQMI        ACRE        SQFT         SQM          HA        SQKM 
1.56250e-03 1.00000e+00 4.35600e+04 4.04686e+03 4.04686e-01 4.04686e-03 

$area$units$SQFT
      SQMI       ACRE       SQFT        SQM         HA       SQKM 
3.5870e-08 2.2957e-05 1.0000e+00 9.2903e-02 9.2903e-06 9.2903e-08 

$area$units$SQM
       SQMI        ACRE        SQFT         SQM          HA        SQKM 
3.86100e-07 2.47105e-04 1.07639e+01 1.00000e+00 1.00000e-04 1.00000e-06 

$area$units$HA
       SQMI        ACRE        SQFT         SQM          HA        SQKM 
3.86102e-03 2.47105e+00 1.07639e+05 3.86102e-03 1.00000e+00 1.00000e-02 

$area$units$SQKM
       SQMI        ACRE        SQFT         SQM          HA        SQKM 
3.86102e-01 2.47105e+02 1.07600e+07 1.00000e+06 1.00000e+02 1.00000e+00 


$area$mode
[1] "double"


$mass
$mass$units
$mass$units$LB
         LB         TON          MT          KG          GM 
1.00000e+00 5.00000e-04 4.53592e-04 4.53592e-01 4.53592e+02 

$mass$units$TON
         LB         TON          MT          KG          GM 
2.00000e+03 1.00000e+00 9.07185e-01 9.07185e+02 9.07185e+05 

$mass$units$MT
         LB         TON          MT          KG           M 
2.20462e+03 1.10231e+00 1.00000e+00 1.00000e+03 1.00000e+06 

$mass$units$KG
         LB         TON          MT          KG          GM 
2.20462e+00 1.10231e-03 1.00000e-03 1.00000e+00 1.00000e+03 

$mass$units$GM
         LB         TON          MT          KG          GM 
2.20462e-03 1.10230e-06 1.00000e-06 1.00000e-03 1.00000e+00 


$mass$mode
[1] "double"


$volume
$volume$units
$volume$units$GAL
    GAL       L 
1.00000 3.78541 

$volume$units$L
     GAL        L 
0.264172 1.000000 


$volume$mode
[1] "double"


$time
$time$units
$time$units$YR
      YR      DAY       HR      MIN      SEC 
       1      365     8760   525600 31540000 

$time$units$DAY
         YR         DAY          HR         MIN         SEC 
2.73973e-03 1.00000e+00 2.40000e+01 1.44000e+03 8.64000e+04 

$time$units$HR
         YR         DAY          HR         MIN         SEC 
1.14155e-04 4.16667e-02 1.00000e+00 6.00000e+01 3.60000e+03 

$time$units$MIN
         YR         DAY          HR         MIN         SEC 
1.90260e-06 6.94444e-04 1.66667e-02 1.00000e+00 6.00000e+01 

$time$units$SEC
         YR         DAY          HR         MIN         SEC 
3.17100e-08 1.15740e-05 2.77778e-04 1.66667e-02 1.00000e+00 


$time$mode
[1] "double"


$energy
$energy$units
$energy$units$KWH
       KWH         MJ        GGE 
1.00000000 3.60000000 0.02967846 

$energy$units$MJ
        KWH          MJ         GGE 
0.277778000 1.000000000 0.008244023 

$energy$units$GGE
      KWH        MJ       GGE 
 33.69447 121.30000   1.00000 


$energy$mode
[1] "double"


$people
$people$units
$people$units$PRSN
PRSN 
   1 


$people$mode
[1] "integer"


$vehicles
$vehicles$units
$vehicles$units$VEH
VEH 
  1 


$vehicles$mode
[1] "integer"


$trips
$trips$units
$trips$units$TRIP
TRIP 
   1 


$trips$mode
[1] "integer"


$households
$households$units
$households$units$HH
HH 
 1 


$households$mode
[1] "integer"


$employment
$employment$units
$employment$units$JOB
JOB 
  1 


$employment$mode
[1] "integer"


$activity
$activity$units
$activity$units$HHJOB
HHJOB 
    1 
\end{verbatim}

\hypertarget{appendix-d-scenario-input-file-examples}{%
\subsection{Appendix D: Scenario Input File Examples}\label{appendix-d-scenario-input-file-examples}}

\textbf{Figure B1. Example of input file to be loaded into `Global' group}\\
\emph{NOTE: Heavy lines denote rows that are hidden to shorten the display}\\
\includegraphics{img/global_input_file.png}

\textbf{Figure B2. Example of input file to be loaded into `forecast year' group}\\
\includegraphics{img/forecast_year_input_file.png}

\hypertarget{appendix-e-example-module-script-from-the-vetransportsupply-package}{%
\subsection{Appendix E: Example Module Script from the VETransportSupply Package}\label{appendix-e-example-module-script-from-the-vetransportsupply-package}}

\begin{verbatim}
#======================
#AssignTransitService.R
#======================

#<doc>
#
## AssignTransitService Module
#### November 5, 2018
#
#This module assigns transit service level to the metropolitan area (Marea) and neighborhoods (Bzones). Annual revenue-miles (i.e. transit miles in revenue service) by transit mode type are read from an input file. The following 8 modes are recognized:
#* DR = Demand-responsive
#* VP = Vanpool and similar
#* MB = Standard motor bus
#* RB = Bus rapid transit and commuter bus
#* MG = Monorail/automated guideway
#* SR = Streetcar/trolley bus/inclined plain
#* HR = Heavy Rail/Light Rail
#* CR = Commuter Rail/Hybrid Rail/Cable Car/Aerial Tramway
#
#Revenue miles are converted to bus (i.e. MB) equivalents using factors derived from urbanized are data from the National Transit Database (NTD). Bus-equivalent revenue miles are used in models which predict vehicle ownership and household DVMT.
#
#Revenue miles by mode type are also translated (using NTD data) into vehicle miles by 3 vehicle types: van, bus, and rail. Miles by vehicle type are used to calculate public transit energy consumption and emissions.
#
#The module also reads in user supplied data on relative public transit accessibility by Bzone as explained below.
#
### Model Parameter Estimation
#
#Parameters are calculated to convert the revenue miles for each of the 8 recognized public transit modes into bus equivalents, and to convert revenue miles into vehicle miles. Data extracted from the 2015 National Transit Database (NTD) are used to calculate these parameters. The extracted datasets are in the *2015_Service.csv* and *2015_Agency_information.csv* files in the *inst/extdata* directory of this package. These files contain information about transit service and transit service providers located within urbanized areas. Documentation of the data are contained in the accompanying *2015_Service.txt* and *2015_Agency_information.txt* files.
#
#Bus equivalent factors for each of the 8 modes is calculated on the basis of the average productivity of each mode as measured by the ratio of passenger miles to revenue miles. The bus-equivalency factor of each mode is the ratio of the average productivity of the mode to the average productivity of the bus (MB) mode.
#
#Factors to compute vehicle miles by mode from revenue miles by mode are calculated from the NTD data on revenue miles and deadhead (i.e. out of service) miles. The vehicle mile factor is the sum of revenue and deadhead miles divided by the revenue miles. These factors vary by mode.
#
### How the Module Work
#
#The user supplies data on the annual revenue miles of service by each of the 8 transit modes for the Marea. These revenue miles are converted to bus equivalents using the estimated bus-equivalency factors and summed to calculate total bus-equivalent revenue miles. This value is divided by the urbanized area population of the Marea to compute bus-equivalent revenue miles per capita. This public transit service measure is used in models of household vehicle ownership and household vehicle travel.
#
#The user supplied revenue miles by mode are translated into vehicle miles by mode using the estimated conversion factors. The results are then simplified into 3 vehicle types (Van, Bus, Rail) where the DR and VP modes are assumed to be served by vans, the MB and RB modes are assumed to be served by buses, and the MG, SR, HR, and CR modes are assumed to be served by rail.
#
#The user also supplies information on the aggregate frequency of peak period transit service within 0.25 miles of the Bzone boundary per hour during evening peak period. This is the *D4c* measure included in the Environmental Protection Agency's (EPA) [Smart Location Database] (https://www.epa.gov/smartgrowth/smart-location-database-technical-documentation-and-user-guide). Following is the description of the measure from the user guide:
#>EPA analyzed GTFS data to calculate the frequency of service for each transit route between 4:00 and 7:00 PM on a weekday. Then, for each block group, EPA identified transit routes with service that stops within 0.4 km (0.25 miles). Finally EPA summed total aggregate service frequency by block group. Values for this metric are expressed as service frequency per hour of service.
#
#</doc>


#=============================================
#SECTION 1: ESTIMATE AND SAVE MODEL PARAMETERS
#=============================================

#Describe specifications for transit data files
#----------------------------------------------
#Transit agency data
AgencyInp_ls <- items(
  item(
    NAME =
      items("AgencyID",
            "PrimaryUZA",
            "Population"),
    TYPE = "integer",
    PROHIBIT = c("NA", "<= 0"),
    ISELEMENTOF = "",
    UNLIKELY = "",
    TOTAL = ""
  ),
  item(
    NAME = "UZAName",
    TYPE = "character",
    PROHIBIT = "",
    ISELEMENTOF = "",
    UNLIKELY = "",
    TOTAL = ""
  )
)

#Transit service data
ServiceInp_ls <- items(
  item(
    NAME =
      items("RevenueMiles",
            "DeadheadMiles",
            "PassengerMiles"),
    TYPE = "double",
    PROHIBIT = c("< 0"),
    ISELEMENTOF = "",
    UNLIKELY = "",
    TOTAL = ""
  ),
  item(
    NAME =
      items("AgencyID",
            "AgencyName",
            "Mode",
            "TimePeriod"),
    TYPE = "character",
    PROHIBIT = "",
    ISELEMENTOF = "",
    UNLIKELY = "",
    TOTAL = ""
  )
)

#Define function to estimate public transit model parameters
#-----------------------------------------------------------
#' Estimate public transit model parameters.
#'
#' \code{estimateTransitModel} estimates transit model parameters.
#'
#' This function estimates transit model parameters from 2015 National Transit
#' Database information on transit agencies and service levels. The function
#' calculates factors for converting annual revenue miles by transit mode to
#' total bus-equivalent revenue miles. It also calculates factors to convert
#' revenue miles by mode into vehicle miles by mode.
#'
#' @return A list containing the following elements:
#' BusEquivalents_df: factors to convert revenue miles by mode into bus
#' equivalents,
#' UZABusEqRevMile_df: data on bus equivalent revenue miles by urbanized area,
#' VehMiFactors_df: factors to convert revenue miles by mode into vehicle miles
#' by mode.
#' @name estimateTransitModel
#' @import stats
#' @export
estimateTransitModel <- function() {
  #Read in and process transit datasets
  #------------------------------------
  #Read in transit agency datasets
  Agency_df <-
    processEstimationInputs(
      AgencyInp_ls,
      "2015_Agency_information.csv",
      "AssignTransitService.R")
  #Read in transit service datasets
  Service_df <-
    processEstimationInputs(
      ServiceInp_ls,
      "2015_Service.csv",
      "AssignTransitService.R")
  #Select only rows with annual totals
  Service_df <- Service_df[Service_df$TimePeriod == "Annual Total",]
  #Select only rows for service in urbanized areas
  Service_df <- Service_df[Service_df$AgencyID %in% Agency_df$AgencyID,]

  #Define combined modes and create index datasets
  #-----------------------------------------------
  CombinedCode_ls <-
    list(
      DR = c("DR", "DT"),
      VP = c("VP", "PB"),
      MB = c("MB"),
      RB = c("RB", "CB"),
      MG = c("MG"),
      SR = c("SR", "TB", "IP"),
      HR = c("LR", "HR", "AR"),
      CR = c("CR", "YR", "CC", "TR")
    )
  CombinedCode_ <-
    c(DR = "DR", DT = "DR", VP = "VP", PB = "VP", MB = "MB", RB = "RB", CB = "RB",
      MG = "MG", SR = "SR", TB = "SR", IP = "SR", LR = "HR", HR = "HR", AR = "HR",
      CR = "CR", YR = "CR", CC = "CR", TR = "CR"
    )
  Cm <- c("DR", "VP", "MB", "RB", "MG", "SR", "HR", "CR")

  #Calculate bus equivalency factors
  #---------------------------------
  #Calculate productivity measure
  Service_df$Productivity <-
    Service_df$PassengerMiles / Service_df$RevenueMiles
  #Calculate the average productivity by mode
  AveProductivity_Md <-
    tapply(Service_df$Productivity, Service_df$Mode, mean, na.rm = TRUE)
  #Calculate bus equivalency of different modes
  BusEquiv_Md <- AveProductivity_Md / AveProductivity_Md["MB"]
  #Calculate average productivity by combined mode
  BusEquiv_Cm <- unlist(lapply(CombinedCode_ls, function(x) {
    mean(BusEquiv_Md[x])
  }))
  #Create data frame with mode names and equivalency factors
  BusEquiv_df <-
    data.frame(
      Mode = names(BusEquiv_Cm),
      BusEquivalents = unname(BusEquiv_Cm)
    )

  #Calculate revenue miles to total vehicle mile factors by mode
  #-------------------------------------------------------------
  #Convert DeadheadMiles for mode DT from NA to 0
  Service_df$DeadheadMiles[Service_df$Mode == "DT"] <- 0
  #Create data frame of complete cases of revenue miles and deadhead miles
  Veh_df <- Service_df[, c("Mode", "RevenueMiles", "DeadheadMiles")]
  Veh_df <- Veh_df[complete.cases(Veh_df),]
  #Calculate total revenue miles by combined mode
  RevMi_Md <- tapply(Veh_df$RevenueMiles, Veh_df$Mode, sum)
  RevMi_Cm <- unlist(lapply(CombinedCode_ls, function(x) {
    sum(RevMi_Md[x])
  }))
  #Calculate total deadhead miles by combined mode
  DeadMi_Md <- tapply(Veh_df$DeadheadMiles, Veh_df$Mode, sum)
  DeadMi_Cm <- unlist(lapply(CombinedCode_ls, function(x) {
    sum(DeadMi_Md[x])
  }))
  #Calculate vehicle mile factors by combined mode
  VehMiFactors_Cm <- (RevMi_Cm + DeadMi_Cm) / RevMi_Cm
  VehMiFactors_df <-
    data.frame(
      Mode = names(VehMiFactors_Cm),
      VehMiFactors = unname(VehMiFactors_Cm)
    )

  #Calculate bus equivalent transit service by urbanized area
  #----------------------------------------------------------
  #Attach urbanized area code to service data
  Service_df$UzaCode <- Agency_df$PrimaryUZA[match(Service_df$AgencyID, Agency_df$AgencyID)]
  Service_df$UzaName <- Agency_df$UZAName[match(Service_df$AgencyID, Agency_df$AgencyID)]
  #Tabulate vehicle revenue miles by urbanized area and mode
  RevMi_UnMd <-
    tapply(Service_df$RevenueMiles,
           list(Service_df$UzaName, Service_df$Mode),
           sum)
  RevMi_UnMd[is.na(RevMi_UnMd)] <- 0
  #Summarize by combined mode
  RevMi_UnCm <- t(apply(RevMi_UnMd, 1, function(x) {
    tapply(x, CombinedCode_[colnames(RevMi_UnMd)], sum, na.rm = TRUE)[Cm]
  }))
  #Sum up the bus-equivalent revenue miles by urbanized area
  BusEqRevMi_Un <-
    rowSums(sweep(RevMi_UnCm, 2, BusEquiv_Cm, "*"))
  #Tabulate population by urbanized area
  UzaPop_Un <- Agency_df$Population[!duplicated(Agency_df$PrimaryUZA)]
  names(UzaPop_Un) <- Agency_df$UZAName[!duplicated(Agency_df$PrimaryUZA)]
  UzaPop_Un <- UzaPop_Un[names(BusEqRevMi_Un)]
  UzaPop_Un <- UzaPop_Un[names(BusEqRevMi_Un)]
  #Calculate bus-equivalent revenue miles per capita
  BusEqRevMiPC_Un <- BusEqRevMi_Un / UzaPop_Un
  #Create data frame of urbanized area bus revenue mile equivalency
  UZABusEqRevMile_df <-
    Service_df[!duplicated(Service_df$UzaName), c("UzaCode", "UzaName")]
  rownames(UZABusEqRevMile_df) <- UZABusEqRevMile_df$UzaName
  UZABusEqRevMile_df <- UZABusEqRevMile_df[names(BusEqRevMi_Un),]
  UZABusEqRevMile_df$BusEqRevMi <- unname(BusEqRevMi_Un)
  UZABusEqRevMile_df$UzaPop <- unname(UzaPop_Un)
  UZABusEqRevMile_df$BusEqRevMiPC <- unname(BusEqRevMiPC_Un)
  rownames(UZABusEqRevMile_df) <- NULL

  #Return the results
  #------------------
  list(
    BusEquivalents_df = BusEquiv_df,
    UZABusEqRevMile_df = UZABusEqRevMile_df,
    VehMiFactors_df = VehMiFactors_df
  )
}

#Estimate public transit model parameters
#----------------------------------------
TransitParam_ls <- estimateTransitModel()
BusEquivalents_df <- TransitParam_ls$BusEquivalents_df
UZABusEqRevMile_df <- TransitParam_ls$UZABusEqRevMile_df
VehMiFactors_df <- TransitParam_ls$VehMiFactors_df
rm(AgencyInp_ls)
rm(ServiceInp_ls)

#Save the bus equivalency factors
#--------------------------------
#' Bus equivalency factors
#'
#' Bus revenue mile equivalency factors to convert revenue miles for various
#' modes to bus-equivalent revenue miles.
#'
#' @format A data frame with 8 rows and 2 variables containing factors for
#' converting revenue miles of various modes to bus equivalent revenue miles.
#' Mode names are 2-character codes corresponding to consolidated mode types.
#' Consolidated mode types represent modes that have similar characteristics and
#' bus equivalency values. The consolidate mode codes and their meanings are as
#' follows:
#' DR = Demand-responsive
#' VP = Vanpool and similar
#' MB = Standard motor bus
#' RB = Bus rapid transit and commuter bus
#' MG = Monorail/automated guideway
#' SR = Streetcar/trolley bus/inclined plain
#' HR = Heavy Rail/Light Rail
#' CR = Commuter Rail/Hybrid Rail/Cable Car/Aerial Tramway
#'
#' \describe{
#'   \item{Mode}{abbreviation for consolidated mode}
#'   \item{BusEquivalents}{numeric factor for converting revenue miles to bus equivalents}
#' }
#' @source AssignTransitService.R script.
"BusEquivalents_df"
usethis::use_data(BusEquivalents_df, overwrite = TRUE)

#Save the vehicle mile factors
#-----------------------------
#' Revenue miles to vehicle miles conversion factors
#'
#' Vehicle mile factors convert revenue miles for various modes to vehicle
#' miles for those modes.
#'
#' @format A data frame with 8 rows and 2 variables containing factors for
#' converting revenue miles of various modes to vehicle miles.
#' Mode names are 2-character codes corresponding to consolidated mode types.
#' Consolidated mode types represent modes that have similar characteristics and
#' bus equivalency values. The consolidate mode codes and their meanings are as
#' follows:
#' DR = Demand-responsive
#' VP = Vanpool and similar
#' MB = Standard motor bus
#' RB = Bus rapid transit and commuter bus
#' MG = Monorail/automated guideway
#' SR = Streetcar/trolley bus/inclined plain
#' HR = Heavy Rail/Light Rail
#' CR = Commuter Rail/Hybrid Rail/Cable Car/Aerial Tramway
#'
#' \describe{
#'   \item{Mode}{abbreviation for consolidated mode}
#'   \item{VehMiFactors}{numeric factors for converting revenue miles to
#'   vehicle miles}
#' }
#' @source AssignTransitService.R script.
"VehMiFactors_df"
usethis::use_data(VehMiFactors_df, overwrite = TRUE)

#Save the urbanized area bus equivalency data
#--------------------------------------------
#' Urbanized area bus equivalent revenue mile data for 2015
#'
#' Urbanized area data from the 2015 National Transit Database (NTD) related to
#' the calculation of bus equivalent revenue miles and per capita values.
#'
#' @format A data frame with 439 rows and 5 variables containing urbanized area
#' data on bus equivalent revenue miles
#'
#' \describe{
#'   \item{UzaCode}{integer code corresponding to 5-digit code used in the NTD}
#'   \item{UzaName}{urbanized area name}
#'   \item{BusEqRevMi}{annual bus equivalent revenue miles in the urbanized area}
#'   \item{UzaPop}{urbanized area population}
#'   \item{BusEqRevMiPC}{annual bus equivalent revenue miles per capita in the urbanized area}
#' }
#' @source AssignTransitService.R script.
"UZABusEqRevMile_df"
usethis::use_data(UZABusEqRevMile_df, overwrite = TRUE)

#Clean up
rm(TransitParam_ls)


#================================================
#SECTION 2: DEFINE THE MODULE DATA SPECIFICATIONS
#================================================

#Define the data specifications
#------------------------------
AssignTransitServiceSpecifications <- list(
  #Level of geography module is applied at
  RunBy = "Region",
  #Specify new tables to be created by Inp if any
  #Specify new tables to be created by Set if any
  #Specify input data
  Inp = items(
    item(
      NAME =
        items(
          "DRRevMi",
          "VPRevMi",
          "MBRevMi",
          "RBRevMi",
          "MGRevMi",
          "SRRevMi",
          "HRRevMi",
          "CRRevMi"),
      FILE = "marea_transit_service.csv",
      TABLE = "Marea",
      GROUP = "Year",
      TYPE = "compound",
      UNITS = "MI/YR",
      NAVALUE = -1,
      SIZE = 0,
      PROHIBIT = c("NA", "< 0"),
      ISELEMENTOF = "",
      UNLIKELY = "",
      TOTAL = "",
      DESCRIPTION =
        list(
          "Annual revenue-miles of demand-responsive public transit service",
          "Annual revenue-miles of van-pool and similar public transit service",
          "Annual revenue-miles of standard bus public transit service",
          "Annual revenue-miles of rapid-bus and commuter bus public transit service",
          "Annual revenue-miles of monorail and automated guideway public transit service",
          "Annual revenue-miles of streetcar and trolleybus public transit service",
          "Annual revenue-miles of light rail and heavy rail public transit service",
          "Annual revenue-miles of commuter rail, hybrid rail, cable car, and aerial tramway public transit service"
        )
    ),
    item(
      NAME = "D4c",
      FILE = "bzone_transit_service.csv",
      TABLE = "Bzone",
      GROUP = "Year",
      TYPE = "double",
      UNITS = "aggregate peak period transit service",
      NAVALUE = -1,
      SIZE = 0,
      PROHIBIT = c("NA", "< 0"),
      ISELEMENTOF = "",
      UNLIKELY = "",
      TOTAL = "",
      DESCRIPTION = "Aggregate frequency of transit service within 0.25 miles of block group boundary per hour during evening peak period (Ref: EPA 2010 Smart Location Database)"
    )
  ),
  #Specify data to be loaded from data store
  Get = items(
    item(
      NAME = "Marea",
      TABLE = "Marea",
      GROUP = "Year",
      TYPE = "character",
      UNITS = "ID",
      PROHIBIT = "",
      ISELEMENTOF = ""
    ),
    item(
      NAME = "Marea",
      TABLE = "Bzone",
      GROUP = "Year",
      TYPE = "character",
      UNITS = "ID",
      PROHIBIT = "",
      ISELEMENTOF = ""
    ),
    item(
      NAME =
        items(
          "DRRevMi",
          "VPRevMi",
          "MBRevMi",
          "RBRevMi",
          "MGRevMi",
          "SRRevMi",
          "HRRevMi",
          "CRRevMi"),
      TABLE = "Marea",
      GROUP = "Year",
      TYPE = "compound",
      UNITS = "MI/YR",
      PROHIBIT = c("NA", "< 0"),
      ISELEMENTOF = ""
    ),
    item(
      NAME = "UrbanPop",
      TABLE = "Bzone",
      GROUP = "Year",
      TYPE = "people",
      UNITS = "PRSN",
      PROHIBIT = c("NA", "< 0"),
      ISELEMENTOF = ""
    )
  ),
  #Specify data to saved in the data store
  Set = items(
    item(
      NAME = "TranRevMiPC",
      TABLE = "Marea",
      GROUP = "Year",
      TYPE = "compound",
      UNITS = "MI/PRSN/YR",
      NAVALUE = -1,
      PROHIBIT = c("NA", "< 0"),
      ISELEMENTOF = "",
      SIZE = 0,
      DESCRIPTION = "Ratio of annual bus-equivalent revenue-miles (i.e. revenue-miles at the same productivity - passenger miles per revenue mile - as standard bus) to urbanized area population"
    ),
    item(
      NAME =
        items(
          "VanDvmt",
          "BusDvmt",
          "RailDvmt"
        ),
      TABLE = "Marea",
      GROUP = "Year",
      TYPE = "compound",
      UNITS = "MI/DAY",
      NAVALUE = -1,
      PROHIBIT = c("NA", "< 0"),
      ISELEMENTOF = "",
      SIZE = 0,
      DESCRIPTION = items(
        "Total daily miles traveled by vans of various sizes to provide demand responsive, vanpool, and similar services.",
        "Total daily miles traveled by buses of various sizes to provide bus service of various types.",
        "Total daily miles traveled by light rail, heavy rail, commuter rail, and similar types of vehicles."
        )
    )
  )
)

#Save the data specifications list
#---------------------------------
#' Specifications list for AssignTransitService module
#'
#' A list containing specifications for the AssignTransitService module.
#'
#' @format A list containing 4 components:
#' \describe{
#'  \item{RunBy}{the level of geography that the module is run at}
#'  \item{Inp}{scenario input data to be loaded into the datastore for this
#'  module}
#'  \item{Get}{module inputs to be read from the datastore}
#'  \item{Set}{module outputs to be written to the datastore}
#' }
#' @source AssignTransitService.R script.
"AssignTransitServiceSpecifications"
usethis::use_data(AssignTransitServiceSpecifications, overwrite = TRUE)


#=======================================================
#SECTION 3: DEFINE FUNCTIONS THAT IMPLEMENT THE SUBMODEL
#=======================================================
#This function calculates the annual bus equivalent revenue miles per capita for
#the urbanized area from the number of annual revenue miles for different
#public transit modes and the urban area population.

#Main module function that calculates bus equivalent revenue miles per capita
#----------------------------------------------------------------------------
#' Calculate bus equivalent revenue miles per capita by Marea.
#'
#' \code{AssignTransitService} calculate bus equivalent revenue miles per capita.
#'
#' This function calculates bus equivalent revenue miles per capita for each
#' Marea.
#'
#' @param L A list containing the components listed in the Get specifications
#' for the module.
#' @return A list containing the components specified in the Set
#' specifications for the module.
#' @name AssignTransitService
#' @import visioneval
#' @export
AssignTransitService <- function(L) {
  #Set up
  #------
  #Fix seed as synthesis involves sampling
  set.seed(L$G$Seed)
  #Define vector of modes
  Md <- as.character(BusEquivalents_df$Mode)
  #Define vector of Mareas
  Ma <- L$Year$Marea$Marea

  #Calculate bus equivalent revenue miles
  #--------------------------------------
  #Make table of revenue miles by Marea
  RevMi_df <- data.frame(L$Year$Marea[paste0(Md, "RevMi")])
  colnames(RevMi_df) <- Md
  rownames(RevMi_df) <- Ma
  RevMi_MaMd <- as.matrix(RevMi_df)
  #Calculate the bus equivalent revenue miles
  BusEq_Md <- BusEquivalents_df$BusEquivalents
  names(BusEq_Md) <- Md
  BusEqRevMi_Ma <-
    rowSums(sweep(RevMi_MaMd, 2, BusEq_Md, "*"))[Ma]

  #Calculate the bus equivalent revenue miles per capita
  #-----------------------------------------------------
  #Calculate population in the urbanized area
  UrbanPop_Ma <-
    tapply(L$Year$Bzone$UrbanPop, L$Year$Bzone$Marea, sum)[Ma]
  #Calculate Marea bus equivalent revenue miles per capita
  TranRevMiPC_Ma <- BusEqRevMi_Ma / UrbanPop_Ma

  #Calculate vehicle miles by vehicle type
  #---------------------------------------
  #Make vector of vehicle miles factors conforming with RevMi_df
  VehMiFactors_Md <- VehMiFactors_df$VehMiFactors
  names(VehMiFactors_Md) <- VehMiFactors_df$Mode
  VehMiFactors_Md <- VehMiFactors_Md[names(RevMi_df)]
  #Calculate daily vehicle miles by Marea and mode
  VehMi_MaMd <- as.matrix(sweep(RevMi_df, 2, VehMiFactors_Md, "*")) / 365
  #Define correspondence between modes and vehicle types
  ModeToVehType_ <- c(
    DR = "Van",
    VP = "Van",
    MB = "Bus",
    RB = "Bus",
    MG = "Rail",
    SR = "Rail",
    HR = "Rail",
    CR = "Rail"
  )
  ModeToVehType_ <- ModeToVehType_[colnames(VehMi_MaMd)]
  VehMi_df <-
    data.frame(
      t(
        apply(VehMi_MaMd, 1, function(x) {
          tapply(x, ModeToVehType_, sum) })
        )
      )

  #Return the results
  #------------------
  #Initialize output list
  Out_ls <- initDataList()
  Out_ls$Year$Marea <-
    list(TranRevMiPC = TranRevMiPC_Ma,
         VanDvmt = VehMi_df$Van,
         BusDvmt = VehMi_df$Bus,
         RailDvmt = VehMi_df$Rail)
  #Return the outputs list
  Out_ls
}


#===============================================================
#SECTION 4: MODULE DOCUMENTATION AND AUXILLIARY DEVELOPMENT CODE
#===============================================================
#Run module automatic documentation
#----------------------------------
documentModule("AssignTransitService")

#Test code to check specifications, loading inputs, and whether datastore
#contains data needed to run module. Return input list (L) to use for developing
#module functions
#-------------------------------------------------------------------------------
# library(filesstrings)
# library(visioneval)
# source("tests/scripts/test_functions.R")
# #Set up test environment
# TestSetup_ls <- list(
#   TestDataRepo = "../Test_Data/VE-RSPM",
#   DatastoreName = "Datastore.tar",
#   LoadDatastore = TRUE,
#   TestDocsDir = "verspm",
#   ClearLogs = TRUE,
#   # SaveDatastore = TRUE
#   SaveDatastore = FALSE
# )
# setUpTests(TestSetup_ls)
# #Run test module
# TestDat_ <- testModule(
#   ModuleName = "AssignTransitService",
#   LoadDatastore = TRUE,
#   SaveDatastore = TRUE,
#   DoRun = FALSE
# )
# L <- TestDat_$L
# R <- AssignTransitService(L)
\end{verbatim}

\hypertarget{appendix-f-example-test-script-from-the-vesimhouseholds-package}{%
\subsection{Appendix F: Example Test Script from the VESimHouseholds Package}\label{appendix-f-example-test-script-from-the-vesimhouseholds-package}}

\begin{verbatim}
#vestate_test.R
#--------------

#Load packages and test functions
library(visioneval)
library(filesstrings)
source("tests/scripts/test_functions.R")

#Define test setup parameters
TestSetup_ls <- list(
  TestDataRepo = "../Test_Data/VE-State",
  DatastoreName = "Datastore.tar",
  LoadDatastore = FALSE,
  TestDocsDir = "vestate",
  ClearLogs = TRUE,
  # SaveDatastore = TRUE
  SaveDatastore = FALSE
)

#Define the module tests
Tests_ls <- list(
  list(ModuleName = "CreateHouseholds", LoadDatastore = FALSE, SaveDatastore = TRUE, DoRun = TRUE),
  list(ModuleName = "PredictWorkers", LoadDatastore = TRUE, SaveDatastore = TRUE, DoRun = TRUE),
  list(ModuleName = "AssignLifeCycle", LoadDatastore = TRUE, SaveDatastore = TRUE, DoRun = TRUE),
  list(ModuleName = "PredictIncome", LoadDatastore = TRUE, SaveDatastore = TRUE, DoRun = TRUE)
)

#Set up, run tests, and save test results
setUpTests(TestSetup_ls)
doTests(Tests_ls, TestSetup_ls)
saveTestResults(TestSetup_ls)
\end{verbatim}

\hypertarget{appendix-g-visioneval-model-user-functions}{%
\subsection{Appendix G: VisionEval Model User Functions}\label{appendix-g-visioneval-model-user-functions}}

\hypertarget{getyears-retrieve-years}{%
\subsection{\texorpdfstring{\texttt{getYears}: Retrieve years}{getYears: Retrieve years}}\label{getyears-retrieve-years}}

\hypertarget{description}{%
\subsubsection{Description}\label{description}}

\texttt{getYears} a visioneval framework model user function that reads the
Years component from the the model state file.

\hypertarget{usage}{%
\subsubsection{Usage}\label{usage}}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{getYears}\NormalTok{()}
\end{Highlighting}
\end{Shaded}

\hypertarget{details}{%
\subsubsection{Details}\label{details}}

This is a convenience function to make it easier to retrieve the Years
component of the model state file which lists all of the specified model run
years. If the Years component includes the base year, then the returned
vector of years places the base year first in the order. This ordering is
important because some modules calculate future year values by pivoting off
of base year values so the base year must be run first.

\hypertarget{value}{%
\subsubsection{Value}\label{value}}

A character vector of the model run years.

\hypertarget{calls}{%
\subsubsection{Calls}\label{calls}}

getModelState

\hypertarget{initializemodel-initialize-model.}{%
\subsection{\texorpdfstring{\texttt{initializeModel}: Initialize model.}{initializeModel: Initialize model.}}\label{initializemodel-initialize-model.}}

\hypertarget{description-1}{%
\subsubsection{Description}\label{description-1}}

\texttt{initializeModel} a visioneval framework model user function
that initializes a VisionEval model, loading all parameters and inputs, and
making checks to ensure that model can run successfully.

\hypertarget{usage-1}{%
\subsubsection{Usage}\label{usage-1}}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{initializeModel}\NormalTok{(}\AttributeTok{ParamDir =} \StringTok{"defs"}\NormalTok{,}
  \AttributeTok{RunParamFile =} \StringTok{"run\_parameters.json"}\NormalTok{, }\AttributeTok{GeoFile =} \StringTok{"geo.csv"}\NormalTok{,}
  \AttributeTok{ModelParamFile =} \StringTok{"model\_parameters.json"}\NormalTok{, }\AttributeTok{LoadDatastore =} \ConstantTok{FALSE}\NormalTok{,}
  \AttributeTok{DatastoreName =} \ConstantTok{NULL}\NormalTok{, }\AttributeTok{SaveDatastore =} \ConstantTok{TRUE}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\hypertarget{arguments}{%
\subsubsection{Arguments}\label{arguments}}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 2\tabcolsep) * \real{0.4483}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 2\tabcolsep) * \real{0.5517}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Argument
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule()
\endhead
\texttt{ParamDir} & A string identifying the relative or absolute path to the directory where the parameter and geography definition files are located. The default value is ``defs''. \\
\texttt{RunParamFile} & A string identifying the name of a JSON-formatted text file that contains parameters needed to identify and manage the model run. The default value is ``run\_parameters.json''. \\
\texttt{GeoFile} & A string identifying the name of a text file in comma-separated values format that contains the geographic specifications for the model. The default value is ``geo.csv''. \\
\texttt{ModelParamFile} & A string identifying the name of a JSON-formatted text file that contains global model parameters that are important to a model and may be shared by several modules. \\
\texttt{LoadDatastore} & A logical identifying whether an existing datastore should be loaded. \\
\texttt{DatastoreName} & A string identifying the full path name of a datastore to load or NULL if an existing datastore in the working directory is to be loaded. \\
\texttt{SaveDatastore} & A string identifying whether if an existing datastore in the working directory should be saved rather than removed. \\
\bottomrule()
\end{longtable}

\hypertarget{details-1}{%
\subsubsection{Details}\label{details-1}}

This function does several things to initialize the model environment and
datastore including:
1) Initializing a file that is used to keep track of the state of key model
run variables and the datastore;
2) Initializes a log to which messages are written;
3) Creates the datastore and initializes its structure, reads in and checks
the geographic specifications and initializes the geography in the datastore,
or loads an existing datastore if one has been identified;
4) Parses the model run script to identify the modules in their order of
execution and checks whether all the identified packages are installed and
the modules exist in the packages;
5) Checks that all data requested from the datastore will be available when
it is requested and that the request specifications match the datastore
specifications;
6) Checks all of the model input files to determine whether they they are
complete and comply with specifications.

\hypertarget{value-1}{%
\subsubsection{Value}\label{value-1}}

None. The function prints to the log file messages which identify
whether or not there are errors in initialization. It also prints a success
message if initialization has been successful.

\hypertarget{calls-1}{%
\subsubsection{Calls}\label{calls-1}}

assignDatastoreFunctions, checkDataset, checkModuleExists, checkModuleSpecs, getModelState, getModuleSpecs, initDatastoreGeography, initLog, initModelStateFile, inputsToDatastore, loadDatastore, loadModelParameters, parseModelScript, processModuleInputs, processModuleSpecs, readGeography, readModelState, setModelState, simDataTransactions, writeLog

\hypertarget{readdatastoretables-read-multiple-datasets-from-multiple-tables-in-datastores}{%
\subsection{\texorpdfstring{\texttt{readDatastoreTables}: Read multiple datasets from multiple tables in datastores}{readDatastoreTables: Read multiple datasets from multiple tables in datastores}}\label{readdatastoretables-read-multiple-datasets-from-multiple-tables-in-datastores}}

\hypertarget{description-2}{%
\subsubsection{Description}\label{description-2}}

\texttt{readDatastoreTables} a visioneval framework model user function that
reads datasets from one or more tables in a specified group in one or more
datastores

\hypertarget{usage-2}{%
\subsubsection{Usage}\label{usage-2}}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{readDatastoreTables}\NormalTok{(Tables\_ls, Group, DstoreLocs\_, DstoreType)}
\end{Highlighting}
\end{Shaded}

\hypertarget{arguments-1}{%
\subsubsection{Arguments}\label{arguments-1}}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 2\tabcolsep) * \real{0.4483}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 2\tabcolsep) * \real{0.5517}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Argument
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule()
\endhead
\texttt{Tables\_ls} & a named list where the name of each component is the name of a table in a datastore group and the value is a string vector of the names of the datasets to be retrieved. \\
\texttt{Group} & a string that is the name of the group to retrieve the table datasets from. \\
\texttt{DstoreLocs\_} & a string vector identifying the paths to all of the datastores to extract the datasets from. Each entry must be the full relative path to a datastore (e.g.~`tests/Datastore'). \\
\texttt{DstoreType} & a string identifying the type of datastore (e.g.~`RD', `H5'). Note \\
\bottomrule()
\end{longtable}

\hypertarget{details-2}{%
\subsubsection{Details}\label{details-2}}

This function can read multiple datasets in one or more tables in a group.
More than one datastore my be specified so that if datastore references are
used in a model run, datasets from the referenced datastores may be queried
as well. Note that the capability for querying multiple datastores is only
for the purpose of querying datastores for a single model scenario. This
capability should not be used to compare multiple scenarios. The function
does not segregate datasets by datastore. Attempting to use this function to
compare multiple scenarios could produce unpredictable results.

\hypertarget{value-2}{%
\subsubsection{Value}\label{value-2}}

A named list having two components. The `Data' component is a list
containing the datasets from the datastores where the name of each component
of the list is the name of a table from which identified datasets are
retrieved and the value is a data frame containing the identified datasets.
The `Missing' component is a list which identifies the datasets that are
missing in each table.

\hypertarget{calls-2}{%
\subsubsection{Calls}\label{calls-2}}

checkDataset, checkTableExistence, readModelState

\hypertarget{runmodule-run-module.}{%
\subsection{\texorpdfstring{\texttt{runModule}: Run module.}{runModule: Run module.}}\label{runmodule-run-module.}}

\hypertarget{description-3}{%
\subsubsection{Description}\label{description-3}}

\texttt{runModule} a visioneval framework model user function that
runs a module.

\hypertarget{usage-3}{%
\subsubsection{Usage}\label{usage-3}}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{runModule}\NormalTok{(ModuleName, PackageName, RunFor, RunYear, }\AttributeTok{StopOnErr =} \ConstantTok{TRUE}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\hypertarget{arguments-2}{%
\subsubsection{Arguments}\label{arguments-2}}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 2\tabcolsep) * \real{0.4483}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 2\tabcolsep) * \real{0.5517}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Argument
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule()
\endhead
\texttt{ModuleName} & A string identifying the name of a module object. \\
\texttt{PackageName} & A string identifying the name of the package the module is a part of. \\
\texttt{RunFor} & A string identifying whether to run the module for all years ``AllYears'', only the base year ``BaseYear'', or for all years except the base year ``NotBaseYear''. \\
\texttt{RunYear} & A string identifying the run year. \\
\texttt{StopOnErr} & A logical identifying whether model execution should be stopped if the module transmits one or more error messages or whether execution should continue with the next module. The default value is TRUE. This is how error handling will ordinarily proceed during a model run. A value of FALSE is used when `Initialize' modules in packages are run during model initialization. These `Initialize' modules are used to check and preprocess inputs. For this purpose, the module will identify any errors in the input data, the `initializeModel' function will collate all the data errors and print them to the log. \\
\bottomrule()
\end{longtable}

\hypertarget{details-3}{%
\subsubsection{Details}\label{details-3}}

This function runs a module for a specified year.

\hypertarget{value-3}{%
\subsubsection{Value}\label{value-3}}

None. The function writes results to the specified locations in the
datastore and prints a message to the console when the module is being run.

\hypertarget{calls-3}{%
\subsubsection{Calls}\label{calls-3}}

createGeoIndexList, getFromDatastore, getModelState, processModuleSpecs, setInDatastore, writeLog

\hypertarget{appendix-h-visioneval-module-developer-functions}{%
\subsection{Appendix H: VisionEval Module Developer Functions}\label{appendix-h-visioneval-module-developer-functions}}

\hypertarget{adderrormsg-add-an-error-message-to-the-results-list}{%
\subsection{\texorpdfstring{\texttt{addErrorMsg}: Add an error message to the results list}{addErrorMsg: Add an error message to the results list}}\label{adderrormsg-add-an-error-message-to-the-results-list}}

\hypertarget{description-4}{%
\subsubsection{Description}\label{description-4}}

\texttt{addErrorMsg} a visioneval framework module developer function that adds
an error message to the Errors component of the module results list that is
passed back to the framework.

\hypertarget{usage-4}{%
\subsubsection{Usage}\label{usage-4}}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{addErrorMsg}\NormalTok{(ResultsListName, ErrMsg)}
\end{Highlighting}
\end{Shaded}

\hypertarget{arguments-3}{%
\subsubsection{Arguments}\label{arguments-3}}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 2\tabcolsep) * \real{0.4483}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 2\tabcolsep) * \real{0.5517}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Argument
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule()
\endhead
\texttt{ResultsListName} & the name of the results list given as a character string \\
\texttt{ErrMsg} & a character string that contains the error message \\
\bottomrule()
\end{longtable}

\hypertarget{details-4}{%
\subsubsection{Details}\label{details-4}}

This function is a convenience function for module developers for passing
error messages back to the framework. The preferred method for handling
errors in module execution is for the module to handle the error by passing
one or more error messages back to the framework. The framework will then
write error messages to the log and stop execution. Error messages are
stored in a component of the returned list called Errors. This component is
a string vector where each element is an error message. The addErrorMsg will
create the Error component if it does not already exist and will add an error
message to the vector.

\hypertarget{value-4}{%
\subsubsection{Value}\label{value-4}}

None. The function modifies the results list by adding an error
message to the Errors component of the results list. It creates the Errors
component if it does not already exist.

\hypertarget{calls-4}{%
\subsubsection{Calls}\label{calls-4}}

\hypertarget{addwarningmsg-add-a-warning-message-to-the-results-list}{%
\subsection{\texorpdfstring{\texttt{addWarningMsg}: Add a warning message to the results list}{addWarningMsg: Add a warning message to the results list}}\label{addwarningmsg-add-a-warning-message-to-the-results-list}}

\hypertarget{description-5}{%
\subsubsection{Description}\label{description-5}}

\texttt{addWarningMsg} a visioneval framework module developer function that
adds an warning message to the Warnings component of the module results list
that is passed back to the framework.

\hypertarget{usage-5}{%
\subsubsection{Usage}\label{usage-5}}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{addWarningMsg}\NormalTok{(ResultsListName, WarnMsg)}
\end{Highlighting}
\end{Shaded}

\hypertarget{arguments-4}{%
\subsubsection{Arguments}\label{arguments-4}}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 2\tabcolsep) * \real{0.4483}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 2\tabcolsep) * \real{0.5517}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Argument
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule()
\endhead
\texttt{ResultsListName} & the name of the results list given as a character string \\
\texttt{WarnMsg} & a character string that contains the warning message \\
\bottomrule()
\end{longtable}

\hypertarget{details-5}{%
\subsubsection{Details}\label{details-5}}

This function is a convenience function for module developers for passing
warning messages back to the framework. The preferred method for handling
warnings in module execution is for the module to handle the warning by
passing one or more warning messages back to the framework. The framework
will then write warning messages to the log and stop execution. Warning
messages are stored in a component of the returned list called Warnings. This
component is a string vector where each element is an warning message. The
addWarningMsg will create the Warning component if it does not already exist
and will add a warning message to the vector.

\hypertarget{value-5}{%
\subsubsection{Value}\label{value-5}}

None. The function modifies the results list by adding a warning
message to the Warnings component of the results list. It creates the
Warnings component if it does not already exist.

\hypertarget{calls-5}{%
\subsubsection{Calls}\label{calls-5}}

\hypertarget{applybinomialmodel-applies-an-estimated-binomial-model-to-a-set-of-input-values.}{%
\subsection{\texorpdfstring{\texttt{applyBinomialModel}: Applies an estimated binomial model to a set of input values.}{applyBinomialModel: Applies an estimated binomial model to a set of input values.}}\label{applybinomialmodel-applies-an-estimated-binomial-model-to-a-set-of-input-values.}}

\hypertarget{description-6}{%
\subsubsection{Description}\label{description-6}}

\texttt{applyBinomialModel} a visioneval framework module developer function
that applies an estimated binomial model to a set of input data.

\hypertarget{usage-6}{%
\subsubsection{Usage}\label{usage-6}}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{applyBinomialModel}\NormalTok{(Model\_ls, Data\_df, }\AttributeTok{TargetProp =} \ConstantTok{NULL}\NormalTok{,}
  \AttributeTok{CheckTargetSearchRange =} \ConstantTok{FALSE}\NormalTok{, }\AttributeTok{ApplyRandom =} \ConstantTok{TRUE}\NormalTok{,}
  \AttributeTok{ReturnProbs =} \ConstantTok{FALSE}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\hypertarget{arguments-5}{%
\subsubsection{Arguments}\label{arguments-5}}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 2\tabcolsep) * \real{0.4483}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 2\tabcolsep) * \real{0.5517}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Argument
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule()
\endhead
\texttt{Model\_ls} & a list which contains the following components: `Type' which has a value of `binomial'; `Formula' a string representation of the model equation; `Choices' a two-element vector listing the choice set. The first element is the choice that the binary logit model equation predicts the odds of; `PrepFun' a function which prepares the input data frame for the model application. If no preparation, this element of the list should not be present or should be set equal to NULL; `SearchRange' a two-element numeric vector which specifies the acceptable search range to use when determining the factor for adjusting the model constant. `RepeatVar' a string which identifies the name of a field to use for repeated draws of the model. This is used in the case where for example the input data is households and the output is vehicles and the repeat variable is the number of vehicles in the household. `ApplyRandom' a logical identifying whether the results will be affected by random draws (i.e.~if a random number in range 0 - 1 is less than the computed probability) or if a probability cutoff is used (i.e.~if the computed probability is greater then 0.5). This is an optional component. If it isn't present, the function runs with ApplyRandom = TRUE. \\
\texttt{Data\_df} & a data frame containing the data required for applying the model. \\
\texttt{TargetProp} & a number identifying a target proportion for the default choice to be achieved for the input data or NULL if there is no target proportion to be achieved. \\
\texttt{CheckTargetSearchRange} & a logical identifying whether the function is to only check whether the specified `SearchRange' for the model will produce acceptable values (i.e.~no NA or NaN values). If FALSE (the default), the function will run the model and will not check the target search range. \\
\texttt{ApplyRandom} & a logical identifying whether the outcome will be be affected by random draws (i.e.~if a random number in range 0 - 1 is less than the computed probability) or if a probability cutoff is used (i.e.~if the computed probability is greater than 0.5) \\
\texttt{ReturnProbs} & a logical identifying whether to return the calculated probabilities rather than the assigned results. The default value is FALSE. \\
\bottomrule()
\end{longtable}

\hypertarget{details-6}{%
\subsubsection{Details}\label{details-6}}

The function calculates the result of applying a binomial logit model to a
set of input data. If a target proportion (TargetProp) is specified, the
function calls the `binarySearch' function to calculate an adjustment to
the constant of the model equation so that the population proportion matches
the target proportion. The function will also test whether the target search
range specified for the model will produce acceptable values.

\hypertarget{value-6}{%
\subsubsection{Value}\label{value-6}}

a vector of choice values for each record of the input data frame if
the model is being run, or if the function is run to only check the target
search range, a two-element vector identifying if the search range produces
NA or NaN values.

\hypertarget{calls-6}{%
\subsubsection{Calls}\label{calls-6}}

binarySearch

\hypertarget{applylinearmodel-applies-an-estimated-linear-model-to-a-set-of-input-values.}{%
\subsection{\texorpdfstring{\texttt{applyLinearModel}: Applies an estimated linear model to a set of input values.}{applyLinearModel: Applies an estimated linear model to a set of input values.}}\label{applylinearmodel-applies-an-estimated-linear-model-to-a-set-of-input-values.}}

\hypertarget{description-7}{%
\subsubsection{Description}\label{description-7}}

\texttt{applyLinearModel} a visioneval framework module developer function that
applies an estimated linear model to a set of input data.

\hypertarget{usage-7}{%
\subsubsection{Usage}\label{usage-7}}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{applyLinearModel}\NormalTok{(Model\_ls, Data\_df, }\AttributeTok{TargetMean =} \ConstantTok{NULL}\NormalTok{,}
  \AttributeTok{CheckTargetSearchRange =} \ConstantTok{FALSE}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\hypertarget{arguments-6}{%
\subsubsection{Arguments}\label{arguments-6}}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 2\tabcolsep) * \real{0.4483}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 2\tabcolsep) * \real{0.5517}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Argument
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule()
\endhead
\texttt{Model\_ls} & a list which contains the following components: `Type' which has a value of `linear'; `Formula' a string representation of the model equation; `PrepFun' a function which prepares the input data frame for the model application. If no preparation, this element of the list should not be present or should be set equal to NULL; `SearchRange' a two-element numeric vector which specifies the acceptable search range to use when determining the dispersion factor. `OutFun' a function that is applied to transform the results of applying the linear model. For example to untransform a power-transformed variable. If no transformation is necessary, this element of the list should not be present or should be set equal to NULL. \\
\texttt{Data\_df} & a data frame containing the data required for applying the model. \\
\texttt{TargetMean} & a number identifying a target mean value to be achieved or NULL if there is no target. \\
\texttt{CheckTargetSearchRange} & a logical identifying whether the function is to only check whether the specified `SearchRange' for the model will produce acceptable values (i.e.~no NA or NaN values). If FALSE (the default), the function will run the model and will not check the target search range. \\
\bottomrule()
\end{longtable}

\hypertarget{details-7}{%
\subsubsection{Details}\label{details-7}}

The function calculates the result of applying a linear regression model to a
set of input data. If a target mean value (TargetMean) is specified, the
function calculates a standard deviation of a sampling distribution which
is applied to linear model results. For each value returned by the linear
model, a sample is drawn from a normal distribution where the mean value of
the distribution is the linear model result and the standard deviation of the
distibution is calculated by the binary search to match the population mean
value to the target mean value. This process is meant to be applied to linear
model where the dependent variable is power transformed. Applying the
sampling distribution to the linear model results increases the dispersion
of results to match the observed dispersion and also matches the mean values
of the untransformed results. This also enables the model to be applied to
situations where the mean value is different than the observed mean value.

\hypertarget{value-7}{%
\subsubsection{Value}\label{value-7}}

a vector of numeric values for each record of the input data frame if
the model is being run, or if the function is run to only check the target
search range, a summary of predicted values when the model is run with
dispersion set at the high value of the search range.

\hypertarget{calls-7}{%
\subsubsection{Calls}\label{calls-7}}

binarySearch

\hypertarget{binarysearch-binary-search-function-to-find-a-parameter-which-achieves-a-target-value.}{%
\subsection{\texorpdfstring{\texttt{binarySearch}: Binary search function to find a parameter which achieves a target value.}{binarySearch: Binary search function to find a parameter which achieves a target value.}}\label{binarysearch-binary-search-function-to-find-a-parameter-which-achieves-a-target-value.}}

\hypertarget{description-8}{%
\subsubsection{Description}\label{description-8}}

\texttt{binarySearch} a visioneval framework module developer function that
uses a binary search algorithm to find the value of a function parameter for
which the function achieves a target value.

\hypertarget{usage-8}{%
\subsubsection{Usage}\label{usage-8}}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{binarySearch}\NormalTok{(Function, SearchRange\_, ..., }\AttributeTok{Target =} \DecValTok{0}\NormalTok{, }\AttributeTok{DoWtAve =} \ConstantTok{TRUE}\NormalTok{,}
  \AttributeTok{MaxIter =} \DecValTok{100}\NormalTok{, }\AttributeTok{Tolerance =} \FloatTok{1e{-}04}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\hypertarget{arguments-7}{%
\subsubsection{Arguments}\label{arguments-7}}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 2\tabcolsep) * \real{0.4483}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 2\tabcolsep) * \real{0.5517}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Argument
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule()
\endhead
\texttt{Function} & a function which returns a value which is compared to the `Target' argument. The function must take as its first argument a value which from the `SearchRange\_'. It must return a value that may be compared to the `Target' value. \\
\texttt{SearchRange\_} & a two element numeric vector which has the lowest and highest values of the parameter range within which the search will be carried out. \\
\texttt{...} & one or more optional arguments for the `Function'. \\
\texttt{Target} & a numeric value that is compared with the return value of the `Function'. \\
\texttt{DoWtAve} & a logical indicating whether successive weighted averaging is to be done. This is useful for getting stable results for stochastic calculations. \\
\texttt{MaxIter} & an integer specifying the maximum number of iterations to all the search to attempt. \\
\texttt{Tolerance} & a numeric value specifying the proportional difference between the `Target' and the return value of the `Function' to determine when the search is complete. \\
\bottomrule()
\end{longtable}

\hypertarget{details-8}{%
\subsubsection{Details}\label{details-8}}

A binary search algorithm is used by several modules to calibrate the
intercept of a binary logit model to match a specified proportion or to
calibrate a dispersion parameter for a linear model to match a mean value.
This function implements a binary search algorithm in a consistent manner to
be used in all modules that need it. It is written to work with stochastic
models which by their nature don't produce the same outputs given the same
inputs and so will not converge reliably. To deal with the stochasticity,
this function uses a successive averaging approach to smooth out the effect
of stochastic variation on reliable convergence. Rather than use the results
of a single search iteration to determine the next value range to use in the
search, a weighted average of previous values is used with the more recent
values being weighted more heavily.

\hypertarget{value-8}{%
\subsubsection{Value}\label{value-8}}

the value in the `SearchRange\_' for the function parameter which
matches the target value.

\hypertarget{calls-8}{%
\subsubsection{Calls}\label{calls-8}}

\hypertarget{checkmoduleoutputs-check-module-outputs-for-consistency-with-specifications}{%
\subsection{\texorpdfstring{\texttt{checkModuleOutputs}: Check module outputs for consistency with specifications}{checkModuleOutputs: Check module outputs for consistency with specifications}}\label{checkmoduleoutputs-check-module-outputs-for-consistency-with-specifications}}

\hypertarget{description-9}{%
\subsubsection{Description}\label{description-9}}

\texttt{checkModuleOutputs} a visioneval framework module developer function
that checks output list produced by a module for consistency with the
module's specifications.

\hypertarget{usage-9}{%
\subsubsection{Usage}\label{usage-9}}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{checkModuleOutputs}\NormalTok{(Data\_ls, ModuleSpec\_ls, ModuleName)}
\end{Highlighting}
\end{Shaded}

\hypertarget{arguments-8}{%
\subsubsection{Arguments}\label{arguments-8}}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 2\tabcolsep) * \real{0.4483}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 2\tabcolsep) * \real{0.5517}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Argument
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule()
\endhead
\texttt{Data\_ls} & A list of all the datasets returned by a module in the standard list form required by the VisionEval model system. \\
\texttt{ModuleSpec\_ls} & A list of module specifications in the standard list form required by the VisionEval model system. \\
\texttt{ModuleName} & A string identifying the name of the module. \\
\bottomrule()
\end{longtable}

\hypertarget{details-9}{%
\subsubsection{Details}\label{details-9}}

This function is used to check whether the output list produced by a module
is consistent with the module's specifications. If there are any
specifications for creating tables, the function checks whether the output
list contains the table(s), if the LENGTH attribute of the table(s) are
present, and if the LENGTH attribute(s) are consistent with the length of the
datasets to be saved in the table(s). Each of the datasets in the output list
are checked against the specifications. These include checking that the
data type is consistent with the specified type and whether all values are
consistent with PROHIBIT and ISELEMENTOF conditions. For character types,
a check is made to ensure that a SIZE attribute exists and that the size
is sufficient to store all characters.

\hypertarget{value-9}{%
\subsubsection{Value}\label{value-9}}

A character vector containing a list of error messages or having a
length of 0 if there are no error messages.

\hypertarget{calls-9}{%
\subsubsection{Calls}\label{calls-9}}

checkDataConsistency, processModuleSpecs

\hypertarget{documentmodule-produces-markdown-documentation-for-a-module}{%
\subsection{\texorpdfstring{\texttt{documentModule}: Produces markdown documentation for a module}{documentModule: Produces markdown documentation for a module}}\label{documentmodule-produces-markdown-documentation-for-a-module}}

\hypertarget{description-10}{%
\subsubsection{Description}\label{description-10}}

\texttt{documentModule} a visioneval framework module developer function
that creates a vignettes directory if one does not exist and produces
module documentation in markdown format which is saved in the vignettes
directory.

\hypertarget{usage-10}{%
\subsubsection{Usage}\label{usage-10}}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{documentModule}\NormalTok{(ModuleName)}
\end{Highlighting}
\end{Shaded}

\hypertarget{arguments-9}{%
\subsubsection{Arguments}\label{arguments-9}}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 2\tabcolsep) * \real{0.4483}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 2\tabcolsep) * \real{0.5517}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Argument
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule()
\endhead
\texttt{ModuleName} & A string identifying the name of the module (e.g.~`CalculateHouseholdDvmt') \\
\bottomrule()
\end{longtable}

\hypertarget{details-10}{%
\subsubsection{Details}\label{details-10}}

This function produces documentation for a module in markdown format. A
`vignettes' directory is created if it does not exist and the markdown file
and any associated resources such as image files are saved in that directory.
The function is meant to be called within and at the end of the module
script. The documentation is created from a commented block within the
module script which is enclosed by the opening tag, , and the closing
tag, . (Note, these tags must be commented along with all the other
text in the block). This commented block may also include tags which identify
resources to include within the documentation. These tags identify the
type of resource and the name of the resource which is located in the `data'
directory. A colon (:) is used to separate the resource type and resource
name identifiers. For example:
\textless txt:DvmtModel\_ls\(EstimationStats\)NonMetroZeroDvmt\_GLM\$Summary\textgreater{}
is a tag which will insert text which is located in a component of the
DvmtModel\_ls list that is saved as an rdata file in the `data' directory
(i.e.~data/DvmtModel\_ls.rda). The following 3 resource types are recognized:
* txt - a vector of strings which are inserted as lines of text in a code block
* fig - a png file which is inserted as an image
* tab - a matrix or data frame which is inserted as a table
The function also reads in the module specifications and creates
tables that document user input files, data the module gets from the
datastore, and the data the module produces that is saved in the datastore.
This function is intended to be called in the R script which defines the
module. It is placed near the end of the script (after the portions of the
script which estimate module parameters and define the module specifications)
so that it is run when the package is built. It may not properly in other
contexts.

\hypertarget{value-10}{%
\subsubsection{Value}\label{value-10}}

None. The function has the side effects of creating a `vignettes'
directory if one does not exist, copying identified `fig' resources to the
`vignettes' directory, and saving the markdown documentation file to the
`vignettes' directory. The markdown file is named with the module name and
has a `md' suffix.

\hypertarget{calls-10}{%
\subsubsection{Calls}\label{calls-10}}

expandSpec, processModuleSpecs

\hypertarget{getregisteredgetspecs-returns-get-specifications-for-registered-datasets.}{%
\subsection{\texorpdfstring{\texttt{getRegisteredGetSpecs}: Returns Get specifications for registered datasets.}{getRegisteredGetSpecs: Returns Get specifications for registered datasets.}}\label{getregisteredgetspecs-returns-get-specifications-for-registered-datasets.}}

\hypertarget{description-11}{%
\subsubsection{Description}\label{description-11}}

\texttt{getRegisteredGetSpecs} a visioneval framework module developer function
that returns a data frame of Get specifications for datasets in the
VisionEval name registry.

\hypertarget{usage-11}{%
\subsubsection{Usage}\label{usage-11}}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{getRegisteredGetSpecs}\NormalTok{(Names\_, Tables\_, Groups\_, }\AttributeTok{NameRegistryDir =} \ConstantTok{NULL}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\hypertarget{arguments-10}{%
\subsubsection{Arguments}\label{arguments-10}}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 2\tabcolsep) * \real{0.4483}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 2\tabcolsep) * \real{0.5517}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Argument
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule()
\endhead
\texttt{Names\_} & A character vector of the dataset names to get specifications for. \\
\texttt{Tables\_} & A character vector of the tables that the datasets are a part of. \\
\texttt{Groups\_} & A character vector of the groups that the tables are a part of. \\
\texttt{NameRegistryDir} & a string identifying the path to the directory where the name registry file is located. \\
\bottomrule()
\end{longtable}

\hypertarget{details-11}{%
\subsubsection{Details}\label{details-11}}

The VisionEval name registry (VENameRegistry.json) keeps track of the
dataset names created by all registered modules by reading in datasets
specified in the module Inp specifications or by returning calculated
datasets as specified in the module Set specifications. This function
reads in the name registry and returns Get specifications for identified
datasets.

\hypertarget{value-11}{%
\subsubsection{Value}\label{value-11}}

A data frame containing the Get specifications for the identified
datasets.

\hypertarget{calls-11}{%
\subsubsection{Calls}\label{calls-11}}

\hypertarget{initdatalist-initialize-a-list-for-data-transferred-to-and-from-datastore}{%
\subsection{\texorpdfstring{\texttt{initDataList}: Initialize a list for data transferred to and from datastore}{initDataList: Initialize a list for data transferred to and from datastore}}\label{initdatalist-initialize-a-list-for-data-transferred-to-and-from-datastore}}

\hypertarget{description-12}{%
\subsubsection{Description}\label{description-12}}

\texttt{initDataList} a visioneval framework module developer function that
creates a list to be used for transferring data to and from the datastore.

\hypertarget{usage-12}{%
\subsubsection{Usage}\label{usage-12}}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{initDataList}\NormalTok{()}
\end{Highlighting}
\end{Shaded}

\hypertarget{details-12}{%
\subsubsection{Details}\label{details-12}}

This function initializes a list to store data that is transferred from
the datastore to a module or returned from a module to be saved in the
datastore. The list has 3 named components (Global, Year, and BaseYear). This
is the standard structure for data being passed to and from a module and the
datastore.

\hypertarget{value-12}{%
\subsubsection{Value}\label{value-12}}

A list that has 3 named list components: Global, Year, BaseYear

\hypertarget{calls-12}{%
\subsubsection{Calls}\label{calls-12}}

\hypertarget{item-alias-for-list-function.}{%
\subsection{\texorpdfstring{\texttt{item}: Alias for list function.}{item: Alias for list function.}}\label{item-alias-for-list-function.}}

\hypertarget{description-13}{%
\subsubsection{Description}\label{description-13}}

\texttt{item} a visioneval framework module developer function that is an alias
for the list function whose purpose is to make module specifications easier
to read.

\hypertarget{usage-13}{%
\subsubsection{Usage}\label{usage-13}}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{item}\NormalTok{()}
\end{Highlighting}
\end{Shaded}

\hypertarget{details-13}{%
\subsubsection{Details}\label{details-13}}

This function defines an alternate name for list. It is used in module
specifications to identify data items in the Inp, Get, and Set portions of
the specifications.

\hypertarget{value-13}{%
\subsubsection{Value}\label{value-13}}

a list.

\hypertarget{calls-13}{%
\subsubsection{Calls}\label{calls-13}}

\hypertarget{items-alias-for-list-function.}{%
\subsection{\texorpdfstring{\texttt{items}: Alias for list function.}{items: Alias for list function.}}\label{items-alias-for-list-function.}}

\hypertarget{description-14}{%
\subsubsection{Description}\label{description-14}}

\texttt{items} a visioneval framework module developer function that is
an alias for the list function whose purpose is to make module specifications
easier to read.

\hypertarget{usage-14}{%
\subsubsection{Usage}\label{usage-14}}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{items}\NormalTok{()}
\end{Highlighting}
\end{Shaded}

\hypertarget{details-14}{%
\subsubsection{Details}\label{details-14}}

This function defines an alternate name for list. It is used in module
specifications to identify a group of data items in the Inp, Get, and Set
portions of the specifications.

\hypertarget{value-14}{%
\subsubsection{Value}\label{value-14}}

a list.

\hypertarget{calls-14}{%
\subsubsection{Calls}\label{calls-14}}

\hypertarget{loadpackagedataset-load-a-visioneval-package-dataset}{%
\subsection{\texorpdfstring{\texttt{loadPackageDataset}: Load a VisionEval package dataset}{loadPackageDataset: Load a VisionEval package dataset}}\label{loadpackagedataset-load-a-visioneval-package-dataset}}

\hypertarget{description-15}{%
\subsubsection{Description}\label{description-15}}

\texttt{loadPackageDataset} a visioneval framework module developer function
which loads a dataset identified by name from the VisionEval package
containing the dataset.

\hypertarget{usage-15}{%
\subsubsection{Usage}\label{usage-15}}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{loadPackageDataset}\NormalTok{(DatasetName)}
\end{Highlighting}
\end{Shaded}

\hypertarget{arguments-11}{%
\subsubsection{Arguments}\label{arguments-11}}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 2\tabcolsep) * \real{0.4483}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 2\tabcolsep) * \real{0.5517}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Argument
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule()
\endhead
\texttt{DatasetName} & A string identifying the name of the dataset. \\
\bottomrule()
\end{longtable}

\hypertarget{details-15}{%
\subsubsection{Details}\label{details-15}}

This function is used to load a dataset identified by name from the
VisionEval package which contains the dataset. Using this function is the
preferred alternative to hard-wiring the loading using package::dataset
notation because it enables users to switch between module versions contained
in different packages. For example, there may be different versions of the
VEPowertrainsAndFuels package which have different default assumptions about
light-duty vehicle powertrain mix and characteristics by model year. Using
this function, the module developer only needs to identify the dataset name.
The function uses DatasetsByPackage\_df data frame in the model state list
to identify the package which contains the dataset. It then retrieves and
returns the dataset

\hypertarget{value-15}{%
\subsubsection{Value}\label{value-15}}

The identified dataset.

\hypertarget{calls-15}{%
\subsubsection{Calls}\label{calls-15}}

getModelState

\hypertarget{makemodelformulastring-makes-a-string-representation-of-a-model-equation.}{%
\subsection{\texorpdfstring{\texttt{makeModelFormulaString}: Makes a string representation of a model equation.}{makeModelFormulaString: Makes a string representation of a model equation.}}\label{makemodelformulastring-makes-a-string-representation-of-a-model-equation.}}

\hypertarget{description-16}{%
\subsubsection{Description}\label{description-16}}

\texttt{makeModelFormulaString} a visioneval framework module developer
function that creates a string equivalent of a model equation.

\hypertarget{usage-16}{%
\subsubsection{Usage}\label{usage-16}}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{makeModelFormulaString}\NormalTok{(EstimatedModel)}
\end{Highlighting}
\end{Shaded}

\hypertarget{arguments-12}{%
\subsubsection{Arguments}\label{arguments-12}}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 2\tabcolsep) * \real{0.4483}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 2\tabcolsep) * \real{0.5517}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Argument
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule()
\endhead
\texttt{EstimatedModel} & the return value of the `lm' or `glm' functions. \\
\bottomrule()
\end{longtable}

\hypertarget{details-16}{%
\subsubsection{Details}\label{details-16}}

The return values of model estimation functions such as `lm' and `glm'
contain a large amount of information in addition to the parameter estimates
for the specified model. This is particularly the case when the estimation
dataset is large. Most of this information is not needed to apply the model
and including it can add substantially to the size of a package that includes
several estimated models. All that is really needed to implement an estimated
model is an equation of the model terms and estimated coefficients. This
function creates a string representation of the model equation.

\hypertarget{value-16}{%
\subsubsection{Value}\label{value-16}}

a string expression of the model equation.

\hypertarget{calls-16}{%
\subsubsection{Calls}\label{calls-16}}

\hypertarget{processestimationinputs-load-estimation-data}{%
\subsection{\texorpdfstring{\texttt{processEstimationInputs}: Load estimation data}{processEstimationInputs: Load estimation data}}\label{processestimationinputs-load-estimation-data}}

\hypertarget{description-17}{%
\subsubsection{Description}\label{description-17}}

\texttt{processEstimationInputs} a visioneval framework module developer
function that checks whether specified model estimation data meets
specifications and returns the data in a data frame.

\hypertarget{usage-17}{%
\subsubsection{Usage}\label{usage-17}}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{processEstimationInputs}\NormalTok{(Inp\_ls, FileName, ModuleName)}
\end{Highlighting}
\end{Shaded}

\hypertarget{arguments-13}{%
\subsubsection{Arguments}\label{arguments-13}}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 2\tabcolsep) * \real{0.4483}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 2\tabcolsep) * \real{0.5517}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Argument
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule()
\endhead
\texttt{Inp\_ls} & A list that describes the specifications for the estimation file. This list must meet the framework standards for specification description. \\
\texttt{FileName} & A string identifying the file name. This is the file name without any path information. The file must located in the ``inst/extdata'' directory of the package. \\
\texttt{ModuleName} & A string identifying the name of the module the estimation data is being used in. \\
\bottomrule()
\end{longtable}

\hypertarget{details-17}{%
\subsubsection{Details}\label{details-17}}

This function is used to check whether a specified CSV-formatted data file
used in model estimation is correctly formatted and contains acceptable
values for all the datasets contained within. The function checks whether the
specified file exists in the ``inst/extdata'' directory. If the file does not
exist, the function stops and transmits a standard error message that the
file does not exist. If the file does exist, the function reads the file into
the data frame and then checks whether it contains the specified columns and
that the data meets all specifications. If any of the specifications are not
met, the function stops and transmits an error message. If there are no
data errors the function returns a data frame containing the data in the
file.

\hypertarget{value-17}{%
\subsubsection{Value}\label{value-17}}

A data frame containing the estimation data according to
specifications with data types consistent with specifications and columns
not specified removed. Execution stops if any errors are found. Error
messages are printed to the console. Warnings are also printed to the console.

\hypertarget{calls-17}{%
\subsubsection{Calls}\label{calls-17}}

checkDataConsistency, expandSpec, Types

\hypertarget{readvenameregistry-reads-the-visioneval-name-registry.}{%
\subsection{\texorpdfstring{\texttt{readVENameRegistry}: Reads the VisionEval name registry.}{readVENameRegistry: Reads the VisionEval name registry.}}\label{readvenameregistry-reads-the-visioneval-name-registry.}}

\hypertarget{description-18}{%
\subsubsection{Description}\label{description-18}}

\texttt{readVENameRegistry} a visioneval framework module developer function
that reads the VisionEval name registry and returns a list of data frames
containing the Inp and Set specifications.

\hypertarget{usage-18}{%
\subsubsection{Usage}\label{usage-18}}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{readVENameRegistry}\NormalTok{(}\AttributeTok{NameRegistryDir =} \ConstantTok{NULL}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\hypertarget{arguments-14}{%
\subsubsection{Arguments}\label{arguments-14}}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 2\tabcolsep) * \real{0.4483}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 2\tabcolsep) * \real{0.5517}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Argument
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule()
\endhead
\texttt{NameRegistryDir} & a string identifying the path to the directory where the name registry file is located. \\
\bottomrule()
\end{longtable}

\hypertarget{details-18}{%
\subsubsection{Details}\label{details-18}}

The VisionEval name registry (VENameRegistry.json) keeps track of the
dataset names created by all registered modules by reading in datasets
specified in the module Inp specifications or by returning calculated
datasets as specified in the module Set specifications. This function reads
the VisionEval name registry and returns a list of data frames containing the
registered Inp and Set specifications.

\hypertarget{value-18}{%
\subsubsection{Value}\label{value-18}}

A list having two components: Inp and Set. Each component is a data
frame containing the respective Inp and Set specifications of registered
modules.

\hypertarget{calls-18}{%
\subsubsection{Calls}\label{calls-18}}

\hypertarget{testmodule-test-module}{%
\subsection{\texorpdfstring{\texttt{testModule}: Test module}{testModule: Test module}}\label{testmodule-test-module}}

\hypertarget{description-19}{%
\subsubsection{Description}\label{description-19}}

\texttt{testModule} a visioneval framework module developer function that sets
up a test environment and tests a module.

\hypertarget{usage-19}{%
\subsubsection{Usage}\label{usage-19}}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{testModule}\NormalTok{(ModuleName, }\AttributeTok{ParamDir =} \StringTok{"defs"}\NormalTok{,}
  \AttributeTok{RunParamFile =} \StringTok{"run\_parameters.json"}\NormalTok{, }\AttributeTok{GeoFile =} \StringTok{"geo.csv"}\NormalTok{,}
  \AttributeTok{ModelParamFile =} \StringTok{"model\_parameters.json"}\NormalTok{, }\AttributeTok{LoadDatastore =} \ConstantTok{FALSE}\NormalTok{,}
  \AttributeTok{SaveDatastore =} \ConstantTok{TRUE}\NormalTok{, }\AttributeTok{DoRun =} \ConstantTok{TRUE}\NormalTok{, }\AttributeTok{RunFor =} \StringTok{"AllYears"}\NormalTok{,}
  \AttributeTok{StopOnErr =} \ConstantTok{TRUE}\NormalTok{, }\AttributeTok{RequiredPackages =} \ConstantTok{NULL}\NormalTok{, }\AttributeTok{TestGeoName =} \ConstantTok{NULL}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\hypertarget{arguments-15}{%
\subsubsection{Arguments}\label{arguments-15}}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 2\tabcolsep) * \real{0.4483}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 2\tabcolsep) * \real{0.5517}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Argument
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule()
\endhead
\texttt{ModuleName} & A string identifying the module name. \\
\texttt{ParamDir} & A string identifying the location of the directory where the run parameters, model parameters, and geography definition files are located. The default value is defs. This directory should be located in the tests directory. \\
\texttt{RunParamFile} & A string identifying the name of the run parameters file. The default value is run\_parameters.json. \\
\texttt{GeoFile} & A string identifying the name of the file which contains geography definitions. \\
\texttt{ModelParamFile} & A string identifying the name of the file which contains model parameters. The default value is model\_parameters.json. \\
\texttt{LoadDatastore} & A logical value identifying whether to load an existing datastore. If TRUE, it loads the datastore whose name is identified in the run\_parameters.json file. If FALSE it initializes a new datastore. \\
\texttt{SaveDatastore} & A logical value identifying whether the module outputs will be written to the datastore. If TRUE the module outputs are written to the datastore. If FALSE the outputs are not written to the datastore. \\
\texttt{DoRun} & A logical value identifying whether the module should be run. If FALSE, the function will initialize a datastore, check specifications, and load inputs but will not run the module but will return the list of module specifications. That setting is useful for module development in order to create the all the data needed to assist with module programming. It is used in conjunction with the getFromDatastore function to create the dataset that will be provided by the framework. The default value for this parameter is TRUE. In that case, the module will be run and the results will checked for consistency with the Set specifications. \\
\texttt{RunFor} & A string identifying what years the module is to be tested for. The value must be the same as the value that is used when the module is run in a module. Allowed values are `AllYears', `BaseYear', and `NotBaseYear'. \\
\texttt{StopOnErr} & A logical identifying whether model execution should be stopped if the module transmits one or more error messages or whether execution should continue with the next module. The default value is TRUE. This is how error handling will ordinarily proceed during a model run. A value of FALSE is used when `Initialize' modules in packages are run during model initialization. These `Initialize' modules are used to check and preprocess inputs. For this purpose, the module will identify any errors in the input data, the `initializeModel' function will collate all the data errors and print them to the log. \\
\texttt{RequiredPackages} & A character vector identifying any packages that must be installed in order to test the module because the module either has a soft reference to a module in the package (i.e.~the Call spec only identifies the name of the module being called) or a soft reference to a dataset in the module (i.e.~only identifies the name of the dataset). The default value is NULL. \\
\texttt{TestGeoName} & A character vector identifying the name of the geographic area for which data is to be loaded. This argument has effect only if the DoRun argument is FALSE. It enables the module developer to choose the geographic area data is to be loaded for when developing a module that is run for geography other than the region. For example if a module is run at the Azone level, the user can specify the name of the Azone that data is to be loaded for. If the name is misspecified an error will be flagged. \\
\bottomrule()
\end{longtable}

\hypertarget{details-19}{%
\subsubsection{Details}\label{details-19}}

This function is used to set up a test environment and test a module to check
that it can run successfully in the VisionEval model system. The function
sets up the test environment by switching to the tests directory and
initializing a model state list, a log file, and a datastore. The user may
use an existing datastore rather than initialize a new datastore. The use
case for loading an existing datastore is where a package contains several
modules that run in sequence. The first module would initialize a datastore
and then subsequent modules use the datastore that is modified by testing the
previous module. When run this way, it is also necessary to set the
SaveDatastore argument equal to TRUE so that the module outputs will be
saved to the datastore. The function performs several tests including
checking whether the module specifications are written properly, whether
the the test inputs are correct and complete and can be loaded into the
datastore, whether the datastore contains all the module inputs identified in
the Get specifications, whether the module will run, and whether all of the
outputs meet the module's Set specifications. The latter check is carried out
in large part by the checkModuleOutputs function that is called.

\hypertarget{value-19}{%
\subsubsection{Value}\label{value-19}}

If DoRun is FALSE, the return value is a list containing the module
specifications. If DoRun is TRUE, there is no return value. The function
writes out messages to the console and to the log as the testing proceeds.
These messages include the time when each test starts and when it ends.
When a key test fails, requiring a fix before other tests can be run,
execution stops and an error message is written to the console. Detailed
error messages are also written to the log.

\hypertarget{calls-19}{%
\subsubsection{Calls}\label{calls-19}}

assignDatastoreFunctions, checkDataset, checkModuleOutputs, checkModuleSpecs, createGeoIndexList, getFromDatastore, getModelState, getYears, initDatastoreGeography, initLog, initModelStateFile, inputsToDatastore, loadDatastore, loadModelParameters, processModuleInputs, processModuleSpecs, readGeography, readModelState, setInDatastore, setModelState, writeLog

\hypertarget{appendix-i-visioneval-framework-control-functions}{%
\subsection{Appendix I: VisionEval Framework Control Functions}\label{appendix-i-visioneval-framework-control-functions}}

\hypertarget{assigndatastorefunctions-assign-datastore-interaction-functions}{%
\subsection{\texorpdfstring{\texttt{assignDatastoreFunctions}: Assign datastore interaction functions}{assignDatastoreFunctions: Assign datastore interaction functions}}\label{assigndatastorefunctions-assign-datastore-interaction-functions}}

\hypertarget{description-20}{%
\subsubsection{Description}\label{description-20}}

\texttt{assignDatastoreFunctions} a visioneval framework control function that
assigns the values of the functions for interacting with the datastore to the
functions for the declared datastore type.

\hypertarget{usage-20}{%
\subsubsection{Usage}\label{usage-20}}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{assignDatastoreFunctions}\NormalTok{(DstoreType)}
\end{Highlighting}
\end{Shaded}

\hypertarget{arguments-16}{%
\subsubsection{Arguments}\label{arguments-16}}

\begin{longtable}[]{@{}ll@{}}
\toprule()
Argument & Description \\
\midrule()
\endhead
\texttt{DstoreType} & A string identifying the datastore type. \\
\bottomrule()
\end{longtable}

\hypertarget{details-20}{%
\subsubsection{Details}\label{details-20}}

The visioneval framework can work with different types of datastores. For
example a datastore which stores datasets in an HDF5 file or a datastore
which stores datasets as RData files in a directory hierarchy. This function
reads the `DatastoreType' parameter from the model state file and then
assigns the common datastore interaction functions the values of the
functions for the declared datastore type.

\hypertarget{value-20}{%
\subsubsection{Value}\label{value-20}}

None. The function assigns datastore interactions functions to the
first position of the search path.

\hypertarget{calls-20}{%
\subsubsection{Calls}\label{calls-20}}

\hypertarget{checkdataconsistency-check-data-consistency-with-specification}{%
\subsection{\texorpdfstring{\texttt{checkDataConsistency}: Check data consistency with specification}{checkDataConsistency: Check data consistency with specification}}\label{checkdataconsistency-check-data-consistency-with-specification}}

\hypertarget{description-21}{%
\subsubsection{Description}\label{description-21}}

\texttt{checkDataConsistency} a visioneval framework control function that
checks whether data to be written to a dataset is consistent with the dataset
attributes.

\hypertarget{usage-21}{%
\subsubsection{Usage}\label{usage-21}}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{checkDataConsistency}\NormalTok{(DatasetName, Data\_, DstoreAttr\_)}
\end{Highlighting}
\end{Shaded}

\hypertarget{arguments-17}{%
\subsubsection{Arguments}\label{arguments-17}}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 2\tabcolsep) * \real{0.4483}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 2\tabcolsep) * \real{0.5517}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Argument
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule()
\endhead
\texttt{DatasetName} & A string identifying the dataset that is being checked. \\
\texttt{Data\_} & A vector of values that may be of type integer, double, character, or logical. \\
\texttt{DstoreAttr\_} & A named list where the components are the attributes of a dataset. \\
\bottomrule()
\end{longtable}

\hypertarget{details-21}{%
\subsubsection{Details}\label{details-21}}

This function compares characteristics of data to be written to a dataset to
the dataset attributes to determine whether they are consistent.

\hypertarget{value-21}{%
\subsubsection{Value}\label{value-21}}

A list containing two components, Errors and Warnings. If no
inconsistencies are found, both components will have zero-length character
vectors. If there are one or more inconsistencies, then these components
will hold vectors of error and warning messages. Mismatch between UNITS
will produce a warning message. All other inconsistencies will produce
error messages.

\hypertarget{calls-21}{%
\subsubsection{Calls}\label{calls-21}}

checkIsElementOf, checkMatchConditions, checkMatchType

\hypertarget{checkdataset-check-dataset-existence}{%
\subsection{\texorpdfstring{\texttt{checkDataset}: Check dataset existence}{checkDataset: Check dataset existence}}\label{checkdataset-check-dataset-existence}}

\hypertarget{description-22}{%
\subsubsection{Description}\label{description-22}}

\texttt{checkDataset} a visioneval framework control function that checks
whether a dataset exists in the datastore and returns a TRUE or FALSE value
with an attribute of the full path to where the dataset should be located in
the datastore.

\hypertarget{usage-22}{%
\subsubsection{Usage}\label{usage-22}}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{checkDataset}\NormalTok{(Name, Table, Group, DstoreListing\_df)}
\end{Highlighting}
\end{Shaded}

\hypertarget{arguments-18}{%
\subsubsection{Arguments}\label{arguments-18}}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 2\tabcolsep) * \real{0.4483}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 2\tabcolsep) * \real{0.5517}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Argument
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule()
\endhead
\texttt{Name} & a string identifying the dataset name. \\
\texttt{Table} & a string identifying the table the dataset is a part of. \\
\texttt{Group} & a string or numeric representation of the group the table is a part of. \\
\texttt{DstoreListing\_df} & a dataframe which lists the contents of the datastore as contained in the model state file. \\
\bottomrule()
\end{longtable}

\hypertarget{details-22}{%
\subsubsection{Details}\label{details-22}}

This function checks whether a dataset exists. The dataset is identified by
its name and the table and group names it is in. If the dataset is not in the
datastore, an error is thrown. If it is located in the datastore, the full
path name to the dataset is returned.

\hypertarget{value-22}{%
\subsubsection{Value}\label{value-22}}

A logical identifying whether the dataset is in the datastore. It has
an attribute that is a string of the full path to where the dataset should be
in the datastore.

\hypertarget{calls-22}{%
\subsubsection{Calls}\label{calls-22}}

\hypertarget{checkgeography-check-geographic-specifications.}{%
\subsection{\texorpdfstring{\texttt{checkGeography}: Check geographic specifications.}{checkGeography: Check geographic specifications.}}\label{checkgeography-check-geographic-specifications.}}

\hypertarget{description-23}{%
\subsubsection{Description}\label{description-23}}

\texttt{checkGeography} a visioneval framework control function that checks
geographic specifications file for model.

\hypertarget{usage-23}{%
\subsubsection{Usage}\label{usage-23}}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{checkGeography}\NormalTok{(Directory, Filename)}
\end{Highlighting}
\end{Shaded}

\hypertarget{arguments-19}{%
\subsubsection{Arguments}\label{arguments-19}}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 2\tabcolsep) * \real{0.4483}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 2\tabcolsep) * \real{0.5517}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Argument
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule()
\endhead
\texttt{Directory} & A string identifying the path to the geographic specifications file. \\
\texttt{Filename} & A string identifying the name of the geographic specifications file. \\
\bottomrule()
\end{longtable}

\hypertarget{details-23}{%
\subsubsection{Details}\label{details-23}}

This function reads the file containing geographic specifications for the
model and checks the file entries to determine whether they are internally
consistent. This function is called by the readGeography function.

\hypertarget{value-23}{%
\subsubsection{Value}\label{value-23}}

A list having two components. The first component, `Messages',
contains a string vector of error messages. It has a length of 0 if there are
no error messages. The second component, `Update', is a list of components to
update in the model state file. The components of this list include: Geo, a
data frame that contains the geographic specifications; BzoneSpecified, a
logical identifying whether Bzones are specified; and CzoneSpecified, a
logical identifying whether Czones are specified.

\hypertarget{calls-23}{%
\subsubsection{Calls}\label{calls-23}}

writeLog

\hypertarget{checkinputyeargeo-check-years-and-geography-of-input-file}{%
\subsection{\texorpdfstring{\texttt{checkInputYearGeo}: Check years and geography of input file}{checkInputYearGeo: Check years and geography of input file}}\label{checkinputyeargeo-check-years-and-geography-of-input-file}}

\hypertarget{description-24}{%
\subsubsection{Description}\label{description-24}}

\texttt{checkInputYearGeo} a visioneval framework control function that checks
the `Year' and `Geo' columns of an input file to determine whether they are
complete and have no duplications.

\hypertarget{usage-24}{%
\subsubsection{Usage}\label{usage-24}}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{checkInputYearGeo}\NormalTok{(Year\_, Geo\_, Group, Table)}
\end{Highlighting}
\end{Shaded}

\hypertarget{arguments-20}{%
\subsubsection{Arguments}\label{arguments-20}}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 2\tabcolsep) * \real{0.4483}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 2\tabcolsep) * \real{0.5517}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Argument
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule()
\endhead
\texttt{Year\_} & the vector extract of the `Year' column from the input data. \\
\texttt{Geo\_} & the vector extract of the `Geo' column from the input data. \\
\texttt{Group} & a string identifying the `GROUP' specification for the data sets contained in the input file. \\
\texttt{Table} & a string identifying the `TABLE' specification for the data sets contained in the input file. \\
\bottomrule()
\end{longtable}

\hypertarget{details-24}{%
\subsubsection{Details}\label{details-24}}

This function checks the `Year' and `Geo' columns of an input file to
determine whether there are records for all run years specified for the
model and for all geographic areas for the level of geography. It also checks
for redundant year and geography entries.

\hypertarget{value-24}{%
\subsubsection{Value}\label{value-24}}

A list containing the results of the check. The list has two
mandatory components and two optional components. `CompleteInput' is a
logical that identifies whether records are present for all years and
geographic areas. `DupInput' identifies where are any redundant year and
geography entries. If `CompleteInput' is FALSE, the list contains a
`MissingInputs' component that is a string identifying the missing year and
geography records. If `DupInput' is TRUE, the list contains a component that
is a string identifying the duplicated year and geography records.

\hypertarget{calls-24}{%
\subsubsection{Calls}\label{calls-24}}

getModelState

\hypertarget{checkiselementof-check-if-data-values-are-in-a-specified-set-of-values}{%
\subsection{\texorpdfstring{\texttt{checkIsElementOf}: Check if data values are in a specified set of values}{checkIsElementOf: Check if data values are in a specified set of values}}\label{checkiselementof-check-if-data-values-are-in-a-specified-set-of-values}}

\hypertarget{description-25}{%
\subsubsection{Description}\label{description-25}}

\texttt{checkIsElementOf} a visioneval framework control function that checks
whether a data vector contains any elements that are not in an allowed set of
values.

\hypertarget{usage-25}{%
\subsubsection{Usage}\label{usage-25}}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{checkIsElementOf}\NormalTok{(Data\_, SetElements\_, DataName)}
\end{Highlighting}
\end{Shaded}

\hypertarget{arguments-21}{%
\subsubsection{Arguments}\label{arguments-21}}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 2\tabcolsep) * \real{0.4483}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 2\tabcolsep) * \real{0.5517}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Argument
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule()
\endhead
\texttt{Data\_} & A vector of data of type integer, double, character, or logical. \\
\texttt{SetElements\_} & A vector of allowed values. \\
\texttt{DataName} & A string identifying the field name of the data being compared (used for composing message identifying non-compliant fields). \\
\bottomrule()
\end{longtable}

\hypertarget{details-25}{%
\subsubsection{Details}\label{details-25}}

This function is used to check whether categorical data values are consistent
with the defined set of allowed values.

\hypertarget{value-25}{%
\subsubsection{Value}\label{value-25}}

A character vector of messages which identify the data field and the
condition that is not met. A zero-length vector is returned if none of the
conditions are met.

\hypertarget{calls-25}{%
\subsubsection{Calls}\label{calls-25}}

\hypertarget{checkmatchconditions-check-values-with-conditions.}{%
\subsection{\texorpdfstring{\texttt{checkMatchConditions}: Check values with conditions.}{checkMatchConditions: Check values with conditions.}}\label{checkmatchconditions-check-values-with-conditions.}}

\hypertarget{description-26}{%
\subsubsection{Description}\label{description-26}}

\texttt{checkMatchConditions} a visioneval framework control function that
checks whether a data vector contains any elements that match a set of
conditions.

\hypertarget{usage-26}{%
\subsubsection{Usage}\label{usage-26}}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{checkMatchConditions}\NormalTok{(Data\_, Conditions\_, DataName, ConditionType)}
\end{Highlighting}
\end{Shaded}

\hypertarget{arguments-22}{%
\subsubsection{Arguments}\label{arguments-22}}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 2\tabcolsep) * \real{0.4483}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 2\tabcolsep) * \real{0.5517}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Argument
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule()
\endhead
\texttt{Data\_} & A vector of data of type integer, double, character, or logical. \\
\texttt{Conditions\_} & A character vector of valid R comparison expressions or an empty vector if there are no conditions. \\
\texttt{DataName} & A string identifying the field name of the data being compared (used for composing message identifying non-compliant fields). \\
\texttt{ConditionType} & A string having a value of either ``PROHIBIT'' or ``UNLIKELY'', the two data specifications which use conditions. \\
\bottomrule()
\end{longtable}

\hypertarget{details-26}{%
\subsubsection{Details}\label{details-26}}

This function checks whether any of the values in a data vector match one or
more conditions. The conditions are specified in a character vector where
each element is either ``NA'' (to match for the existence of NA values) or a
character representation of a valid R comparison expression for comparing
each element with a specified value (e.g.~``\textless{} 0'', ``\textgreater{} 1'', ``!= 10''). This
function is used both for checking for the presence of prohibited values and
for the presence of unlikely values.

\hypertarget{value-26}{%
\subsubsection{Value}\label{value-26}}

A character vector of messages which identify the data field and the
condition that is not met. A zero-length vector is returned if none of the
conditions are met.

\hypertarget{calls-26}{%
\subsubsection{Calls}\label{calls-26}}

\hypertarget{checkmatchtype-check-data-type}{%
\subsection{\texorpdfstring{\texttt{checkMatchType}: Check data type}{checkMatchType: Check data type}}\label{checkmatchtype-check-data-type}}

\hypertarget{description-27}{%
\subsubsection{Description}\label{description-27}}

\texttt{checkMatchType} a visioneval framework control function that checks
whether the data type of a data vector is consistent with specifications.

\hypertarget{usage-27}{%
\subsubsection{Usage}\label{usage-27}}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{checkMatchType}\NormalTok{(Data\_, Type, DataName)}
\end{Highlighting}
\end{Shaded}

\hypertarget{arguments-23}{%
\subsubsection{Arguments}\label{arguments-23}}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 2\tabcolsep) * \real{0.4483}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 2\tabcolsep) * \real{0.5517}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Argument
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule()
\endhead
\texttt{Data\_} & A data vector. \\
\texttt{Type} & A string identifying the specified data type. \\
\texttt{DataName} & A string identifying the field name of the data being compared (used for composing message identifying non-compliant fields). \\
\bottomrule()
\end{longtable}

\hypertarget{details-27}{%
\subsubsection{Details}\label{details-27}}

This function checks whether the data type of a data vector is consistent
with a specified data type. An error message is generated if data can't be
coerced into the specified data type without the possibility of error or loss
of information (e.g.~if a double is coerced to an integer). A warning message
is generated if the specified type is `character' but the input data type is
`integer', `double' or `logical' since these can be coerced correctly, but
that may not be what is intended (e.g.~zone names may be input as numbers).
Note that some modules may use NA inputs as a flag to identify case when
result does not need to match a target. In this case, R will read in the type
of data as logical. In this case, the function sets the data type to be the
same as the specification for the data type so the function not flag a
data type error.

\hypertarget{value-27}{%
\subsubsection{Value}\label{value-27}}

A list having 2 components, Errors and Warnings. If no error or
warning is identified, both components will contain a zero-length character
string. If either an error or warning is identified, the relevant component
will contain a character string that identifies the data field and the type
mismatch.

\hypertarget{calls-27}{%
\subsubsection{Calls}\label{calls-27}}

\hypertarget{checkmoduleexists-check-whether-a-module-required-to-run-a-model-is-present}{%
\subsection{\texorpdfstring{\texttt{checkModuleExists}: Check whether a module required to run a model is present}{checkModuleExists: Check whether a module required to run a model is present}}\label{checkmoduleexists-check-whether-a-module-required-to-run-a-model-is-present}}

\hypertarget{description-28}{%
\subsubsection{Description}\label{description-28}}

\texttt{checkModuleExists} a visioneval framework control function that checks
whether a module required to run a model is present.

\hypertarget{usage-28}{%
\subsubsection{Usage}\label{usage-28}}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{checkModuleExists}\NormalTok{(ModuleName, PackageName,}
  \AttributeTok{InstalledPkgs\_ =} \FunctionTok{rownames}\NormalTok{(}\FunctionTok{installed.packages}\NormalTok{()), }\AttributeTok{CalledBy =} \ConstantTok{NA}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\hypertarget{arguments-24}{%
\subsubsection{Arguments}\label{arguments-24}}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 2\tabcolsep) * \real{0.4483}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 2\tabcolsep) * \real{0.5517}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Argument
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule()
\endhead
\texttt{ModuleName} & A string identifying the module name. \\
\texttt{PackageName} & A string identifying the package name. \\
\texttt{InstalledPkgs\_} & A string vector identifying the names of packages that are installed. \\
\texttt{CalledBy} & A string vector having two named elements. The value of the `Module' element is the name of the calling module. The value of the `Package' element is the name of the package that the calling module is in. \\
\bottomrule()
\end{longtable}

\hypertarget{details-28}{%
\subsubsection{Details}\label{details-28}}

This function takes a specified module and package, checks whether the
package has been installed and whether the module is in the package. The
function returns an error message is the package is not installed or if
the module is not present in the package. If the module has been called by
another module the value of the `CalledBy' argument will be used to identify
the calling module as well so that the user understands where the call is
coming from.

\hypertarget{value-28}{%
\subsubsection{Value}\label{value-28}}

TRUE if all packages and modules are present and FALSE if not.

\hypertarget{calls-28}{%
\subsubsection{Calls}\label{calls-28}}

\hypertarget{checkmodulespecs-checks-all-module-specifications-for-completeness-and-for-incorrect-entries}{%
\subsection{\texorpdfstring{\texttt{checkModuleSpecs}: Checks all module specifications for completeness and for incorrect entries}{checkModuleSpecs: Checks all module specifications for completeness and for incorrect entries}}\label{checkmodulespecs-checks-all-module-specifications-for-completeness-and-for-incorrect-entries}}

\hypertarget{description-29}{%
\subsubsection{Description}\label{description-29}}

\texttt{checkModuleSpecs} a visioneval framework control function that checks
all module specifications for completeness and for proper values.

\hypertarget{usage-29}{%
\subsubsection{Usage}\label{usage-29}}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{checkModuleSpecs}\NormalTok{(Specs\_ls, ModuleName)}
\end{Highlighting}
\end{Shaded}

\hypertarget{arguments-25}{%
\subsubsection{Arguments}\label{arguments-25}}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 2\tabcolsep) * \real{0.4483}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 2\tabcolsep) * \real{0.5517}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Argument
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule()
\endhead
\texttt{Specs\_ls} & a module specifications list. \\
\texttt{ModuleName} & a string identifying the name of the module. This is used in the error messages to identify which module has errors. \\
\bottomrule()
\end{longtable}

\hypertarget{details-29}{%
\subsubsection{Details}\label{details-29}}

This function iterates through all the specifications for a module and
calls the checkSpec function to check each specification for completeness and
for proper values.

\hypertarget{value-29}{%
\subsubsection{Value}\label{value-29}}

A vector containing messages identifying any errors that are found.

\hypertarget{calls-29}{%
\subsubsection{Calls}\label{calls-29}}

checkSpec

\hypertarget{checkspec-checks-a-module-specifications-for-completeness-and-for-incorrect-entries}{%
\subsection{\texorpdfstring{\texttt{checkSpec}: Checks a module specifications for completeness and for incorrect entries}{checkSpec: Checks a module specifications for completeness and for incorrect entries}}\label{checkspec-checks-a-module-specifications-for-completeness-and-for-incorrect-entries}}

\hypertarget{description-30}{%
\subsubsection{Description}\label{description-30}}

\texttt{checkSpec} a visioneval framework control function that checks a single
module specification for completeness and for proper values.

\hypertarget{usage-30}{%
\subsubsection{Usage}\label{usage-30}}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{checkSpec}\NormalTok{(Spec\_ls, SpecGroup, SpecNum)}
\end{Highlighting}
\end{Shaded}

\hypertarget{arguments-26}{%
\subsubsection{Arguments}\label{arguments-26}}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 2\tabcolsep) * \real{0.4483}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 2\tabcolsep) * \real{0.5517}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Argument
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule()
\endhead
\texttt{Spec\_ls} & a list containing the specifications for a single item in a module specifications list. \\
\texttt{SpecGroup} & a string identifying the specifications group the specification is in (e.g.~RunBy, NewInpTable, NewSetTable, Inp, Get, Set). This is used in the error messages to identify which specification has errors. \\
\texttt{SpecNum} & an integer identifying which specification in the specifications group has errors. \\
\bottomrule()
\end{longtable}

\hypertarget{details-30}{%
\subsubsection{Details}\label{details-30}}

This function checks whether a single module specification (i.e.~the
specification for a single dataset contains the minimum required
attributes and that the values of the attributes are correct.

\hypertarget{value-30}{%
\subsubsection{Value}\label{value-30}}

A vector containing messages identifying any errors that are found.

\hypertarget{calls-30}{%
\subsubsection{Calls}\label{calls-30}}

checkSpecTypeUnits, SpecRequirements

\hypertarget{checkspecconsistency-check-specification-consistency}{%
\subsection{\texorpdfstring{\texttt{checkSpecConsistency}: Check specification consistency}{checkSpecConsistency: Check specification consistency}}\label{checkspecconsistency-check-specification-consistency}}

\hypertarget{description-31}{%
\subsubsection{Description}\label{description-31}}

\texttt{checkSpecConsistency} a visioneval framework control function that
checks whether the specifications for a dataset are consistent with the data
attributes in the datastore.

\hypertarget{usage-31}{%
\subsubsection{Usage}\label{usage-31}}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{checkSpecConsistency}\NormalTok{(Spec\_ls, DstoreAttr\_)}
\end{Highlighting}
\end{Shaded}

\hypertarget{arguments-27}{%
\subsubsection{Arguments}\label{arguments-27}}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 2\tabcolsep) * \real{0.4483}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 2\tabcolsep) * \real{0.5517}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Argument
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule()
\endhead
\texttt{Spec\_ls} & a list of data specifications consistent with a module ``Get'' or ``Set'' specifications. \\
\texttt{DstoreAttr\_} & a named list where the components are the attributes of a dataset. \\
\bottomrule()
\end{longtable}

\hypertarget{details-31}{%
\subsubsection{Details}\label{details-31}}

This function compares the specifications for a dataset identified in a
module ``Get'' or ``Set'' are consistent with the attributes for that data in the
datastore.

\hypertarget{value-31}{%
\subsubsection{Value}\label{value-31}}

A list containing two components, Errors and Warnings. If no
inconsistencies are found, both components will have zero-length character
vectors. If there are one or more inconsistencies, then these components
will hold vectors of error and warning messages. Mismatch between UNITS
will produce a warning message. All other inconsistencies will produce
error messages.

\hypertarget{calls-31}{%
\subsubsection{Calls}\label{calls-31}}

\hypertarget{checkspectypeunits-checks-the-type-and-units-and-associated-multiplier-and-year-attributes-of-a}{%
\subsection{\texorpdfstring{\texttt{checkSpecTypeUnits}: Checks the TYPE and UNITS and associated MULTIPLIER and YEAR attributes of a}{checkSpecTypeUnits: Checks the TYPE and UNITS and associated MULTIPLIER and YEAR attributes of a}}\label{checkspectypeunits-checks-the-type-and-units-and-associated-multiplier-and-year-attributes-of-a}}

Inp, Get, or Set specification for consistency.

\hypertarget{description-32}{%
\subsubsection{Description}\label{description-32}}

\texttt{checkSpecTypeUnits} a visioneval framework control function that checks
correctness of TYPE, UNITS, MULTIPLIER and YEAR attributes of a specification
that has been processed with the parseUnitsSpec function.

\hypertarget{usage-32}{%
\subsubsection{Usage}\label{usage-32}}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{checkSpecTypeUnits}\NormalTok{(Spec\_ls, SpecGroup, SpecNum)}
\end{Highlighting}
\end{Shaded}

\hypertarget{arguments-28}{%
\subsubsection{Arguments}\label{arguments-28}}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 2\tabcolsep) * \real{0.4483}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 2\tabcolsep) * \real{0.5517}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Argument
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule()
\endhead
\texttt{Spec\_ls} & a list for a single specification (e.g.~a Get specification for a dataset) that has been processed with the parseUnitsSpec function to split the name, multiplier, and year elements of the UNITS specification. \\
\texttt{SpecGroup} & a string identifying the group that this specification comes from (e.g.~Inp, Get, Set). \\
\texttt{SpecNum} & a number identifying which specification in the order of the SpecGroup. This is used to identify the subject specification if an error is identified. \\
\bottomrule()
\end{longtable}

\hypertarget{details-32}{%
\subsubsection{Details}\label{details-32}}

This function checks whether the TYPE and UNITS of a module's specification
contain errors. The check is done on a module specification in which the
module's UNITS attribute has been parsed by the parseUnitsSpec function to
split the name, multiplier, and years parts of the UNITS attribute. The TYPE
is checked against the types catalogued in the Types function. The units name
in the UNITS attribute is checked against the units names corresponding to
each type catalogued in the Types function. The MULTIPLIER is checked to
determine whether a value is a valid number, NA, or not a number (NaN). A NA
value means that no multiplier was specified (this is OK) a NaN value means
that a multiplier that is not a number was specified which is an error. The
YEAR attribute is checked to determine whether there is a proper
specification if the specified TYPE is currency. If the TYPE is currency, a
YEAR must be specified for Get and Set specifications.

\hypertarget{value-32}{%
\subsubsection{Value}\label{value-32}}

A vector containing messages identifying any errors that are found.

\hypertarget{calls-32}{%
\subsubsection{Calls}\label{calls-32}}

checkUnits, Types

\hypertarget{checktableexistence-check-whether-table-exists-in-the-datastore}{%
\subsection{\texorpdfstring{\texttt{checkTableExistence}: Check whether table exists in the datastore}{checkTableExistence: Check whether table exists in the datastore}}\label{checktableexistence-check-whether-table-exists-in-the-datastore}}

\hypertarget{description-33}{%
\subsubsection{Description}\label{description-33}}

\texttt{checkTableExistence} a visioneval framework control function that
checks whether a table is present in the datastore.

\hypertarget{usage-33}{%
\subsubsection{Usage}\label{usage-33}}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{checkTableExistence}\NormalTok{(Table, Group, DstoreListing\_df)}
\end{Highlighting}
\end{Shaded}

\hypertarget{arguments-29}{%
\subsubsection{Arguments}\label{arguments-29}}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 2\tabcolsep) * \real{0.4483}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 2\tabcolsep) * \real{0.5517}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Argument
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule()
\endhead
\texttt{Table} & a string identifying the table. \\
\texttt{Group} & a string or numeric representation of the group the table is a part of. \\
\texttt{DstoreListing\_df} & a dataframe which lists the contents of the datastore as contained in the model state file. \\
\bottomrule()
\end{longtable}

\hypertarget{details-33}{%
\subsubsection{Details}\label{details-33}}

This function checks whether a table is present in the datastore.

\hypertarget{value-33}{%
\subsubsection{Value}\label{value-33}}

A logical identifying whether a table is present in the datastore.

\hypertarget{calls-33}{%
\subsubsection{Calls}\label{calls-33}}

\hypertarget{checkunits-check-measurement-units-for-consistency-with-recognized-units-for-stated-type.}{%
\subsection{\texorpdfstring{\texttt{checkUnits}: Check measurement units for consistency with recognized units for stated type.}{checkUnits: Check measurement units for consistency with recognized units for stated type.}}\label{checkunits-check-measurement-units-for-consistency-with-recognized-units-for-stated-type.}}

\hypertarget{description-34}{%
\subsubsection{Description}\label{description-34}}

\texttt{checkUnits} a visioneval framework control function that checks the
specified UNITS for a dataset for consistency with the recognized units for
the TYPE specification for the dataset. It also splits compound units into
elements.

\hypertarget{usage-34}{%
\subsubsection{Usage}\label{usage-34}}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{checkUnits}\NormalTok{(DataType, Units)}
\end{Highlighting}
\end{Shaded}

\hypertarget{arguments-30}{%
\subsubsection{Arguments}\label{arguments-30}}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 2\tabcolsep) * \real{0.4483}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 2\tabcolsep) * \real{0.5517}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Argument
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule()
\endhead
\texttt{DataType} & a string which identifies the data type as specified in the TYPE attribute for a data set. \\
\texttt{Units} & a string identifying the measurement units as specified in the UNITS attribute for a data set after processing with the parseUnitsSpec function. \\
\bottomrule()
\end{longtable}

\hypertarget{details-34}{%
\subsubsection{Details}\label{details-34}}

The visioneval code recognizes 4 simple data types (integer, double, logical,
and character) and 9 complex data types (e.g.~distance, time, mass).
The simple data types can have any units of measure, but the complex data
types must use units of measure that are declared in the Types() function. In
addition, there is a compound data type that can have units that are composed
of the units of two or more complex data types. For example, speed is a
compound data type composed of distance divided by speed. With this example,
speed in miles per hour would be represented as MI/HR. This function checks
the UNITS specification for a dataset for consistency with the recognized
units for the given data TYPE. To check the units of a compound data type,
the function splits the units into elements and the operators that separate
the elements. It identifies the element units, the complex data type for each
element and the operators that separate the elements.

\hypertarget{value-34}{%
\subsubsection{Value}\label{value-34}}

A list which contains the following elements:
DataType: a string identifying the data type.
UnitType: a string identifying whether the units correspond to a `simple'
data type, a `complex' data type, or a `compound' data type.
Units: a string identifying the units.
Elements: a list containing the elements of a compound units. Components of
this list are:
Types: the complex type of each element,
Units: the units of each element,
Operators: the operators that separate the units.
Errors: a string containing an error message or character(0) if no error.

\hypertarget{calls-34}{%
\subsubsection{Calls}\label{calls-34}}

Types

\hypertarget{convertmagnitude-convert-values-between-different-magnitudes.}{%
\subsection{\texorpdfstring{\texttt{convertMagnitude}: Convert values between different magnitudes.}{convertMagnitude: Convert values between different magnitudes.}}\label{convertmagnitude-convert-values-between-different-magnitudes.}}

\hypertarget{description-35}{%
\subsubsection{Description}\label{description-35}}

\texttt{convertMagnitude} a visioneval framework control function that
converts values between different magnitudes such as between dollars and
thousands of dollars.

\hypertarget{usage-35}{%
\subsubsection{Usage}\label{usage-35}}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{convertMagnitude}\NormalTok{(Values\_, FromMagnitude, ToMagnitude)}
\end{Highlighting}
\end{Shaded}

\hypertarget{arguments-31}{%
\subsubsection{Arguments}\label{arguments-31}}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 2\tabcolsep) * \real{0.4483}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 2\tabcolsep) * \real{0.5517}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Argument
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule()
\endhead
\texttt{Values\_} & a numeric vector of values to convert from one unit to another. \\
\texttt{FromMagnitude} & a number or string identifying the magnitude of the units of the input Values\_. \\
\texttt{ToMagnitude} & a number or string identifying the magnitude to convert the Values\_ to. \\
\bottomrule()
\end{longtable}

\hypertarget{details-35}{%
\subsubsection{Details}\label{details-35}}

The visioneval framework stores all quantities in single units to be
unambiguous about the data contained in the datastore. For example, total
income for a region would be stored in dollars rather than in thousands of
dollars or millions of dollars. However, often inputs for large quantities
are expressed in thousands or millions. Also submodels may be estimated using
values expressed in multiples, or they might produce results that are
multiples. Where that is the case, the framework enables model users and
developers to encode the data multiplier in the input file field name or the
UNITS specification. The framework functions then use that information to
convert units to and from the single units stored in the datastore. This
function implements the conversion. The multiplier must be specified in
scientific notation used in R with the additional constraint that the digit
term must be 1. For example, a multiplier of 1000 would be represented as
1e3. The multiplier is separated from the units name by a period (.). For
example if the units of a dataset to be retrieved from the datastore are
thousands of miles, the UNITS specification would be written as `MI.1e3'.

\hypertarget{value-35}{%
\subsubsection{Value}\label{value-35}}

A numeric vector of values corresponding the the input Values\_ but
converted from the magnitude identified in the FromMagnitude argument to the
magnitude identified in the ToMagnitude argument. If either the FromMagnitude
or the ToMagnitude arguments is NA, the original Values\_ are returned. The
Converted attribute of the returned values is FALSE. Otherwise the conversion
is done and the Converted attribute of the returned values is TRUE.

\hypertarget{calls-35}{%
\subsubsection{Calls}\label{calls-35}}

\hypertarget{convertunits-convert-values-between-units-of-measure.}{%
\subsection{\texorpdfstring{\texttt{convertUnits}: Convert values between units of measure.}{convertUnits: Convert values between units of measure.}}\label{convertunits-convert-values-between-units-of-measure.}}

\hypertarget{description-36}{%
\subsubsection{Description}\label{description-36}}

\texttt{convertUnits} a visioneval framework control function that
converts values between different units of measure for complex and compound
data types recognized by the visioneval code.

\hypertarget{usage-36}{%
\subsubsection{Usage}\label{usage-36}}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{convertUnits}\NormalTok{(Values\_, DataType, FromUnits, }\AttributeTok{ToUnits =} \StringTok{"default"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\hypertarget{arguments-32}{%
\subsubsection{Arguments}\label{arguments-32}}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 2\tabcolsep) * \real{0.4483}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 2\tabcolsep) * \real{0.5517}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Argument
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule()
\endhead
\texttt{Values\_} & a numeric vector of values to convert from one unit to another. \\
\texttt{DataType} & a string identifying the data type. \\
\texttt{FromUnits} & a string identifying the units of measure of the Values\_. \\
\texttt{ToUnits} & a string identifying the units of measure to convert the Values\_ to. If the ToUnits are `default' the Values\_ are converted to the default units for the model. \\
\bottomrule()
\end{longtable}

\hypertarget{details-36}{%
\subsubsection{Details}\label{details-36}}

The visioneval code recognizes 4 simple data types (integer, double, logical,
and character) and 9 complex data types (e.g.~distance, time, mass). The
simple data types can have any units of measure, but the complex data types
must use units of measure that are declared in the Types() function. In
addition, there is a compound data type that can have units that are composed
of the units of two or more complex data types. For example, speed is a
compound data type composed of distance divided by speed. With this example,
speed in miles per hour would be represented as MI/HR. This function converts
a vector of values from one unit of measure to another unit of measure. For
compound data type it combines multiple unit conversions. The framework
converts units based on the default units declared in the `units.csv' model
definition file and in UNITS specifications declared in modules.

\hypertarget{value-36}{%
\subsubsection{Value}\label{value-36}}

A list containing the converted values and additional information as
follows:
Values - a numeric vector containing the converted values.
FromUnits - a string representation of the units converted from.
ToUnits - a string representation of the units converted to.
Errors - a string containing an error message or character(0) if no errors.
Warnings - a string containing a warning message or character(0) if no
warning.

\hypertarget{calls-36}{%
\subsubsection{Calls}\label{calls-36}}

checkUnits, getUnits, Types

\hypertarget{creategeoindex-create-datastore-index.}{%
\subsection{\texorpdfstring{\texttt{createGeoIndex}: Create datastore index.}{createGeoIndex: Create datastore index.}}\label{creategeoindex-create-datastore-index.}}

\hypertarget{description-37}{%
\subsubsection{Description}\label{description-37}}

\texttt{createIndex} a visioneval framework control function that creates an
index for reading or writing module data to the datastore.

\hypertarget{usage-37}{%
\subsubsection{Usage}\label{usage-37}}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{createGeoIndex}\NormalTok{(Table, Group, RunBy, Geo, GeoIndex\_ls)}
\end{Highlighting}
\end{Shaded}

\hypertarget{arguments-33}{%
\subsubsection{Arguments}\label{arguments-33}}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 2\tabcolsep) * \real{0.4483}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 2\tabcolsep) * \real{0.5517}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Argument
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule()
\endhead
\texttt{Table} & A string identifying the name of the table the index is being created for. \\
\texttt{Group} & A string identifying the name of the group where the table is located in the datastore. \\
\texttt{RunBy} & A string identifying the level of geography the module is being run at (e.g.~Azone). \\
\texttt{Geo} & A string identifying the geographic unit to create the index for (e.g.~the name of a particular Azone). \\
\texttt{GeoIndex\_ls} & a list of geographic indices used to determine the positions to extract from a dataset corresponding to the specified geography. \\
\bottomrule()
\end{longtable}

\hypertarget{details-37}{%
\subsubsection{Details}\label{details-37}}

This function creates indexing functions which return an index to positions
in datasets that correspond to positions in an index field of a table. For
example if the index field is `Azone' in the `Household' table, this function
will return a function that when provided the name of a particular Azone,
will return the positions corresponding to that Azone.

\hypertarget{value-37}{%
\subsubsection{Value}\label{value-37}}

A function that creates a vector of positions corresponding to the
location of the supplied value in the index field.

\hypertarget{calls-37}{%
\subsubsection{Calls}\label{calls-37}}

\hypertarget{creategeoindexlist-create-a-list-of-geographic-indices-for-all-tables-in-a-datastore.}{%
\subsection{\texorpdfstring{\texttt{createGeoIndexList}: Create a list of geographic indices for all tables in a datastore.}{createGeoIndexList: Create a list of geographic indices for all tables in a datastore.}}\label{creategeoindexlist-create-a-list-of-geographic-indices-for-all-tables-in-a-datastore.}}

\hypertarget{description-38}{%
\subsubsection{Description}\label{description-38}}

\texttt{createGeoIndexList} a visioneval framework control function that
creates a list containing the geographic indices for tables in the operating
datastore for identified tables.

\hypertarget{usage-38}{%
\subsubsection{Usage}\label{usage-38}}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{createGeoIndexList}\NormalTok{(Specs\_ls, RunBy, RunYear)}
\end{Highlighting}
\end{Shaded}

\hypertarget{arguments-34}{%
\subsubsection{Arguments}\label{arguments-34}}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 2\tabcolsep) * \real{0.4483}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 2\tabcolsep) * \real{0.5517}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Argument
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule()
\endhead
\texttt{Specs\_ls} & A `Get' or `Set' specifications list for a module. \\
\texttt{RunBy} & The value of the RunBy specification for a module. \\
\texttt{RunYear} & A string identifying the model year that is being run. \\
\bottomrule()
\end{longtable}

\hypertarget{details-38}{%
\subsubsection{Details}\label{details-38}}

This function takes a `Get' or `Set' specifications list for a module and the
`RunBy' specification and returns a list which has a component for each table
identified in the specifications. Each component includes all geographic
datasets for the table.

\hypertarget{value-38}{%
\subsubsection{Value}\label{value-38}}

A list that contains a component for each table identified in the
specifications in which each component includes all the geographic datasets
for the table represented by the component.

\hypertarget{calls-38}{%
\subsubsection{Calls}\label{calls-38}}

getModelState

\hypertarget{deflatecurrency-convert-currency-values-to-different-years.}{%
\subsection{\texorpdfstring{\texttt{deflateCurrency}: Convert currency values to different years.}{deflateCurrency: Convert currency values to different years.}}\label{deflatecurrency-convert-currency-values-to-different-years.}}

\hypertarget{description-39}{%
\subsubsection{Description}\label{description-39}}

\texttt{deflateCurrency} a visioneval framework control function that
converts currency values between different years of measure.

\hypertarget{usage-39}{%
\subsubsection{Usage}\label{usage-39}}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{deflateCurrency}\NormalTok{(Values\_, FromYear, ToYear)}
\end{Highlighting}
\end{Shaded}

\hypertarget{arguments-35}{%
\subsubsection{Arguments}\label{arguments-35}}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 2\tabcolsep) * \real{0.4483}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 2\tabcolsep) * \real{0.5517}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Argument
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule()
\endhead
\texttt{Values\_} & a numeric vector of values to convert from one currency year to another. \\
\texttt{FromYear} & a number or string identifying the currency year of the input Values\_. \\
\texttt{ToYear} & a number or string identifying the currency year to convert the Values\_ to. \\
\bottomrule()
\end{longtable}

\hypertarget{details-39}{%
\subsubsection{Details}\label{details-39}}

The visioneval framework stores all currency values in the base year real
currency (e.g.~dollar) values. However, currency inputs may be in different
nominal year currency. Also modules may be estimated using different nominal
year currency data. For example, the original vehicle travel model in
GreenSTEP used 2001 NHTS data while the newer model uses 2009 NHTS data. The
framework enables model uses to specify the currency year in the field name
of an input file that contains currency data. Likewise, the currency year can
be encoded in the UNIT attributes for a modules Get and Set specifications.
The framework converts dollars to and from specified currency year values and
base year real dollar values. The model uses a set of deflator values that
the user inputs for the region to make the adjustments. These values are
stored in the model state list.

\hypertarget{value-39}{%
\subsubsection{Value}\label{value-39}}

A numeric vector of values corresponding the the input Values\_ but
converted from the currency year identified in the FromYear argument to the
currency year identified in the ToYear argument. If either the FromYear or
the ToYear arguments is unaccounted for in the deflator series, the original
Values\_ are returned with a Converted attribute of FALSE. Otherwise the
conversion is done and the Converted attribute of the returned values is TRUE.

\hypertarget{calls-39}{%
\subsubsection{Calls}\label{calls-39}}

getModelState

\hypertarget{doprocessinpspec-filters-inp-specifications-list-based-on-optional-specification-attributes.}{%
\subsection{\texorpdfstring{\texttt{doProcessInpSpec}: Filters Inp specifications list based on OPTIONAL specification attributes.}{doProcessInpSpec: Filters Inp specifications list based on OPTIONAL specification attributes.}}\label{doprocessinpspec-filters-inp-specifications-list-based-on-optional-specification-attributes.}}

\hypertarget{description-40}{%
\subsubsection{Description}\label{description-40}}

\texttt{doProcessInpSpec} a visioneval framework control function that filters
out Inp specifications whose OPTIONAL specification attribute is TRUE but the
specified input file is not present.

\hypertarget{usage-40}{%
\subsubsection{Usage}\label{usage-40}}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{doProcessInpSpec}\NormalTok{(InpSpecs\_ls, }\AttributeTok{InputDir =} \StringTok{"inputs"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\hypertarget{arguments-36}{%
\subsubsection{Arguments}\label{arguments-36}}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 2\tabcolsep) * \real{0.4483}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 2\tabcolsep) * \real{0.5517}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Argument
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule()
\endhead
\texttt{InpSpecs\_ls} & A standard specifications list for Inp specifications. \\
\texttt{InputDir} & The path to the input directory. \\
\bottomrule()
\end{longtable}

\hypertarget{details-40}{%
\subsubsection{Details}\label{details-40}}

An Inp specification component may have an OPTIONAL specification whose value
is TRUE. If so, and if the specified input file is present, then the input
specification needs to be processed. This function checks whether the
OPTIONAL specification is present, whether its value is TRUE, and whether the
file exists. If all of these are true, then the input specification needs to
be processed. The input specification also needs to be processed if it is
not optional. A specification is not optional if the OPTIONAL attribute is
not present or if it is present and the value is not TRUE. The function
returns a list of all the Inp specifications that meet these criteria.

\hypertarget{value-40}{%
\subsubsection{Value}\label{value-40}}

A list containing the Inp specification components that meet the
criteria of either not being optional or being optional and the specified
input file is present.

\hypertarget{calls-40}{%
\subsubsection{Calls}\label{calls-40}}

\hypertarget{expandspec-expand-a-inp-get-or-set-specification-so-that-is-can-be-used-by-other}{%
\subsection{\texorpdfstring{\texttt{expandSpec}: Expand a Inp, Get, or Set specification so that is can be used by other}{expandSpec: Expand a Inp, Get, or Set specification so that is can be used by other}}\label{expandspec-expand-a-inp-get-or-set-specification-so-that-is-can-be-used-by-other}}

functions to process inputs and to read from or write to the datastore.

\hypertarget{description-41}{%
\subsubsection{Description}\label{description-41}}

\texttt{expandSpec} a visioneval framework control function that takes a Inp,
Get, or Set specification and processes it to be in a form that can be used
by other functions which use the specification in processing inputs or
reading from or writing to the datastore. The parseUnitsSpec function is
called to parse the UNITS attribute to extract name, multiplier, and year
values. When the specification has multiple values for the NAME attribute,
the function creates a specification for each name value.

\hypertarget{usage-41}{%
\subsubsection{Usage}\label{usage-41}}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{expandSpec}\NormalTok{(SpecToExpand\_ls, ComponentName)}
\end{Highlighting}
\end{Shaded}

\hypertarget{arguments-37}{%
\subsubsection{Arguments}\label{arguments-37}}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 2\tabcolsep) * \real{0.4483}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 2\tabcolsep) * \real{0.5517}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Argument
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule()
\endhead
\texttt{SpecToExpand\_ls} & A standard specifications list for a specification whose NAME attribute has multiple values. \\
\texttt{ComponentName} & A string that is the name of the specifications that the specification is a part of (e.g.~``Inp'', ``Get'', ``Set''). \\
\bottomrule()
\end{longtable}

\hypertarget{details-41}{%
\subsubsection{Details}\label{details-41}}

The VisionEval design allows module developers to assign multiple values to
the NAME attributes of a Inp, Get, or Set specification where the other
attributes for those named datasets (or fields) are the same. This greatly
reduces duplication and the potential for error in writing module
specifications. However, other functions that check or use the specifications
are not capable of handling specifications which have NAME attributes
containing multiple values. This function expands a specification with
multiple values for a NAME attribute into multiple specifications, each with
a single value for the NAME attribute. In addition, the function calls the
parseUnitsSpec function to extract multiplier and year information from the
value of the UNITS attribute. See that function for details.

\hypertarget{value-41}{%
\subsubsection{Value}\label{value-41}}

A list of standard specifications lists which has a component for
each value in the NAME attribute of the input specifications list.

\hypertarget{calls-41}{%
\subsubsection{Calls}\label{calls-41}}

parseUnitsSpec

\hypertarget{findspec-find-the-full-specification-corresponding-to-a-defined-name-table-and-group}{%
\subsection{\texorpdfstring{\texttt{findSpec}: Find the full specification corresponding to a defined NAME, TABLE, and GROUP}{findSpec: Find the full specification corresponding to a defined NAME, TABLE, and GROUP}}\label{findspec-find-the-full-specification-corresponding-to-a-defined-name-table-and-group}}

\hypertarget{description-42}{%
\subsubsection{Description}\label{description-42}}

\texttt{findSpec} a visioneval framework control function that returns the full
dataset specification for defined NAME, TABLE, and GROUP.

\hypertarget{usage-42}{%
\subsubsection{Usage}\label{usage-42}}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{findSpec}\NormalTok{(Specs\_ls, Name, Table, Group)}
\end{Highlighting}
\end{Shaded}

\hypertarget{arguments-38}{%
\subsubsection{Arguments}\label{arguments-38}}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 2\tabcolsep) * \real{0.4483}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 2\tabcolsep) * \real{0.5517}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Argument
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule()
\endhead
\texttt{Specs\_ls} & a standard specifications list for `Inp', `Get', or `Set' \\
\texttt{Name} & a string for the name of the dataset \\
\texttt{Table} & a string for the table that the dataset resides in \\
\texttt{Group} & a string for the generic group that the table resides in \\
\bottomrule()
\end{longtable}

\hypertarget{details-42}{%
\subsubsection{Details}\label{details-42}}

This function finds and returns the full specification from a specifications
list whose NAME, TABLE and GROUP values correspond to the Name, Table, and
Group argument values. The specifications list must be in standard format and
must be for only `Inp', `Get', or `Set' specifications.

\hypertarget{value-42}{%
\subsubsection{Value}\label{value-42}}

A list containing the full specifications for the dataset

\hypertarget{calls-42}{%
\subsubsection{Calls}\label{calls-42}}

\hypertarget{getdatasetattr-get-attributes-of-a-dataset}{%
\subsection{\texorpdfstring{\texttt{getDatasetAttr}: Get attributes of a dataset}{getDatasetAttr: Get attributes of a dataset}}\label{getdatasetattr-get-attributes-of-a-dataset}}

\hypertarget{description-43}{%
\subsubsection{Description}\label{description-43}}

\texttt{getDatasetAttr} a visioneval framework control function that retrieves
the attributes for a dataset in the datastore.

\hypertarget{usage-43}{%
\subsubsection{Usage}\label{usage-43}}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{getDatasetAttr}\NormalTok{(Name, Table, Group, DstoreListing\_df)}
\end{Highlighting}
\end{Shaded}

\hypertarget{arguments-39}{%
\subsubsection{Arguments}\label{arguments-39}}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 2\tabcolsep) * \real{0.4483}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 2\tabcolsep) * \real{0.5517}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Argument
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule()
\endhead
\texttt{Name} & a string identifying the dataset name. \\
\texttt{Table} & a string identifying the table the dataset is a part of. \\
\texttt{Group} & a string or numeric representation of the group the table is a part of. \\
\texttt{DstoreListing\_df} & a dataframe which lists the contents of the datastore as contained in the model state file. \\
\bottomrule()
\end{longtable}

\hypertarget{details-43}{%
\subsubsection{Details}\label{details-43}}

This function extracts the listed attributes for a specific dataset from the
datastore listing.

\hypertarget{value-43}{%
\subsubsection{Value}\label{value-43}}

A named list of the dataset attributes.

\hypertarget{calls-43}{%
\subsubsection{Calls}\label{calls-43}}

\hypertarget{getfromdatastore-retrieve-data-identified-in-get-specifications-from-datastore}{%
\subsection{\texorpdfstring{\texttt{getFromDatastore}: Retrieve data identified in `Get' specifications from datastore}{getFromDatastore: Retrieve data identified in `Get' specifications from datastore}}\label{getfromdatastore-retrieve-data-identified-in-get-specifications-from-datastore}}

\hypertarget{description-44}{%
\subsubsection{Description}\label{description-44}}

\texttt{getFromDatastore} a visioneval framework control function that
retrieves datasets identified in a module's `Get' specifications from the
datastore.

\hypertarget{usage-44}{%
\subsubsection{Usage}\label{usage-44}}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{getFromDatastore}\NormalTok{(ModuleSpec\_ls, RunYear, }\AttributeTok{Geo =} \ConstantTok{NULL}\NormalTok{,}
  \AttributeTok{GeoIndex\_ls =} \ConstantTok{NULL}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\hypertarget{arguments-40}{%
\subsubsection{Arguments}\label{arguments-40}}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 2\tabcolsep) * \real{0.4483}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 2\tabcolsep) * \real{0.5517}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Argument
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule()
\endhead
\texttt{ModuleSpec\_ls} & a list of module specifications that is consistent with the VisionEval requirements \\
\texttt{RunYear} & a string identifying the model year being run. The default is the Year object in the global workspace. \\
\texttt{Geo} & a string identifying the name of the geographic area to get the data for. For example, if the module is specified to be run by Azone, then Geo would be the name of a particular Azone. \\
\texttt{GeoIndex\_ls} & a list of geographic indices used to determine the positions to extract from a dataset corresponding to the specified geography. \\
\bottomrule()
\end{longtable}

\hypertarget{details-44}{%
\subsubsection{Details}\label{details-44}}

This function retrieves from the datastore all of the data sets identified in
a module's `Get' specifications. If the module's specifications include the
name of a geographic area, then the function will retrieve the data for that
geographic area.

\hypertarget{value-44}{%
\subsubsection{Value}\label{value-44}}

A list containing all the data sets specified in the module's
`Get' specifications for the identified geographic area.

\hypertarget{calls-44}{%
\subsubsection{Calls}\label{calls-44}}

checkDataset, convertMagnitude, convertUnits, createGeoIndex, deflateCurrency, getDatasetAttr, getModelState, initDataList, readModelState, Types

\hypertarget{getmodelstate-get-values-from-model-state-list.}{%
\subsection{\texorpdfstring{\texttt{getModelState}: Get values from model state list.}{getModelState: Get values from model state list.}}\label{getmodelstate-get-values-from-model-state-list.}}

\hypertarget{description-45}{%
\subsubsection{Description}\label{description-45}}

\texttt{getModelState} a visioneval framework control function that reads
components of the list that keeps track of the model state.

\hypertarget{usage-45}{%
\subsubsection{Usage}\label{usage-45}}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{getModelState}\NormalTok{(}\AttributeTok{Names\_ =} \StringTok{"All"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\hypertarget{arguments-41}{%
\subsubsection{Arguments}\label{arguments-41}}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 2\tabcolsep) * \real{0.4483}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 2\tabcolsep) * \real{0.5517}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Argument
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule()
\endhead
\texttt{Names\_} & A string vector of the components to extract from the ModelState\_ls list. \\
\bottomrule()
\end{longtable}

\hypertarget{details-45}{%
\subsubsection{Details}\label{details-45}}

Key variables that are important for managing the model run are stored in a
list (ModelState\_ls) that is managed in the global environment. This
function extracts named components of the list.

\hypertarget{value-45}{%
\subsubsection{Value}\label{value-45}}

A list containing the specified components from the model state file.

\hypertarget{calls-45}{%
\subsubsection{Calls}\label{calls-45}}

\hypertarget{getmodulespecs-retrieve-module-specifications-from-a-package}{%
\subsection{\texorpdfstring{\texttt{getModuleSpecs}: Retrieve module specifications from a package}{getModuleSpecs: Retrieve module specifications from a package}}\label{getmodulespecs-retrieve-module-specifications-from-a-package}}

\hypertarget{description-46}{%
\subsubsection{Description}\label{description-46}}

\texttt{getModuleSpecs} a visioneval framework control function that retrieves
the specifications list for a module and returns the specifications list.

\hypertarget{usage-46}{%
\subsubsection{Usage}\label{usage-46}}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{getModuleSpecs}\NormalTok{(ModuleName, PackageName)}
\end{Highlighting}
\end{Shaded}

\hypertarget{arguments-42}{%
\subsubsection{Arguments}\label{arguments-42}}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 2\tabcolsep) * \real{0.4483}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 2\tabcolsep) * \real{0.5517}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Argument
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule()
\endhead
\texttt{ModuleName} & A string identifying the name of the module. \\
\texttt{PackageName} & A string identifying the name of the package that the module is in. \\
\bottomrule()
\end{longtable}

\hypertarget{details-46}{%
\subsubsection{Details}\label{details-46}}

This function loads the specifications for a module in a package. It returns
the specifications list.

\hypertarget{value-46}{%
\subsubsection{Value}\label{value-46}}

A specifications list that is the same as the specifications list
defined for the module in the package.

\hypertarget{calls-46}{%
\subsubsection{Calls}\label{calls-46}}

\hypertarget{getunits-retrieve-default-units-for-model}{%
\subsection{\texorpdfstring{\texttt{getUnits}: Retrieve default units for model}{getUnits: Retrieve default units for model}}\label{getunits-retrieve-default-units-for-model}}

\hypertarget{description-47}{%
\subsubsection{Description}\label{description-47}}

\texttt{getUnits} a visioneval framework control function that retrieves the
default model units for a vector of complex data types.

\hypertarget{usage-47}{%
\subsubsection{Usage}\label{usage-47}}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{getUnits}\NormalTok{(Type\_)}
\end{Highlighting}
\end{Shaded}

\hypertarget{arguments-43}{%
\subsubsection{Arguments}\label{arguments-43}}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 2\tabcolsep) * \real{0.4483}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 2\tabcolsep) * \real{0.5517}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Argument
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule()
\endhead
\texttt{Type\_} & A string vector identifying the complex data type(s). \\
\bottomrule()
\end{longtable}

\hypertarget{details-47}{%
\subsubsection{Details}\label{details-47}}

This is a convenience function to make it easier to retrieve the default
units for a complex data type (e.g.~distance, volume, speed). The default
units are the units used to store the complex data type in the datastore.

\hypertarget{value-47}{%
\subsubsection{Value}\label{value-47}}

A string vector identifying the default units for the complex data
type(s) or NA if any of the type(s) are not defined.

\hypertarget{calls-47}{%
\subsubsection{Calls}\label{calls-47}}

getModelState

\hypertarget{initdatastoregeography-initialize-datastore-geography.}{%
\subsection{\texorpdfstring{\texttt{initDatastoreGeography}: Initialize datastore geography.}{initDatastoreGeography: Initialize datastore geography.}}\label{initdatastoregeography-initialize-datastore-geography.}}

\hypertarget{description-48}{%
\subsubsection{Description}\label{description-48}}

\texttt{initDatastoreGeography} a visioneval framework control function that
initializes tables and writes datasets to the datastore which describe
geographic relationships of the model.

\hypertarget{usage-48}{%
\subsubsection{Usage}\label{usage-48}}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{initDatastoreGeography}\NormalTok{()}
\end{Highlighting}
\end{Shaded}

\hypertarget{details-48}{%
\subsubsection{Details}\label{details-48}}

This function writes tables to the datastore for each of the geographic
levels. These tables are then used during a model run to store values that
are either specified in scenario inputs or that are calculated during a model
run. The function populates the tables with cross-references between
geographic levels. The function reads the model geography (Geo\_df) from the
model state file. Upon successful completion, the function calls the
listDatastore function to update the datastore listing in the global list.

\hypertarget{value-48}{%
\subsubsection{Value}\label{value-48}}

The function returns TRUE if the geographic tables and datasets are
sucessfully written to the datastore.

\hypertarget{calls-48}{%
\subsubsection{Calls}\label{calls-48}}

getModelState, writeLog

\hypertarget{initlog-initialize-run-log.}{%
\subsection{\texorpdfstring{\texttt{initLog}: Initialize run log.}{initLog: Initialize run log.}}\label{initlog-initialize-run-log.}}

\hypertarget{description-49}{%
\subsubsection{Description}\label{description-49}}

\texttt{initLog} a visioneval framework control function that creates a log
(text file) that stores messages generated during a model run.

\hypertarget{usage-49}{%
\subsubsection{Usage}\label{usage-49}}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{initLog}\NormalTok{(}\AttributeTok{Suffix =} \ConstantTok{NULL}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\hypertarget{arguments-44}{%
\subsubsection{Arguments}\label{arguments-44}}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 2\tabcolsep) * \real{0.4483}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 2\tabcolsep) * \real{0.5517}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Argument
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule()
\endhead
\texttt{Suffix} & A character string appended to the file name for the log file. For example, if the suffix is `CreateHouseholds', the log file is named `Log\_CreateHouseholds.txt'. The default value is NULL in which case the suffix is the date and time. \\
\bottomrule()
\end{longtable}

\hypertarget{details-49}{%
\subsubsection{Details}\label{details-49}}

This function creates a log file that is a text file which stores messages
generated during a model run. The name of the log is `Log '
where `' is the initialization date and `' is the initialization
time. The log is initialized with the scenario name, scenario description and
the date and time of initialization.

\hypertarget{value-49}{%
\subsubsection{Value}\label{value-49}}

TRUE if the log is created successfully. It creates a log file in the
working directory and identifies the name of the log file in the
model state file.

\hypertarget{calls-49}{%
\subsubsection{Calls}\label{calls-49}}

getModelState, setModelState

\hypertarget{initmodelstatefile-initialize-model-state.}{%
\subsection{\texorpdfstring{\texttt{initModelStateFile}: Initialize model state.}{initModelStateFile: Initialize model state.}}\label{initmodelstatefile-initialize-model-state.}}

\hypertarget{description-50}{%
\subsubsection{Description}\label{description-50}}

\texttt{initModelState} a visioneval framework control function that loads
model run parameters into the model state list in the global workspace and
saves as file.

\hypertarget{usage-50}{%
\subsubsection{Usage}\label{usage-50}}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{initModelStateFile}\NormalTok{(}\AttributeTok{Dir =} \StringTok{"defs"}\NormalTok{, }\AttributeTok{ParamFile =} \StringTok{"run\_parameters.json"}\NormalTok{,}
  \AttributeTok{DeflatorFile =} \StringTok{"deflators.csv"}\NormalTok{, }\AttributeTok{UnitsFile =} \StringTok{"units.csv"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\hypertarget{arguments-45}{%
\subsubsection{Arguments}\label{arguments-45}}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 2\tabcolsep) * \real{0.4483}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 2\tabcolsep) * \real{0.5517}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Argument
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule()
\endhead
\texttt{Dir} & A string identifying the name of the directory where the global parameters, deflator, and default units files are located. The default value is defs. \\
\texttt{ParamFile} & A string identifying the name of the global parameters file. The default value is parameters.json. \\
\texttt{DeflatorFile} & A string identifying the name of the file which contains deflator values by year (e.g.~consumer price index). The default value is deflators.csv. \\
\texttt{UnitsFile} & A string identifying the name of the file which contains default units for complex data types (e.g.~currency, distance, speed, etc.). The default value is units.csv. \\
\bottomrule()
\end{longtable}

\hypertarget{details-50}{%
\subsubsection{Details}\label{details-50}}

This function creates the model state list and loads model run parameters
recorded in the `parameters.json' file into the model state list. It also
saves the model state list in a file (ModelState.Rda).

\hypertarget{value-50}{%
\subsubsection{Value}\label{value-50}}

TRUE if the model state list is created and file is saved. It creates
the model state list and loads parameters recorded in the `parameters.json'
file into the model state lists and saves a model state file.

\hypertarget{calls-50}{%
\subsubsection{Calls}\label{calls-50}}

\hypertarget{inputstodatastore-write-the-datasets-in-a-list-of-module-inputs-that-have-been-processed-to-the}{%
\subsection{\texorpdfstring{\texttt{inputsToDatastore}: Write the datasets in a list of module inputs that have been processed to the}{inputsToDatastore: Write the datasets in a list of module inputs that have been processed to the}}\label{inputstodatastore-write-the-datasets-in-a-list-of-module-inputs-that-have-been-processed-to-the}}

datastore.

\hypertarget{description-51}{%
\subsubsection{Description}\label{description-51}}

\texttt{inputsToDatastore} a visioneval framework control function that takes a
list of processed module input files and writes the datasets to the
datastore.

\hypertarget{usage-51}{%
\subsubsection{Usage}\label{usage-51}}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{inputsToDatastore}\NormalTok{(Inputs\_ls, ModuleSpec\_ls, ModuleName)}
\end{Highlighting}
\end{Shaded}

\hypertarget{arguments-46}{%
\subsubsection{Arguments}\label{arguments-46}}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 2\tabcolsep) * \real{0.4483}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 2\tabcolsep) * \real{0.5517}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Argument
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule()
\endhead
\texttt{Inputs\_ls} & a list processes module inputs as created by the `processModuleInputs' function. \\
\texttt{ModuleSpec\_ls} & a list of module specifications that is consistent with the VisionEval requirements. \\
\texttt{ModuleName} & a string identifying the name of the module (used to document the dataset in the datastore). \\
\bottomrule()
\end{longtable}

\hypertarget{details-51}{%
\subsubsection{Details}\label{details-51}}

This function takes a processed list of input datasets specified by a module
created by the application of the `processModuleInputs' function and writes
the datasets in the list to the datastore.

\hypertarget{value-51}{%
\subsubsection{Value}\label{value-51}}

A logical indicating successful completion. Most of the outputs of
the function are the side effects of writing data to the datastore.

\hypertarget{calls-51}{%
\subsubsection{Calls}\label{calls-51}}

findSpec, getModelState, processModuleSpecs, sortGeoTable

\hypertarget{loaddatastore-load-saved-datastore.}{%
\subsection{\texorpdfstring{\texttt{loadDatastore}: Load saved datastore.}{loadDatastore: Load saved datastore.}}\label{loaddatastore-load-saved-datastore.}}

\hypertarget{description-52}{%
\subsubsection{Description}\label{description-52}}

\texttt{loadDatastore} a visioneval framework control function that copies an
existing saved datastore and writes information to run environment.

\hypertarget{usage-52}{%
\subsubsection{Usage}\label{usage-52}}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{loadDatastore}\NormalTok{(FileToLoad, }\AttributeTok{Dir =} \StringTok{"defs/"}\NormalTok{, GeoFile, }\AttributeTok{SaveDatastore =} \ConstantTok{TRUE}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\hypertarget{arguments-47}{%
\subsubsection{Arguments}\label{arguments-47}}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 2\tabcolsep) * \real{0.4483}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 2\tabcolsep) * \real{0.5517}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Argument
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule()
\endhead
\texttt{FileToLoad} & A string identifying the full path name to the saved datastore. Path name can either be relative to the working directory or absolute. \\
\texttt{Dir} & A string identifying the path of the geography definition file (GeoFile), default to `defs' relative to the working directory \\
\texttt{GeoFile} & A string identifying the name of the geography definition file (see `readGeography' function) that is consistent with the saved datastore. The geography definition file must be located in the `defs' directory. \\
\texttt{SaveDatastore} & A logical identifying whether an existing datastore will be saved. It is renamed by appending the system time to the name. The default value is TRUE. \\
\bottomrule()
\end{longtable}

\hypertarget{details-52}{%
\subsubsection{Details}\label{details-52}}

This function copies a saved datastore as the working datastore attributes
the global list with related geographic information. This function enables
scenario variants to be built from a constant set of starting conditions.

\hypertarget{value-52}{%
\subsubsection{Value}\label{value-52}}

TRUE if the datastore is loaded. It copies the saved datastore to
working directory as `datastore.h5'. If a `datastore.h5' file already
exists, it first renames that file as `archive-datastore.h5'. The function
updates information in the model state file regarding the model geography
and the contents of the loaded datastore. If the stored file does not exist
an error is thrown.

\hypertarget{calls-52}{%
\subsubsection{Calls}\label{calls-52}}

getModelState, setModelState, writeLog

\hypertarget{loadmodelparameters-load-model-global-parameters-file-into-datastore.}{%
\subsection{\texorpdfstring{\texttt{loadModelParameters}: Load model global parameters file into datastore.}{loadModelParameters: Load model global parameters file into datastore.}}\label{loadmodelparameters-load-model-global-parameters-file-into-datastore.}}

\hypertarget{description-53}{%
\subsubsection{Description}\label{description-53}}

\texttt{loadModelParameters} a visioneval framework control function reads the
`model\_parameters.json' file and stores the contents in the `Global/Model'
group of the datastore.

\hypertarget{usage-53}{%
\subsubsection{Usage}\label{usage-53}}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{loadModelParameters}\NormalTok{(}\AttributeTok{ModelParamFile =} \StringTok{"model\_parameters.json"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\hypertarget{arguments-48}{%
\subsubsection{Arguments}\label{arguments-48}}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 2\tabcolsep) * \real{0.4483}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 2\tabcolsep) * \real{0.5517}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Argument
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule()
\endhead
\texttt{ModelParamFile} & A string identifying the name of the parameter file. The default value is `model\_parameters.json'. \\
\bottomrule()
\end{longtable}

\hypertarget{details-53}{%
\subsubsection{Details}\label{details-53}}

This function reads the `model\_parameters.json' file in the `defs' directory
which contains parameters specific to a model rather than to a module. These
area parameters that may be used by any module. Parameters are specified by
name, value, and data type. The function creates a `Model' group in the
`Global' group and stores the values of the appropriate type in the `Model'
group.

\hypertarget{value-53}{%
\subsubsection{Value}\label{value-53}}

The function returns TRUE if the model parameters file exists and
its values are sucessfully written to the datastore.

\hypertarget{calls-53}{%
\subsubsection{Calls}\label{calls-53}}

getModelState, writeLog

\hypertarget{parseinputfieldnames-parse-field-names-of-input-file-to-separate-out-the-field-name-currency}{%
\subsection{\texorpdfstring{\texttt{parseInputFieldNames}: Parse field names of input file to separate out the field name, currency}{parseInputFieldNames: Parse field names of input file to separate out the field name, currency}}\label{parseinputfieldnames-parse-field-names-of-input-file-to-separate-out-the-field-name-currency}}

year, and multiplier.

\hypertarget{description-54}{%
\subsubsection{Description}\label{description-54}}

\texttt{parseInputFieldNames} a visioneval framework control function that
parses the field names of an input file to separate out the field name,
currency year (if data is currency type), and value multiplier.

\hypertarget{usage-54}{%
\subsubsection{Usage}\label{usage-54}}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{parseInputFieldNames}\NormalTok{(FieldNames\_, Specs\_ls, FileName)}
\end{Highlighting}
\end{Shaded}

\hypertarget{arguments-49}{%
\subsubsection{Arguments}\label{arguments-49}}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 2\tabcolsep) * \real{0.4483}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 2\tabcolsep) * \real{0.5517}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Argument
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule()
\endhead
\texttt{FieldNames\_} & A character vector containing the field names of an input file. \\
\texttt{Specs\_ls} & A list of specifications for fields in the input file. \\
\texttt{FileName} & A string identifying the name of the file that the field names are from. This is used for writing error messages. \\
\bottomrule()
\end{longtable}

\hypertarget{details-54}{%
\subsubsection{Details}\label{details-54}}

The field names of input files can be used to encode more information than
the name itself. It can also encode the currency year for currency type data
and also if the values are in multiples (e.g.~thousands of dollars). For
currency type data it is mandatory that the currency year be specified so
that the data can be converted to base year currency values (e.g.~dollars in
base year dollars). The multiplier is optional, but needless to say, it can
only be applied to numeric data. The function returns a list with a component
for each field. Each component identifies the field name, year, multiplier,
and error status for the result of parsing the field name. If the field name
was parsed successfully, the error status is character(0). If the field name
was not successfully parsed, the error status contains an error message,
identifying the problem.

\hypertarget{value-54}{%
\subsubsection{Value}\label{value-54}}

A named list with one component for each field. Each component is a list
having 4 named components: Error, Name, Year, Multiplier. The Error
component has a value of character(0) if there are no errors or a character
vector of error messages if there are errors. The Name component is a string
with the name of the field. The Year component is a string with the year
component if the data type is currency or NA if the data type is not currency
or if the Year component has an invalid value. The Multiplier is a number if
the multiplier component is present and is valid. It is NA if there is no
multiplier component and NaN if the multiplier is invalid. Each component of
the list is named with the value of the Name component (i.e.~the field name
without the year and multiplier elements.)

\hypertarget{calls-54}{%
\subsubsection{Calls}\label{calls-54}}

getModelState

\hypertarget{parsemodelscript-parse-model-script.}{%
\subsection{\texorpdfstring{\texttt{parseModelScript}: Parse model script.}{parseModelScript: Parse model script.}}\label{parsemodelscript-parse-model-script.}}

\hypertarget{description-55}{%
\subsubsection{Description}\label{description-55}}

\texttt{parseModel} a visioneval framework control function that reads and
parses the model script to identify the sequence of module calls and the
associated call arguments.

\hypertarget{usage-55}{%
\subsubsection{Usage}\label{usage-55}}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{parseModelScript}\NormalTok{(}\AttributeTok{FilePath =} \StringTok{"run\_model.R"}\NormalTok{, }\AttributeTok{TestMode =} \ConstantTok{FALSE}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\hypertarget{arguments-50}{%
\subsubsection{Arguments}\label{arguments-50}}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 2\tabcolsep) * \real{0.4483}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 2\tabcolsep) * \real{0.5517}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Argument
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule()
\endhead
\texttt{FilePath} & A string identifying the relative or absolute path to the model run script is located. \\
\texttt{TestMode} & A logical identifying whether the function is to run in test mode. When in test mode the function returns the parsed script but does not change the model state or write results to the log. \\
\bottomrule()
\end{longtable}

\hypertarget{details-55}{%
\subsubsection{Details}\label{details-55}}

This function reads in the model run script and parses the script to
identify the sequence of module calls. It extracts each call to `runModule'
and identifies the values assigned to the function arguments. It creates a
list of the calls with their arguments in the order of the calls in the
script.

\hypertarget{value-55}{%
\subsubsection{Value}\label{value-55}}

A data frame containing information on the calls to `runModule' in the
order of the calls. Each row represents a module call in order. The columns
identify the `ModuleName', the `PackageName', and the `RunFor' value.

\hypertarget{calls-55}{%
\subsubsection{Calls}\label{calls-55}}

setModelState, writeLog

\hypertarget{parseunitsspec-parse-units-specification-into-components-and-add-to-specifications-list.}{%
\subsection{\texorpdfstring{\texttt{parseUnitsSpec}: Parse units specification into components and add to specifications list.}{parseUnitsSpec: Parse units specification into components and add to specifications list.}}\label{parseunitsspec-parse-units-specification-into-components-and-add-to-specifications-list.}}

\hypertarget{description-56}{%
\subsubsection{Description}\label{description-56}}

\texttt{parseUnitsSpec} a visioneval framework control function that parses the
UNITS attribute of a standard Inp, Get, or Set specification for a dataset to
identify the units name, multiplier, and year for currency data. Returns a
modified specifications list whose UNITS value is only the units name, and
includes a MULTIPLIER attribute and YEAR attribute.

\hypertarget{usage-56}{%
\subsubsection{Usage}\label{usage-56}}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{parseUnitsSpec}\NormalTok{(Spec\_ls, ComponentName)}
\end{Highlighting}
\end{Shaded}

\hypertarget{arguments-51}{%
\subsubsection{Arguments}\label{arguments-51}}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 2\tabcolsep) * \real{0.4483}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 2\tabcolsep) * \real{0.5517}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Argument
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule()
\endhead
\texttt{Spec\_ls} & A standard specifications list for a Inp, Get, or Set item. \\
\texttt{ComponentName} & A string that is the name of the specifications the the specification comes from (e.g.~``Inp'', ``Get'', ``Set). \\
\bottomrule()
\end{longtable}

\hypertarget{details-56}{%
\subsubsection{Details}\label{details-56}}

The UNITS component of a specifications list can encode information in
addition to the units name. This includes a value units multiplier and in
the case of currency values the year for the currency measurement. The
multiplier element can only be expressed in scientific notation where the
number before the `e' can only be 1. If the year element for a currency
specification is missing, it is replaced by the model base year which is
recorded in the model state file. If this is done, a WARN attribute is added
to the specifications list notifying the module developer that there is no
year element and the model base year will be used when the module is called.
The test module function reads this warning and writes it to the module test
log. This way the module developer is made aware of the situation so that it
may be corrected if necessary. The model user is not bothered by the warning.

\hypertarget{value-56}{%
\subsubsection{Value}\label{value-56}}

a list that is a standard specifications list with the addition of
a MULTIPLIER component and a YEAR component as well as a modification of the
UNIT component. The MULTIPLIER component can have the value of NA, a number,
or NaN. The value is NA if the multiplier is missing. It is a number if the
multiplier is a valid number. The value is NaN if the multiplier is not a
valid number. The YEAR component is a character string that is a 4-digit
representation of a year or NA if the component is not a proper year. If the
year component is missing from the UNITS specification for currency data,
the model base year is substituted. In that case, a WARN attribute is added
to the returned specifications list. This is read by the testModule function
and written to the module test log to notify the module developer. After the
UNITS component has been parsed and the YEAR and MULTIPLIER components
extracted, the UNITS component is modified to only be the units name.

\hypertarget{calls-56}{%
\subsubsection{Calls}\label{calls-56}}

getModelState

\hypertarget{processmoduleinputs-process-module-input-files}{%
\subsection{\texorpdfstring{\texttt{processModuleInputs}: Process module input files}{processModuleInputs: Process module input files}}\label{processmoduleinputs-process-module-input-files}}

\hypertarget{description-57}{%
\subsubsection{Description}\label{description-57}}

\texttt{processModuleInputs} a visioneval framework control function that
processes input files identified in a module's `Inp' specifications in
preparation for saving in the datastore.

\hypertarget{usage-57}{%
\subsubsection{Usage}\label{usage-57}}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{processModuleInputs}\NormalTok{(ModuleSpec\_ls, ModuleName, }\AttributeTok{Dir =} \StringTok{"inputs"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\hypertarget{arguments-52}{%
\subsubsection{Arguments}\label{arguments-52}}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 2\tabcolsep) * \real{0.4483}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 2\tabcolsep) * \real{0.5517}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Argument
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule()
\endhead
\texttt{ModuleSpec\_ls} & a list of module specifications that is consistent with the VisionEval requirements. \\
\texttt{ModuleName} & a string identifying the name of the module (used to document module in error messages). \\
\texttt{Dir} & a string identifying the relative path to the directory where the model inputs are contained. \\
\bottomrule()
\end{longtable}

\hypertarget{details-57}{%
\subsubsection{Details}\label{details-57}}

This function processes the input files identified in a module's `Inp'
specifications in preparation for saving the data in the datastore. Several
processes are carried out. The existence of each specified input file is
checked. Any file whose corresponding `GROUP' specification is `Year', is
checked to determine that it has `Year' and `Geo' columns. The entries in the
`Year' and `Geo' columns are checked to make sure they are complete and there
are no duplicates. Any file whose `GROUP' specification is `Global' or
`BaseYear' and whose `TABLE' specification is a geographic specification
other than `Region' is checked to determine if it has a `Geo' column and the
entries are checked for completeness. The data in each column are checked
against specifications to determine conformance. The function returns a list
which contains a list of error messages and a list of the data inputs. The
function also writes error messages and warnings to the log file.

\hypertarget{value-57}{%
\subsubsection{Value}\label{value-57}}

A list containing the results of the input processing. The list has
two components. The first (Errors) is a vector of identified file and data
errors. The second (Data) is a list containing the data in the input files
organized in the standard format for data exchange with the datastore.

\hypertarget{calls-57}{%
\subsubsection{Calls}\label{calls-57}}

checkDataConsistency, checkInputYearGeo, convertMagnitude, convertUnits, deflateCurrency, getModelState, initDataList, parseInputFieldNames, Types, writeLog

\hypertarget{processmodulespecs-process-module-specifications-to-expand-items-with-multiple-names.}{%
\subsection{\texorpdfstring{\texttt{processModuleSpecs}: Process module specifications to expand items with multiple names.}{processModuleSpecs: Process module specifications to expand items with multiple names.}}\label{processmodulespecs-process-module-specifications-to-expand-items-with-multiple-names.}}

\hypertarget{description-58}{%
\subsubsection{Description}\label{description-58}}

\texttt{processModuleSpecs} a visioneval framework control function that
processes a full module specifications list, expanding all elements in the
Inp, Get, and Set components by parsing the UNITS attributes and duplicating
every specification which has multiple values for the NAME attribute.

\hypertarget{usage-58}{%
\subsubsection{Usage}\label{usage-58}}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{processModuleSpecs}\NormalTok{(Spec\_ls)}
\end{Highlighting}
\end{Shaded}

\hypertarget{arguments-53}{%
\subsubsection{Arguments}\label{arguments-53}}

\begin{longtable}[]{@{}ll@{}}
\toprule()
Argument & Description \\
\midrule()
\endhead
\texttt{Spec\_ls} & A specifications list. \\
\bottomrule()
\end{longtable}

\hypertarget{details-58}{%
\subsubsection{Details}\label{details-58}}

This function process a module specification list. If any of the
specifications include multiple listings of data sets (i.e.~fields) in a
table, this function expands the listing to establish a separate
specification for each data set.

\hypertarget{value-58}{%
\subsubsection{Value}\label{value-58}}

A standard specifications list with expansion of the multiple item
specifications.

\hypertarget{calls-58}{%
\subsubsection{Calls}\label{calls-58}}

doProcessInpSpec, expandSpec, getModelState

\hypertarget{readgeography-read-geographic-specifications.}{%
\subsection{\texorpdfstring{\texttt{readGeography}: Read geographic specifications.}{readGeography: Read geographic specifications.}}\label{readgeography-read-geographic-specifications.}}

\hypertarget{description-59}{%
\subsubsection{Description}\label{description-59}}

\texttt{readGeography} a visioneval framework control function that reads the
geographic specifications file for the model.

\hypertarget{usage-59}{%
\subsubsection{Usage}\label{usage-59}}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{readGeography}\NormalTok{(}\AttributeTok{Dir =} \StringTok{"defs"}\NormalTok{, }\AttributeTok{GeoFile =} \StringTok{"geo.csv"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\hypertarget{arguments-54}{%
\subsubsection{Arguments}\label{arguments-54}}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 2\tabcolsep) * \real{0.4483}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 2\tabcolsep) * \real{0.5517}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Argument
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule()
\endhead
\texttt{Dir} & A string identifying the path to the geographic specifications file. Note: don't include the final separator in the path name `e.g.~not defs/'. \\
\texttt{GeoFile} & A string identifying the name of the geographic specifications file. This is a csv-formatted text file which contains columns named `Azone', `Bzone', `Czone', and `Marea'. The `Azone' column must have zone names in all rows. The `Bzone' and `Czone' columns can be unspecified (NA in all rows) or may have have unique names in every row. The `Marea' column (referring to metropolitan areas) identifies metropolitan areas corresponding to the most detailed level of specified geography (or `None' no metropolitan area occupies any portion of the zone. \\
\bottomrule()
\end{longtable}

\hypertarget{details-59}{%
\subsubsection{Details}\label{details-59}}

This function manages the reading and error checking of geographic
specifications for the model. It calls the checkGeography function to check
for errors in the specifications. The checkGeography function reads in the
file and checks for errors. It returns a list of any errors that are found
and a data frame containing the geographic specifications. If errors are
found, the functions writes the errors to a log file and stops model
execution. If there are no errors, the function adds the geographic in the
geographic specifications file, the errors are written to the log file and
execution stops. If no errors are found, the geographic specifications are
added to the model state file.

\hypertarget{value-59}{%
\subsubsection{Value}\label{value-59}}

The value TRUE is returned if the function is successful at reading
the file and the specifications are consistent. It stops if there are any
errors in the specifications. All of the identified errors are written to
the run log. A data frame containing the file entries is added to the
model state file as Geo\_df'.

\hypertarget{calls-59}{%
\subsubsection{Calls}\label{calls-59}}

checkGeography, setModelState, writeLog

\hypertarget{readmodelstate-reads-values-from-model-state-file.}{%
\subsection{\texorpdfstring{\texttt{readModelState}: Reads values from model state file.}{readModelState: Reads values from model state file.}}\label{readmodelstate-reads-values-from-model-state-file.}}

\hypertarget{description-60}{%
\subsubsection{Description}\label{description-60}}

\texttt{readModelState} a visioneval framework control function that reads
components of the file that saves a copy of the model state.

\hypertarget{usage-60}{%
\subsubsection{Usage}\label{usage-60}}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{readModelState}\NormalTok{(}\AttributeTok{Names\_ =} \StringTok{"All"}\NormalTok{, }\AttributeTok{FileName =} \StringTok{"ModelState.Rda"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\hypertarget{arguments-55}{%
\subsubsection{Arguments}\label{arguments-55}}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 2\tabcolsep) * \real{0.4483}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 2\tabcolsep) * \real{0.5517}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Argument
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule()
\endhead
\texttt{Names\_} & A string vector of the components to extract from the ModelState\_ls list. \\
\texttt{FileName} & A string vector with the full path name of the model state file. \\
\bottomrule()
\end{longtable}

\hypertarget{details-60}{%
\subsubsection{Details}\label{details-60}}

The model state is stored in a list (ModelState\_ls) that is also saved as a
file (ModelState.Rda) whenever the list is updated. This function reads the
contents of the ModelState.Rda file.

\hypertarget{value-60}{%
\subsubsection{Value}\label{value-60}}

A list containing the specified components from the model state file.

\hypertarget{calls-60}{%
\subsubsection{Calls}\label{calls-60}}

\hypertarget{setindatastore-save-the-data-sets-returned-by-a-module-in-the-datastore}{%
\subsection{\texorpdfstring{\texttt{setInDatastore}: Save the data sets returned by a module in the datastore}{setInDatastore: Save the data sets returned by a module in the datastore}}\label{setindatastore-save-the-data-sets-returned-by-a-module-in-the-datastore}}

\hypertarget{description-61}{%
\subsubsection{Description}\label{description-61}}

\texttt{setInDatastore} a visioneval framework control function saves to the
datastore the data returned in a standard list by a module.

\hypertarget{usage-61}{%
\subsubsection{Usage}\label{usage-61}}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{setInDatastore}\NormalTok{(Data\_ls, ModuleSpec\_ls, ModuleName, Year, }\AttributeTok{Geo =} \ConstantTok{NULL}\NormalTok{,}
  \AttributeTok{GeoIndex\_ls =} \ConstantTok{NULL}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\hypertarget{arguments-56}{%
\subsubsection{Arguments}\label{arguments-56}}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 2\tabcolsep) * \real{0.4483}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 2\tabcolsep) * \real{0.5517}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Argument
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule()
\endhead
\texttt{Data\_ls} & a list containing the data to be saved. The list is organized by group, table, and data set. \\
\texttt{ModuleSpec\_ls} & a list of module specifications that is consistent with the VisionEval requirements \\
\texttt{ModuleName} & a string identifying the name of the module (used to document the module creating the data in the datastore) \\
\texttt{Year} & a string identifying the model run year \\
\texttt{Geo} & a string identifying the name of the geographic area to get the data for. For example, if the module is specified to be run by Azone, then Geo would be the name of a particular Azone. \\
\texttt{GeoIndex\_ls} & a list of geographic indices used to determine the positions to extract from a dataset corresponding to the specified geography. \\
\bottomrule()
\end{longtable}

\hypertarget{details-61}{%
\subsubsection{Details}\label{details-61}}

This function saves to the datastore the data sets identified in a module's
`Set' specifications and included in the list returned by the module. If a
particular geographic area is identified, the data are saved to the positions
in the data sets in the datastore corresponding to the identified geographic
area.

\hypertarget{value-61}{%
\subsubsection{Value}\label{value-61}}

A logical value which is TRUE if the data are successfully saved to
the datastore.

\hypertarget{calls-61}{%
\subsubsection{Calls}\label{calls-61}}

checkTableExistence, convertMagnitude, convertUnits, createGeoIndex, deflateCurrency, getModelState, Types, writeLog

\hypertarget{setmodelstate-update-model-state.}{%
\subsection{\texorpdfstring{\texttt{setModelState}: Update model state.}{setModelState: Update model state.}}\label{setmodelstate-update-model-state.}}

\hypertarget{description-62}{%
\subsubsection{Description}\label{description-62}}

\texttt{setModelState} a visioneval framework control function that updates the
list that keeps track of the model state with list of components to update
and resaves in the model state file.

\hypertarget{usage-62}{%
\subsubsection{Usage}\label{usage-62}}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{setModelState}\NormalTok{(ChangeState\_ls, }\AttributeTok{FileName =} \StringTok{"ModelState.Rda"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\hypertarget{arguments-57}{%
\subsubsection{Arguments}\label{arguments-57}}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 2\tabcolsep) * \real{0.4483}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 2\tabcolsep) * \real{0.5517}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Argument
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule()
\endhead
\texttt{ChangeState\_ls} & A named list of components to change in ModelState\_ls \\
\texttt{FileName} & A string identifying the name of the file that contains the ModelState\_ls list. The default name is `ModelState.Rda'. \\
\bottomrule()
\end{longtable}

\hypertarget{details-62}{%
\subsubsection{Details}\label{details-62}}

Key variables that are important for managing the model run are stored in a
list (ModelState\_ls) that is in the global workspace and saved in the
`ModelState.Rda' file. This function updates entries in the model state list
with a supplied named list of values, and then saves the results in the file.

\hypertarget{value-62}{%
\subsubsection{Value}\label{value-62}}

TRUE if the model state list and file are changed.

\hypertarget{calls-62}{%
\subsubsection{Calls}\label{calls-62}}

getModelState

\hypertarget{simdatatransactions-create-simulation-of-datastore-transactions.}{%
\subsection{\texorpdfstring{\texttt{simDataTransactions}: Create simulation of datastore transactions.}{simDataTransactions: Create simulation of datastore transactions.}}\label{simdatatransactions-create-simulation-of-datastore-transactions.}}

\hypertarget{description-63}{%
\subsubsection{Description}\label{description-63}}

\texttt{simDataTransactions} a visioneval framework control function that loads
all module specifications in order (by run year) and creates a simulated
listing of the data which is in the datastore and the requests of data from
the datastore and checks whether tables will be present to put datasets in
and that datasets will be present that data is to be retrieved from.

\hypertarget{usage-63}{%
\subsubsection{Usage}\label{usage-63}}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{simDataTransactions}\NormalTok{(AllSpecs\_ls)}
\end{Highlighting}
\end{Shaded}

\hypertarget{arguments-58}{%
\subsubsection{Arguments}\label{arguments-58}}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 2\tabcolsep) * \real{0.4483}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 2\tabcolsep) * \real{0.5517}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Argument
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule()
\endhead
\texttt{AllSpecs\_ls} & A list containing the processed specifications of all of the modules run by model script in the order that the modules are called with duplicated module calls removed. Information about each module call is a component of the list in the order of the module calls. Each component is composed of 3 components: `ModuleName' contains the name of the module, `PackageName' contains the name of the package the module is in, and `Specs' contains the processed specifications of the module. The `Get' specification component includes the `Get' specifications of all modules that are called by the module. \\
\bottomrule()
\end{longtable}

\hypertarget{details-63}{%
\subsubsection{Details}\label{details-63}}

This function creates a list of the datastore listings for the working
datastore and for all datastore references. The list includes a `Global'
component, in which `Global' references are simulated, components for each
model run year, in which `Year' references are simulated, and if the base
year is not one of the run years, a base year component, in which base year
references are simulated. For each model run year the function steps through
a data frame of module calls as produced by `parseModelScript', and loads and
processes the module specifications in order: adds `NewInpTable' references,
adds `Inp' dataset references, checks whether references to datasets
identified in `Get' specifications are present, adds `NewSetTable' references,
and adds `Set' dataset references. The function compiles a vector of error
and warning messages. Error messages are made if: 1) a `NewInpTable' or
`NewSetTable' specification of a module would create a new table for a table
that already exists; 2) a dataset identified by a `Get' specification would
not be present in the working datastore or any referenced datastores; 3) the
`Get' specifications for a dataset would not be consistent with the
specifications for the dataset in the datastore. The function compiles
warnings if a `Set' specification will cause existing data in the working
datastore to be overwritten. The function writes warning and error messages
to the log and stops program execution if there are any errors.

\hypertarget{value-63}{%
\subsubsection{Value}\label{value-63}}

There is no return value. The function has the side effect of
writing messages to the log and stops program execution if there are any
errors.

\hypertarget{calls-63}{%
\subsubsection{Calls}\label{calls-63}}

checkDataset, checkSpecConsistency, checkTableExistence, getDatasetAttr, getModelState, getModuleSpecs, getYears, processModuleSpecs, readModelState, writeLog

\hypertarget{sortgeotable-sort-a-data-frame-so-that-the-order-of-rows-matches-the-geography-in-a}{%
\subsection{\texorpdfstring{\texttt{sortGeoTable}: Sort a data frame so that the order of rows matches the geography in a}{sortGeoTable: Sort a data frame so that the order of rows matches the geography in a}}\label{sortgeotable-sort-a-data-frame-so-that-the-order-of-rows-matches-the-geography-in-a}}

datastore table.

\hypertarget{description-64}{%
\subsubsection{Description}\label{description-64}}

\texttt{sortGeoTable} a visioneval framework control function that returns a
data frame whose rows are sorted to match the geography in a specified table
in the datastore.

\hypertarget{usage-64}{%
\subsubsection{Usage}\label{usage-64}}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{sortGeoTable}\NormalTok{(Data\_df, Table, Group)}
\end{Highlighting}
\end{Shaded}

\hypertarget{arguments-59}{%
\subsubsection{Arguments}\label{arguments-59}}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 2\tabcolsep) * \real{0.4483}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 2\tabcolsep) * \real{0.5517}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Argument
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule()
\endhead
\texttt{Data\_df} & a data frame that contains a `Geo' field containing the names of the geographic areas to sort by and any number of additional data fields. \\
\texttt{Table} & a string for the table that is to be matched against. \\
\texttt{Group} & a string for the generic group that the table resides in. \\
\bottomrule()
\end{longtable}

\hypertarget{details-64}{%
\subsubsection{Details}\label{details-64}}

This function sorts the rows of a data frame that the `Geo' field in the
data frame matches the corresponding geography names in the specified table
in the datastore. The function returns the sorted table.

\hypertarget{value-64}{%
\subsubsection{Value}\label{value-64}}

The data frame which has been sorted to match the order of geography
in the specified table in the datastore.

\hypertarget{calls-64}{%
\subsubsection{Calls}\label{calls-64}}

\hypertarget{specrequirements-list-basic-module-specifications-to-check-for-correctness}{%
\subsection{\texorpdfstring{\texttt{SpecRequirements}: List basic module specifications to check for correctness}{SpecRequirements: List basic module specifications to check for correctness}}\label{specrequirements-list-basic-module-specifications-to-check-for-correctness}}

\hypertarget{description-65}{%
\subsubsection{Description}\label{description-65}}

\texttt{SpecRequirements} a visioneval framework control function that returns
a list of basic requirements for module specifications to be used for
checking correctness of specifications.

\hypertarget{usage-65}{%
\subsubsection{Usage}\label{usage-65}}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{SpecRequirements}\NormalTok{()}
\end{Highlighting}
\end{Shaded}

\hypertarget{details-65}{%
\subsubsection{Details}\label{details-65}}

This function returns a list of the basic requirements for module
specifications. The main components of the list are the components of module
specifications: RunBy, NewInpTable, NewSetTable, Inp, Get, Set. For each
item of each module specifications component, the list identifies the
required data type of the attribute entry and the allowed values for the
attribute entry.

\hypertarget{value-65}{%
\subsubsection{Value}\label{value-65}}

A list comprised of six named components: RunBy, NewInpTable,
NewSetTable, Inp, Get, Set. Each main component is a list that has a
component for each specification item that has values to be checked. For each
such item there is a list having two components: ValueType and ValuesAllowed.
The ValueType component identifies the data type that the data entry for the
item must have (e.g.~character, integer). The ValuesAllowed item identifies
what values the item may have.

\hypertarget{calls-65}{%
\subsubsection{Calls}\label{calls-65}}

\hypertarget{types-returns-a-list-of-returns-a-list-of-recognized-data-types-the-units-for-each}{%
\subsection{\texorpdfstring{\texttt{Types}: Returns a list of returns a list of recognized data types, the units for each}{Types: Returns a list of returns a list of recognized data types, the units for each}}\label{types-returns-a-list-of-returns-a-list-of-recognized-data-types-the-units-for-each}}

type, and storage mode of each type.

\hypertarget{description-66}{%
\subsubsection{Description}\label{description-66}}

\texttt{Types} a visioneval framework control function that returns a list of
returns a list of recognized data types, the units for each type, and storage
mode of each type.

\hypertarget{usage-66}{%
\subsubsection{Usage}\label{usage-66}}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{Types}\NormalTok{()}
\end{Highlighting}
\end{Shaded}

\hypertarget{details-66}{%
\subsubsection{Details}\label{details-66}}

This function stores a listing of the dataset types recognized by the
visioneval framework, the units recognized for each type, and the storage
mode used for each type. Types include simple types (e.g.~integer, double,
character, logical) as well as complex types (e.g.~distance, time, mass). For
the complex types, units are specified as well. For example for the distance
type, allowed units are MI (miles), FT (feet), KM (kilometers), M (meters).
The listing includes conversion factors between units of each complex type.
The listing also contains the storage mode (i.e.~integer, double, character,
logical of each type. For simple types, the type and the storage mode are the
same).

\hypertarget{value-66}{%
\subsubsection{Value}\label{value-66}}

A list containing a component for each recognized type. Each
component lists the recognized units for the type and the storage mode. There
are currently 4 simple types and 10 complex type. The simple types are
integer, double, character and logical. The complex types are currency,
distance, area, mass, volume, time, speed, vehicle\_distance,
passenger\_distance, and payload\_distance.

\hypertarget{calls-66}{%
\subsubsection{Calls}\label{calls-66}}

\hypertarget{writelog-write-to-log.}{%
\subsection{\texorpdfstring{\texttt{writeLog}: Write to log.}{writeLog: Write to log.}}\label{writelog-write-to-log.}}

\hypertarget{description-67}{%
\subsubsection{Description}\label{description-67}}

\texttt{writeLog} a visioneval framework control function that writes a message
to the run log.

\hypertarget{usage-67}{%
\subsubsection{Usage}\label{usage-67}}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{writeLog}\NormalTok{(}\AttributeTok{Msg =} \StringTok{""}\NormalTok{, }\AttributeTok{Print =} \ConstantTok{FALSE}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\hypertarget{arguments-60}{%
\subsubsection{Arguments}\label{arguments-60}}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 2\tabcolsep) * \real{0.4483}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 2\tabcolsep) * \real{0.5517}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Argument
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule()
\endhead
\texttt{Msg} & A character string. \\
\texttt{Print} & logical (default: FALSE). If True Msg will be printed in additon to being added to log \\
\bottomrule()
\end{longtable}

\hypertarget{details-67}{%
\subsubsection{Details}\label{details-67}}

This function writes a message in the form of a string to the run log. It
logs the time as well as the message to the run log.

\hypertarget{value-67}{%
\subsubsection{Value}\label{value-67}}

TRUE if the message is written to the log uccessfully.
It appends the time and the message text to the run log.

\hypertarget{calls-67}{%
\subsubsection{Calls}\label{calls-67}}

getModelState

\hypertarget{writevenameregistry-writes-module-inp-and-set-specifications-to-the-visioneval-name-registry.}{%
\subsection{\texorpdfstring{\texttt{writeVENameRegistry}: Writes module Inp and Set specifications to the VisionEval name registry.}{writeVENameRegistry: Writes module Inp and Set specifications to the VisionEval name registry.}}\label{writevenameregistry-writes-module-inp-and-set-specifications-to-the-visioneval-name-registry.}}

\hypertarget{description-68}{%
\subsubsection{Description}\label{description-68}}

\texttt{writeVENameRegistry} a visioneval framework control function that
writes module Inp and Set specifications to the VisionEval name registry.

\hypertarget{usage-68}{%
\subsubsection{Usage}\label{usage-68}}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{writeVENameRegistry}\NormalTok{(ModuleName, PackageName, }\AttributeTok{NameRegistryDir =} \ConstantTok{NULL}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\hypertarget{arguments-61}{%
\subsubsection{Arguments}\label{arguments-61}}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 2\tabcolsep) * \real{0.4483}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 2\tabcolsep) * \real{0.5517}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Argument
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule()
\endhead
\texttt{ModuleName} & a string identifying the module name. \\
\texttt{PackageName} & a string identifying the package name. \\
\texttt{NameRegistryDir} & a string identifying the path to the directory where the name registry file is located. \\
\bottomrule()
\end{longtable}

\hypertarget{details-68}{%
\subsubsection{Details}\label{details-68}}

The VisionEval name registry (VENameRegistry.json) keeps track of the
dataset names created by all registered modules by reading in datasets
specified in the module Inp specifications or by returning calculated
datasets as specified in the module Set specifications. This functions adds
the Inp and Set specifications for a module to the registry. It removes any
existing entries for the module first.

\hypertarget{value-68}{%
\subsubsection{Value}\label{value-68}}

TRUE if successful. Has a side effect of updating the VisionEval
name registry.

\hypertarget{calls-68}{%
\subsubsection{Calls}\label{calls-68}}

getModuleSpecs, processModuleSpecs, readVENameRegistry

\hypertarget{appendix-j-visioneval-framework-datastore-functions}{%
\subsection{Appendix J: VisionEval Framework Datastore Functions}\label{appendix-j-visioneval-framework-datastore-functions}}

\hypertarget{initdataseth5-initialize-dataset-in-an-hdf5-h5-type-datastore-table.}{%
\subsection{\texorpdfstring{\texttt{initDatasetH5}: Initialize dataset in an HDF5 (H5) type datastore table.}{initDatasetH5: Initialize dataset in an HDF5 (H5) type datastore table.}}\label{initdataseth5-initialize-dataset-in-an-hdf5-h5-type-datastore-table.}}

\hypertarget{description-69}{%
\subsubsection{Description}\label{description-69}}

\texttt{initDatasetH5} a visioneval framework datastore connection function
that initializes a dataset in an HDF5 (H5) type datastore table.

\hypertarget{usage-69}{%
\subsubsection{Usage}\label{usage-69}}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{initDatasetH5}\NormalTok{(Spec\_ls, Group)}
\end{Highlighting}
\end{Shaded}

\hypertarget{arguments-62}{%
\subsubsection{Arguments}\label{arguments-62}}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 2\tabcolsep) * \real{0.4483}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 2\tabcolsep) * \real{0.5517}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Argument
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule()
\endhead
\texttt{Spec\_ls} & a list containing the standard module `Set' specifications described in the model system design documentation. \\
\texttt{Group} & a string representation of the name of the group the table is to be created in. \\
\bottomrule()
\end{longtable}

\hypertarget{details-69}{%
\subsubsection{Details}\label{details-69}}

This function initializes a dataset in an HDF5 (H5) type datastore table.

\hypertarget{value-69}{%
\subsubsection{Value}\label{value-69}}

TRUE if dataset is successfully initialized. If the dataset already
exists the function throws an error and writes an error message to the log.
Updates the model state file.

\hypertarget{calls-69}{%
\subsubsection{Calls}\label{calls-69}}

getModelState, listDatastoreH5, Types, writeLog

\hypertarget{initdatasetrd-initialize-dataset-in-an-rdata-rd-type-datastore-table.}{%
\subsection{\texorpdfstring{\texttt{initDatasetRD}: Initialize dataset in an RData (RD) type datastore table.}{initDatasetRD: Initialize dataset in an RData (RD) type datastore table.}}\label{initdatasetrd-initialize-dataset-in-an-rdata-rd-type-datastore-table.}}

\hypertarget{description-70}{%
\subsubsection{Description}\label{description-70}}

\texttt{initDatasetRD} a visioneval framework datastore connection function
initializes a dataset in an RData (RD) type datastore table.

\hypertarget{usage-70}{%
\subsubsection{Usage}\label{usage-70}}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{initDatasetRD}\NormalTok{(Spec\_ls, Group)}
\end{Highlighting}
\end{Shaded}

\hypertarget{arguments-63}{%
\subsubsection{Arguments}\label{arguments-63}}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 2\tabcolsep) * \real{0.4483}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 2\tabcolsep) * \real{0.5517}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Argument
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule()
\endhead
\texttt{Spec\_ls} & a list containing the standard module specifications described in the model system design documentation. \\
\texttt{Group} & a string representation of the name of the top-level subdirectory the table is to be created in (i.e.~either `Global' or the name of the year). \\
\bottomrule()
\end{longtable}

\hypertarget{details-70}{%
\subsubsection{Details}\label{details-70}}

This function initializes a dataset in an RData (RD) type datastore table.

\hypertarget{value-70}{%
\subsubsection{Value}\label{value-70}}

TRUE if dataset is successfully initialized. If the identified table
does not exist, the function throws an error.

\hypertarget{calls-70}{%
\subsubsection{Calls}\label{calls-70}}

getModelState, listDatastoreRD, Types, writeLog

\hypertarget{initdatastoreh5-initialize-datastore-for-an-hdf5-h5-type-datastore.}{%
\subsection{\texorpdfstring{\texttt{initDatastoreH5}: Initialize Datastore for an HDF5 (H5) type datastore.}{initDatastoreH5: Initialize Datastore for an HDF5 (H5) type datastore.}}\label{initdatastoreh5-initialize-datastore-for-an-hdf5-h5-type-datastore.}}

\hypertarget{description-71}{%
\subsubsection{Description}\label{description-71}}

\texttt{initDatastoreH5} a visioneval framework datastore connection function
that creates datastore with starting structure for an HDF5 (H5) type
datastore.

\hypertarget{usage-71}{%
\subsubsection{Usage}\label{usage-71}}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{initDatastoreH5}\NormalTok{()}
\end{Highlighting}
\end{Shaded}

\hypertarget{details-71}{%
\subsubsection{Details}\label{details-71}}

This function creates the datastore for the model run with the initial
structure for an HDF5 (H5) type datastore.

\hypertarget{value-71}{%
\subsubsection{Value}\label{value-71}}

TRUE if datastore initialization is successful. Calls the
listDatastore function which adds a listing of the datastore contents to the
model state file.

\hypertarget{calls-71}{%
\subsubsection{Calls}\label{calls-71}}

getModelState, listDatastoreH5

\hypertarget{initdatastorerd-initialize-datastore-for-an-rdata-rd-type-datastore.}{%
\subsection{\texorpdfstring{\texttt{initDatastoreRD}: Initialize Datastore for an RData (RD) type datastore.}{initDatastoreRD: Initialize Datastore for an RData (RD) type datastore.}}\label{initdatastorerd-initialize-datastore-for-an-rdata-rd-type-datastore.}}

\hypertarget{description-72}{%
\subsubsection{Description}\label{description-72}}

\texttt{initDatastoreRD} a visioneval framework datastore connection function
that creates a datastore with starting structure for an RData (RD) type
datastore.

\hypertarget{usage-72}{%
\subsubsection{Usage}\label{usage-72}}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{initDatastoreRD}\NormalTok{()}
\end{Highlighting}
\end{Shaded}

\hypertarget{details-72}{%
\subsubsection{Details}\label{details-72}}

This function creates the datastore for the model run with the initial
structure for an RData (RD) type datastore.

\hypertarget{value-72}{%
\subsubsection{Value}\label{value-72}}

TRUE if datastore initialization is successful. Calls the
listDatastore function which adds a listing of the datastore contents to the
model state file.

\hypertarget{calls-72}{%
\subsubsection{Calls}\label{calls-72}}

getModelState, getYears, listDatastoreRD, setModelState

\hypertarget{inittableh5-initialize-table-in-an-hdf5-h5-type-datastore.}{%
\subsection{\texorpdfstring{\texttt{initTableH5}: Initialize table in an HDF5 (H5) type datastore.}{initTableH5: Initialize table in an HDF5 (H5) type datastore.}}\label{inittableh5-initialize-table-in-an-hdf5-h5-type-datastore.}}

\hypertarget{description-73}{%
\subsubsection{Description}\label{description-73}}

\texttt{initTableH5} a visioneval framework datastore connection function that
initializes a table in an HDF5 (H5) type datastore.

\hypertarget{usage-73}{%
\subsubsection{Usage}\label{usage-73}}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{initTableH5}\NormalTok{(Table, Group, Length)}
\end{Highlighting}
\end{Shaded}

\hypertarget{arguments-64}{%
\subsubsection{Arguments}\label{arguments-64}}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 2\tabcolsep) * \real{0.4483}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 2\tabcolsep) * \real{0.5517}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Argument
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule()
\endhead
\texttt{Table} & a string identifying the name of the table to initialize. \\
\texttt{Group} & a string representation of the name of the group the table is to be created in. \\
\texttt{Length} & a number identifying the table length. \\
\bottomrule()
\end{longtable}

\hypertarget{details-73}{%
\subsubsection{Details}\label{details-73}}

This function initializes a table in an HDF5 (H5) type datastore.

\hypertarget{value-73}{%
\subsubsection{Value}\label{value-73}}

The value TRUE is returned if the function is successful at creating
the table. In addition, the listDatastore function is run to update the
inventory in the model state file. The function stops if the group in which
the table is to be placed does not exist in the datastore and a message is
written to the log.

\hypertarget{calls-73}{%
\subsubsection{Calls}\label{calls-73}}

getModelState, listDatastoreH5

\hypertarget{inittablerd-initialize-table-in-an-rdata-rd-type-datastore.}{%
\subsection{\texorpdfstring{\texttt{initTableRD}: Initialize table in an RData (RD) type datastore.}{initTableRD: Initialize table in an RData (RD) type datastore.}}\label{inittablerd-initialize-table-in-an-rdata-rd-type-datastore.}}

\hypertarget{description-74}{%
\subsubsection{Description}\label{description-74}}

\texttt{initTableRD} a visioneval framework datastore connection function
initializes a table in an RData (RD) type datastore.

\hypertarget{usage-74}{%
\subsubsection{Usage}\label{usage-74}}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{initTableRD}\NormalTok{(Table, Group, Length)}
\end{Highlighting}
\end{Shaded}

\hypertarget{arguments-65}{%
\subsubsection{Arguments}\label{arguments-65}}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 2\tabcolsep) * \real{0.4483}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 2\tabcolsep) * \real{0.5517}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Argument
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule()
\endhead
\texttt{Table} & a string identifying the name of the table to initialize. \\
\texttt{Group} & a string representation of the name of the top-level subdirectory the table is to be created in (i.e.~either `Global' or the name of the year). \\
\texttt{Length} & a number identifying the table length. \\
\bottomrule()
\end{longtable}

\hypertarget{details-74}{%
\subsubsection{Details}\label{details-74}}

This function initializes a table in an RData (RD) type datastore.

\hypertarget{value-74}{%
\subsubsection{Value}\label{value-74}}

The value TRUE is returned if the function is successful at creating
the table. In addition, the listDatastore function is run to update the
inventory in the model state file. The function stops if the group in which
the table is to be placed does not exist in the datastore and a message is
written to the log.

\hypertarget{calls-74}{%
\subsubsection{Calls}\label{calls-74}}

getModelState, listDatastoreRD

\hypertarget{listdatastoreh5-list-datastore-contents-for-an-hdf5-h5-type-datastore.}{%
\subsection{\texorpdfstring{\texttt{listDatastoreH5}: List datastore contents for an HDF5 (H5) type datastore.}{listDatastoreH5: List datastore contents for an HDF5 (H5) type datastore.}}\label{listdatastoreh5-list-datastore-contents-for-an-hdf5-h5-type-datastore.}}

\hypertarget{description-75}{%
\subsubsection{Description}\label{description-75}}

\texttt{listDatastoreH5} a visioneval framework datastore connection function
that lists the contents of an HDF5 (H5) type datastore.

\hypertarget{usage-75}{%
\subsubsection{Usage}\label{usage-75}}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{listDatastoreH5}\NormalTok{()}
\end{Highlighting}
\end{Shaded}

\hypertarget{details-75}{%
\subsubsection{Details}\label{details-75}}

This function lists the contents of a datastore for an HDF5 (H5) type
datastore.

\hypertarget{value-75}{%
\subsubsection{Value}\label{value-75}}

TRUE if the listing is successfully read from the datastore and
written to the model state file.

\hypertarget{calls-75}{%
\subsubsection{Calls}\label{calls-75}}

getModelState, setModelState

\hypertarget{listdatastorerd-list-datastore-contents-for-an-rdata-rd-type-datastore.}{%
\subsection{\texorpdfstring{\texttt{listDatastoreRD}: List datastore contents for an RData (RD) type datastore.}{listDatastoreRD: List datastore contents for an RData (RD) type datastore.}}\label{listdatastorerd-list-datastore-contents-for-an-rdata-rd-type-datastore.}}

\hypertarget{description-76}{%
\subsubsection{Description}\label{description-76}}

\texttt{listDatastoreRD} a visioneval framework datastore connection function
that lists the contents of an RData (RD) type datastore.

\hypertarget{usage-76}{%
\subsubsection{Usage}\label{usage-76}}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{listDatastoreRD}\NormalTok{(}\AttributeTok{DataListing\_ls =} \ConstantTok{NULL}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\hypertarget{arguments-66}{%
\subsubsection{Arguments}\label{arguments-66}}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 2\tabcolsep) * \real{0.4483}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 2\tabcolsep) * \real{0.5517}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Argument
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule()
\endhead
\texttt{DataListing\_ls} & a list containing named elements describing a new data item being added to the datastore listing and the model state file. The list components are: group - the name of the group (path) the item is being added to; name - the name of the data item (directory or dataset); groupname - the full path to the data item; attributes - a list containing the named attributes of the data item. \\
\bottomrule()
\end{longtable}

\hypertarget{details-76}{%
\subsubsection{Details}\label{details-76}}

This function lists the contents of a datastore for an RData (RD) type
datastore.

\hypertarget{value-76}{%
\subsubsection{Value}\label{value-76}}

TRUE if the listing is successfully read from the datastore and
written to the model state file.

\hypertarget{calls-76}{%
\subsubsection{Calls}\label{calls-76}}

getModelState, readModelState, setModelState

\hypertarget{readfromtableh5-read-from-an-hdf5-h5-type-datastore-table.}{%
\subsection{\texorpdfstring{\texttt{readFromTableH5}: Read from an HDF5 (H5) type datastore table.}{readFromTableH5: Read from an HDF5 (H5) type datastore table.}}\label{readfromtableh5-read-from-an-hdf5-h5-type-datastore-table.}}

\hypertarget{description-77}{%
\subsubsection{Description}\label{description-77}}

\texttt{readFromTableH5} a visioneval framework datastore connection function
that reads a dataset from an HDF5 (H5) type datastore table.

\hypertarget{usage-77}{%
\subsubsection{Usage}\label{usage-77}}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{readFromTableH5}\NormalTok{(Name, Table, Group, }\AttributeTok{File =} \ConstantTok{NULL}\NormalTok{, }\AttributeTok{Index =} \ConstantTok{NULL}\NormalTok{,}
  \AttributeTok{ReadAttr =} \ConstantTok{FALSE}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\hypertarget{arguments-67}{%
\subsubsection{Arguments}\label{arguments-67}}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 2\tabcolsep) * \real{0.4483}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 2\tabcolsep) * \real{0.5517}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Argument
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule()
\endhead
\texttt{Name} & A string identifying the name of the dataset to be read from. \\
\texttt{Table} & A string identifying the complete name of the table where the dataset is located. \\
\texttt{Group} & a string representation of the name of the datastore group the data is to be read from. \\
\texttt{File} & a string representation of the file path of the datastore \\
\texttt{Index} & A numeric vector identifying the positions the data is to be written to. NULL if the entire dataset is to be read. \\
\texttt{ReadAttr} & A logical identifying whether to return the attributes of the stored dataset. The default value is FALSE. \\
\bottomrule()
\end{longtable}

\hypertarget{details-77}{%
\subsubsection{Details}\label{details-77}}

This function reads a dataset from an HDF5 (H5) type datastore table.

\hypertarget{value-77}{%
\subsubsection{Value}\label{value-77}}

A vector of the same type stored in the datastore and specified in
the TYPE attribute.

\hypertarget{calls-77}{%
\subsubsection{Calls}\label{calls-77}}

checkDataset, getModelState, readModelState, writeLog

\hypertarget{readfromtablerd-read-from-an-rdata-rd-type-datastore-table.}{%
\subsection{\texorpdfstring{\texttt{readFromTableRD}: Read from an RData (RD) type datastore table.}{readFromTableRD: Read from an RData (RD) type datastore table.}}\label{readfromtablerd-read-from-an-rdata-rd-type-datastore-table.}}

\hypertarget{description-78}{%
\subsubsection{Description}\label{description-78}}

\texttt{readFromTableRD} a visioneval framework datastore connection function
that reads a dataset from an RData (RD) type datastore table.

\hypertarget{usage-78}{%
\subsubsection{Usage}\label{usage-78}}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{readFromTableRD}\NormalTok{(Name, Table, Group, }\AttributeTok{DstoreLoc =} \ConstantTok{NULL}\NormalTok{, }\AttributeTok{Index =} \ConstantTok{NULL}\NormalTok{,}
  \AttributeTok{ReadAttr =} \ConstantTok{FALSE}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\hypertarget{arguments-68}{%
\subsubsection{Arguments}\label{arguments-68}}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 2\tabcolsep) * \real{0.4483}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 2\tabcolsep) * \real{0.5517}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Argument
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule()
\endhead
\texttt{Name} & A string identifying the name of the dataset to be read from. \\
\texttt{Table} & A string identifying the complete name of the table where the dataset is located. \\
\texttt{Group} & a string representation of the name of the datastore group the data is to be read from. \\
\texttt{DstoreLoc} & a string representation of the file path of the datastore. NULL if the datastore is the current directory. \\
\texttt{Index} & A numeric vector identifying the positions the data is to be written to. NULL if the entire dataset is to be read. \\
\texttt{ReadAttr} & A logical identifying whether to return the attributes of the stored dataset. The default value is FALSE. \\
\bottomrule()
\end{longtable}

\hypertarget{details-78}{%
\subsubsection{Details}\label{details-78}}

This function reads a dataset from an RData (RD) type datastore table.

\hypertarget{value-78}{%
\subsubsection{Value}\label{value-78}}

A vector of the same type stored in the datastore and specified in
the TYPE attribute.

\hypertarget{calls-78}{%
\subsubsection{Calls}\label{calls-78}}

checkDataset, getModelState, readModelState, writeLog

\hypertarget{writetotableh5-write-to-an-rdata-rd-type-datastore-table.}{%
\subsection{\texorpdfstring{\texttt{writeToTableH5}: Write to an RData (RD) type datastore table.}{writeToTableH5: Write to an RData (RD) type datastore table.}}\label{writetotableh5-write-to-an-rdata-rd-type-datastore-table.}}

\hypertarget{description-79}{%
\subsubsection{Description}\label{description-79}}

\texttt{writeToTableRD} a visioneval framework datastore connection function
that writes data to an RData (RD) type datastore table and initializes
dataset if needed.

\hypertarget{usage-79}{%
\subsubsection{Usage}\label{usage-79}}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{writeToTableH5}\NormalTok{(Data\_, Spec\_ls, Group, }\AttributeTok{Index =} \ConstantTok{NULL}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\hypertarget{arguments-69}{%
\subsubsection{Arguments}\label{arguments-69}}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 2\tabcolsep) * \real{0.4483}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 2\tabcolsep) * \real{0.5517}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Argument
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule()
\endhead
\texttt{Data\_} & A vector of data to be written. \\
\texttt{Spec\_ls} & a list containing the standard module `Set' specifications described in the model system design documentation. \\
\texttt{Group} & a string representation of the name of the datastore group the data is to be written to. \\
\texttt{Index} & A numeric vector identifying the positions the data is to be written to. \\
\bottomrule()
\end{longtable}

\hypertarget{details-79}{%
\subsubsection{Details}\label{details-79}}

This function writes a dataset file to an RData (RD) type datastore table. It
initializes the dataset if the dataset does not exist. Enables data to be
written to specific location indexes in the dataset.

\hypertarget{value-79}{%
\subsubsection{Value}\label{value-79}}

TRUE if data is sucessfully written. Updates model state file.

\hypertarget{calls-79}{%
\subsubsection{Calls}\label{calls-79}}

checkDataset, getModelState, initDatasetH5, listDatastoreH5, writeLog

\hypertarget{writetotablerd-write-to-an-rdata-rd-type-datastore-table.}{%
\subsection{\texorpdfstring{\texttt{writeToTableRD}: Write to an RData (RD) type datastore table.}{writeToTableRD: Write to an RData (RD) type datastore table.}}\label{writetotablerd-write-to-an-rdata-rd-type-datastore-table.}}

\hypertarget{description-80}{%
\subsubsection{Description}\label{description-80}}

\texttt{writeToTableRD} a visioneval framework datastore connection function
that writes data to an RData (RD) type datastore table and initializes
dataset if needed.

\hypertarget{usage-80}{%
\subsubsection{Usage}\label{usage-80}}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{writeToTableRD}\NormalTok{(Data\_, Spec\_ls, Group, }\AttributeTok{Index =} \ConstantTok{NULL}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\hypertarget{arguments-70}{%
\subsubsection{Arguments}\label{arguments-70}}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 2\tabcolsep) * \real{0.4483}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 2\tabcolsep) * \real{0.5517}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Argument
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule()
\endhead
\texttt{Data\_} & A vector of data to be written. \\
\texttt{Spec\_ls} & a list containing the standard module `Set' specifications described in the model system design documentation. \\
\texttt{Group} & a string representation of the name of the datastore group the data is to be written to. \\
\texttt{Index} & A numeric vector identifying the positions the data is to be written to. \\
\bottomrule()
\end{longtable}

\hypertarget{details-80}{%
\subsubsection{Details}\label{details-80}}

This function writes a dataset file to an RData (RD) type datastore table. It
initializes the dataset if the dataset does not exist. Enables data to be
written to specific location indexes in the dataset.

\hypertarget{value-80}{%
\subsubsection{Value}\label{value-80}}

TRUE if data is sucessfully written.

\hypertarget{calls-80}{%
\subsubsection{Calls}\label{calls-80}}

checkDataset, getModelState, listDatastoreRD, readFromTableRD, Types, writeLog

\hypertarget{ve-popsim}{%
\chapter{Customizable household data using Population Sim}\label{ve-popsim}}

\hypertarget{introduction-2}{%
\section{Introduction}\label{introduction-2}}

This documentation describes the VESimHouseholds package. The purpose is to orient users to the mechanics of the VESimHouseholds package and thoroughly describe its inputs and outputs so that users can implement the package using customizable local data.

One of the basic components of VisionEval is the household population being modeled. This population contains key demographic attributes for transportation modeling, such as age, income, employment, and household composition (i.e., the types of persons in each household). A common challenge in transportation modeling is high-dimensional data. As variables are added, the database grows exponentially. Since VisionEval is intended to be lightweight, it only includes a minimum of demographic features associated with key travel behavior parameters. However, it is important to empower users to incorporate additional variables specific to their needs.

This guide is divided into two main sections:

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  \textbf{VESimHouseholds} package inputs, mechanics, and outputs are described. Within this section is a description of the individual modules used in the package and their contribution to the \protect\hyperlink{VESimHouseholds-output}{final household population data}. The specific modules are:

  \begin{itemize}
  \tightlist
  \item
    \protect\hyperlink{CreateEstimationDatasets}{CreateEstimationDatasets}
  \item
    \protect\hyperlink{CreateHouseholds}{CreateHouseholds}
  \item
    \protect\hyperlink{PredictWorkers}{PredictWorkers}
  \item
    \url{AssignLifeCycle}
  \item
    \protect\hyperlink{PredictIncome}{PredictIncome}
  \end{itemize}
\item
  \protect\hyperlink{PopulationSim}{\textbf{PopulationSim}} inputs, mechanics, and outputs are described for use as a third-party population synthesizer.
\end{enumerate}

\textbf{Note}: It is important to clarify that population data and household characteristics appended to the population are for post-processing analysis, and do not introduce changes to travel behavior models. Additionally, the conversion tool from external population synthesis to be developed will not forecast shifts in demographic characteristics (aside from age, income, employment status).

\hypertarget{a-primer-on-population-synthesis}{%
\section{A Primer on Population Synthesis}\label{a-primer-on-population-synthesis}}

Population synthesis is essentially the process of expanding by replication a small disaggregated data sample (i.e., one record per household), called ``seed data'', to match aggregated total population counts. The challenge is that the sample data is almost never a perfectly proportional sample. When the sample data is expanded to match one variable, it typically will cause the other variables to become poorly fit. To mitigate this, population synthesis iteratively fits each variable until the total error is minimized. An additional challenge in population synthesis is in handling multilevel data with both individual persons and households that contain persons. Matching all target total counts with that many degrees of freedom can be difficult and computationally intensive.

\hypertarget{vesimhouseholds-package}{%
\section{VESimHouseholds Package}\label{vesimhouseholds-package}}

The VESimHouseholds package contains five primary modules:

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  \textbf{CreateEstimationDatasets.R} - Formats Public Use Microdata Sample (PUMS) data from comma separate values (CSV) file into the datastore
\item
  \textbf{CreateHouseholds.R} - Synthesizes the base household population data by age group
\item
  \textbf{PredictWorkers.R} - Estimates the number of workers in each household by age group
\item
  \textbf{AssignLifeCycle.R} - Assigns household life cycle variable (LIF\_CYC) as defined by 2009 NHTS
\item
  \textbf{PredictIncome.R} - Estimates the household income for each household
\end{enumerate}

These individual modules are run sequentially, starting with CreateHouseholds, each adding relevant information to the household population datastore. Some modules have pre-requisite dependencies, such as the AssignLifeCycle module, which requires the number of household workers to be assigned before it can be run in order to determine retired persons. Below is a general summary table of inputs and outputs for each model An external population synthesizer should be able to match these output formats.

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.0878}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.4527}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.3480}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1115}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Module
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Input files
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Output to Datastore
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Output to Package Data
\end{minipage} \\
\midrule()
\endhead
CreateEstimationDatasets & VESimHouseholds/inst/extdata/pums\_household.csvVESimHouseholds/inst/extdata/pums\_persons.csv & & Hh\_df \\
CreateHouseholds & your\_model/inputs/azone\_hh\_pop\_by\_age.csvyour\_model/inputs/azone\_hhsize\_targets.csvyour\_model/inputs/azone\_gq\_pop\_by\_age.csv & Azone Marea Age0to14 Age15to19 Age20to29 Age30to54 Age55to64 Age65Plus HhSize HhType NumHh NumGq HhId & HtProb\_HtAp PropHhWkr\_HtAg \\
PredictWorkers & your\_model/inputs/azone\_relative\_employment.csv & Wkr15to19 Wkr20to29 Wkr30to54 Wkr55to64 Wkr65Plus Workers NumWkr & \\
AssignLifeCycle & None & LifeCycle & \\
PredictIncome & your\_model/inputs/azone\_per\_cap\_inc.csv & Income & \\
\bottomrule()
\end{longtable}

With the exception of CreateEstimationDatasets.R, all modules save the resulting data as a .Rda file in the model directory's Datastore. The CreateEstimationDatasets converts default microdata (e.g., PUMS) into an R dataframe for use as seed data. Any data that is stored within the package and not your model will need to have the estimation scripts run to generate the data and re-built and installed into the VisionEval runtime library, see the \protect\hyperlink{ve-buildprocess}{Module Build Process} for more details.

The following subsections are taken from the module documentation and describe how each module functions in more detail individually.

\hypertarget{CreateEstimationDatasets}{%
\subsection{CreateEstimationDatasets Module}\label{CreateEstimationDatasets}}

This module does not model anything per se, but instead reads in the default PUMS data and converts it to an R dataframe and stores it in the VESimHouseholds package data folder. These data in the Hh\_df dataframe become the base seed data from which the household populations are synthesized. To change the source (use local data rather than the default data) of the PUMS seed data, see the \protect\hyperlink{ve-buildprocess}{Module Build Process} for more details.

\hypertarget{user-inputs}{%
\subsubsection{User Inputs}\label{user-inputs}}

This module reads in the two microdata sample files based on PUMS data:

\begin{itemize}
\tightlist
\item
  \texttt{VESimHouseholds/inst/extdata/pums\_household.csv}
\item
  \texttt{VESimHouseholds/inst/extdata/pums\_persons.csv}
\end{itemize}

\hypertarget{datasets-produced-by-the-module}{%
\subsubsection{Datasets Produced by the Module}\label{datasets-produced-by-the-module}}

The CreateEstimationDatasets will store an R dataframe in the package, an example of this dataframe is shown below:

\hypertarget{hh_df.rda}{%
\paragraph{Hh\_df.Rda:}\label{hh_df.rda}}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 32\tabcolsep) * \real{0.0559}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 32\tabcolsep) * \real{0.0615}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 32\tabcolsep) * \real{0.0615}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 32\tabcolsep) * \real{0.0615}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 32\tabcolsep) * \real{0.0615}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 32\tabcolsep) * \real{0.0615}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 32\tabcolsep) * \real{0.0615}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 32\tabcolsep) * \real{0.0615}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 32\tabcolsep) * \real{0.0615}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 32\tabcolsep) * \real{0.0615}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 32\tabcolsep) * \real{0.0615}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 32\tabcolsep) * \real{0.0782}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 32\tabcolsep) * \real{0.0615}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 32\tabcolsep) * \real{0.0447}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 32\tabcolsep) * \real{0.0447}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 32\tabcolsep) * \real{0.0559}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 32\tabcolsep) * \real{0.0447}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Age0to14
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Age15to19
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Age20to29
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Age30to54
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Age55to64
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Age65Plus
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Wkr15to19
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Wkr20to29
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Wkr30to54
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Wkr55to64
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Wkr65Plus
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
AvePerCapInc
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
HouseType
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Income
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
HhSize
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
HhWeight
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
HhType
\end{minipage} \\
\midrule()
\endhead
0 & 0 & 0 & 0 & 1 & 1 & 0 & 0 & 0 & 0 & 0 & 22631.16 & SF & 26000 & 2 & 27 & Reg \\
0 & 0 & 0 & 1 & 0 & 1 & 0 & 0 & 1 & 0 & 0 & 18760.54 & SF & 32600 & 2 & 6 & Reg \\
1 & 1 & 0 & 2 & 0 & 0 & 0 & 0 & 2 & 0 & 0 & 29837.15 & SF & 75000 & 4 & 27 & Reg \\
2 & 1 & 1 & 2 & 0 & 1 & 1 & 1 & 2 & 0 & 0 & 18960.64 & SF & 90000 & 7 & 15 & Reg \\
0 & 0 & 0 & 0 & 1 & 1 & 0 & 0 & 0 & 0 & 0 & 22401.39 & SF & 51800 & 2 & 6 & Reg \\
4 & 0 & 0 & 2 & 0 & 0 & 0 & 0 & 2 & 0 & 0 & 26006.66 & SF & 132400 & 6 & 21 & Reg \\
\bottomrule()
\end{longtable}

The field value data types are as follows:

\begin{itemize}
\tightlist
\item
  Age\#to\# - Integer
\item
  Wkr\#to\# - Integer
\item
  AvePerCapInc - Integer
\item
  HouseType Income - Factor (SF = Single Family, MF = Multi-Family, OTH = Other)
\item
  HhSize - Integer
\item
  HhWeight - Integer
\item
  HhType - Character (Reg = Regular, gq = group quarters)
\end{itemize}

\textbf{Note}: The HhType field in this table is \textbf{NOT} the same as HhType in subsequent modules.

\hypertarget{createhouseholds-module}{%
\subsection{CreateHouseholds Module}\label{createhouseholds-module}}

This module creates a \emph{Household} table in the datastore and populates the table with datasets characterizing simulated households. Each entry represents a simulated household. Household datasets are created for the numbers of persons in each of 6 age groups (0-14, 15-19, 20-29, 30-54, 55-64, and 65+) and the total number of persons in the household. Two types of households are created:

\begin{itemize}
\tightlist
\item
  \emph{regular} households (i.e., not persons in group quarters) and
\item
  \emph{group quarters} households (i.e., persons in group quarters such as college dormitories or institutional settings).
\end{itemize}

Households are created from Azone level demographic forecasts of the number of persons in each of the 6 age groups for regular and group quarters population. The module tabulates the number of households created in each Azone.

\hypertarget{model-parameter-estimation}{%
\subsubsection{Model Parameter Estimation}\label{model-parameter-estimation}}

The base year household model has one parameter object, a probability matrix that a person in each age group is in a household types. This probability matrix is created from PUMS data that is compiled into a R dataframe (Hh\_df) when the VESimHouseholds package is built. The data that is supplied with the VESimHouseholds package downloaded from the official VisionEval repository may be used, but it is preferrable to use data for the region being modeled. How this is done is explained in the \protect\hyperlink{ve-buildprocess}{Module Build Process}.

Each household is composed of one or more persons, each unique combination of persons defines a household type. Household type is denoted by the number of persons in each age group in the household. For example, a household that has 2 persons of age 0-14 and 2 persons of age 20-29 would be designated as type \emph{2-0-2-0-0-0}. The numbers represent the number of persons in each of the age groups in the order listed above with the hyphens separating the age groups. An example table can be conceptualized as in the example below. The data are at the household level, meaning that there is one record per household, not per person. The person-level attributes (i.e., age group) are effectively stored at the household level as frequencies.

A generic example table of household frequency table is shown below:

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 14\tabcolsep) * \real{0.1461}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 14\tabcolsep) * \real{0.1124}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 14\tabcolsep) * \real{0.1236}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 14\tabcolsep) * \real{0.1236}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 14\tabcolsep) * \real{0.1236}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 14\tabcolsep) * \real{0.1236}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 14\tabcolsep) * \real{0.1236}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 14\tabcolsep) * \real{0.1236}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
HhType
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Age0to14
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Age15to19
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Age20to29
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Age30to54
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Age55to64
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Age65Plus
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Frequency
\end{minipage} \\
\midrule()
\endhead
0-0-0-0-2-0 & 0 & 0 & 0 & 0 & 2 & 0 & 250 \\
1-0-1-1-0-0 & 1 & 0 & 1 & 1 & 0 & 0 & 312 \\
0-0-0-3-0-0 & 0 & 0 & 0 & 3 & 0 & 0 & 50 \\
2-1-0-2-0-0 & 2 & 1 & 0 & 2 & 0 & 0 & 120 \\
0-0-0-0-0-2 & 0 & 0 & 0 & 0 & 0 & 2 & 210 \\
0-0-0-0-2-0 & 0 & 0 & 0 & 0 & 2 & 0 & 189 \\
\bottomrule()
\end{longtable}

The household probability matrix is created by summing the number of persons each each age group and each of the household types using the household weights in the PUMS data. The probability that a person in each age group would be in each of the household type is the number of persons in the household type divided by the total number of persons in the age group. These household types comprise the rows of the probability matrix. The columns of the matrix correspond to the 6 age groups. Each column of the matrix sums to 1.

No model parameters are used to create \emph{group quarters} households because those households are simply composed of single persons.

\hypertarget{how-the-module-works}{%
\subsubsection{How the Module Works}\label{how-the-module-works}}

For \emph{regular} households, the module uses the matrix of probabilities that a person in each age group is present in the most frequently observed household types along with a forecast of number of persons in each age group to synthesize a likely set of regular households. The module starts by assigning the forecast population by age group to household types using the probability matrix that has been estimated.

An example household age group probability matrix might look like:

\hypertarget{htprob_htap.rda}{%
\paragraph{HtProb\_HtAp.Rda}\label{htprob_htap.rda}}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 14\tabcolsep) * \real{0.1573}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 14\tabcolsep) * \real{0.1124}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 14\tabcolsep) * \real{0.1236}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 14\tabcolsep) * \real{0.1236}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 14\tabcolsep) * \real{0.1236}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 14\tabcolsep) * \real{0.1236}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 14\tabcolsep) * \real{0.1236}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 14\tabcolsep) * \real{0.1124}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Age0to14
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Age15to19
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Age20to29
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Age30to54
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Age55to64
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Age65Plus
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
HhWeight
\end{minipage} \\
\midrule()
\endhead
1-1-1-0-0-0 & 0.290 & 0.910 & 0.472 & 0 & 0 & 0 & 123 \\
1-1-1-1-0-0 & 0.142 & 0.444 & 0.230 & 0.079 & 0 & 0 & 456 \\
1-1-1-1-0-1 & 0.009 & 0.029 & 0.015 & 0.005 & 0 & 0.015 & 789 \\
1-1-1-1-1-0 & 0.024 & 0.076 & 0.039 & 0.013 & 0.056 & 0 & 987 \\
1-1-1-2-0-0 & 0.216 & 0.677 & 0.351 & 0.239 & 0 & 0 & 654 \\
1-1-1-2-0-2 & 0.009 & 0.027 & 0.014 & 0.009 & 0 & 0.028 & 321 \\
Sum Product & 275.34 & 863.80 & 447.50 & 212.76 & 55.26 & 20.91 & \\
Target Total & 285 & 853 & 452 & 217 & 58 & 23 & 3330 \\
\bottomrule()
\end{longtable}

It then carries out the following interative process to create a set of households that is internally consistent and that matches (approximately) the optional inputs for household size and proportion of single-person households:

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\item
  For each household type, the number of households of the type is iteratively fitted to match the target totals for each age group. For example if 420 persons age 0-14 and 480 persons age 20-29 are assigned to household type \emph{2-0-2-0-0-0}, that implies either 210 or 240 households of that type. Where the number of households of the type implied by the persons assigned is not consistent as in this example, the mean of the implied number of households is used. In the example, this would be 225 households. This is the \emph{resolved} number of households. For all household types, the resolved number of households is compared to the maximum number of implied households (in this case 225 is compared to 240) if the ratio of these values differs from 1 in absolute terms by less than 0.001 for all household types, the iterative process ends.
\item
  If a household size target has been specified, the average household size for the resolved households is computed. The ratio of the target household size and the average household size for the resolved households is computed. The number of resolved households in household types having sizes greater than the target household size is multiplied by this ratio. For example, if target household size is 2.5 and average household size for the resolved households is 3, th number of household for household types having more than 2.5 persons (i.e.~3 or more persons) would be multiplied by \emph{2.5 / 3}.
\item
  If a target for the proportion of households that are 1-person households is set, the difference between the number of 1-person households that there should be and the number that have been assigned is calculated. That difference is added across all 1-person household types (e.g.~if the difference is 100, since there are 5 1-person household types, 20 is added to each of those types). The difference is substracted across all other household types.
\item
  Using the resolved number of households of each type (as adjusted to match household size and 1-person household targets), the number of persons in each age group in each household type is computed. Continuing with the example, 225 households in household type \emph{2-0-2-0-0-0} means that there must be 550 persons of age 0-14 and 550 persons of age 20-29 in that household type. This is called the \emph{resolved} population. An updated probability matrix is computed using the resolved population by housing type.
\item
  The difference between the total number of persons by age group in the resolved population and the forecast number of persons by age group is calculated and that difference is allocated to household types using the updated probability matrix. Then calculation returns to the first iteration step.
\end{enumerate}

After the iterations have been completed, the numbers of households by type are rounded to create whole integer number amounts. Then individual household records are created for each by replicating each household by the integer amount.

\hypertarget{user-inputs-1}{%
\subsubsection{User Inputs}\label{user-inputs-1}}

The VESimHouseholds module in VisionEval uses population synthesis to generate base data for households. Two types of data are used, disaggregated sample seed data to be expanded and the target totals

The disaggregated ``seed'' data are based on PUMS data and are embeded in the VESimHouseholds package in the following files: - \texttt{VESimHouseholds/inst/extdata/pums\_household.csv} - \texttt{VESimHouseholds/inst/extdata/pums\_persons.csv}

Modifying the seed data for local data requires downloading new data, replacing the old default data, and rebuilding the package (see \protect\hyperlink{ve-buildprocess}{Module Build Process} documentation). The target totals are stored in three separate files located in the model's input directory.

\begin{itemize}
\tightlist
\item
  \texttt{your\_model/inputs/azone\_hh\_pop\_by\_age.csv}
\item
  \texttt{your\_model/inputs/azone\_hhsize\_targets.csv}
\item
  \texttt{your\_model/inputs/azone\_gq\_pop\_by\_age.csv}
\end{itemize}

The population synthesis process will match any target totals that users specify in the model input folder, even if the seed data has not been updated. However, using non-local seed data may cause the synthesis process to take longer to converge and/or have different joint-distributions.

The following table(s) document each input file that must be provided in order for the module to run correctly. User input files are comma-separated values (CSV) formatted text files. Each row in the table(s) describes a field (column) in the input file. The table names and their meanings are as follows:

\begin{itemize}
\tightlist
\item
  \textbf{NAME} - The field (column) name in the input file. Note that if the `TYPE' is `currency' the field name must be followed by a period and the year that the currency is denominated in. For example if the NAME is `HHIncomePC' (household per capita income) and the input values are in 2010 dollars, the field name in the file must be `HHIncomePC.2010'. The framework uses the embedded date information to convert the currency into base year currency amounts. The user may also embed a magnitude indicator if inputs are in thousand, millions, etc. The VisionEval model system design and users guide should be consulted on how to do that.
\item
  \textbf{TYPE} - The data type. The framework uses the type to check units and inputs. The user can generally ignore this, but it is important to know whether the `TYPE' is `currency'
\item
  \textbf{UNITS} - The units that input values need to represent. Some data types have defined units that are represented as abbreviations or combinations of abbreviations. For example `MI/HR' means miles per hour. Many of these abbreviations are self evident, but the VisionEval model system design and users guide should be consulted.
\item
  \textbf{PROHIBIT} - Values that are prohibited. Values may not meet any of the listed conditions.
\item
  \textbf{ISELEMENTOF} - Categorical values that are permitted. Value must be one of the listed values.
\item
  \textbf{DESCRIPTION} - A description of the data.
\end{itemize}

\hypertarget{azone_hh_pop_by_age.csv-2}{%
\paragraph{azone\_hh\_pop\_by\_age.csv}\label{azone_hh_pop_by_age.csv-2}}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.0894}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.0650}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.0569}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.0813}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.1057}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.6016}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
NAME
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
TYPE
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
UNITS
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
PROHIBIT
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
ISELEMENTOF
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
DESCRIPTION
\end{minipage} \\
\midrule()
\endhead
Geo & & & & Azones & Must contain a record for each Azone and model run year. \\
Year & & & & & Must contain a record for each Azone and model run year. \\
Age0to14 & people & PRSN & NA, \textless{} 0 & & Household (non-group quarters) population in 0 to 14 year old age group \\
Age15to19 & people & PRSN & NA, \textless{} 0 & & Household (non-group quarters) population in 15 to 19 year old age group \\
Age20to29 & people & PRSN & NA, \textless{} 0 & & Household (non-group quarters) population in 20 to 29 year old age group \\
Age30to54 & people & PRSN & NA, \textless{} 0 & & Household (non-group quarters) population in 30 to 54 year old age group \\
Age55to64 & people & PRSN & NA, \textless{} 0 & & Household (non-group quarters) population in 55 to 64 year old age group \\
Age65Plus & people & PRSN & NA, \textless{} 0 & & Household (non-group quarters) population in 65 or older age group \\
\bottomrule()
\end{longtable}

\hypertarget{azone_hhsize_targets.csv}{%
\paragraph{azone\_hhsize\_targets.csv}\label{azone_hhsize_targets.csv}}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.0851}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.0709}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.1844}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.0709}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.0922}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.4965}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
NAME
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
TYPE
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
UNITS
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
PROHIBIT
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
ISELEMENTOF
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
DESCRIPTION
\end{minipage} \\
\midrule()
\endhead
Geo & & & & Azones & Must contain a record for each Azone and model run year. \\
Year & & & & & Must contain a record for each Azone and model run year. \\
AveHhSize & compound & PRSN/HH & \textless{} 0 & & Average household size of households (non-group quarters) \\
Prop1PerHh & double & proportion of households & \textless{} 0 & & Proportion of households (non-group quarters) having only one person \\
\bottomrule()
\end{longtable}

\hypertarget{azone_gq_pop_by_age.csv}{%
\paragraph{azone\_gq\_pop\_by\_age.csv}\label{azone_gq_pop_by_age.csv}}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.1273}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.0727}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.0636}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.0909}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.1182}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.5273}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
NAME
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
TYPE
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
UNITS
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
PROHIBIT
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
ISELEMENTOF
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
DESCRIPTION
\end{minipage} \\
\midrule()
\endhead
Geo & & & & Azones & Must contain a record for each Azone and model run year. \\
Year & & & & & Must contain a record for each Azone and model run year. \\
GrpAge0to14 & people & PRSN & NA, \textless{} 0 & & Group quarters population in 0 to 14 year old age group \\
GrpAge15to19 & people & PRSN & NA, \textless{} 0 & & Group quarters population in 15 to 19 year old age group \\
GrpAge20to29 & people & PRSN & NA, \textless{} 0 & & Group quarters population in 20 to 29 year old age group \\
GrpAge30to54 & people & PRSN & NA, \textless{} 0 & & Group quarters population in 30 to 54 year old age group \\
GrpAge55to64 & people & PRSN & NA, \textless{} 0 & & Group quarters population in 55 to 64 year old age group \\
GrpAge65Plus & people & PRSN & NA, \textless{} 0 & & Group quarters population in 65 or older age group \\
\bottomrule()
\end{longtable}

\hypertarget{datasets-used-by-the-module}{%
\subsubsection{Datasets Used by the Module}\label{datasets-used-by-the-module}}

The following table documents each dataset that is \emph{retrieved} from the datastore and used by the module. Each row in the table describes a dataset. All the datasets must be present in the datastore. These data are the resulting datastores created from the user input files. The table names and their meanings are as follows:

\begin{itemize}
\tightlist
\item
  \textbf{NAME} - The dataset name.
\item
  \textbf{TABLE} - The table in the datastore that the data is retrieved from.
\item
  \textbf{GROUP} - The group in the datastore where the table is located. Note that the datastore has a group named `Global' and groups for every model run year. For example, if the model run years are 2010 and 2050, then the datastore will have a group named `2010' and a group named `2050'. If the value for `GROUP' is `Year', then the dataset will exist in each model run year group. If the value for `GROUP' is `BaseYear' then the dataset will only exist in the base year group (e.g.~`2010'). If the value for `GROUP' is `Global' then the dataset will only exist in the `Global' group.
\item
  \textbf{TYPE} - The data type. The framework uses the type to check units and inputs. Refer to the model system design and users guide for information on allowed types.
\item
  \textbf{UNITS} - The units that input values need to represent. Some data types have defined units that are represented as abbreviations or combinations of abbreviations. For example `MI/HR' means miles per hour. Many of these abbreviations are self evident, but the VisionEval model system design and users guide should be consulted.
\item
  \textbf{PROHIBIT} - Values that are prohibited. Values in the datastore do not meet any of the listed conditions.
\end{itemize}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.1867}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.0933}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.0933}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.1467}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.3467}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.1333}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
NAME
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
TABLE
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
GROUP
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
TYPE
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
UNITS
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
PROHIBIT
\end{minipage} \\
\midrule()
\endhead
Azone & Azone & Year & character & ID & \\
Marea & Azone & Year & character & ID & \\
Age0to14 & Azone & Year & people & PRSN & NA, \textless{} 0 \\
Age15to19 & Azone & Year & people & PRSN & NA, \textless{} 0 \\
Age20to29 & Azone & Year & people & PRSN & NA, \textless{} 0 \\
Age30to54 & Azone & Year & people & PRSN & NA, \textless{} 0 \\
Age55to64 & Azone & Year & people & PRSN & NA, \textless{} 0 \\
Age65Plus & Azone & Year & people & PRSN & NA, \textless{} 0 \\
AveHhSize & Azone & Year & compound & PRSN/HH & \textless{} 0 \\
Prop1PerHh & Azone & Year & double & proportion of households & NA, \textless{} 0 \\
GrpAge0to14 & Azone & Year & people & PRSN & NA, \textless{} 0 \\
GrpAge15to19 & Azone & Year & people & PRSN & NA, \textless{} 0 \\
GrpAge20to29 & Azone & Year & people & PRSN & NA, \textless{} 0 \\
GrpAge30to54 & Azone & Year & people & PRSN & NA, \textless{} 0 \\
GrpAge55to64 & Azone & Year & people & PRSN & NA, \textless{} 0 \\
GrpAge65Plus & Azone & Year & people & PRSN & NA, \textless{} 0 \\
\bottomrule()
\end{longtable}

\hypertarget{datasets-produced-by-the-module-1}{%
\subsubsection{Datasets Produced by the Module}\label{datasets-produced-by-the-module-1}}

The following table documents each dataset that is produced by the module and stored in the datastore. Each row in the table describes a dataset. All the datasets must be present in the datastore. One or more of these datasets may be entered into the datastore from the user input files. The table names and their meanings are as follows:

\begin{itemize}
\tightlist
\item
  \textbf{NAME} - The dataset name.
\item
  \textbf{TABLE} - The table in the datastore that the data is retrieved from.
\item
  \textbf{GROUP} - The group in the datastore where the table is located. Note that the datastore has a group named `Global' and groups for every model run year. For example, if the model run years are 2010 and 2050, then the datastore will have a group named `2010' and a group named `2050'. If the value for `GROUP' is `Year', then the dataset will exist in each model run year. If the value for `GROUP' is `BaseYear' then the dataset will only exist in the base year group (e.g., `2010'). If the value for `GROUP' is `Global' then the dataset will only exist in the `Global' group.
\item
  \textbf{TYPE} - The data type. The framework uses the type to check units and inputs. Refer to the model system design and users guide for information on allowed types.
\item
  \textbf{UNITS} - The units that input values need to represent. Some data types have defined units that are represented as abbreviations or combinations of abbreviations. For example `MI/HR' means miles per hour. Many of these abbreviations are self evident, but the VisionEval model system design and users guide should be consulted.
\item
  \textbf{PROHIBIT} - Values that are prohibited. Values in the datastore do not meet any of the listed conditions.
\item
  \textbf{DESCRIPTION} - A description of the data.
\end{itemize}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 12\tabcolsep) * \real{0.0786}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 12\tabcolsep) * \real{0.0786}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 12\tabcolsep) * \real{0.0500}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 12\tabcolsep) * \real{0.0857}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 12\tabcolsep) * \real{0.0714}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 12\tabcolsep) * \real{0.0786}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 12\tabcolsep) * \real{0.5571}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
NAME
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
TABLE
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
GROUP
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
TYPE
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
UNITS
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
PROHIBIT
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
DESCRIPTION
\end{minipage} \\
\midrule()
\endhead
NumHh & Azone & Year & households & HH & NA, \textless{} 0 & Number of households (non-group quarters) \\
NumGq & Azone & Year & people & PRSN & NA, \textless{} 0 & Number of people in non-institutional group quarters \\
HhId & Household & Year & character & ID & & Unique household ID \\
Azone & Household & Year & character & ID & & Azone ID \\
Marea & Household & Year & character & ID & & Marea ID \\
HhSize & Household & Year & people & PRSN & NA, \textless= 0 & Number of persons \\
Age0to14 & Household & Year & people & PRSN & NA, \textless{} 0 & Persons in 0 to 14 year old age group \\
Age15to19 & Household & Year & people & PRSN & NA, \textless{} 0 & Persons in 15 to 19 year old age group \\
Age20to29 & Household & Year & people & PRSN & NA, \textless{} 0 & Persons in 20 to 29 year old age group \\
Age30to54 & Household & Year & people & PRSN & NA, \textless{} 0 & Persons in 30 to 54 year old age group \\
Age55to64 & Household & Year & people & PRSN & NA, \textless{} 0 & Persons in 55 to 64 year old age group \\
Age65Plus & Household & Year & people & PRSN & NA, \textless{} 0 & Persons in 65 or older age group \\
HhType & Household & Year & character & category & & Coded household age composition (e.g.~2-1-0-2-0-0) or Grp for group quarters \\
\bottomrule()
\end{longtable}

\hypertarget{PredictWorkers}{%
\subsection{PredictWorkers Module}\label{PredictWorkers}}

This module expands upon the CreateHouseholds module results, assigning workers by age to households and to noninstitutional group quarters population. It is a simple model which predicts workers as a function of the age composition of household members. There is no responsiveness to jobs or how changes in the job market and demographics might change the worker age composition, but the user may use optional inputs to exogenously adjust relative employment rates by age group, Azone, and year. These optional input (azone\_relative\_employment.csv) values specify by age group, Azone, and year the proportions of persons in the age group and Azone who are workers relative to the proportions in the model estimation year.

\hypertarget{model-parameter-estimation-1}{%
\subsubsection{Model Parameter Estimation}\label{model-parameter-estimation-1}}

This model has just one parameter object, the \texttt{PropHhWkr\_HtAg.Rda} probability matrix. This probability matrix is created in CreateHouseholds.R and is structurally similar to the household member probability matrix \texttt{HhProb\_HtAp.Rda}, but instead has the number of workers per age group instead of simply household members per age group (See example table below). The table is created from PUMS data compiled by the CreateEstimationDatasets.R script into an R dataset (Hh\_df, PropHhWkr\_HtAg, and HhProb\_HtAp) when the VESimHouseholds package is built.

The data that is supplied with the VESimHouseholds package downloaded from the official VisionEval repository may be used, but it is preferrable to use data for the region being modeled. How this is done is explained in the \protect\hyperlink{ve-buildprocess}{Module Build Process} documentation.

\hypertarget{how-the-module-works-1}{%
\subsubsection{How the Module Works}\label{how-the-module-works-1}}

The number of workers in each age group of each household is determined through random sampling using the probability for the age group and household type in the household worker probability matrix. Although this worker probability matrix is similar to the household member probability matrix, it estimates workers probabilistically, rather than through deterministic iterative fitting. A probabilistic method means that results will vary with each run, but the deterministic method will always yield the same result.

For example, if a household is of the type \emph{2-0-2-0-0-0}, and the probability that a person of age 20-29 in this household type is a worker is 0.7, then two random samples are taken for this household with a probability of success of 0.7 to determine the number of workers in this age group in the household.

\hypertarget{prophhwkr_htag.rda}{%
\paragraph{PropHhWkr\_HtAg.Rda}\label{prophhwkr_htag.rda}}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.1912}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.1618}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.1618}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.1618}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.1618}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.1618}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
HhType
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Age15to19
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Age20to29
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Age30to54
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Age55to64
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Age65Plus
\end{minipage} \\
\midrule()
\endhead
1-1-1-0-0-0 & 0.657 & 0.937 & 0 & 0 & 0 \\
1-1-1-1-0-0 & 0.399 & 0.747 & 0.897 & 0 & 0 \\
1-1-1-1-0-1 & 0.694 & 0.855 & 1 & 0 & 0 \\
1-1-1-1-1-0 & 0.388 & 0.709 & 1 & 1 & 0 \\
1-1-1-2-0-0 & 0.514 & 0.836 & 0.909 & 0 & 0 \\
1-1-1-2-0-2 & 0.172 & 1 & 0.586 & 0 & 0.586 \\
\bottomrule()
\end{longtable}

Note that there is no Wkr0to14 column, it is assumed that anyone under 15 is not a worker. If the user has supplied optional inputs for the ratio of employment for the age group in the forecast year relative to the year of the model estimation dataset, that input is multiplied by the estimated worker probability to determine the sampling probability. For example, if the year of the model estimation data is 2000 and the forecast year is 2010, and if the user specifies that the employment rate of 20-29 year olds in 2010 was 95\% of the employment rate of that age group in 2000, then the worker probability in the example above (0.7) is multiplied by 0.95 to calculate the sampling probability.

\hypertarget{user-inputs-2}{%
\subsubsection{User Inputs}\label{user-inputs-2}}

The following table(s) document each input file that must be provided in order for the module to run correctly. User input files are comma-separated values (CSV) formatted text files. Each row in the table(s) describes a field (column) in the input file. The table names and their meanings are as follows:

\begin{itemize}
\tightlist
\item
  \textbf{NAME} - The field (column) name in the input file. Note that if the `TYPE' is `currency' the field name must be followed by a period and the year that the currency is denominated in. For example if the NAME is `HHIncomePC' (household per capita income) and the input values are in 2010 dollars, the field name in the file must be `HHIncomePC.2010'. The framework uses the embedded date information to convert the currency into base year currency amounts. The user may also embed a magnitude indicator if inputs are in thousand, millions, etc. The VisionEval model system design and users guide should be consulted on how to do that.
\item
  \textbf{TYPE} - The data type. The framework uses the type to check units and inputs. The user can generally ignore this, but it is important to know whether the `TYPE' is `currency'
\item
  \textbf{UNITS} - The units that input values need to represent. Some data types have defined units that are represented as abbreviations or combinations of abbreviations. For example `MI/HR' means miles per hour. Many of these abbreviations are self evident, but the VisionEval model system design and users guide should be consulted.
\item
  \textbf{PROHIBIT} - Values that are prohibited. Values may not meet any of the listed conditions.
\item
  \textbf{ISELEMENTOF} - Categorical values that are permitted. Value must be one of the listed values.
\item
  \textbf{DESCRIPTION} - A description of the data.
\end{itemize}

\hypertarget{azone_relative_employment.csv-2}{%
\paragraph{azone\_relative\_employment.csv}\label{azone_relative_employment.csv-2}}

This input file is OPTIONAL.

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.0972}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.0556}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.0833}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.0694}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.0903}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.6042}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
NAME
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
TYPE
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
UNITS
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
PROHIBIT
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
ISELEMENTOF
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
DESCRIPTION
\end{minipage} \\
\midrule()
\endhead
Geo & & & & Azones & Must contain a record for each Azone and model run year. \\
Year & & & & & Must contain a record for each Azone and model run year. \\
RelEmp15to19 & double & proportion & \textless{} 0 & & Ratio of workers to persons age 15 to 19 in model year vs.~in estimation data year \\
RelEmp20to29 & double & proportion & \textless{} 0 & & Ratio of workers to persons age 20 to 29 in model year vs.~in estimation data year \\
RelEmp30to54 & double & proportion & \textless{} 0 & & Ratio of workers to persons age 30 to 54 in model year vs.~in estimation data year \\
RelEmp55to64 & double & proportion & \textless{} 0 & & Ratio of workers to persons age 55 to 64 in model year vs.~in estimation data year \\
RelEmp65Plus & double & proportion & \textless{} 0 & & Ratio of workers to persons age 65 or older in model year vs.~in estimation data year \\
\bottomrule()
\end{longtable}

\hypertarget{datasets-used-by-the-module-1}{%
\subsubsection{Datasets Used by the Module}\label{datasets-used-by-the-module-1}}

The following table documents each dataset that is retrieved from the datastore and used by the module. Each row in the table describes a dataset. All the datasets must be present in the datastore. One or more of these datasets may be entered into the datastore from the user input files. The table names and their meanings are as follows:

\begin{itemize}
\tightlist
\item
  \textbf{NAME} - The dataset name.
\item
  \textbf{TABLE} - The table in the datastore that the data is retrieved from.
\item
  \textbf{GROUP} - The group in the datastore where the table is located. Note that the datastore has a group named `Global' and groups for every model run year. For example, if the model run years are 2010 and 2050, then the datastore will have a group named `2010' and a group named `2050'. If the value for `GROUP' is `Year', then the dataset will exist in each model run year group. If the value for `GROUP' is `BaseYear' then the dataset will only exist in the base year group (e.g., `2010'). If the value for `GROUP' is `Global' then the dataset will only exist in the `Global' group.
\item
  \textbf{TYPE} - The data type. The framework uses the type to check units and inputs. Refer to the model system design and users guide for information on allowed types.
\item
  \textbf{UNITS} - The units that input values need to represent. Some data types have defined units that are represented as abbreviations or combinations of abbreviations. For example `MI/HR' means miles per hour. Many of these abbreviations are self evident, but the VisionEval model system design and users guide should be consulted.
\item
  \textbf{PROHIBIT} - Values that are prohibited. Values in the datastore do not meet any of the listed conditions.
\end{itemize}

\begin{longtable}[]{@{}llllll@{}}
\toprule()
NAME & TABLE & GROUP & TYPE & UNITS & PROHIBIT \\
\midrule()
\endhead
Age0to14 & Household & Year & people & PRSN & NA, \textless{} 0 \\
Age15to19 & Household & Year & people & PRSN & NA, \textless{} 0 \\
Age20to29 & Household & Year & people & PRSN & NA, \textless{} 0 \\
Age30to54 & Household & Year & people & PRSN & NA, \textless{} 0 \\
Age55to64 & Household & Year & people & PRSN & NA, \textless{} 0 \\
Age65Plus & Household & Year & people & PRSN & NA, \textless{} 0 \\
RelEmp15to19 & Azone & Year & double & proportion & \textless{} 0 \\
RelEmp20to29 & Azone & Year & double & proportion & \textless{} 0 \\
RelEmp30to54 & Azone & Year & double & proportion & \textless{} 0 \\
RelEmp55to64 & Azone & Year & double & proportion & \textless{} 0 \\
RelEmp65Plus & Azone & Year & double & proportion & \textless{} 0 \\
HhType & Household & Year & character & category & \\
Azone & Household & Year & character & ID & \\
Azone & Azone & Year & character & ID & \\
\bottomrule()
\end{longtable}

\hypertarget{datasets-produced-by-the-module-2}{%
\subsubsection{Datasets Produced by the Module}\label{datasets-produced-by-the-module-2}}

The following table documents each dataset that is placed in the datastore by the module. Each row in the table describes a dataset. All the datasets must be present in the datastore. One or more of these datasets may be entered into the datastore from the user input files. The table names and their meanings are as follows:

\begin{itemize}
\tightlist
\item
  \textbf{NAME} - The dataset name.
\item
  \textbf{TABLE} - The table in the datastore that the data is placed in.
\item
  \textbf{GROUP} - The group in the datastore where the table is located. Note that the datastore has a group named `Global' and groups for every model run year. For example, if the model run years are 2010 and 2050, then the datastore will have a group named `2010' and a group named `2050'. If the value for `GROUP' is `Year', then the dataset will exist in each model run year. If the value for `GROUP' is `BaseYear' then the dataset will only exist in the base year group (e.g., `2010'). If the value for `GROUP' is `Global' then the dataset will only exist in the `Global' group.
\item
  \textbf{TYPE} - The data type. The framework uses the type to check units and inputs. Refer to the model system design and users guide for information on allowed types.
\item
  \textbf{UNITS} - The native units that are created in the datastore. Some data types have defined units that are represented as abbreviations or combinations of abbreviations. For example `MI/HR' means miles per hour. Many of these abbreviations are self evident, but the VisionEval model system design and users guide should be consulted.
\item
  \textbf{PROHIBIT} - Values that are prohibited. Values in the datastore do not meet any of the listed conditions.
\item
  \textbf{DESCRIPTION} - A description of the data.
\end{itemize}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 12\tabcolsep) * \real{0.1170}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 12\tabcolsep) * \real{0.1170}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 12\tabcolsep) * \real{0.0745}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 12\tabcolsep) * \real{0.0851}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 12\tabcolsep) * \real{0.0745}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 12\tabcolsep) * \real{0.1064}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 12\tabcolsep) * \real{0.4255}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
NAME
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
TABLE
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
GROUP
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
TYPE
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
UNITS
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
PROHIBIT
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
DESCRIPTION
\end{minipage} \\
\midrule()
\endhead
Wkr15to19 & Household & Year & people & PRSN & NA, \textless{} 0 & Workers in 15 to 19 year old age group \\
Wkr20to29 & Household & Year & people & PRSN & NA, \textless{} 0 & Workers in 20 to 29 year old age group \\
Wkr30to54 & Household & Year & people & PRSN & NA, \textless{} 0 & Workers in 30 to 54 year old age group \\
Wkr55to64 & Household & Year & people & PRSN & NA, \textless{} 0 & Workers in 55 to 64 year old age group \\
Wkr65Plus & Household & Year & people & PRSN & NA, \textless{} 0 & Workers in 65 or older age group \\
Workers & Household & Year & people & PRSN & NA, \textless{} 0 & Total workers \\
NumWkr & Azone & Year & people & PRSN & NA, \textless{} 0 & Number of workers residing in the zone \\
\bottomrule()
\end{longtable}

\hypertarget{AssignLifeCycle}{%
\subsection{AssignLifeCycle Module}\label{AssignLifeCycle}}

This module assigns a ``life cycle'' category to each household, which defines each household based on the number of adults, retired or working, and with or without children. The life cycle variable are based on the \href{https://nhts.ornl.gov/tables09/CodebookPage.aspx?id=1239}{LIF\_CYC variable in the 2009 NHTS}, but aggregates the categories as follows:

\begin{longtable}[]{@{}ll@{}}
\toprule()
Code & Meaning \\
\midrule()
\endhead
1 & one adult, no children \\
2 & 2+ adults, no children \\
3 & one adult, with children (corresponds to NHTS 03, 05, and 07) \\
4 & 2+ adults, with children (corresponds to NHTS 04, 06, and 08) \\
9 & one adult, retired, no children \\
10 & 2+ adults, retired, no children \\
\bottomrule()
\end{longtable}

The life cycle categories are similar, but not the same as, those established for the NHTS. The age categories used in VisionEval models are broader than those used by the NHTS to identify children of different ages. As a result it is not possible for the life cycle designations to reflect child ages as they do in the NHTS. Also, adulthood is determined differently in this module. The NHTS uses age 21 as the threshold age for adulthood. This module uses use 20 as nominal age break for adulthood (the 20-29 age group). Moreover, the module identifies some younger persons to be adults in situations where they are likely to be be living independently as adults or emancipated minors. Persons in the 15 to 19 age group are considered adults when there are no older adults (ages 30+) in the household.

\hypertarget{model-parameter-estimation-2}{%
\subsubsection{Model Parameter Estimation}\label{model-parameter-estimation-2}}

This module has no parameters. A set of rules assigns age group categories based on the age of persons and workers in the household.

\hypertarget{how-the-module-works-2}{%
\subsubsection{How the Module Works}\label{how-the-module-works-2}}

The module uses datasets on the numbers of persons in each household by age category and the numbers of workers by age category. The household life cycle is determined by the number of children in combination with the number of adults and whether the adults are retired.

Because the 15-19 age category can be ambiguous with regard to adult or child status, the status of persons in that age category in the household is determined based on the presence of older adults in the household. If there are no older persons or only persons aged 20-29 in the household, the age 15-19 persons are considered to be adults. Otherwise they are considered to be children.

The retirement status of adults is determined based on age and worker status. Households are considered to be populated with retired persons if all the adults are in the 65+ age category and there are no workers. If children are present in the household with retired persons, then the life cycle category is 03 or 04 rather than 09 or 10.

\hypertarget{user-inputs-3}{%
\subsubsection{User Inputs}\label{user-inputs-3}}

This module has no user input requirements.

\hypertarget{datasets-used-by-the-module-2}{%
\subsubsection{Datasets Used by the Module}\label{datasets-used-by-the-module-2}}

The following table documents each dataset that is retrieved from the datastore and used by the module. Each row in the table describes a dataset. All the datasets must be present in the datastore. One or more of these datasets may be entered into the datastore from the user input files. The table names and their meanings are as follows:

\begin{itemize}
\tightlist
\item
  \textbf{NAME} - The dataset name.
\item
  \textbf{TABLE} - The table in the datastore that the data is retrieved from.
\item
  \textbf{GROUP} - The group in the datastore where the table is located. Note that the datastore has a group named `Global' and groups for every model run year. For example, if the model run years are 2010 and 2050, then the datastore will have a group named `2010' and a group named `2050'. If the value for `GROUP' is `Year', then the dataset will exist in each model run year group. If the value for `GROUP' is `BaseYear' then the dataset will only exist in the base year group (e.g.~`2010'). If the value for `GROUP' is `Global' then the dataset will only exist in the `Global' group.
\item
  \textbf{TYPE} - The data type. The framework uses the type to check units and inputs. Refer to the model system design and users guide for information on allowed types.
\item
  \textbf{UNITS} - The units that input values need to represent. Some data types have defined units that are represented as abbreviations or combinations of abbreviations. For example `MI/HR' means miles per hour. Many of these abbreviations are self evident, but the VisionEval model system design and users guide should be consulted.
\item
  \textbf{PROHIBIT} - Values that are prohibited. Values in the datastore do not meet any of the listed conditions.
\end{itemize}

\begin{longtable}[]{@{}llllll@{}}
\toprule()
NAME & TABLE & GROUP & TYPE & UNITS & PROHIBIT \\
\midrule()
\endhead
Age0to14 & Household & Year & people & PRSN & NA, \textless{} 0 \\
Age15to19 & Household & Year & people & PRSN & NA, \textless{} 0 \\
Age20to29 & Household & Year & people & PRSN & NA, \textless{} 0 \\
Age30to54 & Household & Year & people & PRSN & NA, \textless{} 0 \\
Age55to64 & Household & Year & people & PRSN & NA, \textless{} 0 \\
Age65Plus & Household & Year & people & PRSN & NA, \textless{} 0 \\
Wkr15to19 & Household & Year & people & PRSN & NA, \textless{} 0 \\
Wkr20to29 & Household & Year & people & PRSN & NA, \textless{} 0 \\
Wkr30to54 & Household & Year & people & PRSN & NA, \textless{} 0 \\
Wkr55to64 & Household & Year & people & PRSN & NA, \textless{} 0 \\
Wkr65Plus & Household & Year & people & PRSN & NA, \textless{} 0 \\
HhType & Household & Year & character & category & \\
\bottomrule()
\end{longtable}

\hypertarget{datasets-produced-by-the-module-3}{%
\subsubsection{Datasets Produced by the Module}\label{datasets-produced-by-the-module-3}}

The following table documents each dataset that is placed in the datastore by the module. Each row in the table describes a dataset. All the datasets must be present in the datastore. One or more of these datasets may be entered into the datastore from the user input files. The table names and their meanings are as follows:

\begin{itemize}
\tightlist
\item
  \textbf{NAME} - The dataset name.
\item
  \textbf{TABLE} - The table in the datastore that the data is placed in.
\item
  \textbf{GROUP} - The group in the datastore where the table is located. Note that the datastore has a group named `Global' and groups for every model run year. For example, if the model run years are 2010 and 2050, then the datastore will have a group named `2010' and a group named `2050'. If the value for `GROUP' is `Year', then the dataset will exist in each model run year. If the value for `GROUP' is `BaseYear' then the dataset will only exist in the base year group (e.g.~`2010'). If the value for `GROUP' is `Global' then the dataset will only exist in the `Global' group.
\item
  \textbf{TYPE} - The data type. The framework uses the type to check units and inputs. Refer to the model system design and users guide for information on allowed types.
\item
  \textbf{UNITS} - The native units that are created in the datastore. Some data types have defined units that are represented as abbreviations or combinations of abbreviations. For example `MI/HR' means miles per hour. Many of these abbreviations are self evident, but the VisionEval model system design and users guide should be consulted.
\item
  \textbf{ISELEMENTOF} - Categorical values that are permitted. Values in the datastore are one or more of the listed values.
\item
  \textbf{DESCRIPTION} - A description of the data.
\end{itemize}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 12\tabcolsep) * \real{0.0803}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 12\tabcolsep) * \real{0.0803}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 12\tabcolsep) * \real{0.0511}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 12\tabcolsep) * \real{0.0803}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 12\tabcolsep) * \real{0.0730}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 12\tabcolsep) * \real{0.1752}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 12\tabcolsep) * \real{0.4599}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
NAME
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
TABLE
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
GROUP
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
TYPE
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
UNITS
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
ISELEMENTOF
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
DESCRIPTION
\end{minipage} \\
\midrule()
\endhead
LifeCycle & Household & Year & character & category & 01, 02, 03, 04, 09, 10 & Household life cycle as defined by 2009 NHTS LIF\_CYC variable \\
\bottomrule()
\end{longtable}

\hypertarget{PredictIncome}{%
\subsection{PredictIncome Module}\label{PredictIncome}}

This module predicts the income for each simulated household given the number of workers in each age group and the average per capita income for the Azone where the household resides. Household income models are estimated for \emph{regular} households and for \emph{group quarters} households.

\hypertarget{model-parameter-estimation-3}{%
\subsubsection{Model Parameter Estimation}\label{model-parameter-estimation-3}}

The household income models are estimated using PUMS data that are compiled into a R dataset (HhData\_df) by the `CreateEstimationDatasets.R' script when the VESimHouseholds package is built. The data that are supplied with the VESimHouseholds package downloaded from the VisionEval repository may be used, but it is preferrable to use data for the region being modeled. How this is done is explained in the \protect\hyperlink{ve-buildprocess}{Module Build Process} documentation.

The household income models are linear regression models in which the dependent variable is a power transformation of income. Power transformation is needed in order to normalize the income data distribution which has a long right-hand tail. The power transform is found which minimizes the skewness of the income distribution. The power transform for \emph{regular} households is: \texttt{0.298} and the power transform for \emph{group quarters} households is: \texttt{0.275}.

The independent variables for the linear models are power transformed per capita income for the area, the number of workers in each of 4 worker age groups (15-19, 20-29, 30-54, 55-64), and the number of persons in the 65+ age group. In addition, power-transformed per capita income is interacted with each of the 4 worker groups and 65+ age group variable. The summary statistics for the \emph{regular} household model are as follows:

\begin{verbatim}
Call:
lm(formula = makeFormula(EndTerms_), data = EstData_df)

Residuals:
    Min      1Q  Median      3Q     Max
-63.608  -3.244  -0.334   2.767  39.835

Coefficients:
                       Estimate Std. Error t value Pr(>|t|)
(Intercept)            -6.37283    0.59487 -10.713  < 2e-16 ***
PowPerCapInc            1.11470    0.02784  40.043  < 2e-16 ***
Wkr15to19               3.67743    1.04924   3.505 0.000457 ***
Wkr20to29               8.21664    0.53182  15.450  < 2e-16 ***
Wkr30to54               4.87152    0.40188  12.122  < 2e-16 ***
Wkr55to64               5.84214    0.04052 144.191  < 2e-16 ***
Age65Plus               6.42608    0.52525  12.234  < 2e-16 ***
PowPerCapInc:Wkr15to19 -0.15072    0.04921  -3.063 0.002194 **
PowPerCapInc:Wkr20to29 -0.23896    0.02480  -9.634  < 2e-16 ***
PowPerCapInc:Wkr30to54  0.04155    0.01877   2.214 0.026837 *
PowPerCapInc:Age65Plus -0.19331    0.02452  -7.882 3.24e-15 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 5.837 on 122168 degrees of freedom
Multiple R-squared:  0.3848,    Adjusted R-squared:  0.3847
F-statistic:  7640 on 10 and 122168 DF,  p-value: < 2.2e-16
\end{verbatim}

The summary statistics for the \emph{group quarters} household model are as follows:

\begin{verbatim}
Call:
lm(formula = makeFormula(EndTerms_), data = EstData_df)

Residuals:
     Min       1Q   Median       3Q      Max
-10.8332  -2.3038  -0.3022   1.6655  22.3561

Coefficients:
                       Estimate Std. Error t value Pr(>|t|)
(Intercept)             17.8103     2.0429   8.718  < 2e-16 ***
PowPerCapInc            -0.7567     0.1203  -6.291 3.37e-10 ***
Wkr15to19               -8.6140     2.4458  -3.522 0.000431 ***
Wkr20to29               -8.2516     2.3893  -3.454 0.000557 ***
Wkr30to54               -9.6213     4.0777  -2.359 0.018331 *
Wkr55to64              -17.8261     8.7846  -2.029 0.042476 *
Age65Plus              -20.6001     5.1217  -4.022 5.83e-05 ***
PowPerCapInc:Wkr15to19   0.7494     0.1441   5.202 2.03e-07 ***
PowPerCapInc:Wkr20to29   0.8061     0.1408   5.725 1.08e-08 ***
PowPerCapInc:Wkr30to54   1.0547     0.2401   4.393 1.14e-05 ***
PowPerCapInc:Wkr55to64   1.6335     0.5109   3.198 0.001393 **
PowPerCapInc:Age65Plus   1.5285     0.3005   5.086 3.76e-07 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 3.485 on 6343 degrees of freedom
Multiple R-squared:  0.2964,    Adjusted R-squared:  0.2952
F-statistic: 242.9 on 11 and 6343 DF,  p-value: < 2.2e-16
\end{verbatim}

An additional step must be carried out in order to predict household income. Because the linear model does not account for all of the observed variance, and because income is power distribution, the average of the predicted per capita income is less than the average per capita income of the population. To compensate, random variation needs to be added to each household prediction of power-transformed income by randomly selecting from a normal distribution that is centered on the value predicted by the linear model and has a standard deviation that is calculated so as the resulting average per capita income of households match the input value. A binary search process is used to find the suitable standard deviation.

Following is the comparison of mean values for the observed \emph{regular} and \emph{group quarter} household income for the estimation dataset and the corresponding predicted values for the estimation dataset.

\begin{longtable}[]{@{}lrr@{}}
\toprule()
& Regular households & Group quarters \\
\midrule()
\endhead
Observed (\$) & 66,246 & 6,733 \\
Estimated (\$) & 66,365 & 6,804 \\
\bottomrule()
\end{longtable}

The following figure compares the distributions of the observed and predicted incomes of \emph{regular} and \emph{groups quarters} households:

\href{images/reg-hh-inc_obs-vs-est_distributions.png}{} \href{images/gq-hh-inc_obs-vs-est_distributions.png}{}

\hypertarget{how-the-module-works-3}{%
\subsubsection{How the Module Works}\label{how-the-module-works-3}}

This module runs at the Azone level. Azone household average per capita income and group quarters average per capita income are user inputs to the model. The other model inputs are in the datastore, having been created by the CreateHouseholds and PredictWorkers modules. Household income is predicted separately for \emph{regular} and \emph{group quarters} households. Per capita income is transformed using the estimated power transform, the model dependent variables are calculated, and the linear model is applied. Random variation is applied so that the per capita mean income for the predicted household income matches the input value.

\hypertarget{user-inputs-4}{%
\subsubsection{User Inputs}\label{user-inputs-4}}

The following table(s) document each input file that must be provided in order for the module to run correctly. User input files are comma-separated values (CSV) formatted text files. Each row in the table(s) describes a field (column) in the input file. The table names and their meanings are as follows:

\begin{itemize}
\tightlist
\item
  \textbf{NAME} - The field (column) name in the input file. Note that if the `TYPE' is `currency' the field name must be followed by a period and the year that the currency is denominated in. For example if the NAME is `HHIncomePC' (household per capita income) and the input values are in 2010 dollars, the field name in the file must be `HHIncomePC.2010'. The framework uses the embedded date information to convert the currency into base year currency amounts. The user may also embed a magnitude indicator if inputs are in thousand, millions, etc. The VisionEval model system design and users guide should be consulted on how to do that.
\item
  \textbf{TYPE} - The data type. The framework uses the type to check units and inputs. The user can generally ignore this, but it is important to know whether the `TYPE' is `currency'
\item
  \textbf{UNITS} - The units that input values need to represent. Some data types have defined units that are represented as abbreviations or combinations of abbreviations. For example `MI/HR' means miles per hour. Many of these abbreviations are self evident, but the VisionEval model system design and users guide should be consulted.
\item
  \textbf{PROHIBIT} - Values that are prohibited. Values may not meet any of the listed conditions.
\item
  \textbf{ISELEMENTOF} - Categorical values that are permitted. Value must be one of the listed values.
\item
  \textbf{DESCRIPTION} - A description of the data.
\end{itemize}

\hypertarget{azone_per_cap_inc.csv-2}{%
\paragraph{azone\_per\_cap\_inc.csv}\label{azone_per_cap_inc.csv-2}}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.0992}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.0826}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.0579}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.0826}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.1074}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.5702}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
NAME
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
TYPE
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
UNITS
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
PROHIBIT
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
ISELEMENTOF
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
DESCRIPTION
\end{minipage} \\
\midrule()
\endhead
Geo & & & & Azones & Must contain a record for each Azone and model run year. \\
Year & & & & & Must contain a record for each Azone and model run year. \\
HHIncomePC & currency & USD & NA, \textless{} 0 & & Average annual per capita income of households (non-group quarters) \\
GQIncomePC & currency & USD & NA, \textless{} 0 & & Average annual per capita income of group quarters population \\
\bottomrule()
\end{longtable}

\hypertarget{datasets-used-by-the-module-3}{%
\subsubsection{Datasets Used by the Module}\label{datasets-used-by-the-module-3}}

The following table documents each dataset that is retrieved from the datastore and used by the module. Each row in the table describes a dataset. All the datasets must be present in the datastore. One or more of these datasets may be entered into the datastore from the user input files. The table names and their meanings are as follows:

\begin{itemize}
\tightlist
\item
  \textbf{NAME} - The dataset name.
\item
  \textbf{TABLE} - The table in the datastore that the data is retrieved from.
\item
  \textbf{GROUP} - The group in the datastore where the table is located. Note that the datastore has a group named `Global' and groups for every model run year. For example, if the model run years are 2010 and 2050, then the datastore will have a group named `2010' and a group named `2050'. If the value for `GROUP' is `Year', then the dataset will exist in each model run year group. If the value for `GROUP' is `BaseYear' then the dataset will only exist in the base year group (e.g.~`2010'). If the value for `GROUP' is `Global' then the dataset will only exist in the `Global' group.
\item
  \textbf{TYPE} - The data type. The framework uses the type to check units and inputs. Refer to the model system design and users guide for information on allowed types.
\item
  \textbf{UNITS} - The units that input values need to represent. Some data types have defined units that are represented as abbreviations or combinations of abbreviations. For example `MI/HR' means miles per hour. Many of these abbreviations are self evident, but the VisionEval model system design and users guide should be consulted.
\item
  \textbf{PROHIBIT} - Values that are prohibited. Values in the datastore do not meet any of the listed conditions.
\end{itemize}

\begin{longtable}[]{@{}llllll@{}}
\toprule()
NAME & TABLE & GROUP & TYPE & UNITS & PROHIBIT \\
\midrule()
\endhead
Azone & Azone & Year & character & ID & \\
HHIncomePC & Azone & Year & currency & USD.1999 & NA, \textless{} 0 \\
GQIncomePC & Azone & Year & currency & USD.1999 & NA, \textless{} 0 \\
Azone & Household & Year & character & ID & \\
HhSize & Household & Year & people & PRSN & NA, \textless= 0 \\
HhType & Household & Year & character & category & \\
Wkr15to19 & Household & Year & people & PRSN & NA, \textless{} 0 \\
Wkr20to29 & Household & Year & people & PRSN & NA, \textless{} 0 \\
Wkr30to54 & Household & Year & people & PRSN & NA, \textless{} 0 \\
Wkr55to64 & Household & Year & people & PRSN & NA, \textless{} 0 \\
Age65Plus & Household & Year & people & PRSN & NA, \textless{} 0 \\
\bottomrule()
\end{longtable}

\hypertarget{datasets-produced-by-the-module-4}{%
\subsubsection{Datasets Produced by the Module}\label{datasets-produced-by-the-module-4}}

The following table documents each dataset that is placed in the datastore by the module. Each row in the table describes a dataset. All the datasets must be present in the datastore. One or more of these datasets may be entered into the datastore from the user input files. The table names and their meanings are as follows:

\begin{itemize}
\tightlist
\item
  \textbf{NAME} - The dataset name.
\item
  \textbf{TABLE} - The table in the datastore that the data is placed in.
\item
  \textbf{GROUP} - The group in the datastore where the table is located. Note that the datastore has a group named `Global' and groups for every model run year. For example, if the model run years are 2010 and 2050, then the datastore will have a group named `2010' and a group named `2050'. If the value for `GROUP' is `Year', then the dataset will exist in each model run year. If the value for `GROUP' is `BaseYear' then the dataset will only exist in the base year group (e.g.~`2010'). If the value for `GROUP' is `Global' then the dataset will only exist in the `Global' group.
\item
  \textbf{TYPE} - The data type. The framework uses the type to check units and inputs. Refer to the model system design and users guide for information on allowed types.
\item
  \textbf{UNITS} - The native units that are created in the datastore. Some data types have defined units that are represented as abbreviations or combinations of abbreviations. For example `MI/HR' means miles per hour. Many of these abbreviations are self evident, but the VisionEval model system design and users guide should be consulted.
\item
  \textbf{PROHIBIT} - Values that are prohibited. Values in the datastore do not meet any of the listed conditions.
\item
  \textbf{DESCRIPTION} - A description of the data.
\end{itemize}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 12\tabcolsep) * \real{0.0690}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 12\tabcolsep) * \real{0.0948}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 12\tabcolsep) * \real{0.0603}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 12\tabcolsep) * \real{0.0862}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 12\tabcolsep) * \real{0.0862}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 12\tabcolsep) * \real{0.0862}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 12\tabcolsep) * \real{0.5172}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
NAME
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
TABLE
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
GROUP
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
TYPE
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
UNITS
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
PROHIBIT
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
DESCRIPTION
\end{minipage} \\
\midrule()
\endhead
Income & Household & Year & currency & USD.1999 & NA, \textless{} 0 & Total annual household (non-qroup \& group quarters) income \\
\bottomrule()
\end{longtable}

\hypertarget{VESimHouseholds-output}{%
\subsection{Datasets Produced by VESimHouseholds}\label{VESimHouseholds-output}}

The following table documents the overall dataset that is placed in the datastore by the VESimHouseholds package. Each row in the table describes a dataset. The table names and their meanings are as follows:

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 8\tabcolsep) * \real{0.0932}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 8\tabcolsep) * \real{0.0932}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 8\tabcolsep) * \real{0.0593}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 8\tabcolsep) * \real{0.0932}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 8\tabcolsep) * \real{0.6610}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
NAME
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
TABLE
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
GROUP
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
TYPE
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
DESCRIPTION
\end{minipage} \\
\midrule()
\endhead
Age0to14 & Household & Year & integer & Persons in 0 to 14 year old age group \\
Age15to19 & Household & Year & integer & Persons in 15 to 19 year old age group \\
Age20to29 & Household & Year & integer & Persons in 20 to 29 year old age group \\
Age30to54 & Household & Year & integer & Persons in 30 to 54 year old age group \\
Age55to64 & Household & Year & integer & Persons in 55 to 64 year old age group \\
Age65Plus & Household & Year & integer & Persons in 65 or older age group \\
HhSize & Household & Year & integer & Number of persons \\
HhType & Household & Year & character & Coded household age composition (e.g.~2-1-0-2-0-0) or Grp for group quarters \\
NumHh & Household & Year & integer & Number of households (non-group quarters) \\
NumGq & Household & Year & integer & Number of people in non-institutional group quarters \\
HhId & Household & Year & character & Unique household ID \\
Wkr15to19 & Household & Year & integer & Workers in 15 to 19 year old age group \\
Wkr20to29 & Household & Year & integer & Workers in 20 to 29 year old age group \\
Wkr30to54 & Household & Year & integer & Workers in 30 to 54 year old age group \\
Wkr55to64 & Household & Year & integer & Workers in 55 to 64 year old age group \\
Wkr65Plus & Household & Year & integer & Workers in 65 or older age group \\
Workers & Household & Year & integer & Total workers \\
NumWkr & Household & Year & integer & Number of workers residing in the zone \\
LifeCycle & Household & Year & character & Household life cycle as defined by 2009 NHTS LIF\_CYC variable \\
Income & Household & Year & integer & Total annual household (non-qroup \& group quarters) income \\
\bottomrule()
\end{longtable}

If a third-party population synthesizer is used, the results must match the above table, and be converted to the VisionEval format.

\hypertarget{PopulationSim}{%
\section{PopulationSim}\label{PopulationSim}}

There are a variety of third-party population synthesizers available as commercial or open source products. This guide will go through integration with the open source synthesizer PopulationSim (\url{https://activitysim.github.io/populationsim/}). PopulationSim is also maintained through a consortium of government agencies. For more information see \url{https://activitysim.github.io/}.

Although it is feasible that other synthesizers can be used, this documentation and integration scripts will be tailored to the inputs and outputs of PopulationSim (as part of Task 5.2). PopulationSim is fundamentally similar to the population synthesizer in VisionEval's VESimHouseholds package in that it takes a disaggregated sample data seed and iteratively expands and fits it to aggregated target totals. However, unlike VisionEval, PopulationSim will output separate tables for both persons and households.

PopulationSim operates within working-directory with the following structure:

\begin{itemize}
\tightlist
\item
  Working Directory Contents:
\end{itemize}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 2\tabcolsep) * \real{0.1947}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 2\tabcolsep) * \real{0.8053}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
File
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule()
\endhead
run\_populationsim.py & Python script that orchestrates a PopulationSim run \\
/configs & Sub-directory containing control specifications and configuration settings \\
/configs\_mp & Sub-directory containing configuration settings for running multi-processed if applicable \\
/data & Sub-directory containing all input files \\
/output & Sub-directory containing all outputs, summaries and intermediate files \\
\bottomrule()
\end{longtable}

The key input and output files are:

\begin{itemize}
\tightlist
\item
  \emph{/data} Sub-directory Contents:
\end{itemize}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 2\tabcolsep) * \real{0.1987}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 2\tabcolsep) * \real{0.8013}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
File
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule()
\endhead
control\_totals\_GEOG\_NAME.csv & Marginal control totals at each spatial resolution named \emph{GEOG\_NAME} (e.g., control\_totals\_tract or control\_totals\_taz) \\
geo\_crosswalk.csv & Geographic cross-walk file \\
seed\_households.csv & Seed sample of households \\
seed\_persons.csv & Seed sample of persons \\
\bottomrule()
\end{longtable}

\begin{itemize}
\tightlist
\item
  \emph{/output} Sub-directory Contents (populated at the end of a PopulationSim run):\\
  This sub-directory is populated at the end of the PopulationSim run. The output can return a variety of useful outputs, such as summary of fit or weights, see \href{https://activitysim.github.io/populationsim/application_configuration.html\#inputs-outputs}{PopulationSim inputs and outputs} for a more detailed list of outputs and configuration. Below are the most critical outputs that can be fed into VESimHouseholds.
\end{itemize}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 2\tabcolsep) * \real{0.3333}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 2\tabcolsep) * \real{0.6667}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
File
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule()
\endhead
synthetic\_households.csv & Fully expanded synthetic population of households. \\
synthetic\_persons.csv & Fully expanded synthetic population of persons. \\
\bottomrule()
\end{longtable}

The geographic crosswalk file is used to convert between different spatial zones, such as which Census tracts are associated with each region. This input file is critical to translating the synthesized population to VisionEval's Azone/Bzone system.

\begin{longtable}[]{@{}lllll@{}}
\toprule()
TAZ & BLOCK GROUP & TRACT & PUMA & REGION \\
\midrule()
\endhead
475 & 3 & 100 & 600 & 1 \\
476 & 3 & 100 & 600 & 1 \\
232 & 45 & 100 & 600 & 1 \\
247 & 45 & 202 & 600 & 1 \\
\bottomrule()
\end{longtable}

\hypertarget{vepopulationsim}{%
\section{VEPopulationSim}\label{vepopulationsim}}

VEPopulationSim is an optional module containing a working PopulationSim example and an R script for processing the synthesized population and loading it into VisionEval

\hypertarget{ve-nhts}{%
\chapter{Using VE with Other Data Sets including more recent National Household Travel Surveys}\label{ve-nhts}}

\hypertarget{introduction-3}{%
\section{Introduction}\label{introduction-3}}

VE has been created to be a nationally valid model that can be customized and calibrated to meet the local and regional needs of any model application. Key elements of VE have been designed and estimated using the 2001 National Household Travel Survey. The model specification, the explanatory variables, and model coefficients for several models within VE modules were originally estimated using the 2001 data and are still used in the current version of VE. over 20 years after the 2001 NHTS data were collected. Since then, two further rounds of NHTS data have been collected, in 2009, and 2017, and a new NHTS survey is being implemented in 2022. This document has been created to summarize the efforts to update the core VE platform to use the 2017 NHTS as a proof of concept to understand the feasbility of updating the survey data used in VE to either later versions of the NHTS or an alternative data source such as a regional household travel survey.

The following topics are discussed below:

\begin{itemize}
\item
  A generalized VENHTS module that allows model users to select a specifc version of the NHTS. This module has been prototyped in this task and incorporates the original processing work on the 2001 NHTS that was previously part of the VE2001NHTS module and adds processing of the 2017 NHTS. This document provides an brief overview of how the module functions.
\item
  A comparison between the 2001 NHTS and 2017 NHTS to explain the differences between the two datasets. The document also discusses how the 2017 data are made backwards compatible with the existing 2001 NHTS data framework in VisionEval.
\item
  To test the 2017 NHTS, two versions of the model were run: the original version of the model based on the 2001 NHTS and a new version based on the 2017 NHTS. The comparison uses the example Rogue Valley VERSPM model incorporated in VE.
\item
  An overview of differences in the estimation results between VE model's estimated using the 2001 and 2017 NHTS. This includes some discussion of the difficulties of working within the existing VE modules to extract and compare model estimation results given the non-standard model objects structures that are saved and used in model application.
\end{itemize}

This work builds on some past efforts to explore updates to individual VE modules. For example, the Multimodal Module was developed by Portland State University using the 2009 NHTS. That update included creating a new travel demand model design as well as updating the estimation dataset from the 2001 NHTS to 2009 and also updating other datasets to describe land use and transportation supply. While that effort was an extensive effort to research, re-specify, and re-estimate a single module, the work in this task is an attempt at a broader re-estimation without any re-specification of models, in order to see whether this type of update is possible, what level of effort it requires, and the impacts on the results from a VE model application.

The NHTS is the major estimation dataset used in the models that comprise VE. Therefore, updating the version of the NHTS or considering replacing the NHTS with an alternative household travel survey dataset is an extremely significant change to the model framework with the potential to change the results from many of the modules in the VE system. Given the number of models estimated using the NHTS, it is difficult to predict the effects of updating the dataset. \ldots{}

The discussion in this document highlights difficulties found in replacing the 2001 NHTS data with an ostensibly very similar dataset, the 2017 NHTS. Once straightforward changes between the two datasets had been dealt with, including some renaming and recoding of variables, there were more important changes to the NHTS that caused estimation problems. This included the lack of a home type variable, that describes the type of structure (e.g., single family home) that the household lives in and that had been used as an explanatory variable in models in the framework. While this was dealt with in this effort by imputing values for home type based on the relationship between home type and other household variables observed in the survey. a more supportable approach would be to re=specify the models that used that variable. If a user were to attempt to replace the NHTS data with other locally collected household travel survey data, it is likely that the number of missing variables would be higher than one and that additional models would requuire respecification,

An additional and more nuanced problem than an entirely missing variable is a change in handling of younger household members in the NHTS and in particular whether there were under 18s in the household who were licensed drivers. A slight change in the dataset led to a estimation error due to a coding assumption based on the structure of the 2001 dataset that no longer held in 2017. While it was ultimately resolved, the error is indicative of potential problems in repurposing code written to work with one dataset. Given the extensive number of models and estimation scripts used throughout the VE system, it was impossible in this effort to carefully step through the estimation of each model with the new dataset, and instead errors in the build process and a review of model results were relied upon to evaluate whether the estimation process was successful.

Ultimately and as documented below, it was possible to complete a model build using the 2017 NHTS as processed by the new VENHTS package. The build process updated the estimation of the models that are based on the NHTS. That newly built model ran successfully, and as shown in the comparison of results, the results are moderately different for some performance metrics.

It was not possible to in this task to do a model by model review of the impact on the estimated model results due to the change in dataset. Some efforts were made to provide tools that support comparison of the estimated models, however the approach taken in saving many of the esitmated model objects using reduced size model objects that only contain the elements required for application mean that meaningful comparisons after the build process had run its course is difficult.

While it has been demonstrated that it is possible to update the NHTS data to a newer version and then re-estimate and run VE, it is a somewhat difficult process that required some imputation in the data to add a variable that is no longer collected in the NHTS, some debugging to isolate estimation failures and their causes, and grappling with non-standard model object formats in order to understand the reasonableness of the newly estimated models. This generally points to some considerations for users and the future development of the VE framework:

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\item
  It is feasible that VE could be updated to new versions of the NHTS (e.g., 2017 or 2022 when it becomes available), although rather than the simple re-estimation without re-specification approach taken here it would be preferable to at least respecify models that include now missing explanatory variables such as home type.
\item
  Coding differences between the datasets need to be carefully considering and any models that use variables that have been recoded or collected using different parameters should be very carefully explored and considered fof respecificaiton as opposed to relying on the more automated re-estimation relied upon here.
\item
  For a comprehensive comparison of model estimation across model versions to be successful, it is recommended that complete model objects are saved during the estimation process. This might be included as an option during the build process if it is important to retain the more compact application ready model objects that are currently exported.
\item
  Given the effort required to update the model system with a later version of the NHTS, which, despite the differences discussed here, was still very similar to the 2001 data, it is likely to be difficult for model users to successfully incorporate a local household travel survey. However, it would be reasonable to focus on a more targetted update to individual modules.
\item
  The intial comparison of the results from the 2001 and 2017 applications of RSPM suggest (in a very preliminary finding) that updating the estimation data source moderately (as opoosed to significantly) affects the outputs of the model. This effort did not include the more extenstive sensitivity testing and validation that should be considered for the transition to a new estimation dataset.
\end{enumerate}

\hypertarget{venhts-module-documentation}{%
\section{VENHTS Module Documentation}\label{venhts-module-documentation}}

The VENHTS module is a modified version of the original VE2001NHTS module, which provides three critical changes.

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  Includes a processed 2017 version of NHTS dataset for VisionEval (VE).
\item
  Refactors VisionEval to use the more generic VENHTS module rather than the 2001 specific module.
\item
  Generalizes the data ingestion process to make switching between 2001, 2017, and potential future versions more easily.
\end{enumerate}

This document provides an brief overview of how the module functions and how the 2017 data are made backwards compatible with existing 2001 NHTS data framework in VisionEval.

While this module does not ``future proof'' any future NHTS data releases, or third-party household travel surveys, the purpose is to provide a transparent documentation of methods for users if they wish to format future NHTS data or inject their own datasets.

\hypertarget{overview-3}{%
\subsection{Overview}\label{overview-3}}

A key element for users to understand about VisionEval is that modules can have multiple dependencies both upstream, downstream, and in parallel throughout the VisionEval ecosystem. Data in the VENHTS (previously VE2001NHTS) are used in several downstream VE packages. Simply swapping out the data in a module does not only affect that module, but can have cascading impacts if the data are insufficient in subsequent models. Conversely, to have changes be reflected in downstream modules, they must also be re-built using the new upstream data (see build process {[}LINK{]}).

Below is a general diagram of how NHTS data feeds through the VE ecosystem.

\includegraphics{15-VENHTS_files/figure-latex/diagram-1.pdf}

While most of the VisionEval ecosystem likely uses NHTS data or a derivative at some stage, there are currently only four primary modules that NHTS data are directly fed into:

\begin{itemize}
\tightlist
\item
  VEHouseholdTravel
\item
  VEHouseholdVehicles
\item
  VEPowertrainsAndFuels
\item
  VELandUse
\end{itemize}

This narrows the number of ``entry points'' that need to be closely monitored to ensure successful building using the new data.

\hypertarget{module-contents}{%
\subsection{Module Contents}\label{module-contents}}

The VEHNHTS module contains a single R script \texttt{MakeNHTSDataset.R}. This R scripts is organized into 5 primary stages:

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\item
  \textbf{Function Definition}
\item
  \textbf{Fetching of NHTS Data from web}
\item
  \textbf{Load Metropolitan Road and Transit data}
\item
  \textbf{Process Datasets}
\item
  \textbf{Save Datasets}
\end{enumerate}

In general, the script is largely the same as the previous \texttt{Make2001NHTSDataset.R}, but has been extended and reorganized to allow users to switch between data inputs using the \texttt{NHTSYEAR} parameter.

\hypertarget{pre-processing-of-nhts-2017-for-visioneval}{%
\subsection{Pre-processing of NHTS 2017 for VisionEval}\label{pre-processing-of-nhts-2017-for-visioneval}}

For the most part, most columns remain intact between 2017 and 2001 NHTS. However, there are many derived features (e.g., aggregate number of persons at the household level), relabeled features, removed redundancies, and occasionally remove altogether. The table below provides an overall summary ``crosswalk'' of NHTS 2001 to 2017 columns. For further data attribute details, see the 2001 and 2017 NHTS codebooks:

\begin{itemize}
\tightlist
\item
  \href{https://nhts.ornl.gov/assets/codebook_v1.2.pdf}{2001 NHTS Codebook}
\item
  \href{https://nhts.ornl.gov/2001/usersguide/UsersGuide.pdf}{2017 NHTS Codebook}
\end{itemize}

\hypertarget{to-2017-column-crosswalk}{%
\subsubsection{2001 to 2017 Column crosswalk}\label{to-2017-column-crosswalk}}

\hypertarget{vehicle-file}{%
\paragraph*{vehicle file}\label{vehicle-file}}
\addcontentsline{toc}{paragraph}{vehicle file}

\begin{longtable}[]{@{}lll@{}}
\toprule()
NHTS2001 & NHTS2017 & Notes \\
\midrule()
\endhead
HOUSEID & HOUSEID & \\
VEHID & VEHID & \\
BESTMILE & BESTMILE & \\
EIADMPG & FEGEMPG & \\
GSCOST & GSCOST & \\
VEHTYPE & VEHTYPE & \\
VEHYEAR & VEHYEAR & \\
VEHMILES & ANNMILES & \\
\bottomrule()
\end{longtable}

\hypertarget{daytrip-file}{%
\subsubsection*{day/trip file}\label{daytrip-file}}
\addcontentsline{toc}{subsubsection}{day/trip file}

\begin{longtable}[]{@{}lll@{}}
\toprule()
NHTS2001 & NHTS2017 & Notes \\
\midrule()
\endhead
HOUSEID & HOUSEID & \\
TDCASEID & TDCASEID & \\
VEHID & VEHID & \\
VEHUSED & VEHID & \\
TRPHHVEH & TRPHHVEH & \\
PERSONID & PERSONID & \\
NUMONTRP & NUMONTRP & \\
TRPTRANS & TRPTRANS & \\
TRPMILES & TRPMILES & \\
TRVL\_MIN & TRVLCMIN & \\
DWELTIME & DWELTIME & \\
PSGR\_FLG & PSGR\_FLG & \\
WHYFROM & WHYFROM & \\
WHYTO & WHYTO & \\
VEHTYPE & VEHTYPE & \\
\bottomrule()
\end{longtable}

\hypertarget{persons-file}{%
\subsubsection*{Persons file}\label{persons-file}}
\addcontentsline{toc}{subsubsection}{Persons file}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 4\tabcolsep) * \real{0.2941}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 4\tabcolsep) * \real{0.3529}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 4\tabcolsep) * \real{0.3529}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
NHTS2001
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
NHTS2017
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Notes
\end{minipage} \\
\midrule()
\endhead
HOUSEID & HOUSEID & \\
PERSONID & PERSONID & \\
COMMDRVR & & Missing, assumed ``-8=Don't Know'' \\
NBIKETRP & NBIKETRP & \\
NWALKTRP & NWALKTRP & \\
USEPUBTR & USEPUBTR & \\
WRKDRIVE & & Missing, assumed ``-8=Don't Know'' \\
WRKTRANS & WRKTRANS & \\
WORKER & WORKER & \\
DTGAS & & Derived from PRICE variable in households file \\
DISTTOWK & DISTTOWK17 & \\
DRIVER & DRIVER & \\
R\_AGE & R\_AGE & \\
R\_SEX & R\_SEX & \\
\bottomrule()
\end{longtable}

\hypertarget{households-file}{%
\subsubsection*{Households file}\label{households-file}}
\addcontentsline{toc}{subsubsection}{Households file}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 4\tabcolsep) * \real{0.2941}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 4\tabcolsep) * \real{0.3529}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 4\tabcolsep) * \real{0.3529}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
NHTS2001
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
NHTS2017
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Notes
\end{minipage} \\
\midrule()
\endhead
HOUSEID & HOUSEID & \\
AGE\_P1 & & Derived from persons file \\
AGE\_P2 & & Derived from persons file \\
AGE\_P3 & & Derived from persons file \\
AGE\_P4 & & Derived from persons file \\
AGE\_P5 & & Derived from persons file \\
AGE\_P6 & & Derived from persons file \\
AGE\_P7 & & Derived from persons file \\
AGE\_P8 & & Derived from persons file \\
AGE\_P9 & & Derived from persons file \\
AGE\_P10 & & Derived from persons file \\
AGE\_P11 & & Derived from persons file \\
AGE\_P12 & & Derived from persons file \\
AGE\_P13 & & Derived from persons file \\
AGE\_P14 & & Derived from persons file \\
CENSUS\_D & CENSUS\_D & \\
CENSUS\_R & CENSUS\_R & \\
DRVRCNT & DRVRCNT & \\
DRV\_P1 & & Derived from persons file \\
DRV\_P2 & & Derived from persons file \\
DRV\_P3 & & Derived from persons file \\
DRV\_P4 & & Derived from persons file \\
DRV\_P5 & & Derived from persons file \\
DRV\_P6 & & Derived from persons file \\
DRV\_P7 & & Derived from persons file \\
DRV\_P8 & & Derived from persons file \\
DRV\_P9 & & Derived from persons file \\
DRV\_P10 & & Derived from persons file \\
DRV\_P11 & & Derived from persons file \\
DRV\_P12 & & Derived from persons file \\
DRV\_P13 & & Derived from persons file \\
DRV\_P14 & & Derived from persons file \\
EXPFLHHN & WTHHFIN & \\
EXPFLLHH & WTHHFIN & \\
FLGFINCM & & Assumed ``1=Yes'' all household members incomes are reported \\
HBHRESDN & HBRESDN & \\
HBHUR & HBHUR & \\
HBPPOPDN & HBPPOPDN & \\
HHC\_MSA & HH\_CBSA & Derived from msa\_xwalk of HH\_CBSA \\
HHFAMINC & HHFAMINC & \\
HHINCTTL & HHFAMINC & \\
HHNUMBIK & & Missing, assumed ``-8=Don't Know'' \\
HHR\_AGE & & Derived from persons file \\
HHR\_DRVR & & Derived from persons file \\
HHR\_RACE & HH\_RACE & Derived from persons file \\
HHR\_SEX & & Derived from persons file \\
HHSIZE & HHSIZE & \\
HHVEHCNT & HHVEHCNT & \\
HOMETYPE & & Missing, critical column that must be imputed \\
HTEEMPDN & HTEEMPDN & \\
HTHRESDN & HTRESDN & \\
HTHUR & HBHUR & \\
HTPPOPDN & HTPPOPDN & \\
LIF\_CYC & LIF\_CYC & \\
MSAPOP & & Imputed as mean value of MSASIZE bins \\
MSACAT & MSACAT & \\
MSASIZE & MSASIZE & \\
RAIL & RAIL & \\
RATIO16V & & Derived from persons and households table \\
URBAN & URBAN & \\
URBRUR & URBRUR & \\
WRKCOUNT & WRKCOUNT & \\
WKR\_P1 & & Derived from persons file \\
WKR\_P2 & & Derived from persons file \\
WKR\_P3 & & Derived from persons file \\
WKR\_P4 & & Derived from persons file \\
WKR\_P5 & & Derived from persons file \\
WKR\_P6 & & Derived from persons file \\
WKR\_P7 & & Derived from persons file \\
WKR\_P8 & & Derived from persons file \\
WKR\_P9 & & Derived from persons file \\
WKR\_P10 & & Derived from persons file \\
WKR\_P11 & & Derived from persons file \\
WKR\_P12 & & Derived from persons file \\
WKR\_P13 & & Derived from persons file \\
WKR\_P14 & & Derived from persons file \\
CNTTDHH & CNTTDHH & \\
\bottomrule()
\end{longtable}

\hypertarget{cbsa-to-msa-crosswalk}{%
\subsubsection{CBSA to MSA Crosswalk}\label{cbsa-to-msa-crosswalk}}

VisionEval uses Metropolitan Statistical Areas (MSA) to join road and transit data onto NHTS data. However, the 2017 version of NHTS uses core based statistical areas (CBSA), which include both MSAs and the smaller micropolitan statistical areas. To make the 2017 NHTS data backwards compatible, a CBSA to MSA crosswalk was used to aggregate CBSAs in the 2017 NHTS data to MSAs.

\hypertarget{feature-derivations}{%
\subsubsection{Feature Derivations}\label{feature-derivations}}

Derived features require no imputation, but are created by joining and aggregating or calculating the data to create the new column as necessary. For example, the age group columns (e.g., AGE\_P1-14, DRV\_P1-14, and WKR\_P1-14) are created by joining the persons table to the households table on \texttt{HOUSEID}, then tabulating the number of persons in each age group in each household.

\hypertarget{imputation-of-missing-hometype-column}{%
\subsubsection{\texorpdfstring{Imputation of Missing \texttt{HOMETYPE} column}{Imputation of Missing HOMETYPE column}}\label{imputation-of-missing-hometype-column}}

There are several missing data variables in the 2017 data since the 2001 version:

\begin{itemize}
\item
  \texttt{HOMETYPE}: Housing structure type (e.g., Single Family, Duplex, Multi-Family, etc.)
\item
  \texttt{COMMDRV}: Commercial driver
\item
  \texttt{WRKDRIVE}: Driving required for work
\item
  \texttt{HHNUMBIK}: Number of bicycles in household
\end{itemize}

One variable is absolutely critical to the current VisionEval model: \texttt{HOMETYPE}. This variable used in the downstream models and will cause estimations in downstream models to fail.

\hypertarget{module-build-status}{%
\subsection{Module Build status}\label{module-build-status}}

Below is a summary of build results if \texttt{HOMETYPE} is missing.

\hypertarget{vehouseholdvehicles-1}{%
\subsubsection{VEHouseholdVehicles}\label{vehouseholdvehicles-1}}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.3867}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.4000}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1200}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.0933}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
R script
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Model
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Outcome
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Notes
\end{minipage} \\
\midrule()
\endhead
AdjustVehicleOwnership & None (adjustment) & Success & \\
AssignDrivers & lm in estimateDriverModel & Warning message: In predict.lm(object, newdata, se.fit, scale = 1, type = if (type == : prediction from a rank-deficient fit may be isleading & Missing Hometype causes error. \\
AssignVehicleAge & None (assignment) & Success with minor modification to ``vehyear'' & \\
AssignVehicleFeatures & None (assignment) & Success & \\
AssignVehicleFeaturesFuture & None (assignment) & Success & \\
AssignVehicleOwnership & clm \& glm & Success with warning on AutoOwnModels\_ls\$Metro\$Zero \textless- glm() & Missing Hometype causes error \\
AssignVehicleType & glm estimateVehicleTypeModel & Error (Error in `binarySearch' function to match target value) & Missing Hometype coefficient \\
CalculateVehicleOwnCost & None (calculation) & Success & \\
CreateVehicleTable & None (assignment) & Success & \\
Finalize & None (assignment) & Success & \\
\bottomrule()
\end{longtable}

\hypertarget{vehouseholdtravel-1}{%
\subsubsection{VEHouseholdTravel}\label{vehouseholdtravel-1}}

\begin{longtable}[]{@{}llll@{}}
\toprule()
R script & Model & Outcome & Notes \\
\midrule()
\endhead
ApplyDvmtReductions & None (assignment) & Success & \\
CalculateAltModeTrips & Hurdle & Success & \\
CalculateHouseholdDvmt & BinarySearch & Success & \\
CalculateInducedDemand & None (calculation) & Success & \\
CalculatePolicyVmt & None (calculation) & Success & \\
CalculateTravelDemand & None (calculation) & Success & \\
CalculateTravelDemandFuture & None (calculation) & Success & \\
CalculateVehicleTrips & None (calculation) & Success & \\
DivertSovTravel & ZeroSov\_GLM & Success & \\
Initialize & None & Success & \\
LoadDefaultValues & None & Success & \\
\bottomrule()
\end{longtable}

\hypertarget{vepowertrainsandfuel}{%
\subsubsection{VEPowertrainsAndFuel}\label{vepowertrainsandfuel}}

\begin{longtable}[]{@{}llll@{}}
\toprule()
R script & Model & Outcome & Notes \\
\midrule()
\endhead
Initialize & None & Success & \\
LoadDefaultValues & None & Success & \\
CalculateCarbonIntensity & None (calculation) & Success & \\
AssignHhVehiclePowertrain & None (assignment) & Success & \\
\bottomrule()
\end{longtable}

\hypertarget{velanduse-1}{%
\subsubsection{VELandUse}\label{velanduse-1}}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.2329}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.2329}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.3014}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.2329}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
R script
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Model
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Outcome
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Notes
\end{minipage} \\
\midrule()
\endhead
AssignCarSvcAvailability & None (assignment) & Success & \\
AssignDemandManagement & None (assignment) & Success & \\
AssignDevTypes & None (assignment) & Success & \\
AssignLocTypes & None (assignment) & Success & \\
AssignParkingRestrictions & None (assignment) & Success & \\
Calculate4DMeasures & None (calculation) & Success & \\
CalculateBasePlaceTypes & None (calculation) & Success & \\
CalculateFuturePlaceTypes & None (calculation) & Success & \\
CalculateUrbanMixMeasure & CalculateUrbanMixMeasure binarySearch & Error (Error in `binarySearch' function to match target value) & Likely due to missing Hometype \\
LocateEmployment & None (assignment) & Success & \\
PredictHousing & HouseTypeModel glm & Success & but doubt results given missing Hometype variable \\
\bottomrule()
\end{longtable}

\hypertarget{summary-results}{%
\subsection{Summary results}\label{summary-results}}

To provide an overview of NHTS 2001 to 2017 results, below are comparative plots for each data column between data sets:

\includegraphics[width=1\linewidth,height=0.2\textheight]{15-VENHTS_files/figure-latex/hh_plots-1}
\includegraphics[width=1\linewidth,height=0.2\textheight]{15-VENHTS_files/figure-latex/hh_plots-2}
\includegraphics[width=1\linewidth,height=0.2\textheight]{15-VENHTS_files/figure-latex/hh_plots-3}
\includegraphics[width=1\linewidth,height=0.2\textheight]{15-VENHTS_files/figure-latex/hh_plots-4}
\includegraphics[width=1\linewidth,height=0.2\textheight]{15-VENHTS_files/figure-latex/hh_plots-5}
\includegraphics[width=1\linewidth,height=0.2\textheight]{15-VENHTS_files/figure-latex/hh_plots-6}
\includegraphics[width=1\linewidth,height=0.2\textheight]{15-VENHTS_files/figure-latex/hh_plots-7}
\includegraphics[width=1\linewidth,height=0.2\textheight]{15-VENHTS_files/figure-latex/hh_plots-8}
\includegraphics[width=1\linewidth,height=0.2\textheight]{15-VENHTS_files/figure-latex/hh_plots-9}
\includegraphics[width=1\linewidth,height=0.2\textheight]{15-VENHTS_files/figure-latex/hh_plots-10}

\hypertarget{model-results}{%
\subsection{Model results}\label{model-results}}

To test the 2017 NHTS, the two versions of the model were run, the original version of the model with 2001 NHTS and the new version with 2017 NHTS. Below are comparative plots showing select 2010 results from the VERSPM model:

\includegraphics[width=1\linewidth,height=0.2\textheight]{15-VENHTS_files/figure-latex/plots_results-1}
\includegraphics[width=1\linewidth,height=0.2\textheight]{15-VENHTS_files/figure-latex/plots_results-2}
\includegraphics[width=1\linewidth,height=0.2\textheight]{15-VENHTS_files/figure-latex/plots_results-3}
\includegraphics[width=1\linewidth,height=0.2\textheight]{15-VENHTS_files/figure-latex/plots_results-4}
\includegraphics[width=1\linewidth,height=0.2\textheight]{15-VENHTS_files/figure-latex/plots_results-5}
\includegraphics[width=1\linewidth,height=0.2\textheight]{15-VENHTS_files/figure-latex/plots_results-6}
\includegraphics[width=1\linewidth,height=0.2\textheight]{15-VENHTS_files/figure-latex/plots_results-7}
\includegraphics[width=1\linewidth,height=0.2\textheight]{15-VENHTS_files/figure-latex/plots_results-8}
\includegraphics[width=1\linewidth,height=0.2\textheight]{15-VENHTS_files/figure-latex/plots_results-9}
\includegraphics[width=1\linewidth,height=0.2\textheight]{15-VENHTS_files/figure-latex/plots_results-10}
\includegraphics[width=1\linewidth,height=0.2\textheight]{15-VENHTS_files/figure-latex/plots_results-11}
\includegraphics[width=1\linewidth,height=0.2\textheight]{15-VENHTS_files/figure-latex/plots_results-12}
\includegraphics[width=1\linewidth,height=0.2\textheight]{15-VENHTS_files/figure-latex/plots_results-13}
\includegraphics[width=1\linewidth,height=0.2\textheight]{15-VENHTS_files/figure-latex/plots_results-14}
\includegraphics[width=1\linewidth,height=0.2\textheight]{15-VENHTS_files/figure-latex/plots_results-15}
\includegraphics[width=1\linewidth,height=0.2\textheight]{15-VENHTS_files/figure-latex/plots_results-16}
\includegraphics[width=1\linewidth,height=0.2\textheight]{15-VENHTS_files/figure-latex/plots_results-17}
\includegraphics[width=1\linewidth,height=0.2\textheight]{15-VENHTS_files/figure-latex/plots_results-18}
\includegraphics[width=1\linewidth,height=0.2\textheight]{15-VENHTS_files/figure-latex/plots_results-19}
\includegraphics[width=1\linewidth,height=0.2\textheight]{15-VENHTS_files/figure-latex/plots_results-20}
\includegraphics[width=1\linewidth,height=0.2\textheight]{15-VENHTS_files/figure-latex/plots_results-21}
\includegraphics[width=1\linewidth,height=0.2\textheight]{15-VENHTS_files/figure-latex/plots_results-22}
\includegraphics[width=1\linewidth,height=0.2\textheight]{15-VENHTS_files/figure-latex/plots_results-23}
\includegraphics[width=1\linewidth,height=0.2\textheight]{15-VENHTS_files/figure-latex/plots_results-24}
\includegraphics[width=1\linewidth,height=0.2\textheight]{15-VENHTS_files/figure-latex/plots_results-25}
\includegraphics[width=1\linewidth,height=0.2\textheight]{15-VENHTS_files/figure-latex/plots_results-26}
\includegraphics[width=1\linewidth,height=0.2\textheight]{15-VENHTS_files/figure-latex/plots_results-27}
\includegraphics[width=1\linewidth,height=0.2\textheight]{15-VENHTS_files/figure-latex/plots_results-28}
\includegraphics[width=1\linewidth,height=0.2\textheight]{15-VENHTS_files/figure-latex/plots_results-29}
\includegraphics[width=1\linewidth,height=0.2\textheight]{15-VENHTS_files/figure-latex/plots_results-30}
\includegraphics[width=1\linewidth,height=0.2\textheight]{15-VENHTS_files/figure-latex/plots_results-31}
\includegraphics[width=1\linewidth,height=0.2\textheight]{15-VENHTS_files/figure-latex/plots_results-32}
\includegraphics[width=1\linewidth,height=0.2\textheight]{15-VENHTS_files/figure-latex/plots_results-33}
\includegraphics[width=1\linewidth,height=0.2\textheight]{15-VENHTS_files/figure-latex/plots_results-34}

\hypertarget{estimation-comparison}{%
\subsection{Estimation Comparison}\label{estimation-comparison}}

A proof of concept script has been developed to import the model objects from two builds of VE, in this case the original 2001 version of the model and the build completed with the 2017 NHTS dataset. This provides a structured list holding the estimated model objects from every module, an indication of whether the model objects changed between the reference and updated model version, and then some example comparisons between model objects.

However, the ability to carry out a comprehensive comparison between models is limited by the removal of many of the estimation outputs from the model objects during their reformatting to smaller objects for application purposes.

The tables below show some example comparisons between the auto ownership models in the VEHouseholdVehicles package, listing the model objects, a summary of the variables in the models that have changed signficantly, and then a more comprehensive comparison between the two sets of models. In general, it is recommended that model users compare:

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  Overal model fit statistics (such as R squared from a linear regression, Rho squared from a logit model, or other statistics such as AIC)
\item
  Coefficient level changes between models such as changes in sign and magnitude
\item
  Changes in coefficient statistical significance
\item
  Fit between the model's predicted values and the estimation dataset or an independent validation dataset
\item
  Changes in overall model sensitivity and the reasonable of model forecasts given changes in inputs.
\end{enumerate}

\begin{tabular}{l|l}
\hline
Segment & ModelComponent\\
\hline
Metro & Count\\
\hline
Metro & Zero\\
\hline
NonMetro & Count\\
\hline
NonMetro & Zero\\
\hline
\end{tabular}

\begin{tabular}{l|l|l|l|r|r|r}
\hline
Issue & Segment & Level & Coefficient & RefValue & AltValue & AltRefRatio\\
\hline
Ratio & Metro & Count & OnlyElderly & -0.4343603 & -0.2114432 & 0.4867922\\
\hline
Ratio & NonMetro & Count & OnlyElderly & -0.3525591 & -0.1457088 & 0.4132889\\
\hline
Ratio & NonMetro & Zero & Workers & 0.3208045 & 0.0546783 & 0.1704413\\
\hline
\end{tabular}

\begin{tabular}{l|l|l|r|r|r|r|r|r|r|r|r}
\hline
Segment & Level & Coefficient & RefValue & AltValue & AltRefRatio & AltMissing & AltExtra & AltNumerical & AltSign & AltRatio & AltZero\\
\hline
Metro & Count & Drivers & 2.3220340 & 2.5067819 & 1.0795630 & 0 & 0 & 0 & 0 & 0 & 0\\
\hline
Metro & Count & HhSize & -0.0635976 & -0.0811381 & 1.2758036 & 0 & 0 & 0 & 0 & 0 & 0\\
\hline
Metro & Count & IsSF & 0.7784887 & 1.0713438 & 1.3761841 & 0 & 0 & 0 & 0 & 0 & 0\\
\hline
Metro & Count & IsUrbanMixNbrhd & -0.2344384 & -0.2553899 & 1.0893689 & 0 & 0 & 0 & 0 & 0 & 0\\
\hline
Metro & Count & LogDensity & -0.2022960 & -0.2216501 & 1.0956718 & 0 & 0 & 0 & 0 & 0 & 0\\
\hline
Metro & Count & LogIncome & 0.5090310 & 0.4471605 & 0.8784545 & 0 & 0 & 0 & 0 & 0 & 0\\
\hline
Metro & Count & OnlyElderly & -0.4343603 & -0.2114432 & 0.4867922 & 0 & 0 & 0 & 0 & 1 & 0\\
\hline
Metro & Count & TranRevMiPC & -0.0031226 & -0.0035905 & 1.1498435 & 0 & 0 & 0 & 0 & 0 & 0\\
\hline
Metro & Count & Workers & 0.2402913 & 0.1899233 & 0.7903877 & 0 & 0 & 0 & 0 & 0 & 0\\
\hline
Metro & Count & spacing & 2.9986979 & 2.9526127 & 0.9846316 & 0 & 0 & 0 & 0 & 0 & 0\\
\hline
Metro & Count & threshold.1 & 7.6808800 & 7.5422560 & 0.9819521 & 0 & 0 & 0 & 0 & 0 & 0\\
\hline
Metro & Zero & (Intercept) & 1.3479761 & 2.3620043 & 1.7522597 & 0 & 0 & 0 & 0 & 0 & 0\\
\hline
Metro & Zero & Drivers & -3.1934155 & -3.5173323 & 1.1014327 & 0 & 0 & 0 & 0 & 0 & 0\\
\hline
Metro & Zero & IsSF & -0.6828295 & -0.9968010 & 1.4598096 & 0 & 0 & 0 & 0 & 0 & 0\\
\hline
Metro & Zero & IsUrbanMixNbrhd & 0.8392378 & 0.9345301 & 1.1135463 & 0 & 0 & 0 & 0 & 0 & 0\\
\hline
Metro & Zero & LogDensity & 0.2397772 & 0.1798761 & 0.7501800 & 0 & 0 & 0 & 0 & 0 & 0\\
\hline
Metro & Zero & LogIncome & -0.3664756 & -0.3731444 & 1.0181974 & 0 & 0 & 0 & 0 & 0 & 0\\
\hline
Metro & Zero & LowInc & 0.7591368 & 0.8674113 & 1.1426285 & 0 & 0 & 0 & 0 & 0 & 0\\
\hline
Metro & Zero & TranRevMiPC & 0.0149916 & 0.0191049 & 1.2743736 & 0 & 0 & 0 & 0 & 0 & 0\\
\hline
Metro & Zero & Workers & 0.4328694 & 0.2375495 & 0.5487788 & 0 & 0 & 0 & 0 & 0 & 0\\
\hline
NonMetro & Count & Drivers & 2.0836896 & 2.1645289 & 1.0387962 & 0 & 0 & 0 & 0 & 0 & 0\\
\hline
NonMetro & Count & HhSize & -0.0594115 & -0.0720244 & 1.2122967 & 0 & 0 & 0 & 0 & 0 & 0\\
\hline
NonMetro & Count & IsSF & 0.7106803 & 1.0813859 & 1.5216207 & 0 & 0 & 0 & 0 & 0 & 0\\
\hline
NonMetro & Count & LogDensity & -0.1674575 & -0.1913169 & 1.1424803 & 0 & 0 & 0 & 0 & 0 & 0\\
\hline
NonMetro & Count & LogIncome & 0.5130301 & 0.4726901 & 0.9213691 & 0 & 0 & 0 & 0 & 0 & 0\\
\hline
NonMetro & Count & OnlyElderly & -0.3525591 & -0.1457088 & 0.4132889 & 0 & 0 & 0 & 0 & 1 & 0\\
\hline
NonMetro & Count & Workers & 0.2910797 & 0.1795622 & 0.6168832 & 0 & 0 & 0 & 0 & 0 & 0\\
\hline
NonMetro & Count & spacing & 2.6881890 & 2.4894124 & 0.9260556 & 0 & 0 & 0 & 0 & 0 & 0\\
\hline
NonMetro & Count & threshold.1 & 7.8178311 & 7.6999716 & 0.9849243 & 0 & 0 & 0 & 0 & 0 & 0\\
\hline
NonMetro & Zero & (Intercept) & 6.5275770 & 7.1751007 & 1.0991982 & 0 & 0 & 0 & 0 & 0 & 0\\
\hline
NonMetro & Zero & Drivers & -4.1134707 & -3.9736906 & 0.9660189 & 0 & 0 & 0 & 0 & 0 & 0\\
\hline
NonMetro & Zero & IsSF & -0.7794675 & -1.3192378 & 1.6924859 & 0 & 0 & 0 & 0 & 0 & 0\\
\hline
NonMetro & Zero & LogDensity & 0.1365824 & 0.1105022 & 0.8090514 & 0 & 0 & 0 & 0 & 0 & 0\\
\hline
NonMetro & Zero & LogIncome & -0.6529740 & -0.6376569 & 0.9765426 & 0 & 0 & 0 & 0 & 0 & 0\\
\hline
NonMetro & Zero & LowInc & 0.5656826 & 0.5210596 & 0.9211165 & 0 & 0 & 0 & 0 & 0 & 0\\
\hline
NonMetro & Zero & Workers & 0.3208045 & 0.0546783 & 0.1704413 & 0 & 0 & 0 & 0 & 1 & 0\\
\hline
\end{tabular}

  \bibliography{book.bib,packages.bib}

\end{document}
