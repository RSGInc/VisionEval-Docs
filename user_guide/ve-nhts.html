<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <title>Chapter 1 VENHTS Module Guidance | VE NHTS</title>

    <meta name="author" content="Nick Fournier" />
  
   
   <meta name="generator" content="placeholder" />
  <meta property="og:title" content="Chapter 1 VENHTS Module Guidance | VE NHTS" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 1 VENHTS Module Guidance | VE NHTS" />
  
  
  
  <!-- JS -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script>
  <script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script>
    <script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet" />
    <script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script>
    <script src="libs/bs3compat-0.3.1/transition.js"></script>
    <script src="libs/bs3compat-0.3.1/tabs.js"></script>
    <script src="libs/bs3compat-0.3.1/bs3compat.js"></script>
    <link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet" />
    <script src="libs/bs4_book-1.0.0/bs4_book.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script>

  <!-- CSS -->
  <style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
      <link rel="stylesheet" href="bs4_style.css" />
  
</head>

<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book">
    <a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start flex-column justify-content-between">
      <div class="p-2"><img id="cover" class="d-none d-lg-block" src="images/cover-small.png"></div>
      <div class="p-2"><h1><a href="index.html" title="">VE NHTS</a>
      </h1></div>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
      </form>

      <nav aria-label="Table of contents">
        <h2>Table of contents</h2>
        <div id="book-toc"></div>

        <div class="book-extra">
          <p><a id="book-repo" href="#">View book source <i class="fab fa-github"></i></a></li></p>
        </div>
      </nav>
    </div>
  </header>

  <main class="col-sm-12 col-md-9 col-lg-7" id="content">
<!--bookdown:title:end-->
<!--bookdown:title:start-->
<div id="ve-nhts" class="section level1" number="1">
<h1><span class="header-section-number">Chapter 1</span> VENHTS Module Guidance</h1>
<div id="introduction" class="section level2" number="1.1">
<h2><span class="header-section-number">1.1</span> Introduction</h2>
<p>The VENHTS module is a modified version of the original VE2001NHTS module, which provides three critical changes.</p>
<ol style="list-style-type: decimal">
<li>Includes a processed 2017 version of NHTS dataset for VisionEval (VE).</li>
<li>Refactors VisionEval to use the more generic VENHTS module rather than the 2001 specific module.</li>
<li>Generalizes the data ingestion process to make switching between 2001, 2017, and potential future versions more easily.</li>
</ol>
<p>This document provides an brief overview of how the module functions and how the 2017 data are made backwards compatible with existing 2001 NHTS data framework in VisionEval.</p>
<p>While this module does not “future proof” any future NHTS data releases, or third-party household travel surveys, the purpose is to provide a transparent documentation of methods for users if they wish to format future NHTS data or inject their own datasets.</p>
</div>
<div id="overview" class="section level2" number="1.2">
<h2><span class="header-section-number">1.2</span> Overview</h2>
<p>A key element for users to understand about VisionEval is that modules can have multiple dependencies both upstream, downstream, and in parallel throughout the VisionEval ecosystem. Data in the VENHTS (previously VE2001NHTS) are used in several downstream VE packages. Simply swapping out the data in a module does not only affect that module, but can have cascading impacts if the data are insufficient in subsequent models. Conversely, to have changes be reflected in downstream modules, they must also be re-built using the new upstream data (see build process [LINK]).</p>
<p>Below is a general diagram of how NHTS data feeds through the VE ecosystem.</p>
<p>While most of the VisionEval ecosystem likely uses NHTS data or a derivative at some stage, there are currently only four primary modules that NHTS data are directly fed into:</p>
<ul>
<li>VEHouseholdTravel</li>
<li>VEHouseholdVehicles</li>
<li>VEPowertrainsAndFuels</li>
<li>VELandUse</li>
</ul>
<p>This narrows the number of “entry points” that need to be closely monitored to ensure successful building using the new data.</p>
<div id="module-contents" class="section level3" number="1.2.1">
<h3><span class="header-section-number">1.2.1</span> Module Contents</h3>
<p>The VEHNHTS module contains a single R script <code>MakeNHTSDataset.R</code>. This R scripts is organized into 5 primary stages:</p>
<ol style="list-style-type: decimal">
<li><p><strong>Function Definition</strong></p></li>
<li><p><strong>Fetching of NHTS Data from web</strong></p></li>
<li><p><strong>Load Metropolitan Road and Transit data</strong></p></li>
<li><p><strong>Process Datasets</strong></p></li>
<li><p><strong>Save Datasets</strong></p></li>
</ol>
<p>In general, the script is largely the same as the previous <code>Make2001NHTSDataset.R</code>, but has been extended and reorganized to allow users to switch between data inputs using the <code>NHTSYEAR</code> parameter.</p>
</div>
</div>
<div id="pre-processing-of-nhts-2017-for-visioneval" class="section level2" number="1.3">
<h2><span class="header-section-number">1.3</span> Pre-processing of NHTS 2017 for VisionEval</h2>
<p>For the most part, most columns remain intact between 2017 and 2001 NHTS. However, there are many derived features (e.g., aggregate number of persons at the household level), relabeled features, removed redundancies, and occasionally remove altogether. The table below provides an overall summary “crosswalk” of NHTS 2001 to 2017 columns. For further data attribute details, see the 2001 and 2017 NHTS codebooks:</p>
<ul>
<li><a href="https://nhts.ornl.gov/assets/codebook_v1.2.pdf">2001 NHTS Codebook</a></li>
<li><a href="https://nhts.ornl.gov/2001/usersguide/UsersGuide.pdf">2017 NHTS Codebook</a></li>
</ul>
<div id="to-2017-column-crosswalk" class="section level4" number="1.3.0.1">
<h4><span class="header-section-number">1.3.0.1</span> 2001 to 2017 Column crosswalk</h4>
<table>
<colgroup>
<col width="20%" />
<col width="20%" />
<col width="20%" />
<col width="39%" />
</colgroup>
<thead>
<tr class="header">
<th>File</th>
<th>NHTS2001</th>
<th>NHTS2017</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>veh</td>
<td>HOUSEID</td>
<td>HOUSEID</td>
<td></td>
</tr>
<tr class="even">
<td>veh</td>
<td>VEHID</td>
<td>VEHID</td>
<td></td>
</tr>
<tr class="odd">
<td>veh</td>
<td>BESTMILE</td>
<td>BESTMILE</td>
<td></td>
</tr>
<tr class="even">
<td>veh</td>
<td>EIADMPG</td>
<td>FEGEMPG</td>
<td></td>
</tr>
<tr class="odd">
<td>veh</td>
<td>GSCOST</td>
<td>GSCOST</td>
<td></td>
</tr>
<tr class="even">
<td>veh</td>
<td>VEHTYPE</td>
<td>VEHTYPE</td>
<td></td>
</tr>
<tr class="odd">
<td>veh</td>
<td>VEHYEAR</td>
<td>VEHYEAR</td>
<td></td>
</tr>
<tr class="even">
<td>veh</td>
<td>VEHMILES</td>
<td>ANNMILES</td>
<td></td>
</tr>
<tr class="odd">
<td>day/trip</td>
<td>HOUSEID</td>
<td>HOUSEID</td>
<td></td>
</tr>
<tr class="even">
<td>day/trip</td>
<td>TDCASEID</td>
<td>TDCASEID</td>
<td></td>
</tr>
<tr class="odd">
<td>day/trip</td>
<td>VEHID</td>
<td>VEHID</td>
<td></td>
</tr>
<tr class="even">
<td>day/trip</td>
<td>VEHUSED</td>
<td>VEHID</td>
<td></td>
</tr>
<tr class="odd">
<td>day/trip</td>
<td>TRPHHVEH</td>
<td>TRPHHVEH</td>
<td></td>
</tr>
<tr class="even">
<td>day/trip</td>
<td>PERSONID</td>
<td>PERSONID</td>
<td></td>
</tr>
<tr class="odd">
<td>day/trip</td>
<td>NUMONTRP</td>
<td>NUMONTRP</td>
<td></td>
</tr>
<tr class="even">
<td>day/trip</td>
<td>TRPTRANS</td>
<td>TRPTRANS</td>
<td></td>
</tr>
<tr class="odd">
<td>day/trip</td>
<td>TRPMILES</td>
<td>TRPMILES</td>
<td></td>
</tr>
<tr class="even">
<td>day/trip</td>
<td>TRVL_MIN</td>
<td>TRVLCMIN</td>
<td></td>
</tr>
<tr class="odd">
<td>day/trip</td>
<td>DWELTIME</td>
<td>DWELTIME</td>
<td></td>
</tr>
<tr class="even">
<td>day/trip</td>
<td>PSGR_FLG</td>
<td>PSGR_FLG</td>
<td></td>
</tr>
<tr class="odd">
<td>day/trip</td>
<td>WHYFROM</td>
<td>WHYFROM</td>
<td></td>
</tr>
<tr class="even">
<td>day/trip</td>
<td>WHYTO</td>
<td>WHYTO</td>
<td></td>
</tr>
<tr class="odd">
<td>day/trip</td>
<td>VEHTYPE</td>
<td>VEHTYPE</td>
<td></td>
</tr>
<tr class="even">
<td>person</td>
<td>HOUSEID</td>
<td>HOUSEID</td>
<td></td>
</tr>
<tr class="odd">
<td>person</td>
<td>PERSONID</td>
<td>PERSONID</td>
<td></td>
</tr>
<tr class="even">
<td>person</td>
<td>COMMDRVR</td>
<td></td>
<td>Missing, assumed “-8=Don’t Know”</td>
</tr>
<tr class="odd">
<td>person</td>
<td>NBIKETRP</td>
<td>NBIKETRP</td>
<td></td>
</tr>
<tr class="even">
<td>person</td>
<td>NWALKTRP</td>
<td>NWALKTRP</td>
<td></td>
</tr>
<tr class="odd">
<td>person</td>
<td>USEPUBTR</td>
<td>USEPUBTR</td>
<td></td>
</tr>
<tr class="even">
<td>person</td>
<td>WRKDRIVE</td>
<td></td>
<td>Missing, assumed “-8=Don’t Know”</td>
</tr>
<tr class="odd">
<td>person</td>
<td>WRKTRANS</td>
<td>WRKTRANS</td>
<td></td>
</tr>
<tr class="even">
<td>person</td>
<td>WORKER</td>
<td>WORKER</td>
<td></td>
</tr>
<tr class="odd">
<td>person</td>
<td>DTGAS</td>
<td></td>
<td>Derived from PRICE variable in households file</td>
</tr>
<tr class="even">
<td>person</td>
<td>DISTTOWK</td>
<td>DISTTOWK17</td>
<td></td>
</tr>
<tr class="odd">
<td>person</td>
<td>DRIVER</td>
<td>DRIVER</td>
<td></td>
</tr>
<tr class="even">
<td>person</td>
<td>R_AGE</td>
<td>R_AGE</td>
<td></td>
</tr>
<tr class="odd">
<td>person</td>
<td>R_SEX</td>
<td>R_SEX</td>
<td></td>
</tr>
<tr class="even">
<td>hh</td>
<td>HOUSEID</td>
<td>HOUSEID</td>
<td></td>
</tr>
<tr class="odd">
<td>hh</td>
<td>AGE_P1</td>
<td></td>
<td>Derived from persons file</td>
</tr>
<tr class="even">
<td>hh</td>
<td>AGE_P2</td>
<td></td>
<td>Derived from persons file</td>
</tr>
<tr class="odd">
<td>hh</td>
<td>AGE_P3</td>
<td></td>
<td>Derived from persons file</td>
</tr>
<tr class="even">
<td>hh</td>
<td>AGE_P4</td>
<td></td>
<td>Derived from persons file</td>
</tr>
<tr class="odd">
<td>hh</td>
<td>AGE_P5</td>
<td></td>
<td>Derived from persons file</td>
</tr>
<tr class="even">
<td>hh</td>
<td>AGE_P6</td>
<td></td>
<td>Derived from persons file</td>
</tr>
<tr class="odd">
<td>hh</td>
<td>AGE_P7</td>
<td></td>
<td>Derived from persons file</td>
</tr>
<tr class="even">
<td>hh</td>
<td>AGE_P8</td>
<td></td>
<td>Derived from persons file</td>
</tr>
<tr class="odd">
<td>hh</td>
<td>AGE_P9</td>
<td></td>
<td>Derived from persons file</td>
</tr>
<tr class="even">
<td>hh</td>
<td>AGE_P10</td>
<td></td>
<td>Derived from persons file</td>
</tr>
<tr class="odd">
<td>hh</td>
<td>AGE_P11</td>
<td></td>
<td>Derived from persons file</td>
</tr>
<tr class="even">
<td>hh</td>
<td>AGE_P12</td>
<td></td>
<td>Derived from persons file</td>
</tr>
<tr class="odd">
<td>hh</td>
<td>AGE_P13</td>
<td></td>
<td>Derived from persons file</td>
</tr>
<tr class="even">
<td>hh</td>
<td>AGE_P14</td>
<td></td>
<td>Derived from persons file</td>
</tr>
<tr class="odd">
<td>hh</td>
<td>CENSUS_D</td>
<td>CENSUS_D</td>
<td></td>
</tr>
<tr class="even">
<td>hh</td>
<td>CENSUS_R</td>
<td>CENSUS_R</td>
<td></td>
</tr>
<tr class="odd">
<td>hh</td>
<td>DRVRCNT</td>
<td>DRVRCNT</td>
<td></td>
</tr>
<tr class="even">
<td>hh</td>
<td>DRV_P1</td>
<td></td>
<td>Derived from persons file</td>
</tr>
<tr class="odd">
<td>hh</td>
<td>DRV_P2</td>
<td></td>
<td>Derived from persons file</td>
</tr>
<tr class="even">
<td>hh</td>
<td>DRV_P3</td>
<td></td>
<td>Derived from persons file</td>
</tr>
<tr class="odd">
<td>hh</td>
<td>DRV_P4</td>
<td></td>
<td>Derived from persons file</td>
</tr>
<tr class="even">
<td>hh</td>
<td>DRV_P5</td>
<td></td>
<td>Derived from persons file</td>
</tr>
<tr class="odd">
<td>hh</td>
<td>DRV_P6</td>
<td></td>
<td>Derived from persons file</td>
</tr>
<tr class="even">
<td>hh</td>
<td>DRV_P7</td>
<td></td>
<td>Derived from persons file</td>
</tr>
<tr class="odd">
<td>hh</td>
<td>DRV_P8</td>
<td></td>
<td>Derived from persons file</td>
</tr>
<tr class="even">
<td>hh</td>
<td>DRV_P9</td>
<td></td>
<td>Derived from persons file</td>
</tr>
<tr class="odd">
<td>hh</td>
<td>DRV_P10</td>
<td></td>
<td>Derived from persons file</td>
</tr>
<tr class="even">
<td>hh</td>
<td>DRV_P11</td>
<td></td>
<td>Derived from persons file</td>
</tr>
<tr class="odd">
<td>hh</td>
<td>DRV_P12</td>
<td></td>
<td>Derived from persons file</td>
</tr>
<tr class="even">
<td>hh</td>
<td>DRV_P13</td>
<td></td>
<td>Derived from persons file</td>
</tr>
<tr class="odd">
<td>hh</td>
<td>DRV_P14</td>
<td></td>
<td>Derived from persons file</td>
</tr>
<tr class="even">
<td>hh</td>
<td>EXPFLHHN</td>
<td>WTHHFIN</td>
<td></td>
</tr>
<tr class="odd">
<td>hh</td>
<td>EXPFLLHH</td>
<td>WTHHFIN</td>
<td></td>
</tr>
<tr class="even">
<td>hh</td>
<td>FLGFINCM</td>
<td></td>
<td>Assumed “1=Yes” all household members incomes are reported</td>
</tr>
<tr class="odd">
<td>hh</td>
<td>HBHRESDN</td>
<td>HBRESDN</td>
<td></td>
</tr>
<tr class="even">
<td>hh</td>
<td>HBHUR</td>
<td>HBHUR</td>
<td></td>
</tr>
<tr class="odd">
<td>hh</td>
<td>HBPPOPDN</td>
<td>HBPPOPDN</td>
<td></td>
</tr>
<tr class="even">
<td>hh</td>
<td>HHC_MSA</td>
<td>HH_CBSA</td>
<td>Derived from msa_xwalk of HH_CBSA</td>
</tr>
<tr class="odd">
<td>hh</td>
<td>HHFAMINC</td>
<td>HHFAMINC</td>
<td></td>
</tr>
<tr class="even">
<td>hh</td>
<td>HHINCTTL</td>
<td>HHFAMINC</td>
<td></td>
</tr>
<tr class="odd">
<td>hh</td>
<td>HHNUMBIK</td>
<td></td>
<td>Missing, assumed “-8=Don’t Know”</td>
</tr>
<tr class="even">
<td>hh</td>
<td>HHR_AGE</td>
<td></td>
<td>Derived from persons file</td>
</tr>
<tr class="odd">
<td>hh</td>
<td>HHR_DRVR</td>
<td></td>
<td>Derived from persons file</td>
</tr>
<tr class="even">
<td>hh</td>
<td>HHR_RACE</td>
<td>HH_RACE</td>
<td>Derived from persons file</td>
</tr>
<tr class="odd">
<td>hh</td>
<td>HHR_SEX</td>
<td></td>
<td>Derived from persons file</td>
</tr>
<tr class="even">
<td>hh</td>
<td>HHSIZE</td>
<td>HHSIZE</td>
<td></td>
</tr>
<tr class="odd">
<td>hh</td>
<td>HHVEHCNT</td>
<td>HHVEHCNT</td>
<td></td>
</tr>
<tr class="even">
<td>hh</td>
<td>HOMETYPE</td>
<td></td>
<td>Missing, critical column that must be imputed</td>
</tr>
<tr class="odd">
<td>hh</td>
<td>HTEEMPDN</td>
<td>HTEEMPDN</td>
<td></td>
</tr>
<tr class="even">
<td>hh</td>
<td>HTHRESDN</td>
<td>HTRESDN</td>
<td></td>
</tr>
<tr class="odd">
<td>hh</td>
<td>HTHUR</td>
<td>HBHUR</td>
<td></td>
</tr>
<tr class="even">
<td>hh</td>
<td>HTPPOPDN</td>
<td>HTPPOPDN</td>
<td></td>
</tr>
<tr class="odd">
<td>hh</td>
<td>LIF_CYC</td>
<td>LIF_CYC</td>
<td></td>
</tr>
<tr class="even">
<td>hh</td>
<td>MSAPOP</td>
<td></td>
<td>Imputed as mean value of MSASIZE bins</td>
</tr>
<tr class="odd">
<td>hh</td>
<td>MSACAT</td>
<td>MSACAT</td>
<td></td>
</tr>
<tr class="even">
<td>hh</td>
<td>MSASIZE</td>
<td>MSASIZE</td>
<td></td>
</tr>
<tr class="odd">
<td>hh</td>
<td>RAIL</td>
<td>RAIL</td>
<td></td>
</tr>
<tr class="even">
<td>hh</td>
<td>RATIO16V</td>
<td></td>
<td>Derived from persons and households table</td>
</tr>
<tr class="odd">
<td>hh</td>
<td>URBAN</td>
<td>URBAN</td>
<td></td>
</tr>
<tr class="even">
<td>hh</td>
<td>URBRUR</td>
<td>URBRUR</td>
<td></td>
</tr>
<tr class="odd">
<td>hh</td>
<td>WRKCOUNT</td>
<td>WRKCOUNT</td>
<td></td>
</tr>
<tr class="even">
<td>hh</td>
<td>WKR_P1</td>
<td></td>
<td>Derived from persons file</td>
</tr>
<tr class="odd">
<td>hh</td>
<td>WKR_P2</td>
<td></td>
<td>Derived from persons file</td>
</tr>
<tr class="even">
<td>hh</td>
<td>WKR_P3</td>
<td></td>
<td>Derived from persons file</td>
</tr>
<tr class="odd">
<td>hh</td>
<td>WKR_P4</td>
<td></td>
<td>Derived from persons file</td>
</tr>
<tr class="even">
<td>hh</td>
<td>WKR_P5</td>
<td></td>
<td>Derived from persons file</td>
</tr>
<tr class="odd">
<td>hh</td>
<td>WKR_P6</td>
<td></td>
<td>Derived from persons file</td>
</tr>
<tr class="even">
<td>hh</td>
<td>WKR_P7</td>
<td></td>
<td>Derived from persons file</td>
</tr>
<tr class="odd">
<td>hh</td>
<td>WKR_P8</td>
<td></td>
<td>Derived from persons file</td>
</tr>
<tr class="even">
<td>hh</td>
<td>WKR_P9</td>
<td></td>
<td>Derived from persons file</td>
</tr>
<tr class="odd">
<td>hh</td>
<td>WKR_P10</td>
<td></td>
<td>Derived from persons file</td>
</tr>
<tr class="even">
<td>hh</td>
<td>WKR_P11</td>
<td></td>
<td>Derived from persons file</td>
</tr>
<tr class="odd">
<td>hh</td>
<td>WKR_P12</td>
<td></td>
<td>Derived from persons file</td>
</tr>
<tr class="even">
<td>hh</td>
<td>WKR_P13</td>
<td></td>
<td>Derived from persons file</td>
</tr>
<tr class="odd">
<td>hh</td>
<td>WKR_P14</td>
<td></td>
<td>Derived from persons file</td>
</tr>
<tr class="even">
<td>hh</td>
<td>CNTTDHH</td>
<td>CNTTDHH</td>
<td></td>
</tr>
</tbody>
</table>
</div>
<div id="cbsa-to-msa-crosswalk" class="section level4" number="1.3.0.2">
<h4><span class="header-section-number">1.3.0.2</span> CBSA to MSA Crosswalk</h4>
<p>VisionEval uses Metropolitan Statistical Areas (MSA) to join road and transit data onto NHTS data. However, the 2017 version of NHTS uses core based statistical areas (CBSA), which include both MSAs and the smaller micropolitan statistical areas. To make the 2017 NHTS data backwards compatible, a CBSA to MSA crosswalk was used to aggregate CBSAs in the 2017 NHTS data to MSAs.</p>
</div>
<div id="feature-derivations" class="section level4" number="1.3.0.3">
<h4><span class="header-section-number">1.3.0.3</span> Feature Derivations</h4>
<p>Derived features require no imputation, but are created by joining and aggregating or calculating the data to create the new column as necessary. For example, the age group columns (e.g., AGE_P1-14, DRV_P1-14, and WKR_P1-14) are created by joining the persons table to the households table on <code>HOUSEID</code>, then tabulating the number of persons in each age group in each household.</p>
</div>
<div id="imputation-of-missing-hometype-column" class="section level4" number="1.3.0.4">
<h4><span class="header-section-number">1.3.0.4</span> Imputation of Missing <code>HOMETYPE</code> column</h4>
<p>There are several missing data variables in the 2017 data since the 2001 version:</p>
<ul>
<li><p><code>HOMETYPE</code>: Housing structure type (e.g., Single Family, Duplex, Multi-Family, etc.)</p></li>
<li><p><code>COMMDRV</code>: Commercial driver</p></li>
<li><p><code>WRKDRIVE</code>: Driving required for work</p></li>
<li><p><code>HHNUMBIK</code>: Number of bicycles in household</p></li>
</ul>
<p>One variable is absolutely critical to the current VisionEval model: <code>HOMETYPE</code>. This variable used in the downstream models and will cause estimations in downstream models to fail. Below is a summary of build results if <code>HOMETYPE</code> is missing or filled with a dummy “Missing” value.</p>
<table>
<colgroup>
<col width="18%" />
<col width="18%" />
<col width="18%" />
<col width="24%" />
<col width="18%" />
</colgroup>
<thead>
<tr class="header">
<th>Module</th>
<th>R script</th>
<th>Model</th>
<th>Outcome</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>VEHouseholdVehicles</td>
<td>AdjustVehicleOwnership</td>
<td>None (adjustment)</td>
<td>Success</td>
<td></td>
</tr>
<tr class="even">
<td></td>
<td>AssignDrivers</td>
<td>lm in estimateDriverModel</td>
<td>Warning message: In predict.lm(object, newdata, se.fit, scale = 1, type = if (type == : prediction from a rank-deficient fit may be isleading</td>
<td>Missing Hometype causes estimation failure with NA coefficient</td>
</tr>
<tr class="odd">
<td></td>
<td>AssignVehicleAge</td>
<td>None (assignment)</td>
<td>Success with minor modification to vehicle age, reference year was 2001</td>
<td></td>
</tr>
<tr class="even">
<td></td>
<td>AssignVehicleFeatures</td>
<td>None (assignment)</td>
<td>Success</td>
<td></td>
</tr>
<tr class="odd">
<td></td>
<td>AssignVehicleFeaturesFuture</td>
<td>None (assignment)</td>
<td>Success</td>
<td></td>
</tr>
<tr class="even">
<td></td>
<td>AssignVehicleOwnership</td>
<td>clm &amp; glm</td>
<td>Success with warning on AutoOwnModels_ls\$Metro$Zero &lt;- glm()</td>
<td>Missing Hometype causes estimation failure with NA coefficient</td>
</tr>
<tr class="odd">
<td></td>
<td>AssignVehicleType</td>
<td>glm estimateVehicleTypeModel</td>
<td>Error (Error in ‘binarySearch’ function to match target value)</td>
<td>Missing Hometype with NA coefficient causes estimation failure.</td>
</tr>
<tr class="even">
<td></td>
<td>CalculateVehicleOwnCost</td>
<td>None (calculation)</td>
<td>Success</td>
<td></td>
</tr>
<tr class="odd">
<td></td>
<td>CreateVehicleTable</td>
<td>None (assignment)</td>
<td>Success</td>
<td></td>
</tr>
<tr class="even">
<td></td>
<td>Finalize</td>
<td>None (assignment)</td>
<td>Success</td>
<td></td>
</tr>
<tr class="odd">
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>VEHouseholdTravel</td>
<td>ApplyDvmtReductions</td>
<td>None (assignment)</td>
<td>Success</td>
<td></td>
</tr>
<tr class="odd">
<td></td>
<td>CalculateAltModeTrips</td>
<td>Hurdle</td>
<td>Success</td>
<td></td>
</tr>
<tr class="even">
<td></td>
<td>CalculateHouseholdDvmt</td>
<td>BinarySearch</td>
<td>Success</td>
<td></td>
</tr>
<tr class="odd">
<td></td>
<td>CalculateInducedDemand</td>
<td>None (calculation)</td>
<td>Success</td>
<td></td>
</tr>
<tr class="even">
<td></td>
<td>CalculatePolicyVmt</td>
<td>None (calculation)</td>
<td>Success</td>
<td></td>
</tr>
<tr class="odd">
<td></td>
<td>CalculateTravelDemand</td>
<td>None (calculation)</td>
<td>Success</td>
<td></td>
</tr>
<tr class="even">
<td></td>
<td>CalculateTravelDemandFuture</td>
<td>None (calculation)</td>
<td>Success</td>
<td></td>
</tr>
<tr class="odd">
<td></td>
<td>CalculateVehicleTrips</td>
<td>None (calculation)</td>
<td>Success</td>
<td></td>
</tr>
<tr class="even">
<td></td>
<td>DivertSovTravel</td>
<td>ZeroSov_GLM</td>
<td>Success</td>
<td></td>
</tr>
<tr class="odd">
<td></td>
<td>Initialize</td>
<td>None</td>
<td>Success</td>
<td></td>
</tr>
<tr class="even">
<td></td>
<td>LoadDefaultValues</td>
<td>None</td>
<td>Success</td>
<td></td>
</tr>
<tr class="odd">
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>VEPowertrainsAndFuels</td>
<td>Initialize</td>
<td>None</td>
<td>Success</td>
<td></td>
</tr>
<tr class="odd">
<td></td>
<td>LoadDefaultValues</td>
<td>None</td>
<td>Success</td>
<td></td>
</tr>
<tr class="even">
<td></td>
<td>CalculateCarbonIntensity</td>
<td>None (calculation)</td>
<td>Success</td>
<td></td>
</tr>
<tr class="odd">
<td></td>
<td>AssignHhVehiclePowertrain</td>
<td>None (assignment)</td>
<td>Success</td>
<td></td>
</tr>
<tr class="even">
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>VELandUse</td>
<td>AssignCarSvcAvailability</td>
<td>None (assignment)</td>
<td>Success</td>
<td></td>
</tr>
<tr class="even">
<td></td>
<td>AssignDemandManagement</td>
<td>None (assignment)</td>
<td>Success</td>
<td></td>
</tr>
<tr class="odd">
<td></td>
<td>AssignDevTypes</td>
<td>None (assignment)</td>
<td>Success</td>
<td></td>
</tr>
<tr class="even">
<td></td>
<td>AssignLocTypes</td>
<td>None (assignment)</td>
<td>Success</td>
<td></td>
</tr>
<tr class="odd">
<td></td>
<td>AssignParkingRestrictions</td>
<td>None (assignment)</td>
<td>Success</td>
<td></td>
</tr>
<tr class="even">
<td></td>
<td>Calculate4DMeasures</td>
<td>None (calculation)</td>
<td>Success</td>
<td></td>
</tr>
<tr class="odd">
<td></td>
<td>CalculateBasePlaceTypes</td>
<td>None (calculation)</td>
<td>Success</td>
<td></td>
</tr>
<tr class="even">
<td></td>
<td>CalculateFuturePlaceTypes</td>
<td>None (calculation)</td>
<td>Success</td>
<td></td>
</tr>
<tr class="odd">
<td></td>
<td>CalculateUrbanMixMeasure</td>
<td>CalculateUrbanMixMeasure binarySearch</td>
<td>Error (Error in ‘binarySearch’ function to match target value)</td>
<td>Missing Hometype with NA coefficient causes estimation failure.</td>
</tr>
<tr class="even">
<td></td>
<td>LocateEmployment</td>
<td>None (assignment)</td>
<td>Success</td>
<td></td>
</tr>
<tr class="odd">
<td></td>
<td>PredictHousing</td>
<td>HouseTypeModel glm</td>
<td>Failure</td>
<td>Estimation runs, but results bad (all same values)</td>
</tr>
</tbody>
</table>
</div>
<div id="summary-results" class="section level3" number="1.3.1">
<h3><span class="header-section-number">1.3.1</span> Summary results</h3>
<p>To provide an overview of NHTS 2001 to 2017 results, below are comparative plots for each data column between data sets:</p>
<p><img src="xx-VENHTS_files/figure-html/hh_plots-1.png" width="100%" height="20%" /><img src="xx-VENHTS_files/figure-html/hh_plots-2.png" width="100%" height="20%" /><img src="xx-VENHTS_files/figure-html/hh_plots-3.png" width="100%" height="20%" /><img src="xx-VENHTS_files/figure-html/hh_plots-4.png" width="100%" height="20%" /><img src="xx-VENHTS_files/figure-html/hh_plots-5.png" width="100%" height="20%" /><img src="xx-VENHTS_files/figure-html/hh_plots-6.png" width="100%" height="20%" /><img src="xx-VENHTS_files/figure-html/hh_plots-7.png" width="100%" height="20%" /><img src="xx-VENHTS_files/figure-html/hh_plots-8.png" width="100%" height="20%" /><img src="xx-VENHTS_files/figure-html/hh_plots-9.png" width="100%" height="20%" /><img src="xx-VENHTS_files/figure-html/hh_plots-10.png" width="100%" height="20%" /></p>
</div>
</div>
</div>
  </main>

  <div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page">
      <h2>On this page</h2>
      <div id="book-on-this-page"></div>

      <div class="book-extra">
        <ul class="list-unstyled">
          <li><a id="book-source" href="#">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="#">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
      </div>
    </nav>
  </div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5">
  <div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>VE NHTS</strong>" was written by Nick Fournier. It was last built on 2022-07-15.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer>


</body>

</html>
